import{a as P}from"./chunk-BU32CD6P.js";import"./chunk-25AVAB3I.js";import{v as p}from"./chunk-DK23A5VB.js";import"./chunk-NOUYXRP4.js";import"./chunk-Q7K227NX.js";import"./chunk-GHXDYQ3O.js";import"./chunk-ZOOQQO74.js";import"./chunk-Z6GY36V7.js";import"./chunk-B7IX6UFG.js";import"./chunk-TNPL7MIN.js";import{i as x}from"./chunk-6Z72A4BT.js";import{a as f}from"./chunk-4XUK6P2F.js";import"./chunk-ERLUQYBV.js";import"./chunk-B6VNGUER.js";import"./chunk-4D3QHJI2.js";import"./chunk-E2J2V7JN.js";import"./chunk-37H4LYIE.js";import"./chunk-HUYHDVA2.js";import{b as I}from"./chunk-JPYM7Q24.js";import"./chunk-BRJSO7CG.js";import"./chunk-AATZFFI5.js";import{C}from"./chunk-EWHTP5EW.js";import"./chunk-VEC2OYBS.js";import"./chunk-LJK37ZQL.js";import"./chunk-227GSM7M.js";import"./chunk-JJANIEGN.js";import"./chunk-WR6DOBQL.js";import"./chunk-UWZJQ7YC.js";import"./chunk-HKSYSHBE.js";import"./chunk-UJ6V7JUK.js";import"./chunk-VXJKEPDS.js";import"./chunk-6KRFVLII.js";import"./chunk-CJYUOBHK.js";import"./chunk-TX7DVQYF.js";import"./chunk-2ETHV3H2.js";import"./chunk-WVCJLLRA.js";import"./chunk-OVOWBDBP.js";import"./chunk-4XUOIGFO.js";import"./chunk-7LEG2VDW.js";import"./chunk-G24ZJINL.js";import"./chunk-FOMIQQJB.js";import"./chunk-ORM3VHG6.js";import"./chunk-HTWD7KCG.js";import{a as v,b as y}from"./chunk-AM3VOA32.js";import"./chunk-SAOUSUZE.js";import"./chunk-FVDACA4R.js";import"./chunk-DFTBSFIN.js";import"./chunk-4HISZWR4.js";import"./chunk-SJW4NR3T.js";import"./chunk-TQAPQODA.js";import"./chunk-M2GLXRA2.js";import"./chunk-EBWCXIFH.js";import"./chunk-M76YZBV5.js";import"./chunk-HXQMOXFX.js";import"./chunk-BKKKVIAS.js";import"./chunk-BCREO4Q5.js";import"./chunk-ZVHU7VE3.js";import"./chunk-76YVRX2R.js";import"./chunk-OZF6BMOL.js";import"./chunk-GJP6PTKT.js";import"./chunk-RSDQHAJX.js";import"./chunk-W47PGZ3Y.js";import"./chunk-2OT2C2UU.js";import"./chunk-XIMCHX2H.js";import"./chunk-SF6Z2K5H.js";import"./chunk-GBTN5LIS.js";import"./chunk-JOSG37QF.js";import"./chunk-SLMQFZE3.js";import"./chunk-DJULDHPW.js";import"./chunk-NDG5FXLR.js";import"./chunk-V477EWXM.js";import"./chunk-5ODCEDHC.js";import"./chunk-BENVXA3L.js";import"./chunk-2KZICFRS.js";import"./chunk-D2RUV6O4.js";import"./chunk-4JWMB5SM.js";import"./chunk-VOYK3LZF.js";import"./chunk-HOJTYTYD.js";import"./chunk-XNEAL2YW.js";import"./chunk-J7M5V2SQ.js";import"./chunk-HRFJUMCP.js";import"./chunk-375OYO4P.js";import"./chunk-AUTL5LCV.js";import"./chunk-KUJG22IX.js";import"./chunk-OVHPPCBL.js";import"./chunk-W3WDPWBE.js";import"./chunk-GISCFF3Z.js";import"./chunk-MLSR6YE6.js";import"./chunk-SNFOAZZQ.js";import"./chunk-CPDJJRWA.js";import"./chunk-VU5W7W6Y.js";import"./chunk-HQMV3KQV.js";import"./chunk-CRMMDK2Z.js";import{h as u}from"./chunk-EAH6BNBL.js";var d=new P(null),h=y(f.size),z=y(f.maxSize),L=y(f.lineWidth),T=1;function V(r,e,n){return u(this,null,function*(){let t=e?.size,l=t!=null&&typeof t=="object"&&"width"in t?t.width:t,a=t!=null&&typeof t=="object"&&"height"in t?t.height:t;if(l==null||a==null)if(n==="esriGeometryPolygon")l=h,a=h;else{let i=yield q(r,e,n);i&&(l=i.width,a=i.height),n==="esriGeometryPolyline"&&(l=L),l=l!=null&&isFinite(l)?Math.min(l,z):h,a=a!=null&&isFinite(a)?Math.max(Math.min(a,z),T):h}return e.style==="legend"&&n==="esriGeometryPolyline"&&(l=L),{width:l,height:a}})}function q(r,e,n){return u(this,null,function*(){let{feature:t,fieldMap:l,viewParams:a}=e.cimOptions||e,i=yield I.resolveSymbolOverrides(r.data,t,null,l,n,null,a);if(!i)return null;(r=r.clone()).data={type:"CIMSymbolReference",symbol:i},r.data.primitiveOverrides=void 0;let o=[];return p.fetchResources(i,d.resourceManager,o),p.fetchFonts(i,d.resourceManager,o),o.length>0&&(yield Promise.all(o)),p.getEnvelope(i,null,d.resourceManager)})}function B(n){return u(this,arguments,function*(r,e={}){let{node:t,opacity:l,symbolConfig:a}=e,i=a!=null&&typeof a=="object"&&"isSquareFill"in a&&a.isSquareFill,o=e.cimOptions||e,g=o.geometryType||C(r?.data?.symbol),w=yield V(r,e,g),{feature:F,fieldMap:G}=o,O=i||g!=="esriGeometryPolygon"?"preview":"legend",b=yield d.rasterizeCIMSymbolAsync(r,F,w,O,G,g,null,o.viewParams,o.allowScalingUp);if(!b)return null;let{width:j,height:R}=b,m=document.createElement("canvas");m.width=j,m.height=R,m.getContext("2d").putImageData(b,0,0);let M=v(w.width),S=v(w.height),s=new Image(M,S);s.src=m.toDataURL(),s.ariaLabel=e.ariaLabel??null,s.alt=e.ariaLabel??"",l!=null&&(s.style.opacity=`${l}`);let c=s;if(e.effectView!=null){let D={shape:{type:"image",x:0,y:0,width:M,height:S,src:s.src},fill:null,stroke:null,offset:[0,0]};c=x([[D]],[M,S],{effectView:e.effectView,ariaLabel:e.ariaLabel})}return t&&c&&t.appendChild(c),c})}export{B as previewCIMSymbol};
