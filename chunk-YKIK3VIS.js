import{c as f}from"./chunk-C4KJ5QFP.js";import{G as p,Ja as g,Ka as F,La as V,Ma as j,Na as v,Oa as D,R as T,Z as m,_ as o,b as d,c as u,ha as s,na as y,pa as b,va as A,wa as x,xa as w}from"./chunk-VUJUH7MP.js";import"./chunk-JDLVIKS3.js";import"./chunk-YTDHENVR.js";import"./chunk-LX3TXNPU.js";import"./chunk-YTC2EJDQ.js";import"./chunk-ERH7ZNSC.js";import"./chunk-5HCLBNUR.js";import"./chunk-QBQKFGOZ.js";import"./chunk-XKXYUJUA.js";import"./chunk-F7PIPM6E.js";import"./chunk-FR6Q4MSQ.js";import"./chunk-C6JT6KYF.js";import"./chunk-BCREO4Q5.js";import"./chunk-6FWNINU2.js";import"./chunk-ES7AH7WX.js";import"./chunk-RSDQHAJX.js";import"./chunk-BENVXA3L.js";import"./chunk-UI76XBLJ.js";import"./chunk-UE2YGKE7.js";import"./chunk-BE76S5KT.js";import"./chunk-3RDV3O6N.js";import"./chunk-D2ITYHSM.js";import"./chunk-FIITBHDP.js";import"./chunk-VSVNPPHQ.js";import"./chunk-CTGIUUCS.js";import"./chunk-VWEBO6QK.js";import"./chunk-KAAR5ZJN.js";import"./chunk-W3WDPWBE.js";import"./chunk-WKT5W7KT.js";import"./chunk-MLSR6YE6.js";import"./chunk-JPDAKIWT.js";import"./chunk-X3IDZTNG.js";import"./chunk-IQJU4QT3.js";import{h as c}from"./chunk-EAH6BNBL.js";function I(a,e){return a&&a.domain?a.domain.type==="coded-value"||a.domain.type==="codedValue"?f.convertObjectToArcadeDictionary({type:"codedValue",name:a.domain.name,dataType:p[a.field.type],codedValues:a.domain.codedValues.map(t=>({name:t.name,code:t.code}))},v(e)):f.convertObjectToArcadeDictionary({type:"range",name:a.domain.name,dataType:p[a.field.type],min:a.domain.minValue,max:a.domain.maxValue},v(e)):null}function C(a){a.mode==="async"&&(a.functions.domain=function(e,t){return a.standardFunctionAsync(e,t,(i,l,n)=>c(this,null,function*(){if(s(n,2,3,e,t),m(n[0]))return I(g(n[0],y(n[1]),n[2]===void 0?void 0:n[2]),e);if(o(n[0]))return yield n[0]._ensureLoaded(),I(w(y(n[1]),n[0],null,n[2]===void 0?void 0:n[2]),e);throw new u(e,d.InvalidParameter,t)}))},a.functions.subtypes=function(e,t){return a.standardFunctionAsync(e,t,(i,l,n)=>c(this,null,function*(){if(s(n,1,1,e,t),m(n[0])){let r=F(n[0]);return r?f.convertObjectToArcadeDictionary(r,v(e)):null}if(o(n[0])){yield n[0]._ensureLoaded();let r=n[0].subtypeMetaData();return r?f.convertObjectToArcadeDictionary(r,v(e)):null}throw new u(e,d.InvalidParameter,t)}))},a.functions.domainname=function(e,t){return a.standardFunctionAsync(e,t,(i,l,n)=>c(this,null,function*(){if(s(n,2,4,e,t),m(n[0]))return V(n[0],y(n[1]),n[2],n[3]===void 0?void 0:n[3]);if(o(n[0])){yield n[0]._ensureLoaded();let r=w(y(n[1]),n[0],null,n[3]===void 0?void 0:n[3]);return A(r,n[2])}throw new u(e,d.InvalidParameter,t)}))},a.signatures.push({name:"domainname",min:2,max:4}),a.functions.domaincode=function(e,t){return a.standardFunctionAsync(e,t,(i,l,n)=>c(this,null,function*(){if(s(n,2,4,e,t),m(n[0]))return j(n[0],y(n[1]),n[2],n[3]===void 0?void 0:n[3]);if(o(n[0])){yield n[0]._ensureLoaded();let r=w(y(n[1]),n[0],null,n[3]===void 0?void 0:n[3]);return x(r,n[2])}throw new u(e,d.InvalidParameter,t)}))},a.signatures.push({name:"domaincode",min:2,max:4})),a.functions.text=function(e,t){return a.standardFunctionAsync(e,t,(i,l,n)=>{if(s(n,1,2,e,t),!o(n[0]))return b(n[0],n[1]);{let r=T(n[1],"");if(r==="")return n[0].castToText();if(r.toLowerCase()==="schema")return n[0].convertToText("schema",i.abortSignal);if(r.toLowerCase()==="featureset")return n[0].convertToText("featureset",i.abortSignal)}})},a.functions.gdbversion=function(e,t){return a.standardFunctionAsync(e,t,(i,l,n)=>c(this,null,function*(){if(s(n,1,1,e,t),m(n[0]))return n[0].gdbVersion();if(o(n[0]))return(yield n[0].load()).gdbVersion;throw new u(e,d.InvalidParameter,t)}))},a.functions.schema=function(e,t){return a.standardFunctionAsync(e,t,(i,l,n)=>c(this,null,function*(){if(s(n,1,1,e,t),o(n[0]))return yield n[0].load(),f.convertObjectToArcadeDictionary(n[0].schema(),v(e));if(m(n[0])){let r=D(n[0]);return r?f.convertObjectToArcadeDictionary(r,v(e)):null}throw new u(e,d.InvalidParameter,t)}))}}export{C as registerFunctions};
