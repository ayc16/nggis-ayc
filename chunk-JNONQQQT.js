import{a as re}from"./chunk-FHBFWDFD.js";import{a as be}from"./chunk-3SWZR32A.js";import{a as se,b as ue,c as ce,d as fe,e as me,f as de,g as D,i as pe}from"./chunk-DXCDSOAV.js";import{a as ne}from"./chunk-4XUK6P2F.js";import{a as ie}from"./chunk-3SBNJPR7.js";import{a as te,c as $,j as C,k as I,l as ae,m as le,n as B,p as oe}from"./chunk-HHIR5BNR.js";import{a as Q}from"./chunk-XSGDUFLB.js";import{g as c}from"./chunk-WVCJLLRA.js";import{e as M,f as J,j as K}from"./chunk-OVOWBDBP.js";import{a as ee}from"./chunk-EETFV2SL.js";import{b as Z}from"./chunk-76YVRX2R.js";import{h as N}from"./chunk-XIMCHX2H.js";import{t as G}from"./chunk-KUJG22IX.js";import{f as j}from"./chunk-CRMMDK2Z.js";import{a as T,b as R,d as Y,h as q}from"./chunk-EAH6BNBL.js";function je(l,o){var r=l,{level:e,class:t}=r,a=Y(r,["level","class"]);let i=ye(e);return c(`h${i}`,R(T({},a),{"aria-level":String(i),class:M(re.heading,t),role:"heading"}),o)}function ye(e){return Z(Math.ceil(e),1,6)}function Ge(e,t=1){return ye(e+t)}function Ze(){return function(e,t){if(!e[t])throw new TypeError(`Cannot auto bind undefined function '${String(t)}'`);return{value:qe(e[t])}}}function Re(e){let t=e?.type;return e instanceof KeyboardEvent||t==="keyup"||t==="keydown"||t==="keypress"}function qe(e){return function(t,...a){Re(t)?K(t.key)&&(t.preventDefault(),t.stopPropagation(),t.target.click()):e.call(this,t,...a)}}var ge="esri-relationship-ramp",F=`${ge}--diamond`,V=`${ge}--square`,Fe="http://www.w3.org/2000/svg",f={diamondContainer:`${F}__container`,diamondLeftCol:`${F}__left-column`,diamondRightCol:`${F}__right-column`,diamondMidCol:`${F}__middle-column`,diamondMidColLabel:`${F}__middle-column--label`,diamondMidColRamp:`${F}__middle-column--ramp`,squareTable:`${V}__table`,squareTableRow:`${V}__table-row`,squareTableCell:`${V}__table-cell`,squareTableLabel:`${V}__table-label`,squareTableLabelLeftBottom:`${V}__table-label--left-bottom`,squareTableLabelRightBottom:`${V}__table-label--right-bottom`,squareTableLabelLeftTop:`${V}__table-label--left-top`,squareTableLabelRightTop:`${V}__table-label--right-top`};function Ee(e,t,a={}){let{focus:o,labels:l}=e,r=!!o,i=$e(e,t,a),u={justifyContent:"center"},p=J();return r?c("div",{class:f.diamondContainer,styles:u},c("div",{class:f.diamondLeftCol},p?l.right:l.left),c("div",{class:f.diamondMidCol},c("div",{class:f.diamondMidColLabel},l.top),i,c("div",{class:f.diamondMidColLabel},l.bottom)),c("div",{class:f.diamondRightCol},p?l.left:l.right)):c("div",{class:f.squareTable},c("div",{class:f.squareTableRow},c("div",{class:M(f.squareTableCell,f.squareTableLabel,f.squareTableLabelRightBottom)},p?l.top:l.left),c("div",{class:f.squareTableCell}),c("div",{class:M(f.squareTableCell,f.squareTableLabel,f.squareTableLabelLeftBottom)},p?l.left:l.top)),c("div",{class:f.squareTableRow},c("div",{class:f.squareTableCell}),i,c("div",{class:f.squareTableCell})),c("div",{class:f.squareTableRow},c("div",{class:M(f.squareTableCell,f.squareTableLabel,f.squareTableLabelRightTop)},p?l.right:l.bottom),c("div",{class:f.squareTableCell}),c("div",{class:M(f.squareTableCell,f.squareTableLabel,f.squareTableLabelLeftTop)},p?l.bottom:l.right)))}function he(e,t,a){let o=`${a}_arrowStart`,l=`${a}_arrowEnd`,r=e==="left",i={markerStart:null,markerEnd:null};switch(t){case"HL":r?i.markerStart=`url(#${l})`:i.markerEnd=`url(#${o})`;break;case"LL":i.markerStart=`url(#${l})`;break;case"LH":r?i.markerEnd=`url(#${o})`:i.markerStart=`url(#${l})`;break;default:i.markerEnd=`url(#${o})`}return i}function $e(e,t,a={}){let{focus:o,numClasses:l,colors:r,rotation:i}=e,{opacity:u,effectList:p,ariaLabel:h}=a,m=a.size??60,d=!!o,s=Math.sqrt(m**2+m**2)+(d?0:5),y=[],n=[],g=[],w=(m||75)/l;for(let _=0;_<l;_++){let Te=_*w;for(let z=0;z<l;z++){let Me=z*w,P=ue(r[_][z]),He=ce(null),W={type:"rect",x:Me,y:Te,width:w,height:w},U=fe(P);U&&y.push(U);let X=se(W,P.fill,He,null);X&&n.push(X),g.push(me(W))}}let k=10,v=15,b=15,S=10,x=null;d||(x="margin: -15px -15px -18px -15px");let H=he("left",o,t),A=he("right",o,t),O=de(g),xe=D(O,s,s,0,!1,i,!1),Ce=D(O,s,s,0,!1,d?-45:null,!1),Ve={filter:B(p)??void 0,opacity:u==null?"":`${u}`};return c("div",{class:d?f.diamondMidColRamp:f.squareTableCell,styles:Ve},c("svg",{"aria-label":h,focusable:!1,height:s,role:"image",style:x,width:s,xmlns:Fe},c("defs",null,c("marker",{id:`${t}_arrowStart`,markerHeight:"10",markerUnits:"strokeWidth",markerWidth:"10",orient:"auto",refX:"5",refY:"5"},c("polyline",{fill:"none",points:"0,0 5,5 0,10",stroke:"#555555","stroke-width":"1"})),c("marker",{id:`${t}_arrowEnd`,markerHeight:"10",markerUnits:"strokeWidth",markerWidth:"10",orient:"auto",refX:"0",refY:"5"},c("polyline",{fill:"none",points:"5,0 0,5 5,10",stroke:"#555555","stroke-width":"1"})),y),c("g",{transform:xe},n),c("g",{transform:Ce},c("line",{fill:"none","marker-end":H.markerEnd,"marker-start":H.markerStart,stroke:"#555555","stroke-width":"1",x1:-k,x2:-k,y1:m-v,y2:v}),c("line",{fill:"none","marker-end":A.markerEnd,"marker-start":A.markerStart,stroke:"#555555","stroke-width":"1",x1:b,x2:m-b,y1:m+S,y2:m+S}))))}function we(e){if(!e.colorStops)return[];let t=[...e.colorStops].filter(o=>o.color?.a>0),a=t.length-1;if(t&&t[0]){let o=t[a];o&&o.ratio!==1&&(t.push(new Q({ratio:1,color:o.color})),a++)}return t.map((o,l)=>{let r="";return l===0?r=e.legendOptions?.minLabel||"low":l===a&&(r=e.legendOptions?.maxLabel||"high"),{color:o.color,label:r,ratio:o.ratio}}).reverse()}var ve={HH:315,HL:45,LL:135,LH:225},_e={2:[["HL","HH"],["LL","LH"]],3:[["HL","HM","HH"],["ML","MM","MH"],["LL","LM","LH"]],4:[["HL","HM1","HM2","HH"],["M2L","M2M1","M2M2","M2H"],["M1L","M1M1","M1M2","M1H"],["LL","LM1","LM2","LH"]]};function ze(e){if(!e)return;let{type:t}=e;if(t.includes("3d"))return be(e.symbolLayers.at(0));if(t==="simple-line"){let a=$(e);return a&&a.color}if(e.type==="simple-marker"&&(e.style==="x"||e.style==="cross")){let a=$(e);return a&&a.color}return te(e)}function Ie(e,t){let a=t.HH.label,o=t.LL.label,l=t.HL.label,r=t.LH.label;switch(e){case"HH":default:return{top:a,bottom:o,left:l,right:r};case"HL":return{top:l,bottom:r,left:o,right:a};case"LL":return{top:o,bottom:a,left:r,right:l};case"LH":return{top:r,bottom:l,left:a,right:o}}}function Be(e){let{focus:t,infos:a,numClasses:o}=e,l=_e[o],r={};a.forEach(u=>{r[u.value]={label:u.label,fill:ze(u.symbol)}});let i=[];for(let u=0;u<o;u++){let p=[];for(let h=0;h<o;h++){let m=r[l[u][h]];p.push(m.fill)}i.push(p)}return{type:"relationship-ramp",numClasses:o,focus:t,colors:i,labels:Ie(t,r),rotation:De(t)}}function De(e){let t=ve[e];return e&&t==null&&(t=ve.HH),t||0}var E=null,Le=[255,255,255];function ke(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function kt(e,t,a){let{backgroundColor:o,outline:l,dotSize:r}=e,i=a?.swatchSize||ne.size,u=.8,p=Math.round(i*i/Math.max(r,.5)**2*u),h=window.devicePixelRatio,m=document.createElement("canvas"),d=i*h;m.width=d,m.height=d,m.style.width=m.width/h+"px",m.style.height=m.height/h+"px";let s=m.getContext("2d");if(o&&(s.fillStyle=o.toCss(!0),s.fillRect(0,0,d,d),s.fill()),s.fillStyle=t?.toCss(!0)??"",E&&E.length/2===p)for(let n=0;n<2*p;n+=2){let g=E[n],w=E[n+1];s.fillRect(g,w,r*h,r*h),s.fill()}else{E=[];for(let n=0;n<2*p;n+=2){let g=ke(0,d),w=ke(0,d);E.push(g,w),s.fillRect(g,w,r*h,r*h),s.fill()}}l&&(l.color&&(s.strokeStyle=l.color.toCss(!0)),s.lineWidth=l.width,s.strokeRect(0,0,d,d));let y=new Image(i,i);return y.src=m.toDataURL(),y.ariaLabel=a?.ariaLabel??null,y.alt=a?.ariaLabel??"",y}function St(e,t={}){let a=t.radius||40,o=2*Math.PI*a,l=e.length,r=o/l,i=[],u=$(t.outline);u?.width!=null&&(u.width*=2),(u||t.backgroundColor)&&i.push({shape:{type:"circle",cx:a,cy:a,r:a},fill:t.backgroundColor,stroke:u,offset:[0,0]});let p=t.values,h=p&&p.length===l&&p.reduce((n,g)=>n+g,0)===100,m=[0];for(let n=0;n<l;n++){let g=null;h&&(g=p[n]*o/100,m.push(g+m[n])),i.push({shape:{type:"circle",cx:a,cy:a,r:a/2},fill:[0,0,0,0],stroke:{width:a,dashArray:`${(g??r)/2} ${o}`,dashoffset:"-"+(h?m[n]/2:n*(r/2)),color:e[n]},offset:[0,0]})}let d=null,s=2*a+(u?.width||0),y=t.holePercentage;if(y){u&&i.push({shape:{type:"circle",cx:a,cy:a,r:a*y},fill:null,stroke:u,offset:[0,0]});let n=s/2;d=[[{shape:{type:"circle",cx:n,cy:n,r:n},fill:Le,stroke:u?R(T({},u),{color:Le}):null,offset:[0,0]},{shape:{type:"circle",cx:n,cy:n,r:a*y},fill:[0,0,0],stroke:null,offset:[0,0]}]]}return pe([i],[s,s],{effectView:t.effectList,ignoreStrokeWidth:!0,masking:d,rotation:-90,ariaLabel:t.ariaLabel})}function xt(e,t={}){let l=t.align==="horizontal",r=l?75:24,i=l?24:75,u=t.width??r,p=t.height??i,h=t.gradient??!0,m=window.devicePixelRatio,d=u*m,s=p*m,y=document.createElement("canvas");y.width=d,y.height=s,y.ariaLabel=t.ariaLabel??null,y.style.width=`${u}px`,y.style.height=`${p}px`;let n=y.getContext("2d"),g=l?d:0,w=l?0:s;if(h){let v=n.createLinearGradient(0,0,g,w),b=e.length,S=b===1?0:1/(b-1);e.forEach((x,H)=>v.addColorStop(H*S,x.toString())),n.fillStyle=v,n.fillRect(0,0,d,s)}else{let v=l?d/e.length:d,b=l?s:s/e.length,S=0,x=0;for(let H of e)n.fillStyle=H.toString(),n.fillRect(S,x,v,b),S=l?S+v:0,x=l?0:x+b}let k=document.createElement("div");return k.style.width=`${u}px`,k.style.height=`${p}px`,Ae(k,t?.effectList),k.appendChild(y),k}function Ae(e,t){if(!t)return;e.style.filter=B(t);let a=t.effects;if(a){for(let o of a)if(o?.type==="drop-shadow"){o.offsetX<0?e.style.marginLeft=`${Math.abs(o.offsetX)}px`:e.style.marginRight=`${o.offsetX}px`;break}}}function Oe(e,t){return q(this,null,function*(){switch(e.type){case"web-style":{let{previewWebStyleSymbol:a}=yield import("./chunk-5YU376OW.js");return a(e,Oe,t)}case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":{let{previewSymbol3D:a}=yield import("./chunk-DR55XFTF.js");return a(e,t)}case"simple-marker":case"simple-line":case"simple-fill":case"picture-marker":case"picture-fill":case"text":{let{previewSymbol2D:a}=yield import("./chunk-SQUISL2G.js");return a(e,t)}case"cim":{let{previewCIMSymbol:a}=yield import("./chunk-CXYW7VDL.js");return a(e,t)}default:return}})}function Se(e){return e&&"opacity"in e?e.opacity*Se(e.parent):1}function Ct(e,t){return q(this,null,function*(){if(!e)return;let a=e.sourceLayer,o=(t!=null&&t.useSourceLayer?a:e.layer)??a,l=Se(o);if(e.symbol!=null&&(t==null||t.ignoreGraphicSymbol!==!0)){let b=e.symbol.type==="web-style"?yield oe(e.symbol,R(T({},t),{cache:t!=null?t.webStyleCache:null})):e.symbol.clone();return I(b,null,l),b}let r=t?.renderer??Pe(o),i=r&&"getSymbolAsync"in r?yield r.getSymbolAsync(e,t):null;if(!i)return;if(i=i.type==="web-style"?yield i.fetchSymbol(R(T({},t),{cache:t!=null?t.webStyleCache:null})):i.clone(),!r||!("visualVariables"in r)||!r.visualVariables?.length)return I(i,null,l),i;if("arcadeRequiredForVisualVariables"in r&&r.arcadeRequiredForVisualVariables&&t?.arcade==null){let b=T({},t);b.arcade=yield ee(),t=b}let{getColor:u,getOpacity:p,getAllSizes:h,getRotationAngle:m}=yield import("./chunk-FULTBZNO.js"),d=[],s=[],y=[],n=[];for(let b of r.visualVariables)switch(b.type){case"color":d.push(b);break;case"opacity":s.push(b);break;case"rotation":n.push(b);break;case"size":b.target||y.push(b)}let g=!!d.length&&d[d.length-1],w=g?u(g,e,t):null,k=!!s.length&&s[s.length-1],v=k?p(k,e,t):null;if(l!=null&&(v=v!=null?v*l:l),I(i,w,v),y.length){let b=h(y,e,t);yield ae(i,b)}for(let b of n)le(i,m(b,e,t),b.axis);return i})}function Pe(e){if(e)return"renderer"in e?e.renderer:void 0}var Gt=N("short-date");function L(e,t,a){return q(this,null,function*(){G(e,t,()=>[]).push(...a)})}function Nt(e){return q(this,null,function*(){let t=new Map;if(!e)return t;if("visualVariables"in e&&e.visualVariables){let a=e.visualVariables.filter(o=>o.type==="color");for(let o of a){let l=((yield ie(o))??[]).map(r=>r.color);yield L(t,o.field||o.valueExpression,l)}}if(e.type==="heatmap"){let a=we(e).map(o=>o.color);yield L(t,e.field||e.valueExpression,a)}else if(e.type==="pie-chart"){for(let a of e.attributes)yield L(t,a.field||a.valueExpression,[a.color]);yield L(t,"default",[e?.othersCategory?.color,C(e.backgroundFillSymbol,null)])}else if(e.type==="dot-density"){for(let a of e.attributes)yield L(t,a.field||a.valueExpression,[a.color]);yield L(t,"default",[e.backgroundColor])}else if(e.type==="unique-value")if(e.authoringInfo?.type==="predominance")for(let a of e.uniqueValueInfos??[])yield L(t,a.value.toString(),[C(a.symbol,null)]);else{let a=(e.uniqueValueInfos??[]).map(u=>C(u.symbol,null)),{field:o,field2:l,field3:r,valueExpression:i}=e;(o||i)&&(yield L(t,o||i,a)),l&&(yield L(t,l,a)),r&&(yield L(t,r,a))}else if(e.type==="class-breaks"){let a=e.classBreakInfos.map(r=>C(r.symbol,null)),{field:o,valueExpression:l}=e;yield L(t,o??l,a)}else e.type==="simple"&&(yield L(t,"default",[C(e.symbol,null)]));return"defaultSymbol"in e&&e.defaultSymbol&&(yield L(t,"default",[C(e.defaultSymbol,null)])),t.forEach((a,o)=>{let l=j(a.filter(Boolean),(r,i)=>JSON.stringify(r)===JSON.stringify(i));t.set(o,l)}),t})}export{je as a,Ge as b,Ze as c,we as d,Nt as e,Ee as f,Be as g,De as h,kt as i,St as j,xt as k,Oe as l,Ct as m};
