import{a as p,c as h}from"./chunk-U4U366GW.js";import{G as b,_ as m,r as d}from"./chunk-CTGIUUCS.js";import{k as u}from"./chunk-WKT5W7KT.js";import{r as i}from"./chunk-X3IDZTNG.js";import{a as l}from"./chunk-IQJU4QT3.js";import{a as y,h as f}from"./chunk-EAH6BNBL.js";var S=()=>!!l("enable-feature:force-wosr");var j=()=>l.add("enable-feature:direct-3d-object-feature-layer-display",!0,!0,!0),I=()=>l.add("enable-feature:direct-3d-object-feature-layer-display",!1,!0,!0);var L=()=>l.add("enable-i3s-patching",!0,!0,!0),U=()=>l.add("enable-i3s-patching",!1,!0,!0),q=()=>!!l("enable-feature:SceneLayer-editing"),E=(e="i3s-patching")=>{switch(U(),I(),l.add("enable-feature:SceneLayer-editing",!0,!0,!0),e){case"feature-layer-view":j();break;case"i3s-patching":L()}};E("i3s-patching");var c={};function N(e,a){return f(this,null,function*(){try{return{data:(yield F(e,a)).data,baseUrl:b(e),styleUrl:e}}catch(t){return u(t),null}})}function R(e,a,t){let r=a.portal!=null?a.portal:h.getDefault(),s,o=`${r.url} - ${r.user&&r.user.username} - ${e}`;return c[o]||(c[o]=C(e,r,t).then(n=>(s=n,n.fetchData())).then(n=>({data:n,baseUrl:s.itemUrl??"",styleName:e}))),c[o]}function C(e,a,t){return a.load(t).then(()=>{let r=new p({disableExtraQuery:!0,query:`owner:${g} AND type:${w} AND typekeywords:"${e}"`});return a.queryItems(r,t)}).then(({results:r})=>{let s=null,o=e.toLowerCase();if(r&&Array.isArray(r)){for(let n of r)if(n.typeKeywords?.some(D=>D.toLowerCase()===o)&&n.type===w&&n.owner===g){s=n;break}}if(!s)throw new i("symbolstyleutils:style-not-found",`The style '${e}' could not be found`,{styleName:e});return s.load(t)})}function z(e,a,t){return e?.styleUrl!=null?N(e.styleUrl,t):e?.styleName!=null?R(e.styleName,a,t):Promise.reject(new i("symbolstyleutils:style-url-and-name-missing","Either styleUrl or styleName is required to resolve a style"))}function B(e){return e===null||e.type==="CIMSymbolReference"?e:{type:"CIMSymbolReference",symbol:e}}function J(e,a,t=["gltf"]){if(a==="cimRef")return e.cimRef;if(e.formatInfos&&!S())for(let r of t){let s=e.formatInfos.find(o=>o.type===r);if(s)return s.href}return e.webRef}function F(e,a){let t=y({responseType:"json",query:{f:"json"}},a);return m(d(e),t)}var g="esri_en",w="Style",K="https://cdn.arcgis.com/sharing/rest/content/items/220936cc6ed342c9937abd8f180e7d1e/resources/styles/cim/{SymbolName}.json?f=json";export{q as a,z as b,B as c,J as d,F as e,K as f};
