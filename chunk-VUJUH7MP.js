import{a as N}from"./chunk-JDLVIKS3.js";import{a as Ce,c as Me}from"./chunk-YTDHENVR.js";import{a as I,b as Ne,c as Y,h as H}from"./chunk-LX3TXNPU.js";import{c as xe}from"./chunk-YTC2EJDQ.js";import{f as Fe}from"./chunk-QBQKFGOZ.js";import{a as B,o as j,p as q}from"./chunk-F7PIPM6E.js";import{f as Se}from"./chunk-FR6Q4MSQ.js";import{d as G}from"./chunk-BENVXA3L.js";import{b as O,j as C,t as k}from"./chunk-UI76XBLJ.js";import{b as Te}from"./chunk-UE2YGKE7.js";import{a as se}from"./chunk-3RDV3O6N.js";import{T as be}from"./chunk-CTGIUUCS.js";import{w as ge}from"./chunk-WKT5W7KT.js";import{j as he,k as z}from"./chunk-X3IDZTNG.js";import{h as ae}from"./chunk-EAH6BNBL.js";var P=class{constructor(n){this.source=n}};var a;(function(e){e.AsyncNotEnabled="AsyncNotEnabled",e.ModulesNotSupported="ModulesNotSupported",e.CircularModules="CircularModules",e.CannotCompareDateAndTime="CannotCompareDateAndTime",e.NeverReach="NeverReach",e.UnsupportedHashType="UnsupportedHashType",e.InvalidParameter="InvalidParameter",e.FeatureSetDoesNotHaveSubtypes="FeatureSetDoesNotHaveSubtypes",e.UnexpectedToken="UnexpectedToken",e.Unrecognized="Unrecognized",e.UnrecognizedType="UnrecognizedType",e.MaximumCallDepth="MaximumCallDepth",e.BooleanConditionRequired="BooleanConditionRequired",e.TypeNotAllowedInFeature="TypeNotAllowedInFeature",e.KeyMustBeString="KeyMustBeString",e.WrongNumberOfParameters="WrongNumberOfParameters",e.CallNonFunction="CallNonFunction",e.NoFunctionInTemplateLiteral="NoFunctionInTemplateLiteral",e.NoFunctionInDictionary="NoFunctionInDictionary",e.NoFunctionInArray="NoFunctionInArray",e.AssignModuleFunction="AssignModuleFunction",e.LogicExpressionOrAnd="LogicExpressionOrAnd",e.LogicalExpressionOnlyBoolean="LogicalExpressionOnlyBoolean",e.FunctionNotFound="FunctionNotFound",e.InvalidMemberAccessKey="InvalidMemberAccessKey",e.UnsupportedUnaryOperator="UnsupportUnaryOperator",e.InvalidIdentifier="InvalidIdentifier",e.MemberOfNull="MemberOfNull",e.UnsupportedOperator="UnsupportedOperator",e.Cancelled="Cancelled",e.ModuleAccessorMustBeString="ModuleAccessorMustBeString",e.ModuleExportNotFound="ModuleExportNotFound",e.Immutable="Immutable",e.OutOfBounds="OutOfBounds",e.IllegalResult="IllegalResult",e.FieldNotFound="FieldNotFound",e.PortalRequired="PortalRequired",e.LogicError="LogicError",e.ArrayAccessorMustBeNumber="ArrayAccessMustBeNumber",e.KeyAccessorMustBeString="KeyAccessorMustBeString",e.WrongSpatialReference="WrongSpatialReference",e.CannotChangeTimeZoneTime="CannotChangeTimeZoneTime",e.CannotChangeTimeZoneDateOnly="CannotChangeTimeZoneDateOnly"})(a||(a={}));var Ie={[a.TypeNotAllowedInFeature]:"Feature attributes only support dates, numbers, strings, guids.",[a.LogicError]:"Logic error - {reason}",[a.CannotCompareDateAndTime]:"Cannot compare date or dateonly with timeonly types",[a.NeverReach]:"Encountered unreachable logic",[a.AsyncNotEnabled]:"Async Arcade must be enabled for this script",[a.ModuleAccessorMustBeString]:"Module accessor must be a string",[a.ModuleExportNotFound]:"Module has no export with provided identifier",[a.ModulesNotSupported]:"Current profile does not support modules",[a.ArrayAccessorMustBeNumber]:"Array accessor must be a number",[a.FunctionNotFound]:"Function not found",[a.FieldNotFound]:"Key not found - {key}",[a.CircularModules]:"Circular module dependencies are not allowed",[a.Cancelled]:"Execution cancelled",[a.UnsupportedHashType]:"Type not supported in hash function",[a.IllegalResult]:"Value is not a supported return type",[a.PortalRequired]:"Portal is required",[a.InvalidParameter]:"Invalid parameter",[a.WrongNumberOfParameters]:"Call with wrong number of parameters",[a.Unrecognized]:"Unrecognized code structure",[a.UnrecognizedType]:"Unrecognized type",[a.WrongSpatialReference]:"Cannot work with geometry in this spatial reference. It is different to the execution spatial reference",[a.BooleanConditionRequired]:"Conditions must use booleans",[a.NoFunctionInDictionary]:"Dictionaries cannot contain functions.",[a.NoFunctionInArray]:"Arrays cannot contain functions.",[a.NoFunctionInTemplateLiteral]:"Template Literals do not expect functions by value.",[a.KeyAccessorMustBeString]:"Accessor must be a string",[a.KeyMustBeString]:"Object keys must be a string",[a.Immutable]:"Object is immutable",[a.UnexpectedToken]:"Unexpected token",[a.MemberOfNull]:"Cannot access property of null object",[a.MaximumCallDepth]:"Exceeded maximum function depth",[a.OutOfBounds]:"Out of bounds",[a.InvalidIdentifier]:"Identifier not recognized",[a.CallNonFunction]:"Expression is not a function",[a.InvalidMemberAccessKey]:"Cannot access value using a key of this type",[a.AssignModuleFunction]:"Cannot assign function to module variable",[a.UnsupportedUnaryOperator]:"Unsupported unary operator",[a.UnsupportedOperator]:"Unsupported operator",[a.LogicalExpressionOnlyBoolean]:"Logical expressions must be boolean",[a.LogicExpressionOrAnd]:"Logical expression can only be combined with || or &&",[a.CannotChangeTimeZoneTime]:"Cannot change the timezone of a Time",[a.CannotChangeTimeZoneDateOnly]:"Cannot change the timezone of a DateOnly",[a.FeatureSetDoesNotHaveSubtypes]:"FeatureSet does not have subtypes"},le=class extends Error{constructor(...n){super(...n)}},K=class e extends le{constructor(n,r){super(ue(r)+n.message,{cause:n}),this.loc=null,Error.captureStackTrace&&Error.captureStackTrace(this,e),r?.loc&&(this.loc=r.loc)}},M=class e extends Error{constructor(n,r,t,o){super("Execution error - "+ue(t)+z(Ie[r],o)),this.loc=null,this.declaredRootClass="esri.arcade.arcadeexecutionerror",Error.captureStackTrace&&Error.captureStackTrace(this,e),t?.loc&&(this.loc=t.loc)}};function ue(e){return e&&e.loc?`Line : ${e.loc.start?.line}, ${e.loc.start?.column}: `:""}var De=class e extends Error{constructor(n,r,t,o){super("Compilation error - "+ue(t)+z(Ie[r],o)),this.loc=null,this.declaredRootClass="esri.arcade.arcadecompilationerror",Error.captureStackTrace&&Error.captureStackTrace(this,e),t?.loc&&(this.loc=t.loc)}},Ae=class e extends Error{constructor(){super("Uncompilable code structures"),this.declaredRootClass="esri.arcade.arcadeuncompilableerror",Error.captureStackTrace&&Error.captureStackTrace(this,e)}};function Rn(e,n,r){return r.declaredRootClass==="esri.arcade.arcadeexecutionerror"||r.declaredRootClass==="esri.arcade.arcadecompilationerror"?r.loc===null&&n?.loc?new K(r,{cause:r}):r:(r.declaredRootClass==="esri.arcade.featureset.support.featureseterror"||r.declaredRootClass==="esri.arcade.featureset.support.sqlerror"||r.declaredRootClass,n?.loc?new K(r,{cause:r}):r)}var V;(function(e){e.UnrecognizedUri="UnrecognizedUri",e.UnsupportedUriProtocol="UnsupportedUriProtocol"})(V||(V={}));var Ve={[V.UnrecognizedUri]:"Unrecognized uri - {uri}",[V.UnsupportedUriProtocol]:"Unrecognized uri protocol"},Oe=class e extends Error{constructor(n,r){super(z(Ve[n],r)),this.declaredRootClass="esri.arcade.arcademoduleerror",Error.captureStackTrace&&Error.captureStackTrace(this,e)}};var v=class{constructor(){}};function ve(e,n,r){if(e instanceof v&&!(e instanceof U)){let t=new U;return t.fn=e,t.parameterEvaluator=r,t.context=n,t}return e}var Ee=class extends v{constructor(n){super(),this.fn=n}createFunction(n){return(...r)=>this.fn(n,{preparsed:!0,arguments:r})}call(n,r){return this.fn(n,r)}marshalledCall(n,r,t,o){return o(n,r,(s,f,i)=>{i=i.map(u=>u instanceof v&&!(u instanceof U)?ve(u,n,o):u);let c=this.call(t,{args:i});return ge(c)?c.then(u=>ve(u,t,o)):c})}},U=class extends v{constructor(){super(...arguments),this.fn=null,this.context=null}createFunction(n){return this.fn.createFunction(this.context)}call(n,r){return this.fn.marshalledCall(n,r,this.context,this.parameterEvaluator)}marshalledCall(n,r,t){return this.fn.marshalledCall(n,r,this.context,this.parameterEvaluator)}};var ke,Ze;function qn(e){return xe.fromJSON(e.toJSON())}function Ge(e){return e.toJSON?e.toJSON():e}function Yn(e){return typeof e=="string"||e instanceof String}function Hn(e){return typeof e=="number"}function we(e){return e instanceof Date}function Kn(e){return e instanceof G}function Re(e){return e instanceof I}function Vn(e){return e instanceof Y}function Wn(e){return e instanceof H}function $n(e,n){return e===n||!(!we(e)&&!Re(e)||!we(n)&&!Re(n))&&e.getTime()===n.getTime()}function Xn(e){if(e==null)return null;if(typeof e=="number")return e;switch(e.toLowerCase()){case"meters":case"meter":return 109404;case"miles":case"mile":return 109439;case"kilometers":case"kilometer":case"km":return 109414}return null}function Qn(e){if(e==null)return null;switch(e.type){case"polygon":case"multipoint":case"polyline":return e.extent;case"point":return new k({xmin:e.x,ymin:e.y,xmax:e.x,ymax:e.y,spatialReference:e.spatialReference});case"extent":return e}return null}function er(e){if(e==null)return null;if(typeof e=="number"||typeof e=="number")return e;switch(e.toLowerCase()){case"meters":case"meter":return 9001;case"miles":case"mile":return 9093;case"kilometers":case"kilometer":case"km":return 9036}return null}(function(e){e[e.Standardised=0]="Standardised",e[e.StandardisedNoInterval=1]="StandardisedNoInterval",e[e.SqlServer=2]="SqlServer",e[e.Oracle=3]="Oracle",e[e.Postgres=4]="Postgres",e[e.PGDB=5]="PGDB",e[e.FILEGDB=6]="FILEGDB",e[e.NotEvaluated=7]="NotEvaluated"})(ke||(ke={})),function(e){e[e.InFeatureSet=0]="InFeatureSet",e[e.NotInFeatureSet=1]="NotInFeatureSet",e[e.Unknown=2]="Unknown"}(Ze||(Ze={}));var nr=1e3;var rr={point:"point",polygon:"polygon",polyline:"polyline",multipoint:"multipoint",extent:"extent",esriGeometryPoint:"point",esriGeometryPolygon:"polygon",esriGeometryPolyline:"polyline",esriGeometryMultipoint:"multipoint",esriGeometryEnvelope:"extent",envelope:"extent"},ce={point:"esriGeometryPoint",polygon:"esriGeometryPolygon",polyline:"esriGeometryPolyline",multipoint:"esriGeometryMultipoint",extent:"esriGeometryEnvelope",esriGeometryPoint:"esriGeometryPoint",esriGeometryPolygon:"esriGeometryPolygon",esriGeometryPolyline:"esriGeometryPolyline",esriGeometryMultipoint:"esriGeometryMultipoint",esriGeometryEnvelope:"esriGeometryEnvelope",envelope:"esriGeometryEnvelope"},tr={"small-integer":"esriFieldTypeSmallInteger",integer:"esriFieldTypeInteger",long:"esriFieldTypeLong",single:"esriFieldTypeSingle",double:"esriFieldTypeDouble",string:"esriFieldTypeString",date:"esriFieldTypeDate","date-only":"esriFieldTypeDateOnly","time-only":"esriFieldTypeTimeOnly","timestamp-offset":"esriFieldTypeTimestampOffset",oid:"esriFieldTypeOID",geometry:"esriFieldTypeGeometry",blob:"esriFieldTypeBlob",raster:"esriFieldTypeRaster",guid:"esriFieldTypeGUID","global-id":"esriFieldTypeGlobalID",xml:"esriFieldTypeXML","big-integer":"esriFieldTypeBigInteger",esriFieldTypeSmallInteger:"esriFieldTypeSmallInteger",esriFieldTypeInteger:"esriFieldTypeInteger",esriFieldTypeLong:"esriFieldTypeLong",esriFieldTypeSingle:"esriFieldTypeSingle",esriFieldTypeDouble:"esriFieldTypeDouble",esriFieldTypeString:"esriFieldTypeString",esriFieldTypeDate:"esriFieldTypeDate",esriFieldTypeDateOnly:"esriFieldTypeDateOnly",esriFieldTypeTimeOnly:"esriFieldTypeTimeOnly",esriFieldTypeTimestampOffset:"esriFieldTypeTimestampOffset",esriFieldTypeOID:"esriFieldTypeOID",esriFieldTypeGeometry:"esriFieldTypeGeometry",esriFieldTypeBlob:"esriFieldTypeBlob",esriFieldTypeRaster:"esriFieldTypeRaster",esriFieldTypeGUID:"esriFieldTypeGUID",esriFieldTypeGlobalID:"esriFieldTypeGlobalID",esriFieldTypeXML:"esriFieldTypeXML",esriFieldTypeBigInteger:"esriFieldTypeBigInteger"};function or(e){return e===void 0?"":e=(e=(e=e.replace(/\/featureserver\/[0-9]*/i,"/FeatureServer")).replace(/\/mapserver\/[0-9]*/i,"/MapServer")).split("?")[0]}function ir(e,n){n||(n={}),typeof n=="function"&&(n={cmp:n});let r=typeof n.cycles=="boolean"&&n.cycles,t=n.cmp&&(o=n.cmp,function(f){return function(i,c){let u={key:i,value:f[i]},h={key:c,value:f[c]};return o(u,h)}});var o;let s=[];return function f(i){if(i?.toJSON&&typeof i.toJSON=="function"&&(i=i.toJSON()),i===void 0)return;if(typeof i=="number")return isFinite(i)?""+i:"null";if(typeof i!="object")return JSON.stringify(i);let c,u;if(Array.isArray(i)){for(u="[",c=0;c<i.length;c++)c&&(u+=","),u+=f(i[c])||"null";return u+"]"}if(i===null)return"null";if(s.includes(i)){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}let h=s.push(i)-1,F=Object.keys(i).sort(t?.(i));for(u="",c=0;c<F.length;c++){let w=F[c],R=f(i[w]);R&&(u&&(u+=","),u+=JSON.stringify(w)+":"+R)}return s.splice(h,1),"{"+u+"}"}(e)}var D=class e extends N{constructor(n,r,t,o,s,f){super(n),this._lazyPt=[],this._hasZ=!1,this._hasM=!1,this._spRef=r,this._hasZ=t,this._hasM=o,this._cacheId=s,this._partId=f}get(n){if(this._lazyPt[n]===void 0){let r=this._elements[n];if(r===void 0)return;let t=this._hasZ,o=this._hasM,s=null;s=t&&!o?new C(r[0],r[1],r[2],void 0,this._spRef):o&&!t?new C(r[0],r[1],void 0,r[2],this._spRef):t&&o?new C(r[0],r[1],r[2],r[3],this._spRef):new C(r[0],r[1],this._spRef),s.cache._arcadeCacheId=this._cacheId.toString()+"-"+this._partId.toString()+"-"+n.toString(),this._lazyPt[n]=s}return this._lazyPt[n]}equalityTest(n){return n===this||n!==null&&n instanceof e&&n.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()+"-"+this._partId.toString()}};var W=class e extends N{constructor(n,r,t,o,s){super(n),this._lazyPath=[],this._hasZ=!1,this._hasM=!1,this._hasZ=t,this._hasM=o,this._spRef=r,this._cacheId=s}get(n){if(this._lazyPath[n]===void 0){let r=this._elements[n];if(r===void 0)return;this._lazyPath[n]=new D(r,this._spRef,this._hasZ,this._hasM,this._cacheId,n)}return this._lazyPath[n]}equalityTest(n){return n===this||n!==null&&n instanceof e&&n.getUniqueHash()===this.getUniqueHash()}getUniqueHash(){return this._cacheId.toString()}};var X=class{constructor(n){this.value=n}},Q=class{constructor(n){this.value=n}},We=Q,$e=X,b={type:"VOID"},Xe={type:"BREAK"},Qe={type:"CONTINUE"};function _(e,n,r){return n===""||n==null||n===r||n===r?e:e=e.split(n).join(r)}function te(e){return e instanceof v}function me(e){return e instanceof P}function ee(e){return!!g(e)||!!S(e)||!!p(e)||!!m(e)||!!y(e)||!!T(e)||e===null||e===b||typeof e=="number"}function en(e,n){return e===void 0?n:e}function nn(e){return e==null?"":x(e)||E(e)?"Array":p(e)?"Date":y(e)?"Time":m(e)?"DateOnly":g(e)?"String":T(e)?"Boolean":S(e)?"Number":e?.declaredClass==="esri.arcade.Attachment"?"Attachment":e?.declaredClass==="esri.arcade.Portal"?"Portal":e?.declaredClass==="esri.arcade.Dictionary"?"Dictionary":Je(e)?"KnowledgeGraph":e instanceof P?"Module":Ue(e)?"Feature":e instanceof C?"Point":e instanceof j?"Polygon":e instanceof q?"Polyline":e instanceof B?"Multipoint":e instanceof k?"Extent":te(e)?"Function":_e(e)?"FeatureSet":Le(e)?"FeatureSetCollection":e===b?"":typeof e=="number"&&isNaN(e)?"Number":"Unrecognized Type"}function g(e){return typeof e=="string"||e instanceof String}function T(e){return typeof e=="boolean"}function S(e){return typeof e=="number"}function rn(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e}function tn(e){return e instanceof O}function x(e){return e instanceof Array}function Ue(e){return e?.arcadeDeclaredClass==="esri.arcade.Feature"}function _e(e){return e?.declaredRootClass==="esri.arcade.featureset.support.FeatureSet"}function on(e){return e?.declaredClass==="esri.arcade.Dictionary"}function Le(e){return e?.declaredRootClass==="esri.arcade.featureSetCollection"}function Je(e){return e?.declaredClass==="esri.rest.knowledgeGraph.KnowledgeGraph"}function E(e){return e instanceof N}function p(e){return e instanceof I}function m(e){return e instanceof Y}function y(e){return e instanceof H}function de(e){return e!=null&&typeof e=="object"}function ne(e){return e instanceof Date}function an(e,n,r,t,o){if(e.length<n||e.length>r)throw new M(t,a.WrongNumberOfParameters,o)}function sn(e){return e<0?-Math.round(-e):Math.round(e)}function ln(){let e=Date.now();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replaceAll(/[xy]/g,n=>{let r=(e+16*Math.random())%16|0;return e=Math.floor(e/16),(n==="x"?r:3&r|8).toString(16)})}function ye(e,n){return isNaN(e)||n==null||n===""?e.toString():(n=_(n,"\u2030",""),n=_(n,"\xA4",""),Ce(e,{pattern:n}))}function oe(e,n){return n==null||n===""?e.toISOString(!0):e.toFormat(ze(n),{locale:se(),numberingSystem:"latn"})}function ze(e,n=!1){e=e.replaceAll(/LTS|LT|LL?L?L?|l{1,4}/g,"[$&]");let r="",t=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|N{1,5}|YYYYYY|YYYYY|YYYY|YY|y{2,4}|yo?|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|Z{1,5}|.)/g;for(let o of e.match(t)||[])switch(o){case"D":r+="d";break;case"DD":r+="dd";break;case"DDD":r+="o";break;case"d":r+="c";break;case"ddd":r+="ccc";break;case"dddd":r+="cccc";break;case"M":r+="L";break;case"MM":r+="LL";break;case"MMM":r+="LLL";break;case"MMMM":r+="LLLL";break;case"YY":r+="yy";break;case"Y":case"YYYY":r+="yyyy";break;case"Q":r+="q";break;case"Z":r+="Z";break;case"ZZ":r+="ZZ";break;case"ZZZ":r+="ZZZ";break;case"ZZZZ":r+=n?"[ZZZZ]":"ZZZZ";break;case"ZZZZZ":r+=n?"[ZZZZZ]":"ZZZZZ";break;case"S":r+="'S'";break;case"SS":r+="'SS'";break;case"SSS":r+="u";break;case"A":case"a":r+="a";break;case"m":case"mm":case"h":case"hh":case"H":case"HH":case"s":case"ss":case"X":case"x":r+=o;break;default:o.length>=2&&o.slice(0,1)==="["&&o.slice(-1)==="]"?r+=`'${o.slice(1,-1)}'`:r+=`'${o}'`}return r}function l(e,n,r){switch(r){case">":return e>n;case"<":return e<n;case">=":return e>=n;case"<=":return e<=n}return!1}function un(e,n,r){if(e===null){if(n===null||n===b)return l(null,null,r);if(S(n))return l(0,n,r);if(g(n)||T(n))return l(0,d(n),r);if(p(n))return l(0,n.toNumber(),r);if(y(n)||m(n))return l(e,n.toNumber(),r)}if(e===b){if(n===null||n===b)return l(null,null,r);if(S(n))return l(0,n,r);if(g(n)||T(n))return l(0,d(n),r);if(p(n))return l(0,n.toNumber(),r);if(y(n)||m(n))return l(e,n.toNumber(),r)}else if(S(e)){if(S(n))return l(e,n,r);if(T(n))return l(e,d(n),r);if(n===null||n===b)return l(e,0,r);if(g(n))return l(e,d(n),r);if(p(n)||y(n)||m(n))return l(e,n.toNumber(),r)}else if(g(e)){if(g(n))return l(A(e),A(n),r);if(p(n)||y(n)||m(n))return l(d(e),n.toNumber(),r);if(S(n))return l(d(e),n,r);if(n===null||n===b)return l(d(e),0,r);if(T(n))return l(d(e),d(n),r)}else if(p(e)){if(p(n))return e.timeZone!==n.timeZone&&(e.isUnknownTimeZone?e=I.arcadeDateAndZoneToArcadeDate(e,n.timeZone):n.isUnknownTimeZone&&(n=I.arcadeDateAndZoneToArcadeDate(n,e.timeZone))),l(e.toNumber(),n.toNumber(),r);if(n===null||n===b)return l(e.toNumber(),0,r);if(S(n))return l(e.toNumber(),n,r);if(T(n)||g(n))return l(e.toNumber(),d(n),r);if(y(n))throw new M(null,a.CannotCompareDateAndTime,null);if(m(n))return l(e.toNumber(),n.toNumber(),r)}else if(T(e)){if(T(n))return l(e,n,r);if(S(n))return l(d(e),d(n),r);if(p(n)||y(n)||m(n))return l(d(e),n.toNumber(),r);if(n===null||n===b)return l(d(e),0,r);if(g(n))return l(d(e),d(n),r)}else if(m(e)){if(p(n))return l(e.toNumber(),n.toNumber(),r);if(n===null||n===b)return l(e.toNumber(),0,r);if(S(n))return l(e.toNumber(),n,r);if(T(n)||g(n))return l(e.toNumber(),d(n),r);if(y(n))throw new M(null,a.CannotCompareDateAndTime,null);if(m(n))return l(e.toNumber(),n.toNumber(),r)}else if(y(e)){if(p(n))throw new M(null,a.CannotCompareDateAndTime,null);if(n===null||n===b)return l(e.toNumber(),0,r);if(S(n))return l(e.toNumber(),n,r);if(T(n)||g(n))return l(e.toNumber(),d(n),r);if(y(n))return l(e.toNumber(),n.toNumber(),r);if(m(n))throw new M(null,a.CannotCompareDateAndTime,null)}return!!Be(e,n)&&(r==="<="||r===">=")}function Be(e,n){if(e===n||e===null&&n===b||n===null&&e===b)return!0;if(p(e)&&p(n)||y(e)&&y(n)||m(e)&&m(n))return e.equals(n);if(e instanceof W||e instanceof D)return e.equalityTest(n);if(e instanceof C&&n instanceof C){let r=e.cache._arcadeCacheId,t=n.cache._arcadeCacheId;if(r!=null)return r===t}return!!(de(e)&&de(n)&&(e._arcadeCacheId===n._arcadeCacheId&&e._arcadeCacheId!==void 0&&e._arcadeCacheId!==null||e._underlyingGraphic===n._underlyingGraphic&&e._underlyingGraphic!==void 0&&e._underlyingGraphic!==null))}function A(e,n){if(g(e))return e;if(e===null)return"";if(S(e))return ye(e,n);if(T(e))return e.toString();if(p(e))return oe(e,n);if(y(e)||m(e))return e.toFormat(n);if(e instanceof O)return JSON.stringify(e.toJSON());if(x(e)){let r=[];for(let t=0;t<e.length;t++)r[t]=re(e[t]);return"["+r.join(",")+"]"}if(e instanceof N){let r=[];for(let t=0;t<e.length();t++)r[t]=re(e.get(t));return"["+r.join(",")+"]"}return e!==null&&typeof e=="object"&&e.castToText!==void 0?e.castToText():te(e)?"object, Function":e===b?"":me(e)?"object, Module":""}function cn(e){let n=[];if(!x(e))return null;if(e instanceof N){for(let r=0;r<e.length();r++)n[r]=d(e.get(r));return n}for(let r=0;r<e.length;r++)n[r]=d(e[r]);return n}function $(e,n,r=!1){if(g(e))return e;if(e===null)return"";if(S(e))return ye(e,n);if(T(e))return e.toString();if(p(e))return oe(e,n);if(y(e)||m(e))return e.toFormat(n);if(e instanceof O)return e instanceof k?'{"xmin":'+e.xmin.toString()+',"ymin":'+e.ymin.toString()+","+(e.hasZ?'"zmin":'+e.zmin.toString()+",":"")+(e.hasM?'"mmin":'+e.mmin.toString()+",":"")+'"xmax":'+e.xmax.toString()+',"ymax":'+e.ymax.toString()+","+(e.hasZ?'"zmax":'+e.zmax.toString()+",":"")+(e.hasM?'"mmax":'+e.mmax.toString()+",":"")+'"spatialReference":'+pe(e.spatialReference)+"}":pe(e.toJSON(),(t,o)=>t.key===o.key?0:t.key==="spatialReference"?1:o.key==="spatialReference"||t.key<o.key?-1:t.key>o.key?1:0);if(x(e)){let t=[];for(let o=0;o<e.length;o++)t[o]=re(e[o],r);return"["+t.join(",")+"]"}if(e instanceof N){let t=[];for(let o=0;o<e.length();o++)t[o]=re(e.get(o),r);return"["+t.join(",")+"]"}return e!==null&&typeof e=="object"&&e.castToText!==void 0?e.castToText(r):te(e)?"object, Function":e===b?"":me(e)?"object, Module":""}function re(e,n=!1){if(e===null)return"null";if(T(e)||S(e)||g(e))return JSON.stringify(e);if(e instanceof O||e instanceof N||e instanceof Array)return $(e,null,n);if(p(e))return JSON.stringify(n?e.getTime():oe(e,""));if(y(e)||m(e))return JSON.stringify(e.toString());if(e!==null&&typeof e=="object"){if(e.castToText!==void 0)return e.castToText(n)}else if(e===b)return"null";return"null"}function d(e,n){return S(e)?e:e===null||e===""?0:p(e)||m(e)||y(e)?NaN:T(e)?e?1:0:x(e)||e===""||e===void 0?NaN:n!==void 0&&g(e)?(n=_(n,"\u2030",""),n=_(n,"\xA4",""),Me(e,{pattern:n})):e===b?0:Number(e)}function fn(e,n){if(p(e))return e;if(g(e)){let r=dn(e,n);if(r)return I.dateTimeToArcadeDate(r)}return null}function dn(e,n){let r=/ (\d\d)/,t=Ne(n),o=G.fromISO(e,{zone:t});return o.isValid||r.test(e)&&(e=e.replace(r,"T$1"),o=G.fromISO(e,{zone:n}),o.isValid)?o:null}function pn(e){return T(e)?e:g(e)?(e=e.toLowerCase())==="true":!!S(e)&&e!==0&&!isNaN(e)}function mn(e,n){let r=JSON.parse(e);return r&&!r.spatialReference&&(r.spatialReference=n),Fe(r)}function yn(e,n){return e==null?null:(e.spatialReference!==null&&e.spatialReference!==void 0||(e.spatialReference=n),e)}function hn(e){if(e===null)return null;if(e instanceof C)return e.x==="NaN"||e.x===null||isNaN(e.x)?null:e;if(e instanceof j){if(e.rings.length===0)return null;for(let n of e.rings)if(n.length>0)return e;return null}if(e instanceof q){if(e.paths.length===0)return null;for(let n of e.paths)if(n.length>0)return e;return null}return e instanceof B?e.points.length===0?null:e:e instanceof k?e.xmin==="NaN"||e.xmin===null||isNaN(e.xmin)?null:e:null}function je(e,n){if(!e||!e.domain)return n;let r=null,t=null;if(p(n))r=n.toNumber();else if(m(n))r=n.toString();else if(y(n))r=n.toStorageString();else if(e.field.type==="string"||e.field.type==="esriFieldTypeString")r=A(n);else{if(n==null)return null;if(n==="")return n;r=d(n)}for(let o=0;o<e.domain.codedValues.length;o++){let s=e.domain.codedValues[o];s.code===r&&(t=s)}return t===null?A(n):t.name}function qe(e,n){if(!e||!e.domain)return n;let r=null,t=A(n);for(let o=0;o<e.domain.codedValues.length;o++){let s=e.domain.codedValues[o];s.name===t&&(r=s)}return r===null?n:r.code}function ie(e,n,r=null,t=null){if(!n||!n.fields)return null;let o,s,f=null;for(let h=0;h<n.fields.length;h++){let F=n.fields[h];F.name.toLowerCase()===e.toString().toLowerCase()&&(f=F)}if(f===null)throw new M(null,a.FieldNotFound,null,{key:e});let i=n.typeIdField,c="id",u=n.types;if(n.subtypeField&&(i=n.subtypeField,c="code",u=n.subtypes??[]),t===null&&r&&i)t=r.hasField(i)?r.field(i):null;else if(i&&t!==null){let h=!1;for(let F of u||[])if(t===F[c]){h=!0;break}if(!h){for(let F of u||[])if(t===F.name){t=F[c],h=!0;break}}h||(t=null,r&&i&&(t=r.hasField(i)?r.field(i):null))}return t!=null&&u.some(h=>h[c]===t&&(o=h.domains?.[f.name],o&&o.type==="inherited"&&(o=Pe(f.name,n),s=!0),!0)),s||o||(o=Pe(e,n)),{field:f,domain:o}}function Pe(e,n){let r;return n.fields.some(t=>(t.name.toLowerCase()===e.toLowerCase()&&(r=t.domain),!!r)),r}function pe(e,n){n||(n={}),typeof n=="function"&&(n={cmp:n});let r=typeof n.cycles=="boolean"&&n.cycles,t=n.cmp&&(o=n.cmp,function(f){return function(i,c){let u={key:i,value:f[i]},h={key:c,value:f[c]};return o(u,h)}});var o;let s=[];return function f(i){if(i?.toJSON&&typeof i.toJSON=="function"&&(i=i.toJSON()),i===void 0)return;if(typeof i=="number")return isFinite(i)?""+i:"null";if(typeof i!="object")return JSON.stringify(i);let c,u;if(Array.isArray(i)){for(u="[",c=0;c<i.length;c++)c&&(u+=","),u+=f(i[c])||"null";return u+"]"}if(i===null)return"null";if(s.includes(i)){if(r)return JSON.stringify("__cycle__");throw new TypeError("Converting circular structure to JSON")}let h=s.push(i)-1,F=Object.keys(i).sort(t?.(i));for(u="",c=0;c<F.length;c++){let w=F[c],R=f(i[w]);R&&(u&&(u+=","),u+=JSON.stringify(w)+":"+R)}return s.splice(h,1),"{"+u+"}"}(e)}function gn(e){if(e===null)return null;let n=[];for(let r of e)r?.arcadeDeclaredClass&&r.arcadeDeclaredClass==="esri.arcade.Feature"?n.push(r.geometry()):n.push(r);return n}function Z(e,n){if(!(n instanceof C))throw new M(null,a.InvalidParameter,null);e.push(n.hasZ?n.hasM?[n.x,n.y,n.z,n.m]:[n.x,n.y,n.z]:[n.x,n.y])}function bn(e,n){if(x(e)||E(e)){let r=!1,t=!1,o=[],s=n;if(x(e)){for(let f of e)Z(o,f);o.length>0&&(s=e[0].spatialReference,r=e[0].hasZ,t=e[0].hasM)}else if(e instanceof D)o=e._elements,o.length>0&&(r=e._hasZ,t=e._hasM,s=e.get(0).spatialReference);else{if(!E(e))throw new M(null,a.InvalidParameter,null);for(let f of e.toArray())Z(o,f);o.length>0&&(s=e.get(0).spatialReference,r=e.get(0).hasZ===!0,t=e.get(0).hasM===!0)}return o.length===0?null:(Se(o)||(o=o.slice(0).reverse()),new j({rings:[o],spatialReference:s,hasZ:r,hasM:t}))}return e}function Tn(e,n){if(x(e)||E(e)){let r=!1,t=!1,o=[],s=n;if(x(e)){for(let f of e)Z(o,f);o.length>0&&(s=e[0].spatialReference,r=e[0].hasZ===!0,t=e[0].hasM===!0)}else if(e instanceof D)o=e._elements,o.length>0&&(r=e._hasZ,t=e._hasM,s=e.get(0).spatialReference);else if(E(e)){for(let f of e.toArray())Z(o,f);o.length>0&&(s=e.get(0).spatialReference,r=e.get(0).hasZ===!0,t=e.get(0).hasM===!0)}return o.length===0?null:new q({paths:[o],spatialReference:s,hasZ:r,hasM:t})}return e}function Sn(e,n){if(x(e)||E(e)){let r=!1,t=!1,o=[],s=n;if(x(e)){for(let f of e)Z(o,f);o.length>0&&(s=e[0].spatialReference,r=e[0].hasZ===!0,t=e[0].hasM===!0)}else if(e instanceof D)o=e._elements,o.length>0&&(r=e._hasZ,t=e._hasM,s=e.get(0).spatialReference);else if(E(e)){for(let f of e.toArray())Z(o,f);o.length>0&&(s=e.get(0).spatialReference,r=e.get(0).hasZ===!0,t=e.get(0).hasM===!0)}return o.length===0?null:new B({points:o,spatialReference:s,hasZ:r,hasM:t})}return e}function Fn(e,n=!1){let r=[];if(e===null)return r;if(x(e)===!0){for(let t=0;t<e.length;t++){let o=A(e[t]);o===""&&n!==!0||r.push(o)}return r}if(e instanceof N){for(let t=0;t<e.length();t++){let o=A(e.get(t));o===""&&n!==!0||r.push(o)}return r}if(ee(e)){let t=A(e);return t===""&&n!==!0||r.push(t),r}return[]}var fe=0;function Nn(e){return fe++,fe%100==0?(fe=0,new Promise(n=>{setTimeout(()=>{n(e)},0)})):e}function xn(e,n,r){switch(r){case"&":return e&n;case"|":return e|n;case"^":return e^n;case"<<":return e<<n;case">>":return e>>n;case">>>":return e>>>n}}function L(e,n=null){return e==null?null:T(e)||S(e)||g(e)?e:e instanceof O?n?.keepGeometryType===!0?e:e.toJSON():e instanceof N?e.toArray().map(r=>L(r,n)):e instanceof Array?e.map(r=>L(r,n)):ne(e)?e:p(e)?e.toJSDate():y(e)?e.toString():m(e)?e.toJSDate():e!==null&&typeof e=="object"&&e.castAsJson!==void 0?e.castAsJson(n):null}function Cn(e,n,r,t,o){return ae(this,null,function*(){let s=yield Ye(e,n,r);o[t]=s})}function Ye(e,n=null,r=null){return ae(this,null,function*(){if(e instanceof N&&(e=e.toArray()),e==null)return null;if(ee(e)||e instanceof O||ne(e)||p(e))return L(e,r);if(e instanceof Array){let t=[],o=[];for(let s of e)s===null||ee(s)||s instanceof O||ne(s)||p(s)?o.push(L(s,r)):(o.push(null),t.push(Cn(s,n,r,o.length-1,o)));return t.length>0&&(yield Promise.all(t)),o}return e!==null&&typeof e=="object"&&e.castAsJsonAsync!==void 0?e.castAsJsonAsync(n,r):null})}function J(e){return He(e)?e.parent:e}function He(e){return e&&"declaredClass"in e&&e.declaredClass==="esri.layers.support.SubtypeSublayer"}function Mn(e){return e&&"declaredClass"in e&&e.declaredClass==="esri.layers.SubtypeGroupLayer"}function Dn(e,n,r){let t=J(e.fullSchema());return t===null||!t.fields?null:ie(n,t,e,r)}function An(e){let n=J(e.fullSchema());return n===null?null:n.fields?n.subtypeField?{subtypeField:n.subtypeField,subtypes:n.subtypes?n.subtypes.map(r=>({name:r.name,code:r.code})):[]}:n.typeIdField?{subtypeField:n.typeIdField,subtypes:n.types?n.types.map(r=>({name:r.name,code:r.id})):[]}:null:null}function On(e,n,r,t){let o=J(e.fullSchema());if(o===null||!o.fields)return null;let s=ie(n,o,e,t);if(r===void 0)try{r=e.field(n)}catch{return null}return je(s,r)}function In(e,n,r,t){let o=J(e.fullSchema());if(o===null||!o.fields)return null;if(r===void 0){try{r=e.field(n)}catch{return null}return r}return qe(ie(n,o,e,t),r)}function vn(e){return e?.timeZone??"system"}function En(e){let n=J(e.fullSchema());if(n===null||!n.fields)return null;let r=[];for(let t of n.fields)r.push(Ge(t));return{objectIdField:n.objectIdField,globalIdField:n.globalIdField??"",geometryType:ce[n.geometryType]===void 0?"":ce[n.geometryType],fields:r}}function kn(e,n){return e==="system"&&(e=I.systemTimeZoneCanonicalName),{version:Ke,engineVersion:be,timeZone:e,spatialReference:n instanceof Te?n.toJSON():n,application:he.applicationName??"",engine:"web",locale:se()}}var Ke="1.24",Pr=Object.freeze(Object.defineProperty({__proto__:null,ImplicitResultE:Q,ReturnResultE:X,absRound:sn,arcadeVersion:Ke,autoCastArrayOfPointsToMultiPoint:Sn,autoCastArrayOfPointsToPolygon:bn,autoCastArrayOfPointsToPolyline:Tn,autoCastFeatureToGeometry:gn,binaryOperator:xn,breakResult:Xe,castAsJson:L,castAsJsonAsync:Ye,continueResult:Qe,defaultExecutingContext:kn,defaultTimeZone:vn,defaultUndefined:en,equalityTest:Be,featureDomainCodeLookup:In,featureDomainValueLookup:On,featureFullDomain:Dn,featureSchema:En,featureSubtypes:An,fixNullGeometry:hn,fixSpatialReference:yn,formatDate:oe,formatNumber:ye,generateUUID:ln,getDomain:ie,getDomainCode:qe,getDomainValue:je,getType:nn,greaterThanLessThan:un,implicitResult:We,isArray:x,isBoolean:T,isDate:p,isDateOnly:m,isDictionary:on,isFeature:Ue,isFeatureSet:_e,isFeatureSetCollection:Le,isFunctionParameter:te,isGeometry:tn,isImmutableArray:E,isInteger:rn,isJsDate:ne,isKnowledgeGraph:Je,isModule:me,isNumber:S,isObject:de,isSimpleType:ee,isString:g,isSubtypeGrouplayer:Mn,isSubtypeSublayer:He,isTime:y,multiReplace:_,parseGeometryFromJson:mn,pcCheck:an,returnResult:$e,stableStringify:pe,standardiseDateFormat:ze,tick:Nn,toBoolean:pn,toDate:fn,toNumber:d,toNumberArray:cn,toString:A,toStringArray:Fn,toStringExplicit:$,voidOperation:b},Symbol.toStringTag,{value:"Module"}));export{P as a,a as b,M as c,De as d,Ae as e,Rn as f,V as g,Oe as h,v as i,ve as j,Ee as k,U as l,D as m,W as n,ke as o,Ze as p,qn as q,Ge as r,Yn as s,Hn as t,we as u,Kn as v,Re as w,Vn as x,Wn as y,$n as z,Xn as A,Qn as B,er as C,nr as D,rr as E,ce as F,tr as G,or as H,ir as I,We as J,$e as K,b as L,Xe as M,Qe as N,_ as O,te as P,ee as Q,en as R,nn as S,g as T,T as U,S as V,rn as W,tn as X,x as Y,Ue as Z,_e as _,on as $,Le as aa,Je as ba,E as ca,p as da,m as ea,y as fa,ne as ga,an as ha,sn as ia,ln as ja,ze as ka,un as la,Be as ma,A as na,cn as oa,$ as pa,d as qa,fn as ra,pn as sa,yn as ta,hn as ua,je as va,qe as wa,ie as xa,gn as ya,bn as za,Tn as Aa,Sn as Ba,Fn as Ca,Nn as Da,xn as Ea,L as Fa,Ye as Ga,He as Ha,Mn as Ia,Dn as Ja,An as Ka,On as La,In as Ma,vn as Na,En as Oa,kn as Pa,Pr as Qa};
