import{a as Dd,b as n_,c as r_,d as s_,e as o_}from"./chunk-WKSDPYR6.js";import{a as ce,b as vg,c as rn}from"./chunk-KDRAUGQW.js";import{a as Ci,b as Fa,c as Pa,d as Gg,e as is,g as jg,h as $g,j as Ug,k as Wg,l as qg,m as Yg,o as Zg,p as Kg,q as Qg,r as Cd,s as Jg,u as Xg,v as Sd,w as e_,y as t_}from"./chunk-QRAERHGP.js";import{a as Td}from"./chunk-QAJCY744.js";import{a as La,c as i_}from"./chunk-FOPE5Y6E.js";import{a as Pg,b as Lg,c as Ng}from"./chunk-FZXQK2Q4.js";import{a as Ge,b as ts,c as bg,d as Ra,e as xg,g as Aa,h as Ag,i as Fg,j as Vg,k as Bg,l as sn,m as Hg,o as zg}from"./chunk-42LINZJL.js";import"./chunk-LWXIMZML.js";import{h as kg,i as Rg}from"./chunk-4EPSQXU6.js";import{a as Og}from"./chunk-PPZ64WFD.js";import{a as wd,b as Mg,c as Ig,d as Eg}from"./chunk-NKZO6X6M.js";import{d as wg,e as Cg,g as Sg,h as vd,i as Dg,j as bd,k as Tg}from"./chunk-XC2IQIZC.js";import{a as gg}from"./chunk-R4ZRZJFL.js";import"./chunk-L657QK52.js";import{a as mg}from"./chunk-FJ6F3CXY.js";import"./chunk-4Y7EKSO4.js";import"./chunk-XVXRQZ3E.js";import"./chunk-Z6LOQ73Z.js";import{a as fg,b as _d,c as yd}from"./chunk-ZORGARF3.js";import{a as hg,i as pg,o as gd}from"./chunk-BZNA47H5.js";import{a as cg,b as ka,c as dg,d as ug}from"./chunk-3KOSJLPE.js";import{a as ir}from"./chunk-VLQOBYCU.js";import"./chunk-Z5N4P45E.js";import{b as Oa,c as ag}from"./chunk-IGLWZTM3.js";import{a as pd}from"./chunk-OXNLASJ2.js";import{a as tg}from"./chunk-MJN6ZDZD.js";import"./chunk-UPCYQ2JS.js";import{a as qf,b as Yf}from"./chunk-26EEXAHQ.js";import{a as dd}from"./chunk-OX7MQO37.js";import{c as Kf,e as Qf,g as Jf,j as Xf,k as eg}from"./chunk-AC7AQWXQ.js";import{a as Wf}from"./chunk-HPYQ6UOC.js";import{b as ad}from"./chunk-37H4LYIE.js";import{a as Zf}from"./chunk-X4LAWCTR.js";import{a as fd}from"./chunk-YUIUJIOR.js";import{a as md}from"./chunk-XHOTVM3O.js";import{a as On}from"./chunk-X2D76ZWG.js";import"./chunk-DJ47AFVJ.js";import"./chunk-U7Z2AEOP.js";import"./chunk-BBBNACDZ.js";import"./chunk-RZU6EEB3.js";import"./chunk-P3DBVG4K.js";import"./chunk-A3QOQ5KT.js";import"./chunk-YUUJN5G2.js";import"./chunk-3SDF35T4.js";import"./chunk-OGWQCXDL.js";import"./chunk-6EWOYGD5.js";import"./chunk-WDTJILD4.js";import"./chunk-UHY7OSK2.js";import"./chunk-SGQDWWIB.js";import"./chunk-WERKLYA3.js";import"./chunk-FDMAP7C3.js";import{a as ho}from"./chunk-XPKJ6EMR.js";import"./chunk-NSTNSNXJ.js";import"./chunk-FEVELSXH.js";import"./chunk-NRFGADTQ.js";import"./chunk-5UPCWP56.js";import{a as hd}from"./chunk-B4WKB6RS.js";import"./chunk-KYPXGO7D.js";import"./chunk-MP434LRL.js";import"./chunk-Q5WO5FYM.js";import"./chunk-FTVSSLGC.js";import{d as og}from"./chunk-7BH5HWH4.js";import"./chunk-TBR6RMWR.js";import"./chunk-OE7FZA67.js";import"./chunk-N7XJSFDL.js";import"./chunk-Q4SUOLOJ.js";import"./chunk-6QEGDZGH.js";import{c as wf}from"./chunk-ZNEMFYSX.js";import"./chunk-ZB2MLS4M.js";import"./chunk-BF4ZL3U3.js";import"./chunk-CFQXRJP4.js";import"./chunk-NEL2DIHD.js";import{b as rd}from"./chunk-IFW7DQNN.js";import"./chunk-GUM5P5S3.js";import{a as lg}from"./chunk-HN4UYLYA.js";import"./chunk-MAVOHF7Q.js";import"./chunk-JIO2NKRP.js";import"./chunk-JIFV566L.js";import"./chunk-ZPCCWLLV.js";import"./chunk-A2WF4NJX.js";import"./chunk-VAIXCJGK.js";import"./chunk-P4G27PQQ.js";import"./chunk-V36WZPMJ.js";import"./chunk-DYDXLXQM.js";import"./chunk-KKBJ5AEP.js";import"./chunk-5CFTTUH7.js";import{e as rg,f as ud}from"./chunk-BLPOW374.js";import"./chunk-STCMK6X3.js";import"./chunk-2XAYS5PW.js";import"./chunk-2O2C5MZC.js";import"./chunk-2F3ICBUH.js";import"./chunk-ER5QN5R7.js";import"./chunk-FXKKVZVX.js";import"./chunk-CRRD4OAH.js";import"./chunk-QB2WNRL5.js";import"./chunk-YEFYLX2H.js";import"./chunk-DMNYUKK6.js";import"./chunk-FEPWAAH4.js";import"./chunk-LOEAA5XF.js";import"./chunk-KBOF5WGE.js";import"./chunk-RNDCFWL7.js";import{a as sg}from"./chunk-X6FZ7Z76.js";import"./chunk-5RW6D2ZS.js";import{b as Jr}from"./chunk-N7KNO35F.js";import"./chunk-53X2B37Z.js";import"./chunk-6UOVQ25A.js";import{a as ig,b as ng}from"./chunk-BNSYK2BT.js";import{k as ld,m as es,n as cd}from"./chunk-DHY7QZ2H.js";import{a as Ht}from"./chunk-MFP2OFDR.js";import"./chunk-LCEQXLDI.js";import"./chunk-TUJ6FPE6.js";import{a as xn}from"./chunk-ADXKVFX6.js";import{a as Cf,b as Sf}from"./chunk-VWOJQZ7J.js";import"./chunk-V2JYXY4D.js";import"./chunk-KMJL237I.js";import"./chunk-PDWLAUMH.js";import{d as od}from"./chunk-UVZRJ2I3.js";import"./chunk-SZLPDMBI.js";import{a as Df}from"./chunk-65QIQYGA.js";import"./chunk-TLLESPR2.js";import"./chunk-NFADXGWT.js";import{b as ff}from"./chunk-FI6XC3PH.js";import{a as Uf}from"./chunk-I3S324BU.js";import"./chunk-YTC2EJDQ.js";import"./chunk-2UDQ3IWX.js";import"./chunk-DCAB3MR3.js";import"./chunk-YC7IXNOA.js";import"./chunk-KVRBCQMQ.js";import{a as Pf,d as Lf}from"./chunk-XDMNA7OV.js";import"./chunk-NKZ7R6T6.js";import"./chunk-VHAPMMA5.js";import"./chunk-DR5D3NPO.js";import"./chunk-U6WVZEYH.js";import"./chunk-ERH7ZNSC.js";import"./chunk-GUOR3BIM.js";import{a as xa}from"./chunk-2EA2KAER.js";import{b as zf,c as Gf,g as jf,h as sd,i as $f}from"./chunk-V5AJXD2Y.js";import{a as Hf}from"./chunk-WXS2B4FF.js";import{b as kf,d as Rf,f as Af,g as Xr,q as Ff}from"./chunk-XFK3CDZ5.js";import"./chunk-4XBATNKX.js";import{a as In,b as xf,c as Of}from"./chunk-3IJY37BG.js";import{a as mo,b as Nf,d as Vf,f as Bf,n as En}from"./chunk-J57HR4DB.js";import{a as Ta,b as Ma,c as Jc,d as Xc,e as Qr,f as Ni,g as It,h as yt}from"./chunk-RMX46EOA.js";import{c as Zm}from"./chunk-MDSLION2.js";import{b as lo,g as y}from"./chunk-Q7HARYVW.js";import{f as ao}from"./chunk-3NRQ53KE.js";import"./chunk-V2KSICSA.js";import{a as R,b as ri,c as Bt,d as Li,e as tn,f as le,g as si}from"./chunk-GNCG2SQP.js";import"./chunk-5HCLBNUR.js";import{a as Mf,b as If,c as Ef}from"./chunk-QPDPZUDG.js";import{b as yg}from"./chunk-SX72BVNJ.js";import"./chunk-A5VRDVEH.js";import{a as Qm}from"./chunk-JEEYT3GD.js";import"./chunk-RMOIVYM4.js";import"./chunk-5JXPUH2D.js";import"./chunk-F4I5LECK.js";import{a as Km}from"./chunk-J4PQZSQE.js";import"./chunk-KYP6LPQU.js";import"./chunk-UMB6LRQI.js";import{a as Bi,b as bf,d as Ce}from"./chunk-AQ74ANSJ.js";import"./chunk-SAOUSUZE.js";import"./chunk-IFPBW5UQ.js";import{a as gf,b as _f,c as tr,i as yf,j as vf}from"./chunk-ZV7ILGPO.js";import"./chunk-6ZT4EXDX.js";import"./chunk-RHHHYJSZ.js";import"./chunk-QBQKFGOZ.js";import"./chunk-K5NHJTKR.js";import{a as Tf}from"./chunk-XKXYUJUA.js";import{o as id,p as nd}from"./chunk-F7PIPM6E.js";import{b as cf}from"./chunk-FR6Q4MSQ.js";import{a as po,g as pf,h as mf}from"./chunk-C6JT6KYF.js";import"./chunk-BCREO4Q5.js";import"./chunk-Z5Q76SB7.js";import"./chunk-E5R4OI7X.js";import{b as td,g as hf}from"./chunk-6FWNINU2.js";import{u as uf}from"./chunk-ES7AH7WX.js";import{c as df}from"./chunk-RSDQHAJX.js";import{b as Zr,c as Xn}from"./chunk-NYONONNN.js";import{b as Da}from"./chunk-MZFPLWMN.js";import{a as Qc,b as Um}from"./chunk-DS2JVXBM.js";import{b as ae}from"./chunk-G3LLBABP.js";import{a as Pi}from"./chunk-T4B3RN6B.js";import{c as Ym,e as Kr}from"./chunk-MXADXAOS.js";import"./chunk-RJHITHLB.js";import"./chunk-IZZ2BWJH.js";import{c as _g}from"./chunk-CGTLZX6D.js";import{a as co}from"./chunk-JTJ3UVF7.js";import"./chunk-R4TNLPIN.js";import{a as Wm,b as qm}from"./chunk-5HLV7XP5.js";import"./chunk-BENVXA3L.js";import{e as sf,h as of,i as af,j as ze,k as Ea,m as lf,t as Vi}from"./chunk-UI76XBLJ.js";import{a as Jm,b as er}from"./chunk-UE2YGKE7.js";import{B as tf,P as nn,V as nf,Y as rf,d as Xm,n as uo,o as Ia,q as ef}from"./chunk-BE76S5KT.js";import{a as $m,c as Yr}from"./chunk-3RDV3O6N.js";import{a as wi}from"./chunk-D2ITYHSM.js";import{a as jm}from"./chunk-FIITBHDP.js";import"./chunk-VSVNPPHQ.js";import{N as zm,X as Gm,_ as ed}from"./chunk-CTGIUUCS.js";import{F as u,I as z,O as Hm,Q as qr,b as Tm,c as Uc,e as Mm,f as Wc,g as wa,h as $r,j as Ur,n as oo,q as Pm,r as bi,y as Lm}from"./chunk-VWEBO6QK.js";import{A as Bm,I as Zc,M as Kc,S as D,t as Mn,u as Nm,z as Vm}from"./chunk-KAAR5ZJN.js";import{a as c}from"./chunk-W3WDPWBE.js";import{a as Ca,c as Fi,e as Im,g as qc,h as Mt,j as Em,m as Sa,o as xm,p as Wr,q as Yc,s as Om,u as km,v as Rm,w as Am,y as Fm,z as Jn}from"./chunk-WKT5W7KT.js";import{b as He,d as rt,e as so}from"./chunk-MLSR6YE6.js";import"./chunk-JPDAKIWT.js";import"./chunk-VU5W7W6Y.js";import{$ as ge,$a as q,$b as kt,A as Rr,Aa as Nr,Ab as Tt,B as Zs,Ba as qp,Bb as ye,C as Lp,Ca as Yp,Cb as ve,D as Sc,Da as Zp,Db as Ae,E as bn,Ea as Kp,Eb as j,F as Np,Fa as Qp,Fb as fe,G as Vp,Ga as Jp,Gb as Sn,H as Ks,Ha as Xp,Hb as um,I as wn,Ia as Zn,Ib as Qe,J as Dc,Ja as em,Jb as Je,K as Bp,Ka as tm,Kb as Xe,L as Hp,La as to,Lb as ii,M as Qs,Ma as g,Mb as pe,N as gi,Na as $,Nb as Ai,O as Ze,Oa as xc,Ob as Pc,P as Ke,Pa as Ee,Pb as Lc,Q as ua,Qa as im,Qb as hm,R as Se,Ra as ma,Rb as zr,S as qt,Sa as Vr,Sb as Nc,T as Z,Ta as nm,Tb as Vc,U as Yt,Ua as St,Ub as Qt,V as zp,Va as fa,Vb as ga,W as ke,Wa as Cn,Wb as _a,X as Tc,Xa as io,Xb as pm,Y as Ve,Ya as rm,Yb as ya,Z as V,Za as sm,Zb as Bc,_ as Js,_a as om,_b as mm,a as Xi,aa as se,ab as _i,ac as fm,b as Ip,ba as Zt,bb as C,bc as Le,c as vc,ca as De,cb as Kn,cc as no,d as bc,da as ha,db as ct,dc as Gr,e as wc,ea as Ar,eb as Oc,ec as gm,f as lt,fa as Gp,fb as kc,fc as _m,g as Pe,ga as Xs,gb as Re,gc as dt,h as Ep,ha as Yn,hb as am,hc as va,i as xp,ia as jp,ib as Qn,ic as ym,j as en,ja as Nt,jb as yi,jc as vm,k as Ut,ka as L,kb as vi,kc as ni,l as ie,la as N,lb as v,lc as Dn,m as Ys,ma as Kt,mb as b,mc as Tn,n as Op,na as eo,nb as G,nc as jr,o as kp,oa as Fr,ob as Rc,oc as Te,p as oe,pa as Mc,pb as Ac,pc as bm,q as da,qa as pa,qb as Fc,qc as Hc,r as Wt,ra as Be,rb as _e,rc as wm,s as Rp,sa as Y,sb as lm,t as Cc,ta as $p,tb as k,u as Ap,ua as Ic,ub as T,uc as Cm,v as Lt,va as Up,vb as Br,vc as zc,w as kr,wa as Pr,wb as Hr,x as _t,xa as Wp,xb as cm,xc as ba,y as Fp,ya as Ec,yb as dm,yc as Sm,z as Pp,za as Lr,zb as Dt,zc as Gc}from"./chunk-WL2CSBK4.js";import{b as ro,j as $c,n as Dm,p as K,r as re}from"./chunk-X3IDZTNG.js";import{a as ut,g as jc,p as Vt}from"./chunk-IQJU4QT3.js";import"./chunk-MDAB6L5Y.js";import"./chunk-FMFGIQYB.js";import{a as I,b as te,e as Ob,f as kb,h as A}from"./chunk-EAH6BNBL.js";var ov=Ob((Rh,Ah)=>{"use strict";(function(t,e){typeof define=="function"&&define.amd?define([],e):typeof Rh<"u"?e():(e(),t.FileSaver={})})(Rh,function(){"use strict";function t(a,l){return typeof l>"u"?l={autoBom:!1}:typeof l!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),l={autoBom:!l}),l.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}function e(a,l,d){var h=new XMLHttpRequest;h.open("GET",a),h.responseType="blob",h.onload=function(){o(h.response,l,d)},h.onerror=function(){console.error("could not download file")},h.send()}function n(a){var l=new XMLHttpRequest;l.open("HEAD",a,!1);try{l.send()}catch{}return 200<=l.status&&299>=l.status}function i(a){try{a.dispatchEvent(new MouseEvent("click"))}catch{var l=document.createEvent("MouseEvents");l.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(l)}}var r=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:void 0,s=r.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),o=r.saveAs||(typeof window!="object"||window!==r?function(){}:"download"in HTMLAnchorElement.prototype&&!s?function(a,l,d){var h=r.URL||r.webkitURL,p=document.createElement("a");l=l||a.name||"download",p.download=l,p.rel="noopener",typeof a=="string"?(p.href=a,p.origin===location.origin?i(p):n(p.href)?e(a,l,d):i(p,p.target="_blank")):(p.href=h.createObjectURL(a),setTimeout(function(){h.revokeObjectURL(p.href)},4e4),setTimeout(function(){i(p)},0))}:"msSaveOrOpenBlob"in navigator?function(a,l,d){if(l=l||a.name||"download",typeof a!="string")navigator.msSaveOrOpenBlob(t(a,d),l);else if(n(a))e(a,l,d);else{var h=document.createElement("a");h.href=a,h.target="_blank",setTimeout(function(){i(h)})}}:function(a,l,d,h){if(h=h||open("","_blank"),h&&(h.document.title=h.document.body.innerText="downloading..."),typeof a=="string")return e(a,l,d);var p=a.type==="application/octet-stream",m=/constructor/i.test(r.HTMLElement)||r.safari,f=/CriOS\/[\d]+/.test(navigator.userAgent);if((f||p&&m||s)&&typeof FileReader<"u"){var w=new FileReader;w.onloadend=function(){var S=w.result;S=f?S:S.replace(/^data:[^;]*;/,"data:attachment/file;"),h?h.location.href=S:location=S,h=null},w.readAsDataURL(a)}else{var M=r.URL||r.webkitURL,_=M.createObjectURL(a);h?h.location=_:location.href=_,h=null,setTimeout(function(){M.revokeObjectURL(_)},4e4)}});r.saveAs=o.saveAs=o,typeof Ah<"u"&&(Ah.exports=o)})});var Ed=class extends _m{constructor(){super(...arguments),this.supportsDOMEvents=!0}},xd=class t extends Ed{static makeCurrent(){gm(new t)}onAndCancel(e,n,i){return e.addEventListener(n,i),()=>{e.removeEventListener(n,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=Fb();return n==null?null:Pb(n)}resetBaseElement(){fo=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return vm(document.cookie,e)}},fo=null;function Fb(){return fo=fo||document.querySelector("base"),fo?fo.getAttribute("href"):null}function Pb(t){return new URL(t,document.baseURI).pathname}var Lb=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac});let t=e;return t})(),Od=new ke(""),d_=(()=>{let e=class e{constructor(i,r){this._zone=r,this._eventNameToPlugin=new Map,i.forEach(s=>{s.manager=this}),this._plugins=i.slice().reverse()}addEventListener(i,r,s){return this._findPluginFor(r).addEventListener(i,r,s)}getZone(){return this._zone}_findPluginFor(i){let r=this._eventNameToPlugin.get(i);if(r)return r;if(r=this._plugins.find(o=>o.supports(i)),!r)throw new Se(5101,!1);return this._eventNameToPlugin.set(i,r),r}};e.\u0275fac=function(r){return new(r||e)(Ve(Od),Ve(St))},e.\u0275prov=Z({token:e,factory:e.\u0275fac});let t=e;return t})(),Na=class{constructor(e){this._doc=e}},Md="ng-app-id",u_=(()=>{let e=class e{constructor(i,r,s,o={}){this.doc=i,this.appId=r,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Hc(o),this.resetHostNodes()}addStyles(i){for(let r of i)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(i){for(let r of i)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let i=this.styleNodesInDOM;i&&(i.forEach(r=>r.remove()),i.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(i){this.hostNodes.add(i);for(let r of this.getAllStyles())this.addStyleToHost(i,r)}removeHost(i){this.hostNodes.delete(i)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(i){for(let r of this.hostNodes)this.addStyleToHost(r,i)}onStyleRemoved(i){let r=this.styleRef;r.get(i)?.elements?.forEach(s=>s.remove()),r.delete(i)}collectServerRenderedStyles(){let i=this.doc.head?.querySelectorAll(`style[${Md}="${this.appId}"]`);if(i?.length){let r=new Map;return i.forEach(s=>{s.textContent!=null&&r.set(s.textContent,s)}),r}return null}changeUsageCount(i,r){let s=this.styleRef;if(s.has(i)){let o=s.get(i);return o.usage+=r,o.usage}return s.set(i,{usage:r,elements:[]}),r}getStyleElement(i,r){let s=this.styleNodesInDOM,o=s?.get(r);if(o?.parentNode===i)return s.delete(r),o.removeAttribute(Md),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=r,this.platformIsServer&&a.setAttribute(Md,this.appId),i.appendChild(a),a}}addStyleToHost(i,r){let s=this.getStyleElement(i,r),o=this.styleRef,a=o.get(r)?.elements;a?a.push(s):o.set(r,{elements:[s],usage:1})}resetHostNodes(){let i=this.hostNodes;i.clear(),i.add(this.doc.head)}};e.\u0275fac=function(r){return new(r||e)(Ve(dt),Ve(Ic),Ve(Ec,8),Ve(Pr))},e.\u0275prov=Z({token:e,factory:e.\u0275fac});let t=e;return t})(),Id={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Rd=/%COMP%/g,h_="%COMP%",Nb=`_nghost-${h_}`,Vb=`_ngcontent-${h_}`,Bb=!0,Hb=new ke("",{providedIn:"root",factory:()=>Bb});function zb(t){return Vb.replace(Rd,t)}function Gb(t){return Nb.replace(Rd,t)}function p_(t,e){return e.map(n=>n.replace(Rd,t))}var Va=(()=>{let e=class e{constructor(i,r,s,o,a,l,d,h=null){this.eventManager=i,this.sharedStylesHost=r,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=l,this.ngZone=d,this.nonce=h,this.rendererByCompId=new Map,this.platformIsServer=Hc(l),this.defaultRenderer=new go(i,a,d,this.platformIsServer)}createRenderer(i,r){if(!i||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Js.ShadowDom&&(r=te(I({},r),{encapsulation:Js.Emulated}));let s=this.getOrCreateRenderer(i,r);return s instanceof Ba?s.applyToHost(i):s instanceof _o&&s.applyStyles(),s}getOrCreateRenderer(i,r){let s=this.rendererByCompId,o=s.get(r.id);if(!o){let a=this.doc,l=this.ngZone,d=this.eventManager,h=this.sharedStylesHost,p=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(r.encapsulation){case Js.Emulated:o=new Ba(d,h,r,this.appId,p,a,l,m);break;case Js.ShadowDom:return new kd(d,h,i,r,a,l,this.nonce,m);default:o=new _o(d,h,r,p,a,l,m);break}s.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(r){return new(r||e)(Ve(d_),Ve(u_),Ve(Ic),Ve(Hb),Ve(dt),Ve(Pr),Ve(St),Ve(Ec))},e.\u0275prov=Z({token:e,factory:e.\u0275fac});let t=e;return t})(),go=class{constructor(e,n,i,r){this.eventManager=e,this.doc=n,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,n){return n?this.doc.createElementNS(Id[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(a_(e)?e.content:e).appendChild(n)}insertBefore(e,n,i){e&&(a_(e)?e.content:e).insertBefore(n,i)}removeChild(e,n){e&&e.removeChild(n)}selectRootElement(e,n){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new Se(-5104,!1);return n||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,i,r){if(r){n=r+":"+n;let s=Id[r];s?e.setAttributeNS(s,n,i):e.setAttribute(n,i)}else e.setAttribute(n,i)}removeAttribute(e,n,i){if(i){let r=Id[i];r?e.removeAttributeNS(r,n):e.removeAttribute(`${i}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,i,r){r&(to.DashCase|to.Important)?e.style.setProperty(n,i,r&to.Important?"important":""):e.style[n]=i}removeStyle(e,n,i){i&to.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,i){e!=null&&(e[n]=i)}setValue(e,n){e.nodeValue=n}listen(e,n,i){if(typeof e=="string"&&(e=Gr().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${n}`);return this.eventManager.addEventListener(e,n,this.decoratePreventDefault(i))}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(n)):e(n))===!1&&n.preventDefault()}}};function a_(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var kd=class extends go{constructor(e,n,i,r,s,o,a,l){super(e,s,o,l),this.sharedStylesHost=n,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let d=p_(r.id,r.styles);for(let h of d){let p=document.createElement("style");a&&p.setAttribute("nonce",a),p.textContent=h,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,i){return super.insertBefore(this.nodeOrShadowRoot(e),n,i)}removeChild(e,n){return super.removeChild(this.nodeOrShadowRoot(e),n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},_o=class extends go{constructor(e,n,i,r,s,o,a,l){super(e,s,o,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=r,this.styles=l?p_(l,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Ba=class extends _o{constructor(e,n,i,r,s,o,a,l){let d=r+"-"+i.id;super(e,n,i,s,o,a,l,d),this.contentAttr=zb(d),this.hostAttr=Gb(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let i=super.createElement(e,n);return super.setAttribute(i,this.contentAttr,""),i}},jb=(()=>{let e=class e extends Na{constructor(i){super(i)}supports(i){return!0}addEventListener(i,r,s){return i.addEventListener(r,s,!1),()=>this.removeEventListener(i,r,s)}removeEventListener(i,r,s){return i.removeEventListener(r,s)}};e.\u0275fac=function(r){return new(r||e)(Ve(dt))},e.\u0275prov=Z({token:e,factory:e.\u0275fac});let t=e;return t})(),l_=["alt","control","meta","shift"],$b={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ub={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},Wb=(()=>{let e=class e extends Na{constructor(i){super(i)}supports(i){return e.parseEventName(i)!=null}addEventListener(i,r,s){let o=e.parseEventName(r),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Gr().onAndCancel(i,o.domEventName,a))}static parseEventName(i){let r=i.toLowerCase().split("."),s=r.shift();if(r.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(r.pop()),a="",l=r.indexOf("code");if(l>-1&&(r.splice(l,1),a="code."),l_.forEach(h=>{let p=r.indexOf(h);p>-1&&(r.splice(p,1),a+=h+".")}),a+=o,r.length!=0||o.length===0)return null;let d={};return d.domEventName=s,d.fullKey=a,d}static matchEventFullKeyCode(i,r){let s=$b[i.key]||i.key,o="";return r.indexOf("code.")>-1&&(s=i.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),l_.forEach(a=>{if(a!==s){let l=Ub[a];l(i)&&(o+=a+".")}}),o+=s,o===r)}static eventCallback(i,r,s){return o=>{e.matchEventFullKeyCode(o,i)&&s.runGuarded(()=>r(o))}}static _normalizeKey(i){return i==="esc"?"escape":i}};e.\u0275fac=function(r){return new(r||e)(Ve(dt))},e.\u0275prov=Z({token:e,factory:e.\u0275fac});let t=e;return t})();function m_(t,e){return fm(I({rootComponent:t},qb(e)))}function qb(t){return{appProviders:[...Jb,...t?.providers??[]],platformProviders:Qb}}function Yb(){xd.makeCurrent()}function Zb(){return new Mc}function Kb(){return $p(document),document}var Qb=[{provide:Pr,useValue:bm},{provide:Up,useValue:Yb,multi:!0},{provide:dt,useFactory:Kb,deps:[]}];var Jb=[{provide:Gp,useValue:"root"},{provide:Mc,useFactory:Zb,deps:[]},{provide:Od,useClass:jb,multi:!0,deps:[dt,St,Pr]},{provide:Od,useClass:Wb,multi:!0,deps:[dt]},Va,u_,d_,{provide:ma,useExisting:Va},{provide:wm,useClass:Lb,deps:[]},[]];var f_=(()=>{let e=class e{constructor(i){this._doc=i}getTitle(){return this._doc.title}setTitle(i){this._doc.title=i||""}};e.\u0275fac=function(r){return new(r||e)(Ve(dt))},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var Ad=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:function(r){let s=null;return r?s=new(r||e):s=Ve(Xb),s},providedIn:"root"});let t=e;return t})(),Xb=(()=>{let e=class e extends Ad{constructor(i){super(),this._doc=i}sanitize(i,r){if(r==null)return null;switch(i){case Zn.NONE:return r;case Zn.HTML:return Nr(r,"HTML")?Lr(r):Xp(this._doc,String(r)).toString();case Zn.STYLE:return Nr(r,"Style")?Lr(r):r;case Zn.SCRIPT:if(Nr(r,"Script"))return Lr(r);throw new Se(5200,!1);case Zn.URL:return Nr(r,"URL")?Lr(r):Jp(String(r));case Zn.RESOURCE_URL:if(Nr(r,"ResourceURL"))return Lr(r);throw new Se(5201,!1);default:throw new Se(5202,!1)}}bypassSecurityTrustHtml(i){return qp(i)}bypassSecurityTrustStyle(i){return Yp(i)}bypassSecurityTrustScript(i){return Zp(i)}bypassSecurityTrustUrl(i){return Kp(i)}bypassSecurityTrustResourceUrl(i){return Qp(i)}};e.\u0275fac=function(r){return new(r||e)(Ve(dt))},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var ne="primary",Ro=Symbol("RouteTitle"),Vd=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function as(t){return new Vd(t)}function ew(t,e,n){let i=n.path.split("/");if(i.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||i.length<t.length))return null;let r={};for(let s=0;s<i.length;s++){let o=i[s],a=t[s];if(o.startsWith(":"))r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:t.slice(0,i.length),posParams:r}}function tw(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Hi(t[n],e[n]))return!1;return!0}function Hi(t,e){let n=t?Bd(t):void 0,i=e?Bd(e):void 0;if(!n||!i||n.length!=i.length)return!1;let r;for(let s=0;s<n.length;s++)if(r=n[s],!C_(t[r],e[r]))return!1;return!0}function Bd(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function C_(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),i=[...e].sort();return n.every((r,s)=>i[s]===r)}else return t===e}function S_(t){return t.length>0?t[t.length-1]:null}function An(t){return Op(t)?t:_a(t)?Ut(Promise.resolve(t)):ie(t)}var iw={exact:T_,subset:M_},D_={exact:nw,subset:rw,ignored:()=>!0};function __(t,e,n){return iw[n.paths](t.root,e.root,n.matrixParams)&&D_[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function nw(t,e){return Hi(t,e)}function T_(t,e,n){if(!rr(t.segments,e.segments)||!Ga(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!t.children[i]||!T_(t.children[i],e.children[i],n))return!1;return!0}function rw(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>C_(t[n],e[n]))}function M_(t,e,n){return I_(t,e,e.segments,n)}function I_(t,e,n,i){if(t.segments.length>n.length){let r=t.segments.slice(0,n.length);return!(!rr(r,n)||e.hasChildren()||!Ga(r,n,i))}else if(t.segments.length===n.length){if(!rr(t.segments,n)||!Ga(t.segments,n,i))return!1;for(let r in e.children)if(!t.children[r]||!M_(t.children[r],e.children[r],i))return!1;return!0}else{let r=n.slice(0,t.segments.length),s=n.slice(t.segments.length);return!rr(t.segments,r)||!Ga(t.segments,r,i)||!t.children[ne]?!1:I_(t.children[ne],e,s,i)}}function Ga(t,e,n){return e.every((i,r)=>D_[n](t[r].parameters,i.parameters))}var kn=class{constructor(e=new be([],{}),n={},i=null){this.root=e,this.queryParams=n,this.fragment=i}get queryParamMap(){return this._queryParamMap??=as(this.queryParams),this._queryParamMap}toString(){return aw.serialize(this)}},be=class{constructor(e,n){this.segments=e,this.children=n,this.parent=null,Object.values(n).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return ja(this)}},nr=class{constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=as(this.parameters),this._parameterMap}toString(){return x_(this)}};function sw(t,e){return rr(t,e)&&t.every((n,i)=>Hi(n.parameters,e[i].parameters))}function rr(t,e){return t.length!==e.length?!1:t.every((n,i)=>n.path===e[i].path)}function ow(t,e){let n=[];return Object.entries(t.children).forEach(([i,r])=>{i===ne&&(n=n.concat(e(r,i)))}),Object.entries(t.children).forEach(([i,r])=>{i!==ne&&(n=n.concat(e(r,i)))}),n}var uu=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:()=>new Ua,providedIn:"root"});let t=e;return t})(),Ua=class{parse(e){let n=new zd(e);return new kn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${yo(e.root,!0)}`,i=dw(e.queryParams),r=typeof e.fragment=="string"?`#${lw(e.fragment)}`:"";return`${n}${i}${r}`}},aw=new Ua;function ja(t){return t.segments.map(e=>x_(e)).join("/")}function yo(t,e){if(!t.hasChildren())return ja(t);if(e){let n=t.children[ne]?yo(t.children[ne],!1):"",i=[];return Object.entries(t.children).forEach(([r,s])=>{r!==ne&&i.push(`${r}:${yo(s,!1)}`)}),i.length>0?`${n}(${i.join("//")})`:n}else{let n=ow(t,(i,r)=>r===ne?[yo(t.children[ne],!1)]:[`${r}:${yo(i,!1)}`]);return Object.keys(t.children).length===1&&t.children[ne]!=null?`${ja(t)}/${n[0]}`:`${ja(t)}/(${n.join("//")})`}}function E_(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ha(t){return E_(t).replace(/%3B/gi,";")}function lw(t){return encodeURI(t)}function Hd(t){return E_(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function $a(t){return decodeURIComponent(t)}function y_(t){return $a(t.replace(/\+/g,"%20"))}function x_(t){return`${Hd(t.path)}${cw(t.parameters)}`}function cw(t){return Object.entries(t).map(([e,n])=>`;${Hd(e)}=${Hd(n)}`).join("")}function dw(t){let e=Object.entries(t).map(([n,i])=>Array.isArray(i)?i.map(r=>`${Ha(n)}=${Ha(r)}`).join("&"):`${Ha(n)}=${Ha(i)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var uw=/^[^\/()?;#]+/;function Fd(t){let e=t.match(uw);return e?e[0]:""}var hw=/^[^\/()?;=#]+/;function pw(t){let e=t.match(hw);return e?e[0]:""}var mw=/^[^=?&#]+/;function fw(t){let e=t.match(mw);return e?e[0]:""}var gw=/^[^&#]+/;function _w(t){let e=t.match(gw);return e?e[0]:""}var zd=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new be([],{}):new be([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(i[ne]=new be(e,n)),i}parseSegment(){let e=Fd(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Se(4009,!1);return this.capture(e),new nr($a(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=pw(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let r=Fd(this.remaining);r&&(i=r,this.capture(i))}e[$a(n)]=$a(i)}parseQueryParam(e){let n=fw(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let o=_w(this.remaining);o&&(i=o,this.capture(i))}let r=y_(n),s=y_(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=Fd(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new Se(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=ne);let o=this.parseChildren();n[s]=Object.keys(o).length===1?o[ne]:new be([],o),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Se(4011,!1)}};function O_(t){return t.segments.length>0?new be([],{[ne]:t}):t}function k_(t){let e={};for(let[i,r]of Object.entries(t.children)){let s=k_(r);if(i===ne&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[i]=s)}let n=new be(t.segments,e);return yw(n)}function yw(t){if(t.numberOfChildren===1&&t.children[ne]){let e=t.children[ne];return new be(t.segments.concat(e.segments),e.children)}return t}function ls(t){return t instanceof kn}function vw(t,e,n=null,i=null){let r=R_(t);return A_(r,e,n,i)}function R_(t){let e;function n(s){let o={};for(let l of s.children){let d=n(l);o[l.outlet]=d}let a=new be(s.url,o);return s===t&&(e=a),a}let i=n(t.root),r=O_(i);return e??r}function A_(t,e,n,i){let r=t;for(;r.parent;)r=r.parent;if(e.length===0)return Pd(r,r,r,n,i);let s=bw(e);if(s.toRoot())return Pd(r,r,new be([],{}),n,i);let o=ww(s,r,t),a=o.processChildren?wo(o.segmentGroup,o.index,s.commands):P_(o.segmentGroup,o.index,s.commands);return Pd(r,o.segmentGroup,a,n,i)}function Wa(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Do(t){return typeof t=="object"&&t!=null&&t.outlets}function Pd(t,e,n,i,r){let s={};i&&Object.entries(i).forEach(([l,d])=>{s[l]=Array.isArray(d)?d.map(h=>`${h}`):`${d}`});let o;t===e?o=n:o=F_(t,e,n);let a=O_(k_(o));return new kn(a,s,r)}function F_(t,e,n){let i={};return Object.entries(t.children).forEach(([r,s])=>{s===e?i[r]=n:i[r]=F_(s,e,n)}),new be(t.segments,i)}var qa=class{constructor(e,n,i){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=i,e&&i.length>0&&Wa(i[0]))throw new Se(4003,!1);let r=i.find(Do);if(r&&r!==S_(i))throw new Se(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function bw(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new qa(!0,0,t);let e=0,n=!1,i=t.reduce((r,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([l,d])=>{a[l]=typeof d=="string"?d.split("/"):d}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return typeof s!="string"?[...r,s]:o===0?(s.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?n=!0:a===".."?e++:a!=""&&r.push(a))}),r):[...r,s]},[]);return new qa(n,e,i)}var ss=class{constructor(e,n,i){this.segmentGroup=e,this.processChildren=n,this.index=i}};function ww(t,e,n){if(t.isAbsolute)return new ss(e,!0,0);if(!n)return new ss(e,!1,NaN);if(n.parent===null)return new ss(n,!0,0);let i=Wa(t.commands[0])?0:1,r=n.segments.length-1+i;return Cw(n,r,t.numberOfDoubleDots)}function Cw(t,e,n){let i=t,r=e,s=n;for(;s>r;){if(s-=r,i=i.parent,!i)throw new Se(4005,!1);r=i.segments.length}return new ss(i,!1,r-s)}function Sw(t){return Do(t[0])?t[0].outlets:{[ne]:t}}function P_(t,e,n){if(t??=new be([],{}),t.segments.length===0&&t.hasChildren())return wo(t,e,n);let i=Dw(t,e,n),r=n.slice(i.commandIndex);if(i.match&&i.pathIndex<t.segments.length){let s=new be(t.segments.slice(0,i.pathIndex),{});return s.children[ne]=new be(t.segments.slice(i.pathIndex),t.children),wo(s,0,r)}else return i.match&&r.length===0?new be(t.segments,{}):i.match&&!t.hasChildren()?Gd(t,e,n):i.match?wo(t,0,r):Gd(t,e,n)}function wo(t,e,n){if(n.length===0)return new be(t.segments,{});{let i=Sw(n),r={};if(Object.keys(i).some(s=>s!==ne)&&t.children[ne]&&t.numberOfChildren===1&&t.children[ne].segments.length===0){let s=wo(t.children[ne],e,n);return new be(t.segments,s.children)}return Object.entries(i).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(r[s]=P_(t.children[s],e,o))}),Object.entries(t.children).forEach(([s,o])=>{i[s]===void 0&&(r[s]=o)}),new be(t.segments,r)}}function Dw(t,e,n){let i=0,r=e,s={match:!1,pathIndex:0,commandIndex:0};for(;r<t.segments.length;){if(i>=n.length)return s;let o=t.segments[r],a=n[i];if(Do(a))break;let l=`${a}`,d=i<n.length-1?n[i+1]:null;if(r>0&&l===void 0)break;if(l&&d&&typeof d=="object"&&d.outlets===void 0){if(!b_(l,d,o))return s;i+=2}else{if(!b_(l,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function Gd(t,e,n){let i=t.segments.slice(0,e),r=0;for(;r<n.length;){let s=n[r];if(Do(s)){let l=Tw(s.outlets);return new be(i,l)}if(r===0&&Wa(n[0])){let l=t.segments[e];i.push(new nr(l.path,v_(n[0]))),r++;continue}let o=Do(s)?s.outlets[ne]:`${s}`,a=r<n.length-1?n[r+1]:null;o&&a&&Wa(a)?(i.push(new nr(o,v_(a))),r+=2):(i.push(new nr(o,{})),r++)}return new be(i,{})}function Tw(t){let e={};return Object.entries(t).forEach(([n,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[n]=Gd(new be([],{}),0,i))}),e}function v_(t){let e={};return Object.entries(t).forEach(([n,i])=>e[n]=`${i}`),e}function b_(t,e,n){return t==n.path&&Hi(e,n.parameters)}var Co="imperative",vt=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(vt||{}),oi=class{constructor(e,n){this.id=e,this.url=n}},To=class extends oi{constructor(e,n,i="imperative",r=null){super(e,n),this.type=vt.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},sr=class extends oi{constructor(e,n,i){super(e,n),this.urlAfterRedirects=i,this.type=vt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Xt=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t}(Xt||{}),jd=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(jd||{}),Rn=class extends oi{constructor(e,n,i,r){super(e,n),this.reason=i,this.code=r,this.type=vt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},or=class extends oi{constructor(e,n,i,r){super(e,n),this.reason=i,this.code=r,this.type=vt.NavigationSkipped}},Mo=class extends oi{constructor(e,n,i,r){super(e,n),this.error=i,this.target=r,this.type=vt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Ya=class extends oi{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=vt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},$d=class extends oi{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=vt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ud=class extends oi{constructor(e,n,i,r,s){super(e,n),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=vt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Wd=class extends oi{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=vt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},qd=class extends oi{constructor(e,n,i,r){super(e,n),this.urlAfterRedirects=i,this.state=r,this.type=vt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Yd=class{constructor(e){this.route=e,this.type=vt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Zd=class{constructor(e){this.route=e,this.type=vt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Kd=class{constructor(e){this.snapshot=e,this.type=vt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Qd=class{constructor(e){this.snapshot=e,this.type=vt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Jd=class{constructor(e){this.snapshot=e,this.type=vt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Xd=class{constructor(e){this.snapshot=e,this.type=vt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Io=class{},Eo=class{constructor(e){this.url=e}};var eu=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new el,this.attachRef=null}},el=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(i,r){let s=this.getOrCreateContext(i);s.outlet=r,this.contexts.set(i,s)}onChildOutletDestroyed(i){let r=this.getContext(i);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let i=this.contexts;return this.contexts=new Map,i}onOutletReAttached(i){this.contexts=i}getOrCreateContext(i){let r=this.getContext(i);return r||(r=new eu,this.contexts.set(i,r)),r}getContext(i){return this.contexts.get(i)||null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Za=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=tu(e,this._root);return n?n.children.map(i=>i.value):[]}firstChild(e){let n=tu(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=iu(e,this._root);return n.length<2?[]:n[n.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return iu(e,this._root).map(n=>n.value)}};function tu(t,e){if(t===e.value)return e;for(let n of e.children){let i=tu(t,n);if(i)return i}return null}function iu(t,e){if(t===e.value)return[e];for(let n of e.children){let i=iu(t,n);if(i.length)return i.unshift(e),i}return[]}var Jt=class{constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function rs(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var Ka=class extends Za{constructor(e,n){super(e),this.snapshot=n,pu(this,e)}toString(){return this.snapshot.toString()}};function L_(t){let e=Mw(t),n=new Pe([new nr("",{})]),i=new Pe({}),r=new Pe({}),s=new Pe({}),o=new Pe(""),a=new cs(n,i,s,o,r,ne,t,e.root);return a.snapshot=e.root,new Ka(new Jt(a,[]),e)}function Mw(t){let e={},n={},i={},r="",s=new xo([],e,i,r,n,ne,t,null,{});return new Qa("",new Jt(s,[]))}var cs=class{constructor(e,n,i,r,s,o,a,l){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(oe(d=>d[Ro]))??ie(void 0),this.url=e,this.params=n,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(oe(e=>as(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(oe(e=>as(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function hu(t,e,n="emptyOnly"){let i,{routeConfig:r}=t;return e!==null&&(n==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:I(I({},e.params),t.params),data:I(I({},e.data),t.data),resolve:I(I(I(I({},t.data),e.data),r?.data),t._resolvedData)}:i={params:I({},t.params),data:I({},t.data),resolve:I(I({},t.data),t._resolvedData??{})},r&&V_(r)&&(i.resolve[Ro]=r.title),i}var xo=class{get title(){return this.data?.[Ro]}constructor(e,n,i,r,s,o,a,l,d){this.url=e,this.params=n,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=as(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=as(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},Qa=class extends Za{constructor(e,n){super(n),this.url=e,pu(this,n)}toString(){return N_(this._root)}};function pu(t,e){e.value._routerState=t,e.children.forEach(n=>pu(t,n))}function N_(t){let e=t.children.length>0?` { ${t.children.map(N_).join(", ")} } `:"";return`${t.value}${e}`}function Ld(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Hi(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Hi(e.params,n.params)||t.paramsSubject.next(n.params),tw(e.url,n.url)||t.urlSubject.next(n.url),Hi(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function nu(t,e){let n=Hi(t.params,e.params)&&sw(t.url,e.url),i=!t.parent!=!e.parent;return n&&!i&&(!t.parent||nu(t.parent,e.parent))}function V_(t){return typeof t.title=="string"||t.title===null}var Iw=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=ne,this.activateEvents=new Y,this.deactivateEvents=new Y,this.attachEvents=new Y,this.detachEvents=new Y,this.parentContexts=V(el),this.location=V(fa),this.changeDetector=V(kt),this.environmentInjector=V(Xs),this.inputBinder=V(mu,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(i){if(i.name){let{firstChange:r,previousValue:s}=i.name;if(r)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(i){return this.parentContexts.getContext(i)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let i=this.parentContexts.getContext(this.name);i?.route&&(i.attachRef?this.attach(i.attachRef,i.route):this.activateWith(i.route,i.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Se(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Se(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Se(4012,!1);this.location.detach();let i=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(i.instance),i}attach(i,r){this.activated=i,this._activatedRoute=r,this.location.insert(i.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(i.instance)}deactivate(){if(this.activated){let i=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(i)}}activateWith(i,r){if(this.isActivated)throw new Se(4013,!1);this._activatedRoute=i;let s=this.location,a=i.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,d=new ru(i,l,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:d,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=De({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Nt]});let t=e;return t})(),ru=class t{__ngOutletInjector(e){return new t(this.route,this.childContexts,e)}constructor(e,n,i){this.route=e,this.childContexts=n,this.parent=i}get(e,n){return e===cs?this.route:e===el?this.childContexts:this.parent.get(e,n)}},mu=new ke("");function Ew(t,e,n){let i=Oo(t,e._root,n?n._root:void 0);return new Ka(i,e)}function Oo(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let i=n.value;i._futureSnapshot=e.value;let r=xw(t,e,n);return new Jt(i,r)}else{if(t.shouldAttach(e.value)){let s=t.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>Oo(t,a)),o}}let i=Ow(e.value),r=e.children.map(s=>Oo(t,s));return new Jt(i,r)}}function xw(t,e,n){return e.children.map(i=>{for(let r of n.children)if(t.shouldReuseRoute(i.value,r.value.snapshot))return Oo(t,i,r);return Oo(t,i)})}function Ow(t){return new cs(new Pe(t.url),new Pe(t.params),new Pe(t.queryParams),new Pe(t.fragment),new Pe(t.data),t.outlet,t.component,t)}var B_="ngNavigationCancelingError";function H_(t,e){let{redirectTo:n,navigationBehaviorOptions:i}=ls(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=z_(!1,Xt.Redirect);return r.url=n,r.navigationBehaviorOptions=i,r}function z_(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[B_]=!0,n.cancellationCode=e,n}function kw(t){return G_(t)&&ls(t.url)}function G_(t){return!!t&&t[B_]}var Rw=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=se({type:e,selectors:[["ng-component"]],standalone:!0,features:[pe],decls:1,vars:0,template:function(r,s){r&1&&G(0,"router-outlet")},dependencies:[Iw],encapsulation:2});let t=e;return t})();function Aw(t,e){return t.providers&&!t._injector&&(t._injector=sm(t.providers,e,`Route: ${t.path}`)),t._injector??e}function fu(t){let e=t.children&&t.children.map(fu),n=e?te(I({},t),{children:e}):I({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==ne&&(n.component=Rw),n}function zi(t){return t.outlet||ne}function Fw(t,e){let n=t.filter(i=>zi(i)===e);return n.push(...t.filter(i=>zi(i)!==e)),n}function Ao(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var Pw=(t,e,n,i)=>oe(r=>(new su(e,r.targetRouterState,r.currentRouterState,n,i).activate(t),r)),su=class{constructor(e,n,i,r,s){this.routeReuseStrategy=e,this.futureState=n,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(e){let n=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,i,e),Ld(this.futureState.root),this.activateChildRoutes(n,i,e)}deactivateChildRoutes(e,n,i){let r=rs(n);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,n,i){let r=e.value,s=n?n.value:null;if(r===s)if(r.component){let o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,n,o.children)}else this.deactivateChildRoutes(e,n,i);else s&&this.deactivateRouteAndItsChildren(n,i)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let i=n.getContext(e.value.outlet),r=i&&e.value.component?i.children:n,s=rs(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);if(i&&i.outlet){let o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){let i=n.getContext(e.value.outlet),r=i&&e.value.component?i.children:n,s=rs(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,n,i){let r=rs(n);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new Xd(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Qd(e.value.snapshot))}activateRoutes(e,n,i){let r=e.value,s=n?n.value:null;if(Ld(r),r===s)if(r.component){let o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,n,o.children)}else this.activateChildRoutes(e,n,i);else if(r.component){let o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Ld(a.route.value),this.activateChildRoutes(e,null,o.children)}else{let a=Ao(r.snapshot);o.attachRef=null,o.route=r,o.injector=a,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,i)}},Ja=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},os=class{constructor(e,n){this.component=e,this.route=n}};function Lw(t,e,n){let i=t._root,r=e?e._root:null;return vo(i,r,n,[i.value])}function Nw(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function us(t,e){let n=Symbol(),i=e.get(t,n);return i===n?typeof t=="function"&&!zp(t)?t:e.get(t):i}function vo(t,e,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=rs(e);return t.children.forEach(o=>{Vw(o,s[o.value.outlet],n,i.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>So(a,n.getContext(o),r)),r}function Vw(t,e,n,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=t.value,o=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let l=Bw(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new Ja(i)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?vo(t,e,a?a.children:null,i,r):vo(t,e,n,i,r),l&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new os(a.outlet.component,o))}else o&&So(e,a,r),r.canActivateChecks.push(new Ja(i)),s.component?vo(t,null,a?a.children:null,i,r):vo(t,null,n,i,r);return r}function Bw(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!rr(t.url,e.url);case"pathParamsOrQueryParamsChange":return!rr(t.url,e.url)||!Hi(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!nu(t,e)||!Hi(t.queryParams,e.queryParams);case"paramsChange":default:return!nu(t,e)}}function So(t,e,n){let i=rs(t),r=t.value;Object.entries(i).forEach(([s,o])=>{r.component?e?So(o,e.children.getContext(s),n):So(o,null,n):So(o,e,n)}),r.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new os(e.outlet.component,r)):n.canDeactivateChecks.push(new os(null,r)):n.canDeactivateChecks.push(new os(null,r))}function Fo(t){return typeof t=="function"}function Hw(t){return typeof t=="boolean"}function zw(t){return t&&Fo(t.canLoad)}function Gw(t){return t&&Fo(t.canActivate)}function jw(t){return t&&Fo(t.canActivateChild)}function $w(t){return t&&Fo(t.canDeactivate)}function Uw(t){return t&&Fo(t.canMatch)}function j_(t){return t instanceof kp||t?.name==="EmptyError"}var za=Symbol("INITIAL_VALUE");function ds(){return gi(t=>da(t.map(e=>e.pipe(bn(1),Qs(za)))).pipe(oe(e=>{for(let n of e)if(n!==!0){if(n===za)return za;if(n===!1||n instanceof kn)return n}return!0}),_t(e=>e!==za),bn(1)))}function Ww(t,e){return Wt(n=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return o.length===0&&s.length===0?ie(te(I({},n),{guardsResult:!0})):qw(o,i,r,t).pipe(Wt(a=>a&&Hw(a)?Yw(i,s,t,e):ie(a)),oe(a=>te(I({},n),{guardsResult:a})))})}function qw(t,e,n,i){return Ut(t).pipe(Wt(r=>Xw(r.component,r.route,n,e,i)),wn(r=>r!==!0,!0))}function Yw(t,e,n,i){return Ut(e).pipe(Zs(r=>Rp(Kw(r.route.parent,i),Zw(r.route,i),Jw(t,r.path,n),Qw(t,r.route,n))),wn(r=>r!==!0,!0))}function Zw(t,e){return t!==null&&e&&e(new Jd(t)),ie(!0)}function Kw(t,e){return t!==null&&e&&e(new Kd(t)),ie(!0)}function Qw(t,e,n){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return ie(!0);let r=i.map(s=>Cc(()=>{let o=Ao(e)??n,a=us(s,o),l=Gw(a)?a.canActivate(e,t):Yn(o,()=>a(e,t));return An(l).pipe(wn())}));return ie(r).pipe(ds())}function Jw(t,e,n){let i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>Nw(o)).filter(o=>o!==null).map(o=>Cc(()=>{let a=o.guards.map(l=>{let d=Ao(o.node)??n,h=us(l,d),p=jw(h)?h.canActivateChild(i,t):Yn(d,()=>h(i,t));return An(p).pipe(wn())});return ie(a).pipe(ds())}));return ie(s).pipe(ds())}function Xw(t,e,n,i,r){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return ie(!0);let o=s.map(a=>{let l=Ao(e)??r,d=us(a,l),h=$w(d)?d.canDeactivate(t,e,n,i):Yn(l,()=>d(t,e,n,i));return An(h).pipe(wn())});return ie(o).pipe(ds())}function e1(t,e,n,i){let r=e.canLoad;if(r===void 0||r.length===0)return ie(!0);let s=r.map(o=>{let a=us(o,t),l=zw(a)?a.canLoad(e,n):Yn(t,()=>a(e,n));return An(l)});return ie(s).pipe(ds(),$_(i))}function $_(t){return Ip(Ke(e=>{if(ls(e))throw H_(t,e)}),oe(e=>e===!0))}function t1(t,e,n,i){let r=e.canMatch;if(!r||r.length===0)return ie(!0);let s=r.map(o=>{let a=us(o,t),l=Uw(a)?a.canMatch(e,n):Yn(t,()=>a(e,n));return An(l)});return ie(s).pipe(ds(),$_(i))}var ko=class{constructor(e){this.segmentGroup=e||null}},Xa=class extends Error{constructor(e){super(),this.urlTree=e}};function ns(t){return Ys(new ko(t))}function i1(t){return Ys(new Se(4e3,!1))}function n1(t){return Ys(z_(!1,Xt.GuardRejected))}var ou=class{constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){let i=[],r=n.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return ie(i);if(r.numberOfChildren>1||!r.children[ne])return i1(e.redirectTo);r=r.children[ne]}}applyRedirectCommands(e,n,i){let r=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),e,i);if(n.startsWith("/"))throw new Xa(r);return r}applyRedirectCreateUrlTree(e,n,i,r){let s=this.createSegmentGroup(e,n.root,i,r);return new kn(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let i={};return Object.entries(e).forEach(([r,s])=>{if(typeof s=="string"&&s.startsWith(":")){let a=s.substring(1);i[r]=n[a]}else i[r]=s}),i}createSegmentGroup(e,n,i,r){let s=this.createSegments(e,n.segments,i,r),o={};return Object.entries(n.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(e,l,i,r)}),new be(s,o)}createSegments(e,n,i,r){return n.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,n,i){let r=i[n.path.substring(1)];if(!r)throw new Se(4001,!1);return r}findOrReturn(e,n){let i=0;for(let r of n){if(r.path===e.path)return n.splice(i),r;i++}return e}},au={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function r1(t,e,n,i,r){let s=gu(t,e,n);return s.matched?(i=Aw(e,i),t1(i,e,n,r).pipe(oe(o=>o===!0?s:I({},au)))):ie(s)}function gu(t,e,n){if(e.path==="**")return s1(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?I({},au):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let r=(e.matcher||ew)(n,t,e);if(!r)return I({},au);let s={};Object.entries(r.posParams??{}).forEach(([a,l])=>{s[a]=l.path});let o=r.consumed.length>0?I(I({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:n.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function s1(t){return{matched:!0,parameters:t.length>0?S_(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function w_(t,e,n,i){return n.length>0&&l1(t,n,i)?{segmentGroup:new be(e,a1(i,new be(n,t.children))),slicedSegments:[]}:n.length===0&&c1(t,n,i)?{segmentGroup:new be(t.segments,o1(t,n,i,t.children)),slicedSegments:n}:{segmentGroup:new be(t.segments,t.children),slicedSegments:n}}function o1(t,e,n,i){let r={};for(let s of n)if(tl(t,e,s)&&!i[zi(s)]){let o=new be([],{});r[zi(s)]=o}return I(I({},i),r)}function a1(t,e){let n={};n[ne]=e;for(let i of t)if(i.path===""&&zi(i)!==ne){let r=new be([],{});n[zi(i)]=r}return n}function l1(t,e,n){return n.some(i=>tl(t,e,i)&&zi(i)!==ne)}function c1(t,e,n){return n.some(i=>tl(t,e,i))}function tl(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function d1(t,e,n,i){return zi(t)!==i&&(i===ne||!tl(e,n,t))?!1:gu(e,t,n).matched}function u1(t,e,n){return e.length===0&&!t.children[n]}var lu=class{};function h1(t,e,n,i,r,s,o="emptyOnly"){return new cu(t,e,n,i,r,o,s).recognize()}var p1=31,cu=class{constructor(e,n,i,r,s,o,a){this.injector=e,this.configLoader=n,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new ou(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new Se(4002,`'${e.segmentGroup}'`)}recognize(){let e=w_(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(oe(n=>{let i=new xo([],Object.freeze({}),Object.freeze(I({},this.urlTree.queryParams)),this.urlTree.fragment,{},ne,this.rootComponentType,null,{}),r=new Jt(i,n),s=new Qa("",r),o=vw(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,ne).pipe(Rr(i=>{if(i instanceof Xa)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof ko?this.noMatchError(i):i}))}inheritParamsAndData(e,n){let i=e.value,r=hu(i,n,this.paramsInheritanceStrategy);i.params=Object.freeze(r.params),i.data=Object.freeze(r.data),e.children.forEach(s=>this.inheritParamsAndData(s,i))}processSegmentGroup(e,n,i,r){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,n,i):this.processSegment(e,n,i,i.segments,r,!0).pipe(oe(s=>s instanceof Jt?[s]:[]))}processChildren(e,n,i){let r=[];for(let s of Object.keys(i.children))s==="primary"?r.unshift(s):r.push(s);return Ut(r).pipe(Zs(s=>{let o=i.children[s],a=Fw(n,s);return this.processSegmentGroup(e,a,o,s)}),Hp((s,o)=>(s.push(...o),s)),Sc(null),Bp(),Wt(s=>{if(s===null)return ns(i);let o=U_(s);return m1(o),ie(o)}))}processSegment(e,n,i,r,s,o){return Ut(n).pipe(Zs(a=>this.processSegmentAgainstRoute(a._injector??e,n,a,i,r,s,o).pipe(Rr(l=>{if(l instanceof ko)return ie(null);throw l}))),wn(a=>!!a),Rr(a=>{if(j_(a))return u1(i,r,s)?ie(new lu):ns(i);throw a}))}processSegmentAgainstRoute(e,n,i,r,s,o,a){return d1(i,r,s,o)?i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,s,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,r,n,i,s,o):ns(r):ns(r)}expandSegmentAgainstRouteUsingRedirect(e,n,i,r,s,o){let{matched:a,consumedSegments:l,positionalParamSegments:d,remainingSegments:h}=gu(n,r,s);if(!a)return ns(n);r.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>p1&&(this.allowRedirects=!1));let p=this.applyRedirects.applyRedirectCommands(l,r.redirectTo,d);return this.applyRedirects.lineralizeSegments(r,p).pipe(Wt(m=>this.processSegment(e,i,n,m.concat(h),o,!1)))}matchSegmentAgainstRoute(e,n,i,r,s){let o=r1(n,i,r,e,this.urlSerializer);return i.path==="**"&&(n.children={}),o.pipe(gi(a=>a.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe(gi(({routes:l})=>{let d=i._loadedInjector??e,{consumedSegments:h,remainingSegments:p,parameters:m}=a,f=new xo(h,m,Object.freeze(I({},this.urlTree.queryParams)),this.urlTree.fragment,g1(i),zi(i),i.component??i._loadedComponent??null,i,_1(i)),{segmentGroup:w,slicedSegments:M}=w_(n,h,p,l);if(M.length===0&&w.hasChildren())return this.processChildren(d,l,w).pipe(oe(S=>S===null?null:new Jt(f,S)));if(l.length===0&&M.length===0)return ie(new Jt(f,[]));let _=zi(i)===s;return this.processSegment(d,l,w,M,_?ne:s,!0).pipe(oe(S=>new Jt(f,S instanceof Jt?[S]:[])))}))):ns(n)))}getChildConfig(e,n,i){return n.children?ie({routes:n.children,injector:e}):n.loadChildren?n._loadedRoutes!==void 0?ie({routes:n._loadedRoutes,injector:n._loadedInjector}):e1(e,n,i,this.urlSerializer).pipe(Wt(r=>r?this.configLoader.loadChildren(e,n).pipe(Ke(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):n1(n))):ie({routes:[],injector:e})}};function m1(t){t.sort((e,n)=>e.value.outlet===ne?-1:n.value.outlet===ne?1:e.value.outlet.localeCompare(n.value.outlet))}function f1(t){let e=t.value.routeConfig;return e&&e.path===""}function U_(t){let e=[],n=new Set;for(let i of t){if(!f1(i)){e.push(i);continue}let r=e.find(s=>i.value.routeConfig===s.value.routeConfig);r!==void 0?(r.children.push(...i.children),n.add(r)):e.push(i)}for(let i of n){let r=U_(i.children);e.push(new Jt(i.value,r))}return e.filter(i=>!n.has(i))}function g1(t){return t.data||{}}function _1(t){return t.resolve||{}}function y1(t,e,n,i,r,s){return Wt(o=>h1(t,e,n,i,o.extractedUrl,r,s).pipe(oe(({state:a,tree:l})=>te(I({},o),{targetSnapshot:a,urlAfterRedirects:l}))))}function v1(t,e){return Wt(n=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=n;if(!r.length)return ie(n);let s=new Set(r.map(l=>l.route)),o=new Set;for(let l of s)if(!o.has(l))for(let d of W_(l))o.add(d);let a=0;return Ut(o).pipe(Zs(l=>s.has(l)?b1(l,i,t,e):(l.data=hu(l,l.parent,t).resolve,ie(void 0))),Ke(()=>a++),Dc(1),Wt(l=>a===o.size?ie(n):en))})}function W_(t){let e=t.children.map(n=>W_(n)).flat();return[t,...e]}function b1(t,e,n,i){let r=t.routeConfig,s=t._resolve;return r?.title!==void 0&&!V_(r)&&(s[Ro]=r.title),w1(s,t,e,i).pipe(oe(o=>(t._resolvedData=o,t.data=hu(t,t.parent,n).resolve,null)))}function w1(t,e,n,i){let r=Bd(t);if(r.length===0)return ie({});let s={};return Ut(r).pipe(Wt(o=>C1(t[o],e,n,i).pipe(wn(),Ke(a=>{s[o]=a}))),Dc(1),Np(s),Rr(o=>j_(o)?en:Ys(o)))}function C1(t,e,n,i){let r=Ao(e)??i,s=us(t,r),o=s.resolve?s.resolve(e,n):Yn(r,()=>s(e,n));return An(o)}function Nd(t){return gi(e=>{let n=t(e);return n?Ut(n).pipe(oe(()=>e)):ie(e)})}var q_=(()=>{let e=class e{buildTitle(i){let r,s=i.root;for(;s!==void 0;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(o=>o.outlet===ne);return r}getResolvedTitleForRoute(i){return i.data[Ro]}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:()=>V(S1),providedIn:"root"});let t=e;return t})(),S1=(()=>{let e=class e extends q_{constructor(i){super(),this.title=i}updateTitle(i){let r=this.buildTitle(i);r!==void 0&&this.title.setTitle(r)}};e.\u0275fac=function(r){return new(r||e)(Ve(f_))},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),_u=new ke("",{providedIn:"root",factory:()=>({})}),yu=new ke(""),D1=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=V(Bc)}loadComponent(i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return ie(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let r=An(i.loadComponent()).pipe(oe(Y_),Ke(o=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=o}),Ks(()=>{this.componentLoaders.delete(i)})),s=new wc(r,()=>new lt).pipe(bc());return this.componentLoaders.set(i,s),s}loadChildren(i,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ie({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=T1(r,this.compiler,i,this.onLoadEndListener).pipe(Ks(()=>{this.childrenLoaders.delete(r)})),a=new wc(o,()=>new lt).pipe(bc());return this.childrenLoaders.set(r,a),a}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function T1(t,e,n,i){return An(t.loadChildren()).pipe(oe(Y_),Wt(r=>r instanceof rm||Array.isArray(r)?ie(r):Ut(e.compileModuleAsync(r))),oe(r=>{i&&i(t);let s,o,a=!1;return Array.isArray(r)?(o=r,a=!0):(s=r.create(n).injector,o=s.get(yu,[],{optional:!0,self:!0}).flat()),{routes:o.map(fu),injector:s}}))}function M1(t){return t&&typeof t=="object"&&"default"in t}function Y_(t){return M1(t)?t.default:t}var vu=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:()=>V(I1),providedIn:"root"});let t=e;return t})(),I1=(()=>{let e=class e{shouldProcessUrl(i){return!0}extract(i){return i}merge(i,r){return i}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),E1=new ke("");var x1=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new lt,this.transitionAbortSubject=new lt,this.configLoader=V(D1),this.environmentInjector=V(Xs),this.urlSerializer=V(uu),this.rootContexts=V(el),this.location=V(va),this.inputBindingEnabled=V(mu,{optional:!0})!==null,this.titleStrategy=V(q_),this.options=V(_u,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=V(vu),this.createViewTransition=V(E1,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>ie(void 0),this.rootComponentType=null;let i=s=>this.events.next(new Yd(s)),r=s=>this.events.next(new Zd(s));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=i}complete(){this.transitions?.complete()}handleNavigationRequest(i){let r=++this.navigationId;this.transitions?.next(te(I(I({},this.transitions.value),i),{id:r}))}setupNavigations(i,r,s){return this.transitions=new Pe({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Co,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(_t(o=>o.id!==0),oe(o=>te(I({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),gi(o=>{let a=!1,l=!1;return ie(o).pipe(gi(d=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Xt.SupersededByNewNavigation),en;this.currentTransition=o,this.currentNavigation={id:d.id,initialUrl:d.rawUrl,extractedUrl:d.extractedUrl,trigger:d.source,extras:d.extras,previousNavigation:this.lastSuccessfulNavigation?te(I({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let h=!i.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),p=d.extras.onSameUrlNavigation??i.onSameUrlNavigation;if(!h&&p!=="reload"){let m="";return this.events.next(new or(d.id,this.urlSerializer.serialize(d.rawUrl),m,jd.IgnoredSameUrlNavigation)),d.resolve(null),en}if(this.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return ie(d).pipe(gi(m=>{let f=this.transitions?.getValue();return this.events.next(new To(m.id,this.urlSerializer.serialize(m.extractedUrl),m.source,m.restoredState)),f!==this.transitions?.getValue()?en:Promise.resolve(m)}),y1(this.environmentInjector,this.configLoader,this.rootComponentType,i.config,this.urlSerializer,this.paramsInheritanceStrategy),Ke(m=>{o.targetSnapshot=m.targetSnapshot,o.urlAfterRedirects=m.urlAfterRedirects,this.currentNavigation=te(I({},this.currentNavigation),{finalUrl:m.urlAfterRedirects});let f=new Ya(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(f)}));if(h&&this.urlHandlingStrategy.shouldProcessUrl(d.currentRawUrl)){let{id:m,extractedUrl:f,source:w,restoredState:M,extras:_}=d,S=new To(m,this.urlSerializer.serialize(f),w,M);this.events.next(S);let O=L_(this.rootComponentType).snapshot;return this.currentTransition=o=te(I({},d),{targetSnapshot:O,urlAfterRedirects:f,extras:te(I({},_),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,ie(o)}else{let m="";return this.events.next(new or(d.id,this.urlSerializer.serialize(d.extractedUrl),m,jd.IgnoredByUrlHandlingStrategy)),d.resolve(null),en}}),Ke(d=>{let h=new $d(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(h)}),oe(d=>(this.currentTransition=o=te(I({},d),{guards:Lw(d.targetSnapshot,d.currentSnapshot,this.rootContexts)}),o)),Ww(this.environmentInjector,d=>this.events.next(d)),Ke(d=>{if(o.guardsResult=d.guardsResult,ls(d.guardsResult))throw H_(this.urlSerializer,d.guardsResult);let h=new Ud(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.events.next(h)}),_t(d=>d.guardsResult?!0:(this.cancelNavigationTransition(d,"",Xt.GuardRejected),!1)),Nd(d=>{if(d.guards.canActivateChecks.length)return ie(d).pipe(Ke(h=>{let p=new Wd(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}),gi(h=>{let p=!1;return ie(h).pipe(v1(this.paramsInheritanceStrategy,this.environmentInjector),Ke({next:()=>p=!0,complete:()=>{p||this.cancelNavigationTransition(h,"",Xt.NoDataFromResolver)}}))}),Ke(h=>{let p=new qd(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(p)}))}),Nd(d=>{let h=p=>{let m=[];p.routeConfig?.loadComponent&&!p.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(p.routeConfig).pipe(Ke(f=>{p.component=f}),oe(()=>{})));for(let f of p.children)m.push(...h(f));return m};return da(h(d.targetSnapshot.root)).pipe(Sc(null),bn(1))}),Nd(()=>this.afterPreactivation()),gi(()=>{let{currentSnapshot:d,targetSnapshot:h}=o,p=this.createViewTransition?.(this.environmentInjector,d.root,h.root);return p?Ut(p).pipe(oe(()=>o)):ie(o)}),oe(d=>{let h=Ew(i.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return this.currentTransition=o=te(I({},d),{targetRouterState:h}),this.currentNavigation.targetRouterState=h,o}),Ke(()=>{this.events.next(new Io)}),Pw(this.rootContexts,i.routeReuseStrategy,d=>this.events.next(d),this.inputBindingEnabled),bn(1),Ke({next:d=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new sr(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects))),this.titleStrategy?.updateTitle(d.targetRouterState.snapshot),d.resolve(!0)},complete:()=>{a=!0}}),Ze(this.transitionAbortSubject.pipe(Ke(d=>{throw d}))),Ks(()=>{!a&&!l&&this.cancelNavigationTransition(o,"",Xt.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Rr(d=>{if(l=!0,G_(d))this.events.next(new Rn(o.id,this.urlSerializer.serialize(o.extractedUrl),d.message,d.cancellationCode)),kw(d)?this.events.next(new Eo(d.url)):o.resolve(!1);else{this.events.next(new Mo(o.id,this.urlSerializer.serialize(o.extractedUrl),d,o.targetSnapshot??void 0));try{o.resolve(i.errorHandler(d))}catch(h){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(h)}}return en}))}))}cancelNavigationTransition(i,r,s){let o=new Rn(i.id,this.urlSerializer.serialize(i.extractedUrl),r,s);this.events.next(o),i.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function O1(t){return t!==Co}var k1=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:()=>V(R1),providedIn:"root"});let t=e;return t})(),du=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},R1=(()=>{let e=class e extends du{};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=Kt(e)))(s||e)}})(),e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Z_=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:()=>V(A1),providedIn:"root"});let t=e;return t})(),A1=(()=>{let e=class e extends Z_{constructor(){super(...arguments),this.location=V(va),this.urlSerializer=V(uu),this.options=V(_u,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=V(vu),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new kn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=L_(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(i){return this.location.subscribe(r=>{r.type==="popstate"&&i(r.url,r.state)})}handleRouterEvent(i,r){if(i instanceof To)this.stateMemento=this.createStateMemento();else if(i instanceof or)this.rawUrlTree=r.initialUrl;else if(i instanceof Ya){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(s,r)}}else i instanceof Io?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):i instanceof Rn&&(i.code===Xt.GuardRejected||i.code===Xt.NoDataFromResolver)?this.restoreHistory(r):i instanceof Mo?this.restoreHistory(r,!0):i instanceof sr&&(this.lastSuccessfulId=i.id,this.currentPageId=this.browserPageId)}setBrowserUrl(i,r){let s=this.urlSerializer.serialize(i);if(this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl){let o=this.browserPageId,a=I(I({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(s,"",a)}else{let o=I(I({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(i,r=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===i.finalUrl&&o===0&&(this.resetState(i),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(i),this.resetUrlToCurrentUrlTree())}resetState(i){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,i.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(i,r){return this.canceledNavigationResolution==="computed"?{navigationId:i,\u0275routerPageId:r}:{navigationId:i}}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=Kt(e)))(s||e)}})(),e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),bo=function(t){return t[t.COMPLETE=0]="COMPLETE",t[t.FAILED=1]="FAILED",t[t.REDIRECTING=2]="REDIRECTING",t}(bo||{});function F1(t,e){t.events.pipe(_t(n=>n instanceof sr||n instanceof Rn||n instanceof Mo||n instanceof or),oe(n=>n instanceof sr||n instanceof or?bo.COMPLETE:(n instanceof Rn?n.code===Xt.Redirect||n.code===Xt.SupersededByNewNavigation:!1)?bo.REDIRECTING:bo.FAILED),_t(n=>n!==bo.REDIRECTING),bn(1)).subscribe(()=>{e()})}function P1(t){throw t}var L1={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},N1={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},K_=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=V(ga),this.stateManager=V(Z_),this.options=V(_u,{optional:!0})||{},this.pendingTasks=V(om),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=V(x1),this.urlSerializer=V(uu),this.location=V(va),this.urlHandlingStrategy=V(vu),this._events=new lt,this.errorHandler=this.options.errorHandler||P1,this.navigated=!1,this.routeReuseStrategy=V(k1),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=V(yu,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!V(mu,{optional:!0}),this.eventsSubscription=new Xi,this.isNgZoneEnabled=V(St)instanceof St&&St.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:i=>{this.console.warn(i)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let i=this.navigationTransitions.events.subscribe(r=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Rn&&r.code!==Xt.Redirect&&r.code!==Xt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof sr)this.navigated=!0;else if(r instanceof Eo){let a=this.urlHandlingStrategy.merge(r.url,s.currentRawUrl),l={info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||O1(s.source)};this.scheduleNavigation(a,Co,null,l,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}B1(r)&&this._events.next(r)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(i)}resetRootComponentType(i){this.routerState.root.component=i,this.navigationTransitions.rootComponentType=i}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Co,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((i,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(i,"popstate",r)},0)})}navigateToSyncWithBrowser(i,r,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let d=I({},s);delete d.navigationId,delete d.\u0275routerPageId,Object.keys(d).length!==0&&(o.state=d)}let l=this.parseUrl(i);this.scheduleNavigation(l,r,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(i){this.config=i.map(fu),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(i,r={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:l,preserveFragment:d}=r,h=d?this.currentUrlTree.fragment:a,p=null;switch(l){case"merge":p=I(I({},this.currentUrlTree.queryParams),o);break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=o||null}p!==null&&(p=this.removeEmptyProps(p));let m;try{let f=s?s.snapshot:this.routerState.snapshot.root;m=R_(f)}catch{(typeof i[0]!="string"||!i[0].startsWith("/"))&&(i=[]),m=this.currentUrlTree.root}return A_(m,i,p,h??null)}navigateByUrl(i,r={skipLocationChange:!1}){let s=ls(i)?i:this.parseUrl(i),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,Co,null,r)}navigate(i,r={skipLocationChange:!1}){return V1(i),this.navigateByUrl(this.createUrlTree(i,r),r)}serializeUrl(i){return this.urlSerializer.serialize(i)}parseUrl(i){try{return this.urlSerializer.parse(i)}catch{return this.urlSerializer.parse("/")}}isActive(i,r){let s;if(r===!0?s=I({},L1):r===!1?s=I({},N1):s=r,ls(i))return __(this.currentUrlTree,i,s);let o=this.parseUrl(i);return __(this.currentUrlTree,o,s)}removeEmptyProps(i){return Object.entries(i).reduce((r,[s,o])=>(o!=null&&(r[s]=o),r),{})}scheduleNavigation(i,r,s,o,a){if(this.disposed)return Promise.resolve(!1);let l,d,h;a?(l=a.resolve,d=a.reject,h=a.promise):h=new Promise((m,f)=>{l=m,d=f});let p=this.pendingTasks.add();return F1(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(p))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:i,extras:o,resolve:l,reject:d,promise:h,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),h.catch(m=>Promise.reject(m))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function V1(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new Se(4008,!1)}function B1(t){return!(t instanceof Io)&&!(t instanceof Eo)}var H1=new ke("");function Q_(t,...e){return Ar([{provide:yu,multi:!0,useValue:t},[],{provide:cs,useFactory:z1,deps:[K_]},{provide:pm,multi:!0,useFactory:G1},e.map(n=>n.\u0275providers)])}function z1(t){return t.routerState.root}function G1(){let t=V(Fr);return e=>{let n=t.get(ya);if(e!==n.components[0])return;let i=t.get(K_),r=t.get(j1);t.get($1)===1&&i.initialNavigation(),t.get(U1,null,Tc.Optional)?.setUpPreloading(),t.get(H1,null,Tc.Optional)?.init(),i.resetRootComponentType(n.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var j1=new ke("",{factory:()=>new lt}),$1=new ke("",{providedIn:"root",factory:()=>1});var U1=new ke("");var J_=[];var W1="@",q1=(()=>{let e=class e{constructor(i,r,s,o,a){this.doc=i,this.delegate=r,this.zone=s,this.animationType=o,this.moduleImpl=a,this._rendererFactoryPromise=null,this.scheduler=V(im,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){return(this.moduleImpl??import("./chunk-3WJAS4UL.js")).catch(r=>{throw new Se(5300,!1)}).then(({\u0275createEngine:r,\u0275AnimationRendererFactory:s})=>{this._engine=r(this.animationType,this.doc,this.scheduler);let o=new s(this.delegate,this._engine,this.zone);return this.delegate=o,o})}createRenderer(i,r){let s=this.delegate.createRenderer(i,r);if(s.\u0275type===0)return s;typeof s.throwOnSyntheticProps=="boolean"&&(s.throwOnSyntheticProps=!1);let o=new bu(s);return r?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(a=>{let l=a.createRenderer(i,r);o.use(l)}).catch(a=>{o.use(s)}),o}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}};e.\u0275fac=function(r){xc()},e.\u0275prov=Z({token:e,factory:e.\u0275fac});let t=e;return t})(),bu=class{constructor(e){this.delegate=e,this.replay=[],this.\u0275type=1}use(e){if(this.delegate=e,this.replay!==null){for(let n of this.replay)n(e);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(e,n){return this.delegate.createElement(e,n)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}get destroyNode(){return this.delegate.destroyNode}appendChild(e,n){this.delegate.appendChild(e,n)}insertBefore(e,n,i,r){this.delegate.insertBefore(e,n,i,r)}removeChild(e,n,i){this.delegate.removeChild(e,n,i)}selectRootElement(e,n){return this.delegate.selectRootElement(e,n)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,n,i,r){this.delegate.setAttribute(e,n,i,r)}removeAttribute(e,n,i){this.delegate.removeAttribute(e,n,i)}addClass(e,n){this.delegate.addClass(e,n)}removeClass(e,n){this.delegate.removeClass(e,n)}setStyle(e,n,i,r){this.delegate.setStyle(e,n,i,r)}removeStyle(e,n,i){this.delegate.removeStyle(e,n,i)}setProperty(e,n,i){this.shouldReplay(n)&&this.replay.push(r=>r.setProperty(e,n,i)),this.delegate.setProperty(e,n,i)}setValue(e,n){this.delegate.setValue(e,n)}listen(e,n,i){return this.shouldReplay(n)&&this.replay.push(r=>r.listen(e,n,i)),this.delegate.listen(e,n,i)}shouldReplay(e){return this.replay!==null&&e.startsWith(W1)}};function X_(t="animations"){return nm("NgAsyncAnimations"),Ar([{provide:ma,useFactory:(e,n,i)=>new q1(e,n,i,t),deps:[dt,Va,St]},{provide:Wp,useValue:t==="noop"?"NoopAnimations":"BrowserAnimations"}])}var e0={providers:[Q_(J_),X_()]};var wu,Po=wu=class extends qr{constructor(t){super(t),this.type="none"}clone(){return new wu({type:this.type})}};c([Tf({none:"none",stayAbove:"stay-above"})],Po.prototype,"type",void 0),Po=wu=c([D("esri.ground.NavigationConstraint")],Po);var Cu,on=Cu=class extends Hm(co){constructor(t){super(t),this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new ae;let e=i=>{i.parent&&i.parent!==this&&"remove"in i.parent&&i.parent.remove(i),i.parent=this,i.type!=="elevation"&&i.type!=="base-elevation"&&K.getLogger(this).error(`Layer '${i.title}, id:${i.id}' of type '${i.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},n=i=>{i.parent=null};this.addHandles([this.layers.on("after-add",i=>e(i.item)),this.layers.on("after-remove",i=>n(i.item))])}initialize(){this.when().catch(t=>{Wr(t)||K.getLogger(this).error("#load()","Failed to load ground",t)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){let t=this.layers.removeAll();for(let e of t)He(e);this.layers.destroy()}normalizeCtorArgs(t){return t&&"resourceInfo"in t&&(this._set("resourceInfo",t.resourceInfo),delete(t=I({},t)).resourceInfo),t}set layers(t){this._set("layers",Km(t,this._get("layers")))}writeLayers(t,e,n,i){let r=[];t&&(i=te(I({},i),{layerContainerType:"ground"}),t.forEach(s=>{if("write"in s){let o={};Uf(s)().write(o,i)&&r.push(o)}else i?.messages&&i.messages.push(new re("layer:unsupported",`Layers (${s.title}, ${s.id}) of type '${s.declaredClass}' cannot be persisted in the ground`,{layer:s}))})),e.layers=r}load(t){return this.addResolvingPromise(this._loadFromSource(t)),Promise.resolve(this)}loadAll(){return Qm(this,t=>{t(this.layers)})}queryElevation(t,e){return A(this,null,function*(){yield this.load({signal:e?.signal});let{ElevationQuery:n}=yield import("./chunk-KFB5L7DA.js");Mt(e);let i=new n,r=this.layers.filter(t0).toArray();return i.queryAll(r,t,e)})}createElevationSampler(t,e){return A(this,null,function*(){yield this.load({signal:e?.signal});let{ElevationQuery:n}=yield import("./chunk-KFB5L7DA.js");Mt(e);let i=new n,r=this.layers.filter(t0).toArray();return i.createSamplerAll(r,t,e)})}clone(){let t={opacity:this.opacity,surfaceColor:ro(this.surfaceColor),navigationConstraint:ro(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(t.loadStatus="loaded"),new Cu({resourceInfo:this.resourceInfo}).set(t)}read(t,e){this.resourceInfo||this._set("resourceInfo",{data:t,context:e}),super.read(t,e)}_loadFromSource(t){let e=this.resourceInfo;return e?this._loadLayersFromJSON(e.data,e.context,t):Promise.resolve()}_loadLayersFromJSON(t,e,n){return A(this,null,function*(){let i=e?.origin||"web-scene",r=e?.portal||null,s=e?.url||null,{populateOperationalLayers:o}=yield import("./chunk-ZSCA46H4.js");Mt(n);let a=[];if(t.layers&&Array.isArray(t.layers)){let l={context:{origin:i,url:s,portal:r,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};a.push(o(this.layers,t.layers,l))}yield Promise.allSettled(a)})}};function Y1(t){return t&&"createElevationSampler"in t}function t0(t){return t.type==="elevation"||Y1(t)}c([u({json:{read:!1}})],on.prototype,"layers",null),c([Jm("layers")],on.prototype,"writeLayers",null),c([u({readOnly:!0})],on.prototype,"resourceInfo",void 0),c([u({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:Zc,read:{reader:ng,source:"transparency"},write:{writer:(t,e)=>{e.transparency=ig(t)},target:"transparency"}}})],on.prototype,"opacity",void 0),c([u({type:Ht,json:{type:[Zc],write:(t,e)=>{e.surfaceColor=t.toJSON().slice(0,3)}}})],on.prototype,"surfaceColor",void 0),c([u({type:Po,json:{write:!0}})],on.prototype,"navigationConstraint",void 0),on=Cu=c([D("esri.Ground")],on);var hs=on;function i0(t){return!(!(t&&typeof t=="object"&&"loaded"in t&&t.loaded&&yf(t)?.operations?.supportsEditing&&"type"in t)||"editingEnabled"in t&&!vf(t))}var n0={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function r0(t){let e=null;if(typeof t=="string")if(t in n0){let n=n0[t];e=new hs({resourceInfo:{data:{layers:[n]}}})}else K.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${t}. Try "world-elevation"`);else e=Bm(hs,t);return e}var Si=class extends ug(dg(Pi.EventedMixin(z))){constructor(t){super(t),this.allLayers=new ir({getCollections:()=>[this.basemap?.baseLayers,this.ground?.layers,this.layers,this.basemap?.referenceLayers],getChildrenFunction:e=>"layers"in e?e.layers:null}),this.allTables=cg(this),this.basemap=null,this.editableLayers=new ir({getCollections:()=>[this.allLayers],itemFilterFunction:i0}),this.ground=new hs,this._basemapCache=Mf()}destroy(){If(this._basemapCache),this._basemapCache=null,this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),this.basemap=He(this.basemap),He(this.ground),this._set("ground",null)}castBasemap(t){return Ef(t,this._basemapCache)}castGround(t){return r0(t)??this._get("ground")}findLayerById(t){return this.allLayers.find(e=>e.id===t)}findTableById(t){return this.allTables.find(e=>e.id===t)}};c([u({readOnly:!0,dependsOn:[]})],Si.prototype,"allLayers",void 0),c([u({readOnly:!0})],Si.prototype,"allTables",void 0),c([u({type:yg,json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],Si.prototype,"basemap",void 0),c([wi("basemap")],Si.prototype,"castBasemap",null),c([u({readOnly:!0})],Si.prototype,"editableLayers",void 0),c([u({type:hs,nonNullable:!0})],Si.prototype,"ground",void 0),c([wi("ground")],Si.prototype,"castGround",null),c([u()],Si.prototype,"undoRedo",void 0),Si=c([D("esri.Map")],Si);var il=Si;var nl={widthBreakpoint:{getValue(t){let e=t.viewSize[0],n=t.breakpoints,i=this.values;return e<=n.xsmall?i.xsmall:e<=n.small?i.small:e<=n.medium?i.medium:e<=n.large?i.large:i.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(t){let e=t.viewSize[1],n=t.breakpoints,i=this.values;return e<=n.xsmall?i.xsmall:e<=n.small?i.small:e<=n.medium?i.medium:e<=n.large?i.large:i.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(t){let e=t.viewSize,n=e[0],i=e[1],r=this.values;return i>=n?r.portrait:r.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},Su={xsmall:544,small:768,medium:992,large:1200};function Z1(t){let e=t;return e&&e.xsmall<e.small&&e.small<e.medium&&e.medium<e.large}function Du(t,e){return e?nl[t].valueToClassName[e].split(" "):[]}var s0=t=>{let e=class extends t{constructor(...n){super(...n),this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=Su}initialize(){this.addHandles(R(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),le))}destroy(){this.destroyed||this._removeActiveClassNames()}set breakpoints(n){if(n===this._get("breakpoints"))return;let i=Z1(n);if(!i){let r=JSON.stringify(Su,null,2);console.warn("provided breakpoints are not valid, using defaults:"+r)}n=i?n:Su,this._set("breakpoints",I({},n))}_updateClassNames(){if(!this.container)return;let n=oo.acquire(),i=oo.acquire(),r,s=!1;for(r in nl){let o=this[r],a=nl[r].getValue({viewSize:this.size,breakpoints:this.breakpoints});o!==a&&(s=!0,this[r]=a,Du(r,o).forEach(l=>i.push(l)),Du(r,a).forEach(l=>n.push(l)))}s&&(this._applyClassNameChanges(n,i),oo.release(n),oo.release(i))}_applyClassNameChanges(n,i){let r=this.container;r&&(i.forEach(s=>r.classList.remove(s)),n.forEach(s=>r.classList.add(s)))}_removeActiveClassNames(){let n=this.container;if(!n)return;let i;for(i in nl)Du(i,this[i]).forEach(r=>n.classList.remove(r))}};return c([u()],e.prototype,"breakpoints",null),c([u()],e.prototype,"orientation",void 0),c([u()],e.prototype,"widthBreakpoint",void 0),c([u()],e.prototype,"heightBreakpoint",void 0),e=c([D("esri.views.BreakpointsOwner")],e),e};var Fn=class extends z{constructor(){super(...arguments),this.items=new ae,this._watchUpdatingTracking=new xn,this._callbacks=new Map,this._projector=lo(),this._hiddenProjector=lo()}get needsRender(){return this.items.length>0}get updating(){return this._watchUpdatingTracking?.updating??!1}initialize(){let t=document.createElement("div");t.className="esri-overlay-surface",this._set("surface",t),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),t.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,e=>{for(let n of e.added){let i=()=>n.render();this._callbacks.set(n,i),this._projector.append(this.surface,i)}for(let n of e.removed){let i=this._projector.detach(this._callbacks.get(n));this.surface.removeChild(i.domNode),this._callbacks.delete(n)}})}addItem(t){this.items.add(t)}removeItem(t){this.items.remove(t)}destroy(){this.items.removeAll(),this._callbacks.forEach(t=>this._projector.detach(t)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(t){let e=this._hiddenSurface,n=this._hiddenProjector,i,r=()=>(i=t.render(),i);n.append(e,r),n.renderNow();let s={left:0,top:0,right:0,bottom:0};if(i?.domNode){let o=i.domNode.getBoundingClientRect();s.left=o.left,s.top=o.top,s.right=o.right,s.bottom=o.bottom}for(n.detach(r);e.firstChild;)e.removeChild(e.firstChild);return s}overlaps(t,e){let n=this.computeBoundingRect(t),i=this.computeBoundingRect(e);return Math.max(n.left,i.left)<=Math.min(n.right,i.right)&&Math.max(n.top,i.top)<=Math.min(n.bottom,i.bottom)}get hasVisibleItems(){return this.items.some(t=>t.visible)}prepare(){return A(this,null,function*(){yield document.fonts.load(this._fontString()).catch(()=>{})})}renderCanvas(t,e){let n=!!e?.disableDecorations;if(!this.items.some(r=>r.visible&&!(n&&r.isDecoration)))return;let i=t.getContext("2d");i.save(),i.font=this._fontString(),this.items.forEach(r=>{n&&r.isDecoration||(i.save(),r.renderCanvas(i),i.restore())}),i.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};c([u({readOnly:!0})],Fn.prototype,"surface",void 0),c([u({readOnly:!0})],Fn.prototype,"items",void 0),c([u({readOnly:!0})],Fn.prototype,"needsRender",null),c([u({readOnly:!0})],Fn.prototype,"_watchUpdatingTracking",void 0),c([u({readOnly:!0})],Fn.prototype,"updating",null),Fn=c([D("esri.views.overlay.ViewOverlay")],Fn);var Tu=Fn;var Mu=[0,0];function K1(t){let e=(t.ownerDocument||window.document).defaultView,n=t.getBoundingClientRect();return Mu[0]=n.left+(e?.pageXOffset??0),Mu[1]=n.top+(e?.pageYOffset??0),Mu}function o0(t){t&&(Ma(t),t.parentNode&&t.parentNode.removeChild(t))}function Q1(t){let e=document.createElement("div");return t.appendChild(e),e}var Lo=16,rl=750,J1=512,X1=2,a0=t=>{let e=class extends t{constructor(...n){super(...n),this._freqInfo={freq:Lo,time:rl},this._overlayRenderTaskHandle=null,this.height=0,this.messagesCommon=null,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.addHandles([R(()=>this.cursor,i=>{let{surface:r}=this;r&&r.setAttribute("data-cursor",i)}),R(()=>this.navigating,i=>{let{surface:r}=this;r&&r.setAttribute("data-navigating",i.toString())})])}initialize(){let n=ut("mac"),i=()=>A(this,null,function*(){n&&(yield Li(()=>this.ready),this.messagesCommon=yield Da("esri/t9n/common").catch(()=>{}))});i(),this.addHandles([R(()=>this.ui,(r,s)=>this._handleUIChange(r,s),le),this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused")),Yr(i),R(()=>[this.surface,this.messagesCommon],()=>{n&&this.surface?.setAttribute("aria-label",this.messagesCommon?.ariaLabels?.navigationMacVoiceOver??"")})])}destroy(){this.destroyed||(this.ui=He(this.ui),this.container=null)}get container(){return this._get("container")??null}set container(n){let i=this._get("container"),r=Ta(n);if(r||typeof n!="string"||K.getLogger(this).error("#container",`element with id '${n}' not found`),i===r)return;if(this._stopMeasuring(),i&&(i.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(o0(this.root),this._set("root",null)),this.userContent&&(Xc(this.userContent,i),o0(this.userContent),this._set("userContent",null))),!r)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);r.classList.add("esri-view");let s=document.createElement("div");s.className="esri-view-user-storage",Xc(r,s),r.appendChild(s),this._set("userContent",s);let o=document.createElement("div");o.className="esri-view-root",r.insertBefore(o,r.firstChild),this._set("root",o);let a=document.createElement("div");a.className="esri-view-surface",a.setAttribute("role","application"),a.tabIndex=0,o.appendChild(a),this._set("surface",a);let l=new Tu;o.appendChild(l.surface),this._set("overlay",l),this.addHandles(R(()=>l.needsRender,d=>{d&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=bi({render:()=>this.overlay?.render()}):this._overlayRenderTaskHandle=rt(this._overlayRenderTaskHandle)})),this.forceDOMReadyCycle(),this._set("container",r),this._startMeasuring()}get focused(){let n=document.activeElement===this.surface;return document.hasFocus()&&n}get size(){return[this.width,this.height]}blur(){this.surface?.blur()}focus(){this.surface?.focus()}pageToContainer(n,i,r){let s=this.position;return n-=s?s[0]:0,i-=s?s[1]:0,r?(r[0]=n,r[1]=i):r=[n,i],r}containerToPage(n,i,r){let s=this.position;return n+=s?s[0]:0,i+=s?s[1]:0,r?(r[0]=n,r[1]=i):r=[n,i],r}_handleUIChange(n,i){this.removeHandles("ui"),i&&i!==n&&i.destroy(),n&&(n.view=this,this.addHandles(R(()=>this.root,r=>{n.container=r?Q1(r):null},le),"ui")),this._set("ui",n)}_stopMeasuring(){this.removeHandles("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){let n=this._freqInfo;n.freq=Lo,n.time=rl,this.addHandles([Im(window,"resize",()=>{n.freq=Lo,n.time=rl}),bi({prepare:i=>{let r=this._measure(),s=this._freqInfo;if(s.time+=i.deltaTime,r&&(s.freq=Lo,this._get("resizing")||this._set("resizing",!0)),s.time<s.freq)return;s.time=0;let o=this._position();s.freq=o||r?Lo:Math.min(rl,s.freq*X1),!r&&s.freq>=J1&&this._get("resizing")&&this._set("resizing",!1)}})],"measuring"),this._measure(),this._position()}_measure(){let n=this.container,i=n?n.clientWidth:0,r=n?n.clientHeight:0;if(i===0||r===0)return this.suspended||this._set("suspended",!0),!1;let s=this.width,o=this.height;return i===s&&r===o?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",i),this._set("height",r),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:s,oldHeight:o,width:i,height:r}),!0)}_position(){let n=this.container,i=this.position,r=n&&K1(n);return!!r&&(!i||r[0]!==i[0]||r[1]!==i[1])&&(this._set("position",[r[0],r[1]]),!0)}forceDOMReadyCycle(){}};return c([u()],e.prototype,"container",null),c([u({readOnly:!0})],e.prototype,"focused",null),c([u({readOnly:!0})],e.prototype,"height",void 0),c([u()],e.prototype,"messagesCommon",void 0),c([u({type:Tu})],e.prototype,"overlay",void 0),c([u({readOnly:!0})],e.prototype,"position",void 0),c([u({readOnly:!0})],e.prototype,"resizing",void 0),c([u({readOnly:!0})],e.prototype,"root",void 0),c([u({value:null,readOnly:!0})],e.prototype,"size",null),c([u({readOnly:!0})],e.prototype,"surface",void 0),c([u({readOnly:!0})],e.prototype,"suspended",void 0),c([u()],e.prototype,"ui",void 0),c([u({readOnly:!0})],e.prototype,"userContent",void 0),c([u({readOnly:!0})],e.prototype,"width",void 0),c([u()],e.prototype,"widthBreakpoint",void 0),e=c([D("esri.views.DOMContainer")],e),e};function Gi(t){return t!=null&&"open"in t&&"declaredClass"in t}function l0(t){return t!=null&&"declaredClass"in t&&"dockOptions"in t}var c0=t=>{let e=class extends t{constructor(){super(...arguments),this._popupSetupTask=null,this.popup={},this.popupEnabled=!0}initialize(){this.addHandles([R(()=>[this.ui,this.popup],([n,i],r)=>{let s="popup",o="manual";if(r){let[a,l]=r;a&&Gi(l)&&(l.view=null,l0(l)&&a.remove(l,s))}n&&Gi(i)&&(i.view=this,l0(i)&&n.add(i,{key:s,position:o,internal:!0}))},le),this.on("click",n=>{this.popup&&this.popupEnabled&&(n.pointerType!=="mouse"||n.button===0)&&(!Gi(this.popup)&&"autoOpenEnabled"in this.popup&&this.popup.autoOpenEnabled===!1||(Gi(this.popup)?this.popup.viewModel.handleViewClick(n):n.async(()=>A(this,null,function*(){yield this.setupPopup(),Gi(this.popup)&&!this.destroyed&&this.ready&&this.popupEnabled&&this.popup.viewModel.handleViewClick(n)}))))},rn.WIDGET)]),Li(()=>this.ready&&this.popupEnabled&&!this.updating).then(()=>{import("./chunk-MHP2ZDOB.js")})}destroy(){this.destroyed||this.closePopup()}openPopup(n){return A(this,null,function*(){if(Gi(this.popup))return this.popup.open(n);try{if(yield this.setupPopup(),!this.popup)return void K.getLogger(this).error(new re("view:null-popup","Popup is null and can't be opened"));this.popup.open(n)}catch{}})}closePopup(){this._popupSetupTask?.abort(),Gi(this.popup)&&this.popup.close()}fetchPopupFeatures(n,i){return A(this,null,function*(){return yield this.when(),this._popupHitsToFeatures(yield this._getPopupHits(n,i),i)})}setupPopup(){return A(this,null,function*(){if(this._popupSetupTask?.abort(),this.popup&&!Gi(this.popup))return this._popupSetupTask=Kr(n=>A(this,null,function*(){let{default:i}=yield import("./chunk-MHP2ZDOB.js");if(Mt(n),!this.popup||Gi(this.popup))return;let r=this.popup;delete r.open,delete r.close,this.popup=new i(r)})),this._popupSetupTask.promise})}_popupHitsToFeatures(s,o){return A(this,arguments,function*({location:n,hits:i},r){let a=[],l=[],d=!1,h=Rm(r,ut("popup-view-fetch-timeout")??eC),p=w=>{let M=new Iu(w);return l.push(M),a.push(M.promise),M},m=w=>{let M=l.at(-1);return M&&M.layerView===w&&!d?M:p(w)};for(let w of i)"graphic"in w?(m(w.layerView).graphics.push(w.graphic),d=!1):(a.push(w.layerView.fetchPopupFeaturesAtLocation(w.mapPoint,h)),d=!0);l.map(w=>w.resolve(h));let f=Om(a).then(w=>w.filter(M=>!!M).flat());return{pendingFeatures:a,allGraphicsPromise:f,location:n}})}_getPopupHits(n,i){return A(this,null,function*(){let{hits:r,location:s}=yield this.popupHitTest(n);Mt(i);let o=[];for(let a of r)if("graphic"in a){if(this._isValidPopupGraphic(a.graphic,i)){let l=this._isValidPopupGraphicsLayerView(a.layerView)?a.layerView:void 0;o.push({graphic:a.graphic,layerView:l})}}else this._isValidPopupLocationLayerView(a.layerView)&&o.push({mapPoint:a.mapPoint,layerView:a.layerView});return{hits:o,location:s}})}_isValidPopupGraphic(n,i){return n&&!!n.getEffectivePopupTemplate(i!=null&&i.defaultPopupTemplateEnabled)}_isValidPopupGraphicsLayerView(n){return!n||(!("layer"in n)||!n.suspended)&&"fetchPopupFeaturesFromGraphics"in n}_isValidPopupLocationLayerView(n){return(!("layer"in n)||!n.suspended)&&"fetchPopupFeaturesAtLocation"in n}};return c([u({cast(n){return!n||Gi(n)||typeof n=="object"&&(n.open=i=>(Uc(K.getLogger(this),"view.popup is no longer created by default. view.popup.open() will stop working when the popup isn't created",{replacement:"Use view.openPopup() instead.",version:"4.27"}),this.openPopup(i)),n.close=()=>(Uc(K.getLogger(this),"view.popup is no longer created by default. view.popup.close() will stop working when the popup isn't created",{replacement:"Use view.closePopup() instead.",version:"4.27"}),this.closePopup())),n}})],e.prototype,"popup",void 0),c([u()],e.prototype,"popupEnabled",void 0),e=c([D("esri.views.PopupView")],e),e},Iu=class{constructor(e){this.layerView=e,this._resolver=Jn(),this.graphics=[]}get promise(){return this._resolver.promise}resolve(e){let{layerView:n,graphics:i,_resolver:r}=this;if(!n)return r.resolve(i),r.promise;let s;return n.fetchPopupFeaturesFromGraphics(i,e).catch(o=>(s=o,null)).then(o=>{o?r.resolve(o):r.reject(s)}),r.promise}},eC=5e3;var No=class extends fg{constructor(t){super(t),this.addHandles(this.on("before-add",e=>{e.item!=null&&e.item.parent===this.owner&&(K.getLogger(this).warn("Analysis inside the collection must be unique. Not adding this element again."),e.preventDefault())}))}_own(t){t.parent=this.owner}_release(t){t.parent=null}};No=c([D("esri.support.AnalysesCollection")],No);var an=class extends z{constructor(t){super(t),this.view=null,this.baseLayerViews=new ae,this.referenceLayerViews=new ae,this._loadingHandle=R(()=>this.view?.map?.basemap,e=>{e&&e.load().catch(()=>{})},le)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null);for(let t of this.baseLayerViews)t.destroy();this.baseLayerViews.length=0;for(let t of this.referenceLayerViews)t.destroy();this.referenceLayerViews.length=0}get suspended(){return!this.view||this.view.suspended}get updating(){if(this.view&&this.view.suspended)return!1;let t=this.view?.map?.basemap;return!!t&&!!t.loaded&&(this.baseLayerViews.some(e=>e.updating)||this.referenceLayerViews.some(e=>e.updating))}};c([u({constructOnly:!0})],an.prototype,"view",void 0),c([u({readOnly:!0})],an.prototype,"baseLayerViews",void 0),c([u({readOnly:!0})],an.prototype,"referenceLayerViews",void 0),c([u({readOnly:!0})],an.prototype,"suspended",null),c([u({type:Boolean,readOnly:!0})],an.prototype,"updating",null),an=c([D("esri.views.BasemapView")],an);function tC(t){return"tryRecycleWith"in t}var Eu=class{constructor(e,n,i){this.layer=e,this.view=n,this.layerViewImporter=i,this._controller=new AbortController,this._deferred=Jn(),this._started=!1,this.done=!1,this.promise=this._deferred.promise,Sa(this._controller.signal,()=>{let r=new re("cancelled:layerview-create","layerview creation cancelled",{layer:e});this._deferred.reject(r)})}tryRecycle(e){if(!this.done||!this.layerView||!tC(this.layerView))return null;let n=this.layer.type,i=this._controller.signal;for(let r=0;r<e.length;r++){let s=e[r];if(s.type!==n)continue;let o=this.layerView.tryRecycleWith(s,{signal:i});if(o){e.splice(r,1),this.layer=s;let a=this.layerView,l=a.view;return this.promise=Promise.race([o.then(()=>(Mt(this._controller.signal),s.emit("layerview-destroy",{view:l,layerView:a}),l.emit("layerview-destroy",{view:l,layerView:a}),s.emit("layerview-create",{view:l,layerView:a}),l.emit("layerview-create",{view:l,layerView:a}),a)),new Promise((d,h)=>Sa(this._controller.signal,()=>h(qc())))]),this.promise}}return null}destroy(){this._controller.abort();let{layerView:e}=this;if(e){let{layer:n,view:i}=this;n.emit("layerview-destroy",{view:i,layerView:e}),i.emit("layerview-destroy",{layer:n,layerView:e})}this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null,this._map=null}start(){return A(this,null,function*(){if(this._started)return;this._started=!0;let{_controller:{signal:e},layer:n,view:i}=this;this._map=i.map;try{let r,s;if(yield n.load({signal:e}),n.prefetchResources&&(yield n.prefetchResources({signal:e})),iC(n))r=yield n.createLayerView(i,{signal:e});else{if(!this.layerViewImporter.hasLayerViewModule(n))throw new re("layer:view-not-supported","No layerview implementation was found");let l=yield this.layerViewImporter.importLayerView(n);Mt(e),r="default"in l?new l.default({layer:n,view:i}):new l({layer:n,view:i})}let o=()=>{s=rt(s),r.destroyed||r.destroy(),r.layer=null,r.parent=null,r.view=null,this.done=!0};s=Sa(e,o),Mt(e);try{yield r.when()}catch(l){throw o(),l}if(!this._map?.allLayers?.includes(n))return o(),void this._deferred.reject(new re("view:no-layerview-for-layer","The layer has been removed from the map",{layer:n}));this.layerView=r,n.emit("layerview-create",{view:i,layerView:r}),i.emit("layerview-create",{layer:n,layerView:r}),this.done=!0,this._deferred.resolve(r)}catch(r){n.emit("layerview-create-error",{view:i,error:r}),i.emit("layerview-create-error",{layer:n,error:r}),this.done=!0,this._deferred.reject(new re("layerview:create-error","layerview creation failed",{layer:n,error:r}))}})}},ai=class extends z{constructor(t){super(t),this._layerLayerViewInfoMap=new Map,this._recyclingInfoMap=new Map,this._watchUpdatingTracking=new xn,this.supportsGround=!0,this._preloadLayerViewModules=()=>{let e=this.view.map?.allLayers;if(e)for(let n of e)this.layerViewImporter.hasLayerViewModule(n)&&this.layerViewImporter.importLayerView(n)},this._reschedule=()=>this.destroyed?Promise.reject():(this._workPromise==null&&(this._workPromise=Jn(),this._workPromise.promise.catch(()=>{})),this.removeHandles("reschedule"),this.addHandles(Pm(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{if(this.destroyed)return;let e=this.view.map;if(this._map!==e&&(this.clear(),this._map=e),this._workPromise==null)return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");let n=new Set,i=[],r=this.view.ready,s=a=>{if(a!=null){for(let l of a)if(l){n.add(l);let d=this._layerLayerViewInfoMap.get(l);d&&r?d.start():d||this._recyclingInfoMap.has(l)||i.push(l),"layers"in l&&l.layers&&s(l.layers)}}};for(let a of this._rootCollectionNames)s($r(this,a));for(let[a,l]of this._layerLayerViewInfoMap)if(!n.has(a)){this._layerLayerViewInfoMap.delete(l.layer);let d=l.tryRecycle(i);d?(this.notifyChange("updating"),this._recyclingInfoMap.set(l.layer,l),d.then(()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(l.layer),this._layerLayerViewInfoMap.set(l.layer,l),this._reschedule()}).catch(()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(l.layer),l.destroy(),this._reschedule()})):l.destroy()}for(let[a,l]of this._recyclingInfoMap)n.has(a)||(this.notifyChange("updating"),this._recyclingInfoMap.delete(l.layer),l.destroy());for(let a of i)this._createLayerView(a);this._refreshCollections();let o=[e?.ground?.layers,e?.basemap?.baseLayers,e?.basemap?.referenceLayers,e?.layers].filter(a=>!!a);n.forEach(a=>"layers"in a&&o.push(a.layers)),this.addHandles(o.map(a=>this._watchUpdatingTracking.addOnCollectionChange(()=>a,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.addHandles([Bt(()=>this.view?.map?.allLayers,"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),R(()=>{let t=this.view,e=t?.map;return[e?.basemap,e?.ground,e?.layers,t?.ready]},()=>this._reschedule(),si)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),ka(this._recyclingInfoMap),ka(this._layerLayerViewInfoMap),this._watchUpdatingTracking.destroy(),this._map=null,this._workPromise!=null&&(this._workPromise.reject(qc()),this._workPromise=null)}get _layersToLayerViews(){let t=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&t.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(t)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return this._workPromise!=null||this._watchUpdatingTracking.updating||Mn(this._layerLayerViewInfoMap,t=>!t.done)||this._recyclingInfoMap.size>0}get updatingRemaining(){let t=0;for(let e of this._layerLayerViewInfoMap.values())e.done||++t;return t}clear(){this.destroyed||(ka(this._layerLayerViewInfoMap),this._refreshCollections())}whenLayerView(t){return A(this,null,function*(){if(yield this._reschedule(),!this._layerLayerViewInfoMap.has(t)){if(this._recyclingInfoMap.has(t))return this._recyclingInfoMap.get(t).promise;throw new re("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:t})}return this._layerLayerViewInfoMap.get(t).promise})}_refreshCollections(){for(let[t,e]of this._layersToLayerViews)this._populateLayerViewsOwners($r(this,t),$r(this,e),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_populateLayerViewsOwners(t,e,n){if(!t||!e)return void(e&&e.removeAll());let i=0;for(let r of t){let s=this._layerLayerViewInfoMap.get(r);if(!s?.layerView)continue;let o=s.layerView;o.layer=r,o.parent=n,e.at(i)!==o&&e.splice(i,0,o),r.layers&&this._populateLayerViewsOwners(r.layers,o.layerViews,o),i+=1}i<e.length&&e.splice(i,e.length)}_createLayerView(t){t.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(t)&&this.layerViewImporter.importLayerView(t);let e=new Eu(t,this.view,this.layerViewImporter);e.promise.then(()=>this._refreshCollections(),n=>{n&&(Wr(n)||n.name==="cancelled:layerview-create")||K.getLogger(this).error(`Failed to create layerview for layer title:'${t.title??"no title"}', id:'${t.id??"no id"}' of type '${t.type}'.`,{layer:t,error:n}),this._refreshCollections()}),this._layerLayerViewInfoMap.set(t,e),this.view.ready&&e.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};c([u()],ai.prototype,"_workPromise",void 0),c([u({readOnly:!0})],ai.prototype,"_watchUpdatingTracking",void 0),c([u({readOnly:!0})],ai.prototype,"_layersToLayerViews",null),c([u({readOnly:!0})],ai.prototype,"_rootCollectionNames",null),c([u()],ai.prototype,"layerViewImporter",void 0),c([u()],ai.prototype,"supportsGround",void 0),c([u({readOnly:!0})],ai.prototype,"updating",null),c([u({readOnly:!0})],ai.prototype,"updatingRemaining",null),c([u({constructOnly:!0})],ai.prototype,"view",void 0),ai=c([D("esri.views.LayerViewManager")],ai);var d0=ai;function iC(t){return"createLayerView"in t&&t.createLayerView!=null}var ei=class extends z{constructor(t){super(t),this.factor=1.5,this.offset=Ce(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};c([u({type:Number})],ei.prototype,"factor",void 0),c([u({nonNullable:!0})],ei.prototype,"offset",void 0),c([u()],ei.prototype,"position",void 0),c([u({type:Number,range:{min:0}})],ei.prototype,"size",void 0),c([u()],ei.prototype,"maskUrl",void 0),c([u()],ei.prototype,"maskEnabled",void 0),c([u()],ei.prototype,"overlayUrl",void 0),c([u()],ei.prototype,"overlayEnabled",void 0),c([u({readOnly:!0})],ei.prototype,"version",null),c([u({type:Boolean})],ei.prototype,"visible",void 0),ei=c([D("esri.views.Magnifier")],ei);var xu=ei;var ln=class extends Pi.EventedAccessor{constructor(t){super(t),this._selectionMap=new Zf,this._trashCan=[],this._layerEditHandles=new ae,this._vizTaskId=0,this.showHighlight=!0}initialize(){this.addHandles([R(()=>[this.view,this.showHighlight],()=>this._refreshVisualization()),Bt(()=>this.sources,"change",e=>{let n=this._selectionMap;for(let i of e.removed)n.delete(i);this._refreshListeners(),this._refreshVisualization()},{onListenerAdd:()=>this._refreshListeners()})]);let t=new ae;this.view.when().then(()=>{this.view.map.allLayers.flatten(e=>"sublayers"in e&&e.sublayers?e.sublayers:null).forEach(e=>{(sl(e)&&!_f(e)||tr(e))&&t.add(e)}),this._set("sources",t)})}destroy(){this._layerEditHandles.drain(rt)}get selections(){return Array.from(this._selectionMap.entries()).map(t=>{let[e,n]=t;return{layer:e,selection:[...n.selection]}})}get count(){let t=0;for(let e of this._selectionMap.values())t+=e.selection.length;return t}get hasSelection(){return this.count>0}get sources(){return this._get("sources")}set sources(t){this._set("sources",t)}getSelectedFeatures(i){return A(this,arguments,function*(t,e={},n="layerView"){let{view:r,selections:s}=this,o=(t!==void 0?s.filter(a=>t.includes(a.layer)):s).filter(a=>a.selection.length>0).map(a=>A(this,null,function*(){let{layer:l,selection:d}=a,h=tr(l)?l.parent:l;if(h==null||!u0(h))return null;if(n==="layer")return h0(h,d,e);let p=yield r.whenLayerView(h);return h0(p,d,e)}));return(yield Promise.all(o)).filter(a=>a!==null)})}updateSelection(t){let e=new Map;for(let[r,s]of this._selectionMap)e.set(r,[...s.selection]);let n=!1,i=t.current.concat(t.added);for(let r of i){let s=r.sourceLayer,o=r.getObjectId();if(this.sources.includes(s)&&(sl(s)||tr(s))&&o!==null){let a=Nm(e,s,()=>[]);a.includes(o)||(a.push(o),n=!0)}}for(let r of t.removed){let s=r.sourceLayer,o=r.getObjectId();if(this.sources.includes(s)&&(sl(s)||tr(s))&&o!==null){let a=e.get(s),l=a?.indexOf(o);l!==void 0&&l>=0&&(a?.splice(l,1),n=!0)}}if(n){let{_selectionMap:r,_trashCan:s}=this,o=[];for(let[a,l]of e){let d=r.get(a);d!==void 0&&s.push(d),r.set(a,{selection:l}),o.push(I({layer:a,selection:l},jc(d!==void 0?d.selection:[],l)))}this._onSelectionChange(o)}}setSelection(t,e){this._setSelection(t,e)}getSelection(t){return this._selectionMap.get(t)?.selection}appendToSelection(t,e){let n=this._selectionMap.get(t),i=n!==void 0?[...n.selection]:[];for(let r of e)i.includes(r)||i.push(r);this._setSelection(t,i)}removeFromSelection(t,e){let n=this._selectionMap.get(t);if(!n)return;let i=[];for(let r of n.selection)e.includes(r)||i.push(r);this._setSelection(t,i)}toggleInSelection(t,e){let n=this._selectionMap.get(t);if(!n||n.selection.length===0)return void this._setSelection(t,e);let i=new Set(n.selection),r=new Set(e),s=Lm(i,r);this._setSelection(t,Array.from(s))}clear(){let t=this._selectionMap.values();this._trashCan.push(...t);let e=[];for(let[n,i]of this._selectionMap.entries())e.push({layer:n,added:[],removed:[...i.selection],selection:[]});this._selectionMap.clear(),this._onSelectionChange(e)}_onSelectionChange(t){this._refreshVisualization(),this.emit("selection-change",{view:this.view,changes:t})}_refreshVisualization(){if(this.view==null||this.sources==null)return;for(this._vizTaskId++;this._trashCan.length>0;)this._trashCan.pop()?.highlightHandle?.remove();let{sources:t,view:e,_selectionMap:n,showHighlight:i}=this,r=this._vizTaskId;for(let s of t){let o=n.get(s),a=tr(s)?s.parent:s;a!=null&&u0(a)&&e.whenLayerView(a).then(l=>{o?.highlightHandle?.remove(),o!==void 0&&i&&r===this._vizTaskId&&"highlight"in l&&typeof l.highlight=="function"&&o.selection.length>0&&(o.highlightHandle=l.highlight(o.selection,"selection"))})}}_refreshListeners(){this._layerEditHandles.drain(rt);for(let t of this.sources){let e=tr(t)?t.parent:t;if(e!=null&&sl(e)){let n=e.on("edits",i=>{this._handleEditChanges(i,t)});this._layerEditHandles.push(n)}}}_handleEditChanges(t,e){if(t.deletedFeatures!==void 0&&t.deletedFeatures.length>0&&this._selectionMap.has(e)){let n=t.deletedFeatures.filter(i=>i.error==null).map(i=>i.objectId).filter(Vt);this.removeFromSelection(e,n)}}_setSelection(t,e){if(!this.sources.includes(t))throw new Error(`Cannot set selection on layer ${t.title} because it is not in 'sources'`);let n=this._selectionMap.get(t);if(n===void 0||!rC(n,{selection:e})){n!==void 0&&this._trashCan.push(n),this._selectionMap.set(t,{selection:[...e]});let i=I({layer:t,selection:[...e]},jc(n!==void 0?n.selection:[],e));this._onSelectionChange([i])}}};c([u({readOnly:!0,nonNullable:!0})],ln.prototype,"selections",null),c([u({readOnly:!0,nonNullable:!0})],ln.prototype,"count",null),c([u({constructOnly:!0,nonNullable:!0})],ln.prototype,"view",void 0),c([u({readOnly:!0,nonNullable:!0})],ln.prototype,"hasSelection",null),c([u()],ln.prototype,"showHighlight",void 0),c([u()],ln.prototype,"sources",null),ln=c([D("esri.views.SelectionManager")],ln);var sl=t=>t.createQuery!==void 0&&t.on!==void 0,nC=t=>t.layer!==void 0,u0=t=>t?.when!==void 0,rC=(t,e)=>{if(t==null&&e==null)return!0;if(t!=null&&e==null||t==null&&e!=null)return!1;if(t!=null&&e!=null&&t.selection!=null&&e.selection!=null){let n=[...t.selection],i=[...e.selection];if(n.length!==i.length)return!1;n.sort(),i.sort();for(let r=0;r<n.length;r++)if(n[r]!==i[r])return!1}return!0},h0=(i,r,...s)=>A(void 0,[i,r,...s],function*(t,e,n={}){let o;if(nC(t)){let a=t;o=a===void 0?null:yield a.queryFeatures(new od(te(I({},n),{objectIds:e}))).then(l=>({data:l,layer:t.layer}))}else{let a=t;o=a===void 0?null:yield a.queryFeatures(new od(te(I({},n),{objectIds:e}))).then(l=>({data:l,layer:a}))}return o}),p0=ln;var Vo=class extends Hf(z){constructor(t){super(t),this.accentColor=new Ht([255,127,0]),this.textColor=new Ht([255,255,255])}};c([u({type:Ht,nonNullable:!0})],Vo.prototype,"accentColor",void 0),c([u({type:Ht,nonNullable:!0})],Vo.prototype,"textColor",void 0),Vo=c([D("esri.views.Theme")],Vo);var ol=Vo;var Ou;(function(t){t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right"})(Ou||(Ou={}));var Ru=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],m0={};function f0(t){return!!m0[t]}function sC(t){for(let e of t)if(!f0(e))return!1;return!0}Ru.forEach(t=>{m0[t]=!0});var al=class{constructor(e){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=e,this.inputManager=null}connect(e){e&&this.disconnect(),this.inputManager=e,this._handlers.forEach(({handler:n,priority:i},r)=>this.inputManager?.installHandlers(r,[n],i))}disconnect(){this.inputManager&&this._handlers.forEach((e,n)=>this.inputManager?.uninstallHandlers(n)),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(e,n,i,r){let s=Array.isArray(e)?e:e.split(",");if(!sC(s))return s.some(f0)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let o,a;Array.isArray(n)?a=n:(o=n,a=[]),typeof i=="function"?o=i:r=i,r=r??rn.DEFAULT;let l=this._createUniqueGroupName(),d=new ku(this.view,s,a,o);this._handlers.set(l,{handler:d,priority:r});for(let h of s){let p=this._handlerCounts.get(h)||0;this._handlerCounts.set(h,p+1)}return this.inputManager&&this.inputManager.installHandlers(l,[d],r),Ca(()=>this._removeHandler(l,s))}hasHandler(e){return!!this._handlerCounts.get(e)}_removeHandler(e,n){if(this._handlers.has(e)){this._handlers.delete(e);for(let i of n){let r=this._handlerCounts.get(i);r===void 0?console.error("Trying to remove handler for event that has no handlers registered: ",i):r===1?this._handlerCounts.delete(i):this._handlerCounts.set(i,r-1)}}this.inputManager&&this.inputManager.uninstallHandlers(e)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}},ku=class extends ce{constructor(e,n,i,r){super(!0),this._latestDragStart=void 0,this.view=e;for(let s of n)switch(s){case"click":this.registerIncoming("click",i,o=>r(this._wrapClick(o)));break;case"double-click":this.registerIncoming("double-click",i,o=>r(this._wrapDoubleClick(o)));break;case"immediate-click":this.registerIncoming("immediate-click",i,o=>r(this._wrapImmediateClick(o)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",i,o=>r(this._wrapImmediateDoubleClick(o)));break;case"hold":this.registerIncoming("hold",i,o=>r(this._wrapHold(o)));break;case"drag":this.registerIncoming("drag",i,o=>{let a=this._wrapDrag(o);a&&r(a)});break;case"key-down":this.registerIncoming("key-down",i,o=>r(this._wrapKeyDown(o)));break;case"key-up":this.registerIncoming("key-up",i,o=>r(this._wrapKeyUp(o)));break;case"pointer-down":this.registerIncoming("pointer-down",i,o=>r(this._wrapPointer(o,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",i,o=>r(this._wrapPointer(o,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",i,o=>r(this._wrapPointer(o,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",i,o=>r(this._wrapPointerDrag(o)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",i,o=>r(this._wrapMouseWheel(o)));break;case"pointer-enter":this.registerIncoming("pointer-enter",i,o=>r(this._wrapPointer(o,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",i,o=>r(this._wrapPointer(o,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",i,o=>{r(this._wrapGamepad(o))});break;case"focus":this.registerIncoming("focus",i,o=>{r(this._wrapFocus(o))});break;case"blur":this.registerIncoming("blur",i,o=>{r(this._wrapBlur(o))})}}_wrapFocus(e){return{type:"focus",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:n=>e.async(n),preventDefault:()=>e.preventDefault()}}_wrapBlur(e){return{type:"blur",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:n=>e.async(n),preventDefault:()=>e.preventDefault()}}_wrapClick(e){let{pointerType:n,button:i,buttons:r,x:s,y:o,native:a,eventId:l}=e.data,{cancelable:d,timestamp:h}=e;return{type:"click",pointerType:n,button:i,buttons:r,x:s,y:o,native:a,timestamp:h,screenPoint:Ce(s,o),mapPoint:this._getMapPoint(s,o),eventId:l,cancelable:d,stopPropagation:()=>e.stopPropagation(),async:p=>e.async(p),preventDefault:()=>e.preventDefault()}}_wrapDoubleClick(e){let{pointerType:n,button:i,buttons:r,x:s,y:o,native:a,eventId:l}=e.data,{cancelable:d,timestamp:h}=e;return{type:"double-click",pointerType:n,button:i,buttons:r,x:s,y:o,native:a,timestamp:h,mapPoint:this._getMapPoint(s,o),eventId:l,cancelable:d,stopPropagation:()=>e.stopPropagation(),async:p=>e.async(p),preventDefault:()=>e.preventDefault()}}_wrapImmediateClick(e){let{pointerType:n,button:i,buttons:r,x:s,y:o,native:a,eventId:l}=e.data,d=a.pointerId,{cancelable:h,timestamp:p}=e;return{type:"immediate-click",pointerId:d,pointerType:n,button:i,buttons:r,x:s,y:o,native:a,timestamp:p,mapPoint:this._getMapPoint(s,o),eventId:l,cancelable:h,stopPropagation:()=>e.stopPropagation(),async:m=>e.async(m),preventDefault:()=>e.preventDefault()}}_wrapImmediateDoubleClick(e){let{pointerType:n,button:i,buttons:r,x:s,y:o,native:a,eventId:l}=e.data,d=a.pointerId,{cancelable:h,timestamp:p}=e;return{type:"immediate-double-click",pointerId:d,pointerType:n,button:i,buttons:r,x:s,y:o,native:a,timestamp:p,mapPoint:this._getMapPoint(s,o),eventId:l,cancelable:h,stopPropagation:()=>e.stopPropagation(),async:m=>e.async(m),preventDefault:()=>e.preventDefault()}}_wrapHold(e){let{pointerType:n,button:i,buttons:r,x:s,y:o,native:a}=e.data,{cancelable:l,timestamp:d}=e;return{type:"hold",pointerType:n,button:i,buttons:r,x:s,y:o,native:a,timestamp:d,mapPoint:this._getMapPoint(s,o),cancelable:l,stopPropagation:()=>e.stopPropagation(),async:h=>e.async(h),preventDefault:()=>e.preventDefault()}}_getMapPoint(e,n){return this.view.toMap(Ce(e,n),{exclude:[]})}_wrapDrag(e){let n=e.data,{x:i,y:r}=n.center,{action:s,pointerType:o,button:a}=n;if(s==="start"&&(this._latestDragStart=n),!this._latestDragStart)return;let l=n.pointer.native,d=n.buttons,{cancelable:h,timestamp:p}=e,m={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return s==="end"&&(this._latestDragStart=void 0),{type:"drag",action:s,x:i,y:r,origin:m,pointerType:o,button:a,buttons:d,radius:n.radius,angle:hf(n.angle),native:l,timestamp:p,cancelable:h,stopPropagation:()=>e.stopPropagation(),async:f=>e.async(f),preventDefault:()=>e.preventDefault()}}_wrapKeyDown(e){let{key:n,repeat:i,native:r}=e.data,{cancelable:s,timestamp:o}=e;return{type:"key-down",key:n,repeat:i,native:r,timestamp:o,cancelable:s,stopPropagation:()=>e.stopPropagation(),async:a=>e.async(a),preventDefault:()=>e.preventDefault()}}_wrapKeyUp(e){let{key:n,native:i}=e.data,{cancelable:r,timestamp:s}=e;return{type:"key-up",key:n,native:i,timestamp:s,cancelable:r,stopPropagation:()=>e.stopPropagation(),async:o=>e.async(o),preventDefault:()=>e.preventDefault()}}_wrapPointer(e,n){let{x:i,y:r,button:s,buttons:o,native:a,eventId:l}=e.data,d=a.pointerId,h=a.pointerType,{cancelable:p,timestamp:m}=e;return{type:n,x:i,y:r,pointerId:d,pointerType:h,button:s,buttons:o,native:a,timestamp:m,eventId:l,cancelable:p,stopPropagation:()=>e.stopPropagation(),async:f=>e.async(f),preventDefault:()=>e.preventDefault()}}_wrapPointerDrag(e){let{x:n,y:i,buttons:r,native:s,eventId:o}=e.data.currentEvent,{button:a}=e.data.startEvent,l=e.data.startEvent.native.pointerId,d=e.data.startEvent.native.pointerType,h=e.data.action,p={x:e.data.startEvent.x,y:e.data.startEvent.y},{cancelable:m,timestamp:f}=e;return{type:"pointer-drag",x:n,y:i,pointerId:l,pointerType:d,button:a,buttons:r,action:h,origin:p,native:s,timestamp:f,eventId:o,cancelable:m,stopPropagation:()=>e.stopPropagation(),async:w=>e.async(w),preventDefault:()=>e.preventDefault()}}_wrapMouseWheel(e){let{cancelable:n,data:i,timestamp:r}=e,{x:s,y:o,deltaY:a,native:l}=i;return{type:"mouse-wheel",x:s,y:o,deltaY:a,native:l,timestamp:r,cancelable:n,stopPropagation:()=>e.stopPropagation(),async:d=>e.async(d),preventDefault:()=>e.preventDefault()}}_wrapGamepad(e){let{action:n,state:i,device:r}=e.data,{cancelable:s,timestamp:o}=e,{buttons:a,axes:l}=i;return{type:"gamepad",device:r,timestamp:o,action:n,buttons:a,axes:l,cancelable:s,stopPropagation:()=>e.stopPropagation(),async:d=>e.async(d),preventDefault:()=>e.preventDefault()}}};var ar,g0,_0;(function(t){t[t.USER=0]="USER",t[t.MANAGER=1]="MANAGER"})(ar||(ar={})),function(t){t[t.None=0]="None",t[t.Unfocused=1]="Unfocused",t[t.Focused=2]="Focused",t[t.Unselected=4]="Unselected",t[t.Selected=8]="Selected",t[t.All=15]="All"}(g0||(g0={})),function(t){t[t.None=0]="None",t[t.Custom1=16]="Custom1",t[t.Custom2=32]="Custom2",t[t.Custom3=64]="Custom3",t[t.Custom4=128]="Custom4",t[t.Custom5=256]="Custom5",t[t.Custom6=512]="Custom6",t[t.Custom7=1024]="Custom7",t[t.Custom8=2048]="Custom8",t[t.Custom9=4096]="Custom9",t[t.Custom10=8192]="Custom10",t[t.Custom11=16384]="Custom11",t[t.Custom12=32768]="Custom12",t[t.All=65520]="All"}(_0||(_0={}));function y0(t){return[t.on("before-add",e=>{let n=e.item;if(n==null||t.includes(n))return K.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void e.preventDefault();n.onAdd()}),t.on("after-remove",e=>{let n=e.item;n.active&&(n.view.activeTool=null),n.destroy()})]}function Bo(t){return t.visible&&t.getEditableFlag!=null&&t.getEditableFlag(ar.USER)&&t.getEditableFlag(ar.MANAGER)}function Di(t){return Ce(t.x,t.y)}function Au(t,e){let n=(t instanceof HTMLElement?t:t.surface)?.getBoundingClientRect();return n?Ce(e.clientX-n.left,e.clientY-n.top):Ce(0,0)}function ll(t,e){return e instanceof Event?Au(t,e):Di(e)}function cl(t){if(t instanceof Event)return!0;if(typeof t=="object"&&"type"in t)switch(t.type){case"click":case"double-click":case"pointer-down":case"pointer-drag":case"pointer-enter":case"pointer-leave":case"pointer-up":case"pointer-move":case"immediate-click":case"immediate-double-click":case"hold":case"drag":case"mouse-wheel":return!0;default:return!1}return!1}var dl=class{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._revertToNullActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}hasFocusedManipulators(){return this._grabbedManipulators.size>0||this._draggedManipulators.size>0}handleInputEvent(e,n){let i=()=>e.stopPropagation();switch(e.type){case"pointer-move":v0(e.pointerType)&&this._pointerLocations.set(e.pointerId,{x:e.x,y:e.y,pointerType:e.pointerType});break;case"drag":this._grabbedManipulators.size>0&&(this._stopDrag=!0),this._stopDrag&&(i(),e.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!b0(e))break;let r=Di(e),s=this._intersect(r,e.pointerType,n.forEachTool);if(s==null)break;let o=s.manipulator,a=s.tool;o==null||a==null||!o.interactive||o.grabbable&&o.grabbableForEvent(e)||!o.grabbing||o.dragging||this._releaseManipulatorBeforeDragging(o,e,n),o!=null&&a!=null&&o.interactive&&o.grabbable&&o.grabbableForEvent(e)&&!o.grabbing&&(this._grabbedManipulators.set(e.pointerId,{manipulator:o,tool:a,start:r,pointerType:e.pointerType}),this._grabbedManipulators.size===1&&n.activeTool==null&&(this._revertToNullActiveTool=!0,n.setActiveTool(s.tool)),o.grabbing=!0,o.events.emit("grab-changed",{action:"start",pointerType:e.pointerType,screenPoint:r}),i());break}case"pointer-up":this._draggedManipulators.has(e.pointerId)||this._handlePointerEnd(e,n);break;case"pointer-drag":{if(!b0(e))break;let r=this._grabbedManipulators.get(e.pointerId),s=r?.manipulator,o=r?.tool;if(s==null||o==null)break;let a=Di(e);a.x=td(a.x,0,n.view.width),a.y=td(a.y,0,n.view.height);let l=r.start,d=this._draggedManipulators.get(e.pointerId);switch(e.action){case"start":case"update":e.action!=="update"&&this._grabbedManipulators.size!==1||(s.dragging=!0,d?s.events.emit("drag",{action:"update",start:l,screenPoint:a}):s.events.emit("drag",{action:"start",start:l,screenPoint:a,pointerType:e.pointerType}),this._draggedManipulators.set(e.pointerId,{tool:o,manipulator:s,start:l}));break;case"end":s.dragging=!1,d&&s.events.emit("drag",{action:"end",start:l,screenPoint:a}),this._draggedManipulators.delete(e.pointerId),this._handlePointerEnd(e,n)}i();break}case"immediate-click":{let r=Di(e),s=this._intersect(r,e.pointerType,n.forEachTool);if(oC(e)||n.forEachTool(d=>{if((s==null||s.tool!==d||d.automaticManipulatorSelection)&&d.manipulators){let h=!1;d.manipulators.forEach(({manipulator:p})=>{p.selected&&(p.selected=!1,h=!0)}),h&&d.onManipulatorSelectionChanged&&d.onManipulatorSelectionChanged()}}),s==null)break;let{manipulator:o,tool:a}=s;if(!o.interactive)break;o.selectable&&a.automaticManipulatorSelection&&(o.selected=!o.selected,a.onManipulatorSelectionChanged&&a.onManipulatorSelectionChanged());let l=e.native.shiftKey;o.events.emit("immediate-click",{screenPoint:r,button:e.button,pointerType:e.pointerType,shiftKey:l,stopPropagation:i}),Fu(o,i);break}case"click":{let r=Di(e),s=this._intersect(r,e.pointerType,n.forEachTool),o=s?.manipulator;if(o==null||!o.interactive)break;let a=e.native.shiftKey;o.events.emit(e.type,{screenPoint:r,button:e.button,pointerType:e.pointerType,shiftKey:a}),i();break}case"double-click":{let r=Di(e),s=this._intersect(r,e.pointerType,n.forEachTool),o=s!=null?s.manipulator:null;if(o==null||!o.interactive)break;let a=e.native.shiftKey;o.events.emit("double-click",{screenPoint:r,button:e.button,pointerType:e.pointerType,shiftKey:a,stopPropagation:i}),Fu(o,i);break}case"immediate-double-click":{let r=Di(e),s=this._intersect(r,e.pointerType,n.forEachTool),o=s!=null?s.manipulator:null;if(o==null||!o.interactive)break;let a=e.native.shiftKey;o.events.emit("immediate-double-click",{screenPoint:r,button:e.button,pointerType:e.pointerType,shiftKey:a,stopPropagation:i}),Fu(o,i);break}}this._onFocusChange(n.forEachTool)}_releaseManipulatorBeforeDragging(e,n,i){e.grabbing=!1,e.events.emit("grab-changed",{action:"end",pointerType:n.pointerType,screenPoint:Di(n)}),this._grabbedManipulators.forEach(({manipulator:r},s)=>{r===e&&this._grabbedManipulators.delete(s)}),this._afterManipulatorRelease(i.setActiveTool)}_handlePointerEnd(e,n){let i=this._grabbedManipulators.get(e.pointerId)?.manipulator;i!=null&&i.grabbing&&(i.grabbing=!1,i.events.emit("grab-changed",{action:"end",pointerType:e.pointerType,screenPoint:Di(e)}),this._grabbedManipulators.delete(e.pointerId),this._afterManipulatorRelease(n.setActiveTool))}_cursorFromMap(e){let n=null;return Mn(e,({manipulator:i})=>!(i==null||!i.interactive)&&(i.grabbing&&i.grabCursor?(n=i.grabCursor,!0):!!i.cursor&&(n=i.cursor,!0))),n}_onFocusChange(e){this._updateCursor(),this._updateFocusedManipulatorTools(e)}_updateCursor(){this._grabbedManipulators.size>0?this._cursor=this._cursorFromMap(this._grabbedManipulators)||"grabbing":this._hoveredManipulators.size>0?this._cursor=this._cursorFromMap(this._hoveredManipulators)||"pointer":this._cursor=null}_updateFocusedManipulatorTools(e){let n=new Set,i=new Set;this._grabbedManipulators.forEach(({tool:r})=>{n.add(r)}),this._hoveredManipulators.forEach(({tool:r})=>{i.add(r)}),e(r=>{r.hasGrabbedManipulators=n.has(r),r.hasHoveredManipulators=i.has(r);let s=this._grabbedManipulators.values(),o=Mm(s,({tool:a})=>a===r);r.firstGrabbedManipulator=o!=null?o.manipulator:null})}clearPointers(e,{forEachTool:n,setActiveTool:i},r=!0,s){let o=(a,l)=>a===e&&(s==null||s===l);this._grabbedManipulators.forEach(({tool:a,manipulator:l,pointerType:d},h)=>{o(a,l)&&(this._grabbedManipulators.delete(h),l.grabbing=!1,l.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:d}))}),this._draggedManipulators.forEach(({tool:a,manipulator:l},d)=>{o(a,l)&&(this._draggedManipulators.delete(d),l.dragging=!1,l.events.emit("drag",{action:"cancel"}))}),r&&this._hoveredManipulators.forEach(({tool:a,manipulator:l},d)=>{o(a,l)&&(this._hoveredManipulators.delete(d),l.hovering=!1)}),this._afterManipulatorRelease(i),this._onFocusChange(n)}_intersect(e,n,i){let r=null;return i(s=>{if(s.manipulators==null||!Bo(s))return!1;let o=s.manipulators.intersect(e,n);return o!=null&&(r={tool:s,manipulator:o},!0)}),r}updateHoveredStateFromKnownPointers(e){this._pointerLocations.forEach((n,i)=>{this._updateHoveredStateForPointerAtScreenPosition(Ce(n.x,n.y),i,n.pointerType,e)})}handleHoverEvent(e,n){e.type!=="pointer-up"&&e.type!=="immediate-click"&&e.type!=="pointer-move"||!v0(e.pointerType)||this._updateHoveredStateForPointerAtScreenPosition(Di(e),e.pointerId,e.pointerType,n)}_updateHoveredStateForPointerAtScreenPosition(e,n,i,r){let s=this._intersect(e,i,r),o=this._hoveredManipulators.get(n)?.manipulator;s==null||s.manipulator.interactive||(s=null),s!=null&&o===s.manipulator||(o!=null&&(o.hovering=!1),s!=null?(s.manipulator.hovering=!0,this._hoveredManipulators.set(n,s)):this._hoveredManipulators.delete(n),this._onFocusChange(r))}_afterManipulatorRelease(e){this._grabbedManipulators.size===0&&this._revertToNullActiveTool&&(e(null),this._revertToNullActiveTool=!1)}};function v0(t){return t==="mouse"}function b0(t){return t.pointerType!=="mouse"||t.button===0}function oC(t){return!!t.native.shiftKey}function Fu(t,e){t?.consumesClicks&&e()}var w0="attached",Pu="tools",C0=1e3,Ti=class extends z{constructor(t){super(t),this._updatingHandles=new xn,this._clock=Fi,this._manipulatorState=new dl,this.tools=new ae,this.cursor=null,this._interacting=!1,this._interactingTimeout=C0,this._interactingTimeoutHandle=null,this._forEachTool=e=>{for(let n of this.tools.items)if(e(n))return}}initialize(){this.addHandles([this.view.on(Ru,t=>{this._handleInputEvent(t)},rn.TOOL),...y0(this.tools),this.tools.on("before-add",({item:t})=>{this._updateToolEditableFlag(t)}),this.tools.on("before-remove",({item:t})=>{this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs),this._updateCursor()}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.activeTool=null,this.tools.drain(t=>t.destroy()),this._clearInteractingTimeout(),this._interacting=!1,this._updatingHandles.destroy()}get _manipulatorStateEventArgs(){return{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:t=>{this.activeTool=t},view:this.view}}set activeTool(t){if(t!=null&&!this.view.ready)return void K.getLogger(this).error("Cannot set active tool while view is not ready.");if(t===this.activeTool)return;let e=this.activeTool;this._set("activeTool",t),e?.deactivate(),t?.activate(),this._removeIncompleteTools(t);for(let n of this.tools){this._updateToolEditableFlag(n);let i=Bo(n);this.activeTool!=null&&i||this._manipulatorState.clearPointers(n,this._manipulatorStateEventArgs,!i)}this._updateCursor()}get updating(){return this._updatingHandles.updating||this.tools.some(t=>t.updating)}get interacting(){return this._interacting}_clearInteractingTimeout(){this._interactingTimeoutHandle=rt(this._interactingTimeoutHandle)}_startInteractingTimeout(){this._clearInteractingTimeout(),this._interactingTimeoutHandle=this._clock.setTimeout(()=>this._interacting=!1,this._interactingTimeout)}attach(){this.view.type==="3d"?this.addHandles([R(()=>{let{state:t}=this.view;return"camera"in t&&t.camera},()=>this._forEachManipulator(t=>t.onViewChange())),this.view.elevationProvider?.on("elevation-change",t=>this._forEachManipulator(e=>e.onElevationChange(t)))],w0):this.addHandles(R(()=>this.view.extent,()=>this._forEachManipulator(t=>t.onViewChange())))}detach(){this.activeTool=null,this.tools.removeAll(),this.removeHandles(w0),this._clearInteractingTimeout(),this._interacting=!1}_forEachManipulator(t){this._forEachTool(e=>{e.manipulators&&e.manipulators.forEach(({manipulator:n})=>t(n,e))})}_handleInputEvent(t){let e=!1,n=te(I({},t),{stopPropagation:()=>{e=!0,t.stopPropagation()}});this.activeTool!=null?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(n):this._forEachTool(i=>{!e&&i.visible&&i.handleInputEvent(n)}),!e&&t.type==="key-down"&&t.key==="Escape"&&this.activeTool&&(t.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(n,this._manipulatorStateEventArgs),e||this.activeTool==null||this.activeTool.handleInputEventAfter(n),this._manipulatorState.handleHoverEvent(n,this._forEachTool),this._updateCursor(),t.type==="pointer-move"&&(this._manipulatorState.hasFocusedManipulators()||this.activeTool)&&(this._interacting=!0,this._startInteractingTimeout())}_refreshToolWatchers(){this.removeHandles(Pu),this._forEachTool(t=>{if(t instanceof z){let e=R(()=>[t.cursor,t.visible,t.editable],()=>{Bo(t)||this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs),this._updateCursor()});this.addHandles(e,Pu)}t.manipulators&&this.addHandles([t.manipulators.on("after-remove",e=>{this._manipulatorState.clearPointers(t,this._manipulatorStateEventArgs,!0,e.item.manipulator)}),t.manipulators.on("change",()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()})],Pu)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateToolEditableFlag(t){t.setEditableFlag?.(ar.MANAGER,this.activeTool==null||t===this.activeTool)}_updateCursor(){let t=this._manipulatorState.cursor;t==null&&this._forEachTool(e=>!(e.cursor==null||!e.visible)&&(t=e.cursor,!0)),this._get("cursor")!==t&&this._set("cursor",t)}_removeIncompleteTools(t){this.tools.filter(e=>(t==null||e!==t)&&!e.created&&e.removeIncompleteOnCancel).forEach(e=>{this.tools.remove(e)})}get test(){let t=this;return{setClock:e=>this._clock=e,set interactingTimeoutEnabled(e){t._interactingTimeout=e?C0:0},get interactingTimeoutEnabled(){return t._interactingTimeout!==0}}}};c([u({constructOnly:!0,nonNullable:!0})],Ti.prototype,"view",void 0),c([u({value:null})],Ti.prototype,"activeTool",null),c([u({readOnly:!0,type:ae})],Ti.prototype,"tools",void 0),c([u({readOnly:!0})],Ti.prototype,"cursor",void 0),c([u({readOnly:!0})],Ti.prototype,"updating",null),c([u()],Ti.prototype,"_interacting",void 0),c([u({readOnly:!0})],Ti.prototype,"interacting",null),Ti=c([D("esri.views.ToolViewManager")],Ti);var ps=class extends z{constructor(t){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",t.mapping==="standard"?this._detectedDeviceType="standard":aC.test(t.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=t.index}get native(){let t=navigator.getGamepads?navigator.getGamepads():[];return this.nativeIndex!=null&&this.nativeIndex<t.length?t[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return lC[this.deviceType]}};c([u({nonNullable:!0,readOnly:!0})],ps.prototype,"nativeIndex",void 0),c([u({type:String,readOnly:!0})],ps.prototype,"deviceType",null),c([u({type:Number,readOnly:!0})],ps.prototype,"axisThreshold",null),ps=c([D("esri.views.input.gamepad.GamepadInputDevice")],ps);var aC=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),lC={standard:.15,spacemouse:.025,unknown:0},ms=ps;var Ho=class extends z{constructor(...t){super(...t),this.devices=new ae,this.enabledFocusMode="document"}};c([u({type:ae.ofType(ms),readOnly:!0})],Ho.prototype,"devices",void 0),c([u({type:["document","view","none"]})],Ho.prototype,"enabledFocusMode",void 0),Ho=c([D("esri.views.input.gamepad.GamepadSettings")],Ho);var S0=Ho;var ul=class extends z{constructor(){super(...arguments),this.gamepad=new S0}};c([u({readOnly:!0})],ul.prototype,"gamepad",void 0),ul=c([D("esri.views.input.Input")],ul);var D0=ul;var Pn=class extends z{constructor(t){super(t),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};c([u({type:Boolean,nonNullable:!0})],Pn.prototype,"enabled",void 0),c([u({type:ms})],Pn.prototype,"device",void 0),c([u({type:["pan","zoom"],nonNullable:!0})],Pn.prototype,"mode",void 0),c([u({type:["forward-down","forward-up"],nonNullable:!0})],Pn.prototype,"tiltDirection",void 0),c([u({type:Number,nonNullable:!0})],Pn.prototype,"velocityFactor",void 0),Pn=c([D("esri.views.navigation.gamepad.GamepadSettings")],Pn);var Lu=Pn;var lr=class extends z{constructor(t){super(t),this.browserTouchPanEnabled=!0,this.gamepad=new Lu,this.momentumEnabled=!0,this.mouseWheelZoomEnabled=!0}};c([u({type:Boolean})],lr.prototype,"browserTouchPanEnabled",void 0),c([u({type:Lu,nonNullable:!0})],lr.prototype,"gamepad",void 0),c([u({type:Boolean})],lr.prototype,"momentumEnabled",void 0),c([u({type:Boolean})],lr.prototype,"mouseWheelZoomEnabled",void 0),lr=c([D("esri.views.navigation.Navigation")],lr);var Nu=lr;var T0;function M0(t){if(t.type==="integrated-mesh-3dtiles")return null;let e=t.url?ff(t.url):void 0;return!(t.spatialReference?.vcsWkid==null&&e!=null&&e.serverType==="ImageServer")&&I0(t)&&t.heightModelInfo?t.heightModelInfo:cC(t)?ho.deriveUnitFromSR(dC,t.spatialReference):null}function I0(t){return"heightModelInfo"in t}function E0(t){if(t.type==="unknown"||!("capabilities"in t))return!1;switch(t.type){case"catalog":case"csv":case"feature":case"geojson":case"subtype-group":case"ogc-feature":case"oriented-imagery":case"wfs":case"knowledge-graph-sublayer":return!0;default:return!1}}function cC(t){return E0(t)?!!(t.capabilities&&t.capabilities.data&&t.capabilities.data.supportsZ):O0(t)}function x0(t){return t.layers!=null||O0(t)||E0(t)||I0(t)}function O0(t){switch(t.type){case"building-scene":case"elevation":case"integrated-mesh":case"integrated-mesh-3dtiles":case"point-cloud":case"scene":case"voxel":return!0;case"base-dynamic":case"base-elevation":case"base-tile":case"bing-maps":case"catalog":case"catalog-footprint":case"catalog-dynamic-group":case"csv":case"dimension":case"geojson":case"feature":case"subtype-group":case"geo-rss":case"graphics":case"group":case"imagery":case"imagery-tile":case"kml":case"knowledge-graph":case"link-chart":case"knowledge-graph-sublayer":case"line-of-sight":case"map-image":case"map-notes":case"media":case"ogc-feature":case"open-street-map":case"oriented-imagery":case"route":case"stream":case"tile":case"unknown":case"unsupported":case"vector-tile":case"video":case"wcs":case"web-tile":case"wfs":case"wms":case"wmts":case null:return!1}return!1}(function(t){t[t.Ok=0]="Ok",t[t.Units=1]="Units",t[t.HeightModel=2]="HeightModel",t[t.CRS=3]="CRS",t[t.Unsupported=4]="Unsupported"})(T0||(T0={}));var dC=new ho({heightModel:"gravity-related-height"});var Bu,Vu=null;function uC(t){return A(this,null,function*(){Vu||(Vu=import("./chunk-4TEAHELN.js").then(e=>Bu=e)),yield Vu,Mt(t)})}function Hu(t,e,n,i){return A(this,null,function*(){if(!t)return null;let r=t.spatialReference;return kf()||Ff(r,e)?Xr(t,e):Bu?Bu.projectGeometry(t,e,n,i):(yield Promise.race([uC(i),Af(i)]),Hu(t,e,n,i))})}var we=class extends z{constructor(t){super(t),this.required={tileInfo:!1,heightModelInfo:!1,extent:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=so(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return this.userSpatialReference!=null?this.userSpatialReference:this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return this.userSpatialReference==null||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){let t=this.map?.(),e=[];return this.priorityCollection!=null&&e.push(this.priorityCollection),e.push({parent:t?.basemap,layers:t?.basemap?.baseLayers},{layers:t?.layers},{parent:t?.ground,layers:t?.ground?.layers},{parent:t?.basemap,layers:t?.basemap?.referenceLayers}),e}get _allLayers(){return this._collectLayers(this.mapCollections)}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};let{layers:t,updating:e}=this._allLayers,n=null;for(let r of t){let s=this._getSupportedSpatialReferences(r);if(s.length>0){let o=this._narrowDownSpatialReferenceCandidates(n,s);o!=null&&(n=o)}if(n!=null&&n.length===1)break}if(e&&(n==null||n.length!==1))return{updating:!0};let i=this._pickSpatialReferenceCandidate(n);return{spatialReference:i!=null?i.spatialReference:null,viewingMode:i!=null?i.viewingMode:null,updating:!1}}get _tileInfoTask(){if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};let{layers:t,updating:e}=this._collectLayers([{parent:this.map?.()?.basemap,layers:this.map?.()?.basemap?.baseLayers},{layers:this.map?.()?.layers}]);if(t&&t.length>0&&"tileInfo"in t[0]){let n=t[0].tileInfo;return{tileInfo:n&&n.spatialReference.equals(this.spatialReference)?n:null,updating:!1}}return{updating:e}}get _heightModelInfoTask(){if(!this.required.heightModelInfo||this.suspended&&this._get("_heightModelInfoTask")?.heightModelInfo)return this._get("_heightModelInfoTask")??{updating:!1};let{layers:t,updating:e}=this._allLayers;for(let n of t)if(x0(n)){let i=M0(n);if(i)return{heightModelInfo:i,vcsWkid:n.spatialReference?.vcsWkid,latestVcsWkid:n.spatialReference?.latestVcsWkid,updating:!1}}return{updating:e}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};let t=this._allLayers,e=t.updating,n=[];for(let i of t.layers){let r="fullExtents"in i&&i.fullExtents||(i.fullExtent!=null?[i.fullExtent]:[]),s=this.requiresExtentInSpatialReference?null:r[0],o=r.find(a=>a.spatialReference.equals(this.spatialReference))??s;if(o)return{candidates:[{extent:o,layer:i}],updating:!1};if(this._getSupportedSpatialReferences(i).length>0)for(let a of r)n.push({extent:a,layer:i})}return{candidates:n,updating:e}}get _extentTask(){let{candidates:t,updating:e}=this._extentCandidatesTask;if(e)return{updating:e};if(t==null||t.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};let n=this._pickExtentCandidate(t),i=this.spatialReference;return n.extent.equals(this._projectExtentTask.input)&&i.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:this._projectExtentTask.task!=null&&!this._projectExtentTask.task.finished}:(this._projectExtentTask.task!=null&&(this._projectExtentTask.task=so(this._projectExtentTask.task)),this._projectExtentTask={input:n.extent.clone(),output:null,spatialReference:i.clone(),task:Kr(r=>A(this,null,function*(){try{let s=yield Hu(n.extent,i,"portalItem"in n.layer?n.layer.portalItem:void 0,r);this._projectExtentTask=te(I({},this._projectExtentTask),{task:null,output:s})}catch{if(Em(r))return;this._projectExtentTask=te(I({},this._projectExtentTask),{task:null})}}))},{updating:!0})}_narrowDownSpatialReferenceCandidates(t,e){if(t==null)return e;let n=[],i=(r,s)=>r!=null?s!=null?r===s&&r:r:s;for(let r of t)for(let s of e){if(!r.spatialReference.equals(s.spatialReference))continue;let o=i(r.viewingMode,s.viewingMode);if(o!==!1){n.push({spatialReference:r.spatialReference,viewingMode:o});break}}return n.length>0?n:null}_pickSpatialReferenceCandidate(t){let e=this.defaultSpatialReference;return t==null||t.length<1?e!=null?{spatialReference:e,viewingMode:null}:null:(e!=null&&t.length>1&&t.some(({spatialReference:n})=>n.equals(e))&&(t=t.filter(({spatialReference:n})=>n.equals(e))),t.length>1&&t.some(({viewingMode:n})=>n!==md.Local)&&(t=t.filter(({viewingMode:n})=>n!==md.Local)),t[0])}_getSupportedSpatialReferences(t){let e="supportedSpatialReferences"in t&&t.supportedSpatialReferences||(t.spatialReference?[t.spatialReference]:[]);if(e.length===0)return[];let n=[];for(let i of e){let r=this.getSpatialReferenceSupport({spatialReference:i,layer:t});if(r!=null){let s=r.constraints!=null?r.constraints:[{spatialReference:i,viewingMode:null}];for(let{spatialReference:o,viewingMode:a}of s)this.requiresExtentInSpatialReference&&this.userSpatialReference!=null&&!o.equals(this.userSpatialReference)||n.push({spatialReference:o,viewingMode:a})}}return n}_pickExtentCandidate(t){let e=this.spatialReference;return t.find(({extent:n})=>e.equals(n.spatialReference))||t[0]}_collectLayers(t){if(this._loadMaybe(this.map?.())!=="loaded")return{layers:[],updating:!0};let e=new zu;for(let n of t)if(this._collectCollection(n,e),e.preloading===this.sourcePreloadCount)break;return{layers:e.layers,updating:e.updating}}_collectCollection(t,e){if(t.layers){switch(this._loadMaybe(t.parent)){case"loading":return e.updating=!0,void++e.preloading;case"failed":return}for(let n of t.layers){switch(this._loadMaybe(n)){case"failed":continue;case"loading":e.updating=!0,++e.preloading;break;case"loaded":e.updating||e.layers.push(n),"layers"in n&&this._collectCollection({layers:n.layers},e)}if(e.preloading===this.sourcePreloadCount)break}}}_loadMaybe(t){return t&&"loadStatus"in t&&t.loadStatus!=null?t.loadStatus==="not-loaded"?(t.load().catch(e=>{Wr(e)||console.log(e)}),"loading"):t.loadStatus:"loaded"}};c([u()],we.prototype,"required",void 0),c([u({constructOnly:!0})],we.prototype,"map",void 0),c([u({constructOnly:!0})],we.prototype,"getSpatialReferenceSupport",void 0),c([u()],we.prototype,"defaultSpatialReference",void 0),c([u()],we.prototype,"userSpatialReference",void 0),c([u()],we.prototype,"sourcePreloadCount",void 0),c([u()],we.prototype,"priorityCollection",void 0),c([u()],we.prototype,"requiresExtentInSpatialReference",void 0),c([u()],we.prototype,"suspended",void 0),c([u({readOnly:!0})],we.prototype,"ready",null),c([u({readOnly:!0})],we.prototype,"heightModelInfoReady",null),c([u({readOnly:!0})],we.prototype,"spatialReference",null),c([u({readOnly:!0})],we.prototype,"extent",null),c([u({readOnly:!0})],we.prototype,"heightModelInfo",null),c([u({readOnly:!0})],we.prototype,"vcsWkid",null),c([u({readOnly:!0})],we.prototype,"latestVcsWkid",null),c([u({readOnly:!0})],we.prototype,"viewingMode",null),c([u({readOnly:!0})],we.prototype,"tileInfo",null),c([u({readOnly:!0})],we.prototype,"mapCollections",null),c([u({readOnly:!0})],we.prototype,"_allLayers",null),c([u({readOnly:!0})],we.prototype,"_spatialReferenceTask",null),c([u({readOnly:!0})],we.prototype,"_tileInfoTask",null),c([u({readOnly:!0})],we.prototype,"_heightModelInfoTask",null),c([u({readOnly:!0})],we.prototype,"_extentCandidatesTask",null),c([u()],we.prototype,"_extentTask",null),c([u()],we.prototype,"_projectExtentTask",void 0),we=c([D("esri.views.support.DefaultsFromMap")],we);var zu=class{constructor(){this.layers=new Array,this.preloading=-1,this.updating=!1}};var zo,W=zo=class extends Pi.EventedMixin(Wm(z)){constructor(t){super(t),this._userSpatialReference=null,this._cursor=null,this.handles=new wa,this.updatingHandles=new xn,this.allLayerViews=new ir({getCollections:()=>[this.basemapView?.baseLayerViews,this.groundView?.layerViews,this.layerViews,this.basemapView?.referenceLayerViews],getChildrenFunction:hC}),this.groundView=null,this.basemapView=null,this.fatalError=null,this.graphics=new yd,this.analyses=new No,this.typeSpecificPreconditionsReady=!0,this.layerViews=new ae,this.magnifier=new xu,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this.spatialReferenceWarningDelay=1e3,this.supportsGround=!0,this.timeExtent=null,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new D0,this.navigation=new Nu,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new al(this),this.persistableViewModels=new ae,this._isValid=!1,this._readyCycleForced=!1,this._lockedSpatialReference=null,this._userTimeZone=null,this._lockedTimeZone=null,this.theme=null,this.handles.add(R(()=>this.preconditionsReady,e=>{let n=this.ready;if(e?(this._lockedSpatialReference=this.spatialReference,this._lockedTimeZone=this.timeZone,zo.views.add(this)):(this._lockedSpatialReference=null,zo.views.remove(this)),this.notifyChange("spatialReference"),!e&&n)this.toolViewManager?.detach(),this.analysisViewManager!=null&&this.analysisViewManager.detach(),this.layerViewManager?.clear(),this._teardown();else if(e&&!n){try{this._startup()}catch(i){return void queueMicrotask(()=>{console.error("View._startup failed",i),this.fatalError=new re("startup-error",null,i)})}this.analysisViewManager!=null&&this.analysisViewManager.attach(),this.toolViewManager.attach()}},tn))}initialize(){this.addResolvingPromise(Promise.all([this.loadAsyncDependencies(),this.validate()]).then(()=>(this._isValid=!0,Li(()=>this.ready)))),this.basemapView=new an({view:this}),this.layerViewManager=new d0({view:this,layerViewImporter:{importLayerView:t=>this.importLayerView(t),hasLayerViewModule:t=>this.hasLayerViewModule(t)},supportsGround:this.supportsGround}),this.toolViewManager=new Ti({view:this}),this._setupSpatialReferenceLogger(),this.selectionManager=new p0({view:this}),this.addHandles([R(()=>this.initialExtentRequired,t=>this.defaultsFromMap.required=te(I({},this.defaultsFromMap.required),{extent:t}),si),R(()=>this.ready,t=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=t,this.defaultsFromMap.userSpatialReference=t?this.spatialReference:this._userSpatialReference)},tn),R(()=>this._userSpatialReference,t=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=t)},si)])}_setupSpatialReferenceLogger(){let t=null;this.addHandles([R(()=>this.defaultsFromMap?.ready,e=>{let n=this.map?.allLayers.length>0;if(e&&!this.spatialReference&&n){if(t!=null)return;let i=Ca(()=>t=so(t));t=Kr(r=>A(this,null,function*(){try{yield km(this.spatialReferenceWarningDelay,null,r)}catch{return}finally{t=null}K.getLogger(this).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")})),this.addHandles(i,"spatial-reference-logger-task")}else this.removeHandles("spatial-reference-logger-task")},{sync:!0})])}destroy(){this.destroyed||(zo.views.remove(this),this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=He(this.graphics),this.analyses=He(this.analyses),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),He(this.analysisViewManager),this.toolViewManager=He(this.toolViewManager),this.layerViewManager=He(this.layerViewManager),this.selectionManager=He(this.selectionManager),this.basemapView=He(this.basemapView),this.groundView?.destroy(),this.layerViews?.forEach(t=>t.destroy()),this.layerViews.length=0,this.invalidate(),this._emitter.clear(),this.handles.destroy(),this.map=He(this.map),this.updatingHandles.destroy())}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return K.getLogger(this).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){return this.toolViewManager?.activeTool}set activeTool(t){this.toolViewManager&&(this.toolViewManager.activeTool=t)}get animation(){return this._get("animation")}set animation(t){this._set("animation",t)}get center(){return null}get _defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new we(I({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:t=>this.getSpatialReferenceSupport(t)},this._defaultsFromMapSettings))}get extent(){return this._get("extent")}set extent(t){this._set("extent",t)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){return!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||co.isLoadable(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._lockedSpatialReference&&!this.defaultsFromMap?.ready||!this.typeSpecificPreconditionsReady)}get resolution(){return 0}set map(t){t!==this._get("map")&&(t?.destroyed&&(K.getLogger(this).warn("#map","The provided map is already destroyed",{map:t}),t=null),co.isLoadable(t)&&t.load().catch(()=>{}),this.constructed&&!this.destroyed&&(this.forceReadyCycle(),this._lockedSpatialReference=null),this._set("map",t))}get spatialReference(){let t=this._userSpatialReference||this._lockedSpatialReference||this.getDefaultSpatialReference()||null;if(t&&this.defaultsFromMap?.required?.heightModelInfo){let e=t.clone();return e.vcsWkid=this.defaultsFromMap.vcsWkid,e.latestVcsWkid=this.defaultsFromMap.latestVcsWkid,e}return t}set spatialReference(t){let e=!uo(t,this._get("spatialReference"));this._set("_userSpatialReference",t),e&&(this._set("spatialReference",t),this._spatialReferenceChanged(t))}_spatialReferenceChanged(t){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get timeZone(){return this._userTimeZone??this._lockedTimeZone??this.getDefaultTimeZone()??Qc}set timeZone(t){let e=new Set(["etc/utc","etc/gmt","gmt"]),n=new Set(Intl.supportedValuesOf("timeZone").map(i=>i.toLowerCase()));this._userTimeZone=t,t===Qc||t===Um||e.has(t.toLowerCase())||n.has(t.toLowerCase())||K.getLogger(this).warn("#timeZone",`the parsed value '${t}' may not be a valid IANA time zone`)}get tools(){return this.toolViewManager?.tools}get initialExtent(){return this.defaultsFromMap?.extent}get cursor(){return this.toolViewManager?.cursor??this._cursor??"default"}set cursor(t){this._cursor=t,this.notifyChange("cursor")}get size(){return[this.width,this.height]}get effectiveTheme(){return this.theme??new ol}whenLayerView(t){return this.layerViewManager?.whenLayerView(t)??Promise.reject()}getDefaultSpatialReference(){return this.defaultsFromMap?.spatialReference}getDefaultHeightModelInfo(){return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??this.defaultsFromMap?.heightModelInfo??null}getDefaultTimeZone(){return null}importLayerView(t){throw new re("importLayerView() not implemented")}hasLayerViewModule(t){return!1}validate(){return A(this,null,function*(){})}loadAsyncDependencies(){return A(this,null,function*(){})}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(t){return this.getSpatialReferenceSupport({spatialReference:t})!=null}when(t,e){return this.isResolved()&&!this.ready&&K.getLogger(this).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(t,e)}forceReadyCycle(){this.ready&&(ri(()=>this.destroyed||this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(t){this.toolViewManager.tools.add(t),this.activeTool=t}tryFatalErrorRecovery(){this.fatalError=null}};W.views=new ae,c([u()],W.prototype,"_userSpatialReference",void 0),c([u()],W.prototype,"activeTool",null),c([u({readOnly:!0})],W.prototype,"allLayerViews",void 0),c([u()],W.prototype,"groundView",void 0),c([u()],W.prototype,"animation",null),c([u()],W.prototype,"basemapView",void 0),c([u()],W.prototype,"center",null),c([u({readOnly:!0})],W.prototype,"_defaultsFromMapSettings",null),c([u()],W.prototype,"defaultsFromMap",null),c([u()],W.prototype,"fatalError",void 0),c([u({type:Vi})],W.prototype,"extent",null),c([u(_d(yd,"graphics"))],W.prototype,"graphics",void 0),c([u(_d(No,"analyses"))],W.prototype,"analyses",void 0),c([u({readOnly:!0,type:ho})],W.prototype,"heightModelInfo",null),c([u({readOnly:!0})],W.prototype,"interacting",null),c([u({readOnly:!0})],W.prototype,"navigating",null),c([u({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_lockedSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],W.prototype,"preconditionsReady",null),c([u({readOnly:!0})],W.prototype,"typeSpecificPreconditionsReady",void 0),c([u({type:ae,readOnly:!0})],W.prototype,"layerViews",void 0),c([u()],W.prototype,"resolution",null),c([u({type:xu})],W.prototype,"magnifier",void 0),c([u({value:null,type:il})],W.prototype,"map",null),c([u()],W.prototype,"padding",void 0),c([u({readOnly:!0})],W.prototype,"ready",void 0),c([u({type:er})],W.prototype,"spatialReference",null),c([u()],W.prototype,"spatialReferenceWarningDelay",void 0),c([u()],W.prototype,"stationary",null),c([u({readOnly:!0})],W.prototype,"supportsGround",void 0),c([u({type:Df})],W.prototype,"timeExtent",void 0),c([u({type:String,nonNullable:!0})],W.prototype,"timeZone",null),c([u()],W.prototype,"tools",null),c([u()],W.prototype,"toolViewManager",void 0),c([u({readOnly:!0})],W.prototype,"type",void 0),c([u({type:Number})],W.prototype,"scale",void 0),c([u({readOnly:!0})],W.prototype,"updating",void 0),c([u({readOnly:!0})],W.prototype,"initialExtentRequired",void 0),c([u({readOnly:!0})],W.prototype,"initialExtent",null),c([u()],W.prototype,"cursor",null),c([u({readOnly:!0})],W.prototype,"input",void 0),c([u({type:Nu,nonNullable:!0})],W.prototype,"navigation",void 0),c([u()],W.prototype,"layerViewManager",void 0),c([u()],W.prototype,"analysisViewManager",void 0),c([u()],W.prototype,"selectionManager",void 0),c([u()],W.prototype,"width",void 0),c([u()],W.prototype,"height",void 0),c([u({readOnly:!0})],W.prototype,"resizing",void 0),c([u({value:null,readOnly:!0})],W.prototype,"size",null),c([u({readOnly:!0})],W.prototype,"suspended",void 0),c([u({readOnly:!0})],W.prototype,"viewEvents",void 0),c([u({readOnly:!0})],W.prototype,"persistableViewModels",void 0),c([u()],W.prototype,"_isValid",void 0),c([u()],W.prototype,"_readyCycleForced",void 0),c([u()],W.prototype,"_lockedSpatialReference",void 0),c([u()],W.prototype,"_userTimeZone",void 0),c([u()],W.prototype,"_lockedTimeZone",void 0),c([u({type:ol})],W.prototype,"theme",void 0),c([u({readOnly:!0,type:ol})],W.prototype,"effectiveTheme",null),W=zo=c([D("esri.views.View")],W);var k0=W;function hC(t){return t.layerViews}var Ln=class extends qm{constructor(t){super(t),this.state="running",this.target=null,this._resolver=null}initialize(){this._resolver=Jn(),this.addResolvingPromise(this._resolver.promise)}get done(){return this.state==="finished"||this.state==="stopped"}stop(){this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),this._resolver?.reject(new re("ViewAnimation stopped")))}finish(){this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),this._resolver?.resolve())}update(t,e){e||(e=Am(t)?"waiting-for-target":"running"),this._set("target",t),this._set("state",e)}};c([u({readOnly:!0})],Ln.prototype,"done",null),c([u({readOnly:!0,type:String})],Ln.prototype,"state",void 0),c([u()],Ln.prototype,"target",void 0),Ln=c([D("esri.views.ViewAnimation")],Ln),function(t){t.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}}(Ln||(Ln={}));var Go=Ln;var Gu=class{constructor(e,n,i,r){let s=e.targetGeometry,o=n.targetGeometry;r?typeof r=="string"&&(r=ag(r)||Oa.ease):r=Oa.ease,this.easing=r,this.duration=i,this.sCenterX=s.x,this.sCenterY=s.y,this.sScale=e.scale,this.sRotation=e.rotation,this.tCenterX=o.x,this.tCenterY=o.y,this.tScale=n.scale,this.tRotation=n.rotation,this.dCenterX=this.tCenterX-this.sCenterX,this.dCenterY=this.tCenterY-this.sCenterY,this.dScale=this.tScale-this.sScale,this.dRotation=this.tRotation-this.sRotation,this.dRotation>180?this.dRotation-=360:this.dRotation<-180&&(this.dRotation+=360)}applyRatio(e,n){let i=this.easing(n),r,s,o,a;n>=1?(r=this.tCenterX,s=this.tCenterY,o=this.tRotation,a=this.tScale):(r=this.sCenterX+i*this.dCenterX,s=this.sCenterY+i*this.dCenterY,o=this.sRotation+i*this.dRotation,a=this.sScale+i*this.dScale),e.targetGeometry.x=r,e.targetGeometry.y=s,e.scale=a,e.rotation=o}},Nn=class extends z{constructor(t){super(t),this._animation=null,this.updateFunction=null,this.duration=200,this.transition=null,this.easing=Oa.ease,this.view=null,this.viewpoint=new Ci({targetGeometry:new ze,scale:0,rotation:0}),this._updateTask=bi({postRender:this._postRender.bind(this)}),this._updateTask.pause()}destroy(){this._updateTask=rt(this._updateTask)}get animation(){return this._animation}set animation(t){this._animation=t,this.view&&(this.view.animation=t)}animate(t,e,n){this.stop();let i=this.viewpoint;is(i,e),this.transition=new Gu(this.viewpoint,t.target,n?.duration||this.duration,n?.easing||this.easing);let r=()=>{this.animation===t&&this._updateTask&&(t.state==="finished"&&(this.transition?.applyRatio(this.viewpoint,1),this.view?.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return t.when(r,r),this._startTime=performance.now(),this._updateTask.resume(),this.animation=t,t}animateContinous(t,e){this.stop(),this.updateFunction=e,this.viewpoint=t;let n=new Go({target:t.clone()}),i=()=>{this.animation===n&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return n.when(i,i),this._startTime=performance.now(),this._updateTask.resume(),this.animation=n,n}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(t){let e=this.animation;if(e&&e.state!==Go.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,t.deltaTime);else{let n=this.transition,i=(performance.now()-this._startTime)/n.duration,r=i>=1;n.applyRatio(this.viewpoint,i),r&&this.animation?.finish()}this.view?.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};c([u()],Nn.prototype,"duration",void 0),c([u()],Nn.prototype,"transition",void 0),c([u()],Nn.prototype,"easing",void 0),c([u()],Nn.prototype,"view",void 0),c([u()],Nn.prototype,"viewpoint",void 0),Nn=c([D("esri.views.2d.AnimationManager")],Nn);var R0=Nn;var hl=class{constructor(e){this.view=e,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this.stationary=!0,this.animationInProgress=!1,this.prepare=()=>{this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions)},this.update=()=>{if(this._updateRequested=!1,this.view?.destroyed)return;let{allLayerViews:n,graphicsView:i,labelManager:r,state:{id:s}}=this.view;n.forEach(this._updateLayerView,this),r!=null&&(r.lastUpdateId!==s&&(r.viewChange(),r.lastUpdateId=s),r.updateRequested&&r.processUpdate(this._updateParameters)),i!=null&&(i.lastUpdateId!==s&&(i.viewChange(),i.lastUpdateId=s),i.updateRequested&&i.processUpdate(this._updateParameters)),this.view.graphicsTileStore.setViewState(this._updateParameters.state),this.animationInProgress||this._updateRequested||this._frameTaskHandle?.pause()}}destroy(){this.stop()}start(){if(this._frameTaskHandle)return;let e=this.view;this.stationary=e.stationary,this._updateParameters={state:e.state,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:e.renderingOptions},this._stationaryHandle=R(()=>e.stationary,n=>{this.stationary=n,this.requestFrame()}),this._frameTaskHandle=bi(this),this.requestUpdate()}stop(){this._frameTaskHandle&&(this._updateRequested=!1,this._stationaryHandle?.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(e){if(!e.attached)return void this.requestUpdate();let n=this.view.state,i=e.lastUpdateId;i!=null&&(this.stationary||e.moving)||(e.moving=!0,e.moveStart()),i!==n.id&&e.viewChange(),this.stationary&&e.moving&&(e.moving=!1,e.moveEnd()),e.lastUpdateId=n.id,e.updateRequested&&e.processUpdate(this._updateParameters),"layerViews"in e&&e.layerViews?.forEach(this._updateLayerView,this)}};var jo=class extends z{constructor(t){super(t),this._gotoTask=null}destroy(){this._gotoTask=null}goTo(t,e){return A(this,null,function*(){if(!t)return void K.getLogger(this).error("#goTo()","target cannot be null or undefined");let n=new Go;this.view.animation=n,yield Li(()=>this.view.ready,e);let i=I({animate:!0},e),{extent:r,spatialReference:s,size:o,viewpoint:a,constraints:l,padding:d,allLayerViews:h}=this.view,p=Gg(t,{extent:r,spatialReference:s,size:o,viewpoint:a,constraints:l,padding:d,allLayerViews:h,pickClosestTarget:e?.pickClosestTarget??!0});return n?.update(p),this._gotoTask={},i.animate?this._gotoAnimated(p,i):this._gotoImmediate(p,i)})}_gotoImmediate(t,e){let n=this._gotoTask,i=this.view.animation,r=t.then(s=>{if(Mt(e),n!==this._gotoTask)throw new re("view:goto-interrupted","Goto was interrupted");this.view.viewpoint=i.target=s,i.finish()});return this._cancellableGoTo(n,i,r,e)}_gotoAnimated(t,e){let n=this._gotoTask,i=this.view.animation;if(!i)return Promise.resolve();let r=t.then(s=>{if(Mt(e),n!==this._gotoTask)throw new re("view:goto-interrupted","Goto was interrupted");return i.update(s),this.view.animationManager.animate(i,this.view.viewpoint,e),i.when().then(()=>{},()=>{})});return this._cancellableGoTo(n,i,r,e)}_cancellableGoTo(t,e,n,i){let r=()=>t===this._gotoTask;return xm(n,i).finally(()=>{r()&&(e.done||e.stop())})}};c([u({constructOnly:!0})],jo.prototype,"view",void 0),jo=c([D("esri.views.2d.GoToManager")],jo);function xe(){return Promise.all([import("./chunk-L4D5ET7P.js"),import("./chunk-DQHN6KA5.js")])}var $o=()=>xe().then(()=>import("./chunk-44IVTXBV.js")),fs=()=>xe().then(()=>import("./chunk-7CRIDYXK.js")),A0={"base-dynamic":()=>xe().then(()=>import("./chunk-4ZZN4UQW.js")),"base-tile":$o,"bing-maps":$o,catalog:()=>xe().then(()=>import("./chunk-L3FOX5AW.js")),"catalog-dynamic-group":()=>xe().then(()=>import("./chunk-DHH6LUBU.js")),"catalog-footprint":()=>xe().then(()=>import("./chunk-V7OY3QQ4.js")),csv:fs,"geo-rss":()=>xe().then(()=>import("./chunk-PFHU2LKB.js")),feature:fs,geojson:fs,graphics:()=>xe().then(()=>import("./chunk-66JDR6D5.js")),group:()=>xe().then(()=>import("./chunk-ARPPNXDM.js")),imagery:()=>xe().then(()=>import("./chunk-ROLF3IP3.js")),"imagery-tile":()=>xe().then(()=>import("./chunk-L7P4BSS7.js")),kml:()=>xe().then(()=>import("./chunk-DM4WV23I.js")),"knowledge-graph":()=>xe().then(()=>import("./chunk-GLPCHLMS.js")),"link-chart":()=>xe().then(()=>import("./chunk-GLPCHLMS.js")),"knowledge-graph-sublayer":fs,"map-image":()=>xe().then(()=>import("./chunk-WLJKXTKA.js")),"map-notes":()=>xe().then(()=>import("./chunk-EH7BDR7J.js")),media:()=>xe().then(()=>import("./chunk-PAMYZNRR.js")),"ogc-feature":()=>xe().then(()=>import("./chunk-KPTXHGFB.js")),"open-street-map":$o,"oriented-imagery":fs,route:()=>xe().then(()=>import("./chunk-23L6KWHJ.js")),stream:()=>xe().then(()=>import("./chunk-ILSB7ZBM.js")),"subtype-group":()=>xe().then(()=>import("./chunk-LM3D2Z2X.js")),tile:$o,"vector-tile":()=>xe().then(()=>import("./chunk-RGNWIHGU.js")),video:()=>xe().then(()=>import("./chunk-IL5Z5YG6.js")),wcs:()=>xe().then(()=>import("./chunk-L7P4BSS7.js")),"web-tile":$o,wfs:fs,wms:()=>xe().then(()=>import("./chunk-RTF3XXOH.js")),wmts:()=>xe().then(()=>import("./chunk-IJCVJXBB.js")),"line-of-sight":null,"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"integrated-mesh":null,"integrated-mesh-3dtiles":null,"point-cloud":null,voxel:null,scene:null,unknown:null,unsupported:null};function pC(t){let e=t.declaredClass?t.declaredClass.slice(t.declaredClass.lastIndexOf(".")+1):"Unknown",n=e.replaceAll(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new re(`${n}:view-not-supported`,`${e} is not supported in 2D`)}var ju={hasLayerViewModule:t=>A0[t.type]!=null,importLayerView:t=>{let e=A0[t.type];if(e==null)throw pC(t);return e(t)}};function F0(t,e){let{spatialReference:n}=e,i=[e.x,e.y],r=Number.POSITIVE_INFINITY,s=0,o=0,a=[0,0],l=t.type==="extent"?[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]]:t.rings;for(let d of l)for(let h=0;h<d.length-1;h++){cf(a,i,d,h);let p=Bf(i,a);p<r&&(r=p,s=a[0],o=a[1])}return{coordinate:new ze({x:s,y:o,spatialReference:n}),distance:r}}var $u,Vn=$u=class extends Jr(z){constructor(t){super(t),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(this.geometry==null||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return Xr(this.geometry,this.spatialReference)}catch(t){return K.getLogger(this).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:t}),null}return this.geometry}constrain(t,e){if(this.normalizedGeometry==null)return t;let n=t.targetGeometry;if(this.normalizedGeometry.type==="extent"?Ea(this.normalizedGeometry,n):lf(this.normalizedGeometry,n))return t;let{coordinate:i}=F0(this.normalizedGeometry,n);return i&&(t.targetGeometry=i),t}clone(){return new $u({geometry:this.geometry?.clone(),spatialReference:this.spatialReference?.clone()})}};c([u({constructOnly:!0})],Vn.prototype,"geometry",void 0),c([u({readOnly:!0})],Vn.prototype,"normalizedGeometry",null),c([u({constructOnly:!0})],Vn.prototype,"spatialReference",void 0),Vn=$u=c([D("esri.views.2d.constraints.GeometryConstraint")],Vn);var Uu,Uo=Uu=class extends Jr(z){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(t,e){return this.enabled&&e&&(this.rotationEnabled||(t.rotation=e.rotation)),t}clone(){return new Uu({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};c([u()],Uo.prototype,"enabled",void 0),c([u()],Uo.prototype,"rotationEnabled",void 0),Uo=Uu=c([D("esri.views.2d.constraints.RotationConstraint")],Uo);var Wu=Uo;var qu,zt=qu=class extends Jr(z){constructor(t){super(t),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let t,{lods:e,minScale:n,maxScale:i,minZoom:r,maxZoom:s}=this,o=-1,a=-1,l=!1,d=!1;if(n!==0&&i!==0&&n<i&&([n,i]=[i,n]),!e?.length)return this._set("effectiveMinScale",n),void this._set("effectiveMaxScale",i);e=e.map(h=>h.clone()),e.sort((h,p)=>p.scale-h.scale),e.forEach((h,p)=>h.level=p);for(let h of e)!l&&n>0&&n>=h.scale&&(o=h.level,l=!0),!d&&i>0&&i>=h.scale&&(a=t?t.level:-1,d=!0),t=h;r===-1&&(r=n===0?0:o),s===-1&&(s=i===0?e.length-1:a),r=Math.max(r,0),r=Math.min(r,e.length-1),s=Math.max(s,0),s=Math.min(s,e.length-1),r>s&&([r,s]=[s,r]),n=e[r].scale,i=e[s].scale,e.splice(0,r),e.splice(s-r+1,e.length),e.forEach((h,p)=>{this._lodByScale[h.scale]=h,this._scales[p]=h.scale}),this._set("effectiveLODs",e),this._set("effectiveMinZoom",r),this._set("effectiveMaxZoom",s),this._set("effectiveMinScale",n),this._set("effectiveMaxScale",i)}constrain(t,e){if(e&&t.scale===e.scale)return t;let n=this.effectiveMinScale,i=this.effectiveMaxScale,r=t.targetGeometry,s=e&&e.targetGeometry,o=i!==0&&t.scale<i,a=n!==0&&t.scale>n;if(o||a){let l=a?n:i;if(e&&s){let d=(l-e.scale)/(t.scale-e.scale);r.x=s.x+(r.x-s.x)*d,r.y=s.y+(r.y-s.y)*d}t.scale=l}return this.snapToZoom&&this.effectiveLODs&&(t.scale=this._getClosestScale(t.scale)),t}fit(t){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(t,null);let e=this.scaleToZoom(t.scale),n=Math.abs(e-Math.floor(e));return t.scale=this.zoomToScale(n>.99?Math.round(e):Math.floor(e)),t}zoomToScale(t){if(!this.effectiveLODs)return 0;t-=this.effectiveMinZoom,t=Math.max(0,t);let e=this._scales;if(t<=0)return e[0];if(t>=e.length)return e[e.length-1];let n=Math.round(t-.5),i=Math.round(t);return e[i]+(i-t)*(e[n]-e[i])}scaleToZoom(t){if(!this.effectiveLODs)return-1;let e=this._scales,n,i;if(t>=e[0])return this.effectiveMinZoom;if(t<=e[e.length-1])return this.effectiveMaxZoom;for(let r=0;r<e.length-1;r++){if(n=e[r],i=e[r+1],i===t)return r+this.effectiveMinZoom+1;if(n>t&&i<t)return r+this.effectiveMinZoom+1-(t-i)/(n-i)}return-1}snapToClosestScale(t){if(!this.effectiveLODs)return t;let e=this.scaleToZoom(t);return this.zoomToScale(Math.round(e))}snapToNextScale(t,e=.5){if(!this.effectiveLODs)return t*e;let n=Math.round(this.scaleToZoom(t));return this.zoomToScale(n+1)}snapToPreviousScale(t,e=2){if(!this.effectiveLODs)return t*e;let n=Math.round(this.scaleToZoom(t));return this.zoomToScale(n-1)}clone(){return new qu({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(t){return this._lodByScale[t]||(t=this._scales.reduce((e,n)=>Math.abs(n-t)<=Math.abs(e-t)?n:e,this._scales[0])),this._lodByScale[t].scale}};c([u({readOnly:!0})],zt.prototype,"effectiveLODs",void 0),c([u({readOnly:!0})],zt.prototype,"effectiveMinZoom",void 0),c([u({readOnly:!0})],zt.prototype,"effectiveMaxZoom",void 0),c([u({readOnly:!0})],zt.prototype,"effectiveMinScale",void 0),c([u({readOnly:!0})],zt.prototype,"effectiveMaxScale",void 0),c([u()],zt.prototype,"lods",void 0),c([u()],zt.prototype,"minZoom",void 0),c([u()],zt.prototype,"maxZoom",void 0),c([u()],zt.prototype,"minScale",void 0),c([u()],zt.prototype,"maxScale",void 0),c([u()],zt.prototype,"snapToZoom",void 0),zt=qu=c([D("esri.views.2d.constraints.ZoomConstraint")],zt);var Yu=zt;var mC={base:null,key:"type",typeMap:{extent:Vi,polygon:id}},je=class extends z{constructor(t){super(t),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0,this.customConstraints=new ae}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(t){t?this._set("geometry",t):this._set("geometry",null)}get version(){return`${this._zoom?.uid}/${this._rotation?.uid}/${this._geometry?.uid}`}get _geometry(){let t=this._get("_geometry");return t&&this.geometry===t.geometry&&this.view?.constraintsInfo.spatialReference===t.spatialReference?t:new Vn({geometry:this.geometry,spatialReference:this.view?.constraintsInfo.spatialReference})}get _rotation(){return new Wu({rotationEnabled:this.rotationEnabled})}get _zoom(){let t=this._get("_zoom"),e=this.lods||this.view?.constraintsInfo.lods,n=this.minZoom,i=this.maxZoom,r=this.minScale,s=this.maxScale,o=this.snapToZoom;return t&&t.lods===e&&t.minZoom===n&&t.maxZoom===i&&t.minScale===r&&t.maxScale===s&&t.snapToZoom===o?t:new Yu({lods:e,minZoom:n,maxZoom:i,minScale:r,maxScale:s,snapToZoom:o})}canZoomInTo(t){let e=this.effectiveMaxScale;return e===0||t>=e}canZoomOutTo(t){let e=this.effectiveMinScale;return e===0||t<=e}constrain(t,e){return this._zoom.constrain(t,e),this._rotation.constrain(t,e),this._geometry.constrain(t,e),this.customConstraints.forEach(n=>n.constrain(t,e)),t}constrainByGeometry(t){return this._geometry.constrain(t),this.customConstraints.forEach(e=>e.applyPanConstraint?.(t)),t}fit(t){return this._zoom.fit(t)}zoomToScale(t){return this._zoom.zoomToScale(t)}scaleToZoom(t){return this._zoom.scaleToZoom(t)}snapScale(t){return this._zoom.snapToClosestScale(t)}snapToNextScale(t){return this._zoom.snapToNextScale(t)}snapToPreviousScale(t){return this._zoom.snapToPreviousScale(t)}};c([u({readOnly:!0})],je.prototype,"effectiveLODs",null),c([u({readOnly:!0})],je.prototype,"effectiveMinScale",null),c([u({readOnly:!0})],je.prototype,"effectiveMaxScale",null),c([u({readOnly:!0})],je.prototype,"effectiveMinZoom",null),c([u({readOnly:!0})],je.prototype,"effectiveMaxZoom",null),c([u({types:mC,value:null})],je.prototype,"geometry",null),c([u({type:[Cf]})],je.prototype,"lods",void 0),c([u()],je.prototype,"minScale",void 0),c([u()],je.prototype,"maxScale",void 0),c([u()],je.prototype,"minZoom",void 0),c([u()],je.prototype,"maxZoom",void 0),c([u()],je.prototype,"rotationEnabled",void 0),c([u()],je.prototype,"snapToZoom",void 0),c([u({type:ae})],je.prototype,"customConstraints",void 0),c([u()],je.prototype,"view",void 0),c([u({readOnly:!0})],je.prototype,"version",null),c([u({type:Vn,readOnly:!0})],je.prototype,"_geometry",null),c([u({type:Wu})],je.prototype,"_rotation",null),c([u({readOnly:!0,type:Yu})],je.prototype,"_zoom",null),je=c([D("esri.views.2d.MapViewConstraints")],je);var Zu=je;function fC(t){return t instanceof Float32Array&&t.length>=2}function gC(t){return Array.isArray(t)&&t.length>=2}function Wo(t){return fC(t)||gC(t)}var Ku,Et=[0,0],Bn=Ku=class extends qr{constructor(t){super(t),this._viewpoint2D={center:xa(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new Vi,this.id=0,this.inverseTransform=Fa(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=Fa(),this.transformNoRotation=Fa(),this.displayMat3=La(),this.displayViewMat3=La(),this.viewMat3=La(),this.viewMat2d=eg(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(t){this._set("pixelRatio",t),this._update()}set size(t){this._set("size",t),this._update()}set viewpoint(t){if(t){let e=this._viewpoint2D,n=t.targetGeometry;e.center[0]=n.x,e.center[1]=n.y,e.rotation=t.rotation,e.scale=t.scale,e.spatialReference=n.spatialReference}this._update()}copy(t){let e=this.size,n=this.viewpoint;return n&&e?(this.viewpoint=is(n,t.viewpoint),this._set("size",mo(e,t.size))):(this.viewpoint=t.viewpoint.clone(),this._set("size",[t.size[0],t.size[1]])),this._set("pixelRatio",t.pixelRatio),this}clone(){return new Ku({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(t,e,n){return Wo(e)?En(t,e,this.inverseTransform):(Et[0]=e,Et[1]=n,En(t,Et,this.inverseTransform))}toScreen(t,e,n){return Wo(e)?En(t,e,this.transform):(Et[0]=e,Et[1]=n,En(t,Et,this.transform))}toScreenNoRotation(t,e,n){return Wo(e)?En(t,e,this.transformNoRotation):(Et[0]=e,Et[1]=n,En(t,Et,this.transformNoRotation))}toScreenClosest(t,e,n){Wo(e)?(Et[0]=e[0],Et[1]=e[1]):(Et[0]=e,Et[1]=n);let[i]=Et,{center:r,extent:s,spatialReference:o,transform:a}=this;return(i<s.xmin||i>s.xmax)&&(Et[0]=Lf(i,r[0],o)),En(t,Et,a)}getScreenTransform(t,e){let{center:n}=this._viewpoint2D,i=this._get("pixelRatio")||1,r=this._get("size");return Wg(t,n,r,e,0,i),t}_update(){let{center:t,spatialReference:e,scale:n,rotation:i}=this._viewpoint2D,r=this._get("pixelRatio")||1,s=this._get("size"),o=new Ci({targetGeometry:new ze(t[0],t[1],e),scale:n,rotation:i});if(this._set("viewpoint",o),!s||!e||!n)return;this.resolution=Ug(o),this.rotation=i,this.scale=n,this.spatialReference=e,mo(this.center,t);let a=s[0]!==0?2/s[0]:0,l=s[1]!==0?-2/s[1]:0;zf(this.displayMat3,a,0,0,0,l,0,-1,1,1);let d=Gf(this.viewMat3),h=ad(s[0]/2,s[1]/2),p=ad(-s[0]/2,-s[1]/2),m=df(i);sd(d,d,h),$f(d,d,m),sd(d,d,p),jf(this.displayViewMat3,this.displayMat3,d);let f=Xf(this.viewMat2d,h);return Qf(f,f,m),Jf(f,f,p),jg(this.extent,o,s),qg(this.transform,o,s,r),Kf(this.inverseTransform,this.transform),Yg(this.transformNoRotation,o,s,r),this.worldScreenWidth=Zg(this.spatialReference,this.resolution),this._set("id",this.id+1),this}};c([u({readOnly:!0})],Bn.prototype,"id",void 0),c([u({value:1,json:{write:!0}})],Bn.prototype,"pixelRatio",null),c([u({json:{write:!0}})],Bn.prototype,"size",null),c([u()],Bn.prototype,"spatialReference",void 0),c([u({type:Ci,json:{write:!0}})],Bn.prototype,"viewpoint",null),Bn=Ku=c([D("esri.views.2d.ViewState")],Bn);var Qu=Bn;var Ju,Xu,cn=Ju=class extends z{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new Ju({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};c([u()],cn.prototype,"left",void 0),c([u()],cn.prototype,"top",void 0),c([u()],cn.prototype,"right",void 0),c([u()],cn.prototype,"bottom",void 0),cn=Ju=c([D("esri.views.2d.PaddedViewState.Padding")],cn);var gs=Xu=class extends Qu{constructor(...t){super(...t),this.paddedViewState=new Qu,this._updateContent=(()=>{let e=xa();return()=>{let n=this._get("size"),i=this._get("padding");if(!n||!i)return;let r=this.paddedViewState;Nf(e,i.left+i.right,i.top+i.bottom),Vf(e,n,e),mo(r.size,e);let s=r.viewpoint;s&&(this.viewpoint=s)}})(),this.addHandles(R(()=>[this.size,this.padding],()=>this._updateContent(),tn)),this.padding=new cn,this.size=[0,0]}set padding(t){this._set("padding",t||new cn)}set viewpoint(t){if(t){let e=t.clone();this.paddedViewState.viewpoint=t,Qg(e,t,this._get("size"),this._get("padding"));let n=this._viewpoint2D,i=e.targetGeometry;n.center[0]=i.x,n.center[1]=i.y,n.rotation=e.rotation,n.scale=e.scale,n.spatialReference=i.spatialReference,this._update()}}clone(){return new Xu({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};c([u()],gs.prototype,"paddedViewState",void 0),c([u({type:cn})],gs.prototype,"padding",null),c([u()],gs.prototype,"viewpoint",null),gs=Xu=c([D("esri.views.2d.PaddedViewState")],gs);var P0=gs;var xt=class extends z{constructor(t){super(t),this.constraints=null,this.ready=!1,this.resizeAlign="center",this.addHandles([R(()=>this.constraints?.version,e=>{this.constraints&&e&&this.ready&&(this.state.viewpoint=this.constraints.fit(this.state.paddedViewState.viewpoint))},tn)])}get center(){if(!this.ready)return this._get("center");let{center:t,spatialReference:e}=this.state.paddedViewState;return this.state.commitProperty("id"),new ze({x:t[0],y:t[1],spatialReference:e})}set center(t){if(t==null)return;if(!this.ready)return void this._set("center",t);let e;try{e=this._project(t,this.state.spatialReference)}catch(i){return void K.getLogger(this).error(new re("mapview:invalid-center","could not project the value in the view's spatial reference",{input:t,error:i}))}let n=this.viewpoint;Cd(n,n,e),this.viewpoint=n}get extent(){return this.ready?(this.state.commitProperty("id"),this.state.paddedViewState.extent.clone()):this._get("extent")}set extent(t){if(t==null)return;if(!t.width||!t.height)return void K.getLogger(this).error(new re("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",t),this._set("center",void 0),this._set("viewpoint",void 0),this._set("scale",void 0),void this._set("zoom",void 0);let e;try{e=this._project(t,this.state.spatialReference)}catch(i){return void K.getLogger(this).error(new re("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:i}))}let n=this.viewpoint;$g(n,n,e,this.state.size,{constraints:this.constraints}),this.viewpoint=n}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(t){this.ready?(this.state.padding=t,this._set("padding",this.state.padding)):this._set("padding",t)}get resolution(){return this.ready?(this.state.commitProperty("id"),this.state.resolution):0}get rotation(){return this.ready?(this.state.commitProperty("id"),this.state.rotation):this._get("rotation")}set rotation(t){if(isNaN(t))return;if(!this.ready)return void this._set("rotation",t);let e=this.viewpoint;Xg(e,e,t),this.viewpoint=e}get scale(){return this.ready?(this.state.commitProperty("id"),this.state.scale):this._get("scale")}set scale(t){if(!t||isNaN(t))return;if(!this.ready){this._set("scale",t),this._set("zoom",void 0);let n=this._get("extent");return void(n&&(this._set("extent",void 0),this._set("center",n.center)))}let e=this.viewpoint;Sd(e,e,t),this.viewpoint=e}get viewpoint(){return this.ready?this.state.paddedViewState.viewpoint.clone():this._get("viewpoint")}set viewpoint(t){if(t==null)return;if(!this.ready)return this._set("viewpoint",t),this._set("extent",void 0),this._set("center",void 0),this._set("zoom",void 0),void this._set("scale",void 0);let e,n;try{e=this._project(t,this.state.spatialReference),!t.scale||isNaN(t.scale)?n=new re("mapview:invalid-viewpoint",`invalid scale value of ${t.scale}`):t.targetGeometry==null&&(n=new re("mapview:invalid-viewpoint","geometry not defined"))}catch(r){n=new re("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:r})}if(n)return void K.getLogger(this).error(n);this._scaleBeforeChangingSpatialReference=null;let i=new Ci({targetGeometry:new ze,scale:0,rotation:0});is(i,e),this.constraints?.constrain(i,this.state.paddedViewState.viewpoint),this.state.viewpoint=i,this._set("viewpoint",i)}get zoom(){return this.ready?this.constraints?.scaleToZoom(this.scale)??-1:this._get("zoom")}set zoom(t){if(!(t>=0))return;if(!this.ready){this._set("zoom",t),this._set("scale",void 0);let i=this._get("extent");return void(i&&(this._set("extent",void 0),this._set("center",i.center)))}let e=this.constraints?.zoomToScale(t)??0;if(!e)return void this._set("zoom",-1);let n=this.viewpoint;Sd(n,n,e),this.viewpoint=n,this._set("zoom",this.constraints?.scaleToZoom(this.scale)??-1)}getUserStartupOptions(t){if(!t[0]&&!t[1])return{center:void 0,rotation:void 0,scale:void 0};let{padding:e,constraints:n}=this,i=this._get("center"),r=this._get("extent"),s=this._get("scale"),o=this._get("rotation"),a=this._get("viewpoint"),l=this._get("zoom"),d=l!=null&&n!=null&&n.zoomToScale(l)||void 0,h,p,m,f=a?.rotation,w=a?.targetGeometry;w?.type==="extent"?h=w:w?.type==="point"&&(p=w,m=a?.scale);let M=r??h;return{center:i??p??M?.center,rotation:o??f,scale:(s??d??m??(M&&Pa(M,[t[0]-e.left-e.right,t[1]-e.top-e.bottom])))||void 0}}startup(t,e,n,i){let r=t.targetGeometry;try{this._project(t,n)}catch(s){K.getLogger(this).warn(new Kc("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:r.toJSON(),spatialReference:n,error:s})),t.targetGeometry=i||new ze({x:0,y:0,spatialReference:n})}this.constraints?.fit(t),this._set("state",new P0({padding:this.padding,size:e,viewpoint:t})),this._set("ready",!0)}teardown(){this._set("ready",!1);let{center:[t,e],spatialReference:n,rotation:i,scale:r}=this.state.paddedViewState,s=new ze({x:t,y:e,spatialReference:n});this._set("viewpoint",null),this._set("extent",null),this._set("center",s),this._set("zoom",-1),this._set("rotation",i),this._set("scale",r),this._set("state",null)}changeSpatialReference(t){let e=this.state.paddedViewState.clone();if(this._scaleBeforeChangingSpatialReference==null)this._scaleBeforeChangingSpatialReference=e.scale;else{let a=e.viewpoint.clone();a.scale=this._scaleBeforeChangingSpatialReference,e.viewpoint=a}let n=e.clone(),[i,r]=e.center,s=null;try{s=this._project(new ze({x:i,y:r,spatialReference:e.spatialReference}),t)}catch(a){Xm()||K.getLogger(this).warn(new Kc("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:s?.toJSON(),spatialReference:t,error:a}))}s||(s=new ze({x:0,y:0,spatialReference:t}));let o=Cd(new Ci({targetGeometry:new ze,scale:0,rotation:0}),e.viewpoint,s);n.viewpoint=o;try{let l=[e.size[0]/2,e.size[1]/2],d=[l[0]+20,l[1]],h=e.toMap([0,0],d),{x:p,y:m}=this._project(new ze({x:h[0],y:h[1],spatialReference:e.spatialReference}),t);h[0]=p,h[1]=m,n.toScreen(h,h);let f=Kg(l,h,d),w=Math.hypot(h[0]-l[0],h[1]-l[1])/20;!Number.isFinite(w)||Math.abs(w)>4?(o.rotation=0,o.targetGeometry=new ze({x:0,y:0,spatialReference:t})):(o.scale*=w,o.scale>ut("mapview-srswitch-adjust-rotation-scale-threshold")?o.rotation=0:o.rotation+=Number.isFinite(f)?f:0)}catch{}this._get("constraints")?.constrain(o,void 0),this._get("state").viewpoint=o}resize(t,e){if(!this.ready)return;let n=this.state,i=this.state.paddedViewState.viewpoint,r=this.state.paddedViewState.size.concat();n.size=[t,e],Jg(i,i,r,this.state.paddedViewState.size,this.resizeAlign),i=this.constraints?.constrain(i,void 0)??i,this.state.viewpoint=i}toMap(t){if(!this.ready)return null;let e=[0,0],[n,i]=this.state.toMap(e,[t.x,t.y]),r=this.state.spatialReference;return new ze({x:n,y:i,spatialReference:r})}toScreen(t,e){if(!this.ready)return null;let n=this._project(t,this.state.spatialReference),i=[n.x,n.y];return e?.pickClosestTarget===!1?this.state.toScreen(i,i):this.state.toScreenClosest(i,i),Ce(i[0],i[1])}_project(t,e){let n=t?.targetGeometry||t;if(!e)return t;if(!n)return null;if(e.imageCoordinateSystem||n.spatialReference?.imageCoordinateSystem||uo(e,n.spatialReference))return t;let i=Xr(n,e);if(!i)throw new re("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:n,spatialReference:e});return _C(t)?(t.targetGeometry=i,t):i}};function _C(t){return t?.declaredClass==="esri.Viewpoint"}c([u({type:ze})],xt.prototype,"center",null),c([u()],xt.prototype,"constraints",void 0),c([u({type:Vi})],xt.prototype,"extent",null),c([u({value:{top:0,right:0,bottom:0,left:0},cast:t=>I({top:0,right:0,bottom:0,left:0},t)})],xt.prototype,"padding",null),c([u()],xt.prototype,"ready",void 0),c([u()],xt.prototype,"resizeAlign",void 0),c([u({readOnly:!0})],xt.prototype,"resolution",null),c([u({type:Number})],xt.prototype,"rotation",null),c([u({type:Number})],xt.prototype,"scale",null),c([u({readOnly:!0})],xt.prototype,"state",void 0),c([u({type:Ci})],xt.prototype,"viewpoint",null),c([u()],xt.prototype,"zoom",null),xt=c([D("esri.views.2d.ViewStateManager")],xt);function _s(t,e){switch(e){case"primary":return t.pointerType==="touch"||t.button===0;case"secondary":return t.pointerType!=="touch"&&t.button===2;case"tertiary":return t.pointerType!=="touch"&&t.button===1}}var qo=class extends ce{constructor(e,n){super(!0),this._view=e,this.registerIncoming("double-click",n,i=>this._handleDoubleClick(i,n))}_handleDoubleClick(e,n){_s(e.data,"primary")&&(e.stopPropagation(),n?this._view.mapViewNavigation.zoomOut([e.data.x,e.data.y]):this._view.mapViewNavigation.zoomIn([e.data.x,e.data.y]))}};var pl=class extends ce{constructor(e,n,i){super(!0),this.view=e,this.pointerType=n,this.registerIncoming("double-tap-drag",i,r=>this._handleDoubleTapDrag(r))}_handleDoubleTapDrag(e){let{data:n}=e,{pointerType:i}=n;if(i!==this.pointerType)return;e.stopPropagation();let{action:r,delta:s}=n,{view:o}=this,{mapViewNavigation:a}=o;switch(r){case"begin":{let{scale:l}=o;this._startScale=l,this._currentScale=l,this._previousDelta=s,a.begin();break}case"update":{if(this._previousDelta.y===s.y)return;this._previousDelta=s;let l=1.015**s.y,d=this._startScale*l,h=d/this._currentScale;a.setViewpointImmediate(h),this._currentScale=d;break}case"end":{let{constraints:l}=o,{effectiveLODs:d,snapToZoom:h}=l;if(!h||!d)return void a.end();let p=l.snapScale(this._currentScale),m=(s.y>0?Math.max(p,l.snapToPreviousScale(this._startScale)):Math.min(p,l.snapToNextScale(this._startScale)))/this._currentScale;a.zoom(m);break}}}};var ji=class{constructor(e){this._callbacks=e,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(e){let n=e.data,i=n.pointers.size;switch(n.action){case"start":this._currentCount=i,this._emitStart(e);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=i,this._emitStart(e);break;case"update":this._emitUpdate(e);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=i,this._emitStart(e);break;case"end":this._emitEnd(e),this._currentCount=0}this._previousEvent=e}_emitStart(e){this._startEvent=e,this._callbacks.condition?.(this._currentCount,e)&&this._callbacks.start(this._currentCount,e,this._startEvent)}_emitUpdate(e){this._callbacks.condition?.(this._currentCount,e)&&this._callbacks.update(this._currentCount,e,this._startEvent)}_emitEnd(e){this._callbacks.condition?.(this._currentCount,e)&&this._callbacks.end(this._currentCount,e,this._startEvent),this._startEvent=null}};var ml=class extends ce{constructor(e,n,i){super(!0),this.view=e,this.pointerAction=n,this.registerIncoming("drag",i,r=>this._handleDrag(r)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(e){super.onInstall(e),this._dragEventSeparator=new ji({start:(n,i)=>{this.view.mapViewNavigation.pan.begin(this.view,i.data),i.stopPropagation()},update:(n,i)=>{this.view.mapViewNavigation.pan.update(this.view,i.data),i.stopPropagation()},end:(n,i)=>{this.view.mapViewNavigation.pan.end(this.view,i.data),i.stopPropagation()},condition:(n,i)=>n===1&&_s(i.data,this.pointerAction)})}_handleDrag(e){let n=this.view.mapViewNavigation;n.pinch.zoomMomentum||n.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(e)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}};var fl=class extends ce{constructor(e,n,i){super(!0),this._view=e,this.pointerAction=n;let r=this._view.mapViewNavigation;this._dragEventSeparator=new ji({start:(s,o)=>{r.rotate.begin(this._view,o.data),o.stopPropagation()},update:(s,o)=>{r.rotate.update(this._view,o.data),o.stopPropagation()},end:(s,o)=>{r.rotate.end(),o.stopPropagation()},condition:(s,o)=>s===1&&_s(o.data,this.pointerAction)}),this.registerIncoming("drag",i,s=>this._dragEventSeparator.handle(s))}};function Mi(t){let e=t*t;return t<0&&(e*=-1),e}function L0(t){return t.translation[0]=0,t.translation[1]=0,t.translation[2]=0,t.heading=0,t.tilt=0,t}function N0(t,e,n){let i=n,r=t.state,s=t.device,o=e.tiltDirection==="forward-down"?1:-1,a=1;return s.deviceType==="standard"?(i.translation[0]=Mi(r.axes[0]),i.translation[1]=Mi(r.axes[1]),i.translation[2]=Mi(r.buttons[7])-Mi(r.buttons[6]),i.heading=Mi(r.axes[2]),i.tilt=Mi(r.axes[3])):s.deviceType==="spacemouse"&&(i.translation[0]=1.2*Mi(r.axes[0]),i.translation[1]=1.2*Mi(r.axes[1]),i.translation[2]=2*-Mi(r.axes[2]),i.heading=1.2*Mi(r.axes[5]),i.tilt=1.2*Mi(r.axes[3])),i.tilt*=o,uf(i.translation,i.translation,a),i}function V0(t){return t.translation[0]===0&&t.translation[1]===0&&t.translation[2]===0&&t.heading===0&&t.tilt===0&&t.zoom===0}var gl=class extends ce{constructor(e){super(!0),this._view=e,this._frameTask=null,this._watchHandles=new wa,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",n=>this._handleGamePadEvent(n)),this._handle.pause()}onInstall(e){super.onInstall(e),this._watchHandles.add([R(()=>this._view.navigation.gamepad?.enabled,n=>{n?(this._handle.resume(),this._frameTask||(this._frameTask=bi({update:i=>this._frameUpdate(i.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},le)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(e){let n=this._view.navigation.gamepad.device;n&&e.data.device!==n||this._currentDevice&&this._currentDevice!==e.data.device||(e.data.action==="end"?(this._currentDevice=null,L0(this._transformation)):(this._currentDevice=e.data.device,N0(e.data,this._view.navigation.gamepad,this._transformation)))}_frameUpdate(e){let n=this._transformation;if(V0(n))return;let i=this._view.viewpoint.clone(),r=this._view.navigation.gamepad.velocityFactor,s=vC*r*e;t_(i,i,[n.translation[0]*s,-n.translation[1]*s]);let o=1+n.translation[2]*bC*e,a=this._view.constraints.rotationEnabled?-n.heading*yC*e:0,l=this._view.size,d=[l[0]/2,l[1]];e_(i,i,o,a,d,l);let h=this._view.constraints.constrain(i,this._view.viewpoint);this._view.viewpoint=h}},yC=.06,vC=.7,bC=6e-4;function _l(t){let e=()=>t(document.visibilityState==="visible");return document.addEventListener("visibilitychange",e),{remove:()=>document.addEventListener("visibilitychange",e)}}var yl=class extends ce{constructor(e,n,i){super(!0),this.view=e,this.keys=n,this._isSticky=!1,this._pressedKeys=new Set,this._timeout=void 0,this._currentDirection=void 0,this._stickyKeyDuration=200,this._handleKey=r=>{let s=this._keyMap[r.data.key];if(r.modifiers.has("Meta")||r.modifiers.has("Ctrl"))return void this._stopMovement();if(s==null)return;r.stopPropagation(),r.preventDefault();let o=r.type==="key-down";if(this._pressedKeys[o?"add":"delete"](s),o){if(this._direction===s)return;this._direction=s,this._isSticky=!1,this._setTimeout(()=>{this._isSticky&&this._handlePopKey()})}else{let a=this._timeout===void 0,l=this._pressedKeys.size>0;a||l?this._handlePopKey():this._isSticky=!0}},this._handlePopKey=()=>{this._direction=Array.from(this._pressedKeys).pop(),this._direction==null&&this._stopMovement()},this._stopMovement=()=>{this._isSticky=!1,this._direction=void 0,this._pressedKeys.clear(),this._setTimeout(void 0)},this._keyMap={[n.left]:"left",[n.right]:"right",[n.up]:"up",[n.down]:"down"},this.registerIncoming("key-down",i,this._handleKey),this.registerIncoming("key-up",i,this._handleKey),this.registerIncoming("blur",i,this._stopMovement),this._visibilityHandle=_l(r=>r?null:this._stopMovement())}onUninstall(){this._stopMovement(),this._visibilityHandle?.remove()}get _direction(){return this._currentDirection}set _direction(e){let n=this._currentDirection!=null;if(e!=null){if(n||this.view.mapViewNavigation.begin(),this._currentDirection!==e)switch(e){case"left":this.view.mapViewNavigation.continousPanLeft();break;case"right":this.view.mapViewNavigation.continousPanRight();break;case"up":this.view.mapViewNavigation.continousPanUp();break;case"down":this.view.mapViewNavigation.continousPanDown()}}else n&&this.view.mapViewNavigation.stop();this._currentDirection=e}_setTimeout(e){clearTimeout(this._timeout),this._timeout=e===void 0?void 0:setTimeout(()=>{this._timeout=void 0,e()},this._stickyKeyDuration)}};var vl=class extends ce{constructor(e,n,i){super(!0),this.view=e,this.keys=n,this._pressed=!1,this._keyToDirection={[n.clockwiseOption1]:"clockwise",[n.clockwiseOption2]:"clockwise",[n.counterClockwiseOption1]:"counterClockwise",[n.counterClockwiseOption2]:"counterClockwise",[n.resetOption1]:"reset",[n.resetOption2]:"reset"},this.registerIncoming("key-down",i,r=>this._handleKeyDown(r)),this.registerIncoming("key-up",i,r=>this._handleKeyUp(r)),this.registerIncoming("blur",i,()=>this._handleStop()),this._visibilityHandle=_l(r=>r?null:this._handleStop())}onUninstall(){this._visibilityHandle?.remove(),this._handleStop()}_handleKeyDown(e){e.data.repeat||this._handleKey(e,!0)}_handleKeyUp(e){this._handleKey(e,!1)}_handleStop(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(e,n){let i=e.modifiers;if(i.size>0&&!i.has("Shift")||!this.view.constraints.rotationEnabled)return;let r=this._keyToDirection[e.data.key];if(this._pressed=r!=null,this._pressed){if(e.preventDefault(),n)switch(this.view.mapViewNavigation.begin(),r){case"clockwise":this.view.mapViewNavigation.continousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();e.stopPropagation()}}};var ys;(function(t){t[t.IN=0]="IN",t[t.OUT=1]="OUT"})(ys||(ys={}));var bl=class extends ce{constructor(e,n,i){super(!0),this.view=e,this.keys=n,this._keysToZoomAction={},this.registerIncoming("key-down",i,r=>this._handleKeyDown(r)),n.zoomIn.forEach(r=>this._keysToZoomAction[r]=ys.IN),n.zoomOut.forEach(r=>this._keysToZoomAction[r]=ys.OUT)}_handleKeyDown(e){this._handleKey(e)}_handleKey(e){let n=e.modifiers;if(n.size>0&&!n.has("Shift"))return;let{key:i}=e.data;if(!(i in this._keysToZoomAction))return;let r=this._keysToZoomAction[i],{mapViewNavigation:s}=this.view,o=null;switch(r){case ys.IN:o=s.zoomIn();break;case ys.OUT:o=s.zoomOut();break;default:return}s.begin(),o.then(()=>s.end()),e.stopPropagation()}};var wC=.6,wl=class extends ce{constructor(e,n){super(!0),this._view=e,this._canZoom=!0,this.registerIncoming("mouse-wheel",n,i=>this._handleMouseWheel(i))}_handleMouseWheel(e){if(!this._view.navigation.mouseWheelZoomEnabled||(e.preventDefault(),e.stopPropagation(),!this._canZoom))return;let n=this._view.mapViewNavigation,{x:i,y:r,deltaY:s}=e.data,o=1/wC**(1/60*s),a=n.zoom(o,[i,r]);a&&(this._canZoom=!1,a.catch(()=>{}).then(()=>{this._canZoom=!0,n.end()}))}};var Cl=class extends ce{constructor(e){super(!0),this.view=e,this.registerIncoming("drag",i=>this._handleDrag(i)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());let n=this.view.mapViewNavigation;this._dragEventSeparator=new ji({start:(i,r)=>{n.pinch.begin(this.view,r.data),r.stopPropagation()},update:(i,r)=>{n.pinch.update(this.view,r.data),r.stopPropagation()},end:(i,r)=>{n.pinch.end(this.view),r.stopPropagation()},condition:i=>i>=2})}_handleDrag(e){this._dragEventSeparator.handle(e)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}};function eh(t){let e=t.native;return e?{buttons:e.buttons.map(n=>n.pressed?n.value||1:0),axes:e.axes.map(n=>CC(n,t.axisThreshold))}:{buttons:[],axes:[]}}function B0(t,e){if(t.axes.length!==e.axes.length||t.buttons.length!==e.buttons.length)return!1;for(let n=0;n<t.axes.length;n++)if(t.axes[n]!==e.axes[n])return!1;for(let n=0;n<t.buttons.length;n++)if(t.buttons[n]!==e.buttons[n])return!1;return!0}function H0(t){for(let e=0;e<t.axes.length;e++)if(t.axes[e]!==0)return!1;for(let e=0;e<t.buttons.length;e++)if(t.buttons[e]!==0)return!1;return!0}function CC(t,e){let n=Math.abs(t);return n<e?0:Math.sign(t)*(n-e)/(1-e)}var Sl=class{constructor(e,n){this._element=e,this._input=n,this._hasEventListeners=!1,this._onConnectGamepad=s=>{this._connectGamepad(s.gamepad)},this._onDisconnectGamepad=s=>{let o=s.gamepad,a=o.index,l=this._inputDevices[a];l&&(this._emitGamepadEvent(o,eh(l),!1),this._inputDevices.splice(a,1),this._latestUpdate.splice(a,1),this._input.gamepad.devices.remove(l),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;let i="getGamepads"in window.navigator,r=window.isSecureContext;this.supported=i&&r,this.supported&&(this._forEachGamepad(s=>this._connectGamepad(s)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(e){this._hasEventListeners!==e&&(this._hasEventListeners=e,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(e){this._callback=e}_connectGamepad(e){let n=new ms(e);n.deviceType!=="unknown"&&(this._inputDevices[e.index]=n,this._input.gamepad.devices.add(n)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this._frameTask==null&&(this._frameTask=bi({update:()=>this._readGamepadState()}))}_stopPolling(){this._frameTask!=null&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){let e=document.hasFocus(),n=this._element.contains(document.activeElement),i=this._input.gamepad.enabledFocusMode==="document"&&!e||this._input.gamepad.enabledFocusMode==="view"&&!n;this._forEachGamepad(r=>{let s=this._inputDevices[r.index];if(!s)return;let o=this._latestUpdate[r.index],a=eh(s),l=i||H0(a);o&&(o.timestamp===r.timestamp||!o.active&&l||B0(o.state,a))||this._emitGamepadEvent(r,a,!l)})}_forEachGamepad(e){let n=window.navigator.getGamepads();for(let i=0;i<n.length;i++){let r=n[i];this._validate(r)&&e(r)}}_emitGamepadEvent(e,n,i){let r=this._latestUpdate[e.index],s=r&&r.active;if(!s&&!i)return;let o=!s&&i?"start":s&&i?"update":"end";this._latestUpdate[e.index]={timestamp:e.timestamp,state:n,active:i},this._callback&&this._callback({device:this._inputDevices[e.index],state:n,action:o})}_validate(e){if(!e||!e.connected)return!1;for(let n=0;n<e.axes.length;n++)if(isNaN(e.axes[n]))return!1;return!0}};var z0=ut("edge"),SC=ut("chrome"),DC=ut("ff"),TC=ut("safari"),G0="esri-view-surface",vs={touchNone:`${G0}--touch-none`,touchPan:`${G0}--touch-pan`},j0=(()=>{class t{constructor(n,i){this._input=i,this._active={},this._callback=()=>{},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=n,n.getAttribute("tabindex")||n.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new Sl(n,this._input),this._gamepadSource.onEvent=r=>this._callback("gamepad",r)}destroy(){this._callback=()=>{},this.activeEvents=null,this._activePointerCaptures.forEach(n=>{this._releasePointerCaptureSafe(n)}),this._gamepadSource=He(this._gamepadSource),this._activePointerCaptures=null,this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(n){this._browserTouchPanningEnabled=n,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(n){this._callback=n}set activeEvents(n){for(let i in this._active)if(!n||!n.has(i)){let r=this._active[i];this._element.removeEventListener(th[i],r),delete this._active[i]}n&&n.forEach(i=>{if(!this._active[i]&&th[i]){let r=(this._eventHandlers[i]||this._handleDefault).bind(this,i);this._element.addEventListener(th[i],r),this._active[i]=r}}),this._gamepadSource.hasEventListeners=n?.has("gamepad")??!1}setPointerCapture(n,i){i?this._setPointerCatpureSafe(n.pointerId):(this._releasePointerCaptureSafe(n.pointerId),this._activePointerCaptures.delete(n.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?vs.touchNone:vs.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?vs.touchPan:vs.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(vs.touchNone),this._element.classList.remove(vs.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_setPointerCatpureSafe(n){try{this._element.setPointerCapture(n),this._activePointerCaptures.add(n)}catch{}}_releasePointerCaptureSafe(n){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(n))return;this._element.releasePointerCapture(n)}catch{}}_updateNormalizedPointerLikeEvent(n,i){let r=Au(this._element,n);return t.test.disableSubpixelCoordinates&&(r.x=Math.round(r.x),r.y=Math.round(r.y)),i.x=r.x,i.y=r.y,i}_handleKey(n,i){let{key:r}=i;r&&n==="key-up"&&this._keyDownState.delete(r);let s={native:i,key:r,repeat:!!r&&this._keyDownState.has(r)};r&&n==="key-down"&&this._keyDownState.add(s.key),this._callback(n,s)}_handlePointer(n,i){let r=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});this._callback(n,r)}_handlePointerPreventDefault(n,i){let r=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});i.preventDefault(),this._callback(n,r)}_handleMouseWheel(n,i){let r=i.deltaY;switch(i.deltaMode){case 0:z0&&(r=r/document.documentElement.clientHeight*600);break;case 1:r*=30;break;case 2:r*=900}z0?r*=.7:SC||TC?r*=.6:DC&&(r*=1.375);let s=100,o=Math.abs(r);o>s&&(r=r/o*200/(1+Math.exp(-.02*(o-s))));let a=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,deltaY:r});this._callback(n,a)}_handlePointerCaptureLost(n,i){this._activePointerCaptures.delete(i.pointerId),this._handleDefault(n,i)}_handleDefault(n,i){let r={native:i};i.preventDefault(),this._callback(n,r)}_preventAltKeyDefault(n){n.key==="Alt"&&n.preventDefault()}_preventMultiTouchPanning(n){n.touches.length>1&&n.preventDefault()}}return t.test={disableSubpixelCoordinates:!1},t})(),th={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};var Dl=class extends ce{constructor(){super(!0),this.registerIncoming("context-menu",e=>{e.data.native.preventDefault()})}};var Ue={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500,maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};function cr(t,e){return Math.abs(e.x-t.x)+Math.abs(e.y-t.y)}function $0(t,e){let n=e.x-t.x,i=e.y-t.y;return Math.sqrt(n*n+i*i)}function U0(t,e){if(e?(e.radius=0,e.center.x=0,e.center.y=0):e={radius:0,center:Ce()},t.length===0)return e;if(t.length===1)return e.center.x=t[0].x,e.center.y=t[0].y,e;if(t.length===2){let[B,x]=t,[F,P]=[x.x-B.x,x.y-B.y];return e.radius=Math.sqrt(F*F+P*P)/2,e.center.x=(B.x+x.x)/2,e.center.y=(B.y+x.y)/2,e}let n=0,i=0;for(let B=0;B<t.length;B++)n+=t[B].x,i+=t[B].y;n/=t.length,i/=t.length;let r=t.map(B=>B.x-n),s=t.map(B=>B.y-i),o=0,a=0,l=0,d=0,h=0,p=0,m=0;for(let B=0;B<r.length;B++){let x=r[B],F=s[B],P=x*x,X=F*F;o+=P,a+=X,l+=x*F,d+=P*x,h+=X*F,p+=x*X,m+=F*P}let f=.5*(d+p),w=.5*(h+m),M=o*a-l*l,_=(f*a-w*l)/M,S=(o*w-l*f)/M,O=Ce(_+n,S+i);return{radius:Math.sqrt(_*_+S*S+(o+a)/t.length),center:O}}function $i(t){let{native:e}=t,{pointerId:n,button:i,pointerType:r}=e;return r==="mouse"?`${n}:${i}`:`${r}`}var Tl=class extends ce{constructor(e=Ue.maximumDoubleClickDelay,n=Ue.maximumDoubleClickDistance,i=Ue.maximumDoubleTouchDelay,r=Ue.maximumDoubleTouchDistance,s=Fi){super(!1),this._maximumDoubleClickDelay=e,this._maximumDoubleClickDistance=n,this._maximumDoubleTouchDelay=i,this._maximumDoubleTouchDistance=r,this._clock=s,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=Ce(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new ji({start:(o,a)=>this._dragStart(o,a),update:(o,a)=>this._dragUpdate(a),end:(o,a)=>this._dragEnd(a)}),this.registerIncoming("drag",o=>this._dragEventSeparator.handle(o)),this.registerIncoming("pointer-down",o=>this._handlePointerDown(o)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(e=>{e.doubleTapTimeout=rt(e.doubleTapTimeout)})}get hasPendingInputs(){return Mn(this._pointerState,e=>e.doubleTapTimeout!=null)}_clearPointerDown(e){let n=this._pointerState.get(e);n&&(n.doubleTapTimeout=rt(n.doubleTapTimeout),this._pointerState.delete(e),this.refreshHasPendingInputs())}_createDoubleTapDragData(e,n,i){let{button:r,buttons:s,pointer:o,pointers:a,pointerType:l,timestamp:d}=i;return{action:e,delta:n,button:r,buttons:s,pointer:o,pointers:a,pointerType:l,timestamp:d}}_dragStart(e,n){if(!this._doubleTapDragReady||e!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;let{data:i,modifiers:r}=n,{center:s}=i;this._dragStartCenter=s;let o=this._createDoubleTapDragData("begin",Ce(0,0),i);this._doubleTapDrag.emit(o,void 0,r),n.stopPropagation()}_dragUpdate(e){if(!this._doubleTapDragActive)return;let{data:n,modifiers:i}=e,{center:r}=n,s=Ce(r.x-this._dragStartCenter.x,r.y-this._dragStartCenter.y),o=this._createDoubleTapDragData("update",s,n);this._doubleTapDrag.emit(o,void 0,i),e.stopPropagation()}_dragEnd(e){if(!this._doubleTapDragActive)return;let{data:n,modifiers:i}=e,{center:r}=n,s=Ce(r.x-this._dragStartCenter.x,r.y-this._dragStartCenter.y),o=this._createDoubleTapDragData("end",s,n);this._doubleTapDrag.emit(o,void 0,i),this._doubleTapDragActive=!1,e.stopPropagation()}_handlePointerDown(e){let{data:n}=e,i=$i(n),r=this._pointerState.get(i),{pointerType:s}=n.native;if(r){let o=s==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;this._clearPointerDown(i),cr(r.event.data,n)>o?this._storePointerDown(e):this._doubleTapDragReady=!0}else this._storePointerDown(e)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(e){let{data:n}=e,{pointerType:i}=n.native,r=$i(n),s=i==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._clearPointerDown(r),s);this._pointerState.set(r,{event:e,doubleTapTimeout:o}),this.refreshHasPendingInputs()}};var El=class extends ce{constructor(e){super(!1),this._navigationTouch=e,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(e,n,i,r){return{action:e,pointerType:this._pointerType,button:this._mouseButton,buttons:n.buttons,timestamp:r,pointers:MC(this._activePointerMap),pointer:n,angle:i.angle,radius:i.radius,center:i.center}}_addPointer(e){let n=e.native.pointerId,i=Ml(this._activePointerMap).angle,r={event:e,initialAngle:0,lastAngle:0};this._activePointerMap.set(n,r);let s=Il(r,q0(this._activePointerMap));r.initialAngle=s,r.lastAngle=s,this._updatePointerAngles(i)}_updatePointer(e){if(e&&e.x==null&&e.y==null)return;let n=e.native.pointerId,i=this._activePointerMap.get(n);i?i.event=e:this._addPointer(e)}_removePointer(e){let n=Ml(this._activePointerMap).angle;this._activePointerMap.delete(e),this._updatePointerAngles(n)}_updatePointerAngles(e){let n=Ml(this._activePointerMap);this._activePointerMap.forEach(i=>{i.initialAngle=Il(i,n)-e,i.lastAngle=Il(i,n)-e})}_emitEvent(e,n,i){let r=Ml(this._activePointerMap);this._drag.emit(this._createPayload(e,n,r,i),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(e){let n=e.data.native.pointerId,i=e.timestamp;this._activePointerMap.get(n)&&(this._activePointerMap.size===1?(this._updatePointer(e.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",e.data,i),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(n)):(this._removePointer(n),this._emitEvent("removed",e.data,e.timestamp)))}_handlePointerDrag(e){let n=e.data,i=n.currentEvent,r=e.timestamp;switch(n.action){case"start":case"update":this._isDragging?this._activePointerMap.has(i.native.pointerId)?(this._updatePointer(i),!this._isCurrentDragSuppressed&&this._emitEvent("update",i,r)):(this._addPointer(i),this._emitEvent("added",i,r),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(i),this._pointerType=e.data.startEvent.pointerType,this._mouseButton=e.data.startEvent.button,this._startStateModifiers=e.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",i,r))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&this._pointerType==="touch"&&this._activePointerMap.size===1}};function q0(t){let e=[];return t.forEach(n=>{e.push(Ce(n.event.x,n.event.y))}),U0(e)}function Ml(t){let e=q0(t),n=0;return t.forEach(i=>{let r=Il(i,e),s=r-i.lastAngle;for(;s>Math.PI;)s-=2*Math.PI;for(;s<-Math.PI;)s+=2*Math.PI;r=i.lastAngle+s,i.lastAngle=r;let o=r-i.initialAngle;n+=o}),n/=t.size||1,{angle:n,radius:e.radius,center:e.center}}function MC(t){let e=new Map;return t.forEach((n,i)=>e.set(i,n.event)),e}function Il(t,e){let n=t.event,i=n.x-e.center.x,r=n.y-e.center.y;return Math.atan2(r,i)}var W0;(function(t){t[t.Left=0]="Left",t[t.Middle=1]="Middle",t[t.Right=2]="Right",t[t.Back=3]="Back",t[t.Forward=4]="Forward",t[t.Undefined=-1]="Undefined"})(W0||(W0={}));var xl=class extends ce{constructor(e=Ue.maximumDoubleClickDelay,n=Ue.maximumDoubleClickDistance,i=Ue.maximumDoubleTouchDelay,r=Ue.maximumDoubleTouchDistance,s=Fi){super(!1),this._maximumDoubleClickDelay=e,this._maximumDoubleClickDistance=n,this._maximumDoubleTouchDelay=i,this._maximumDoubleTouchDistance=r,this._clock=s,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach(e=>{e.immediateDoubleClick&&e.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(e){let n=e.data,i=$i(n);if(!this._pointerState.has(i)){let r={downButton:n.native.button,x:n.x,y:n.y,immediateDoubleClick:null};this._pointerState.set(i,r),this.startCapturingPointer(n.native)}}_handlePointerUp(e){let n=e.data,i=$i(n),r=this._pointerState.get(i);if(r&&r.downButton===n.native.button){let s=r.immediateDoubleClick,o=e.data.native.pointerType==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;s?(s.timeoutHandle.remove(),cr(s,e.data)>o?this._startImmediateDoubleClick(e,r):(this._immediateDoubleClick.emit(e.data,void 0,s.modifiers),this._removeState(n))):cr(r,e.data)>o?this._removeState(n):this._startImmediateDoubleClick(e,r)}}_startImmediateDoubleClick(e,n){let i=e.data.native.pointerType==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay;n.immediateDoubleClick={x:e.data.x,y:e.data.y,modifiers:e.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(e.data),i)}}_removeState(e){let n=$i(e);this._pointerState.delete(n),this.stopCapturingPointer(e.native),this.refreshHasPendingInputs()}};var Ol=class extends ce{constructor(e=Ue.maximumClickDelay,n=Ue.movementUntilMouseDrag,i=Ue.movementUntilPenDrag,r=Ue.movementUntilTouchDrag,s=Ue.holdDelay,o=Fi){super(!1),this._maximumClickDelay=e,this._movementUntilMouseDrag=n,this._movementUntilPenDrag=i,this._movementUntilTouchDrag=r,this._holdDelay=s,this._clock=o,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",a=>{this._handlePointerLoss(a,"pointer-up")}),this.registerIncoming("pointer-capture-lost",a=>{this._handlePointerLoss(a,"pointer-capture-lost")}),this.registerIncoming("pointer-cancel",a=>{this._handlePointerLoss(a,"pointer-cancel")}),this._moveHandle=this.registerIncoming("pointer-move",this._handlePointerMove.bind(this)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(e=>{e.holdTimeout=rt(e.holdTimeout)}),super.onUninstall()}_handlePointerDown(e){let n=e.data,i=n.native.pointerId,r=null;this._pointerState.size===0&&(r=this._clock.setTimeout(()=>{let o=this._pointerState.get(i);if(o){if(!o.isDragging){let a=o.previousEvent;this._pointerHold.emit(a,void 0,e.modifiers),o.holdEmitted=!0}o.holdTimeout=null}},this._holdDelay));let s={startEvent:n,previousEvent:n,startTimestamp:e.timestamp,isDragging:!1,downButton:n.native.button,holdTimeout:r,modifiers:new Set};this._pointerState.set(i,s),this.startCapturingPointer(n.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(e)}_createPointerDragData(e,n,i){return{action:e,startEvent:n.startEvent,previousEvent:n.previousEvent,currentEvent:i}}_handlePointerMove(e){let n=e.data,i=n.native.pointerId,r=this._pointerState.get(i);r&&(r.isDragging?this._pointerDrag.emit(this._createPointerDragData("update",r,n),void 0,r.modifiers):$0(n,r.startEvent)>this._getDragThreshold(n.native.pointerType)&&this._startDragging(e),r.previousEvent=n)}_getDragThreshold(e){switch(e){case"touch":return this._movementUntilTouchDrag;case"pen":return this._movementUntilPenDrag;default:return this._movementUntilMouseDrag}}_startDragging(e){let n=e.data,i=n.native.pointerId;this._pointerState.forEach(r=>{r.holdTimeout!=null&&(r.holdTimeout.remove(),r.holdTimeout=null),r.isDragging||(r.modifiers=e.modifiers,r.isDragging=!0,i===r.startEvent.native.pointerId?this._pointerDrag.emit(this._createPointerDragData("start",r,n)):this._pointerDrag.emit(this._createPointerDragData("start",r,r.previousEvent),e.timestamp))})}_handlePointerLoss(e,n){let i=e.data,r=i.native.pointerId,s=this._pointerState.get(r);s&&(s.holdTimeout!=null&&(s.holdTimeout.remove(),s.holdTimeout=null),s.isDragging?this._pointerDrag.emit(this._createPointerDragData("end",s,n==="pointer-up"?i:s.previousEvent),void 0,s.modifiers):n==="pointer-up"&&s.downButton===i.native.button&&e.timestamp-s.startTimestamp<=this._maximumClickDelay&&!s.holdEmitted&&this._immediateClick.emit(i),this._pointerState.delete(r),this.stopCapturingPointer(i.native),this._pointerState.size===0&&this._moveHandle.pause())}};var kl=class extends ce{constructor(e=Ue.maximumDoubleClickDelay,n=Ue.maximumDoubleClickDistance,i=Ue.maximumDoubleTouchDelay,r=Ue.maximumDoubleTouchDistance,s=Fi){super(!1),this._maximumDoubleClickDelay=e,this._maximumDoubleClickDistance=n,this._maximumDoubleTouchDelay=i,this._maximumDoubleTouchDistance=r,this._clock=s,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",this._handleImmediateClick.bind(this)),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this))}onUninstall(){this._pointerState.forEach(e=>e.doubleClickTimer=rt(e.doubleClickTimer))}get hasPendingInputs(){return Mn(this._pointerState,e=>e.doubleClickTimer!=null)}_clearDoubleClickTimer(e,n){let i=this._pointerState.get(e);i&&(i.doubleClickTimer=rt(i.doubleClickTimer),n&&this._click.emit(i.event.data,void 0,i.event.modifiers),this._pointerState.delete(e),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(e){let n=this._pointerState.get(e);n.pointerDownCount===1&&this._click.emit(n.event.data,void 0,n.event.modifiers),n.doubleClickTimer=null,this._pointerState.delete(e),this.refreshHasPendingInputs()}_getPointerId(e){let{pointerId:n,pointerType:i,button:r}=e.native;return i==="mouse"?`${n}:${r}`:`${i}`}_handleImmediateClick(e){let n=e.data,{pointerType:i}=n.native,r=this._getPointerId(n);if(!this._pointerState.has(r))return void this._startClick(e);let s=this._pointerState.get(r),{data:o,modifiers:a}=s.event,l=i==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;cr(o,n)>l?(this._clearDoubleClickTimer(r,!0),this._startClick(e)):(this._clearDoubleClickTimer(r,!1),s.pointerDownCount===2&&this._doubleClick.emit(o,void 0,a))}_handlePointerDown(e){let n=$i(e.data),i=this._pointerState.get(n);i&&(i.pointerDownCount+=1)}_startClick(e){let{data:n}=e,{native:{pointerType:i}}=n,r=$i(n),s=i==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,o=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(r),s);this._pointerState.set(r,{event:e,doubleClickTimer:o,pointerDownCount:1}),this.refreshHasPendingInputs()}};var Rl={counter:"Ctrl",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"}},dr=class extends z{initialize(){let t=()=>this.view?.ready;this.addHandles([ri(()=>!t(),()=>this._disconnect()),ri(t,()=>this._connect())])}destroy(){this._disconnect()}get latestPointerType(){return this._inputManager?.latestPointerType}get latestPointerLocation(){return this._inputManager?.latestPointerLocation}get multiTouchActive(){return this._inputManager?.multiTouchActive??!1}isModifierKeyDown(t){return this._inputManager?.isModifierKeyDown(t)??!1}_disconnect(){this.view.viewEvents.disconnect(),this._inputManager=He(this._inputManager)}_connect(){let t=this.view.surface,e=new j0(t,this.view.input),n=[new xl,new Ol,new kl,new El(this.view.navigation),new Tl],i=new vg({eventSource:e,recognizers:n});i.installHandlers("prevent-context-menu",[new Dl],rn.INTERNAL),i.installHandlers("navigation",[new Cl(this.view),new gl(this.view),new wl(this.view),new qo(this.view),new qo(this.view,[Rl.counter]),new ml(this.view,"primary"),new yl(this.view,Rl.pan),new bl(this.view,Rl.zoom),new vl(this.view,Rl.rotate),new fl(this.view,"secondary"),new pl(this.view,"touch")],rn.INTERNAL),this.view.viewEvents.connect(i),this._source=e,this._inputManager=i,R(()=>this.view?.navigation?.browserTouchPanEnabled,r=>{this._source&&(this._source.browserTouchPanningEnabled=!r)},le)}get test(){return{inputManager:this._inputManager}}};c([u()],dr.prototype,"view",void 0),c([u()],dr.prototype,"latestPointerType",null),c([u()],dr.prototype,"latestPointerLocation",null),c([u()],dr.prototype,"multiTouchActive",null),dr=c([D("esri.views.2d.input.MapViewInputManager")],dr);var Y0=dr;var ur={added:[],removed:[]},ih=new Set,IC=new Wf(0,0,0,0);function EC(t,e){let n=Ia(e);if(!n)return null;let[i,r]=n.valid;return t[2]>r?[po([t[0],t[1],r,t[3]]),po([i,t[1],i+t[2]-r,t[3]])]:t[0]<i?[po([i,t[1],t[2],t[3]]),po([r-(i-t[0]),t[1],r,t[3]])]:null}var Al=class extends Pi{constructor(e){super(),this._tiles=new Map,this._index=tg(9,ut("esri-csp-restrictions")?n=>({minX:n.bounds[0],minY:n.bounds[1],maxX:n.bounds[2],maxY:n.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=e}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(e){return this._tiles.has(e)}get(e){return this._tiles.get(e)}getIntersectingTiles(e){if(!e||pf(e)===0||mf(e)===0)return[];let n=EC(e,this.tileScheme.spatialReference);return n!=null?[...new Set([...this.boundsIntersections(n[0]),...this.boundsIntersections(n[1])])]:this.boundsIntersections(e)}boundsIntersections(e){return this._index.search({minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]})}updateTiles(e){let n={added:[],removed:[]};for(let i of e.added)if(!this.has(i)){let r=new pd(this.tileScheme,i);this._tiles.set(i,r),this._index.insert(r),n.added.push(r)}for(let i of e.removed)if(this.has(i)){let r=this.get(i);this._tiles.delete(i),this._index.remove(r),n.removed.push(r)}this.tiles.length=0,this._tiles.forEach(i=>this.tiles.push(i)),(n.added.length||n.removed.length)&&this.emit("update",n)}setViewState(e){let n=this.tileScheme.getTileCoverage(e,0);if(!n)return;let{spans:i,lodInfo:r}=n,{level:s}=r;if(i.length>0)for(let{row:o,colFrom:a,colTo:l}of i)for(let d=a;d<=l;d++){let h=IC.set(s,o,r.normalizeCol(d),r.getWorldForColumn(d)).id;if(ih.add(h),!this.has(h)){let p=new pd(this.tileScheme,h);this._tiles.set(h,p),this._index.insert(p),this.tiles.push(p),ur.added.push(p)}}for(let o=this.tiles.length-1;o>=0;o--){let a=this.tiles[o];ih.has(a.id)||(this._tiles.delete(a.id),this.tiles.splice(o,1),this._index.remove(a),ur.removed.push(a))}(ur.added.length||ur.removed.length)&&this.emit("update",ur),qf.pool.release(n),ih.clear(),ur.added.length=0,ur.removed.length=0}};function Q0(t,e,n){return A(this,null,function*(){let i=cl(e)?ll(t,e):e;if(!t.ready||isNaN(i.x)||isNaN(i.y))return{screenPoint:i,results:[]};let r=new Set,s=new Set,o=!1,a=null,l=null;n?.include?K0(n.include,Z0(t,m=>{r.add(m),nh(m,f=>s.add(f))},(m,f)=>{s.add(m),r.add(f)},m=>{a||(a=new Set),a.add(m)},m=>r.add(m),()=>o=!0)):(o=!0,r=new Set(t.allLayerViews),r.forEach(m=>{nh(m,f=>s.add(f))})),n?.exclude&&K0(n.exclude,Z0(t,m=>{r.delete(m),nh(m,f=>s.delete(f))},m=>s.delete(m),m=>{l||(l=new Set),l.add(m)}));let d=t.allLayerViews.filter(m=>!m.suspended&&r.has(m)).reverse(),h=t.toMap(i),p=[...o?t.graphicsView.hitTest(h).map(m=>({type:"graphic",graphic:m,layer:null,mapPoint:h})):[],...yield Promise.all(d.map(m=>m.hitTest(h,i)).toArray())].filter(Vt).flat().filter(Vt);return p=p.filter(m=>m.type!=="graphic"||m.layer?.type!=="subtype-group"||s.has(m.graphic.layer)),a&&(p=p.filter(m=>!("graphic"in m)||!m.graphic||a?.has(rh(m.graphic)))),l&&(p=p.filter(m=>!("graphic"in m)||!m.graphic||!l?.has(rh(m.graphic)))),{screenPoint:i,results:p}})}function Z0(t,e,n,i,r,s){return o=>{if(o instanceof sg){if(o.layer===t)s?.();else{let a=t.allLayerViews.find(l=>l.layer===o.layer);a&&r?.(a)}i(rh(o))}else if(o.type==="subtype-sublayer"){let a=t.allLayerViews.find(l=>l.layer===o.parent);a&&n(o,a)}else{let a=t.allLayerViews.find(l=>l.layer===o);a&&e(a)}}}function K0(t,e){if(t)if(Wc(t))for(let n of t)if(Wc(n))for(let i of n)e(i);else e(n);else e(t)}function rh(t){let e=t.getObjectId();return e?`${t.layer?.uid??t.sourceLayer?.uid??"MapView"}/${e}`:`"MapView/${t.uid}`}function nh({layer:t},e){t.type==="subtype-group"&&t.sublayers.forEach(n=>{e(n)})}var J0={flipY:!0,premultipliedAlpha:!0};function X0(t,e){return A(this,null,function*(){let n=yield ty(t,e),{format:i,quality:r}=s_(e?.format,e?.quality);return n_(n,{format:i,quality:r,rotation:0,disableDecorations:!1},J0)})}function ey(t,e){return A(this,null,function*(){let n=yield ty(t,e);return r_(n,J0)})}function ty(t,e){let n=kC(e||{},OC(t.stage,t.size),t.size,t.padding),i=xC(e,t.allLayerViews);return t.stage.takeScreenshot(n,i,t.backgroundColor,e?.rotation)}function xC(t={},e){if(!t.layers)return;let n=[];return t.layers.forEach(i=>{let r=e.find(s=>s.layer.id===i.id);r?.container&&n.push(r.container)}),n}function OC(t,e){return Math.min(4,o_(e,Math.min(4096,t.context.parameters.maxTextureSize)))}function kC(t,e,n,i){t.ignorePadding&&(i={left:0,right:0,top:0,bottom:0});let r=null;t.width!=null&&t.height!=null?r=[t.width,t.height]:t.width==null&&t.height!=null?r=[t.height,t.height]:t.width!=null&&t.height==null?r=[t.width,t.width]:t.width==null&&t.height==null&&(r=null);let s=n[0]-(i.left+i.right),o=n[1]-(i.top+i.bottom),a,l,d=t.area||{x:0,y:0,width:s,height:o};if(r){let h=s/o,p=r[0]/r[1];if(p>h){let m=d.width/p;d={x:d.x,y:Math.round(d.y+(d.height-m)/2),width:d.width,height:Math.round(m)}}else{let m=d.height*p;d={x:Math.round(d.x+(d.width-m)/2),y:d.y,width:Math.round(m),height:d.height}}}else r=[d.width,d.height];return r[0]>d.width?(a=Math.min(r[0]/d.width,e),l=r[0]/d.width/a):(a=1,l=r[0]/d.width),{cropArea:{x:Math.round((d.x+i.left)*a),y:Math.round((d.y+i.top)*a),width:Math.round(d.width*a),height:Math.round(d.height*a)},outputScale:l,resolutionScale:a}}var iy=160,bs=class extends z{constructor(){super(...arguments),this._timer=void 0}get stationary(){return!this._timer}flip(){this._timestamp=performance.now(),this._timer==null&&(this._timer=setInterval(()=>{performance.now()-this._timestamp>=iy&&this.clear()},iy))}clear(){this._timer&&(clearInterval(this._timer),this._timer=void 0)}};c([u()],bs.prototype,"_timer",void 0),c([u()],bs.prototype,"stationary",null),bs=c([D("esri.views.2d.support.StationaryManager")],bs);function ny(t){let e=gg();return e.available?t==="3d"&&e.majorPerformanceCaveat?new re("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist."):e.supportsHighPrecisionFragment?e.supportsVertexShaderSamplers?null:new re("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new re("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new re("webgl:required","WebGL2 is required but not supported.",new Error().stack)}function RC(t){return t&&"nodeType"in t}function AC(t){return t&&typeof t.render=="function"}var ry={component:"esri-component"},hr=class extends z{constructor(){super(...arguments),this.widget=null}destroy(){this.node=null,this.widget?.destroy()}get id(){return this._get("id")??this.widget?.id??this.node?.id}set id(t){this._set("id",t)}set node(t){let e=this._get("node");t!==e&&(t&&t.classList.add(ry.component),e&&e.classList.remove(ry.component),this._set("node",t))}castNode(t){return this.widget?.destroy(),t?typeof t=="string"||RC(t)?(this._set("widget",null),Ta(t)):(AC(t)&&!t.domNode&&(t.domNode=document.createElement("div")),this._set("widget",t),t.domNode):(this._set("widget",null),null)}};c([u()],hr.prototype,"id",null),c([u()],hr.prototype,"node",null),c([wi("node")],hr.prototype,"castNode",null),c([u({readOnly:!0})],hr.prototype,"widget",void 0),hr=c([D("esri.views.ui.Component")],hr);var ws=hr;var FC={left:0,top:0,bottom:0,right:0},sy={bottom:30,top:15,right:15,left:15},dn="esri-ui",Gt={ui:dn,corner:`${dn}-corner`,innerContainer:`${dn}-inner-container`,manualContainer:`${dn}-manual-container`,cornerContainer:`${dn}-corner-container`,topLeft:`${dn}-top-left`,topRight:`${dn}-top-right`,bottomLeft:`${dn}-bottom-left`,bottomRight:`${dn}-bottom-right`};function PC(t){return t&&!t._started&&typeof t.postMixInProperties=="function"&&typeof t.buildRendering=="function"&&typeof t.postCreate=="function"&&typeof t.startup=="function"}function Fl(t){return t===0?"0":`${t}px`}function sh(t){let e=typeof t=="object"&&t!==null&&Object.getPrototypeOf(t);return(e===null||e===Object.prototype)&&("component"in t||"index"in t||"position"in t)?t:null}function oh(t,{top:e,bottom:n,left:i,right:r}){t.style.top=e,t.style.bottom=n,t.style.left=i,t.style.right=r}var Ui=class extends Pi.EventedAccessor{constructor(t){super(t),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentMap=new Map,this._locale=$m(),this.view=null,this._applyViewPadding=()=>{let e=this.container;e&&oh(e,this._toPixelPosition(this._getViewPadding()))},this._applyUIPadding=()=>{let e=this._innerContainer;e&&oh(e,this._toPixelPosition(this.padding))},this._initContainers()}initialize(){this.addHandles([R(()=>[this.view?.padding,this.container],this._applyViewPadding,le),R(()=>this.padding,this._applyUIPadding,le),R(()=>[this.container,this._locale],([t,e])=>{t&&t.setAttribute("lang",e)},le),Yr(t=>{this._locale=t})])}destroy(){this.container=null;for(let t of this._components)t.destroy();this._components.length=0,this._componentMap.clear()}set container(t){let e=this._get("container");t!==e&&(t&&(t.classList.add(Gt.ui),Zm(t),this._attachContainers(t)),e&&(e.classList.remove(Gt.ui),oh(e,{top:"",bottom:"",left:"",right:""}),Ma(e)),this._set("container",t))}get height(){let t=this.view?.height??0;if(t===0)return t;let e=this._getViewPadding(),{top:n,bottom:i}=e;return Math.max(t-n-i,0)}get padding(){return this._get("padding")}set padding(t){this._overrideIfSome("padding",t)}castPadding(t){return typeof t=="number"?{bottom:t,top:t,right:t,left:t}:I(I({},sy),t)}get width(){let t=this.view?.width??0;if(t===0)return t;let e=this._getViewPadding(),{left:n,right:i}=e;return Math.max(t-n-i,0)}add(t,e){let n,i,r;if(Array.isArray(t))return void t.forEach(o=>this.add(o,e));let s=sh(t);s&&({index:n,position:e,component:t,key:i}=s),e&&typeof e=="object"&&({index:n,key:i,position:e,internal:r}=e),!t||e&&!this._isValidPosition(e)||this._add(t,e,n,i,r)}remove(t,e){if(!t)return;if(Array.isArray(t))return t.map(i=>this.remove(i,e));let n=this._find(t);if(n){if(this._componentMap.has(n)&&this._componentMap.get(n)?.key!==e)return;let i=this._components.indexOf(n);return n.node.parentNode?.removeChild(n.node),this._componentMap.delete(n),this._components.splice(i,1)[0]}}empty(t,e={removeInternal:!1}){if(Array.isArray(t)){for(let r of t)this.empty(r,e);return}let n=this._positionNameToContainerLookup[t??"manual"],i=Array.prototype.slice.call(n.children).map(r=>this._findByNode(r)).filter(r=>r==null?!1:!(this._componentMap.get(r)?.internal??!1)||e.removeInternal);for(let r of i)this.remove(r)}move(t,e){if(Array.isArray(t)&&t.forEach(s=>this.move(s,e)),!t)return;let n,i=sh(t)||sh(e);if(i&&(n=i.index,e=i.position,t=i.component||t),e&&!this._isValidPosition(e))return;let r=this.remove(t);r&&this.add(r,{position:e,index:n})}find(t){if(!t)return null;let e=this._findById(t);return e&&(e.widget||e.node)}getComponents(t,e={includeInternal:!1}){return t?Array.isArray(t)?t.flatMap(n=>this._getComponentsAtPosition(n,e)):this._getComponentsAtPosition(t,e):this._components.filter(n=>e.includeInternal||!this._componentMap.get(n)?.internal).map(({widget:n,node:i})=>n??i)}getPosition(t){for(let e in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[e].contains(t))return e;return null}_add(t,e,n,i,r){t instanceof ws||(t=new ws({node:t})),this._place({component:t,position:e,index:n}),this._components.push(t),this._componentMap.set(t,{key:i,internal:r})}_find(t){return t?t instanceof ws?this._findByComponent(t):typeof t=="string"?this._findById(t):this._findByNode(t.domNode||t):null}_getViewPadding(){return this.view?.padding??FC}_attachContainers(t){t.appendChild(this._innerContainer),t.appendChild(this._manualContainer)}_initContainers(){let t=document.createElement("div");t.classList.add(Gt.innerContainer,Gt.cornerContainer);let e=document.createElement("div");e.classList.add(Gt.innerContainer,Gt.manualContainer);let n=document.createElement("div");n.classList.add(Gt.topLeft,Gt.corner),t.appendChild(n);let i=document.createElement("div");i.classList.add(Gt.topRight,Gt.corner),t.appendChild(i);let r=document.createElement("div");r.classList.add(Gt.bottomLeft,Gt.corner),t.appendChild(r);let s=document.createElement("div");s.classList.add(Gt.bottomRight,Gt.corner),t.appendChild(s),this._innerContainer=t,this._manualContainer=e;let o=ao();this._cornerNameToContainerLookup={"top-left":n,"top-right":i,"bottom-left":r,"bottom-right":s,"top-leading":o?i:n,"top-trailing":o?n:i,"bottom-leading":o?s:r,"bottom-trailing":o?r:s},this._positionNameToContainerLookup=I({manual:e},this._cornerNameToContainerLookup)}_isValidPosition(t){return!!this._positionNameToContainerLookup[t]}_place(t){let e=t.position??"manual",{component:n,index:i}=t,r=this._positionNameToContainerLookup[e],s=i!=null&&i>-1;if(PC(n.widget)&&n.widget.startup(),!s)return void r.appendChild(n.node);let o=Array.from(r.children);if(i===0)return void(r.firstChild?Jc(n.node,r.firstChild):r.appendChild(n.node));i>=o.length?r.appendChild(n.node):Jc(n.node,o[i])}_toPixelPosition(t){return{top:Fl(t.top),left:Fl(t.left),right:Fl(t.right),bottom:Fl(t.bottom)}}_findByComponent(t){return this._components.find(e=>e===t)??null}_findById(t){return this._components.find(({id:e})=>e===t)??null}_findByNode(t){return this._components.find(({node:e})=>e===t)??null}_getComponentsAtPosition(t,e){let n=this._positionNameToContainerLookup[t];return Array.prototype.slice.call(n.children).map(i=>this._findByNode(i)).filter(Vt).filter(i=>e.includeInternal||!this._componentMap.get(i)?.internal).map(({widget:i,node:r})=>i??r)}};c([u()],Ui.prototype,"_locale",void 0),c([u()],Ui.prototype,"container",null),c([u()],Ui.prototype,"height",null),c([u({value:sy})],Ui.prototype,"padding",null),c([wi("padding")],Ui.prototype,"castPadding",null),c([u()],Ui.prototype,"view",void 0),c([u()],Ui.prototype,"width",null),Ui=c([D("esri.views.ui.UI")],Ui);var oy=Ui;var LC=new Map;function ay(t){return LC.get(t)}function ly(t,e){return t&&"copyright"in t&&(!e||typeof t.originOf=="function"&&t.originOf("copyright")==="user")}function NC(t,e){return t.length!==e.length||t.some((n,i)=>n.text!==e[i].text)}function Yo(t,e,n){!n||!e||t.find(i=>i.layerView===e&&i.text===n)||t.push({text:n,layerView:e})}function VC(t){return t.type==="bing-maps"}var un=[],Cs=class extends z{constructor(t){super(t),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.removeHandles("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new ae,this.view=null,this._allLayerViewsChange=e=>{this.removeHandles("suspension"),this.removeHandles("visible-geometry-changed");let n=this.view?.allLayerViews;n&&(this.addHandles(n.map(i=>R(()=>[i.suspended,i.layer?.attributionVisible],()=>this._updateAttributionItems())).toArray(),"suspension"),n.forEach(i=>{i.declaredClass==="esri.views.3d.layers.Tiles3DLayerView3D"&&this.addHandles(i.on("visible-geometry-changed",()=>this._updateAttributionItems()),"visible-geometry-changed")})),e?.removed&&e.removed.forEach(i=>{this._pendingAttributions.delete(i),this._fetchedAttributionData.delete(i)}),this._updateAttributionItems()},this.addHandles([Bt(()=>this.view?.allLayerViews,"change",e=>this._allLayerViewsChange(e),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),ri(()=>this.view?.stationary===!0,()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){return this.view?.ready?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){let t=this.view,e=t?.allLayerViews;if(un.length=0,!t||!e)return void this._clear();e.forEach(i=>{if(i.suspended||!i.layer?.attributionVisible)return;let r=i.layer;if(ly(r,"user"))return void Yo(un,i,r.copyright);if(r.hasAttributionData){if(this._fetchedAttributionData.has(i)){let o=this._fetchedAttributionData.get(i);return void(o?Yo(un,i,this._getDynamicAttribution(o,t,r)):ly(r)&&Yo(un,i,r.copyright))}return void this._fetchAttributionData(i)}let s="portalItem"in r?r.portalItem?.accessInformation:void 0;Yo(un,i,s||r.copyright)});let n=e.find(i=>i.layer?.type==="integrated-mesh-3dtiles");if(this.view&&n){let i=ay(this.view);if(i){let r=i.getAttributionText();for(let s=0;s<r.length;++s)Yo(un,n,r[s])}}NC(this.items,un)&&(this.items.removeAll(),this.items.addMany(un)),un.length=0,this.notifyChange("state")}_fetchAttributionData(t){return A(this,null,function*(){if(this._pendingAttributions.has(t))return;this._pendingAttributions.add(t);let e=yield Ym(t.layer.fetchAttributionData());if(this._pendingAttributions.has(t)){let n=e.ok?this._createContributionIndex(e.value,VC(t.layer)):null;this._pendingAttributions.delete(t),this._fetchedAttributionData.set(t,n)}this._updateAttributionItems()})}_createContributionIndex(t,e){let n=t.contributors,i={};if(!n)return i;for(let r=0;r<n.length;r++){let s=n[r],o=s.coverageAreas;if(!o)return;for(let a of o){let l=a.bbox,d=a.zoomMin-(e&&a.zoomMin?1:0),h=a.zoomMax-(e&&a.zoomMax?1:0),p=new Vi({xmin:l[1],ymin:l[0],xmax:l[3],ymax:l[2],spatialReference:er.WGS84}),m={extent:of(p),attribution:s.attribution||"",score:a.score!=null?a.score:100,id:r};for(let f=d;f<=h;f++)i[f]??=[],i[f].push(m)}}return i.maxKey=Math.max.apply(null,Object.keys(i)),i}_getDynamicAttribution(t,e,n){let{extent:i,scale:r}=e,s=n.tileInfo?.scaleToZoom(r)??0;if(s=Math.min(t.maxKey??0,Math.round(s)),!i||s==null||s<=-1)return"";let o=t[s],a=sf(i.center.clone().normalize(),e.spatialReference),l=new Set;return o?o.filter(d=>{let h=d.id,p=!l.has(h)&&a&&d.extent&&Ea(d.extent,a);return p&&l.add(h),p}).sort((d,h)=>h.score-d.score||d.objectId-h.objectId).map(d=>d.attribution).join(", "):""}};c([u({readOnly:!0,type:ae})],Cs.prototype,"items",void 0),c([u({readOnly:!0})],Cs.prototype,"state",null),c([u()],Cs.prototype,"view",void 0),Cs=c([D("esri.widgets.Attribution.AttributionViewModel")],Cs);var ah=Cs;var Ss="esri-attribution",pr={base:Ss,poweredBy:`${Ss}__powered-by`,sources:`${Ss}__sources`,open:`${Ss}--open`,sourcesOpen:`${Ss}__sources--open`,link:`${Ss}__link`,widgetIcon:Ni.description},Ot=class extends It{constructor(t,e){super(t,e),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver(n=>n.forEach(({target:i})=>this._checkSourceTextOverflow(i))),this.iconClass=pr.widgetIcon,this.icon=null,this.itemDelimiter=" | ",this.messages=null,this.viewModel=new ah}initialize(){this.addHandles(Bt(()=>this.viewModel?.items,"change",()=>this.scheduleRender()))}destroy(){this._resizeObserver?.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((t,e)=>(t.includes(e.text)||t.push(e.text),t),[]).join(this.itemDelimiter)}get label(){return this.messages?.widgetLabel??""}set label(t){this._overrideIfSome("label",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){let t={[pr.open]:this._isOpen};return y("div",{bind:this,class:this.classes(pr.base,Ge.widget,t),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),this._renderPoweredBy())}_renderPoweredBy(){return y("div",{class:pr.poweredBy},"Powered by"," ",y("a",{class:pr.link,href:"https://www.esri.com/",rel:"noreferrer",target:"_blank"},"Esri"))}_renderSourcesNode(){let t=this._isOpen,e=this._isInteractive,n=e?0:void 0,{attributionText:i}=this,r={[pr.sourcesOpen]:t,[Ge.interactive]:e};return y("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(pr.sources,r),innerHTML:i,tabIndex:n})}_afterSourcesNodeCreate(t){this._prevSourceNodeHeight=t.clientWidth,this._resizeObserver.observe(t)}_checkSourceTextOverflow(t){let e=!1,{clientHeight:n,clientWidth:i,scrollWidth:r}=t,s=r>i,o=this._attributionTextOverflowed!==s;if(this._attributionTextOverflowed=s,o&&(e=!0),this._isOpen){let a=n<this._prevSourceNodeHeight;this._prevSourceNodeHeight=n,a&&(this._isOpen=!1,e=!0)}e&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};c([u()],Ot.prototype,"_isOpen",void 0),c([u()],Ot.prototype,"_isInteractive",null),c([u()],Ot.prototype,"_attributionTextOverflowed",void 0),c([u()],Ot.prototype,"_prevSourceNodeHeight",void 0),c([u({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],Ot.prototype,"attributionText",null),c([u()],Ot.prototype,"iconClass",void 0),c([u()],Ot.prototype,"icon",void 0),c([u()],Ot.prototype,"itemDelimiter",void 0),c([u()],Ot.prototype,"label",null),c([u(),yt("esri/widgets/Attribution/t9n/Attribution")],Ot.prototype,"messages",void 0),c([u()],Ot.prototype,"view",null),c([u({type:ah})],Ot.prototype,"viewModel",void 0),c([Ra()],Ot.prototype,"_toggleState",null),Ot=c([D("esri.widgets.Attribution")],Ot);var cy=Ot;function dy(t){return t?.spatialReference?.isWebMercator||t?.spatialReference?.isGeographic||!1}var BC="esri.widgets.CompassViewModel",mr=class extends zg(z){constructor(t){super(t),this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this.addHandles(R(()=>this.view,this._updateRotationWatcher,le))}destroy(){this.view=null}get canShowNorth(){return dy(this.view)}get state(){return!this.view?.ready||this.view.type==="2d"&&!this.view.constraints.rotationEnabled?"disabled":this.canShowNorth?"compass":"rotation"}reset(){if(!this.view?.ready)return;let t={};this.view?.type==="2d"?t.rotation=0:t.heading=0,this.callGoTo({target:t})}_updateForRotation(t){t!=null&&(this.orientation={z:t})}_updateForCamera(t){if(!t)return;let e=-t.heading;this.orientation={x:0,y:0,z:e}}_updateRotationWatcher(t){this.removeAllHandles(),t&&this.addHandles(t.type==="2d"?R(()=>t?.rotation,this._updateForRotation,le):R(()=>t?.camera,this._updateForCamera,le))}};c([u({readOnly:!0})],mr.prototype,"canShowNorth",null),c([u()],mr.prototype,"orientation",void 0),c([u({readOnly:!0})],mr.prototype,"state",null),c([u()],mr.prototype,"view",void 0),mr=c([D(BC)],mr);var lh=mr;var uy="esri-compass",Pl={base:uy,widgetIcon:Ni.locateCircled,iconContainer:`${uy}__icon-container`};var Wi=class extends It{constructor(t,e){super(t,e),this.iconClass=Pl.widgetIcon,this.icon=null,this.messages=null,this.viewModel=new lh,this._reset=()=>{this.viewModel.reset()},this._toRotationTransform=n=>({transform:`rotateZ(${n.z}deg)`})}loadDependencies(){return Qr({button:()=>import("./chunk-2G23RISA.js"),icon:()=>import("./chunk-SP2EF2VL.js")})}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(t){this.viewModel.goToOverride=t}get label(){return this.messages?.widgetLabel??""}set label(t){this._overrideIfSome("label",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}reset(){return this.viewModel.reset()}render(){let{orientation:t,state:e}=this.viewModel,n=e==="rotation"?"arrow-up":"compass-needle",i=this.icon??n,{messages:r}=this;return y("div",{class:this.classes(Pl.base,Ge.widget)},y("calcite-button",{class:Ge.widgetButton,disabled:e==="disabled",kind:"neutral",label:r.reset,onclick:this._reset,round:!0,scale:"s",title:r.reset},y("div",{"aria-hidden":"true",class:Pl.iconContainer,title:r.reset},y("calcite-icon",{icon:i,scale:"m",styles:this._toRotationTransform(t)}))))}};c([u()],Wi.prototype,"goToOverride",null),c([u()],Wi.prototype,"iconClass",void 0),c([u()],Wi.prototype,"icon",void 0),c([u()],Wi.prototype,"label",null),c([u(),yt("esri/widgets/Compass/t9n/Compass")],Wi.prototype,"messages",void 0),c([u()],Wi.prototype,"view",null),c([u({type:lh})],Wi.prototype,"viewModel",void 0),Wi=c([D("esri.widgets.Compass")],Wi);var hy=Wi;var py="esri-navigation-toggle",Ll={base:py,widgetIcon:Ni.pan2,isLayoutHorizontal:`${py}--horizontal`};var Ds=class extends z{constructor(t){super(t),this.navigationMode="pan",this.view=null}initialize(){this.addHandles(ri(()=>this.view?.inputManager,()=>this._setNavigationMode()))}destroy(){this.view=null}get state(){return this.view?.ready&&this.view?.type==="3d"?"ready":"disabled"}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate",this._setNavigationMode())}_setNavigationMode(){let t=this.view?.inputManager;t&&(t.primaryDragAction=this.navigationMode==="pan"?"pan":"rotate")}};c([u({readOnly:!0})],Ds.prototype,"state",null),c([u()],Ds.prototype,"navigationMode",void 0),c([u()],Ds.prototype,"view",void 0),Ds=c([D("esri.widgets.NavigationToggleViewModel")],Ds);var ch=Ds;var qi=class extends It{constructor(t,e){super(t,e),this.iconClass=Ll.widgetIcon,this.icon=null,this.messages=null,this.viewModel=new ch,this.toggle=()=>this.viewModel.toggle(),this._panButton=null,this._rotateButton=null,this._toggle=()=>{(this.viewModel?.navigationMode==="pan"?this._rotateButton:this._panButton)?.setFocus(),this.toggle()}}loadDependencies(){return Qr({button:()=>import("./chunk-2G23RISA.js")})}get label(){return this.messages?.widgetLabel??""}set label(t){this._overrideIfSome("label",t)}set layout(t){t!=="horizontal"&&(t="vertical"),this._set("layout",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){let t=this.viewModel?.state==="disabled",e=this.viewModel?.navigationMode==="pan",n=this.messages.toggle;return y("div",{class:this.classes(Ll.base,Ge.widget,{[Ll.isLayoutHorizontal]:this.layout==="horizontal"})},y("calcite-button",{afterCreate:i=>{this._panButton=i},appearance:e?"outline-fill":"solid",class:Ge.widgetButton,disabled:t,iconStart:"move",kind:"neutral",label:n,onclick:this._toggle,tabIndex:e?void 0:-1,title:n}),y("calcite-button",{afterCreate:i=>{this._rotateButton=i},appearance:e?"solid":"outline-fill",class:Ge.widgetButton,disabled:t,iconStart:"rotate",kind:"neutral",label:n,onclick:this._toggle,tabIndex:e?-1:void 0,title:n}))}};c([u()],qi.prototype,"iconClass",void 0),c([u()],qi.prototype,"icon",void 0),c([u()],qi.prototype,"label",null),c([u({value:"vertical"})],qi.prototype,"layout",null),c([u(),yt("esri/widgets/NavigationToggle/t9n/NavigationToggle")],qi.prototype,"messages",void 0),c([u()],qi.prototype,"view",null),c([u({type:ch})],qi.prototype,"viewModel",void 0),qi=c([D("esri.widgets.NavigationToggle")],qi);var my=qi;var fr=class extends z{get canZoomIn(){if(!this.view?.ready)return!1;let e=this.view?.constraints?.effectiveMaxScale;return e===0||this._scale>e}get canZoomOut(){let{view:t}=this;if(!t?.ready)return!1;let n=t.constraints?.effectiveMinScale;return n===0||this._scale<n}get _scale(){let t=this.view?.animation?.target;return(t&&"then"in t?void 0:t?.scale)??this.view?.scale??0}};c([u({readOnly:!0})],fr.prototype,"canZoomIn",null),c([u({readOnly:!0})],fr.prototype,"canZoomOut",null),c([u()],fr.prototype,"view",void 0),c([u()],fr.prototype,"_scale",null),fr=c([D("esri.widgets.Zoom.ZoomConditions2D")],fr);var fy=fr;var Ts=class extends z{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};c([u({readOnly:!0})],Ts.prototype,"canZoomIn",null),c([u({readOnly:!0})],Ts.prototype,"canZoomOut",null),c([u()],Ts.prototype,"view",void 0),Ts=c([D("esri.widgets.Zoom.ZoomConditions3D")],Ts);var gy=Ts;var Hn=class extends z{constructor(t){super(t)}destroy(){this.view=null}get canZoomIn(){return this._zoomConditions!=null&&this._zoomConditions.canZoomIn}get canZoomOut(){return this._zoomConditions!=null&&this._zoomConditions?.canZoomOut}get state(){return this.view?.ready?"ready":"disabled"}set view(t){t?t.type==="2d"?this._zoomConditions=new fy({view:t}):t.type==="3d"&&(this._zoomConditions=new gy({view:t})):this._zoomConditions=null,this._set("view",t)}zoomIn(){if(!this.canZoomIn)return;let t=this.view;t.type==="2d"?t.mapViewNavigation.zoomIn():Yc(t.goTo({zoomFactor:2}))}zoomOut(){if(!this.canZoomOut)return;let t=this.view;t.type==="2d"?t.mapViewNavigation.zoomOut():Yc(t.goTo({zoomFactor:.5}))}};c([u()],Hn.prototype,"_zoomConditions",void 0),c([u()],Hn.prototype,"canZoomIn",null),c([u()],Hn.prototype,"canZoomOut",null),c([u({readOnly:!0})],Hn.prototype,"state",null),c([u()],Hn.prototype,"view",null),Hn=c([D("esri.widgets.Zoom.ZoomViewModel")],Hn);var dh=Hn;var uh={base:"esri-zoom",widgetIcon:Ni.zoomInMagnifyingGlass,horizontalLayout:"esri-zoom--horizontal"},Yi=class extends It{constructor(t,e){super(t,e),this.iconClass=uh.widgetIcon,this.icon=null,this.messages=null,this.viewModel=new dh,this.zoomIn=()=>this.viewModel.zoomIn(),this.zoomOut=()=>this.viewModel.zoomOut()}loadDependencies(){return Qr({button:()=>import("./chunk-2G23RISA.js")})}get label(){return this.messages?.widgetLabel??""}set label(t){this._overrideIfSome("label",t)}set layout(t){t!=="horizontal"&&(t="vertical"),this._set("layout",t)}set view(t){this.viewModel.view=t}get view(){return this.viewModel.view}render(){let t={[uh.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:e,canZoomOut:n}=this.viewModel,{zoomIn:i,zoomOut:r}=this.messages;return y("div",{class:this.classes(uh.base,Ge.widget,t)},y("calcite-button",{class:Ge.widgetButton,disabled:!e,iconStart:"plus",kind:"neutral",label:i,onclick:this.zoomIn,title:i}),y("calcite-button",{class:Ge.widgetButton,disabled:!n,iconStart:"minus",kind:"neutral",label:r,onclick:this.zoomOut,title:r}))}};c([u()],Yi.prototype,"iconClass",void 0),c([u()],Yi.prototype,"icon",void 0),c([u()],Yi.prototype,"label",null),c([u({value:"vertical"})],Yi.prototype,"layout",null),c([u(),yt("esri/widgets/Zoom/t9n/Zoom")],Yi.prototype,"messages",void 0),c([u()],Yi.prototype,"view",null),c([u({type:dh})],Yi.prototype,"viewModel",void 0),Yi=c([D("esri.widgets.Zoom")],Yi);var _y=Yi;function HC(t){return t?.view!==void 0}var Nl=class extends oy{constructor(t){super(t),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[],this._updateViewAwareWidgets=e=>{this.components.forEach(n=>{let i=this._find(n),r=i?.widget;HC(r)&&(r.view=e)})},this._componentsWatcher=(e,n)=>{this._removeComponents(n),this._addComponents(e),this._adjustPadding(e)}}initialize(){this.addHandles([R(()=>this.components,this._componentsWatcher,le),R(()=>this.view,this._updateViewAwareWidgets,le)])}_add(t,e,n,i,r){let s=t;if(typeof t=="string"&&this._defaultPositionLookup[t]){if(this._find(t))return;s=this._createComponent(t)}super._add(s,e,n,i,r)}_removeComponents(t){t.forEach(e=>{let n=this._find(e);n&&(this.remove(n),n.destroy())})}_adjustPadding(t){if(!t.includes("attribution")&&!this._isOverridden("padding")){let{top:e}=this.padding;this.padding=e}}_addComponents(t){this.constructed&&t.forEach(e=>this.add(this._createComponent(e),this._defaultPositionLookup[e]))}_createComponent(t){let e=this._createWidget(t);return new ws({id:t,node:e})}_createWidget(t){let{view:e}=this;switch(t){case"attribution":return new cy({view:e});case"compass":return new hy({view:e});case"navigation-toggle":return new my({view:e});case"zoom":return new _y({view:e})}}};c([u()],Nl.prototype,"components",void 0),Nl=c([D("esri.views.ui.DefaultUI")],Nl);var Vl=Nl;var Bl=class extends Vl{constructor(t){super(t),this.components=["attribution","zoom"]}};c([u()],Bl.prototype,"components",void 0),Bl=c([D("esri.views.ui.2d.DefaultUI2D")],Bl);var hh=Bl;var ph,Hl=ph=class extends qr{constructor(t){super(t),this.color=new Ht([0,0,0,1])}clone(){return new ph(ro({color:this.color}))}};c([u({type:Ht,json:{write:!0}})],Hl.prototype,"color",void 0),Hl=ph=c([D("esri.webmap.background.ColorBackground")],Hl);var yy=Hl;var vy,by,wy,Cy,Sy,Dy;function zC(){return A(this,null,function*(){let[,{GraphicsView2D:t,GraphicContainer:e,LabelManager:n,MapViewNavigation:i,MagnifierView2D:r,Stage:s}]=yield Promise.all([import("./chunk-L4D5ET7P.js"),import("./chunk-DQHN6KA5.js")]);by=t,wy=e,Cy=n,Sy=i,Dy=r,vy=s})}var J=class extends s0(c0(a0(k0))){constructor(t){super(t),this._magnifierView=null,this.stage=null,this._resolveWhenReady=[],this.rootLayerViews=new ir({getCollections:()=>[this.basemapView?.baseLayerViews,this.layerViews,this.basemapView?.referenceLayerViews],getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.fullOpacity=1,this.goToManager=new jo({view:this}),this.graphicsView=null,this.stateManager=new xt({constraints:new Zu({view:this})}),this.stationaryManager=new bs,this.labelManager=null,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.supersampleScreenshotsEnabled=!0,this.supportsGround=!1,this.frameTask=new hl(this),this.floors=new ae,this.highlightOptions=new dd,this.inputManager=new Y0({view:this}),this.map=null,this.spatialReferenceLocked=!1,this.timeline=new Dd,this.type="2d",this.ui=new hh,this.test={takeScreenshot:e=>A(this,null,function*(){return ey(this._getScreenshotView(e),e)})},this.padding={top:0,right:0,bottom:0,left:0},this.addHandles([R(()=>this.viewpoint,()=>this.stationaryManager.flip(),tn),this.on("resize",e=>this.stateManager.resize(e.width,e.height))]),lg()}destroy(){this._set("preconditionsReady",!1),this.frameTask=He(this.frameTask),this.goToManager.destroy(),this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new Al(this.featuresTilingScheme)}get constraintsInfo(){let t=this.defaultsFromMap?.tileInfo,e=this.spatialReference;return{lods:t?.spatialReference?.equals(e)?t.lods:null,spatialReference:e}}get state(){return this.stateManager.state}get initialExtentRequired(){if(!this.stateManager)return!1;let{scale:t,constraints:e,center:n,viewpoint:i,extent:r}=this,s=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties?.viewpoint)&&!r&&(e?.effectiveLODs||(s=-1),(!n||t===0&&s===-1)&&(i?.targetGeometry==null||i.targetGeometry.type!=="extent"&&!i.scale))}get _defaultsFromMapSettings(){return{required:{tileInfo:!0,heightModelInfo:!1,extent:!1},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get typeSpecificPreconditionsReady(){let t=this._getDefaultViewpoint();if(!t)return!1;let e=t.targetGeometry,n=this.spatialReference;return Rf(e.spatialReference,n)}set animation(t){let e=this._get("animation");if(t===e)return;if(e&&e.stop(),t!==this.animationManager.animation&&this.animationManager.stop(),!t||t.isFulfilled())return this._set("animation",null),void(this.frameTask.animationInProgress=!1);this._set("animation",t),this.frameTask.animationInProgress=!0;let n=()=>{this.destroyed||(t===this._get("animation")&&(this._set("animation",null),this.frameTask?.requestFrame()),this.frameTask.animationInProgress=!1)};t.when(n,n)}get background(){return rd(this.map)?this.map.initialViewProperties.background:null}set background(t){this._override("background",t)}get center(){return this.stateManager?.center??null}set center(t){this.stateManager.center=t}get constraints(){return this.stateManager?.constraints}set constraints(t){t.view=this;let e=this.stateManager.constraints;this.stateManager.constraints=t,e?.destroy()}get extent(){return this.stateManager?.extent??null}set extent(t){this.stateManager.extent=t}get padding(){return this.stateManager?.padding}set padding(t){this.stateManager&&(this.stateManager.padding=t)}get rendering(){return this.stage?.renderRequested??!1}get resizeAlign(){return this.stateManager.resizeAlign}set resizeAlign(t){this.stateManager.resizeAlign=t}get resolution(){return this.stateManager.resolution??0}get rotation(){return this.stateManager.rotation??0}set rotation(t){let{rotationEnabled:e}=this.constraints;this.constraints.rotationEnabled=!0,this.stateManager.rotation=t,this.constraints.rotationEnabled=e}get scale(){return this.stateManager?.scale??0}set scale(t){this.stateManager&&(this.stateManager.scale=t)}get stationary(){return!this.animation&&!this.navigating&&!this.resizing&&this.stationaryManager.stationary}get updating(){let t=!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(e=>!e.destroyed&&!("layerViews"in e)&&e.updating===!0));if(ut("esri-2d-log-updating")){let e=this.allLayerViews.reduce((n,i)=>te(I({},n),{[`${i.layer.id}(${i.layer.type})`]:!i.destroyed&&!("layerViews"in i)&&i.updating}),{});console.log(`Updating MapView: ${t}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${this.layerViewManager?.updating}
-> labelManager.updating: ${this.labelManager?.updating}
-> graphicsView.updating: ${this.graphicsView?.updating}
-> allLayerViews: ${JSON.stringify(e)}
`)}return t}get viewpoint(){return this.stateManager.viewpoint??null}set viewpoint(t){this.stateManager.viewpoint=t,this.frameTask.requestFrame()}get zoom(){return this.stateManager.zoom??-1}set zoom(t){this.stateManager.zoom=t}get navigating(){return this.mapViewNavigation?.interacting??!1}goTo(t,e){return this.goToManager.goTo(t,e)}hitTest(t,e){return A(this,null,function*(){return Q0(this,t,e)})}takeScreenshot(t){return A(this,null,function*(){return X0(this._getScreenshotView(t),t)})}toMap(t){if(!this.ready)return null;let e=cl(t)?ll(this,t):t;return this.stateManager.toMap(e)}toScreen(t,e){return this.stateManager.toScreen(t,e)}on(t,e,n,i){return this.inputManager&&this.viewEvents.on(t,e,n,i)||super.on(t,e)}hasEventListener(t){return super.hasEventListener(t)||this.viewEvents.hasHandler(t)}whenLayerView(t){return super.whenLayerView(t)}graphicChanged(t){this.graphicsView&&this.graphicsView.graphicUpdateHandler(t)}whenReady(){return new Promise(t=>{this.ready?t(this):this._resolveWhenReady.push(t)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){return this.map&&"initialViewProperties"in this.map&&this.map?.initialViewProperties?.spatialReference||this.defaultsFromMap?.spatialReference||null}getDefaultTimeZone(){return rd(this.map)?this.map.initialViewProperties.timeZone:null}hasLayerViewModule(t){return ju.hasLayerViewModule(t)}importLayerView(t){return ju.importLayerView(t)}pixelSizeAt(){return this.ready?this.resolution:(K.getLogger(this).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}popupHitTest(t){return A(this,null,function*(){let e=this.toMap(t),n=yield this.hitTest(t),i=this.allLayerViews.toArray().reverse(),r=new globalThis.Map(i.map(l=>[l.layer.uid,l])),s=[],o=0,a=0;for(;o<n.results.length||a<i.length;){let l=n.results.at(o);if(l&&l.type!=="graphic"){++o;continue}let d=r.get((l?.layer??l?.graphic.layer)?.uid);if((!l||d)&&a<i.length&&i.at(a)!==d){let h=i.at(a);"fetchPopupFeaturesAtLocation"in h&&s.push({mapPoint:e,layerView:h}),++a}else l&&(s.push({graphic:l.graphic,layerView:d}),++o)}return{hits:s,location:e}})}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}validate(){return A(this,null,function*(){let t=ny(this.type);if(ut("safari")&&ut("safari")<9&&(t=new re("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:ut("safari")})),t!=null)throw K.getLogger(this).warn("#validate()",t.message),t})}loadAsyncDependencies(){return zC()}_getDefaultViewpoint(){let{constraints:t,initialExtent:e,map:n,padding:i,size:r}=this;if(!t)return null;let s=n&&"initialViewProperties"in n?n.initialViewProperties:void 0,o=this.stateManager.getUserStartupOptions(this.size),a=s?.viewpoint,l=a?.targetGeometry?.extent??e,d=l?.center,h=a?.rotation??0,p=a?.scale||l&&Pa(l,[r[0]-i.left-i.right,r[1]-i.top-i.bottom]),m=o.center??d,f=o.rotation??h,w=o.scale??p;return m&&w?new Ci({targetGeometry:m,scale:w,rotation:f}):null}_startup(){this.timeline.begin("MapView Startup");let t=this._getDefaultViewpoint();this.stateManager.startup(t,this.size,this.spatialReference,this.defaultsFromMap.extent?.center),this.graphics.owner=this;let e=new vy(this.surface,{canvas:this.renderCanvas,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this.stage=e,this._magnifierView=new Dy,this._magnifierView.magnifier=this.magnifier;let n=new Cy({view:this});this._set("labelManager",n);let i=new R0({view:this});this._set("animationManager",i);let r=new Sy({view:this,animationManager:i});this._set("mapViewNavigation",r),this._setupSpatialReferenceDependentProperties(),this.addHandles([this.rootLayerViews.on("change",()=>this._updateStageChildren()),e.on("webgl-error",o=>this.fatalError=o.error),R(()=>this.stationary,o=>e.stationary=o,si),R(()=>this.background,o=>{e.backgroundColor=o?.color,this._magnifierView.backgroundColor=o?.color},si),R(()=>this.magnifier,o=>this._magnifierView.magnifier=o,si),R(()=>this.renderingOptions,o=>e.renderingOptions=o,si),R(()=>this.highlightOptions,o=>e.highlightOptions=o,si),R(()=>this.state.id,()=>e.state=this.state,si)],"map-view"),this._updateStageChildren();let s=this._resolveWhenReady;this._resolveWhenReady=[],s.forEach(o=>o(this)),this.timeline.end("MapView Startup"),this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.removeHandles("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animation=null,this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this.stage.destroy(),this.stage=null,this._set("graphicsView",null),this._magnifierView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask.stop(),this.stationaryManager.clear(),this._set("ready",!1),this.stateManager.teardown()}_updateStageChildren(){this.stage.removeAllChildren(),this.rootLayerViews.forEach(e=>{this.stage.addChild(e.container)});let t=this.graphicsView;this.stage.addChild(t.container),this.stage.addChild(this._magnifierView)}_setupSpatialReferenceDependentProperties(){let t=new Yf(Sf.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",t);let e=new by({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new wy(t)});this._set("graphicsView",e)}_destroySpatialReferenceDependentProperties(){let t=this.graphicsView;this._set("graphicsView",null),t.destroy(),this._set("featuresTilingScheme",null)}_getScreenshotView(t){let{allLayerViews:e,padding:n,size:i,stage:r}=this;return{allLayerViews:e,backgroundColor:t?.ignoreBackground?null:this.background?.color,padding:n,size:i,stage:r}}_spatialReferenceChanged(t){if(this.ready){this.frameTask.stop();for(let e of this.allLayerViews)e.processDetach();this._destroySpatialReferenceDependentProperties(),this.stateManager.changeSpatialReference(t),this.stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(let e of this.allLayerViews)e.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}}};J.type="2d",c([u({readOnly:!0})],J.prototype,"animationManager",void 0),c([u({constructOnly:!0})],J.prototype,"deactivatedWebGLExtensions",void 0),c([u({constructOnly:!0})],J.prototype,"debugWebGLExtensions",void 0),c([u({readOnly:!0})],J.prototype,"featuresTilingScheme",void 0),c([u({readOnly:!0})],J.prototype,"fullOpacity",void 0),c([u()],J.prototype,"goToManager",void 0),c([u({readOnly:!0})],J.prototype,"graphicsTileStore",null),c([u()],J.prototype,"graphicsView",void 0),c([u()],J.prototype,"stateManager",void 0),c([u()],J.prototype,"constraintsInfo",null),c([u({readOnly:!0})],J.prototype,"state",null),c([u()],J.prototype,"initialExtentRequired",null),c([u()],J.prototype,"labelManager",void 0),c([u({readOnly:!0})],J.prototype,"mapViewNavigation",void 0),c([u({constructOnly:!0})],J.prototype,"renderCanvas",void 0),c([u()],J.prototype,"renderingOptions",void 0),c([u({constructOnly:!0})],J.prototype,"supersampleScreenshotsEnabled",void 0),c([u({readOnly:!0})],J.prototype,"supportsGround",void 0),c([u()],J.prototype,"_defaultsFromMapSettings",null),c([u({readOnly:!0})],J.prototype,"typeSpecificPreconditionsReady",null),c([u()],J.prototype,"animation",null),c([u({type:yy})],J.prototype,"background",null),c([u()],J.prototype,"center",null),c([u({type:Zu})],J.prototype,"constraints",null),c([u()],J.prototype,"extent",null),c([u()],J.prototype,"floors",void 0),c([u({type:dd})],J.prototype,"highlightOptions",void 0),c([u({readOnly:!0})],J.prototype,"inputManager",void 0),c([u()],J.prototype,"map",void 0),c([u()],J.prototype,"padding",null),c([u({readOnly:!0})],J.prototype,"rendering",null),c([u()],J.prototype,"resizeAlign",null),c([u({readOnly:!0})],J.prototype,"resolution",null),c([u()],J.prototype,"rotation",null),c([u()],J.prototype,"scale",null),c([u({constructOnly:!0})],J.prototype,"spatialReferenceLocked",void 0),c([u()],J.prototype,"stationary",null),c([u({type:Dd,readOnly:!0})],J.prototype,"timeline",void 0),c([u({readOnly:!0})],J.prototype,"type",void 0),c([u({readOnly:!0})],J.prototype,"updating",null),c([u()],J.prototype,"viewpoint",null),c([u()],J.prototype,"zoom",null),c([u({readOnly:!0})],J.prototype,"navigating",null),c([u(),wi(t=>t instanceof Vl?t:Vm(hh,t))],J.prototype,"ui",void 0),J=c([D("esri.views.MapView")],J);var Ty=J;function My(t){let e="metric";if(t==null)return e;let n=t.map,i=(n&&"portalItem"in n?n.portalItem?.portal:null)??_g.getDefault();switch(i.user?.units??i.units){case e:return e;case"english":return"imperial"}return rf(t.spatialReference)??e}var Iy={readOnly:!0,get(){return My(this.view)}};var Rt="esri-scale-bar",Me={base:Rt,labelContainer:`${Rt}__label-container`,rulerLabelContainer:`${Rt}__label-container--ruler`,lineLabelContainer:`${Rt}__label-container--line`,topLabelContainer:`${Rt}__label-container--top`,bottomLabelContainer:`${Rt}__label-container--bottom`,label:`${Rt}__label`,line:`${Rt}__line`,topLine:`${Rt}__line--top`,bottomLine:`${Rt}__line--bottom`,ruler:`${Rt}__ruler`,rulerBlock:`${Rt}__ruler-block`,barContainer:`${Rt}__bar-container`,rulerBarContainer:`${Rt}__bar-container--ruler`,lineBarContainer:`${Rt}__bar-container--line`};function Ey(t){if(!t)return null;if(ef(t)&&t.wkid){let n=Of[t.wkid];if(n)return n}let e=t.wkt2||t.wkt;if(e){let n=GC(e);if(n)return n}return null}function GC(t){let e=xf.exec(t);if(!e||e.length!==2)return null;let n=e[1].split(",");if(!n||n.length<3)return null;let i=parseFloat(n[1]),r=parseFloat(n[2]);return isNaN(i)||isNaN(r)?null:{a:i,f:r===0?0:1/r}}function jC(t){let e=Ey(t);if($C(e))return e;let n=e.a*(1-e.f);return Object.assign(e,{b:n,eSq:1-(n/e.a)**2,radius:(2*e.a+n)/3,densificationRatio:1e4/((2*e.a+n)/3)})}function $C(t){return t!=null&&"b"in t&&"eSq"in t&&"radius"in t}function fh(t){return Ey(t)!==null}function xy(t,e="meters"){if(!t)throw new re("geodesic-lengths:invalid-geometries","the input geometries type is not supported");if(t.some(i=>!fh(i.spatialReference)))throw new re("geodesic-lengths:invalid-spatial-reference","the input geometries spatial reference is not supported");let n=[];for(let i=0;i<t.length;i++){let r=t[i],{spatialReference:s}=r,o=r.type==="polyline"?r.paths:r.rings,a=0;for(let l=0;l<o.length;l++){let d=o[l],h=0;for(let p=1;p<d.length;p++){let m=d[p-1][0],f=d[p][0],w=d[p-1][1],M=d[p][1];if(w!==M||m!==f){let _=new mh;UC(_,[m,w],[f,M],s),h+=_.distance}}a+=h}a=nn(a,"meters",e),n.push(a)}return n}var mh=class{constructor(e=0,n=void 0,i=void 0){this.distance=e,this.azimuth=n,this.reverseAzimuth=i}};function UC(t,e,n,i){let r=e[0]*In,s=e[1]*In,o=n[0]*In,a=n[1]*In,{a:l,b:d,f:h,radius:p}=jC(i),m=o-r,f=Math.atan((1-h)*Math.tan(s)),w=Math.atan((1-h)*Math.tan(a)),M=Math.sin(f),_=Math.cos(f),S=Math.sin(w),O=Math.cos(w),B,x,F,P,X,ee,he,me,Ie,$e,Oe=1e3,qe=m;do{if(he=Math.sin(qe),me=Math.cos(qe),F=Math.sqrt(O*he*(O*he)+(_*S-M*O*me)*(_*S-M*O*me)),F===0)return t.distance=0,t.azimuth=void 0,t.reverseAzimuth=void 0,t;X=M*S+_*O*me,ee=Math.atan2(F,X),Ie=_*O*he/F,x=1-Ie*Ie,P=X-2*M*S/x,isNaN(P)&&(P=0),$e=h/16*x*(4+h*(4-3*x)),B=qe,qe=m+(1-$e)*h*Ie*(ee+$e*F*(P+$e*X*(2*P*P-1)))}while(Math.abs(qe-B)>1e-12&&--Oe>0);if(Oe===0){let Ji=p,yn=Math.acos(Math.sin(s)*Math.sin(a)+Math.cos(s)*Math.cos(a)*Math.cos(o-r))*Ji,Pt=o-r,fi=Math.sin(Pt)*Math.cos(a),vn=Math.cos(s)*Math.sin(a)-Math.sin(s)*Math.cos(a)*Math.cos(Pt),Ri=Math.atan2(fi,vn);return t.azimuth=Ri/In,t.distance=yn,t.reverseAzimuth=void 0,t}let nt=x*(l*l-d*d)/(d*d),Ye=nt/1024*(256+nt*(nt*(74-47*nt)-128)),gt=d*(1+nt/16384*(4096+nt*(nt*(320-175*nt)-768)))*(ee-Ye*F*(P+Ye/4*(X*(2*P*P-1)-Ye/6*P*(4*F*F-3)*(4*P*P-3)))),mi=Math.atan2(O*Math.sin(qe),_*S-M*O*Math.cos(qe)),ti=Math.atan2(_*Math.sin(qe),_*S*Math.cos(qe)-M*O);return t.azimuth=mi/In,t.distance=gt,t.reverseAzimuth=ti/In,t}function WC(t){return t>.5?{min:.5,max:1}:t>.2?{min:.2,max:.5}:{min:.1,max:.2}}function qC(t,e){switch(e){case"metric":return t>1e3?{distance:nn(t,"meters","kilometers"),unit:"kilometer"}:t>1?{distance:t,unit:"meter"}:t>.01?{distance:nn(t,"meters","centimeters"),unit:"centimeter"}:{distance:nn(t,"meters","millimeters"),unit:"millimeter"};case"imperial":case"non-metric":return t>1609.344?{distance:nn(t,"meters","miles"),unit:"mile"}:t>.3048?{distance:nn(t,"meters","feet"),unit:"foot"}:{distance:nn(t,"meters","inches"),unit:"inch"}}}function YC(t){let{isWebMercator:e,wkt:n,wkt2:i}=t;return e||((i||n)?.includes("WGS_1984_Web_Mercator")??!1)}function Oy({state:{paddedViewState:t},spatialReference:e,width:n}){return e.isWrappable&&t.worldScreenWidth<n}function ky(t,e){let{x:n,y:i}=t?af(e,!0):e;return[n,i]}var Ms=class extends z{constructor(t){super(t),this.scaleComputedFrom=Ce(),this.view=null}get state(){return this.view?.ready&&this.view?.type==="2d"?"ready":"disabled"}getScaleBarProperties(t,e){if(this.state==="disabled"||isNaN(t)||!e||!this.view)return null;let n=this._getDistanceInMeters();return n==null?null:this._getScaleBarProps(t,n,e)}_getDistanceInMeters(){let{state:t,spatialReference:e}=this.view;if(!tf(e))return null;let{isGeographic:n}=e,i=YC(e);if(!n&&!i)return t.extent.width*(nf(e)??1);let[r,s]=this._getScaleMeasuringPoints(),o=i||n&&!fh(e)?er.WGS84:e,a=new nd({paths:[[ky(i,r),ky(i,s)]],spatialReference:o}),l=Pf(a,10),d;try{[d]=xy([l],"meters")}catch{return null}return d}_getScaleMeasuringPoints(){let t=this.view,{width:e,height:n,position:i,spatialReference:r}=t;if(Oy(t)){let l=Ia(r),{valid:d}=l;return[new ze(d[0],0,r),new ze(d[1],0,r)]}let s=this.scaleComputedFrom.y-i[1];s>n?s=n:s<0&&(s=0);let o=Ce(0,s),a=Ce(e,s);return[t.toMap(o),t.toMap(a)]}_getScaleBarProps(t,e,n){let i=this.view,r=t*e/(Oy(i)?i.state.paddedViewState.worldScreenWidth:i.width);if(r<.001)return null;let s=qC(r,n),{distance:o,unit:a}=s,l=o,d=0;for(;l>=1;)l/=10,d++;let{min:h,max:p}=WC(l),m=p/l>=l/h?h:p;return{length:t*(m/l),value:10**d*m,unit:a}}};c([u()],Ms.prototype,"scaleComputedFrom",void 0),c([u({readOnly:!0})],Ms.prototype,"state",null),c([u()],Ms.prototype,"view",void 0),Ms=c([D("esri.widgets.ScaleBar.ScaleBarViewModel")],Ms);var Ry=Ms;function Ay(t,e){return Zr(t,{style:"unit",unit:e,unitDisplay:"short"})}var Zi=class extends It{constructor(t,e){super(t,e),this.messages=null,this.style="line",this.viewModel=new Ry}initialize(){this.addHandles(R(()=>{let{view:t}=this;return[t?.stationary,t?.center,t?.scale,t?.zoom]},([t])=>{t&&this.scheduleRender()}))}get label(){return this.messages?.widgetLabel??""}set label(t){this._overrideIfSome("label",t)}get unit(){return this._defaultUnit}set unit(t){t==="non-metric"&&Tm(K.getLogger(this),"unit",{replacement:"Please use 'imperial' instead of 'non-metric'.",see:"https://developers.arcgis.com/javascript/latest/api-reference/esri-widgets-ScaleBar.html#unit",version:"4.27",warnOnce:!0}),this._overrideIfSome("unit",t)}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){let t=this.viewModel.state==="disabled",e={[Ge.disabled]:t},n,i;if(!t){let{unit:r,style:s}=this,o=r==="metric"||r==="dual",a=100,l=r==="dual"?"line":s;if(r==="imperial"||r==="non-metric"||r==="dual"){let d=this.viewModel.getScaleBarProperties(a,"imperial");d&&(i=l==="ruler"?this._renderRuler(d):this._renderLine(d,"bottom"))}if(o){let d=this.viewModel.getScaleBarProperties(a,"metric");d&&(n=l==="ruler"?this._renderRuler(d):this._renderLine(d,"top"))}}return y("div",{afterCreate:this._handleRootCreateOrUpdate,afterUpdate:this._handleRootCreateOrUpdate,bind:this,class:this.classes(Me.base,Ge.widget,e)},n,i)}_renderRuler(t){let{length:e,unit:n,value:i}=t,r=Math.round(e),s=Ay(i,n);return y("div",{class:this.classes(Me.barContainer,Me.rulerBarContainer),key:Me.rulerBarContainer},y("div",{class:Me.ruler,styles:{width:`${r}px`}},y("div",{class:Me.rulerBlock}),y("div",{class:Me.rulerBlock}),y("div",{class:Me.rulerBlock}),y("div",{class:Me.rulerBlock})),y("div",{class:this.classes(Me.labelContainer,Me.rulerLabelContainer)},y("div",{class:Me.label},"0"),y("div",{class:Me.label},s)))}_renderLine(t,e){let{length:n,unit:i,value:r}=t,s=Math.round(n),o=Ay(r,i),a={[Me.topLabelContainer]:e==="top",[Me.bottomLabelContainer]:e==="bottom"},l=y("div",{class:this.classes(Me.labelContainer,Me.lineLabelContainer,a),key:Me.labelContainer},y("div",{class:Me.label},o)),d={[Me.topLine]:e==="top",[Me.bottomLine]:e==="bottom"},h=y("div",{class:this.classes(Me.line,d),key:Me.line,styles:{width:`${s}px`}});return y("div",{class:this.classes(Me.barContainer,Me.lineBarContainer),key:Me.lineBarContainer},[h,l])}_handleRootCreateOrUpdate(t){if(!this.viewModel)return;let{scaleComputedFrom:e}=this.viewModel,n=t.getBoundingClientRect(),i=n.left+window.pageXOffset,r=n.top+window.pageYOffset,s=Ce(i,r);(s.x!==e.x||s.y!==e.y)&&(this.viewModel.scaleComputedFrom=s)}};c([u(Iy)],Zi.prototype,"_defaultUnit",void 0),c([u()],Zi.prototype,"label",null),c([u(),yt("esri/widgets/ScaleBar/t9n/ScaleBar")],Zi.prototype,"messages",void 0),c([u({type:["ruler","line"]})],Zi.prototype,"style",void 0),c([u({type:["metric","imperial","dual","non-metric"]})],Zi.prototype,"unit",null),c([u()],Zi.prototype,"view",null),c([u()],Zi.prototype,"viewModel",void 0),Zi=c([D("esri.widgets.ScaleBar")],Zi);var Fy=Zi;function Py(t){return t==null||t.type==="simple"||t.type==="unique-value"||t.type==="class-breaks"||t.type==="dictionary"||t.type==="heatmap"}function Ly(t,e,n){let i=t.effectiveClusterRenderer;if(!i||!("visualVariables"in i)||!i.visualVariables)return null;let r=i.visualVariables.find(h=>h.type==="size");if(!("stops"in r)||!r.stops)return null;let s=r.stops.find(h=>h.useMinValue),o=r.stops.find(h=>h.useMaxValue);if(s==null||o==null)return null;let a=n.featuresTilingScheme.getClosestInfoForScale(n.scale).level,l=r.field,d=e.getDisplayStatistics(a,l);return d?new ud({field:r.field,minSize:t.clusterMinSize,minDataValue:d.minValue,maxSize:t.clusterMaxSize,maxDataValue:d.maxValue}):null}function Ny(t){let n=Math.floor(Math.log10(Math.abs(t)))+1,i=n<4||n>6?4:n,r=1e6,s=Math.abs(t)>=r?"compact":"standard";return Zr(t,{notation:s,minimumSignificantDigits:2,maximumSignificantDigits:i})}var ZC="https://utility.arcgis.com/sharing/tools/legend",KC="esri.layers.ImageryLayer",QC="esri.layers.ImageryTileLayer",JC="esri.layers.WCSLayer",zl=/^\s*(return\s+)?\$view\.scale\s*(;)?\s*$/i,XC=new jm({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch"}),Gl=new es({size:6,outline:{color:[128,128,128,.5],width:.5}}),eS=new ld({style:"solid"});function yh(t){return t.type==="flow"}function Hy(t){return t.type==="vector-field"}function zy(t){return t.type==="raster-colormap"}function Gy(t){return t.type==="raster-stretch"}function jy(t){return t.type==="raster-shaded-relief"}function xs(t){return t.declaredClass==="esri.renderers.SimpleRenderer"}function Os(t){return t.declaredClass==="esri.renderers.ClassBreaksRenderer"}function $l(t){return t.declaredClass==="esri.renderers.UniqueValueRenderer"}function $y(t){return t.declaredClass==="esri.renderers.HeatmapRenderer"}function tS(t){return vh(t)||bh(t)||wh(t)||iS(t)}function iS(t){return t.declaredClass==="esri.renderers.PointCloudRGBRenderer"}function vh(t){return t.declaredClass==="esri.renderers.PointCloudClassBreaksRenderer"}function bh(t){return t.declaredClass==="esri.renderers.PointCloudStretchRenderer"}function wh(t){return t.declaredClass==="esri.renderers.PointCloudUniqueValueRenderer"}function Uy(t){return t.declaredClass==="esri.renderers.DotDensityRenderer"}function Wy(t){return t.declaredClass==="esri.renderers.PieChartRenderer"}function nS(t,e){return xs(t)||Os(t)||$l(t)||$y(t)||Uy(t)||Wy(t)?e.type==="2d"||Py(t):Gy(t)||zy(t)||jy(t)||vh(t)||bh(t)||wh(t)||Hy(t)||yh(t)}function rS(t){return t.declaredClass==="esri.layers.BuildingSceneLayer"}function gh(t){return t.declaredClass==="esri.layers.SubtypeGroupLayer"}function sS(t){return t.declaredClass==="esri.layers.VoxelLayer"}function oS(t){return t.declaredClass==="esri.layers.WMSLayer"}function aS(t){return t.declaredClass==="esri.layers.WMTSLayer"}function _h(t){return t.declaredClass==="esri.layers.MapImageLayer"}function Vy(t){return t.declaredClass==="esri.layers.TileLayer"}function Is(t){return t.declaredClass===KC}function jl(t){return t.declaredClass===QC}function lS(t){return t.declaredClass===JC}function cS(t){return t.type==="stretch-ramp"}function dS(t){return("authoringInfo"in t?t?.authoringInfo:null)?.type==="univariate-color-size"}function uS(t){let e="authoringInfo"in t?t?.authoringInfo:null;return e?.type==="univariate-color-size"&&e?.univariateTheme==="above-and-below"}function By(t){return"sublayers"in t}function hn(t,e){return A(this,null,function*(){let n=yield Da("esri/widgets/Legend/t9n/Legend");return t!=="previewTemplateAriaLabel"||e||(t="previewAriaLabel"),Xn(n[t],{label:e})})}var hS=new es({style:"path",path:"M10,5 L5,0 0,5 M5,0 L5,15",size:15,outline:{width:1,color:[85,85,85,1]}}),Es={},tt=class extends z{constructor(t){super(t),this._hasColorRamp=!1,this._hasOpacityRamp=!1,this._hasSizeRamp=!1,this._webStyleSymbolCache=new Map,this._dotDensityUrlCache=new Map,this._scaleDrivenSizeVariable=null,this._hasClusterSizeVariable=!1,this.children=new ae,this.layerView=null,this.layer=null,this.legendElements=[],this.parent=null,this.hideLayersNotInCurrentView=!1,this.keepCacheOnDestroy=!1,this.respectLayerVisibility=!0,this.sublayerIds=[],this.title=null,this.view=null}initialize(){let t=()=>this.notifyChange("ready");this.addHandles([Bt(()=>this.children,"change",e=>{let{added:n,removed:i}=e;n.forEach(r=>{let s=`activeLayerInfo-ready-watcher-${r.layer.uid}`;this.addHandles(R(()=>r.ready,t,le),s)}),i.forEach(r=>this.removeHandles(r.layer.uid)),t()})]),this.keepCacheOnDestroy||(Es={})}destroy(){this._webStyleSymbolCache=null,this._dotDensityUrlCache=null,this._scaleDrivenSizeVariable=null,this.keepCacheOnDestroy||(Es=null)}get effectList(){let t=this.layer,e=null;return"effect"in t&&t.effect&&(e=new i_,e.effect=t.effect,e.endTransitions(),e.scale=this.scale),e}get opacity(){let t=this.layer.opacity,e=this.parent?.opacity,n=this.layer.parent,i=n&&"uid"in n?this._getParentLayerOpacity(n):null;return e!=null?e*t:i!=null?i*t:t}get ready(){return this.layer===null||(this.children.length>0?this._isGroupActive():this.legendElements.length>0)}get scale(){return this.view?.scale??0}get isScaleDriven(){let t=this.layer;if(t===null)return!1;if("effect"in t&&t.effect&&Array.isArray(t.effect))return!0;if("featureReduction"in t&&t.featureReduction){if(t.featureReduction.type==="cluster")return!0;if(t.featureReduction.type==="binning"&&"renderer"in t.featureReduction&&t.featureReduction.renderer)return this._isRendererScaleDriven(t.featureReduction.renderer)}return"renderer"in t&&t.renderer?this._isRendererScaleDriven(t.renderer):this._isLayerScaleDriven(this.layer)}get version(){return this._get("version")+1}buildLegendElementsForFeatureCollections(t){return A(this,null,function*(){if(!(!this.hideLayersNotInCurrentView||(yield this._isLayerInCurrentView())))return this.legendElements=[],void this.notifyChange("ready");let e=Array.from(t,n=>{if(gf(n))return this._getRendererLegendElements(n.renderer,{title:n.title});if(n.featureSet?.features.length){let i=n.layerDefinition,r=i?.drawingInfo,s=r&&og(r.renderer),o=XC.read(i.geometryType);return s?this._getRendererLegendElements(s,{title:n.name,geometryType:o}):(K.getLogger(this).warn("drawingInfo not available!"),null)}return null});try{let n=[],i=yield Promise.allSettled(e);for(let r of i)if(r.status==="fulfilled")for(let s of r.value??[])n.push(s);this.legendElements=n,this.notifyChange("ready")}catch(n){K.getLogger(this).warn("error while building legend for layer!",n)}})}buildLegendElementsForRenderer(t){return A(this,null,function*(){try{let e=!this.hideLayersNotInCurrentView||(yield this._isLayerInCurrentView());this.legendElements=e?yield this._getRendererLegendElements(t):[],this.notifyChange("ready")}catch(e){K.getLogger(this).warn("error while building legend for layer!",e)}})}buildLegendElementsForFeatureReduction(t){return A(this,null,function*(){try{let e=!this.hideLayersNotInCurrentView||(yield this._isLayerInCurrentView());this.legendElements=e?yield this._getLegendElementsForFeatureReduction(t):[],this.notifyChange("ready")}catch(e){K.getLogger(this).warn("error while building legend for layer!",e)}})}buildLegendElementsForTools(){return A(this,null,function*(){let t=this.layer;if(sS(t))this._constructLegendElementsForVoxelLayer();else if(aS(t))this._constructLegendElementsForWMTSlayer();else if(oS(t))yield this._constructLegendElementsForWMSSublayers();else if(rS(t))yield this._constructLegendElementsForBuildingSceneLayer();else if(_h(t)||Vy(t)||gh(t))yield this._constructLegendElementsForSublayers();else{this.removeHandles("imageryLayers-watcher");let e="default";if(Is(t)&&(e=(t?.rasterFunction?.functionName||"default")+"_"+(t.bandIds?.length?t.bandIds.join(""):"###")),jl(t))return;yield this._getLegendLayers(`${t.uid}-${e}`).then(n=>A(this,null,function*(){this.legendElements=[],this.notifyChange("ready");let i=n.map(r=>A(this,null,function*(){if(Is(t)){let o=R(()=>["renderingRule"in t&&t.rasterFunction,t.bandIds],()=>Fm(()=>A(this,null,function*(){Es.default=null,t.renderer?yield this.buildLegendElementsForRenderer(t.renderer):yield this.buildLegendElementsForTools()}))());this.addHandles(o,"imageryLayers-watcher")}let s=this._generateSymbolTableElementForLegendLayer(r);s&&s.infos.length&&(Is(t)&&(s.title=t.title),this.legendElements.push(s)),this.notifyChange("ready")}));yield Promise.allSettled(i)})).catch(n=>{K.getLogger(this).warn("Request to server for legend has failed!",n)})}})}_isLayerInCurrentView(){return A(this,null,function*(){let t=this.layer,e=this.layerView,n=e&&"createQuery"in e&&"queryFeatureCount"in e;if(!n&&!(e&&"createQuery"in t&&"queryFeatureCount"in t))return!0;yield Li(()=>!e.updating);let i=n?"createQuery"in e&&e.createQuery():"createQuery"in t&&t.createQuery();return i?(i.geometry=this.view.extent,(n?"queryFeatureCount"in e&&(yield e.queryFeatureCount(i)):"queryFeatureCount"in t&&(yield t.queryFeatureCount(i)))!==0):!0})}_getParentLayerOpacity(t){let e=1,n=t.parent;return n&&"uid"in n&&(e=this._getParentLayerOpacity(n)),t.opacity*e}_isGroupActive(){return this.children.some(t=>t.ready)}_isRendererScaleDriven(t){if(t.type==="dot-density")return!0;let e="valueExpression"in t?t.valueExpression:null;return zl.test(e)?!0:!!("visualVariables"in t?t.visualVariables:null)?.some(i=>this._isScaleDrivenSizeVariable(i))||this._hasScaleDrivenSymbols(t)}_hasScaleDrivenSymbols(t){switch(t.type){case"simple":return this._isScaleDrivenSymbol(t.symbol);case"class-breaks":return this._isScaleDrivenSymbol(t.defaultSymbol)||t.classBreakInfos.some(e=>this._isScaleDrivenSymbol(e.symbol));case"unique-value":return this._isScaleDrivenSymbol(t.defaultSymbol)||!!t.uniqueValueInfos?.some(e=>this._isScaleDrivenSymbol(e.symbol))}return!1}_isScaleDrivenSymbol(t){if(t?.type==="cim"){let{primitiveOverrides:e,minScale:n,maxScale:i}=t.data,r=e?.some(s=>/\$view\.scale/.test(s.valueExpressionInfo?.expression||""))??!1;return n!=null||i!=null||r}return!1}_isScaleDrivenSizeVariable(t){if(t&&t.type!=="size")return!1;let e=t,n=e.minSize,i=e.maxSize;return!(typeof n!="object"||!n||!this._isScaleDrivenSizeVariable(n))||!(typeof i!="object"||!i||!this._isScaleDrivenSizeVariable(i))||!!e.expression||zl.test(e.valueExpression)}_isLayerScaleDriven(t){if("minScale"in t&&t.minScale>0||"maxScale"in t&&t.maxScale>0)return!0;if("sublayers"in t&&t.sublayers)return t.sublayers.some(n=>this._isLayerScaleDriven(n));let e=t.parent;if(t.loaded===!1&&e&&_h(e)&&"source"in t&&t.source&&t.source.type==="map-layer"){for(let n of e.sourceJSON.layers??[])if(n.id===t.source.mapLayerId&&(n.minScale>0||n.maxScale>0))return!0}return!1}_constructLegendElementsForVoxelLayer(){return A(this,null,function*(){this.legendElements=[],this.removeHandles("voxel-style-watcher"),this.removeHandles("voxel-current-variable");let t=this.layer;this.addHandles(R(()=>t.currentVariableId,()=>this._constructLegendElementsForVoxelLayer()),"voxel-current-variable"),this.addHandles(R(()=>t.getVariableStyles(),()=>this._constructLegendElementsForVoxelLayer()),"voxel-style-watcher");let e=t.getVariableStyle(null),n=[];if(e){if(e.uniqueValues?.length){let s=[];e.uniqueValues.forEach(o=>{o.enabled&&s.push({label:o.label||`${o.value}`,value:o.value,symbol:new ld({color:o.color,outline:null})})}),s.length&&n.push({type:"symbol-table",title:e.label,infos:s})}else if(e.transferFunction){let{colorStops:s,stretchRange:o}=e.transferFunction,a=s.toArray().reverse(),l=o.map((h,p)=>`${p===0?wg:Cg} ${Ny(h)}`).reverse(),d=a.map(h=>({color:h.color,value:null,label:null}));d[0].label=l[0],d[d.length-1].label=l[1],n.push({type:"color-ramp",title:e.label,infos:d,preview:sn(a.map(h=>h.color),{ariaLabel:yield hn("previewColorRampAriaLabel")})})}}let i=t.opacity,r=n.reduce((s,o)=>[...s,...this._getAllInfos(o)],[]).filter(s=>!!s?.symbol).map(s=>this._getSymbolPreview(s,i));yield Promise.allSettled(r),this.legendElements=n,this.notifyChange("ready")})}_constructLegendElementsForWMTSlayer(){this.legendElements=[],this.removeHandles("wmts-activeLayer-watcher");let t=this.layer.activeLayer;this.addHandles(R(()=>{let{layer:n}=this;return n&&"activeLayer"in n&&n.activeLayer},()=>this._constructLegendElementsForWMTSlayer()),"wmts-activeLayer-watcher");let e=t.styleId?t.styles?.find(({id:n})=>n===t.styleId)?.legendUrl:void 0;e&&(this.legendElements=[{type:"symbol-table",title:t.title,infos:[{src:e,opacity:this.opacity}]}]),this.notifyChange("ready")}_constructLegendElementsForWMSSublayers(){return A(this,null,function*(){this.legendElements=[],this.removeHandles("wms-sublayers-watcher");let t=this.layer,e=null;(t.customParameters||t.customLayerParameters)&&(e=I(I({},t.customParameters),t.customLayerParameters)),this.addHandles(R(()=>{let{layer:n}=this;return n&&"sublayers"in n&&n.sublayers},()=>this._constructLegendElementsForWMSSublayers()),"wms-sublayers-watcher"),this.legendElements=yield this._generateLegendElementsForWMSSublayers(t.sublayers,e),this.notifyChange("ready")})}_generateLegendElementsForWMSSublayers(t,e){return A(this,null,function*(){let n=this.layer,i=[];this.addHandles(t.on("change",()=>this._constructLegendElementsForWMSSublayers()),"wms-sublayers-watcher");let r=this.sublayerIds?.map(o=>n.findSublayerById(o))?.filter(Vt)??[],s=r.length?r:t.toArray();for(let o of s){let a=R(()=>[o.title,o.visible,o.legendEnabled],()=>this._constructLegendElementsForWMSSublayers());if(this.addHandles(a,"wms-sublayers-watcher"),!this.respectLayerVisibility||o.visible&&o.legendEnabled){let l=yield this._generateSymbolTableElementForWMSSublayer(o,e);l?.infos.length&&i.unshift(l)}}return i})}_generateSymbolTableElementForWMSSublayer(t,e){return A(this,null,function*(){if(!t.legendUrl&&t.sublayers){let n=(yield this._generateLegendElementsForWMSSublayers(t.sublayers,e)).filter(i=>i);return{type:"symbol-table",title:t.title,infos:n}}return this._generateSymbolTableElementForLegendUrl(t,e)})}_generateSymbolTableElementForLegendUrl(t,e){return A(this,null,function*(){let n=t.legendUrl;if(!n)return;let i={type:"symbol-table",title:t.title||t.name||String(t.id??""),infos:[]};e&&(n=zm(n,e));let r=null,s=t.layer?.opacity;try{r=(yield ed(n,{responseType:"image"})).data,r&&(r.style.opacity=s)}catch{}return i.infos.push({src:n,preview:r,opacity:s}),i})}_getLegendLayers(t,e){let n=Es&&Es[t];return n?Promise.resolve(n):this._legendRequest(e).then(i=>{let r=i.layers;return Es[t]=r,r})}_legendRequest(t){let e=this.layer,n={f:"json",dynamicLayers:t};if(Is(e)){let r=e.exportImageServiceParameters.rasterFunction;if(r&&(n.renderingRule=JSON.stringify(r.functionDefinition?.toJSON()||r.toJSON())),e.bandIds&&(n.bandIds=e.bandIds.join()),e.raster||e.viewId||e.customParameters){let{raster:s,viewId:o,customParameters:a}=e;n=I(I({raster:s,viewId:o},n),a)}}let i=e.url.replace(/(\/)+$/,"");if("version"in e&&+e.version>=10.01){let r=i.indexOf("?");r>-1?i=i.substring(0,r)+"/legend"+i.substring(r):i+="/legend"}else{let r=i.toLowerCase().indexOf("/rest/"),s=i.substring(0,r)+i.substring(r+5,i.length);i=ZC+"?soapUrl="+encodeURI(s)+"&returnbytes=true"}return ed(i,{query:n}).then(r=>r.data)}_constructLegendElementsForBuildingSceneLayer(){return A(this,null,function*(){this.legendElements=[],this.removeHandles("sublayers-watcher");let t=this.layer;this.addHandles(R(()=>t.sublayers,()=>this._constructLegendElementsForBuildingSceneLayer()),"sublayers-watcher");try{this.legendElements=yield this._generateLegendElementsForBuildingSublayers(t.sublayers,this.opacity),this.notifyChange("ready")}catch(e){K.getLogger(this).warn("Request to server for legend has failed!",e)}})}_generateLegendElementsForBuildingSublayers(t,e){return A(this,null,function*(){let n=[];this.addHandles(t.on("change",()=>this._constructLegendElementsForBuildingSceneLayer()),"sublayers-watcher");let i=t.toArray();for(let r of i){let s=R(()=>["renderer"in r&&r.renderer,r.opacity,r.title,r.visible],()=>this._constructLegendElementsForBuildingSceneLayer());if(this.addHandles(s,"sublayers-watcher"),!this.respectLayerVisibility||r.visible){let o=r?.opacity!=null?r.opacity:null,a=o!=null?o*e:e;if(r.type==="building-group"){let l={type:"symbol-table",title:r.title,infos:[]},d=yield this._generateLegendElementsForBuildingSublayers(r.sublayers,a);l.infos.push(...d),n=[l,...n]}else r.renderer&&(n=[...yield this._getRendererLegendElements(r.renderer,{title:r.title,opacity:a,sublayer:r}),...n])}}return n.filter(r=>!!r&&(!("infos"in r)||!r.infos||r.infos.length>0))})}_constructLegendElementsForSublayers(){return A(this,null,function*(){this.legendElements=[],this.removeHandles("sublayers-watcher");let t=this.layer;if(_h(t)||Vy(t)||gh(t)){this.addHandles(R(()=>t.sublayers,()=>this._constructLegendElementsForSublayers),"sublayers-watcher");try{this.legendElements=yield this._generateLegendElementsForSublayers(t.sublayers,this.opacity),this.notifyChange("ready")}catch(e){K.getLogger(this).warn("Request to server for legend has failed!",e)}}})}_generateLegendElementsForSublayers(t,e,n){return A(this,null,function*(){let i=this.layer,r=[];this.addHandles(t.on("change",()=>this._constructLegendElementsForSublayers()),"sublayers-watcher");let s=t.toArray();!n&&this.sublayerIds&&this.sublayerIds.length&&(s=gh(i)?this.sublayerIds.map(o=>i.findSublayerForSubtypeCode(o)).filter(Vt):this.sublayerIds.map(o=>i.findSublayerById(o)).filter(Vt));for(let o of s){let a=R(()=>[o.renderer,o.opacity,o.title,o.visible,o.legendEnabled],()=>this._constructLegendElementsForSublayers());if(this.addHandles(a,"sublayers-watcher"),!this.respectLayerVisibility||o.visible&&o.legendEnabled&&this._isSublayerInScale(o)){let l=o?.opacity!=null?o.opacity:null,d=l!=null?l*e:e,h=!By(o)||o.originIdOf("renderer")>Ur.SERVICE&&!o.sublayers;if(o.renderer&&h)yield o.load(),r=[...yield this._getRendererLegendElements(o.renderer,{title:o.title,opacity:d,sublayer:o}),...r];else if(By(o)){let p=yield this._generateSymbolTableElementForSublayer(o,d,n);p&&r.unshift(p)}}}return r.filter(o=>!!o&&(!("infos"in o)||!o.infos||o.infos.length>0))})}_generateSymbolTableElementForSublayer(t,e,n){return A(this,null,function*(){if(!n){n=new Map;let r=this.layer,s=t.source,o=null;if(!(!s||s.type==="map-layer"&&s.mapLayerId===t.id&&(!s.gdbVersion||s.gdbVersion===("gdbVersion"in r&&r.gdbVersion)))||t.originIdOf("renderer")>Ur.SERVICE||t.originIdOf("labelingInfo")>Ur.SERVICE||t.originIdOf("labelsVisible")>Ur.SERVICE){let l=new mg({layer:this.layer});o=l.hasDynamicLayers?l.dynamicLayers:null,l.destroy()}let a=o||`${r.uid}-default`;(yield this._getLegendLayers(a,o)).forEach(l=>n.set(l.layerId,l))}let i=n.get(t.id);if((!i||i?.subLayerIds&&i.defaultVisibility)&&t.sublayers){let r=yield this._generateLegendElementsForSublayers(t.sublayers,e,n);return{type:"symbol-table",title:t.title,infos:r}}return this._generateSymbolTableElementForLegendLayer(i,t,e)})}_generateSymbolTableElementForLegendLayer(t,e,n){if(!t?.legend||this.respectLayerVisibility&&!this._isLegendLayerInScale(t,e))return null;let i=e?.renderer,r=e?.title||t.layerName;if(i&&(!e||e?.originIdOf("renderer")>Ur.SERVICE)){let a=e?.title||this._getRendererTitle(i,e);a&&(r&&typeof a!="string"&&"title"in a&&(a.title=r),r=a)}let s={type:"symbol-table",title:r,legendType:t.legendType||null,infos:[]},o=e?this._sanitizeLegendForSublayer(t.legend.slice(),e):t.legend;return t.legendGroups&&t.legendGroups.length>0?t.legendGroups.forEach(a=>{let l={type:"symbol-table",title:a.heading,legendType:t.legendType||null,infos:this._generateSymbolTableElementInfosForLegendLayer(o.filter(d=>d.groupId===a.id),t.layerId,n)};l.infos?.length>0&&s.infos.push(l)}):s.infos=this._generateSymbolTableElementInfosForLegendLayer(o,t.layerId,n),s.infos.length>0?s:null}_generateSymbolTableElementInfosForLegendLayer(t,e,n){return t.map(i=>{let r=i.url;if(i.imageData&&i.imageData.length>0)r=`data:image/png;base64,${i.imageData}`;else{if(r.indexOf("http")===0)return null;r=Gm(`${this.layer.url}/${e}/images/${r}`)}return{label:i.label,src:r,opacity:n??this.opacity,width:i.width,height:i.height}}).filter(Vt)}_isSublayerInScale(t){let e=t.minScale||0,n=t.maxScale||0;return!(e>0&&e<this.scale||n>this.scale)}_isLegendLayerInScale(t,e){let n=e||this.layer,i=null,r=null,s=!0;return!n.minScale&&n.minScale!==0||!n.maxScale&&n.maxScale!==0?(t.minScale===0&&n.tileInfo&&(i=n.tileInfo.lods[0].scale),t.maxScale===0&&n.tileInfo&&(r=n.tileInfo.lods[n.tileInfo.lods.length-1].scale)):(i=Math.min(n.minScale,t.minScale)||n.minScale||t.minScale,r=Math.max(n.maxScale,t.maxScale)),(i>0&&i<this.scale||r>this.scale)&&(s=!1),s}_sanitizeLegendForSublayer(t,e){if("version"in this.layer&&+this.layer.version<10.1||t.length===0)return t;let n=e.renderer,i=t.some(o=>o.values),r=0,s=null;return i&&t.some((o,a)=>(o.values||(r=a,s=o,s.label||(s.label="others")),s!=null)),n?n.type==="unique-value"?s&&(t.splice(r,1),t.push(s)):n.type==="class-breaks"&&(s&&t.splice(r,1),t.reverse(),s&&t.push(s)):s&&(t.splice(r,1),t.push(s)),t}_getRendererLegendElements(n){return A(this,arguments,function*(t,e={}){if(!nS(t,this.view))return K.getLogger(this).warn(`Renderer of type '${t.type}' not supported!`),[];if(tS(t))return this._constructPointCloudRendererLegendElements(t,e);if(Uy(t))return this._constructDotDensityRendererLegendElements(t);let i=yield this._loadRenderer(t);return Wy(i)?this._constructPieChartRendererLegendElements(i):this._constructRendererLegendElements(i,e)})}_getLegendElementsForFeatureReduction(t){return A(this,null,function*(){let e=null;return t.type==="binning"?e=t.renderer:t.type==="cluster"&&(e=this._getClusterRenderer(t)),e?this._getRendererLegendElements(e):[]})}_getPointCloudRendererTitle(t){return(t.legendOptions?.title||t.field)??""}_constructPointCloudRendererLegendElements(n){return A(this,arguments,function*(t,e={}){let i=e.title,r=[],s=null,o=null;if(vh(t))s={type:"symbol-table",title:i||this._getPointCloudRendererTitle(t),infos:[]},t.colorClassBreakInfos.forEach(l=>{s.infos.unshift({label:l.label||l.minValue+" - "+l.maxValue,value:[l.minValue,l.maxValue],symbol:this._getAppliedCloneSymbol(Gl,l.color)})});else if(bh(t)){let l=t.stops,d=null;if(l?.length&&(l.length===1&&(d=l[0].color),!d)){let p=l[0].value,m=l[l.length-1].value;p!=null&&m!=null&&(d=Ig(p+(m-p)/2,l))}s={type:"symbol-table",title:null,infos:[{label:null,value:null,symbol:this._getAppliedCloneSymbol(Gl,d||Gl.color)}]};let h=Mg(t.stops??[])??[];o={type:"color-ramp",title:i||this._getPointCloudRendererTitle(t),infos:h,preview:sn(h.map(p=>p.color),{ariaLabel:yield hn("previewColorRampAriaLabel")})}}else wh(t)&&(s={type:"symbol-table",title:i||this._getPointCloudRendererTitle(t),infos:[]},t.colorUniqueValueInfos?.forEach(l=>{s.infos.push({label:l.label||l.values.join(", "),value:l.values.join(", "),symbol:this._getAppliedCloneSymbol(Gl,l.color)})}));s&&s.infos.length&&r.push(s),o&&o.infos.length&&r.push(o);let a=r.reduce((l,d)=>[...l,...d.infos??[]],[]).filter(l=>!!l.symbol).map(l=>this._getSymbolPreview(l,this.opacity,{symbolConfig:{applyColorModulation:!!t.colorModulation}}));return yield Promise.allSettled(a),r})}_getElementInfoForDotDensity(t,e){return A(this,null,function*(){let{color:n,label:i,valueExpressionTitle:r}=e,{backgroundColor:s,outline:o,dotSize:a}=t,l=this.effectList,d=l?.effects.map(S=>S.toJSON()),h=wf(d),p=yield hn("previewTemplateAriaLabel",i||r),m=a+"-"+n+"-"+s+"-"+(o&&JSON.stringify(o.toJSON()))+"-"+h,f=this._dotDensityUrlCache,w=f.has(m)?f.get(m):Vg(t,n,{ariaLabel:p});f.set(m,w);let M={shape:{type:"image",x:0,y:0,width:w.width,height:w.height,src:w.src},fill:null,stroke:null,offset:[0,0]},_=Rg([[M]],[w.width,w.height],{effectView:this.effectList,ariaLabel:p});return{opacity:1,src:w.src,preview:_,width:w.width,height:w.height}})}_constructDotDensityRendererLegendElements(t){return A(this,null,function*(){let e=t.calculateDotValue(this.view.scale),n=t.legendOptions?.unit,i={type:"symbol-table",title:{value:e&&Math.round(e),unit:n||""},infos:[]};for(let r of t.attributes){let s=yield this._getElementInfoForDotDensity(t,r);s.label=r.label||r.valueExpressionTitle||r.field,i.infos.push(s)}return[i]})}_constructPieChartRendererLegendElements(t){return A(this,null,function*(){let e=this.layer.opacity,n=[],i=null,r=t.outline;t.attributes.forEach(l=>{let d=new es({color:l.color,outline:r}),h=l.label||l.valueExpressionTitle||l.field;n.push({label:h,symbol:d})});let s=n.length?[...n]:[];if(t.othersCategory?.color&&t.othersCategory?.threshold!==0){let l=new es({color:t.othersCategory.color,outline:r});i=t.othersCategory.label||"Other",n.push({label:i,symbol:l})}if(t.defaultColor?.a){let l=new es({color:t.defaultColor,outline:r});n.push({label:t.defaultLabel,symbol:l})}let o=(yield this._getVisualVariableLegendElements(t,this.layer))||[];if(n.length){o.unshift({type:"symbol-table",title:null,infos:n});let l=s.filter(h=>h.label!==i).map(h=>h.symbol.color).filter(Boolean),d=Bg(l,{holePercentage:t.holePercentage,backgroundColor:t.backgroundFillSymbol?.color,effectList:this.effectList,outline:r,ariaLabel:yield hn("previewPieChartAriaLabel")});o.unshift({type:"pie-chart-ramp",title:this._getRendererTitle(t,this.layer),infos:n,preview:d})}let a=o.reduce((l,d)=>[...l,...this._getAllInfos(d)],[]).filter(l=>!!l?.symbol&&!l?.preview).map(l=>this._getSymbolPreview(l,e,{effectList:this.effectList}));return yield Promise.allSettled(a),o})}_constructRendererLegendElements(n){return A(this,arguments,function*(t,e={}){let{title:i,sublayer:r}=e,s=r||this.layer;this._hasColorRamp=!1,this._hasOpacityRamp=!1,this._hasSizeRamp=!1,this._scaleDrivenSizeVariable=null;let o=(yield this._getVisualVariableLegendElements(t,s))||[],a={type:"symbol-table",title:i||this._getRendererTitle(t,s),infos:[]},l=null,d=!1,h=new Set;if(yh(t)&&!this._hasSizeRamp){let _=yield Dg(t);a.infos.push({label:null,symbol:_})}else if(dS(t)){let _=i,S=uS(t)?"univariate-above-and-below-ramp":"univariate-color-size-ramp",O=o.findIndex(X=>X.type==="color-ramp"),B=O!==-1?o.splice(O,1)[0]:null,x=o.findIndex(X=>X.type==="size-ramp"),F=x!==-1?o.splice(x,1)[0]:null,P=[];B&&(_=B.title,P.push(B)),F&&(_=F.title,P.push(F)),P.length>0&&o.push({type:S,title:_,infos:P})}else if($y(t)){let _=xg(t);o.push({type:"heatmap-ramp",title:i||this._getRendererTitle(t,s),infos:_,preview:sn(_.map(S=>S.color),{effectList:this.effectList,ariaLabel:yield hn("previewColorRampAriaLabel")})})}else if($l(t)){let _=t&&t.authoringInfo;if(_&&_.type==="relationship"){let{numClasses:S,field1:O,field2:B}=_,x=_.focus;if(S&&O&&B){let F=[O,B],P=Fg(x)||0;for(let ee of F){let{field:he,normalizationField:me,label:Ie}=ee,$e=Ie||{field:this._getFieldAlias(he,s),normField:me&&this._getFieldAlias(me,s)},Oe=hS.clone();Oe.angle=P,a.infos.push({label:$e,symbol:Oe}),h.add(Oe),P+=90}let X=Ag({focus:x,numClasses:S,infos:t.uniqueValueInfos??[]});o.unshift(X)}}else if(Is(this.layer)||jl(this.layer))t.uniqueValueInfos?.forEach(S=>{S.symbol&&a.infos.push({label:S.label||S.value,value:S.value,symbol:S.symbol})});else{let{field:S,field2:O,field3:B,fieldDelimiter:x,valueExpression:F,defaultSymbol:P}=t,X=!(!S&&!F||!O&&!B),ee=[];if(t.uniqueValueGroups?.forEach(he=>{let me={type:"symbol-table",title:he.heading,infos:[]};he.classes?.forEach(Ie=>{let{symbol:$e,values:Oe}=Ie;if($e){let qe=[],nt=[];for(let mi of Oe??[]){let{value:ti,value2:Ji,value3:yn}=mi,Pt=[],fi=[];(S||F)&&(Pt.push(ti),fi.push(this._getDomainName(S,ti,s))),O&&(Pt.push(Ji),fi.push(this._getDomainName(O,Ji,s))),B&&(Pt.push(yn),fi.push(this._getDomainName(B,yn,s))),qe.push(X?Pt.join(x||""):Pt[0]),nt.push(fi.join(" - "))}let Ye=qe.join(", "),gt=Ie.label;if(!gt){let mi=nt.filter(Boolean);gt=mi.length?mi.join(", "):Ye}me.infos.push({label:gt,value:Ye,symbol:$e})}}),me.infos.length&&ee.push(me)}),ee.length){let he=ee[0];ee.length===1&&"title"in he&&!he.title?a.infos.push(...he.infos??[]):(P&&(ee.push({type:"symbol-table",infos:[{label:t.defaultLabel||"others",symbol:P}]}),d=!0),a.infos.push(...ee)),i||t.legendOptions?.title||t.valueExpressionTitle||(a.title=null)}}t.defaultSymbol&&!d&&(a.infos.push({label:t.defaultLabel||"others",symbol:t.defaultSymbol}),d=!0)}else if(Os(t))l=this._isUnclassedRenderer(t),(!l||!this._hasSizeRamp)&&(t.classBreakInfos.forEach(_=>{_.symbol&&a.infos.unshift({label:_.label||(l?null:_.minValue+" - "+_.maxValue),value:[_.minValue,_.maxValue],symbol:_.symbol})}),l&&(a.title=null),this._updateInfosForClassedSizeRenderer(t,a.infos)),t.defaultSymbol&&!l&&(a.infos.push({label:t.defaultLabel||"others",symbol:t.defaultSymbol}),d=!0);else if(Gy(t))if(jl(this.layer)||lS(this.layer)){let _=yield this._constructTileImageryStretchRendererElements(t);cS(_)?o.push(_):a.infos=_}else{let _=this.layer,S,O;if(t.statistics?.length){let P=t.statistics[0];bd(P)?(S=P.min,O=P.max):[S,O]=P}let B=[],x=_.serviceRasterInfo;if(_.rasterFunction)try{x=yield _.generateRasterInfo(_.rasterFunction)}catch{}let F=fd(x.pixelType);if(x.bandCount===1){let P=_.bandIds?.[0]||0;S=S??(x.statistics?x.statistics[P].min:F[0]),O=O??(x.statistics?x.statistics[P].max:F[1]),S||O?o.push(yield this._getStretchLegendElements(t,{min:S,max:O})):this._getServerSideLegend()}else if(_.bandIds&&_.bandIds.length===1)S=S??(x.statistics?x.statistics[_.bandIds[0]].min:F[0]),O=O??(x.statistics?x.statistics[_.bandIds[0]].max:F[1]),S||O?o.push(yield this._getStretchLegendElements(t,{min:S,max:O})):this._getServerSideLegend();else if(x.bandCount>=3){let{bandInfos:P}=x,{bandIds:X}=_;P.length>=x.bandCount?X?.length===3?(B=X.map(ee=>P[ee].name),a.infos=this._createSymbolTableElementMultiBand(B)):_.format==="lerc"?(B=[0,1,2].map(ee=>P[ee].name),a.infos=this._createSymbolTableElementMultiBand(B)):this._getServerSideLegend():_.format==="lerc"?(B=["band1","band2","band3"],a.infos=this._createSymbolTableElementMultiBand(B)):this._getServerSideLegend()}else this._getServerSideLegend()}else if(zy(t))t.colormapInfos.forEach(_=>{a.infos.push({label:_.label,value:_.value,symbol:this._getAppliedCloneSymbol(eS,_.color)})});else if(xs(t)){let _=t.symbol;switch(e.geometryType){case"point":_="pointSymbol"in s?s.pointSymbol:null;break;case"polyline":_="lineSymbol"in s?s.lineSymbol:null;break;case"polygon":_="polygonSymbol"in s?s.polygonSymbol:null}let S=this._hasClusterSizeVariable&&this._getClusterSymbol()||!this._hasSizeRamp;t.symbol&&S&&a.infos.push({label:t.label,symbol:_})}else if(Hy(t)){t.outputUnit&&(this.title="("+t.toJSON().outputUnit+")"),a.title=t.attributeField;let _=t.getClassBreakInfos();_?.length?_.forEach(S=>{a.infos.push({label:S.minValue+" - "+S.maxValue,symbol:S.symbol})}):a.infos.push({label:t.attributeField,symbol:t.getDefaultSymbol()})}else jy(t)&&o.push(yield this._getStretchLegendElements(t,{min:0,max:255}));let p=t.defaultSymbol;!p||d||xs(t)||l&&!this._hasColorRamp&&!this._hasSizeRamp&&!this._hasOpacityRamp||o.push({type:"symbol-table",infos:[{label:t.defaultLabel||"others",symbol:p}]}),a.infos.length&&o.unshift(a);let m=e.opacity==null?this.opacity:e.opacity,f=this._isTallSymbol("visualVariables"in t?t.visualVariables:null),w=Is(this.layer)||jl(this.layer),M=o.reduce((_,S)=>[..._,...this._getAllInfos(S)],[]).filter(_=>!!_?.symbol).filter(_=>{if(_.symbol.type==="cim"){let{minScale:S,maxScale:O}=_.symbol.data;if(S&&S<this.scale||O&&O>this.scale)return!1}return!0}).map(_=>this._getSymbolPreview(_,m,{isDefault:_.symbol===p,applyScaleDrivenSize:!h.has(_.symbol),symbolConfig:{isTall:f,isSquareFill:w},effectList:h.has(_.symbol)?null:this.effectList}));return t=null,yield Promise.allSettled(M),o})}_getServerSideLegend(){setTimeout(()=>this.buildLegendElementsForTools(),0)}_getAllInfos(t){let e=t?.infos;return e?e.reduce((n,i)=>n.concat(this._getAllInfos(i)),[]):[t]}_constructTileImageryStretchRendererElements(t){return A(this,null,function*(){let e=this.layer,n=e.symbolizer.rasterInfo??e.raster.rasterInfo,i,r,s=t?.statistics?.length?t.statistics:n?.statistics;if(s){let a=s[0];bd(a)?(i=a.min,r=a.max):[i,r]=a}else{let a=fd(n.pixelType);i=a[0],r=a[1]}if(e.hasStandardTime()&&(i=e.getStandardTimeValue(i),r=e.getStandardTimeValue(r)),n.bandCount===1||e.bandIds?.length===1)return this._getStretchLegendElements(t,{min:i,max:r});let o=(e?.bandIds?.length?e.bandIds:Array.from(Array(Math.min(n.bandCount,3)).keys())).map(a=>n.bandInfos[a].name);return o.length<3?o.push(o[1]):o.length>3&&o.splice(3),this._createSymbolTableElementMultiBand(o)})}_getStretchLegendElements(t,e){return A(this,null,function*(){let n=t.colorRamp,i=Eg(n,e);return{type:"stretch-ramp",title:"",infos:i,preview:sn(i.map(r=>r.color),{ariaLabel:yield hn("previewColorRampAriaLabel")})}})}_getClusterSymbol(){let t=this.layer,e="featureReduction"in t&&t.featureReduction,n=e&&"symbol"in e&&e.renderer;return n&&n?.authoringInfo?.isAutoGenerated!==!0?null:e&&"symbol"in e?e.symbol:null}_getSizeLegendElement(t,e,n,i){return A(this,null,function*(){return{type:"size-ramp",title:this._hasClusterSizeVariable?this._getClusterTitle(e):t,infos:yield Ng(n,e,yield vd(n),this.scale,this.view,i,this._hasClusterSizeVariable?this._getClusterSymbol():null)}})}_createSymbolTableElementMultiBand(t){let e=[],n=["red","green","blue"];return t.forEach((i,r)=>{e.push({label:{colorName:n[r],bandName:i},src:Sg[r],opacity:this.opacity??1})}),e}_updateInfosForClassedSizeRenderer(t,e){let n=t.authoringInfo&&t.authoringInfo.type==="class-breaks-size",i=t.classBreakInfos.some(r=>pg(r.symbol));if(n&&i){let r=Pg,s=Lg,o=t.classBreakInfos.length,a=(r-s)/(o>1?o-1:o);e.forEach((l,d)=>{l.size=r-a*d})}}_isTallSymbol(t){let e=!1,n=!1;if(t)for(let i=0;i<t.length&&(!e||!n);i++){let r=t[i];r.type==="size"&&(r.axis==="height"&&(e=!0),r.axis==="width-and-depth"&&(n=!0))}return e&&n}_getSymbolPreview(t,e,n){return A(this,null,function*(){let i=!n?.isDefault&&t.size==null&&this._hasSizeRamp?bf(Og.size):t.size;if(this._scaleDrivenSizeVariable&&n?.applyScaleDrivenSize){let{getSize:s}=yield import("./chunk-MODFJR45.js");i=s(this._scaleDrivenSizeVariable,null,{view:this.view.type,scale:this.scale,shape:t.symbol.type==="simple-marker"?t.symbol.style:null})}let r=!n?.isDefault&&this._hasSizeRamp||!(!this._scaleDrivenSizeVariable||!n?.applyScaleDrivenSize);return Hg(t.symbol,{size:i,opacity:e,scale:!1,symbolConfig:n?.symbolConfig,effectView:n?.effectList,style:"legend",cimOptions:{allowScalingUp:r,viewParams:this.isScaleDriven?{viewingMode:this.view?.type==="2d"?"map":this.view?.viewingMode,scale:this.view?.scale}:null},ariaLabel:t.label&&typeof t.label!="string"?null:yield hn("previewTemplateAriaLabel",t.label)}).then(s=>(t.preview=s,t)).catch(()=>(t.preview=null,t))})}_getClusterRenderer(t){this._hasClusterSizeVariable=!1;let e="renderer"in this.layer?this.layer.renderer:null,n=t.renderer?.clone()||e?.clone(),i=Ly(t,this.layerView,this.view);if(i&&n!=null&&"visualVariables"in n&&!n.visualVariables?.some(s=>s.type==="size"&&s.target!=="outline"&&!zl.test(s.valueExpression))){if("clusterMinSize"in t&&"clusterMaxSize"in t){let{clusterMinSize:o,clusterMaxSize:a}=t;i.legendOptions=new rg({showLegend:o!==a})}let s=n.visualVariables||[];n.visualVariables=s.concat([i]),this._hasClusterSizeVariable=!0}return n}_loadRenderer(t){return A(this,null,function*(){let e=[],n=t.clone(),i=yield vd(n);if(Os(n)||$l(n)){let r=(n.classBreakInfos||n.uniqueValueInfos).map(s=>this._fetchSymbol(s.symbol,i).then(o=>{s.symbol=o}).catch(()=>{s.symbol=null}));Array.prototype.push.apply(e,r)}return e.push(this._fetchSymbol(n.symbol||n.defaultSymbol,n.defaultSymbol?null:i).then(r=>{this._applySymbolToRenderer(n,r,xs(n))}).catch(()=>{this._applySymbolToRenderer(n,null,xs(n))})),yield Promise.allSettled(e),n})}_applySymbolToRenderer(t,e,n){n?t.symbol=e:t.defaultSymbol=e}_fetchSymbol(t,e){return A(this,null,function*(){if(!t)throw new Error;if(t.type==="web-style"){let n=this._webStyleSymbolCache;try{let i=yield this.view.type==="2d"?t.fetchCIMSymbol({cache:n}):t.fetchSymbol({cache:n});return this._getAppliedCloneSymbol(i,e)}catch{throw K.getLogger(this).warn("Fetching web-style failed!"),new Error}}return this._getAppliedCloneSymbol(t,e)})}_getAppliedCloneSymbol(t,e){if(!t||!e)return t;let n=t.clone(),i=e&&e.toRgba();return n.type.includes("3d")?this._applyColorTo3dSymbol(n,i):n.type==="cim"?hg(n,e):n.color&&(n.color=new Ht(i||n.color)),n}_applyColorTo3dSymbol(t,e){e&&t.symbolLayers.forEach(n=>{n&&(n.material||(n.material={}),n.material.color=new Ht(e))})}_getVisualVariableLegendElements(t,e){return A(this,null,function*(){if(!("visualVariables"in t)||!t.visualVariables||t.type==="vector-field")return null;let n=t.visualVariables,i=[],r=[],s=[];for(let h of n)h.type==="color"?i.push(h):h.type==="size"?r.push(h):h.type==="opacity"&&s.push(h);let o=[...i,...r,...s],a,l;if(i.length===0&&Os(t)&&t.classBreakInfos&&t.classBreakInfos.length===1){let h=t.classBreakInfos[0];a=h&&h.symbol}if(i.length===0&&xs(t)&&(a=t.symbol),a)if(a.type.includes("3d")){let h=a.symbolLayers.at(0);h.type==="water"?h.color!=null&&(l=h.color):h.material?.color!=null&&(l=h.material.color)}else a.url||(l=a.color);let d=this.effectList;return(yield Promise.all(o.map(h=>A(this,null,function*(){if(!h.legendOptions||h.legendOptions.showLegend!==!1){let p=yh(t)?h.field:this._getRampTitle(h,e),m=null,f=Tg(e,h,this.view.timeZone);if(h.type==="color"){let w=(yield wd(h,null,f))??[];m={type:"color-ramp",title:p,infos:w,preview:sn(w.map(M=>M.color),{effectList:d,ariaLabel:yield hn("previewColorRampAriaLabel")})},this._hasColorRamp||(this._hasColorRamp=w.length>0)}else if(h.type==="size"&&h.target!=="outline")zl.test(h.valueExpression)?this._hasClusterSizeVariable||(this._scaleDrivenSizeVariable=h):(m=yield this._getSizeLegendElement(p,h,t,f),this._hasSizeRamp||(this._hasSizeRamp=!(m.infos==null||!m.infos.length)));else if(h.type==="opacity"){let w=(yield wd(h,l,f))??[];m={type:"opacity-ramp",title:p,infos:w,preview:sn(w.map(M=>M.color),{effectList:d,ariaLabel:yield hn("previewColorRampAriaLabel")})},this._hasOpacityRamp||(this._hasOpacityRamp=w.length>0)}return m&&m.infos?m:null}})))).filter(Vt)})}_getDomainName(t,e,n){if(t&&typeof t!="function"){let i="getField"in n&&n.getField?.(t),r=i&&"getFieldDomain"in n&&n.getFieldDomain?n.getFieldDomain(i.name):null;return r?.type==="coded-value"?r.getName(e):null}return null}_getClusterTitle(t){let e=this.layer,n=t.field;if("featureReduction"in e&&e.featureReduction&&e.featureReduction.type==="cluster"){let i=e.featureReduction,r="popupTemplate"in i&&i.popupTemplate,s=r&&r.fieldInfos;if(s){for(let o of s)if(o.fieldName===n)return n==="cluster_count"?o.label||{showCount:!0}:o.label}}return{showCount:!0}}_getRampTitle(t,e){let n=t.field,i=t.normalizationField,r=!1,s=!1,o=!1,a=null;n=typeof n=="function"?null:n,i=typeof i=="function"?null:i;let l=t.legendOptions?.title;if(l!=null)a=l;else if(t.valueExpressionTitle)a=t.valueExpressionTitle;else{if("renderer"in e&&e.renderer&&"authoringInfo"in e.renderer&&e.renderer.authoringInfo?.visualVariables){let d=e.renderer.authoringInfo.visualVariables;for(let h=0;h<d.length;h++){let p=d[h];if(p.type==="color"){if(p.style==="ratio"){r=!0;break}if(p.style==="percent"){s=!0;break}if(p.style==="percent-of-total"){o=!0;break}}}}a={field:n&&this._getFieldAlias(n,e),normField:i&&this._getFieldAlias(i,e),ratio:r,ratioPercent:s,ratioPercentTotal:o}}return a}_getRendererTitle(t,e){let n=t;if(n.legendOptions?.title)return n.legendOptions.title;if(n.valueExpressionTitle)return n.valueExpressionTitle;let i=n.field,r=null,s=null;if(Os(n)&&(r=n.normalizationField,s=n.normalizationType==="percent-of-total"),i=typeof i=="function"?null:i,r=typeof r=="function"?null:r,$l(n)){let{field2:a,field3:l,fieldDelimiter:d}=n,h=i&&this._getFieldAlias(i,e);return a&&(h=`<${h}>${d}<${this._getFieldAlias(a,e)}>`,l&&(h=`${h}${d}<${this._getFieldAlias(l,e)}>`)),h}let o=null;return(i||r)&&(o={field:i&&this._getFieldAlias(i,e),normField:r&&this._getFieldAlias(r,e),normByPct:s}),o}_getFieldAlias(t,e){let r=("popupTemplate"in e?e.popupTemplate:null)?.fieldInfos?.find(h=>t===h.fieldName),s=null;"getField"in e&&e.getField?s=e.getField(t):"fieldsIndex"in e&&e.fieldsIndex&&(s=e.fieldsIndex.get(t));let o=null,a="featureReduction"in e&&e.featureReduction;a&&(r??="popupTemplate"in a?a.popupTemplate?.fieldInfos?.find(h=>t?.toLowerCase()===h.fieldName?.toLowerCase()):void 0,"fields"in a&&a.fields&&(o=a.fields.find(h=>h.name?.toLowerCase()===t?.toLowerCase())));let l=r||s||o,d=null;return l&&(d=r?.label||s?.alias||o?.alias||"name"in l&&l.name||"fieldName"in l&&l.fieldName||null),d}_isUnclassedRenderer(t){let e=t.visualVariables,n=!1;return Os(t)&&t.classBreakInfos&&t.classBreakInfos.length===1&&e&&(n=t.field?e.some(i=>!(!i||t.field!==i.field||(t.normalizationField||i.normalizationField)&&t.normalizationField!==i.normalizationField)):!!e.length),n}};c([u()],tt.prototype,"children",void 0),c([u({readOnly:!0})],tt.prototype,"effectList",null),c([u()],tt.prototype,"layerView",void 0),c([u()],tt.prototype,"layer",void 0),c([u()],tt.prototype,"legendElements",void 0),c([u({readOnly:!0})],tt.prototype,"opacity",null),c([u()],tt.prototype,"parent",void 0),c([u({readOnly:!0,dependsOn:[]})],tt.prototype,"ready",null),c([u()],tt.prototype,"hideLayersNotInCurrentView",void 0),c([u()],tt.prototype,"keepCacheOnDestroy",void 0),c([u()],tt.prototype,"respectLayerVisibility",void 0),c([u({readOnly:!0})],tt.prototype,"scale",null),c([u()],tt.prototype,"sublayerIds",void 0),c([u({readOnly:!0})],tt.prototype,"isScaleDriven",null),c([u()],tt.prototype,"title",void 0),c([u({readOnly:!0,dependsOn:["ready"],value:0})],tt.prototype,"version",null),c([u()],tt.prototype,"view",void 0),tt=c([D("esri.widgets.Legend.support.ActiveLayerInfo")],tt);var Ch=tt;var gr={state:"state",view:"view",allLayerViews:"all-layer-views",legendProperties:"legend-properties"},qy=ae.ofType(Ch),pS=new Set(["esri.layers.BuildingSceneLayer","esri.layers.CSVLayer","esri.layers.FeatureLayer","esri.layers.GeoJSONLayer","esri.layers.GeoRSSLayer","esri.layers.GroupLayer","esri.layers.HeatmapLayer","esri.layers.ImageryLayer","esri.layers.ImageryTileLayer","esri.layers.MapImageLayer","esri.layers.OGCFeatureLayer","esri.layers.OrientedImageryLayer","esri.layers.PointCloudLayer","esri.layers.StreamLayer","esri.layers.SceneLayer","esri.layers.SubtypeGroupLayer","esri.layers.TileLayer","esri.layers.VoxelLayer","esri.layers.WFSLayer","esri.layers.WMSLayer","esri.layers.WMTSLayer","esri.layers.WCSLayer","esri.layers.LinkChartLayer","esri.layers.knowledgeGraph.KnowledgeGraphSublayer"]),Yy="view.basemapView.baseLayerViews",Zy="view.groundView.layerViews",Ky="view.basemapView.referenceLayerViews",mS=[Yy,Zy,"view.layerViews",Ky],li=class extends z{constructor(t){super(t),this._layerViewByLayerId={},this._layerInfosByLayerViewId={},this._activeLayerInfosByLayerViewId={},this._activeLayerInfosWithNoParent=new ae,this.activeLayerInfos=new qy,this.basemapLegendVisible=!1,this.groundLegendVisible=!1,this.hideLayersNotInCurrentView=!1,this.keepCacheOnDestroy=!1,this.respectLayerVisibility=!0,this.layerInfos=[],this.view=null}initialize(){this.addHandles(R(()=>this.view,()=>this._viewHandles(),le),gr.view),this.addHandles(Yr(()=>this._refresh()))}destroy(){this._destroyViewActiveLayerInfos(),this.view=null}get state(){return this.view?.ready?"ready":"disabled"}_viewHandles(){this.removeHandles(gr.state),this.view&&this.addHandles(R(()=>this.state,()=>this._stateHandles(),le),gr.state)}_stateHandles(){this._resetAll(),this.state==="ready"&&this._watchPropertiesAndAllLayerViews()}_resetAll(){this.removeHandles([gr.allLayerViews,gr.legendProperties]),this._destroyViewActiveLayerInfos(),this.activeLayerInfos.removeAll()}_destroyViewActiveLayerInfos(){Object.keys(this._activeLayerInfosByLayerViewId).forEach(this._destroyViewActiveLayerInfo,this)}_destroyViewActiveLayerInfo(t){this.removeHandles(t);let e=this._activeLayerInfosByLayerViewId[t];delete this._activeLayerInfosByLayerViewId[t],e?.parent&&e.parent.children.remove(e)}_watchPropertiesAndAllLayerViews(){let{view:t}=this;if(!t)return;let{allLayerViews:e}=t;e.length&&this._refresh(),this.addHandles(e.on("change",n=>this._propertiesChangeHandle()),gr.allLayerViews),this.addHandles(R(()=>[this.layerInfos,this.basemapLegendVisible,this.groundLegendVisible],()=>this._propertiesChangeHandle()),gr.legendProperties)}_propertiesChangeHandle(){this._destroyViewActiveLayerInfos(),this._refresh()}_refresh(){this._layerInfosByLayerViewId={},this.activeLayerInfos.removeAll(),this._generateLayerViews().filter(this._filterLayerViewsByLayerInfos,this).filter(this._isLayerViewSupported,this).forEach(this._generateActiveLayerInfo,this),this._sortActiveLayerInfos(this.activeLayerInfos)}_sortActiveLayerInfos(t){let e=this.view;if(t.length<2||!e)return;let n=[];t.forEach(r=>{if(!r.parent){let s=r.layer.parent,o=s&&"uid"in s&&this._layerViewByLayerId[s.uid],a=o&&this._activeLayerInfosByLayerViewId[o.uid];a&&t.includes(a)&&(n.push(r),r.parent=a,a.children.add(r),this._sortActiveLayerInfos(a.children))}}),t.removeMany(n);let i={};e.allLayerViews.forEach((r,s)=>i[r.layer.uid]=s),t.sort((r,s)=>{let o=i[r.layer.uid]||0;return(i[s.layer.uid]||0)-o})}_generateLayerViews(){let t=[];return mS.filter(this._filterLayerViews,this).map(e=>$r(this,e)).filter(e=>e!=null).forEach(this._collectLayerViews("layerViews",t)),t}_filterLayerViews(t){let e=!this.basemapLegendVisible&&(t===Yy||t===Ky),n=!this.groundLegendVisible&&t===Zy;return!e&&!n}_collectLayerViews(t,e){let n=i=>(i&&i.forEach(r=>{e.push(r),n(r[t])}),e);return n}_filterLayerViewsByLayerInfos(t){let e=this.layerInfos;return!e||!e.length||e.some(n=>this._hasLayerInfo(n,t))}_hasLayerInfo(t,e){let n=this._isLayerUIDMatching(t.layer,e.layer.uid);return n&&(this._layerInfosByLayerViewId[e.uid]=t),n}_isLayerUIDMatching(t,e){return t&&(t.uid===e||this._hasLayerUID(t.layers,e))}_hasLayerUID(t,e){return t&&t.some(n=>this._isLayerUIDMatching(n,e))}_isLayerViewSupported(t){return!!pS.has(t.layer.declaredClass)&&(this._layerViewByLayerId[t.layer.uid]=t,!0)}_generateActiveLayerInfo(t){this._isLayerActive(t)?this._buildActiveLayerInfo(t):(this.removeHandles(t.uid),this.addHandles(R(()=>[t.legendEnabled,t.layer?.legendEnabled],()=>this._layerActiveHandle(t)),t.uid))}_layerActiveHandle(t){this._isLayerActive(t)&&(this.removeHandles(t.uid),this._buildActiveLayerInfo(t))}_isLayerActive(t){return!this.respectLayerVisibility||t.legendEnabled&&t.layer?.legendEnabled}_buildActiveLayerInfo(t){let e=t.layer,n=t.uid,i=this._layerInfosByLayerViewId[n],r=this._activeLayerInfosByLayerViewId[n];if(!r){let o=i?.title!==void 0&&i.layer.uid===e.uid;r=new Ch({layer:e,layerView:t,title:o?i.title:e.title,view:this.view,respectLayerVisibility:this.respectLayerVisibility,hideLayersNotInCurrentView:this.hideLayersNotInCurrentView,keepCacheOnDestroy:this.keepCacheOnDestroy,sublayerIds:i?.sublayerIds||[]}),this._activeLayerInfosByLayerViewId[n]=r}let s=e.parent&&"uid"in e.parent?this._layerViewByLayerId[e.parent?.uid]:null;if(r.parent=this._activeLayerInfosByLayerViewId[s?.uid],!this.hasHandles(n)){let o=[R(()=>e.title,a=>this._titleHandle(a,r)),R(()=>[e.opacity,"renderer"in e&&e.renderer,"pointSymbol"in e&&e.pointSymbol,"lineSymbol"in e&&e.lineSymbol,"polygonSymbol"in e&&e.polygonSymbol],()=>this._constructLegendElements(r)),ri(()=>this.view?.stationary===!0,()=>this._scaleHandle(r),le),R(()=>t.layer?Td(t.layer,t.view):null,()=>this._constructLegendElements(r)),R(()=>t.updating,()=>{t.layer!=null&&Td(t.layer,t.view)!=null&&this._constructLegendElements(r)}),R(()=>"effect"in e&&e.effect,()=>this._constructLegendElements(r)),ri(()=>this.view?.timeZone,()=>this._constructLegendElements(r),le)];if(this.respectLayerVisibility){let a=R(()=>t.legendEnabled,d=>this._legendEnabledHandle(d,r)),l=R(()=>e.legendEnabled,d=>this._legendEnabledHandle(d,r));o.push(a,l)}this.addHandles(o,n)}r.isScaleDriven||this._constructLegendElements(r),this._addActiveLayerInfo(r)}_titleHandle(t,e){e.title=t,this._constructLegendElements(e)}_legendEnabledHandle(t,e){t?this._addActiveLayerInfo(e):this._removeActiveLayerInfo(e)}_scaleHandle(t){(t.isScaleDriven||t.hideLayersNotInCurrentView)&&this._constructLegendElements(t)}_addActiveLayerInfo(t){let{layerView:e,layer:n}=t;if(this._isLayerActive(e)&&!this.activeLayerInfos.includes(t)){let i=t.parent;if(i)i.children.includes(t)||i.children.push(t),this._sortActiveLayerInfos(i.children);else{let r=this.layerInfos?.some(s=>s.layer.uid===n.uid);n.parent&&"uid"in n.parent&&!r?this._activeLayerInfosWithNoParent.add(t):(this.activeLayerInfos.add(t),this._sortActiveLayerInfos(this.activeLayerInfos))}if(this._activeLayerInfosWithNoParent.length){let r=[];this._activeLayerInfosWithNoParent.forEach(s=>{let o=s.layer.parent,a=o&&"uid"in o?this._layerViewByLayerId[o?.uid]:null,l=this._activeLayerInfosByLayerViewId[a?.uid];l&&(r.push(s),s.parent=l)}),r.length&&(this._activeLayerInfosWithNoParent.removeMany(r),r.forEach(s=>this._addActiveLayerInfo(s)))}}}_removeActiveLayerInfo(t){let e=t.parent;e?e.children.remove(t):this.activeLayerInfos.remove(t)}_constructLegendElements(t){let e=t.layer;"featureCollections"in e&&e.featureCollections?t.buildLegendElementsForFeatureCollections(e.featureCollections):"featureReduction"in e&&e.featureReduction&&"renderer"in e.featureReduction&&(e.featureReduction.type==="binning"||e.featureReduction.type==="cluster")&&(!this.view||e.featureReduction.maxScale<=this.view.scale)?t.buildLegendElementsForFeatureReduction(e.featureReduction):"renderer"in e&&e.renderer&&!("sublayers"in e)?t.buildLegendElementsForRenderer(e.renderer):"url"in e&&e.url?t.buildLegendElementsForTools():t.children.forEach(n=>this._constructLegendElements(n))}};c([u({type:qy})],li.prototype,"activeLayerInfos",void 0),c([u()],li.prototype,"basemapLegendVisible",void 0),c([u()],li.prototype,"groundLegendVisible",void 0),c([u()],li.prototype,"hideLayersNotInCurrentView",void 0),c([u()],li.prototype,"keepCacheOnDestroy",void 0),c([u()],li.prototype,"respectLayerVisibility",void 0),c([u()],li.prototype,"layerInfos",void 0),c([u({readOnly:!0})],li.prototype,"state",null),c([u()],li.prototype,"view",void 0),li=c([D("esri.widgets.Legend.LegendViewModel")],li);var Qy=li;var de="esri-legend--card",ks="esri-legend",U={activated:`${de}__carousel-indicator--activated`,base:de,stacked:`${ks}--stacked`,carouselTitle:`${de}__carousel-title`,indicator:`${de}__carousel-indicator`,intervalSeparator:`${de}__interval-separator`,imageryLayerStretchedImage:`${de}__imagery-layer-image--stretched`,imageLabel:`${de}__image-label`,layerCaption:`${de}__layer-caption`,labelElement:`${de}__label-element`,layerRow:`${de}__layer-row`,labelCell:`${de}__label-cell`,message:`${de}__message`,rampLabel:`${de}__ramp-label`,section:`${de}__section`,relationshipSection:`${de}__relationship-section`,serviceCaptionText:`${de}__service-caption-text`,serviceContent:`${de}__service-content`,service:`${de}__service`,groupLayer:`${de}__group-layer`,groupLayerChild:`${de}__group-layer-child`,symbol:`${de}__symbol`,sizeRampRow:`${de}__size-ramp-row`,symbolRow:`${de}__symbol-row`,symbolCell:`${de}__symbol-cell`,indicatorContainer:`${de}__carousel-indicator-container`,intervalSeparatorsContainer:`${de}__interval-separators-container`,relationshipLabelContainer:`${de}__relationship-label-container`,labelContainer:`${de}__label-container`,serviceCaptionContainer:`${de}__service-caption-container`,symbolContainer:`${de}__symbol-container`,sizeRampContainer:`${de}__size-ramp-container`,sizeRampPreview:`${de}__size-ramp-preview`,pieChartRampPreview:`${de}__pie-chart-ramp-preview`,rampContainer:`${ks}__ramps`,sizeRampHorizontal:`${ks}__size-ramp--horizontal`,rampLabelsContainer:`${ks}__ramp-labels`,layerInfo:`${ks}__layer-cell ${ks}__layer-cell--info`,univariateAboveAndBelowColorRamp:"esri-univariate-above-and-below-ramp__color--card"};var fS=lo(),Jy=10,Sh=20,Ul=10,Dh=20,Th={univariateAboveAndBelowSymbol:"esri-univariate-above-and-below-ramp__symbol",colorRamp:"esri-legend__color-ramp"};function gS(t="vertical"){let e="stroke:rgb(200, 200, 200);stroke-width:1";return t==="vertical"?y("svg",{height:"4",width:"10"},y("line",{style:e,x1:"0",x2:"10",y1:"2",y2:"2"})):y("svg",{height:"10",width:"10"},y("line",{style:e,x1:"5",x2:"5",y1:"0",y2:"10"}))}function _S(t,e="vertical"){let n=document.createElement("div");return n.style.height=`${Sh}px`,n.className=Th.univariateAboveAndBelowSymbol,t!=null&&(n.style.opacity=t.toString()),fS.append(n,gS.bind(null,e)),n}function Xy(t,e,n="vertical",i){t.infos.forEach((r,s)=>{if(i&&s===2)r.preview=_S(e,n);else{let o=Bi(r.size)+(n==="horizontal"?Dh:Ul),a=r.preview,l=a?.tagName.toLowerCase()==="div",d=l?a:document.createElement("div");d.className=Th.univariateAboveAndBelowSymbol,n==="horizontal"?d.style.width=`${o}px`:d.style.height=`${o}px`,!l&&a&&d.appendChild(a),r.preview=d}})}function Rs(t,e="classic"){let n=t.infos;return e==="classic"?(Bi(n[0].size)+Ul)/2:(Bi(n[0].size)-Bi(n[n.length-1].size))/2}function zn(t,e){if(!t)return null;let n=t.infos.map(r=>r.color),i=sn(e.type==="full"?n:e.type==="above"?n.slice(0,3):n.slice(2,5),{width:e.width,height:e.height,align:e.rampAlignment,effectList:e.effectList,ariaLabel:e.ariaLabel});return i.className=Th.colorRamp,e.opacity!=null&&(i.style.opacity=e.opacity.toString()),i}function Wl(t,e,n,i="vertical"){let r=0,s=t.infos,o=Math.floor(s.length/2),a=e==="full"||e==="above"?0:o,l=e==="full"||e==="below"?s.length-1:o;for(let d=a;d<=l;d++)n&&d===o?r+=i==="horizontal"?Jy:Sh:r+=Bi(s[d].size)+(i==="horizontal"?Dh:Ul);return Math.round(r)}function Gn(t,e,n,i="vertical"){let r=Wl(t,e,n,i),s=t.infos,o=Math.floor(s.length/2),a=e==="full"||e==="above"?0:o,l=e==="full"||e==="below"?s.length-1:o,d=e==="full"?s[a].size+s[l].size:e==="above"?s[a].size:s[l].size,h=n?i==="vertical"?Sh:Jy:0,p=i==="vertical"?Ul*(e==="full"?2:1):Dh*(e==="full"?2:1);return Math.round(r-(Bi(d)/2+h/2+p/2))}function ql(t,e,n="vertical"){let i=t.infos,r=i.find(({type:o})=>o==="size-ramp"),s=i.find(({type:o})=>o==="color-ramp");return r&&(r=I({},r),r.infos=[...r.infos],Xy(r,e,n,!0)),s&&(s=I({},s),s.infos=[...s.infos]),n==="horizontal"&&(r?.infos.reverse(),s?.infos.reverse()),{sizeRampElement:r,colorRampElement:s}}function Yl(t,e="vertical"){let n=t.infos,i=n.find(({type:s})=>s==="size-ramp"),r=n.find(({type:s})=>s==="color-ramp");return i&&(i=I({},i),i.infos=[...i.infos],Xy(i,null,e,!1)),r&&(r=I({},r),r.infos=[...r.infos]),e==="horizontal"&&(i?.infos.reverse(),r?.infos.reverse()),{sizeRampElement:i,colorRampElement:r}}function yS(t,e){return e}function We(t){let e=this;t.appendChild(e)}function Ki(t,e,n){if(!e)return;if(typeof e=="number")return e;if(typeof e=="string")return Dm(e);if("value"in e||"unit"in e)return Xn(t.dotValue,e);if("colorName"in e&&"bandName"in e)return t[e.colorName]+": "+(t[e.bandName]||e.bandName);if("showCount"in e)return e.showCount?t.clusterCountTitle:void 0;let i=null;return yS(e,n)?i=e.ratioPercentTotal?"showRatioPercentTotal":e.ratioPercent?"showRatioPercent":e.ratio?"showRatio":e.normField?"showNormField":e.field?"showField":null:Mh(e,n)&&(i=e.normField?"showNormField":e.normByPct?"showNormPct":e.field?"showField":null),i?Xn(i==="showField"?"{field}":t[i],{field:e.field,normField:e.normField}):void 0}function Mh(t,e){return!e}function Zl(t,e){return!!(e&&e==="Stretched"&&t.version>=10.3&&t.declaredClass==="esri.layers.ImageryLayer")}function Kl(t,e){return t.label?e[t.label]+": "+(typeof t.value=="string"?t.value:Zr(t.value??0,{style:"decimal",notation:t.value?.toString().toLowerCase().includes("e")?"scientific":"standard"})):""}var vS=25,bS=25,wS=768,CS=100,Zo;(function(t){t.Auto="auto",t.Stack="stack",t.SideBySide="side-by-side"})(Zo||(Zo={}));var SS="#ddd",As=window.devicePixelRatio;function DS(t){if(t){if(t.type.includes("3d")){let e=t.symbolLayers?.length;if(!e)return;let n=t.symbolLayers.at(e-1),i=n.resource?.primitive;return i==="circle"||i==="cross"||i==="kite"||i==="sphere"||i==="cube"||i==="diamond"}{let e=t.style;return e==="circle"||e==="diamond"||e==="cross"}}}function TS(t){if(t){if(t.type.includes("3d")){let e=t.symbolLayers?.length;if(!e)return;let n=t.symbolLayers.at(e-1).get("resource.primitive");return n==="triangle"||n==="cone"||n==="tetrahedron"}return t.style==="triangle"}}var Ii=class extends It{constructor(t,e){super(t,e),this._hasIndicators=!1,this._selectedSectionName=null,this._sectionNames=[],this._sectionMap=new Map,this.activeLayerInfos=null,this.headingLevel=3,this.layout=Zo.Stack,this.messages=null,this.messagesCommon=null,this.type="card",this.view=null}initialize(){this.addHandles(R(()=>this.activeLayerInfos,t=>{this.removeAllHandles(),this._watchForSectionChanges(t)}))}render(){let{view:t}=this;this._hasIndicators=this.layout===Zo.Auto&&t&&t.container.clientWidth<=wS||this.layout===Zo.Stack;let e=this.activeLayerInfos,n=e&&e.toArray().map(l=>this._renderLegendForLayer(l)).filter(l=>!!l);this._hasIndicators?this._selectedSectionName&&this._sectionNames.includes(this._selectedSectionName)||(this._selectedSectionName=this._sectionNames&&this._sectionNames[0]):this._selectedSectionName=null;let i=this._sectionNames.length,r=this._sectionNames.map((l,d)=>{let h=Xn(this.messagesCommon.pagination.pageText,{index:d+1,total:i});return y("div",{"aria-controls":`${l}-panel`,"aria-label":h,"aria-selected":(this._selectedSectionName===l).toString(),bind:this,class:this.classes(U.indicator,{[U.activated]:this._selectedSectionName===l}),"data-section-name":l,id:l,key:l,onclick:this._selectSection,onkeydown:this._focusSection,role:"tab",tabIndex:this._selectedSectionName===l?0:-1,title:h})}),s=this._hasIndicators&&i>1?y("div",{class:U.indicatorContainer,key:"carousel-navigation",role:"tablist"},r):null,o=this._hasIndicators?this._sectionMap.get(this._selectedSectionName):n&&n.length?n:null,a={[U.stacked]:this._hasIndicators};return y("div",{class:this.classes(U.base,a)},o||y("div",{class:U.message},this.messages.noLegend),s)}_selectSection(t){let e=t.target.getAttribute("data-section-name");e&&(this._selectedSectionName=e)}_focusSection(t){switch(t.key){case"ArrowLeft":case"ArrowRight":this._switchSectionOnArrowPress(t);break;case"Enter":case" ":this._selectSection(t)}}_switchSectionOnArrowPress(t){let e=t.key,n=e==="ArrowLeft"?-1:1,i=t.target.getAttribute("data-section-name"),r=this._sectionNames.indexOf(i),s=this._sectionNames,o=null;r!==-1&&(s[r+n]?o=document.getElementById(s[r+n]):e==="ArrowLeft"?o=document.getElementById(s[s.length-1]):e==="ArrowRight"&&(o=document.getElementById(s[0])),o?.focus())}_watchForSectionChanges(t){if(this._generateSectionNames(),t){t.forEach(n=>{let i=`activeLayerInfo-${n.layer.uid}-version-change`;this.removeHandles(i),this._watchForSectionChanges(n.children),this.addHandles(R(()=>n.version,()=>this._generateSectionNames()),i)});let e="activeLayerInfos-collection-change";this.removeHandles(e),this.addHandles(t.on("change",()=>this._watchForSectionChanges(t)),e)}}_generateSectionNames(){this._sectionNames.length=0,this._selectedSectionName=null,this.activeLayerInfos&&this.activeLayerInfos.forEach(this._generateSectionNamesForActiveLayerInfo,this)}_getSectionName(t,e,n){return`${this.id}${t.uid}-type-${e.type}-${n}`}_generateSectionNamesForActiveLayerInfo(t){t.children.forEach(this._generateSectionNamesForActiveLayerInfo,this),t.legendElements&&t.legendElements.forEach((e,n)=>{this._sectionNames.push(this._getSectionName(t.layer,e,n))})}_renderLegendForLayer(t){if(!t.ready)return null;if(t.children.length){let e=t.children.map(n=>this._renderLegendForLayer(n)).toArray();return y("div",{class:this.classes(U.service,U.groupLayer),key:t.layer.uid},y("div",{class:U.serviceCaptionContainer},t.title),e)}{let e=t.legendElements;if(e&&!e.length)return null;let n=e.some(s=>s.type==="relationship-ramp"),i=e.map((s,o)=>this._renderLegendForElement(s,t,o,n)).filter(s=>!!s);if(!i.length)return null;let r={[U.groupLayerChild]:!!t.parent};return y("div",{class:this.classes(U.service,r),key:t.layer.uid},y("div",{class:U.serviceCaptionContainer},y("div",{class:U.serviceCaptionText},t.title)),y("div",{class:U.serviceContent},i))}}_renderLegendForElement(t,e,n,i=!1,r=!1){let s=t.type==="color-ramp",o=t.type==="opacity-ramp",a=e.layer,l=null;if(typeof t.title=="string")l=t.title;else if(t.title){let w=t.title,M=Ki(this.messages,w,s||o);l=w.title?`${w.title} (${M})`:M}let d=this._getSectionName(a,t,n),h=this._hasIndicators&&!r?y("div",null,y(ts,{class:U.carouselTitle,level:this.headingLevel},e.title),y(ts,{class:U.layerCaption,level:bg(this.headingLevel)},l)):l?y(ts,{class:U.layerCaption,level:this.headingLevel},l):null,p=e.effectList,m=null;switch(t.type){case"symbol-table":{let w=t.infos.map((M,_)=>this._renderLegendForElementInfo(M,e,t.legendType,_)).filter(M=>!!M);if(w.length){let M=w[0].properties.classes?.[U.symbolRow],_={[U.labelContainer]:!M&&!i,[U.relationshipLabelContainer]:i};m=y("div",{class:this.classes(_)},w)}break}case"color-ramp":case"opacity-ramp":case"heatmap-ramp":case"stretch-ramp":m=this._renderLegendForRamp(t,a.opacity,p);break;case"size-ramp":m=this._renderSizeRamp(t,a.opacity);break;case"pie-chart-ramp":m=this._renderPieChartRamp(t);break;case"relationship-ramp":m=Aa(t,this.id,{opacity:a.opacity,effectList:p,ariaLabel:this.messages.previewRelationshipRampAriaLabel});break;case"univariate-above-and-below-ramp":m=this._renderUnivariateAboveAndBelowRamp(t,a.opacity,p);break;case"univariate-color-size-ramp":m=this._renderUnivariateColorSizeRamp(t,a.opacity,p)}if(!m)return null;let f=y("div",{"aria-labelledby":d,class:U.section,id:`${d}-panel`,key:d,role:"tabpanel",tabIndex:0},[h,m]);return r||this._sectionMap.set(d,f),f}_renderPieChartRamp(t){return y("div",{afterCreate:We,bind:t.preview,class:U.pieChartRampPreview})}_renderUnivariateAboveAndBelowRamp(t,e,n){let{sizeRampElement:i,colorRampElement:r}=ql(t,e,"horizontal");if(!i)return null;let s=Wl(i,"full",!0,"horizontal"),o=Gn(i,"above",!0,"horizontal"),a=Gn(i,"below",!0,"horizontal"),l=12,d=this.messages?.previewColorRampAriaLabel,h=zn(r,{width:o,height:l,rampAlignment:"horizontal",opacity:e,type:"above",effectList:n,ariaLabel:d}),p=zn(r,{width:a,height:l,rampAlignment:"horizontal",opacity:e,type:"below",effectList:n,ariaLabel:d}),m=Rs(i,"card"),f=i.infos.map(x=>x.label),w=f.length-1,M=f.map((x,F)=>F===0||F===w?y("div",{key:F},x):null),_={display:"flex",flexDirection:"column"},S={display:"flex",flexDirection:"row"},O={marginTop:"3px",display:"flex"};ao(this.container)?O.marginRight=`${m}px`:O.marginLeft=`${m}px`;let B={width:`${s}px`,display:"flex",flexDirection:"row",justifyContent:"space-between"};return y("div",{class:U.layerRow,key:"size-ramp-preview",styles:_},y("div",{class:this.classes(U.symbolContainer,U.sizeRampHorizontal),styles:S},i.infos.map((x,F)=>y("div",{afterCreate:We,bind:x.preview,class:U.symbol,key:F}))),h?y("div",{class:U.univariateAboveAndBelowColorRamp,key:"color-ramp-preview",styles:O},y("div",{afterCreate:We,bind:h}),y("div",{afterCreate:We,bind:p})):null,y("div",{class:U.layerInfo},y("div",{class:U.rampLabelsContainer,styles:B},M)))}_renderUnivariateColorSizeRamp(t,e,n){let{sizeRampElement:i,colorRampElement:r}=Yl(t,"horizontal");if(!i)return null;let s=Wl(i,"full",!1,"horizontal"),o=Gn(i,"full",!1,"horizontal"),a=zn(r,{width:o,height:12,rampAlignment:"horizontal",opacity:e,type:"full",effectList:n,ariaLabel:this.messages?.previewColorRampAriaLabel}),l=Rs(i,"card"),d=i.infos.length-1,h=i.infos.map((M,_)=>_===0||_===d?y("div",{key:_},M.label):null),p={display:"flex",flexDirection:"column"},m={display:"flex",flexDirection:"row"},f={marginTop:"3px",display:"flex"};ao(this.container)?f.marginRight=`${l}px`:f.marginLeft=`${l}px`;let w={width:`${s}px`,display:"flex",flexDirection:"row",justifyContent:"space-between"};return y("div",{class:U.layerRow,key:"size-ramp-preview",styles:p},y("div",{class:this.classes(U.symbolContainer,U.sizeRampHorizontal),styles:m},i.infos.map((M,_)=>y("div",{afterCreate:We,bind:M.preview,class:U.symbol,key:_}))),y("div",{class:U.univariateAboveAndBelowColorRamp,key:"color-ramp-preview",styles:f},y("div",{afterCreate:We,bind:a})),y("div",{class:U.layerInfo},y("div",{class:U.rampLabelsContainer,styles:w},h)))}_renderLegendForElementInfo(t,e,n,i){let r=e.layer;if(t.type)return this._renderLegendForElement(t,e,i,!1,!0);let s=Zl(r,n),o=Ki(this.messages,t.label,!1)??"";if(t.preview){if(!t.symbol?.type.includes("simple-fill")){if(!t.label)return y("div",{afterCreate:We,bind:t.preview,key:i});let x={[U.symbolCell]:this._hasIndicators};return y("div",{class:this.classes(U.layerRow,{[U.symbolRow]:this._hasIndicators}),key:i},y("div",{afterCreate:We,bind:t.preview,class:this.classes(x)}),y("div",{class:this.classes(U.imageLabel,{[U.labelCell]:this._hasIndicators})},o))}let a=255,l=255,d=255,h=0,p=255,m=255,f=255,w=0,M=t.symbol.color?.a,_=t.symbol.outline?.color?.a;M&&(a=t.symbol.color.r,l=t.symbol.color.g,d=t.symbol.color.b,h=t.symbol.color.a*r.opacity),_&&(p=t.symbol.outline.color.r,m=t.symbol.outline.color.g,f=t.symbol.outline.color.b,w=t.symbol.outline.color.a*r.opacity);let S=t.symbol.color?.isBright??!0,O=S?"rgba(255, 255, 255, .6)":"rgba(0, 0, 0, .6)",B={background:M?`rgba(${a}, ${l}, ${d}, ${h})`:"none",color:S?"black":"white",textShadow:`-1px -1px 0 ${O},
                                              1px -1px 0 ${O},
                                              -1px 1px 0 ${O},
                                              1px 1px 0 ${O}`,border:_?`1px solid rgba(${p}, ${m}, ${f}, ${w})`:"none",filter:gd(e.effectList)??void 0};return y("div",{class:U.layerRow,key:i},y("div",{class:U.labelElement,styles:B},o))}if(t.src){let a=this._renderImage(t,r,s);return y("div",{class:U.layerRow,key:i},a,y("div",{class:U.imageLabel},o))}}_renderImage(t,e,n){let{label:i,src:r,opacity:s}=t,o={[U.imageryLayerStretchedImage]:n,[U.symbol]:!n},a={opacity:`${s??e.opacity}`};return y("img",{alt:Ki(this.messages,i,!1),"aria-label":Ki(this.messages,i,!1),border:0,class:this.classes(o),height:t.height,src:r,styles:a,width:t.width})}_renderSizeRampLines(t){let e=t.infos,n=e[0],i=e[e.length-1],r=n.symbol,s=this._hasIndicators,o=Bi(n.size+n.outlineSize)*As,a=Bi(i.size+i.outlineSize)*As,l=s?o:o+50*As,d=s?o/2+50*As:o,h=TS(r),p=DS(r),m=document.createElement("canvas");m.width=l,m.height=d,m.style.width=m.width/As+"px",m.style.height=m.height/As+"px";let f=m.getContext("2d");if(s){f.beginPath();let w=0,M=0,_=l/2-a/2,S=d;f.moveTo(w,M),f.lineTo(_,S);let O=l,B=0,x=l/2+a/2,F=d;f.moveTo(O,B),f.lineTo(x,F)}else{f.beginPath();let w=0,M=d/2-a/2,_=l;f.moveTo(w,M),f.lineTo(_,0);let O=0,B=d/2+a/2,x=l,F=d;f.moveTo(O,B),f.lineTo(x,F)}return f.strokeStyle=SS,f.stroke(),y("div",{afterCreate:We,bind:m,styles:s?{display:"flex",marginTop:`-${h?0:p?o/2:0}px`,marginBottom:`-${h?a:p?a/2:0}px`}:{display:"flex",marginRight:`-${h?0:p?o/2:0}px`,marginLeft:`-${h?0:p?a/2:0}px`}})}_renderSizeRamp(t,e){let n=t.infos,i=n[0].label,r=n[n.length-1].label,s=n[0].preview,o=n[n.length-1].preview,a=this._hasIndicators,l={"flex-direction":a?"column":"row-reverse"};s&&(s=s.cloneNode(!0),s.style.display="flex"),o&&(o=o.cloneNode(!0),o.style.display="flex");let d={opacity:e!=null?`${e}`:""};return y("div",{class:this.classes(U.layerRow,{[U.sizeRampRow]:a})},y("div",{class:U.rampLabel},a?i:r),y("div",{class:U.sizeRampContainer,styles:l},y("div",{afterCreate:We,bind:s,class:U.sizeRampPreview,styles:d}),this._renderSizeRampLines(t),y("div",{afterCreate:We,bind:o,class:U.sizeRampContainer,styles:d})),y("div",{class:U.rampLabel},a?r:i))}_getRampStopLabel(t,e){switch(e){case"heatmap-ramp":return this.messages[t.label];case"stretch-ramp":return Kl(t,this.messages);default:return t.label}}_renderLegendForRamp(t,e,n){let i=t.infos,r=t.type,s=r==="heatmap-ramp",o=i.length-1,a=bS,l=o>2&&!s?vS*o:CS,d=l+20,h=10,p=i.slice(0).reverse(),m=p.length-1,f=p.length%2!=0?p[p.length/2|0]:null,w=f&&y("div",{class:U.intervalSeparatorsContainer},y("div",{class:U.intervalSeparator},"|"),y("div",{class:U.rampLabel},this._getRampStopLabel(f,r))),M=[[{shape:{type:"path",path:`M0 ${a/2} L${h} 0 L${h} ${a} Z`},fill:p[0].color,stroke:{width:0}},{shape:{type:"rect",x:h,y:0,width:l,height:a},fill:{type:"linear",x1:h,y1:0,x2:l+h,y2:0,colors:p.map((B,x)=>({color:B.color,offset:s&&"ratio"in B?B.ratio:x/o}))},stroke:{width:0}},{shape:{type:"path",path:`M${l+h} 0 L${d} ${a/2} L${l+h} ${a} Z`},fill:p[m].color,stroke:{width:0}}]],_=kg(M,d,a),S={filter:gd(n)??void 0,opacity:e==null?void 0:`${e}`},O={justifyContent:"center"};return y("div",{class:U.layerRow,styles:O},y("div",{class:U.rampLabel},this._getRampStopLabel(p[0],r)),y("div",{class:U.symbolContainer},y("div",{styles:S},_),w),y("div",{class:U.rampLabel},this._getRampStopLabel(p[m],r)))}};c([u()],Ii.prototype,"activeLayerInfos",void 0),c([u()],Ii.prototype,"headingLevel",void 0),c([u()],Ii.prototype,"layout",void 0),c([u(),yt("esri/widgets/Legend/t9n/Legend")],Ii.prototype,"messages",void 0),c([u(),yt("esri/t9n/common")],Ii.prototype,"messagesCommon",void 0),c([u({readOnly:!0})],Ii.prototype,"type",void 0),c([u()],Ii.prototype,"view",void 0),c([Ra()],Ii.prototype,"_selectSection",null),Ii=c([D("esri.widgets.Legend.styles.Card")],Ii);var Ql=Ii;var ue="esri-legend",Q={service:`${ue}__service`,label:`${ue}__service-label`,layer:`${ue}__layer`,groupLayer:`${ue}__group-layer`,groupLayerChild:`${ue}__group-layer-child`,layerTable:`${ue}__layer-table`,layerTableSizeRamp:`${ue}__layer-table--size-ramp`,layerChildTable:`${ue}__layer-child-table`,layerCaption:`${ue}__layer-caption`,layerBody:`${ue}__layer-body`,layerRow:`${ue}__layer-row`,layerCell:`${ue}__layer-cell`,layerInfo:`${ue}__layer-cell ${ue}__layer-cell--info`,imageryLayerStretchedImage:`${ue}__imagery-layer-image--stretched`,imageryLayerCellStretched:`${ue}__imagery-layer-cell--stretched`,imageryLayerInfoStretched:`${ue}__imagery-layer-info--stretched`,symbolContainer:`${ue}__layer-cell ${ue}__layer-cell--symbols`,symbol:`${ue}__symbol`,rampContainer:`${ue}__ramps`,sizeRamp:`${ue}__size-ramp`,colorRamp:`${ue}__color-ramp`,opacityRamp:`${ue}__opacity-ramp`,borderlessRamp:`${ue}__borderless-ramp`,rampTick:`${ue}__ramp-tick`,rampFirstTick:`${ue}__ramp-tick-first`,rampLastTick:`${ue}__ramp-tick-last`,rampLabelsContainer:`${ue}__ramp-labels`,rampLabel:`${ue}__ramp-label`,message:`${ue}__message`,univariateAboveAndBelowLabel:"esri-univariate-above-and-below-ramp__label"};var MS=`${ue}__`,IS=24,ev={display:"flex",alignItems:"flex-start"},Ih={marginLeft:"3px"},Fs={display:"table-cell",verticalAlign:"middle"},_r=class extends It{constructor(t,e){super(t,e),this.activeLayerInfos=null,this.headingLevel=3,this.messages=null,this.type="classic"}render(){let t=this.activeLayerInfos,e=t&&t.toArray().map(n=>this._renderLegendForLayer(n)).filter(n=>!!n);return y("div",null,e&&e.length?e:y("div",{class:Q.message},this.messages.noLegend))}_renderLegendForLayer(t){if(!t.ready)return null;let e=!!t.children.length,n=`${MS}${t.layer.uid}-version-${t.version}`,i=t.title?ts({level:this.headingLevel,class:this.classes(Ge.heading,Q.label)},t.title):null;if(e){let r=t.children.map(s=>this._renderLegendForLayer(s)).toArray();return y("div",{class:this.classes(Q.service,Q.groupLayer),key:n},i,r)}{let r=t.legendElements;if(r&&!r.length)return null;let s=r.map(a=>this._renderLegendForElement(a,t.layer,t.effectList)).filter(a=>!!a);if(!s.length)return null;let o={[Q.groupLayerChild]:!!t.parent};return y("div",{class:this.classes(Q.service,o),key:n},i,y("div",{class:Q.layer},s))}}_renderLegendForElement(t,e,n,i){let r=t.type==="color-ramp",s=t.type==="opacity-ramp",o=t.type==="size-ramp",a=null;if(t.type==="symbol-table"||o){let f=t.infos.map(w=>this._renderLegendForElementInfo(w,e,n,o,t.legendType)).filter(w=>!!w);f.length&&(a=y("div",{class:Q.layerBody},f))}else t.type==="color-ramp"||t.type==="opacity-ramp"||t.type==="heatmap-ramp"||t.type==="stretch-ramp"?a=this._renderLegendForRamp(t,e.opacity):t.type==="relationship-ramp"?a=Aa(t,this.id,{opacity:e.opacity,effectList:n,ariaLabel:this.messages.previewRelationshipRampAriaLabel}):t.type==="pie-chart-ramp"?a=this._renderPieChartRamp(t):t.type==="univariate-above-and-below-ramp"?a=this._renderUnivariateAboveAndBelowRamp(t,e.opacity,n):t.type==="univariate-color-size-ramp"&&(a=this._renderUnivariateColorSizeRamp(t,e.opacity,n));if(!a)return null;let l=t.title,d=null;if(typeof l=="string")d=l;else if(l){let f=Ki(this.messages,l,r||s);d=Mh(l,r||s)&&l.title?`${l.title} (${f})`:f}let h=i?Q.layerChildTable:Q.layerTable,p=d?y("div",{class:Q.layerCaption},d):null,m={[Q.layerTableSizeRamp]:o||!i};return y("div",{class:this.classes(h,m)},p,a)}_renderPieChartRamp(t){return y("div",{afterCreate:We,bind:t.preview})}_renderUnivariateAboveAndBelowRamp(t,e,n){let{sizeRampElement:i,colorRampElement:r}=ql(t,e);if(!i)return null;let s=this.messages?.previewColorRampAriaLabel,o=Gn(i,"above",!0),a=Gn(i,"below",!0),l=12,d=zn(r,{width:l,height:o,rampAlignment:"vertical",opacity:e,type:"above",effectList:n,ariaLabel:s}),h=zn(r,{width:l,height:a,rampAlignment:"vertical",opacity:e,type:"below",effectList:n,ariaLabel:s}),p=Rs(i),m=i.infos.map(F=>F.label),f=m.map((F,P)=>P===0?y("div",{class:F?d?Q.univariateAboveAndBelowLabel:Q.rampLabel:void 0,key:P},F):P===2?y("div",null):null),w=m.length-1,M=Math.floor(m.length/2),_=m.map((F,P)=>P===M||P===w?y("div",{class:F?d?Q.univariateAboveAndBelowLabel:Q.rampLabel:void 0,key:P},F):null),S={display:"table-cell",verticalAlign:"middle"},O={marginTop:`${p}px`},B={height:`${o}px`},x={height:`${a}px`};return y("div",{key:"univariate-above-and-below-ramp-preview",styles:ev},y("div",{class:Q.layerBody},i.infos.map((F,P)=>y("div",{class:this.classes(Q.layerRow,Q.sizeRamp)},y("div",{afterCreate:We,bind:F.preview,class:Q.symbol,styles:S}),d||P%2!=0?null:y("div",{class:Q.layerInfo},m[P])))),d?y("div",{key:"color-ramp-preview",styles:O},y("div",{styles:Ih},y("div",{styles:Fs},y("div",{afterCreate:We,bind:d,class:Q.rampContainer})),y("div",{styles:Fs},y("div",{class:Q.rampLabelsContainer,styles:B},f))),y("div",{styles:Ih},y("div",{styles:Fs},y("div",{afterCreate:We,bind:h,class:Q.rampContainer})),y("div",{styles:Fs},y("div",{class:Q.rampLabelsContainer,styles:x},_)))):null)}_renderUnivariateColorSizeRamp(t,e,n){let{sizeRampElement:i,colorRampElement:r}=Yl(t);if(!i)return null;let s=Rs(i),o=12,a=Gn(i,"full",!1),l=zn(r,{width:o,height:a,rampAlignment:"vertical",opacity:e,type:"full",effectList:n,ariaLabel:this.messages?.previewColorRampAriaLabel}),d=i.infos.length-1,h=i.infos.map((w,M)=>M===0||M===d?y("div",{class:w.label?r?Q.univariateAboveAndBelowLabel:Q.rampLabel:void 0,key:M},w.label):null),p={display:"table-cell",verticalAlign:"middle"},m={marginTop:`${s}px`},f={height:`${a}px`};return y("div",{key:"univariate-above-and-below-ramp-preview",styles:ev},y("div",{class:Q.layerBody},i.infos.map(w=>y("div",{class:this.classes(Q.layerRow,Q.sizeRamp)},y("div",{afterCreate:We,bind:w.preview,class:Q.symbol,styles:p})))),y("div",{key:"color-ramp-preview",styles:m},y("div",{styles:Ih},y("div",{styles:Fs},y("div",{afterCreate:We,bind:l,class:Q.rampContainer})),y("div",{styles:Fs},y("div",{class:Q.rampLabelsContainer,styles:f},h)))))}_renderLegendForRamp(t,e){let n=t.infos,i=t.type==="opacity-ramp",r=t.type==="heatmap-ramp",s=t.type==="stretch-ramp",o=t.preview,a=i?Q.opacityRamp:"";o.className=`${Q.colorRamp} ${a}`,e!=null&&(o.style.opacity=e.toString());let l=n.map(p=>y("div",{class:p.label?Q.rampLabel:void 0},r?this.messages[p.label]||p.label:s?Kl(p,this.messages):p.label)),d={width:`${IS}px`},h={height:o.style.height};return y("div",{class:Q.layerRow},y("div",{class:Q.symbolContainer,styles:d},y("div",{afterCreate:We,bind:o,class:Q.rampContainer})),y("div",{class:Q.layerInfo},y("div",{class:Q.rampLabelsContainer,styles:h},l)))}_renderLegendForElementInfo(t,e,n,i,r){if(t.type)return this._renderLegendForElement(t,e,n,!0);let s=null,o=Zl(e,r);if(t.preview?s=y("div",{afterCreate:We,bind:t.preview,class:Q.symbol}):t.src&&(s=this._renderImage(t,e,o)),!s)return null;let a={[Q.imageryLayerInfoStretched]:o},l={[Q.imageryLayerInfoStretched]:o,[Q.sizeRamp]:!o&&i};return y("div",{class:Q.layerRow},y("div",{class:this.classes(Q.symbolContainer,l)},s),y("div",{class:this.classes(Q.layerInfo,a)},Ki(this.messages,t.label,!1)||""))}_renderImage(t,e,n){let{label:i,src:r,opacity:s}=t,o={[Q.imageryLayerStretchedImage]:n,[Q.symbol]:!n},a={opacity:`${s??e.opacity}`};return y("img",{alt:Ki(this.messages,i,!1),"aria-label":Ki(this.messages,i,!1),border:0,class:this.classes(o),height:t.height,src:r,styles:a,width:t.width})}};c([u()],_r.prototype,"activeLayerInfos",void 0),c([u()],_r.prototype,"headingLevel",void 0),c([u(),yt("esri/widgets/Legend/t9n/Legend")],_r.prototype,"messages",void 0),c([u({readOnly:!0})],_r.prototype,"type",void 0),_r=c([D("esri.widgets.Legend.styles.Classic")],_r);var yr=_r;var tv={base:"esri-legend",widgetIcon:Ni.layerList},st=class extends It{constructor(t,e){super(t,e),this.headingLevel=3,this.iconClass=tv.widgetIcon,this.icon=null,this.messages=null,this.style=new yr,this.viewModel=new Qy}initialize(){this.addHandles([Bt(()=>this.view,"resize",()=>this.scheduleRender()),Bt(()=>this.activeLayerInfos,"change",()=>this._refreshActiveLayerInfos(this.activeLayerInfos)),R(()=>this.headingLevel,t=>{let{style:e}=this;e&&(e.headingLevel=t)}),R(()=>this.style,(t,e)=>{e&&t!==e&&e.destroy(),t&&(t.activeLayerInfos=this.activeLayerInfos,t.type==="card"&&(t.view=this.view),t.headingLevel=this.headingLevel)},le)])}get activeLayerInfos(){return this.viewModel.activeLayerInfos}set activeLayerInfos(t){this.viewModel.activeLayerInfos=t}get basemapLegendVisible(){return this.viewModel.basemapLegendVisible}set basemapLegendVisible(t){this.viewModel.basemapLegendVisible=t}get groundLegendVisible(){return this.viewModel.groundLegendVisible}set groundLegendVisible(t){this.viewModel.groundLegendVisible=t}get hideLayersNotInCurrentView(){return this.viewModel.hideLayersNotInCurrentView}set hideLayersNotInCurrentView(t){this.viewModel.hideLayersNotInCurrentView=t}get keepCacheOnDestroy(){return this.viewModel.keepCacheOnDestroy}set keepCacheOnDestroy(t){this.viewModel.keepCacheOnDestroy=t}get respectLayerVisibility(){return this.viewModel.respectLayerVisibility}set respectLayerVisibility(t){this.viewModel.respectLayerVisibility=t}get label(){return this.messages?.widgetLabel??""}set label(t){this._overrideIfSome("label",t)}get layerInfos(){return this.viewModel.layerInfos}set layerInfos(t){this.viewModel.layerInfos=t}castStyle(t){if(t instanceof Ql||t instanceof yr)return t;if(typeof t=="string")return t==="card"?new Ql:new yr;if(t&&typeof t.type=="string"){let e=I({},t);return delete e.type,new(t.type==="card"?Ql:yr)(e)}return new yr}get view(){return this.viewModel.view}set view(t){this.viewModel.view=t}render(){return y("div",{class:this.classes(tv.base,Ge.widget,this.style instanceof yr?Ge.panel:null)},this.style.render())}_refreshActiveLayerInfos(t){t.forEach(e=>{this.removeHandles(`version_${e.layer.uid}`),this._renderOnActiveLayerInfoChange(e)}),this.scheduleRender()}_renderOnActiveLayerInfoChange(t){let e=R(()=>t.version,()=>this.scheduleRender());this.addHandles(e,`version_${t.layer.uid}`);let n=Bt(()=>t.children,"change",()=>t.children.forEach(i=>this._renderOnActiveLayerInfoChange(i)),le);this.addHandles(n,`version_${t.layer.uid}`),t.children.forEach(i=>this._renderOnActiveLayerInfoChange(i))}};c([u()],st.prototype,"activeLayerInfos",null),c([u()],st.prototype,"basemapLegendVisible",null),c([u()],st.prototype,"groundLegendVisible",null),c([u()],st.prototype,"headingLevel",void 0),c([u()],st.prototype,"hideLayersNotInCurrentView",null),c([u()],st.prototype,"keepCacheOnDestroy",null),c([u()],st.prototype,"respectLayerVisibility",null),c([u()],st.prototype,"iconClass",void 0),c([u()],st.prototype,"icon",void 0),c([u()],st.prototype,"label",null),c([u()],st.prototype,"layerInfos",null),c([u(),yt("esri/widgets/Legend/t9n/Legend")],st.prototype,"messages",void 0),c([u()],st.prototype,"style",void 0),c([wi("style")],st.prototype,"castStyle",null),c([u()],st.prototype,"view",null),c([u()],st.prototype,"viewModel",void 0),st=c([D("esri.widgets.Legend")],st);var iv=st;var ci=(()=>{let e=class e{constructor(){this.showLayersOrWidgetsSubject=new Pe({type:H.PlatformLayer,visible:!0}),this.showLayersOrWidgets$=this.showLayersOrWidgetsSubject.asObservable(),this.setMapFiltersSubject=new Pe(null),this.setMapFilters$=this.setMapFiltersSubject.asObservable(),this.platformFilters={layerOrWidget:H.PlatformLayer,details:new Ps},this.resetPlatformFiltersSubject=new Pe(null),this.resetPlatformFilters$=this.resetPlatformFiltersSubject.asObservable(),this.updateFiltersListSubject=new Pe(null),this.updateFiltersList$=this.updateFiltersListSubject.asObservable(),this.downloadFilteredDataSubject=new Pe(null),this.downloadFilteredData$=this.downloadFilteredDataSubject.asObservable(),this.hurricaneFilters={layerOrWidget:H.HistoricHurricaneTrackLayer,details:new Ps},this.hConeLayerFilters={layerOrWidget:H.HHConeLayer,details:new Ps},this.pipelineFilters={layerOrWidget:H.PipelineLayer,details:new Ps},this.resetPipelineFiltersSubject=new Pe(null),this.resetPipelineFilters$=this.resetPipelineFiltersSubject.asObservable(),this.FilterListFromMapSubject=new Pe({type:E.None,value:[]}),this.filterListFromMap$=this.FilterListFromMapSubject.asObservable()}ShowHideLayersOrWidgets(i){this.showLayersOrWidgetsSubject.next(i)}setMapFilterValue(i,r){let s=this.getLayerOrWidgetFromFilterType(i),o=this.getFilterObjectFromLayerOrWidgetType(s);if(o==null)return;let a=!1;if(r.length<1?o.details.has(i)&&(o.details.delete(i),a=!0):(o.details.set(i,r),a=!0),!!a)switch(this.setMapFiltersSubject.next(o),s){case H.PlatformLayer:this.updatePlatformFilterList(i,r);break;case H.HistoricHurricaneTrackLayer:this.updateHurricaneFilterList(i,r);break}}updatePlatformFilterList(i,r){if(i===E.Area_Code){let s=new Map;s.set(E.Area_Code,r),this.updateFiltersListSubject.next({type:E.Block_Number,value:s})}}clearPlatformFilters(){let i=this.platformFilters.details.get(E.Area_Code);this.platformFilters.details.clear(),this.setMapFiltersSubject.next(this.platformFilters),this.resetPlatformFiltersSubject.next(!0),i&&i.length>0&&this.updateFiltersListSubject.next({type:E.Block_Number,value:null})}downloadFilteredData(i){this.downloadFilteredDataSubject.next(i)}updateHurricaneFilterList(i,r){if(i===E.HurricaneYear){if(!this.hurricaneFilters.details.has(E.HurricaneName)){let s=new Map;s.set(E.HurricaneYear,r),this.updateFiltersListSubject.next({type:E.HurricaneName,value:s})}if(r.length<1){let s=null;this.hurricaneFilters.details.has(E.HurricaneName)&&(s=new Map,s.set(E.HurricaneName,this.hurricaneFilters.details.get(E.HurricaneName))),this.updateFiltersListSubject.next({type:E.HurricaneYear,value:s})}}else if(i===E.HurricaneName){if(!this.hurricaneFilters.details.has(E.HurricaneYear)){let s=new Map;s.set(E.HurricaneName,r),this.updateFiltersListSubject.next({type:E.HurricaneYear,value:s})}if(r.length<1){let s=null;this.hurricaneFilters.details.has(E.HurricaneYear)&&(s=new Map,s.set(E.HurricaneYear,this.hurricaneFilters.details.get(E.HurricaneYear))),this.updateFiltersListSubject.next({type:E.HurricaneName,value:s})}}this.updateFiltersListSubject.next({type:E.HConeAdvisory,value:this.hurricaneFilters.details})}clearHurricaneFilters(){let i=this.hurricaneFilters.details.get(E.HurricaneYear),r=this.hurricaneFilters.details.get(E.HurricaneName);this.hurricaneFilters.details.clear(),this.hConeLayerFilters.details.clear(),this.setMapFiltersSubject.next(this.hurricaneFilters),this.setMapFiltersSubject.next(this.hConeLayerFilters),i&&i.length>0&&this.updateFiltersListSubject.next({type:E.HurricaneName,value:null}),r&&r.length>0&&this.updateFiltersListSubject.next({type:E.HurricaneYear,value:null})}clearPipelineFilters(){this.pipelineFilters.details.clear(),this.setMapFiltersSubject.next(this.pipelineFilters),this.resetPipelineFiltersSubject.next(!0)}setFilterListFromMap(i){this.FilterListFromMapSubject.next(i)}getLayerOrWidgetFromFilterType(i){switch(i){case E.ActiveStatus:case E.Area_Code:case E.Block_Number:case E.Bus_Asc_Name:case E.operatorName:case E.Complex_Id_Num:case E.Install_Date:case E.Removal_Date:case E.Water_Depth__feet_:case E.platformName:return H.PlatformLayer;case E.HurricaneName:case E.HurricaneYear:return H.HistoricHurricaneTrackLayer;case E.PipelineOperator:case E.PipelineSegmentNumber:case E.PipelineStatusCode:return H.PipelineLayer;case E.HConeAdvisory:return H.HHConeLayer;default:return H.None}}getFilterObjectFromType(i){let r=this.getLayerOrWidgetFromFilterType(i);return this.getFilterObjectFromLayerOrWidgetType(r)}getFilterObjectFromLayerOrWidgetType(i){switch(i){case H.PlatformLayer:return this.platformFilters;case H.HistoricHurricaneTrackLayer:return this.hurricaneFilters;case H.HHConeLayer:return this.hConeLayerFilters;case H.PipelineLayer:return this.pipelineFilters;default:return null}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),E=function(t){return t.None="None",t.ActiveStatus="ActiveStatus",t.Area_Code="Area_Code",t.Block_Number="Block_Number",t.Bus_Asc_Name="Bus_Asc_Name",t.operatorName="operatorName",t.platformName="PlatformName",t.Water_Depth__feet_="Water_Depth__feet_",t.Install_Date="Install_Date",t.Removal_Date="Removal_Date",t.Complex_Id_Num="Complex_Id_Num",t.HurricaneYear="year",t.HurricaneName="NAME",t.PipelineSegmentNumber="SEGMENT_NU",t.PipelineOperator="SDE_COMPAN",t.PipelineStatusCode="STATUS_COD",t.HConeAdvisory="AdvisoryNo",t}(E||{}),Eh=function(t){return t.Active="Active",t.Removed="Removed",t}(Eh||{}),H=function(t){return t.PlatformLayer="PlatformLayer",t.BSEEPlatformLayer="BSEEPlatformLayer",t.Legend="Legend",t.AreaLayer="AreaLayer",t.BLockLayer="BLockLayer",t.HistoricHurricaneTrackLayer="HistoricHurricaneTrackLayer",t.HHConeLayer="HHConeLayer",t.PipelineLayer="PipelineLayer",t.None="None",t}(H||{}),Ps=class extends Map{};var ES=["overlay"],xS=["*"];function OS(t,e){t&1&&G(0,"div")}function kS(t,e){if(t&1&&(v(0,"div"),q(1,OS,1,0,"div",6),b()),t&2){let n=T(2);Oc(n.spinner.class),Kn("color",n.spinner.color),g(),C("ngForOf",n.spinner.divArray)}}function RS(t,e){if(t&1&&(G(0,"div",7),zr(1,"safeHtml")),t&2){let n=T(2);C("innerHTML",Nc(1,1,n.template),em)}}function AS(t,e){if(t&1&&(v(0,"div",2,0),q(2,kS,2,5,"div",3)(3,RS,2,3,"div",4),v(4,"div",5),Hr(5),b()()),t&2){let n=T();Kn("background-color",n.spinner.bdColor)("z-index",n.spinner.zIndex)("position",n.spinner.fullScreen?"fixed":"absolute"),C("@.disabled",n.disableAnimation)("@fadeIn","in"),g(2),C("ngIf",!n.template),g(),C("ngIf",n.template),g(),Kn("z-index",n.spinner.zIndex)}}var FS={"ball-8bits":16,"ball-atom":4,"ball-beat":3,"ball-circus":5,"ball-climbing-dot":4,"ball-clip-rotate":1,"ball-clip-rotate-multiple":2,"ball-clip-rotate-pulse":2,"ball-elastic-dots":5,"ball-fall":3,"ball-fussion":4,"ball-grid-beat":9,"ball-grid-pulse":9,"ball-newton-cradle":4,"ball-pulse":3,"ball-pulse-rise":5,"ball-pulse-sync":3,"ball-rotate":1,"ball-running-dots":5,"ball-scale":1,"ball-scale-multiple":3,"ball-scale-pulse":2,"ball-scale-ripple":1,"ball-scale-ripple-multiple":3,"ball-spin":8,"ball-spin-clockwise":8,"ball-spin-clockwise-fade":8,"ball-spin-clockwise-fade-rotating":8,"ball-spin-fade":8,"ball-spin-fade-rotating":8,"ball-spin-rotate":2,"ball-square-clockwise-spin":8,"ball-square-spin":8,"ball-triangle-path":3,"ball-zig-zag":2,"ball-zig-zag-deflect":2,cog:1,"cube-transition":2,fire:3,"line-scale":5,"line-scale-party":5,"line-scale-pulse-out":5,"line-scale-pulse-out-rapid":5,"line-spin-clockwise-fade":8,"line-spin-clockwise-fade-rotating":8,"line-spin-fade":8,"line-spin-fade-rotating":8,pacman:6,"square-jelly-box":2,"square-loader":1,"square-spin":1,timer:1,"triangle-skew-spin":1},xh={BD_COLOR:"rgba(51,51,51,0.8)",SPINNER_COLOR:"#fff",Z_INDEX:99999},Oh="primary",vr=class t{constructor(e){Object.assign(this,e)}static create(e){return!e?.template&&!e?.type&&console.warn(`[ngx-spinner]: Property "type" is missed. Please, provide animation type to <ngx-spinner> component
        and ensure css is added to angular.json file`),new t(e)}},kh=(()=>{let e=class e{constructor(){this.spinnerObservable=new Pe(null)}getSpinner(i){return this.spinnerObservable.asObservable().pipe(_t(r=>r&&r.name===i))}show(i=Oh,r){return new Promise((s,o)=>{setTimeout(()=>{r&&Object.keys(r).length?(r.name=i,this.spinnerObservable.next(new vr(te(I({},r),{show:!0}))),s(!0)):(this.spinnerObservable.next(new vr({name:i,show:!0})),s(!0))},10)})}hide(i=Oh,r=10){return new Promise((s,o)=>{setTimeout(()=>{this.spinnerObservable.next(new vr({name:i,show:!1})),s(!0)},r)})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),nv=new ke("NGX_SPINNER_CONFIG"),PS=(()=>{let e=class e{constructor(i){this._sanitizer=i}transform(i){if(i)return this._sanitizer.bypassSecurityTrustHtml(i)}};e.\u0275fac=function(r){return new(r||e)($(Ad,16))},e.\u0275pipe=ha({name:"safeHtml",type:e,pure:!0,standalone:!0});let t=e;return t})(),rv=(()=>{let e=class e{constructor(i,r,s,o){this.spinnerService=i,this.changeDetector=r,this.elementRef=s,this.globalConfig=o,this.disableAnimation=!1,this.spinner=new vr,this.ngUnsubscribe=new lt,this.setDefaultOptions=()=>{let{type:a}=this.globalConfig??{};this.spinner=vr.create({name:this.name,bdColor:this.bdColor,size:this.size,color:this.color,type:this.type??a,fullScreen:this.fullScreen,divArray:this.divArray,divCount:this.divCount,show:this.show,zIndex:this.zIndex,template:this.template,showSpinner:this.showSpinner})},this.bdColor=xh.BD_COLOR,this.zIndex=xh.Z_INDEX,this.color=xh.SPINNER_COLOR,this.size="large",this.fullScreen=!0,this.name=Oh,this.template=null,this.showSpinner=!1,this.divArray=[],this.divCount=0,this.show=!1}initObservable(){this.spinnerService.getSpinner(this.name).pipe(Ze(this.ngUnsubscribe)).subscribe(i=>{this.setDefaultOptions(),Object.assign(this.spinner,i),i.show&&this.onInputChange(),this.changeDetector.detectChanges()})}ngOnInit(){this.setDefaultOptions(),this.initObservable()}isSpinnerZone(i){return i===this.elementRef.nativeElement.parentElement?!0:i.parentNode&&this.isSpinnerZone(i.parentNode)}ngOnChanges(i){for(let r in i)if(r){let s=i[r];if(s.isFirstChange())return;typeof s.currentValue<"u"&&s.currentValue!==s.previousValue&&s.currentValue!==""&&(this.spinner[r]=s.currentValue,r==="showSpinner"&&(s.currentValue?this.spinnerService.show(this.spinner.name,this.spinner):this.spinnerService.hide(this.spinner.name)),r==="name"&&this.initObservable())}}getClass(i,r){this.spinner.divCount=FS[i],this.spinner.divArray=Array(this.spinner.divCount).fill(0).map((o,a)=>a);let s="";switch(r.toLowerCase()){case"small":s="la-sm";break;case"medium":s="la-2x";break;case"large":s="la-3x";break;default:break}return"la-"+i+" "+s}onInputChange(){this.spinner.class=this.getClass(this.spinner.type,this.spinner.size)}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}};e.\u0275fac=function(r){return new(r||e)($(kh),$(kt),$(Be),$(nv,8))},e.\u0275cmp=se({type:e,selectors:[["ngx-spinner"]],viewQuery:function(r,s){if(r&1&&Tt(ES,5),r&2){let o;ye(o=ve())&&(s.spinnerDOM=o.first)}},inputs:{bdColor:"bdColor",size:"size",color:"color",type:"type",fullScreen:"fullScreen",name:"name",zIndex:"zIndex",template:"template",showSpinner:"showSpinner",disableAnimation:"disableAnimation"},standalone:!0,features:[Nt,pe],ngContentSelectors:xS,decls:1,vars:1,consts:[["overlay",""],["class","ngx-spinner-overlay",3,"background-color","z-index","position",4,"ngIf"],[1,"ngx-spinner-overlay"],[3,"class","color",4,"ngIf"],[3,"innerHTML",4,"ngIf"],[1,"loading-text"],[4,"ngFor","ngForOf"],[3,"innerHTML"]],template:function(r,s){r&1&&(Br(),q(0,AS,6,12,"div",1)),r&2&&C("ngIf",s.spinner.show)},dependencies:[PS,Tn,Dn],styles:[".ngx-spinner-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%}.ngx-spinner-overlay[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:not(.loading-text){top:50%;left:50%;margin:0;position:absolute;transform:translate(-50%,-50%)}.loading-text[_ngcontent-%COMP%]{position:absolute;top:60%;left:50%;transform:translate(-50%,-60%)}"],data:{animation:[Cm("fadeIn",[Sm("in",ba({opacity:1})),Gc(":enter",[ba({opacity:0}),zc(300)]),Gc(":leave",zc(200,ba({opacity:0})))])]},changeDetection:0});let t=e;return t})(),sv=(()=>{let e=class e{static forRoot(i){return{ngModule:e,providers:[{provide:nv,useValue:i}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Zt({type:e}),e.\u0275inj=Yt({imports:[Te]});let t=e;return t})();var av=kb(ov());var lv=(()=>{let e=class e{constructor(){}ExportDataExcel(i,r,s){let o=[];o.push(r),import("./chunk-AAQMBHOX.js").then(a=>{let l=a.utils.json_to_sheet([]);a.utils.sheet_add_aoa(l,o),this.autoFitColumns(l,o),a.utils.sheet_add_json(l,i,{origin:"A2",skipHeader:!0});let d={Sheets:{data:l},SheetNames:["data"]},h=a.write(d,{bookType:"xlsx",type:"array"});this.saveAsExcelFile(h,s)})}autoFitColumns(i,r){let s=[];r.map(a=>{a.map(l=>{let d=l.length>10?l.length:10;s[l]=s[l]>=d?s[l]:d})});let o=[];Object.keys(s).map(a=>{let l=s[a]===null?10:s[a];o.push({width:l})}),i["!cols"]=o}saveAsExcelFile(i,r){let s="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8",o=".xlsx",a=new Blob([i],{type:s});av.saveAs(a,r+"_"+new Date().toLocaleDateString()+o)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var VS=["mapViewNode"],cv=(()=>{let e=class e{constructor(i,r,s){this.mapService=i,this.spinnerService=r,this.excelService=s,this.view=null,this.mapReady=!1,this.defaultConditionForLayer={[H.PlatformLayer]:"Latitude <> 0 AND Longitude <> 0",[H.BSEEPlatformLayer]:void 0,[H.Legend]:void 0,[H.AreaLayer]:void 0,[H.BLockLayer]:void 0,[H.HistoricHurricaneTrackLayer]:"1=0",[H.None]:void 0,[H.PipelineLayer]:"1=1",[H.HHConeLayer]:"1=0"}}initializeMap(){let i=this.mapViewEl.nativeElement;$c.apiKey="AAPKd618a22668304d46bef2738772b6593bfCyEJX_kFpN0SYkRDaQSMcopf5s2JUROU6_-R7hRCsCZzlJLDciyRkfSlNltWu6a",$c.log.level="error";let r=new il({basemap:"arcgis-topographic"});this.view=new Ty({container:i,map:r,zoom:6,popup:{defaultPopupTemplateEnabled:!0},center:[-89.052,24.96]}),this.view.constraints={minZoom:3};let s=new Fy({view:this.view});this.view.ui.add(s,{position:"bottom-left"}),this.legend=new iv({view:this.view,visible:!0}),this.view.ui.add(this.legend,"bottom-right"),this.SetAreaLayer(),this.SetBlockLayer(),this.SetBSEEPlatformLayer(),this.SetPipelineLayer();var o=this;return Promise.all([this.areaLayer.load(),this.blockLayer.load(),this.platformsBSEELayer.load()]).then(function(){r.addMany([o.areaLayer,o.blockLayer,o.platformsBSEELayer])}).catch(function(a){console.error("Error loading layers:",a)}),Promise.all([this.pipelineLayer.load()]).then(function(){r.add(o.pipelineLayer)}).catch(function(a){console.error("Error loading pipeline layer:",a)}),this.SetMainPlatformLayer(),r.add(this.platformLayer),this.SetHistoricHurricaneLayer(),this.historicHurricaneTrackLayer.load().then(function(){r.add(o.historicHurricaneTrackLayer)}),this.SetHHConesLayer(),this.hhConesLayer.load().then(function(){r.add(o.hhConesLayer)}),this.view.when()}ngOnInit(){this.initializeMap().then(()=>{console.log("The map is ready."),this.mapReady=!0,this.setFilterValue(),this.mapService.showLayersOrWidgets$.subscribe(i=>{if(this.mapReady)switch(i.type){case H.PlatformLayer:this.platformLayer&&(this.platformLayer.visible=i.visible);break;case H.BSEEPlatformLayer:this.platformsBSEELayer&&(this.platformsBSEELayer.visible=i.visible);break;case H.AreaLayer:this.areaLayer&&(this.areaLayer.visible=i.visible);break;case H.BLockLayer:this.blockLayer&&(this.blockLayer.visible=i.visible);break;case H.Legend:this.legend&&(this.legend.visible=i.visible);break;case H.HistoricHurricaneTrackLayer:this.historicHurricaneTrackLayer&&(this.historicHurricaneTrackLayer.visible=i.visible);break;case H.HHConeLayer:this.hhConesLayer&&(this.hhConesLayer.visible=i.visible);break;case H.PipelineLayer:this.pipelineLayer&&(i.visible==!0&&this.showLoading(this.pipelineLayer),this.pipelineLayer.visible=i.visible);break;default:break}}),this.mapService.setMapFilters$.subscribe(i=>{i!=null&&this.ApplyMapFilters(i)}),this.mapService.updateFiltersList$.subscribe(i=>{this.UpdateFilterList(i)}),this.mapService.downloadFilteredData$.subscribe(i=>{i!=null&&this.downloadFilteredData(i)})})}downloadFilteredData(i){let r=this,s="1=1";i==H.PlatformLayer&&this.defaultConditionForLayer.PlatformLayer!=null&&(s=this.defaultConditionForLayer.PlatformLayer);let o=this.getLayerFromLayerOrWidget(i);o.queryFeatures({where:o.definitionExpression||s,outFields:["*"],orderByFields:[E.platformName]}).then(function(a){let l=Object.keys(a.features[0].attributes),d=[];for(let h=0;h<a.features.length;h++)d.push(a.features[h].attributes);r.excelService.ExportDataExcel(d,l,"FilteredData")})}SetMainPlatformLayer(){let i={type:"simple-marker",size:"4px",outline:{color:"transparent"}},r=["red","blue","green","yellow","violet","deeppink","maroon","orange","indigo","lightseagreen"];var s=[{value:"Removed",symbol:te(I({},i),{color:"grey"})}];let o={type:"unique-value",legendOptions:{title:"Business Asc Name"},field:"Bus_asc_name",defaultLabel:"Active",valueExpression:`
      var Bus_asc_name = $feature.Bus_Asc_Name;
      var Removal_Date = $feature.Removal_Date;
      var today_date = Today();
      var diff = DateDiff(today_date, Removal_Date, 'days');

      if (diff > 0) {
        return 'Removed';
      } else {
        return Bus_asc_name;
      }
    `,defaultSymbol:te(I({},i),{color:"blue"}),uniqueValueInfos:s};this.platformLayer=new On({url:"https://services2.arcgis.com/Tk8KtWY399EerUu0/arcgis/rest/services/JoinLayerBSEEiSIMS/FeatureServer",visible:!0,title:"Platforms",refreshInterval:5,outFields:["*"],popupTemplate:this.getPlatformPopupTemplate()}),this.platformLayer.renderer=o}getPlatformPopupTemplate(){var i={title:"<span style='color: orange;'>Platform : {Area_Code} {Block_Number} {Structure_Name}</span>",content:`
      <table class="esri-widget__table" style="width:100%">
          <tr>
              <th style="width:30%">Field Name</th>
              <th style="width:35%">BSEE</th>
              <th style="width:35%">iSIMS</th>
          </tr>
          <tr>
              <td>Complex Id Num</td>
              <td>{Complex_Id_Num}</td>
              <td>{cpxid}</td>
          </tr>
          <tr>
              <td>Structure Number</td>
              <td>{Structure_Number}</td>
              <td>{stn}</td>
          </tr>
          <tr>
              <td>Bus Asc Name</td>
              <td>{Bus_Asc_Name}</td>
              <td>{operatorName}</td>
          </tr>
          <tr>
              <td>Platform Name</td>
              <td>{PlatformName}</td>
              <td>{platformname}</td>
          </tr>
          <tr>
              <td>Water Depth (feet)</td>
              <td>{Water_Depth__feet_}</td>
              <td>{wd}</td>
          </tr>
          <tr>
              <td>Authority Number</td>
              <td>{Authority_Number}</td>
              <td>{authnum}</td>
          </tr>
          <tr>
              <td>Authority Status</td>
              <td>{Authority_Status}</td>
              <td>{authstatus}</td>
          </tr>
          <tr>
              <td>Authority Type</td>
              <td>{Authority_Type}</td>
              <td>{authtyp}</td>
          </tr>
          <tr>
              <td>Install Date</td>
              <td>{Install_Date}</td>
              <td>{installDate}</td>
          </tr>
          <tr>
              <td>Attended 8 Hr</td>
              <td>{Attended_8_Hr}</td>
              <td>{isAttendedEighthHours}</td>
          </tr>
          <tr>
              <td>Heliport Flag</td>
              <td>{Heliport_Flag}</td>
              <td>{hasHeliport}</td>
          </tr>
          <tr>
              <td>District Code</td>
              <td>{District_Code}</td>
              <td>{districtCode}</td>
          </tr>
          <tr>
              <td>Field</td>
              <td>{Field}</td>
              <td></td>
          </tr>
          <tr>
              <td>INCs</td>
              <td>{INCs}</td>
              <td></td>
          </tr>
          <tr>
              <td>Latitude</td>
              <td>{Latitude}</td>
              <td>{latitude}</td>
          </tr>
          <tr>
              <td>Lease Number</td>
              <td>{Lease_Number}</td>
              <td></td>
          </tr>
          <tr>
              <td>Longitude</td>
              <td>{Longitude}</td>
              <td>{longitude}</td>
          </tr>
          <tr>
              <td>Maj Struc Flag</td>
              <td>{Maj_Struc_Flag}</td>
              <td>{isMajorStructure}</td>
          </tr>
          <tr>
              <td>Manned 24 Hr</td>
              <td>{Manned_24_Hr}</td>
              <td></td>
          </tr>
          <tr>
              <td>Nad Year Cd</td>
              <td>{Nad_Year_Cd}</td>
              <td></td>
          </tr>
          <tr>
              <td>Proj Code</td>
              <td>{Proj_Code}</td>
              <td></td>
          </tr>
          <tr>
              <td>Ptfrm X Location</td>
              <td>{Ptfrm_X_Location}</td>
              <td></td>
          </tr>
          <tr>
              <td>Ptfrm Y Location</td>
              <td>{Ptfrm_Y_Location}</td>
              <td></td>
          </tr>
          <tr>
              <td>Removal Date</td>
              <td>{Removal_Date}</td>
              <td>{removalDate}</td>
          </tr>
          <tr>
              <td>Site Clear Date</td>
              <td>{Site_Clear_Date}</td>
              <td></td>
          </tr>
          <tr>
              <td>Struc Type Code</td>
              <td>{Struc_Type_Code}</td>
              <td></td>
          </tr>
          <tr>
              <td>Surf E W Code</td>
              <td>{Surf_E_W_Code}</td>
              <td></td>
          </tr>
          <tr>
              <td>Surf E W Dist</td>
              <td>{Surf_E_W_Dist}</td>
              <td></td>
          </tr>
          <tr>
              <td>Surf N S Code</td>
              <td>{Surf_N_S_Code}</td>
              <td></td>
          </tr>
          <tr>
              <td>Surf N S Dist</td>
              <td>{Surf_N_S_Dist}</td>
              <td></td>
          </tr>
      </table>
  `};return i}SetBSEEPlatformLayer(){let i={type:"simple",symbol:{type:"simple-marker",color:[200,200,200,1],size:"4px",outline:{color:"transparent"}}};var r={title:"Platform:{PlatformName}",content:[{type:"fields",fieldInfos:[{fieldName:"Bus_Asc_Name",label:"Operator Name"},{fieldName:"Water_Depth__feet_",label:"Water Depth feet"},{fieldName:"Install_Date",label:"Install Date"},{fieldName:"Removal_Date",label:"Removal Date"}]}]};this.platformsBSEELayer=new On({url:"https://services2.arcgis.com/Tk8KtWY399EerUu0/arcgis/rest/services/PlatStruc_BSEE/FeatureServer",visible:!1,refreshInterval:60,title:"Platform BSEE",popupTemplate:r,opacity:.5,renderer:i})}SetAreaLayer(){var i=new hd({labelExpressionInfo:{expression:"$feature.AREA_CODE"},symbol:new cd({color:"black",haloColor:"",haloSize:"2px",font:{family:"Arial",size:6,weight:"bold"}})});this.areaLayer=new On({url:"https://services2.arcgis.com/Tk8KtWY399EerUu0/arcgis/rest/services/protclip/FeatureServer",labelingInfo:[i],visible:!1,title:"Area",popupTemplate:{title:"Area:{AREA_CODE}",content:[{type:"fields",fieldInfos:[{fieldName:"AREA_CODE",label:"Area code"},{fieldName:"PLAN_AREA_",label:"Plan area"},{fieldName:"PLAN_AREA1",label:"plan area1"},{fieldName:"PROJ_ZONE_",label:"Proj zone"},{fieldName:"PROT_APRV_",label:"PROT_APRV_"},{fieldName:"PROT_NAME",label:"PROT_NAME"},{fieldName:"PROT_NUMBE",label:"PROT_NUMBER"},{fieldName:"PROTCLIP_",label:"PROTCLIP"}]}]}})}SetBlockLayer(){var i=new hd({labelExpressionInfo:{expression:"$feature.BLOCK_NUMB"},symbol:new cd({color:"black",haloColor:"",haloSize:"2px",font:{family:"Arial",size:6,weight:"bold"}}),minScale:5e5,maxScale:1e5});this.blockLayer=new On({url:"https://services2.arcgis.com/Tk8KtWY399EerUu0/arcgis/rest/services/block/FeatureServer/0",labelingInfo:[i],visible:!1,title:"Block",popupTemplate:{title:"Block:{BLOCK_NUMB}",content:[{type:"fields",fieldInfos:[{fieldName:"AC_LAB",label:"AC_LAB"},{fieldName:"AREA_CODE",label:"AREA_CODE"},{fieldName:"BLK_FED_AP	",label:"BLK_FED_AP	"},{fieldName:"BLOCK LAB	",label:"BLOCK LAB	"},{fieldName:"BLOCK_NUMB",label:"BLOCK_NUMB"},{fieldName:"BLOCKS",label:"BLOCKS"},{fieldName:"BLOCKS_ID",label:"BLOCKS_ID"},{fieldName:"PROT_APRV_",label:"PROT_APRV_"},{fieldName:"PROT_NUMBE",label:"PROT_NUMBE"},{fieldName:"MMS_REGION",label:"MMS_REGION"}]}]}})}SetPipelineLayer(){let i={type:"simple",symbol:{type:"simple-line",color:"#a553b7"}};this.pipelineLayer=new On({url:"https://services2.arcgis.com/Tk8KtWY399EerUu0/arcgis/rest/services/Join_Features_to_Pipeline_view/FeatureServer",visible:!1,title:"Pipelines",opacity:.4,popupTemplate:{title:"Segment Number:{SEGMENT_NU}",content:[{type:"fields",fieldInfos:[{fieldName:"SEG_LENGTH",label:"Segment Length"},{fieldName:"STATUS_COD",label:"Status Code"},{fieldName:"PPL_SIZE_C	",label:"Pipeline Size"},{fieldName:"ROW_NUMBER",label:"Row Number"},{fieldName:"PROD_CODE",label:"Production Code"},{fieldName:"APRV_CODE",label:"Approval code"},{fieldName:"SDE_COMPAN",label:"SDE Company"},{fieldName:"Originating_Id_Name",label:"Originating Id Name"},{fieldName:"Originating_Area_Code",label:"Originating Area Code"},{fieldName:"Originating_Block_Number",label:"Originating Block Number"},{fieldName:"Originating_Lease_Number",label:"Originating Lease Number"},{fieldName:"Receiving_Id_Name",label:"Receiving Id Name"},{fieldName:"Receiving_Area_Code",label:"Receiving Area Code"},{fieldName:"Receiving_Block_Number",label:"Receiving Block Number"},{fieldName:"Receiving_Lease_Number",label:"Receiving Lease Number"},{fieldName:"Approved_Date",label:" Approved Date"},{fieldName:"Install_Date",label:"Install Date"},{fieldName:"Max_Water_Depth__feet_",label:"Max Water Depth (feet)"},{fieldName:"Max_Allowable_Operating_Pressure",label:"Max Allowable Operating Pressure"},{fieldName:"Authority",label:"Authority"},{fieldName:"Bidirectional",label:" Bidirectional"},{fieldName:"Out_of_Service_Date",label:"Out of Service Date"},{fieldName:"Abandonment_Approval_Date",label:"Abandonment Approval Date"},{fieldName:"Abandonment_Date",label:"Abandonment Date"}]}]},renderer:i})}ApplyMapFilters(i){let r=this.platformLayer,s=this.defaultConditionForLayer.PlatformLayer;i.layerOrWidget==H.HistoricHurricaneTrackLayer?(r=this.historicHurricaneTrackLayer,s=this.defaultConditionForLayer.HistoricHurricaneTrackLayer):i.layerOrWidget==H.PipelineLayer?(r=this.pipelineLayer,s=this.defaultConditionForLayer.PipelineLayer):i.layerOrWidget==H.HHConeLayer&&(r=this.hhConesLayer,s=this.defaultConditionForLayer.HHConeLayer);let o=this.getFinalFilterCondition(i.details,s);i.layerOrWidget==H.HHConeLayer?r.definitionExpression=this.historicHurricaneTrackLayer.definitionExpression+"  AND "+o:i.layerOrWidget==H.PlatformLayer?r.definitionExpression=this.defaultConditionForLayer.PlatformLayer+" AND "+o:r.definitionExpression=o,this.showLoading(r);let a=this;r.queryExtent().then(function(l){l!=null&&l.extent?a.view.goTo(l.extent):a.platformLayer.visible?a.view.goTo(a.platformLayer.fullExtent):a.pipelineLayer.visible?a.view.goTo(a.pipelineLayer.fullExtent):a.historicHurricaneTrackLayer.visible&&a.historicHurricaneTrackLayer.definitionExpression!="1=0"?a.view.goTo(a.historicHurricaneTrackLayer.fullExtent):a.hhConesLayer.visible&&a.hhConesLayer.definitionExpression!="1=0"?a.view.goTo(a.hhConesLayer.fullExtent):a.view.goTo(a.platformLayer.fullExtent)})}showLoading(i){this.spinnerService.show("appSpinner");var r=this,s=this.view.whenLayerView(i);s.then(function(o){if(!o.updating){r.spinnerService.hide("appSpinner");return}var a=o.watch("updating",function(l,d,h,p){l||(a.remove(),r.spinnerService.hide("appSpinner"))})})}UpdateFilterList(i){if(i==null)return;let r="1=1";i.type==E.HConeAdvisory&&(r="1=0");let s=this.getFinalFilterCondition(i.value,r);this.getFieldDataForFilter(i.type,s)}getFinalFilterCondition(i,r){let s=[];i!=null&&i.size>0&&i.forEach((a,l)=>{if(a.length>0)switch(l){case E.ActiveStatus:case E.Area_Code:case E.Block_Number:case E.Bus_Asc_Name:case E.platformName:case E.operatorName:case E.HurricaneName:case E.HurricaneYear:case E.PipelineOperator:case E.PipelineStatusCode:case E.HConeAdvisory:let d=l.toString()+" IN ('"+a.join("', '")+"')";s.push(d);break;case E.Water_Depth__feet_:case E.Complex_Id_Num:case E.Install_Date:case E.Removal_Date:case E.PipelineSegmentNumber:let h=l.toString()+" "+a;s.push(h);break;default:break}});let o=r;return s.length&&(o=s.join(" AND ")),o}getLayerFromLayerOrWidget(i){switch(i){case H.PlatformLayer:return this.platformLayer;case H.HistoricHurricaneTrackLayer:return this.historicHurricaneTrackLayer;case H.PipelineLayer:return this.pipelineLayer;case H.HHConeLayer:return this.hhConesLayer}return null}getFieldDataForFilter(i,r="1=1"){let s=this,o=[],a=this.mapService.getLayerOrWidgetFromFilterType(i);this.getLayerFromLayerOrWidget(a).queryFeatures({where:r,returnDistinctValues:!0,outFields:[i],orderByFields:[i]}).then(function(d){d.features.forEach(function(h){var p=h.attributes[i],m=p;(p==null||p=="")&&(m="Unknown"),o.push({text:m,value:p})}),i==E.HConeAdvisory&&o.sort((h,p)=>parseFloat(h.text)-parseFloat(p.text)),s.mapService.setFilterListFromMap({type:i,value:o})})}setFilterValue(){this.getFieldDataForFilter(E.Area_Code),this.getFieldDataForFilter(E.Block_Number),this.getFieldDataForFilter(E.Bus_Asc_Name),this.getFieldDataForFilter(E.operatorName),this.getFieldDataForFilter(E.platformName),this.getFieldDataForFilter(E.HurricaneYear),this.getFieldDataForFilter(E.HurricaneName),this.getFieldDataForFilter(E.PipelineOperator),this.getFieldDataForFilter(E.PipelineStatusCode)}SetHistoricHurricaneLayer(){this.historicHurricaneTrackLayer=new On({url:"https://services2.arcgis.com/FiaPA4ga0iQKduv3/arcgis/rest/services/IBTrACS_ALL_list_v04r00_lines_1/FeatureServer",title:"Historic Hurricanes",refreshInterval:5,outFields:["*"],definitionExpression:"1=0",visible:!1})}SetHHConesLayer(){this.hhConesLayer=new On({url:"https://services2.arcgis.com/Tk8KtWY399EerUu0/arcgis/rest/services/ALL_Cones/FeatureServer",title:"Historic Hurricanes Cones",refreshInterval:5,outFields:["*"],definitionExpression:"1=0",visible:!1})}ngOnDestroy(){this.view&&this.view.destroy()}};e.\u0275fac=function(r){return new(r||e)($(ci),$(kh),$(lv))},e.\u0275cmp=se({type:e,selectors:[["app-esri-map"]],viewQuery:function(r,s){if(r&1&&Tt(VS,7),r&2){let o;ye(o=ve())&&(s.mapViewEl=o.first)}},standalone:!0,features:[pe],decls:2,vars:0,consts:[["mapViewNode",""]],template:function(r,s){r&1&&G(0,"div",null,0)},dependencies:[sv],styles:[`.esri-view,#mapViewNode{padding:0;margin:0;height:100%;width:100%}.form-check-input.squareChkbox{border-radius:0!important}.form-check-input:focus{box-shadow:none!important}
`],encapsulation:2});let t=e;return t})();var yv=(()=>{let e=class e{constructor(i,r){this._renderer=i,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(i,r){this._renderer.setProperty(this._elementRef.nativeElement,i,r)}registerOnTouched(i){this.onTouched=i}registerOnChange(i){this.onChange=i}setDisabledState(i){this.setProperty("disabled",i)}};e.\u0275fac=function(r){return new(r||e)($(Vr),$(Be))},e.\u0275dir=De({type:e});let t=e;return t})(),Bh=(()=>{let e=class e extends yv{};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=Kt(e)))(s||e)}})(),e.\u0275dir=De({type:e,features:[Cn]});let t=e;return t})(),Ei=new ke(""),BS={provide:Ei,useExisting:qt(()=>Hh),multi:!0},Hh=(()=>{let e=class e extends Bh{writeValue(i){this.setProperty("checked",i)}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=Kt(e)))(s||e)}})(),e.\u0275dir=De({type:e,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(r,s){r&1&&k("change",function(a){return s.onChange(a.target.checked)})("blur",function(){return s.onTouched()})},features:[ii([BS]),Cn]});let t=e;return t})(),HS={provide:Ei,useExisting:qt(()=>di),multi:!0};function zS(){let t=Gr()?Gr().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var GS=new ke(""),di=(()=>{let e=class e extends yv{constructor(i,r,s){super(i,r),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!zS())}writeValue(i){let r=i??"";this.setProperty("value",r)}_handleInput(i){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(i)}_compositionStart(){this._composing=!0}_compositionEnd(i){this._composing=!1,this._compositionMode&&this.onChange(i)}};e.\u0275fac=function(r){return new(r||e)($(Vr),$(Be),$(GS,8))},e.\u0275dir=De({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,s){r&1&&k("input",function(a){return s._handleInput(a.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(a){return s._compositionEnd(a.target.value)})},features:[ii([HS]),Cn]});let t=e;return t})();var zh=new ke(""),jS=new ke("");function vv(t){return t!=null}function bv(t){return _a(t)?Ut(t):t}function wv(t){let e={};return t.forEach(n=>{e=n!=null?I(I({},e),n):e}),Object.keys(e).length===0?null:e}function Cv(t,e){return e.map(n=>n(t))}function $S(t){return!t.validate}function Sv(t){return t.map(e=>$S(e)?e:n=>e.validate(n))}function US(t){if(!t)return null;let e=t.filter(vv);return e.length==0?null:function(n){return wv(Cv(n,e))}}function Dv(t){return t!=null?US(Sv(t)):null}function WS(t){if(!t)return null;let e=t.filter(vv);return e.length==0?null:function(n){let i=Cv(n,e).map(bv);return Ap(i).pipe(oe(wv))}}function Tv(t){return t!=null?WS(Sv(t)):null}function dv(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function qS(t){return t._rawValidators}function YS(t){return t._rawAsyncValidators}function Fh(t){return t?Array.isArray(t)?t:[t]:[]}function ec(t,e){return Array.isArray(t)?t.includes(e):t===e}function uv(t,e){let n=Fh(e);return Fh(t).forEach(r=>{ec(n,r)||n.push(r)}),n}function hv(t,e){return Fh(e).filter(n=>!ec(t,n))}var tc=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Dv(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Tv(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return this.control?this.control.hasError(e,n):!1}getError(e,n){return this.control?this.control.getError(e,n):null}},Ph=class extends tc{get formDirective(){return null}get path(){return null}},Jo=class extends tc{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Lh=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},ZS={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},kW=te(I({},ZS),{"[class.ng-submitted]":"isSubmitted"}),jt=(()=>{let e=class e extends Lh{constructor(i){super(i)}};e.\u0275fac=function(r){return new(r||e)($(Jo,2))},e.\u0275dir=De({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,s){r&2&&ct("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[Cn]});let t=e;return t})();var Ko="VALID",Jl="INVALID",Ns="PENDING",Qo="DISABLED";function Gh(t){return(nc(t)?t.validators:t)||null}function KS(t){return Array.isArray(t)?Dv(t):t||null}function jh(t,e){return(nc(e)?e.asyncValidators:t)||null}function QS(t){return Array.isArray(t)?Tv(t):t||null}function nc(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}function Mv(t,e,n){let i=t.controls;if(!(e?Object.keys(i):i).length)throw new Se(1e3,"");if(!i[n])throw new Se(1001,"")}function Iv(t,e,n){t._forEachChild((i,r)=>{if(n[r]===void 0)throw new Se(1002,"")})}var Vs=class{constructor(e,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Ko}get invalid(){return this.status===Jl}get pending(){return this.status==Ns}get disabled(){return this.status===Qo}get enabled(){return this.status!==Qo}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(uv(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(uv(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(hv(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(hv(e,this._rawAsyncValidators))}hasValidator(e){return ec(this._rawValidators,e)}hasAsyncValidator(e){return ec(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Ns,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Qo,this.errors=null,this._forEachChild(i=>{i.disable(te(I({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(te(I({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let n=this._parentMarkedDirty(e.onlySelf);this.status=Ko,this._forEachChild(i=>{i.enable(te(I({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(te(I({},e),{skipPristineCheck:n})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ko||this.status===Ns)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Qo:Ko}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Ns,this._hasOwnPendingAsyncValidator=!0;let n=bv(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(n.emitEvent!==!1)}get(e){let n=e;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((i,r)=>i&&i._find(r),this)}getError(e,n){let i=n?this.get(n):this;return i&&i.errors?i.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Y,this.statusChanges=new Y}_calculateStatus(){return this._allControlsDisabled()?Qo:this.errors?Jl:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Ns)?Ns:this._anyControlsHaveStatus(Jl)?Jl:Ko}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){nc(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let n=this._parent&&this._parent.dirty;return!e&&!!n&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=KS(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=QS(this._rawAsyncValidators)}},ic=class extends Vs{constructor(e,n,i){super(Gh(n),jh(i,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,i={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){Iv(this,!0,e),Object.keys(e).forEach(i=>{Mv(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(Object.keys(e).forEach(i=>{let r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(e,n,i)=>(e[i]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,i)=>i._syncPendingControls()?!0:n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{let i=this.controls[n];i&&e(i,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[n,i]of Object.entries(this.controls))if(this.contains(n)&&e(i))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(n,i,r)=>((i.enabled||this.disabled)&&(n[r]=i.value),n))}_reduceChildren(e,n){let i=e;return this._forEachChild((r,s)=>{i=n(i,r,s)}),i}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Nh=class extends ic{};var Ev=new ke("CallSetDisabledState",{providedIn:"root",factory:()=>$h}),$h="always";function JS(t,e){return[...e.path,t]}function XS(t,e,n=$h){tD(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||n==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),iD(t,e),rD(t,e),nD(t,e),eD(t,e)}function pv(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function eD(t,e){if(e.valueAccessor.setDisabledState){let n=i=>{e.valueAccessor.setDisabledState(i)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}function tD(t,e){let n=qS(t);e.validator!==null?t.setValidators(dv(n,e.validator)):typeof n=="function"&&t.setValidators([n]);let i=YS(t);e.asyncValidator!==null?t.setAsyncValidators(dv(i,e.asyncValidator)):typeof i=="function"&&t.setAsyncValidators([i]);let r=()=>t.updateValueAndValidity();pv(e._rawValidators,r),pv(e._rawAsyncValidators,r)}function iD(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&xv(t,e)})}function nD(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&xv(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function xv(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function rD(t,e){let n=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}function sD(t,e){if(!t.hasOwnProperty("model"))return!1;let n=t.model;return n.isFirstChange()?!0:!Object.is(e,n.currentValue)}function oD(t){return Object.getPrototypeOf(t.constructor)===Bh}function aD(t,e){if(!e)return null;Array.isArray(e);let n,i,r;return e.forEach(s=>{s.constructor===di?n=s:oD(s)?i=s:r=s}),r||i||n||null}function mv(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function fv(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var Xl=class extends Vs{constructor(e=null,n,i){super(Gh(n),jh(i,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),nc(n)&&(n.nonNullable||n.initialValueIsDefault)&&(fv(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){mv(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){mv(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){fv(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var lD={provide:Jo,useExisting:qt(()=>At)},gv=Promise.resolve(),At=(()=>{let e=class e extends Jo{constructor(i,r,s,o,a,l){super(),this._changeDetectorRef=a,this.callSetDisabledState=l,this.control=new Xl,this._registered=!1,this.name="",this.update=new Y,this._parent=i,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=aD(this,o)}ngOnChanges(i){if(this._checkForErrors(),!this._registered||"name"in i){if(this._registered&&(this._checkName(),this.formDirective)){let r=i.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in i&&this._updateDisabled(i),sD(i,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){XS(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(i){gv.then(()=>{this.control.setValue(i,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(i){let r=i.isDisabled.currentValue,s=r!==0&&Le(r);gv.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(i){return this._parent?JS(i,this._parent):[i]}};e.\u0275fac=function(r){return new(r||e)($(Ph,9),$(zh,10),$(jS,10),$(Ei,10),$(kt,8),$(Ev,8))},e.\u0275dir=De({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[ge.None,"disabled","isDisabled"],model:[ge.None,"ngModel","model"],options:[ge.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[ii([lD]),Cn,Nt]});let t=e;return t})();var cD={provide:Ei,useExisting:qt(()=>br),multi:!0},br=(()=>{let e=class e extends Bh{writeValue(i){let r=i??"";this.setProperty("value",r)}registerOnChange(i){this.onChange=r=>{i(r==""?null:parseFloat(r))}}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=Kt(e)))(s||e)}})(),e.\u0275dir=De({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,s){r&1&&k("input",function(a){return s.onChange(a.target.value)})("blur",function(){return s.onTouched()})},features:[ii([cD]),Cn]});let t=e;return t})();var dD=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Zt({type:e}),e.\u0275inj=Yt({});let t=e;return t})(),Vh=class extends Vs{constructor(e,n,i){super(Gh(n),jh(i,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,n={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(e,n,i={}){this.controls.splice(e,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(e,n={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(e,n,i={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),n&&(this.controls.splice(r,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,n={}){Iv(this,!1,e),e.forEach((i,r)=>{Mv(this,!1,r),this.at(r).setValue(i,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){e!=null&&(e.forEach((i,r)=>{this.at(r)&&this.at(r).patchValue(i,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e=[],n={}){this._forEachChild((i,r)=>{i.reset(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((n,i)=>i._syncPendingControls()?!0:n,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((n,i)=>{e(n,i)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(n=>n.enabled&&e(n))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(let e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}};function _v(t){return!!t&&(t.asyncValidators!==void 0||t.validators!==void 0||t.updateOn!==void 0)}var Ov=(()=>{let e=class e{constructor(){this.useNonNullable=!1}get nonNullable(){let i=new e;return i.useNonNullable=!0,i}group(i,r=null){let s=this._reduceControls(i),o={};return _v(r)?o=r:r!==null&&(o.validators=r.validator,o.asyncValidators=r.asyncValidator),new ic(s,o)}record(i,r=null){let s=this._reduceControls(i);return new Nh(s,r)}control(i,r,s){let o={};return this.useNonNullable?(_v(r)?o=r:(o.validators=r,o.asyncValidators=s),new Xl(i,te(I({},o),{nonNullable:!0}))):new Xl(i,r,s)}array(i,r,s){let o=i.map(a=>this._createControl(a));return new Vh(o,r,s)}_reduceControls(i){let r={};return Object.keys(i).forEach(s=>{r[s]=this._createControl(i[s])}),r}_createControl(i){if(i instanceof Xl)return i;if(i instanceof Vs)return i;if(Array.isArray(i)){let r=i[0],s=i.length>1?i[1]:null,o=i.length>2?i[2]:null;return this.control(r,s,o)}else return this.control(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var ht=(()=>{let e=class e{static withConfig(i){return{ngModule:e,providers:[{provide:Ev,useValue:i.callSetDisabledState??$h}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Zt({type:e}),e.\u0275inj=Yt({imports:[dD]});let t=e;return t})();var kv=(()=>{let e=class e{constructor(i){this.mapService=i,this.showLegend=!0}toggleLegend(){this.showLegend=!this.showLegend,this.mapService.ShowHideLayersOrWidgets({type:H.Legend,visible:this.showLegend})}};e.\u0275fac=function(r){return new(r||e)($(ci))},e.\u0275cmp=se({type:e,selectors:[["app-header"]],standalone:!0,features:[pe],decls:8,vars:1,consts:[["id","header",1,"fixed-top"],[1,"d-flex","flex-wrap"],[1,"me-auto"],[1,"text-white"],[1,"d-flex"],["title","Legend","type","button",1,"no-border","rounded-0","btn","btn-lg",3,"click","ngClass"],[1,"fa-solid","fa-list"]],template:function(r,s){r&1&&(v(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),j(4,"IntelliSIMS"),b()(),v(5,"div",4)(6,"button",5),k("click",function(){return s.toggleLegend()}),G(7,"i",6),b()()()()),r&2&&(g(6),C("ngClass",s.showLegend?"text-dark":"text-white"))},dependencies:[ht,Te,ni],styles:["#header[_ngcontent-%COMP%]{background-color:#e95420;padding:5px 10px;margin:0}"]});let t=e;return t})();var uD=t=>({"dropdown-multiselect--active":t});function hD(t,e){if(t&1&&(v(0,"span"),j(1),b()),t&2){let n=T();g(),fe(n._placeholder)}}function pD(t,e){if(t&1){let n=_e();v(0,"span",15)(1,"span",16)(2,"span"),j(3),b(),v(4,"a",17),k("click",function(r){let s=L(n).$implicit,o=T();return N(o.onItemClick(r,s))}),j(5,"x"),b()()()}if(t&2){let n=e.$implicit,i=e.index,r=T();g(),C("hidden",i>r._settings.itemsShowLimit-1),g(2),Sn("",n.text,"\xA0")}}function mD(t,e){if(t&1&&(v(0,"span",18),j(1),b()),t&2){let n=T();g(),Sn("+",n.itemShowRemaining(),"")}}function fD(t,e){if(t&1){let n=_e();v(0,"li",19),k("click",function(){L(n);let r=T();return N(r.toggleSelectAll())}),G(1,"input",20),v(2,"div"),j(3),b()()}if(t&2){let n=T();g(),C("checked",n.isAllItemsSelected())("disabled",n.disabled||n.isLimitSelectionReached()),g(2),fe(n.isAllItemsSelected()?n._settings.unSelectAllText:n._settings.selectAllText)}}function gD(t,e){if(t&1){let n=_e();v(0,"li",21)(1,"input",22),Xe("ngModelChange",function(r){L(n);let s=T();return Je(s.filter.text,r)||(s.filter.text=r),N(r)}),k("ngModelChange",function(r){L(n);let s=T();return N(s.onFilterTextChange(r))}),b()()}if(t&2){let n=T();g(),C("readOnly",n.disabled)("placeholder",n._settings.searchPlaceholderText),Qe("ngModel",n.filter.text)}}function _D(t,e){if(t&1){let n=_e();v(0,"li",23),k("click",function(r){let s=L(n).$implicit,o=T();return N(o.onItemClick(r,s))}),G(1,"input",24),v(2,"div"),j(3),b()()}if(t&2){let n=e.$implicit,i=T();g(),C("checked",i.isSelected(n))("disabled",i.disabled||i.isLimitSelectionReached()&&!i.isSelected(n)||n.isDisabled),_i("aria-label",n.text),g(2),fe(n.text)}}function yD(t,e){if(t&1&&(v(0,"li",25)(1,"h5"),j(2),b()()),t&2){let n=T();g(2),fe(n._settings.noFilteredDataAvailablePlaceholderText)}}function vD(t,e){if(t&1&&(v(0,"li",26)(1,"h5"),j(2),b()()),t&2){let n=T();g(2),fe(n._settings.noDataAvailablePlaceholderText)}}var pn=class{id;text;isDisabled;constructor(e){(typeof e=="string"||typeof e=="number")&&(this.id=this.text=e,this.isDisabled=!1),typeof e=="object"&&(this.id=e.id,this.text=e.text,this.isDisabled=e.isDisabled)}},Uh=(()=>{class t{transform(n,i){return!n||!i?n:n.filter(r=>this.applyFilter(r,i))}applyFilter(n,i){return typeof n.text=="string"&&typeof i.text=="string"?!(i.text&&n.text&&n.text.toLowerCase().indexOf(i.text.toLowerCase())===-1):!(i.text&&n.text&&n.text.toString().toLowerCase().indexOf(i.text.toString().toLowerCase())===-1)}static \u0275fac=function(i){return new(i||t)};static \u0275pipe=ha({name:"multiSelectFilter",type:t,pure:!1})}return t})(),bD=(()=>{class t{_elementRef;constructor(n){this._elementRef=n}clickOutside=new Y;onClick(n,i){if(!i)return;this._elementRef.nativeElement.contains(i)||this.clickOutside.emit(n)}static \u0275fac=function(i){return new(i||t)($(Be))};static \u0275dir=De({type:t,selectors:[["","clickOutside",""]],hostBindings:function(i,r){i&1&&k("click",function(o){return r.onClick(o,o.target)},!1,tm)},outputs:{clickOutside:"clickOutside"}})}return t})(),wD={provide:Ei,useExisting:qt(()=>Wh),multi:!0},Rv=()=>{},Wh=(()=>{class t{listFilterPipe;cdr;_settings;_data=[];selectedItems=[];isDropdownOpen=!0;_placeholder="Select";_sourceDataType=null;_sourceDataFields=[];filter=new pn(this.data);defaultSettings={singleSelection:!1,idField:"id",textField:"text",disabledField:"isDisabled",enableCheckAll:!0,selectAllText:"Select All",unSelectAllText:"UnSelect All",allowSearchFilter:!1,limitSelection:-1,clearSearchFilter:!0,maxHeight:197,itemsShowLimit:999999999999,searchPlaceholderText:"Search",noDataAvailablePlaceholderText:"No data available",noFilteredDataAvailablePlaceholderText:"No filtered data available",closeDropDownOnSelection:!1,showSelectedItemsAtTop:!1,defaultOpen:!1,allowRemoteDataSearch:!1};set placeholder(n){n?this._placeholder=n:this._placeholder="Select"}disabled=!1;set settings(n){n?this._settings=Object.assign(this.defaultSettings,n):this._settings=Object.assign(this.defaultSettings)}set data(n){if(!n)this._data=[];else{let i=n[0];this._sourceDataType=typeof i,this._sourceDataFields=this.getFields(i),this._data=n.map(r=>typeof r=="string"||typeof r=="number"?new pn(r):new pn({id:r[this._settings.idField],text:r[this._settings.textField],isDisabled:r[this._settings.disabledField]}))}}onFilterChange=new Y;onDropDownClose=new Y;onSelect=new Y;onDeSelect=new Y;onSelectAll=new Y;onDeSelectAll=new Y;onTouchedCallback=Rv;onChangeCallback=Rv;onFilterTextChange(n){this.onFilterChange.emit(n)}constructor(n,i){this.listFilterPipe=n,this.cdr=i}onItemClick(n,i){if(this.disabled||i.isDisabled)return!1;let r=this.isSelected(i),s=this._settings.limitSelection===-1||this._settings.limitSelection>0&&this.selectedItems.length<this._settings.limitSelection;r?this.removeSelected(i):s&&this.addSelected(i),this._settings.singleSelection&&this._settings.closeDropDownOnSelection&&this.closeDropdown()}writeValue(n){if(n!=null&&n.length>0)if(this._settings.singleSelection)try{if(n.length>=1){let i=n[0];this.selectedItems=[typeof i=="string"||typeof i=="number"?new pn(i):new pn({id:i[this._settings.idField],text:i[this._settings.textField],isDisabled:i[this._settings.disabledField]})]}}catch{}else{let i=n.map(r=>typeof r=="string"||typeof r=="number"?new pn(r):new pn({id:r[this._settings.idField],text:r[this._settings.textField],isDisabled:r[this._settings.disabledField]}));this._settings.limitSelection>0?this.selectedItems=i.splice(0,this._settings.limitSelection):this.selectedItems=i}else this.selectedItems=[];this.onChangeCallback(n),this.cdr.markForCheck()}registerOnChange(n){this.onChangeCallback=n}registerOnTouched(n){this.onTouchedCallback=n}onTouched(){this.onTouchedCallback()}trackByFn(n,i){return i.id}isSelected(n){let i=!1;return this.selectedItems.forEach(r=>{n.id===r.id&&(i=!0)}),i}isLimitSelectionReached(){return this._settings.limitSelection===this.selectedItems.length}isAllItemsSelected(){let n=this.listFilterPipe.transform(this._data,this.filter),i=n.filter(r=>r.isDisabled).length;return(!this.data||this.data.length===0)&&this._settings.allowRemoteDataSearch?!1:n.length===this.selectedItems.length+i}showButton(){return this._settings.singleSelection?!1:!(this._settings.limitSelection>0)}itemShowRemaining(){return this.selectedItems.length-this._settings.itemsShowLimit}addSelected(n){this._settings.singleSelection?(this.selectedItems=[],this.selectedItems.push(n)):this.selectedItems.push(n),this.onChangeCallback(this.emittedValue(this.selectedItems)),this.onSelect.emit(this.emittedValue(n))}removeSelected(n){this.selectedItems.forEach(i=>{n.id===i.id&&this.selectedItems.splice(this.selectedItems.indexOf(i),1)}),this.onChangeCallback(this.emittedValue(this.selectedItems)),this.onDeSelect.emit(this.emittedValue(n))}emittedValue(n){let i=[];if(Array.isArray(n))n.map(r=>{i.push(this.objectify(r))});else if(n)return this.objectify(n);return i}objectify(n){if(this._sourceDataType==="object"){let i={};return i[this._settings.idField]=n.id,i[this._settings.textField]=n.text,this._sourceDataFields.includes(this._settings.disabledField)&&(i[this._settings.disabledField]=n.isDisabled),i}return this._sourceDataType==="number"?Number(n.id):n.text}toggleDropdown(n){n.preventDefault(),!(this.disabled&&this._settings.singleSelection)&&(this._settings.defaultOpen=!this._settings.defaultOpen,this._settings.defaultOpen||this.onDropDownClose.emit())}closeDropdown(){this._settings.defaultOpen=!1,this._settings.clearSearchFilter&&(this.filter.text=""),this.onDropDownClose.emit()}toggleSelectAll(){if(this.disabled)return!1;this.isAllItemsSelected()?(this.selectedItems=[],this.onDeSelectAll.emit(this.emittedValue(this.selectedItems))):(this.selectedItems=this.listFilterPipe.transform(this._data,this.filter).filter(n=>!n.isDisabled).slice(),this.onSelectAll.emit(this.emittedValue(this.selectedItems))),this.onChangeCallback(this.emittedValue(this.selectedItems))}getFields(n){let i=[];if(typeof n!="object")return i;for(let r in n)i.push(r);return i}static \u0275fac=function(i){return new(i||t)($(Uh),$(kt))};static \u0275cmp=se({type:t,selectors:[["ng-multiselect-dropdown"]],hostBindings:function(i,r){i&1&&k("blur",function(){return r.onTouched()})},inputs:{placeholder:"placeholder",disabled:"disabled",settings:"settings",data:"data"},outputs:{onFilterChange:"onFilterChange",onDropDownClose:"onDropDownClose",onSelect:"onSelect",onDeSelect:"onDeSelect",onSelectAll:"onSelectAll",onDeSelectAll:"onDeSelectAll"},features:[ii([wD])],decls:18,vars:23,consts:[["tabindex","0",1,"multiselect-dropdown",3,"blur","clickOutside"],["tabindex","-1",1,"dropdown-btn",3,"click"],[4,"ngIf"],["class","selected-item-container",4,"ngFor","ngForOf","ngForTrackBy"],[2,"float","right !important","padding-right","4px",3,"ngClass"],["style","padding-right: 15px;",4,"ngIf"],[1,"dropdown-multiselect__caret"],[1,"dropdown-list",3,"hidden"],[1,"item1"],["class","multiselect-item-checkbox","style","border-bottom: 1px solid #ccc;padding:10px",3,"click",4,"ngIf"],["class","filter-textbox",4,"ngIf"],[1,"item2"],["class","multiselect-item-checkbox",3,"click",4,"ngFor","ngForOf"],["class","no-filtered-data",4,"ngIf"],["class","no-data",4,"ngIf"],[1,"selected-item-container"],[1,"selected-item",3,"hidden"],[2,"padding-left","2px","color","white",3,"click"],[2,"padding-right","15px"],[1,"multiselect-item-checkbox",2,"border-bottom","1px solid #ccc","padding","10px",3,"click"],["type","checkbox","aria-label","multiselect-select-all",3,"checked","disabled"],[1,"filter-textbox"],["type","text","aria-label","multiselect-search",3,"ngModelChange","readOnly","placeholder","ngModel"],[1,"multiselect-item-checkbox",3,"click"],["type","checkbox",3,"checked","disabled"],[1,"no-filtered-data"],[1,"no-data"]],template:function(i,r){i&1&&(v(0,"div",0),k("blur",function(){return r.onTouched()})("clickOutside",function(){return r.closeDropdown()}),v(1,"div")(2,"span",1),k("click",function(o){return r.toggleDropdown(o)}),q(3,hD,2,1,"span",2)(4,pD,6,2,"span",3),v(5,"span",4),q(6,mD,2,1,"span",5),G(7,"span",6),b()()(),v(8,"div",7)(9,"ul",8),q(10,fD,4,3,"li",9)(11,gD,2,3,"li",10),b(),v(12,"ul",11),q(13,_D,4,4,"li",12),zr(14,"multiSelectFilter"),q(15,yD,3,1,"li",13),zr(16,"multiSelectFilter"),q(17,vD,3,1,"li",14),b()()()),i&2&&(g(),ct("disabled",r.disabled),g(2),C("ngIf",r.selectedItems.length==0),g(),C("ngForOf",r.selectedItems)("ngForTrackBy",r.trackByFn),g(),C("ngClass",Ai(21,uD,r._settings.defaultOpen)),g(),C("ngIf",r.itemShowRemaining()>0),g(2),C("hidden",!r._settings.defaultOpen),g(2),C("ngIf",(r._data.length>0||r._settings.allowRemoteDataSearch)&&!r._settings.singleSelection&&r._settings.enableCheckAll&&r._settings.limitSelection===-1),g(),C("ngIf",(r._data.length>0||r._settings.allowRemoteDataSearch)&&r._settings.allowSearchFilter),g(),Kn("max-height",r._settings.maxHeight+"px"),g(),C("ngForOf",Vc(14,15,r._data,r.filter)),g(2),C("ngIf",r._data.length!=0&&Vc(16,18,r._data,r.filter).length==0&&!r._settings.allowRemoteDataSearch),g(2),C("ngIf",r._data.length==0&&!r._settings.allowRemoteDataSearch))},dependencies:[ni,Dn,Tn,di,jt,At,bD,Uh],styles:['.multiselect-dropdown[_ngcontent-%COMP%]{position:relative;width:100%;font-size:inherit;font-family:inherit}.multiselect-dropdown[_ngcontent-%COMP%]   .dropdown-btn[_ngcontent-%COMP%]{display:inline-block;border:1px solid #adadad;width:100%;padding:6px 12px;margin-bottom:0;font-weight:400;line-height:1.52857143;text-align:left;vertical-align:middle;cursor:pointer;background-image:none;border-radius:4px}.multiselect-dropdown[_ngcontent-%COMP%]   .dropdown-btn[_ngcontent-%COMP%]   .selected-item-container[_ngcontent-%COMP%]{display:flex;float:left}.multiselect-dropdown[_ngcontent-%COMP%]   .dropdown-btn[_ngcontent-%COMP%]   .selected-item-container[_ngcontent-%COMP%]   .selected-item[_ngcontent-%COMP%]{border:1px solid #337ab7;margin-right:4px;background:#337ab7;padding:0 5px;color:#fff;border-radius:2px;float:left;max-width:100px}.multiselect-dropdown[_ngcontent-%COMP%]   .dropdown-btn[_ngcontent-%COMP%]   .selected-item-container[_ngcontent-%COMP%]   .selected-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis}.multiselect-dropdown[_ngcontent-%COMP%]   .dropdown-btn[_ngcontent-%COMP%]   .selected-item-container[_ngcontent-%COMP%]   .selected-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}.multiselect-dropdown[_ngcontent-%COMP%]   .dropdown-btn[_ngcontent-%COMP%]   .selected-item[_ngcontent-%COMP%]:hover{box-shadow:1px 1px #959595}.multiselect-dropdown[_ngcontent-%COMP%]   .dropdown-btn[_ngcontent-%COMP%]   .dropdown-multiselect__caret[_ngcontent-%COMP%]{line-height:16px;display:block;position:absolute;box-sizing:border-box;width:40px;height:38px;right:1px;top:0;padding:4px 8px;margin:0;text-decoration:none;text-align:center;cursor:pointer;transition:transform .2s ease}.multiselect-dropdown[_ngcontent-%COMP%]   .dropdown-btn[_ngcontent-%COMP%]   .dropdown-multiselect__caret[_ngcontent-%COMP%]:before{position:relative;right:0;top:65%;color:#999;margin-top:4px;border-style:solid;border-width:8px 8px 0 8px;border-color:#999999 transparent;content:""}.multiselect-dropdown[_ngcontent-%COMP%]   .dropdown-btn[_ngcontent-%COMP%]   .dropdown-multiselect--active[_ngcontent-%COMP%]   .dropdown-multiselect__caret[_ngcontent-%COMP%]{transform:rotate(180deg)}.multiselect-dropdown[_ngcontent-%COMP%]   .disabled[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{background-color:#eceeef}.dropdown-list[_ngcontent-%COMP%]{position:absolute;padding-top:6px;width:100%;z-index:9999;border:1px solid #ccc;border-radius:3px;background:#fff;margin-top:10px;box-shadow:0 1px 5px #959595}.dropdown-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding:0;list-style:none;overflow:auto;margin:0}.dropdown-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:6px 10px;cursor:pointer;text-align:left}.dropdown-list[_ngcontent-%COMP%]   .filter-textbox[_ngcontent-%COMP%]{border-bottom:1px solid #ccc;position:relative;padding:10px}.dropdown-list[_ngcontent-%COMP%]   .filter-textbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:0px;width:100%;padding:0 0 0 26px}.dropdown-list[_ngcontent-%COMP%]   .filter-textbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none}.multiselect-item-checkbox[_ngcontent-%COMP%]:hover{background-color:#e4e3e3}.multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:focus + div[_ngcontent-%COMP%]:before, .multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:hover + div[_ngcontent-%COMP%]:before{border-color:#337ab7;background-color:#f2f2f2}.multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:active + div[_ngcontent-%COMP%]:before{transition-duration:0s}.multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%] + div[_ngcontent-%COMP%]{position:relative;padding-left:2em;vertical-align:middle;-webkit-user-select:none;user-select:none;cursor:pointer;margin:0;color:#000}.multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%] + div[_ngcontent-%COMP%]:before{box-sizing:content-box;content:"";color:#337ab7;position:absolute;top:50%;left:0;width:14px;height:14px;margin-top:-9px;border:2px solid #337ab7;text-align:center;transition:all .4s ease}.multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%] + div[_ngcontent-%COMP%]:after{box-sizing:content-box;content:"";background-color:#337ab7;position:absolute;top:50%;left:4px;width:10px;height:10px;margin-top:-5px;transform:scale(0);transform-origin:50%;transition:transform .2s ease-out}.multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:disabled + div[_ngcontent-%COMP%]:before{border-color:#ccc}.multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:disabled:focus + div[_ngcontent-%COMP%]:before   .multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:disabled:hover + div[_ngcontent-%COMP%]:before{background-color:inherit}.multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:disabled:checked + div[_ngcontent-%COMP%]:before{background-color:#ccc}.multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%] + div[_ngcontent-%COMP%]:after{background-color:transparent;top:50%;left:4px;width:8px;height:3px;margin-top:-4px;border-style:solid;border-color:#fff;border-width:0 0 3px 3px;border-image:none;transform:rotate(-45deg) scale(0)}.multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + div[_ngcontent-%COMP%]:after{content:"";transform:rotate(-45deg) scale(1);transition:transform .2s ease-out}.multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + div[_ngcontent-%COMP%]:before{animation:_ngcontent-%COMP%_borderscale .2s ease-in;background:#337ab7}.multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + div[_ngcontent-%COMP%]:after{transform:rotate(-45deg) scale(1)}@keyframes _ngcontent-%COMP%_borderscale{50%{box-shadow:0 0 0 2px #337ab7}}'],changeDetection:0})}return t})(),Av=(()=>{class t{static forRoot(){return{ngModule:t}}static \u0275fac=function(i){return new(i||t)};static \u0275mod=Zt({type:t});static \u0275inj=Yt({providers:[Uh],imports:[Te,ht]})}return t})();function SD(t,e){if(t&1){let n=_e();v(0,"button",7),k("click",function(){L(n);let r=T();return N(r.selExpanded=!r.selExpanded)}),G(1,"i",8),b()}if(t&2){let n=T();dm("title","Selected ",n.title,"")}}function DD(t,e){if(t&1&&(v(0,"div"),j(1),b()),t&2){let n=e.$implicit,i=e.index;g(),um("",i+1,". ",n,"")}}function TD(t,e){if(t&1&&(v(0,"div",9),q(1,DD,2,2,"div",10),b()),t&2){let n=T();g(),C("ngForOf",n.selectedValues)}}var Fv=(()=>{let e=class e{constructor(i){this.fb=i,this.title="Multi Select",this.options=[],this.disabled=!1,this.ShowFilter=!0,this.itemsShowLimit=3,this.enableCheckAll=!0,this.limitSelection=-1,this.singleSelection=!1,this.valueField="id",this.displayField="",this.selectedItemsChanged=new Y,this.selectedItems=[],this.selectedValues=[],this.dropdownSettings={},this.selExpanded=!1}writeValue(i){console.log("from parent",i),this.selectedItems=i}ngOnInit(){this.dropdownSettings={singleSelection:this.singleSelection,itemsShowLimit:this.itemsShowLimit,enableCheckAll:this.enableCheckAll,limitSelection:this.limitSelection,allowSearchFilter:this.ShowFilter,idField:this.valueField,textField:this.displayField}}onSelectionChanged(i){this.selectedValues=i.map(r=>r.value),this.selectedItemsChanged.emit(i)}};e.\u0275fac=function(r){return new(r||e)($(Ov))},e.\u0275cmp=se({type:e,selectors:[["app-multi-select"]],inputs:{title:"title",options:"options",disabled:"disabled",ShowFilter:"ShowFilter",itemsShowLimit:"itemsShowLimit",enableCheckAll:"enableCheckAll",limitSelection:"limitSelection",singleSelection:"singleSelection",valueField:"valueField",displayField:"displayField",selectedItems:"selectedItems"},outputs:{selectedItemsChanged:"selectedItemsChanged"},standalone:!0,features:[pe],decls:10,vars:9,consts:[[1,"d-flex"],["name","selItems",1,"flex-fill",2,"align-content","center",3,"ngModelChange","placeholder","ngModel","settings","data","disabled"],[1,"d-grid"],["title","Clear Selection",1,"ms-auto","no-border","rounded-0","btn","btn-sm",3,"click","disabled"],[1,"fa-solid","fa-filter-circle-xmark","text-primary"],["class","p-0 btn rounded-0 btn-sm no-border","type","button",3,"title","click",4,"ngIf"],["class","text-info",4,"ngIf"],["type","button",1,"p-0","btn","rounded-0","btn-sm","no-border",3,"click","title"],[1,"fa-solid","fa-list-check"],[1,"text-info"],[4,"ngFor","ngForOf"]],template:function(r,s){r&1&&(v(0,"div")(1,"h6"),j(2),b(),v(3,"div",0)(4,"ng-multiselect-dropdown",1),Xe("ngModelChange",function(a){return Je(s.selectedItems,a)||(s.selectedItems=a),a}),k("ngModelChange",function(a){return s.onSelectionChanged(a)}),b(),v(5,"div",2)(6,"button",3),k("click",function(){return s.selectedItems=[]}),G(7,"i",4),b(),q(8,SD,2,2,"button",5),b()(),q(9,TD,2,1,"div",6),b()),r&2&&(g(2),fe(s.title),g(2),C("placeholder",s.title),Qe("ngModel",s.selectedItems),C("settings",s.dropdownSettings)("data",s.options)("disabled",s.disabled),g(2),C("disabled",s.selectedItems.length<1),g(2),C("ngIf",s.selectedValues!=null&&s.selectedValues.length>0),g(),C("ngIf",s.selExpanded))},dependencies:[Av,Wh,Te,Dn,Tn,ht,jt,At],styles:[`.multiselect-dropdown .dropdown-btn .selected-item-container .selected-item{margin-top:4px!important;max-width:max-content!important;background:#ee784e!important}
`],encapsulation:2});let t=e;return t})();var Pv=(()=>{let e=class e{constructor(){this.ShowFilter=!0,this.itemsShowLimit="2",this.selectedItemsChanged=new Y}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=se({type:e,selectors:[["app-dropdown-filter"]],inputs:{ShowFilter:"ShowFilter",title:"title",options:"options",itemsShowLimit:"itemsShowLimit",selectedItems:"selectedItems",valueField:"valueField",displayField:"displayField"},outputs:{selectedItemsChanged:"selectedItemsChanged"},standalone:!0,features:[pe],decls:1,vars:7,consts:[[3,"selectedItemsChanged","ShowFilter","title","options","valueField","displayField","itemsShowLimit","selectedItems"]],template:function(r,s){r&1&&(v(0,"app-multi-select",0),k("selectedItemsChanged",function(a){return s.selectedItemsChanged.emit(a)}),b()),r&2&&C("ShowFilter",s.ShowFilter)("title",s.title)("options",s.options)("valueField",s.valueField)("displayField",s.displayField)("itemsShowLimit",s.itemsShowLimit)("selectedItems",s.selectedItems)},dependencies:[Fv,Te]});let t=e;return t})();var MD=["content"],ID=["scroll"],ED=["padding"],Vv=["*"],ea=t=>({searchTerm:t});function xD(t,e){if(t&1&&(v(0,"div",3),Fc(1,6),b()),t&2){let n=T();g(),C("ngTemplateOutlet",n.headerTemplate)("ngTemplateOutletContext",Ai(2,ea,n.filterValue))}}function OD(t,e){if(t&1&&(v(0,"div",5),Fc(1,6),b()),t&2){let n=T();g(),C("ngTemplateOutlet",n.footerTemplate)("ngTemplateOutletContext",Ai(2,ea,n.filterValue))}}var kD=["searchInput"],RD=["clearButton"],AD=(t,e,n)=>({item:t,clear:e,label:n}),FD=(t,e)=>({items:t,clear:e}),PD=(t,e,n,i)=>({item:t,item$:e,index:n,searchTerm:i});function LD(t,e){if(t&1){let n=_e();v(0,"span",21),k("click",function(){L(n);let r=T().$implicit,s=T(2);return N(s.unselect(r))}),j(1,"\xD7"),b(),G(2,"span",22)}if(t&2){let n=T().$implicit,i=T(2);g(2),C("ngItemLabel",n.label)("escape",i.escapeHTML)}}function ND(t,e){}function VD(t,e){if(t&1&&(v(0,"div",20),q(1,LD,3,2,"ng-template",null,1,Qt)(3,ND,0,0,"ng-template",12),b()),t&2){let n=e.$implicit,i=Ae(2),r=T(2);ct("ng-value-disabled",n.disabled),g(3),C("ngTemplateOutlet",r.labelTemplate||i)("ngTemplateOutletContext",Lc(4,AD,n.value,r.clearItem,n.label))}}function BD(t,e){if(t&1&&yi(0,VD,4,8,"div",19,kc().trackByOption,!0),t&2){let n=T();vi(n.selectedItems)}}function HD(t,e){}function zD(t,e){if(t&1&&q(0,HD,0,0,"ng-template",12),t&2){let n=T();C("ngTemplateOutlet",n.multiLabelTemplate)("ngTemplateOutletContext",Pc(2,FD,n.selectedValues,n.clearItem))}}function GD(t,e){t&1&&G(0,"div",24)}function jD(t,e){}function $D(t,e){if(t&1&&q(0,GD,1,0,"ng-template",null,2,Qt)(2,jD,0,0,"ng-template",23),t&2){let n=Ae(1),i=T();g(2),C("ngTemplateOutlet",i.loadingSpinnerTemplate||n)}}function UD(t,e){if(t&1&&(v(0,"span",15,3)(2,"span",25),j(3,"\xD7"),b()()),t&2){let n=T();cm("title",n.clearAllText)}}function WD(t,e){if(t&1&&G(0,"span",30),t&2){let n=T().$implicit,i=T(2);C("ngItemLabel",n.label)("escape",i.escapeHTML)}}function qD(t,e){}function YD(t,e){if(t&1){let n=_e();v(0,"div",29),k("click",function(){let r=L(n).$implicit,s=T(2);return N(s.toggleItem(r))})("mouseover",function(){let r=L(n).$implicit,s=T(2);return N(s.onItemHover(r))}),q(1,WD,1,2,"ng-template",null,4,Qt)(3,qD,0,0,"ng-template",12),b()}if(t&2){let n=e.$implicit,i=Ae(2),r=T(2);ct("ng-option-disabled",n.disabled)("ng-option-selected",n.selected)("ng-optgroup",n.children)("ng-option",!n.children)("ng-option-child",!!n.parent)("ng-option-marked",n===r.itemsList.markedItem),_i("role",n.children?"group":"option")("aria-selected",n.selected)("id",n==null?null:n.htmlId),g(3),C("ngTemplateOutlet",n.children?r.optgroupTemplate||i:r.optionTemplate||i)("ngTemplateOutletContext",hm(17,PD,n.value,n,n.index,r.searchTerm))}}function ZD(t,e){if(t&1&&(v(0,"span")(1,"span",32),j(2),b(),j(3),b()),t&2){let n=T(3);g(2),fe(n.addTagText),g(),Sn('"',n.searchTerm,'"')}}function KD(t,e){}function QD(t,e){if(t&1){let n=_e();v(0,"div",31),k("mouseover",function(){L(n);let r=T(2);return N(r.itemsList.unmarkItem())})("click",function(){L(n);let r=T(2);return N(r.selectTag())}),q(1,ZD,4,2,"ng-template",null,5,Qt)(3,KD,0,0,"ng-template",12),b()}if(t&2){let n=Ae(2),i=T(2);ct("ng-option-marked",!i.itemsList.markedItem),g(3),C("ngTemplateOutlet",i.tagTemplate||n)("ngTemplateOutletContext",Ai(4,ea,i.searchTerm))}}function JD(t,e){if(t&1&&(v(0,"div",33),j(1),b()),t&2){let n=T(3);g(),fe(n.notFoundText)}}function XD(t,e){}function eT(t,e){if(t&1&&q(0,JD,2,1,"ng-template",null,6,Qt)(2,XD,0,0,"ng-template",12),t&2){let n=Ae(1),i=T(2);g(2),C("ngTemplateOutlet",i.notFoundTemplate||n)("ngTemplateOutletContext",Ai(2,ea,i.searchTerm))}}function tT(t,e){if(t&1&&(v(0,"div",33),j(1),b()),t&2){let n=T(3);g(),fe(n.typeToSearchText)}}function iT(t,e){}function nT(t,e){if(t&1&&q(0,tT,2,1,"ng-template",null,7,Qt)(2,iT,0,0,"ng-template",23),t&2){let n=Ae(1),i=T(2);g(2),C("ngTemplateOutlet",i.typeToSearchTemplate||n)}}function rT(t,e){if(t&1&&(v(0,"div",33),j(1),b()),t&2){let n=T(3);g(),fe(n.loadingText)}}function sT(t,e){}function oT(t,e){if(t&1&&q(0,rT,2,1,"ng-template",null,8,Qt)(2,sT,0,0,"ng-template",12),t&2){let n=Ae(1),i=T(2);g(2),C("ngTemplateOutlet",i.loadingTextTemplate||n)("ngTemplateOutletContext",Ai(2,ea,i.searchTerm))}}function aT(t,e){if(t&1){let n=_e();v(0,"ng-dropdown-panel",26),k("update",function(r){L(n);let s=T();return N(s.viewPortItems=r)})("scroll",function(r){L(n);let s=T();return N(s.scroll.emit(r))})("scrollToEnd",function(r){L(n);let s=T();return N(s.scrollToEnd.emit(r))})("outsideClick",function(){L(n);let r=T();return N(r.close())}),Rc(1),yi(2,YD,4,22,"div",27,kc().trackByOption,!0),q(4,QD,4,6,"div",28),Ac(),q(5,eT,3,4)(6,nT,3,1)(7,oT,3,4),b()}if(t&2){let n=T();ct("ng-select-multiple",n.multiple),C("virtualScroll",n.virtualScroll)("bufferAmount",n.bufferAmount)("appendTo",n.appendTo)("position",n.dropdownPosition)("headerTemplate",n.headerTemplate)("footerTemplate",n.footerTemplate)("filterValue",n.searchTerm)("items",n.itemsList.filteredItems)("markedItem",n.itemsList.markedItem)("ngClass",n.appendTo?n.classes:null)("id",n.dropdownId),g(2),vi(n.viewPortItems),g(2),Re(4,n.showAddTag?4:-1),g(),Re(5,n.showNoItemsFound()?5:-1),g(),Re(6,n.showTypeToSearch()?6:-1),g(),Re(7,n.loading&&n.itemsList.filteredItems.length===0?7:-1)}}var Bv=/[&<>"']/g,lT=RegExp(Bv.source),cT={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function dT(t){return t&&lT.test(t)?t.replace(Bv,e=>cT[e]):t}function Ne(t){return t!=null}function Xo(t){return typeof t=="object"&&Ne(t)}function uT(t){return t instanceof Promise}function sc(t){return t instanceof Function}var hT=(()=>{let e=class e{constructor(i){this.element=i,this.escape=!0}ngOnChanges(i){this.element.nativeElement.innerHTML=this.escape?dT(this.ngItemLabel):this.ngItemLabel}};e.\u0275fac=function(r){return new(r||e)($(Be))},e.\u0275dir=De({type:e,selectors:[["","ngItemLabel",""]],inputs:{ngItemLabel:"ngItemLabel",escape:"escape"},features:[Nt]});let t=e;return t})(),pT=(()=>{let e=class e{constructor(i){this.template=i}};e.\u0275fac=function(r){return new(r||e)($(Ee))},e.\u0275dir=De({type:e,selectors:[["","ng-option-tmp",""]]});let t=e;return t})(),mT=(()=>{let e=class e{constructor(i){this.template=i}};e.\u0275fac=function(r){return new(r||e)($(Ee))},e.\u0275dir=De({type:e,selectors:[["","ng-optgroup-tmp",""]]});let t=e;return t})(),fT=(()=>{let e=class e{constructor(i){this.template=i}};e.\u0275fac=function(r){return new(r||e)($(Ee))},e.\u0275dir=De({type:e,selectors:[["","ng-label-tmp",""]]});let t=e;return t})(),gT=(()=>{let e=class e{constructor(i){this.template=i}};e.\u0275fac=function(r){return new(r||e)($(Ee))},e.\u0275dir=De({type:e,selectors:[["","ng-multi-label-tmp",""]]});let t=e;return t})(),_T=(()=>{let e=class e{constructor(i){this.template=i}};e.\u0275fac=function(r){return new(r||e)($(Ee))},e.\u0275dir=De({type:e,selectors:[["","ng-header-tmp",""]]});let t=e;return t})(),yT=(()=>{let e=class e{constructor(i){this.template=i}};e.\u0275fac=function(r){return new(r||e)($(Ee))},e.\u0275dir=De({type:e,selectors:[["","ng-footer-tmp",""]]});let t=e;return t})(),vT=(()=>{let e=class e{constructor(i){this.template=i}};e.\u0275fac=function(r){return new(r||e)($(Ee))},e.\u0275dir=De({type:e,selectors:[["","ng-notfound-tmp",""]]});let t=e;return t})(),bT=(()=>{let e=class e{constructor(i){this.template=i}};e.\u0275fac=function(r){return new(r||e)($(Ee))},e.\u0275dir=De({type:e,selectors:[["","ng-typetosearch-tmp",""]]});let t=e;return t})(),wT=(()=>{let e=class e{constructor(i){this.template=i}};e.\u0275fac=function(r){return new(r||e)($(Ee))},e.\u0275dir=De({type:e,selectors:[["","ng-loadingtext-tmp",""]]});let t=e;return t})(),CT=(()=>{let e=class e{constructor(i){this.template=i}};e.\u0275fac=function(r){return new(r||e)($(Ee))},e.\u0275dir=De({type:e,selectors:[["","ng-tag-tmp",""]]});let t=e;return t})(),ST=(()=>{let e=class e{constructor(i){this.template=i}};e.\u0275fac=function(r){return new(r||e)($(Ee))},e.\u0275dir=De({type:e,selectors:[["","ng-loadingspinner-tmp",""]]});let t=e;return t})();function Hv(){return"axxxxxxxxxxx".replace(/[x]/g,()=>(Math.random()*16|0).toString(16))}var DT={"\u24B6":"A",\uFF21:"A",\u00C0:"A",\u00C1:"A",\u00C2:"A",\u1EA6:"A",\u1EA4:"A",\u1EAA:"A",\u1EA8:"A",\u00C3:"A",\u0100:"A",\u0102:"A",\u1EB0:"A",\u1EAE:"A",\u1EB4:"A",\u1EB2:"A",\u0226:"A",\u01E0:"A",\u00C4:"A",\u01DE:"A",\u1EA2:"A",\u00C5:"A",\u01FA:"A",\u01CD:"A",\u0200:"A",\u0202:"A",\u1EA0:"A",\u1EAC:"A",\u1EB6:"A",\u1E00:"A",\u0104:"A","\u023A":"A","\u2C6F":"A","\uA732":"AA",\u00C6:"AE",\u01FC:"AE",\u01E2:"AE","\uA734":"AO","\uA736":"AU","\uA738":"AV","\uA73A":"AV","\uA73C":"AY","\u24B7":"B",\uFF22:"B",\u1E02:"B",\u1E04:"B",\u1E06:"B","\u0243":"B",\u0182:"B",\u0181:"B","\u24B8":"C",\uFF23:"C",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u00C7:"C",\u1E08:"C",\u0187:"C","\u023B":"C","\uA73E":"C","\u24B9":"D",\uFF24:"D",\u1E0A:"D",\u010E:"D",\u1E0C:"D",\u1E10:"D",\u1E12:"D",\u1E0E:"D",\u0110:"D",\u018B:"D",\u018A:"D",\u0189:"D","\uA779":"D",\u01F1:"DZ",\u01C4:"DZ",\u01F2:"Dz",\u01C5:"Dz","\u24BA":"E",\uFF25:"E",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u1EC0:"E",\u1EBE:"E",\u1EC4:"E",\u1EC2:"E",\u1EBC:"E",\u0112:"E",\u1E14:"E",\u1E16:"E",\u0114:"E",\u0116:"E",\u00CB:"E",\u1EBA:"E",\u011A:"E",\u0204:"E",\u0206:"E",\u1EB8:"E",\u1EC6:"E",\u0228:"E",\u1E1C:"E",\u0118:"E",\u1E18:"E",\u1E1A:"E",\u0190:"E",\u018E:"E","\u24BB":"F",\uFF26:"F",\u1E1E:"F",\u0191:"F","\uA77B":"F","\u24BC":"G",\uFF27:"G",\u01F4:"G",\u011C:"G",\u1E20:"G",\u011E:"G",\u0120:"G",\u01E6:"G",\u0122:"G",\u01E4:"G",\u0193:"G","\uA7A0":"G","\uA77D":"G","\uA77E":"G","\u24BD":"H",\uFF28:"H",\u0124:"H",\u1E22:"H",\u1E26:"H",\u021E:"H",\u1E24:"H",\u1E28:"H",\u1E2A:"H",\u0126:"H","\u2C67":"H","\u2C75":"H","\uA78D":"H","\u24BE":"I",\uFF29:"I",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u0128:"I",\u012A:"I",\u012C:"I",\u0130:"I",\u00CF:"I",\u1E2E:"I",\u1EC8:"I",\u01CF:"I",\u0208:"I",\u020A:"I",\u1ECA:"I",\u012E:"I",\u1E2C:"I",\u0197:"I","\u24BF":"J",\uFF2A:"J",\u0134:"J","\u0248":"J","\u24C0":"K",\uFF2B:"K",\u1E30:"K",\u01E8:"K",\u1E32:"K",\u0136:"K",\u1E34:"K",\u0198:"K","\u2C69":"K","\uA740":"K","\uA742":"K","\uA744":"K","\uA7A2":"K","\u24C1":"L",\uFF2C:"L",\u013F:"L",\u0139:"L",\u013D:"L",\u1E36:"L",\u1E38:"L",\u013B:"L",\u1E3C:"L",\u1E3A:"L",\u0141:"L","\u023D":"L","\u2C62":"L","\u2C60":"L","\uA748":"L","\uA746":"L","\uA780":"L",\u01C7:"LJ",\u01C8:"Lj","\u24C2":"M",\uFF2D:"M",\u1E3E:"M",\u1E40:"M",\u1E42:"M","\u2C6E":"M",\u019C:"M","\u24C3":"N",\uFF2E:"N",\u01F8:"N",\u0143:"N",\u00D1:"N",\u1E44:"N",\u0147:"N",\u1E46:"N",\u0145:"N",\u1E4A:"N",\u1E48:"N","\u0220":"N",\u019D:"N","\uA790":"N","\uA7A4":"N",\u01CA:"NJ",\u01CB:"Nj","\u24C4":"O",\uFF2F:"O",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u1ED2:"O",\u1ED0:"O",\u1ED6:"O",\u1ED4:"O",\u00D5:"O",\u1E4C:"O",\u022C:"O",\u1E4E:"O",\u014C:"O",\u1E50:"O",\u1E52:"O",\u014E:"O",\u022E:"O",\u0230:"O",\u00D6:"O",\u022A:"O",\u1ECE:"O",\u0150:"O",\u01D1:"O",\u020C:"O",\u020E:"O",\u01A0:"O",\u1EDC:"O",\u1EDA:"O",\u1EE0:"O",\u1EDE:"O",\u1EE2:"O",\u1ECC:"O",\u1ED8:"O",\u01EA:"O",\u01EC:"O",\u00D8:"O",\u01FE:"O",\u0186:"O",\u019F:"O","\uA74A":"O","\uA74C":"O",\u01A2:"OI","\uA74E":"OO",\u0222:"OU","\u24C5":"P",\uFF30:"P",\u1E54:"P",\u1E56:"P",\u01A4:"P","\u2C63":"P","\uA750":"P","\uA752":"P","\uA754":"P","\u24C6":"Q",\uFF31:"Q","\uA756":"Q","\uA758":"Q","\u024A":"Q","\u24C7":"R",\uFF32:"R",\u0154:"R",\u1E58:"R",\u0158:"R",\u0210:"R",\u0212:"R",\u1E5A:"R",\u1E5C:"R",\u0156:"R",\u1E5E:"R","\u024C":"R","\u2C64":"R","\uA75A":"R","\uA7A6":"R","\uA782":"R","\u24C8":"S",\uFF33:"S","\u1E9E":"S",\u015A:"S",\u1E64:"S",\u015C:"S",\u1E60:"S",\u0160:"S",\u1E66:"S",\u1E62:"S",\u1E68:"S",\u0218:"S",\u015E:"S","\u2C7E":"S","\uA7A8":"S","\uA784":"S","\u24C9":"T",\uFF34:"T",\u1E6A:"T",\u0164:"T",\u1E6C:"T",\u021A:"T",\u0162:"T",\u1E70:"T",\u1E6E:"T",\u0166:"T",\u01AC:"T",\u01AE:"T","\u023E":"T","\uA786":"T","\uA728":"TZ","\u24CA":"U",\uFF35:"U",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u0168:"U",\u1E78:"U",\u016A:"U",\u1E7A:"U",\u016C:"U",\u00DC:"U",\u01DB:"U",\u01D7:"U",\u01D5:"U",\u01D9:"U",\u1EE6:"U",\u016E:"U",\u0170:"U",\u01D3:"U",\u0214:"U",\u0216:"U",\u01AF:"U",\u1EEA:"U",\u1EE8:"U",\u1EEE:"U",\u1EEC:"U",\u1EF0:"U",\u1EE4:"U",\u1E72:"U",\u0172:"U",\u1E76:"U",\u1E74:"U","\u0244":"U","\u24CB":"V",\uFF36:"V",\u1E7C:"V",\u1E7E:"V",\u01B2:"V","\uA75E":"V","\u0245":"V","\uA760":"VY","\u24CC":"W",\uFF37:"W",\u1E80:"W",\u1E82:"W",\u0174:"W",\u1E86:"W",\u1E84:"W",\u1E88:"W","\u2C72":"W","\u24CD":"X",\uFF38:"X",\u1E8A:"X",\u1E8C:"X","\u24CE":"Y",\uFF39:"Y",\u1EF2:"Y",\u00DD:"Y",\u0176:"Y",\u1EF8:"Y",\u0232:"Y",\u1E8E:"Y",\u0178:"Y",\u1EF6:"Y",\u1EF4:"Y",\u01B3:"Y","\u024E":"Y","\u1EFE":"Y","\u24CF":"Z",\uFF3A:"Z",\u0179:"Z",\u1E90:"Z",\u017B:"Z",\u017D:"Z",\u1E92:"Z",\u1E94:"Z",\u01B5:"Z",\u0224:"Z","\u2C7F":"Z","\u2C6B":"Z","\uA762":"Z","\u24D0":"a",\uFF41:"a",\u1E9A:"a",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u1EA7:"a",\u1EA5:"a",\u1EAB:"a",\u1EA9:"a",\u00E3:"a",\u0101:"a",\u0103:"a",\u1EB1:"a",\u1EAF:"a",\u1EB5:"a",\u1EB3:"a",\u0227:"a",\u01E1:"a",\u00E4:"a",\u01DF:"a",\u1EA3:"a",\u00E5:"a",\u01FB:"a",\u01CE:"a",\u0201:"a",\u0203:"a",\u1EA1:"a",\u1EAD:"a",\u1EB7:"a",\u1E01:"a",\u0105:"a","\u2C65":"a",\u0250:"a","\uA733":"aa",\u00E6:"ae",\u01FD:"ae",\u01E3:"ae","\uA735":"ao","\uA737":"au","\uA739":"av","\uA73B":"av","\uA73D":"ay","\u24D1":"b",\uFF42:"b",\u1E03:"b",\u1E05:"b",\u1E07:"b",\u0180:"b",\u0183:"b",\u0253:"b","\u24D2":"c",\uFF43:"c",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u00E7:"c",\u1E09:"c",\u0188:"c","\u023C":"c","\uA73F":"c","\u2184":"c","\u24D3":"d",\uFF44:"d",\u1E0B:"d",\u010F:"d",\u1E0D:"d",\u1E11:"d",\u1E13:"d",\u1E0F:"d",\u0111:"d",\u018C:"d",\u0256:"d",\u0257:"d","\uA77A":"d",\u01F3:"dz",\u01C6:"dz","\u24D4":"e",\uFF45:"e",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u1EC1:"e",\u1EBF:"e",\u1EC5:"e",\u1EC3:"e",\u1EBD:"e",\u0113:"e",\u1E15:"e",\u1E17:"e",\u0115:"e",\u0117:"e",\u00EB:"e",\u1EBB:"e",\u011B:"e",\u0205:"e",\u0207:"e",\u1EB9:"e",\u1EC7:"e",\u0229:"e",\u1E1D:"e",\u0119:"e",\u1E19:"e",\u1E1B:"e","\u0247":"e",\u025B:"e",\u01DD:"e","\u24D5":"f",\uFF46:"f",\u1E1F:"f",\u0192:"f","\uA77C":"f","\u24D6":"g",\uFF47:"g",\u01F5:"g",\u011D:"g",\u1E21:"g",\u011F:"g",\u0121:"g",\u01E7:"g",\u0123:"g",\u01E5:"g",\u0260:"g","\uA7A1":"g","\u1D79":"g","\uA77F":"g","\u24D7":"h",\uFF48:"h",\u0125:"h",\u1E23:"h",\u1E27:"h",\u021F:"h",\u1E25:"h",\u1E29:"h",\u1E2B:"h",\u1E96:"h",\u0127:"h","\u2C68":"h","\u2C76":"h",\u0265:"h",\u0195:"hv","\u24D8":"i",\uFF49:"i",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u0129:"i",\u012B:"i",\u012D:"i",\u00EF:"i",\u1E2F:"i",\u1EC9:"i",\u01D0:"i",\u0209:"i",\u020B:"i",\u1ECB:"i",\u012F:"i",\u1E2D:"i",\u0268:"i",\u0131:"i","\u24D9":"j",\uFF4A:"j",\u0135:"j",\u01F0:"j","\u0249":"j","\u24DA":"k",\uFF4B:"k",\u1E31:"k",\u01E9:"k",\u1E33:"k",\u0137:"k",\u1E35:"k",\u0199:"k","\u2C6A":"k","\uA741":"k","\uA743":"k","\uA745":"k","\uA7A3":"k","\u24DB":"l",\uFF4C:"l",\u0140:"l",\u013A:"l",\u013E:"l",\u1E37:"l",\u1E39:"l",\u013C:"l",\u1E3D:"l",\u1E3B:"l",\u017F:"l",\u0142:"l",\u019A:"l",\u026B:"l","\u2C61":"l","\uA749":"l","\uA781":"l","\uA747":"l",\u01C9:"lj","\u24DC":"m",\uFF4D:"m",\u1E3F:"m",\u1E41:"m",\u1E43:"m",\u0271:"m",\u026F:"m","\u24DD":"n",\uFF4E:"n",\u01F9:"n",\u0144:"n",\u00F1:"n",\u1E45:"n",\u0148:"n",\u1E47:"n",\u0146:"n",\u1E4B:"n",\u1E49:"n",\u019E:"n",\u0272:"n",\u0149:"n","\uA791":"n","\uA7A5":"n",\u01CC:"nj","\u24DE":"o",\uFF4F:"o",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u1ED3:"o",\u1ED1:"o",\u1ED7:"o",\u1ED5:"o",\u00F5:"o",\u1E4D:"o",\u022D:"o",\u1E4F:"o",\u014D:"o",\u1E51:"o",\u1E53:"o",\u014F:"o",\u022F:"o",\u0231:"o",\u00F6:"o",\u022B:"o",\u1ECF:"o",\u0151:"o",\u01D2:"o",\u020D:"o",\u020F:"o",\u01A1:"o",\u1EDD:"o",\u1EDB:"o",\u1EE1:"o",\u1EDF:"o",\u1EE3:"o",\u1ECD:"o",\u1ED9:"o",\u01EB:"o",\u01ED:"o",\u00F8:"o",\u01FF:"o",\u0254:"o","\uA74B":"o","\uA74D":"o",\u0275:"o",\u01A3:"oi",\u0223:"ou","\uA74F":"oo","\u24DF":"p",\uFF50:"p",\u1E55:"p",\u1E57:"p",\u01A5:"p","\u1D7D":"p","\uA751":"p","\uA753":"p","\uA755":"p","\u24E0":"q",\uFF51:"q","\u024B":"q","\uA757":"q","\uA759":"q","\u24E1":"r",\uFF52:"r",\u0155:"r",\u1E59:"r",\u0159:"r",\u0211:"r",\u0213:"r",\u1E5B:"r",\u1E5D:"r",\u0157:"r",\u1E5F:"r","\u024D":"r",\u027D:"r","\uA75B":"r","\uA7A7":"r","\uA783":"r","\u24E2":"s",\uFF53:"s",\u00DF:"s",\u015B:"s",\u1E65:"s",\u015D:"s",\u1E61:"s",\u0161:"s",\u1E67:"s",\u1E63:"s",\u1E69:"s",\u0219:"s",\u015F:"s","\u023F":"s","\uA7A9":"s","\uA785":"s",\u1E9B:"s","\u24E3":"t",\uFF54:"t",\u1E6B:"t",\u1E97:"t",\u0165:"t",\u1E6D:"t",\u021B:"t",\u0163:"t",\u1E71:"t",\u1E6F:"t",\u0167:"t",\u01AD:"t",\u0288:"t","\u2C66":"t","\uA787":"t","\uA729":"tz","\u24E4":"u",\uFF55:"u",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u0169:"u",\u1E79:"u",\u016B:"u",\u1E7B:"u",\u016D:"u",\u00FC:"u",\u01DC:"u",\u01D8:"u",\u01D6:"u",\u01DA:"u",\u1EE7:"u",\u016F:"u",\u0171:"u",\u01D4:"u",\u0215:"u",\u0217:"u",\u01B0:"u",\u1EEB:"u",\u1EE9:"u",\u1EEF:"u",\u1EED:"u",\u1EF1:"u",\u1EE5:"u",\u1E73:"u",\u0173:"u",\u1E77:"u",\u1E75:"u",\u0289:"u","\u24E5":"v",\uFF56:"v",\u1E7D:"v",\u1E7F:"v",\u028B:"v","\uA75F":"v",\u028C:"v","\uA761":"vy","\u24E6":"w",\uFF57:"w",\u1E81:"w",\u1E83:"w",\u0175:"w",\u1E87:"w",\u1E85:"w",\u1E98:"w",\u1E89:"w","\u2C73":"w","\u24E7":"x",\uFF58:"x",\u1E8B:"x",\u1E8D:"x","\u24E8":"y",\uFF59:"y",\u1EF3:"y",\u00FD:"y",\u0177:"y",\u1EF9:"y",\u0233:"y",\u1E8F:"y",\u00FF:"y",\u1EF7:"y",\u1E99:"y",\u1EF5:"y",\u01B4:"y","\u024F":"y","\u1EFF":"y","\u24E9":"z",\uFF5A:"z",\u017A:"z",\u1E91:"z",\u017C:"z",\u017E:"z",\u1E93:"z",\u1E95:"z",\u01B6:"z",\u0225:"z","\u0240":"z","\u2C6C":"z","\uA763":"z",\u0386:"\u0391",\u0388:"\u0395",\u0389:"\u0397",\u038A:"\u0399",\u03AA:"\u0399",\u038C:"\u039F",\u038E:"\u03A5",\u03AB:"\u03A5",\u038F:"\u03A9",\u03AC:"\u03B1",\u03AD:"\u03B5",\u03AE:"\u03B7",\u03AF:"\u03B9",\u03CA:"\u03B9",\u0390:"\u03B9",\u03CC:"\u03BF",\u03CD:"\u03C5",\u03CB:"\u03C5",\u03B0:"\u03C5",\u03C9:"\u03C9",\u03C2:"\u03C3"};function rc(t){let e=n=>DT[n]||n;return t.replace(/[^\u0000-\u007E]/g,e)}var qh=class{constructor(e,n){this._ngSelect=e,this._selectionModel=n,this._items=[],this._filteredItems=[],this._markedIndex=-1}get items(){return this._items}get filteredItems(){return this._filteredItems}get markedIndex(){return this._markedIndex}get selectedItems(){return this._selectionModel.value}get markedItem(){return this._filteredItems[this._markedIndex]}get noItemsToSelect(){return this._ngSelect.hideSelected&&this._items.length===this.selectedItems.length}get maxItemsSelected(){return this._ngSelect.multiple&&this._ngSelect.maxSelectedItems<=this.selectedItems.length}get lastSelectedItem(){let e=this.selectedItems.length-1;for(;e>=0;e--){let n=this.selectedItems[e];if(!n.disabled)return n}return null}setItems(e){this._items=e.map((n,i)=>this.mapItem(n,i)),this._ngSelect.groupBy?(this._groups=this._groupBy(this._items,this._ngSelect.groupBy),this._items=this._flatten(this._groups)):(this._groups=new Map,this._groups.set(void 0,this._items)),this._filteredItems=[...this._items]}select(e){if(e.selected||this.maxItemsSelected)return;let n=this._ngSelect.multiple;n||this.clearSelected(),this._selectionModel.select(e,n,this._ngSelect.selectableGroupAsModel),this._ngSelect.hideSelected&&this._hideSelected(e)}unselect(e){e.selected&&(this._selectionModel.unselect(e,this._ngSelect.multiple),this._ngSelect.hideSelected&&Ne(e.index)&&this._ngSelect.multiple&&this._showSelected(e))}findItem(e){let n;return this._ngSelect.compareWith?n=i=>this._ngSelect.compareWith(i.value,e):this._ngSelect.bindValue?n=i=>!i.children&&this.resolveNested(i.value,this._ngSelect.bindValue)===e:n=i=>i.value===e||!i.children&&i.label&&i.label===this.resolveNested(e,this._ngSelect.bindLabel),this._items.find(i=>n(i))}addItem(e){let n=this.mapItem(e,this._items.length);return this._items.push(n),this._filteredItems.push(n),n}clearSelected(e=!1){this._selectionModel.clear(e),this._items.forEach(n=>{n.selected=e&&n.selected&&n.disabled,n.marked=!1}),this._ngSelect.hideSelected&&this.resetFilteredItems()}findByLabel(e){return e=rc(e).toLocaleLowerCase(),this.filteredItems.find(n=>rc(n.label).toLocaleLowerCase().substr(0,e.length)===e)}filter(e){if(!e){this.resetFilteredItems();return}this._filteredItems=[],e=this._ngSelect.searchFn?e:rc(e).toLocaleLowerCase();let n=this._ngSelect.searchFn||this._defaultSearchFn,i=this._ngSelect.hideSelected;for(let r of Array.from(this._groups.keys())){let s=[];for(let o of this._groups.get(r)){if(i&&(o.parent&&o.parent.selected||o.selected))continue;let a=this._ngSelect.searchFn?o.value:o;n(e,a)&&s.push(o)}if(s.length>0){let[o]=s.slice(-1);if(o.parent){let a=this._items.find(l=>l===o.parent);this._filteredItems.push(a)}this._filteredItems.push(...s)}}}resetFilteredItems(){this._filteredItems.length!==this._items.length&&(this._ngSelect.hideSelected&&this.selectedItems.length>0?this._filteredItems=this._items.filter(e=>!e.selected):this._filteredItems=this._items)}unmarkItem(){this._markedIndex=-1}markNextItem(){this._stepToItem(1)}markPreviousItem(){this._stepToItem(-1)}markItem(e){this._markedIndex=this._filteredItems.indexOf(e)}markSelectedOrDefault(e){if(this._filteredItems.length===0)return;let n=this._getLastMarkedIndex();n>-1?this._markedIndex=n:this._markedIndex=e?this.filteredItems.findIndex(i=>!i.disabled):-1}resolveNested(e,n){if(!Xo(e))return e;if(n.indexOf(".")===-1)return e[n];{let i=n.split("."),r=e;for(let s=0,o=i.length;s<o;++s){if(r==null)return null;r=r[i[s]]}return r}}mapItem(e,n){let i=Ne(e.$ngOptionLabel)?e.$ngOptionLabel:this.resolveNested(e,this._ngSelect.bindLabel),r=Ne(e.$ngOptionValue)?e.$ngOptionValue:e;return{index:n,label:Ne(i)?i.toString():"",value:r,disabled:e.disabled,htmlId:`${this._ngSelect.dropdownId}-${n}`}}mapSelectedItems(){let e=this._ngSelect.multiple;for(let n of this.selectedItems){let i=this._ngSelect.bindValue?this.resolveNested(n.value,this._ngSelect.bindValue):n.value,r=Ne(i)?this.findItem(i):null;this._selectionModel.unselect(n,e),this._selectionModel.select(r||n,e,this._ngSelect.selectableGroupAsModel)}this._ngSelect.hideSelected&&(this._filteredItems=this.filteredItems.filter(n=>this.selectedItems.indexOf(n)===-1))}_showSelected(e){if(this._filteredItems.push(e),e.parent){let n=e.parent;this._filteredItems.find(r=>r===n)||this._filteredItems.push(n)}else if(e.children)for(let n of e.children)n.selected=!1,this._filteredItems.push(n);this._filteredItems=[...this._filteredItems.sort((n,i)=>n.index-i.index)]}_hideSelected(e){this._filteredItems=this._filteredItems.filter(n=>n!==e),e.parent?e.parent.children.every(i=>i.selected)&&(this._filteredItems=this._filteredItems.filter(i=>i!==e.parent)):e.children&&(this._filteredItems=this.filteredItems.filter(n=>n.parent!==e))}_defaultSearchFn(e,n){return rc(n.label).toLocaleLowerCase().indexOf(e)>-1}_getNextItemIndex(e){return e>0?this._markedIndex>=this._filteredItems.length-1?0:this._markedIndex+1:this._markedIndex<=0?this._filteredItems.length-1:this._markedIndex-1}_stepToItem(e){this._filteredItems.length===0||this._filteredItems.every(n=>n.disabled)||(this._markedIndex=this._getNextItemIndex(e),this.markedItem.disabled&&this._stepToItem(e))}_getLastMarkedIndex(){if(this._ngSelect.hideSelected||this._markedIndex>-1&&this.markedItem===void 0)return-1;let e=this._filteredItems.indexOf(this.lastSelectedItem);return this.lastSelectedItem&&e<0?-1:Math.max(this.markedIndex,e)}_groupBy(e,n){let i=new Map;if(e.length===0)return i;if(Array.isArray(e[0].value[n])){for(let o of e){let a=(o.value[n]||[]).map((l,d)=>this.mapItem(l,d));i.set(o,a)}return i}let r=sc(this._ngSelect.groupBy),s=o=>{let a=r?n(o.value):o.value[n];return Ne(a)?a:void 0};for(let o of e){let a=s(o),l=i.get(a);l?l.push(o):i.set(a,[o])}return i}_flatten(e){let n=sc(this._ngSelect.groupBy),i=[];for(let r of Array.from(e.keys())){let s=i.length;if(r===void 0){let p=e.get(void 0)||[];i.push(...p.map(m=>(m.index=s++,m)));continue}let o=Xo(r),a={label:o?"":String(r),children:void 0,parent:null,index:s++,disabled:!this._ngSelect.selectableGroup,htmlId:Hv()},l=n?this._ngSelect.bindLabel:this._ngSelect.groupBy,d=this._ngSelect.groupValue||(()=>o?r.value:{[l]:r}),h=e.get(r).map(p=>(p.parent=a,p.children=void 0,p.index=s++,p));a.children=h,a.value=d(r,h.map(p=>p.value)),i.push(a),i.push(...h)}return i}},Qi=function(t){return t[t.Tab=9]="Tab",t[t.Enter=13]="Enter",t[t.Esc=27]="Esc",t[t.Space=32]="Space",t[t.ArrowUp=38]="ArrowUp",t[t.ArrowDown=40]="ArrowDown",t[t.Backspace=8]="Backspace",t}(Qi||{}),zv=(()=>{let e=class e{constructor(){this._dimensions={itemHeight:0,panelHeight:0,itemsPerViewport:0}}get dimensions(){return this._dimensions}calculateItems(i,r,s){let o=this._dimensions,a=o.itemHeight*r,d=Math.max(0,i)/a*r,h=Math.min(r,Math.ceil(d)+(o.itemsPerViewport+1)),m=Math.max(0,h-o.itemsPerViewport),f=Math.min(m,Math.floor(d)),w=o.itemHeight*Math.ceil(f)-o.itemHeight*Math.min(f,s);return w=isNaN(w)?0:w,f=isNaN(f)?-1:f,h=isNaN(h)?-1:h,f-=s,f=Math.max(0,f),h+=s,h=Math.min(r,h),{topPadding:w,scrollHeight:a,start:f,end:h}}setDimensions(i,r){let s=Math.max(1,Math.floor(r/i));this._dimensions={itemHeight:i,panelHeight:r,itemsPerViewport:s}}getScrollTo(i,r,s){let{panelHeight:o}=this.dimensions,a=i+r,l=s,d=l+o;return o>=a&&s===i?null:a>d?l+a-d:i<=l?i:null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac});let t=e;return t})(),Lv=["top","right","bottom","left"],TT=typeof requestAnimationFrame<"u"?xp:Ep,Nv=(()=>{let e=class e{constructor(i,r,s,o,a){this._renderer=i,this._zone=r,this._panelService=s,this._document=a,this.items=[],this.position="auto",this.virtualScroll=!1,this.filterValue=null,this.update=new Y,this.scroll=new Y,this.scrollToEnd=new Y,this.outsideClick=new Y,this._destroy$=new lt,this._scrollToEndFired=!1,this._updateScrollHeight=!1,this._lastScrollPosition=0,this._dropdown=o.nativeElement}get currentPosition(){return this._currentPosition}get itemsLength(){return this._itemsLength}set itemsLength(i){i!==this._itemsLength&&(this._itemsLength=i,this._onItemsLengthChanged())}get _startOffset(){if(this.markedItem){let{itemHeight:i,panelHeight:r}=this._panelService.dimensions,s=this.markedItem.index*i;return r>s?0:s}return 0}ngOnInit(){this._select=this._dropdown.parentElement,this._virtualPadding=this.paddingElementRef.nativeElement,this._scrollablePanel=this.scrollElementRef.nativeElement,this._contentPanel=this.contentElementRef.nativeElement,this._handleScroll(),this._handleOutsideClick(),this._appendDropdown(),this._setupMousedownListener()}ngOnChanges(i){if(i.items){let r=i.items;this._onItemsChange(r.currentValue,r.firstChange)}}ngOnDestroy(){this._destroy$.next(),this._destroy$.complete(),this._destroy$.unsubscribe(),this.appendTo&&this._renderer.removeChild(this._dropdown.parentNode,this._dropdown)}scrollTo(i,r=!1){if(!i)return;let s=this.items.indexOf(i);if(s<0||s>=this.itemsLength)return;let o;if(this.virtualScroll){let a=this._panelService.dimensions.itemHeight;o=this._panelService.getScrollTo(s*a,a,this._lastScrollPosition)}else{let a=this._dropdown.querySelector(`#${i.htmlId}`),l=r?a.offsetTop:this._lastScrollPosition;o=this._panelService.getScrollTo(a.offsetTop,a.clientHeight,l)}Ne(o)&&(this._scrollablePanel.scrollTop=o)}scrollToTag(){let i=this._scrollablePanel;i.scrollTop=i.scrollHeight-i.clientHeight}adjustPosition(){this._updateYPosition()}_handleDropdownPosition(){this._currentPosition=this._calculateCurrentPosition(this._dropdown),Lv.includes(this._currentPosition)?this._updateDropdownClass(this._currentPosition):this._updateDropdownClass("bottom"),this.appendTo&&this._updateYPosition(),this._dropdown.style.opacity="1"}_updateDropdownClass(i){Lv.forEach(s=>{let o=`ng-select-${s}`;this._renderer.removeClass(this._dropdown,o),this._renderer.removeClass(this._select,o)});let r=`ng-select-${i}`;this._renderer.addClass(this._dropdown,r),this._renderer.addClass(this._select,r)}_handleScroll(){this._zone.runOutsideAngular(()=>{Lt(this.scrollElementRef.nativeElement,"scroll").pipe(Ze(this._destroy$),Pp(0,TT)).subscribe(i=>{let r=i.path||i.composedPath&&i.composedPath();if(!r||r.length===0&&!i.target)return;let s=!r||r.length===0?i.target.scrollTop:r[0].scrollTop;this._onContentScrolled(s)})})}_handleOutsideClick(){this._document&&this._zone.runOutsideAngular(()=>{kr(Lt(this._document,"touchstart",{capture:!0}),Lt(this._document,"click",{capture:!0})).pipe(Ze(this._destroy$)).subscribe(i=>this._checkToClose(i))})}_checkToClose(i){if(this._select.contains(i.target)||this._dropdown.contains(i.target))return;let r=i.path||i.composedPath&&i.composedPath();i.target&&i.target.shadowRoot&&r&&r[0]&&this._select.contains(r[0])||this._zone.run(()=>this.outsideClick.emit())}_onItemsChange(i,r){this.items=i||[],this._scrollToEndFired=!1,this.itemsLength=i.length,this.virtualScroll?this._updateItemsRange(r):(this._setVirtualHeight(),this._updateItems(r))}_updateItems(i){this.update.emit(this.items),i!==!1&&this._zone.runOutsideAngular(()=>{Promise.resolve().then(()=>{let r=this._scrollablePanel.clientHeight;this._panelService.setDimensions(0,r),this._handleDropdownPosition(),this.scrollTo(this.markedItem,i)})})}_updateItemsRange(i){this._zone.runOutsideAngular(()=>{this._measureDimensions().then(()=>{i?(this._renderItemsRange(this._startOffset),this._handleDropdownPosition()):this._renderItemsRange()})})}_onContentScrolled(i){this.virtualScroll&&this._renderItemsRange(i),this._lastScrollPosition=i,this._fireScrollToEnd(i)}_updateVirtualHeight(i){this._updateScrollHeight&&(this._virtualPadding.style.height=`${i}px`,this._updateScrollHeight=!1)}_setVirtualHeight(){this._virtualPadding&&(this._virtualPadding.style.height="0px")}_onItemsLengthChanged(){this._updateScrollHeight=!0}_renderItemsRange(i=null){if(i&&this._lastScrollPosition===i)return;i=i||this._scrollablePanel.scrollTop;let r=this._panelService.calculateItems(i,this.itemsLength,this.bufferAmount);this._updateVirtualHeight(r.scrollHeight),this._contentPanel.style.transform=`translateY(${r.topPadding}px)`,this._zone.run(()=>{this.update.emit(this.items.slice(r.start,r.end)),this.scroll.emit({start:r.start,end:r.end})}),Ne(i)&&this._lastScrollPosition===0&&(this._scrollablePanel.scrollTop=i,this._lastScrollPosition=i)}_measureDimensions(){if(this._panelService.dimensions.itemHeight>0||this.itemsLength===0)return Promise.resolve(this._panelService.dimensions);let[i]=this.items;return this.update.emit([i]),Promise.resolve().then(()=>{let s=this._dropdown.querySelector(`#${i.htmlId}`).clientHeight;this._virtualPadding.style.height=`${s*this.itemsLength}px`;let o=this._scrollablePanel.clientHeight;return this._panelService.setDimensions(s,o),this._panelService.dimensions})}_fireScrollToEnd(i){if(this._scrollToEndFired||i===0)return;let r=this.virtualScroll?this._virtualPadding:this._contentPanel;i+this._dropdown.clientHeight>=r.clientHeight-1&&(this._zone.run(()=>this.scrollToEnd.emit()),this._scrollToEndFired=!0)}_calculateCurrentPosition(i){if(this.position!=="auto")return this.position;let r=this._select.getBoundingClientRect(),s=document.documentElement.scrollTop||document.body.scrollTop,o=r.top+window.pageYOffset,a=r.height,l=i.getBoundingClientRect().height;return o+a+l>s+document.documentElement.clientHeight?"top":"bottom"}_appendDropdown(){if(this.appendTo){if(this._parent=document.querySelector(this.appendTo),!this._parent)throw new Error(`appendTo selector ${this.appendTo} did not found any parent element`);this._updateXPosition(),this._parent.appendChild(this._dropdown)}}_updateXPosition(){let i=this._select.getBoundingClientRect(),r=this._parent.getBoundingClientRect(),s=i.left-r.left;this._dropdown.style.left=s+"px",this._dropdown.style.width=i.width+"px",this._dropdown.style.minWidth=i.width+"px"}_updateYPosition(){let i=this._select.getBoundingClientRect(),r=this._parent.getBoundingClientRect(),s=i.height;if(this._currentPosition==="top"){let o=r.bottom-i.bottom;this._dropdown.style.bottom=o+s+"px",this._dropdown.style.top="auto"}else if(this._currentPosition==="bottom"){let o=i.top-r.top;this._dropdown.style.top=o+s+"px",this._dropdown.style.bottom="auto"}}_setupMousedownListener(){this._zone.runOutsideAngular(()=>{Lt(this._dropdown,"mousedown").pipe(Ze(this._destroy$)).subscribe(i=>{i.target.tagName!=="INPUT"&&i.preventDefault()})})}};e.\u0275fac=function(r){return new(r||e)($(Vr),$(St),$(zv),$(Be),$(dt,8))},e.\u0275cmp=se({type:e,selectors:[["ng-dropdown-panel"]],viewQuery:function(r,s){if(r&1&&(Tt(MD,7,Be),Tt(ID,7,Be),Tt(ED,7,Be)),r&2){let o;ye(o=ve())&&(s.contentElementRef=o.first),ye(o=ve())&&(s.scrollElementRef=o.first),ye(o=ve())&&(s.paddingElementRef=o.first)}},inputs:{items:"items",markedItem:"markedItem",position:"position",appendTo:"appendTo",bufferAmount:"bufferAmount",virtualScroll:[ge.HasDecoratorInputTransform,"virtualScroll","virtualScroll",Le],headerTemplate:"headerTemplate",footerTemplate:"footerTemplate",filterValue:"filterValue"},outputs:{update:"update",scroll:"scroll",scrollToEnd:"scrollToEnd",outsideClick:"outsideClick"},features:[io,Nt],ngContentSelectors:Vv,decls:9,vars:6,consts:[["scroll",""],["padding",""],["content",""],[1,"ng-dropdown-header"],["role","listbox",1,"ng-dropdown-panel-items","scroll-host"],[1,"ng-dropdown-footer"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(r,s){r&1&&(Br(),q(0,xD,2,4,"div",3),v(1,"div",4,0),G(3,"div",null,1),v(5,"div",null,2),Hr(7),b()(),q(8,OD,2,4,"div",5)),r&2&&(Re(0,s.headerTemplate?0:-1),g(3),ct("total-padding",s.virtualScroll),g(2),ct("scrollable-content",s.virtualScroll&&s.items.length),g(3),Re(8,s.footerTemplate?8:-1))},dependencies:[jr],encapsulation:2,changeDetection:0});let t=e;return t})(),MT=(()=>{let e=class e{constructor(i){this.elementRef=i,this.disabled=!1,this.stateChange$=new lt}get label(){return(this.elementRef.nativeElement.textContent||"").trim()}ngOnChanges(i){i.disabled&&this.stateChange$.next({value:this.value,disabled:this.disabled})}ngAfterViewChecked(){this.label!==this._previousLabel&&(this._previousLabel=this.label,this.stateChange$.next({value:this.value,disabled:this.disabled,label:this.elementRef.nativeElement.innerHTML}))}ngOnDestroy(){this.stateChange$.complete()}};e.\u0275fac=function(r){return new(r||e)($(Be))},e.\u0275cmp=se({type:e,selectors:[["ng-option"]],inputs:{value:"value",disabled:[ge.HasDecoratorInputTransform,"disabled","disabled",Le]},features:[io,Nt],ngContentSelectors:Vv,decls:1,vars:0,template:function(r,s){r&1&&(Br(),Hr(0))},encapsulation:2,changeDetection:0});let t=e;return t})(),IT=(()=>{let e=class e{constructor(){this.notFoundText="No items found",this.typeToSearchText="Type to search",this.addTagText="Add item",this.loadingText="Loading...",this.clearAllText="Clear all",this.disableVirtualScroll=!0,this.openOnEnter=!0,this.appearance="underline"}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),ET=(()=>{let e=class e{warn(i){console.warn(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),Gv=new ke("ng-select-selection-model"),jv=(()=>{let e=class e{get items(){return this._items}set items(i){this._itemsAreUsed=!0,this._items=i??[]}get compareWith(){return this._compareWith}set compareWith(i){if(i!=null&&!sc(i))throw Error("`compareWith` must be a function.");this._compareWith=i}get clearSearchOnAdd(){return Ne(this._clearSearchOnAdd)?this._clearSearchOnAdd:Ne(this.config.clearSearchOnAdd)?this.config.clearSearchOnAdd:this.closeOnSelect}set clearSearchOnAdd(i){this._clearSearchOnAdd=i}get deselectOnClick(){return Ne(this._deselectOnClick)?this._deselectOnClick:Ne(this.config.deselectOnClick)?this.config.deselectOnClick:this.multiple}set deselectOnClick(i){this._deselectOnClick=i}get disabled(){return this.readonly||this._disabled}get filtered(){return!!this.searchTerm&&this.searchable||this._isComposing}get single(){return!this.multiple}get _editableSearchTerm(){return this.editableSearchTerm&&!this.multiple}constructor(i,r,s,o,a,l,d){this.classes=i,this.autoFocus=r,this.config=s,this._cd=l,this._console=d,this.markFirst=!0,this.dropdownPosition="auto",this.loading=!1,this.closeOnSelect=!0,this.hideSelected=!1,this.selectOnTab=!1,this.bufferAmount=4,this.selectableGroup=!1,this.selectableGroupAsModel=!0,this.searchFn=null,this.trackByFn=null,this.clearOnBackspace=!0,this.labelForId=null,this.inputAttrs={},this.readonly=!1,this.searchWhileComposing=!0,this.minTermLength=0,this.editableSearchTerm=!1,this.keyDownFn=h=>!0,this.multiple=!1,this.addTag=!1,this.searchable=!0,this.clearable=!0,this.isOpen=!1,this.blurEvent=new Y,this.focusEvent=new Y,this.changeEvent=new Y,this.openEvent=new Y,this.closeEvent=new Y,this.searchEvent=new Y,this.clearEvent=new Y,this.addEvent=new Y,this.removeEvent=new Y,this.scroll=new Y,this.scrollToEnd=new Y,this.useDefaultClass=!0,this.viewPortItems=[],this.searchTerm=null,this.dropdownId=Hv(),this.escapeHTML=!0,this._items=[],this._defaultLabel="label",this._pressedKeys=[],this._isComposing=!1,this._destroy$=new lt,this._keyPress$=new lt,this._onChange=h=>{},this._onTouched=()=>{},this.clearItem=h=>{let p=this.selectedItems.find(m=>m.value===h);this.unselect(p)},this.trackByOption=(h,p)=>this.trackByFn?this.trackByFn(p.value):p,this._mergeGlobalConfig(s),this.itemsList=new qh(this,o()),this.element=a.nativeElement}get selectedItems(){return this.itemsList.selectedItems}get selectedValues(){return this.selectedItems.map(i=>i.value)}get hasValue(){return this.selectedItems.length>0}get currentPanelPosition(){if(this.dropdownPanel)return this.dropdownPanel.currentPosition}ngOnInit(){this._handleKeyPresses(),this._setInputAttributes()}ngOnChanges(i){i.multiple&&this.itemsList.clearSelected(),i.items&&this._setItems(i.items.currentValue||[]),i.isOpen&&(this._manualOpen=Ne(i.isOpen.currentValue))}ngAfterViewInit(){this._itemsAreUsed||(this.escapeHTML=!1,this._setItemsFromNgOptions()),Ne(this.autoFocus)&&this.focus()}ngOnDestroy(){this._destroy$.next(),this._destroy$.complete()}handleKeyDown(i){if(Qi[i.which]){if(this.keyDownFn(i)===!1)return;this.handleKeyCode(i)}else i.key&&i.key.length===1&&this._keyPress$.next(i.key.toLocaleLowerCase())}handleKeyCode(i){let r=i.target;this.clearButton&&this.clearButton.nativeElement===r?this.handleKeyCodeClear(i):this.handleKeyCodeInput(i)}handleKeyCodeInput(i){switch(i.which){case Qi.ArrowDown:this._handleArrowDown(i);break;case Qi.ArrowUp:this._handleArrowUp(i);break;case Qi.Space:this._handleSpace(i);break;case Qi.Enter:this._handleEnter(i);break;case Qi.Tab:this._handleTab(i);break;case Qi.Esc:this.close(),i.preventDefault();break;case Qi.Backspace:this._handleBackspace();break}}handleKeyCodeClear(i){switch(i.which){case Qi.Enter:this.handleClearClick(),i.preventDefault();break}}handleMousedown(i){let r=i.target;if(r.tagName!=="INPUT"&&i.preventDefault(),r.classList.contains("ng-clear-wrapper")){this.handleClearClick();return}if(r.classList.contains("ng-arrow-wrapper")){this.handleArrowClick();return}r.classList.contains("ng-value-icon")||(this.focused||this.focus(),this.searchable?this.open():this.toggle())}handleArrowClick(){this.isOpen?this.close():this.open()}handleClearClick(){this.hasValue&&(this.itemsList.clearSelected(!0),this._updateNgModel()),this._clearSearch(),this.focus(),this.clearEvent.emit(),this._onSelectionChanged()}clearModel(){this.clearable&&(this.itemsList.clearSelected(),this._updateNgModel())}writeValue(i){this.itemsList.clearSelected(),this._handleWriteValue(i),this._cd.markForCheck()}registerOnChange(i){this._onChange=i}registerOnTouched(i){this._onTouched=i}setDisabledState(i){this._disabled=i,this._cd.markForCheck()}toggle(){this.isOpen?this.close():this.open()}open(){this.disabled||this.isOpen||this._manualOpen||!this._isTypeahead&&!this.addTag&&this.itemsList.noItemsToSelect||(this.isOpen=!0,this.itemsList.markSelectedOrDefault(this.markFirst),this.openEvent.emit(),this.searchTerm||this.focus(),this.detectChanges())}close(){!this.isOpen||this._manualOpen||(this.isOpen=!1,this._isComposing=!1,this._editableSearchTerm?this.itemsList.resetFilteredItems():this._clearSearch(),this.itemsList.unmarkItem(),this._onTouched(),this.closeEvent.emit(),this._cd.markForCheck())}toggleItem(i){!i||i.disabled||this.disabled||(this.deselectOnClick&&i.selected?this.unselect(i):this.select(i),this._editableSearchTerm&&this._setSearchTermFromItems(),this._onSelectionChanged())}select(i){i.selected||(this.itemsList.select(i),this.clearSearchOnAdd&&!this._editableSearchTerm&&this._clearSearch(),this._updateNgModel(),this.multiple&&this.addEvent.emit(i.value)),(this.closeOnSelect||this.itemsList.noItemsToSelect)&&this.close()}focus(){this.searchInput.nativeElement.focus()}blur(){this.searchInput.nativeElement.blur()}unselect(i){i&&(this.itemsList.unselect(i),this.focus(),this._updateNgModel(),this.removeEvent.emit(i.value))}selectTag(){let i;sc(this.addTag)?i=this.addTag(this.searchTerm):i=this._primitive?this.searchTerm:{[this.bindLabel]:this.searchTerm};let r=s=>this._isTypeahead||!this.isOpen?this.itemsList.mapItem(s,null):this.itemsList.addItem(s);uT(i)?i.then(s=>this.select(r(s))).catch(()=>{}):i&&this.select(r(i))}showClear(){return this.clearable&&(this.hasValue||this.searchTerm)&&!this.disabled}focusOnClear(){this.blur(),this.clearButton&&this.clearButton.nativeElement.focus()}get showAddTag(){if(!this._validTerm)return!1;let i=this.searchTerm.toLowerCase().trim();return this.addTag&&!this.itemsList.filteredItems.some(r=>r.label.toLowerCase()===i)&&(!this.hideSelected&&this.isOpen||!this.selectedItems.some(r=>r.label.toLowerCase()===i))&&!this.loading}showNoItemsFound(){let i=this.itemsList.filteredItems.length===0;return(i&&!this._isTypeahead&&!this.loading||i&&this._isTypeahead&&this._validTerm&&!this.loading)&&!this.showAddTag}showTypeToSearch(){return this.itemsList.filteredItems.length===0&&this._isTypeahead&&!this._validTerm&&!this.loading}onCompositionStart(){this._isComposing=!0}onCompositionEnd(i){this._isComposing=!1,!this.searchWhileComposing&&this.filter(i)}filter(i){this._isComposing&&!this.searchWhileComposing||(this.searchTerm=i,this._isTypeahead&&(this._validTerm||this.minTermLength===0)&&this.typeahead.next(i),this._isTypeahead||(this.itemsList.filter(this.searchTerm),this.isOpen&&this.itemsList.markSelectedOrDefault(this.markFirst)),this.searchEvent.emit({term:i,items:this.itemsList.filteredItems.map(r=>r.value)}),this.open())}onInputFocus(i){this.focused||(this._editableSearchTerm&&this._setSearchTermFromItems(),this.element.classList.add("ng-select-focused"),this.focusEvent.emit(i),this.focused=!0)}onInputBlur(i){this.element.classList.remove("ng-select-focused"),this.blurEvent.emit(i),!this.isOpen&&!this.disabled&&this._onTouched(),this._editableSearchTerm&&this._setSearchTermFromItems(),this.focused=!1}onItemHover(i){i.disabled||this.itemsList.markItem(i)}detectChanges(){this._cd.destroyed||this._cd.detectChanges()}_setSearchTermFromItems(){let i=this.selectedItems&&this.selectedItems[0];this.searchTerm=i&&i.label||null}_setItems(i){let r=i[0];this.bindLabel=this.bindLabel||this._defaultLabel,this._primitive=Ne(r)?!Xo(r):this._primitive||this.bindLabel===this._defaultLabel,this.itemsList.setItems(i),i.length>0&&this.hasValue&&this.itemsList.mapSelectedItems(),this.isOpen&&Ne(this.searchTerm)&&!this._isTypeahead&&this.itemsList.filter(this.searchTerm),(this._isTypeahead||this.isOpen)&&this.itemsList.markSelectedOrDefault(this.markFirst)}_setItemsFromNgOptions(){let i=s=>{this.items=s.map(o=>({$ngOptionValue:o.value,$ngOptionLabel:o.elementRef.nativeElement.innerHTML,disabled:o.disabled})),this.itemsList.setItems(this.items),this.hasValue&&this.itemsList.mapSelectedItems(),this.detectChanges()},r=()=>{let s=kr(this.ngOptions.changes,this._destroy$);kr(...this.ngOptions.map(o=>o.stateChange$)).pipe(Ze(s)).subscribe(o=>{let a=this.itemsList.findItem(o.value);a.disabled=o.disabled,a.label=o.label||a.label,this._cd.detectChanges()})};this.ngOptions.changes.pipe(Qs(this.ngOptions),Ze(this._destroy$)).subscribe(s=>{this.bindLabel=this._defaultLabel,i(s),r()})}_isValidWriteValue(i){if(!Ne(i)||this.multiple&&i===""||Array.isArray(i)&&i.length===0)return!1;let r=s=>!Ne(this.compareWith)&&Xo(s)&&this.bindValue?(this._console.warn(`Setting object(${JSON.stringify(s)}) as your model with bindValue is not allowed unless [compareWith] is used.`),!1):!0;return this.multiple?Array.isArray(i)?i.every(s=>r(s)):(this._console.warn("Multiple select ngModel should be array."),!1):r(i)}_handleWriteValue(i){if(!this._isValidWriteValue(i))return;let r=s=>{let o=this.itemsList.findItem(s);if(o)this.itemsList.select(o);else{let a=Xo(s),l=!a&&!this.bindValue;a||l?this.itemsList.select(this.itemsList.mapItem(s,null)):this.bindValue&&(o={[this.bindLabel]:null,[this.bindValue]:s},this.itemsList.select(this.itemsList.mapItem(o,null)))}};this.multiple?i.forEach(s=>r(s)):r(i)}_handleKeyPresses(){this.searchable||this._keyPress$.pipe(Ze(this._destroy$),Ke(i=>this._pressedKeys.push(i)),Lp(200),_t(()=>this._pressedKeys.length>0),oe(()=>this._pressedKeys.join(""))).subscribe(i=>{let r=this.itemsList.findByLabel(i);r&&(this.isOpen?(this.itemsList.markItem(r),this._scrollToMarked(),this._cd.markForCheck()):this.select(r)),this._pressedKeys=[]})}_setInputAttributes(){let i=this.searchInput.nativeElement,r=I({type:"text",autocorrect:"off",autocapitalize:"off",autocomplete:this.labelForId?"off":this.dropdownId},this.inputAttrs);for(let s of Object.keys(r))i.setAttribute(s,r[s])}_updateNgModel(){let i=[];for(let s of this.selectedItems)if(this.bindValue){let o=null;if(s.children){let a=this.groupValue?this.bindValue:this.groupBy;o=s.value[a||this.groupBy]}else o=this.itemsList.resolveNested(s.value,this.bindValue);i.push(o)}else i.push(s.value);let r=this.selectedItems.map(s=>s.value);this.multiple?(this._onChange(i),this.changeEvent.emit(r)):(this._onChange(Ne(i[0])?i[0]:null),this.changeEvent.emit(r[0])),this._cd.markForCheck()}_clearSearch(){this.searchTerm&&(this._changeSearch(null),this.itemsList.resetFilteredItems())}_changeSearch(i){this.searchTerm=i,this._isTypeahead&&this.typeahead.next(i)}_scrollToMarked(){!this.isOpen||!this.dropdownPanel||this.dropdownPanel.scrollTo(this.itemsList.markedItem)}_scrollToTag(){!this.isOpen||!this.dropdownPanel||this.dropdownPanel.scrollToTag()}_onSelectionChanged(){this.isOpen&&this.deselectOnClick&&this.appendTo&&(this._cd.detectChanges(),this.dropdownPanel.adjustPosition())}_handleTab(i){if(this.isOpen===!1){if(this.showClear()&&!i.shiftKey)this.focusOnClear(),i.preventDefault();else if(!this.addTag)return}this.selectOnTab?this.itemsList.markedItem?(this.toggleItem(this.itemsList.markedItem),i.preventDefault()):this.showAddTag?(this.selectTag(),i.preventDefault()):this.close():this.close()}_handleEnter(i){if(this.isOpen||this._manualOpen)this.itemsList.markedItem?this.toggleItem(this.itemsList.markedItem):this.showAddTag&&this.selectTag();else if(this.openOnEnter)this.open();else return;i.preventDefault()}_handleSpace(i){this.isOpen||this._manualOpen||(this.open(),i.preventDefault())}_handleArrowDown(i){this._nextItemIsTag(1)?(this.itemsList.unmarkItem(),this._scrollToTag()):(this.itemsList.markNextItem(),this._scrollToMarked()),this.open(),i.preventDefault()}_handleArrowUp(i){this.isOpen&&(this._nextItemIsTag(-1)?(this.itemsList.unmarkItem(),this._scrollToTag()):(this.itemsList.markPreviousItem(),this._scrollToMarked()),i.preventDefault())}_nextItemIsTag(i){let r=this.itemsList.markedIndex+i;return this.addTag&&this.searchTerm&&this.itemsList.markedItem&&(r<0||r===this.itemsList.filteredItems.length)}_handleBackspace(){this.searchTerm||!this.clearable||!this.clearOnBackspace||!this.hasValue||(this.multiple?this.unselect(this.itemsList.lastSelectedItem):this.clearModel())}get _isTypeahead(){return this.typeahead&&this.typeahead.observers.length>0}get _validTerm(){let i=this.searchTerm&&this.searchTerm.trim();return i&&i.length>=this.minTermLength}_mergeGlobalConfig(i){this.placeholder=this.placeholder||i.placeholder,this.notFoundText=this.notFoundText||i.notFoundText,this.typeToSearchText=this.typeToSearchText||i.typeToSearchText,this.addTagText=this.addTagText||i.addTagText,this.loadingText=this.loadingText||i.loadingText,this.clearAllText=this.clearAllText||i.clearAllText,this.virtualScroll=Ne(this.virtualScroll)?this.virtualScroll:Ne(i.disableVirtualScroll)?!i.disableVirtualScroll:!1,this.openOnEnter=Ne(this.openOnEnter)?this.openOnEnter:i.openOnEnter,this.appendTo=this.appendTo||i.appendTo,this.bindValue=this.bindValue||i.bindValue,this.bindLabel=this.bindLabel||i.bindLabel,this.appearance=this.appearance||i.appearance}};e.\u0275fac=function(r){return new(r||e)(eo("class"),eo("autofocus"),$(IT),$(Gv),$(Be),$(kt),$(ET))},e.\u0275cmp=se({type:e,selectors:[["ng-select"]],contentQueries:function(r,s,o){if(r&1&&(Dt(o,pT,5,Ee),Dt(o,mT,5,Ee),Dt(o,fT,5,Ee),Dt(o,gT,5,Ee),Dt(o,_T,5,Ee),Dt(o,yT,5,Ee),Dt(o,vT,5,Ee),Dt(o,bT,5,Ee),Dt(o,wT,5,Ee),Dt(o,CT,5,Ee),Dt(o,ST,5,Ee),Dt(o,MT,5)),r&2){let a;ye(a=ve())&&(s.optionTemplate=a.first),ye(a=ve())&&(s.optgroupTemplate=a.first),ye(a=ve())&&(s.labelTemplate=a.first),ye(a=ve())&&(s.multiLabelTemplate=a.first),ye(a=ve())&&(s.headerTemplate=a.first),ye(a=ve())&&(s.footerTemplate=a.first),ye(a=ve())&&(s.notFoundTemplate=a.first),ye(a=ve())&&(s.typeToSearchTemplate=a.first),ye(a=ve())&&(s.loadingTextTemplate=a.first),ye(a=ve())&&(s.tagTemplate=a.first),ye(a=ve())&&(s.loadingSpinnerTemplate=a.first),ye(a=ve())&&(s.ngOptions=a)}},viewQuery:function(r,s){if(r&1&&(Tt(Nv,5),Tt(kD,7),Tt(RD,5)),r&2){let o;ye(o=ve())&&(s.dropdownPanel=o.first),ye(o=ve())&&(s.searchInput=o.first),ye(o=ve())&&(s.clearButton=o.first)}},hostVars:20,hostBindings:function(r,s){r&1&&k("keydown",function(a){return s.handleKeyDown(a)}),r&2&&ct("ng-select-typeahead",s.typeahead)("ng-select-multiple",s.multiple)("ng-select-taggable",s.addTag)("ng-select-searchable",s.searchable)("ng-select-clearable",s.clearable)("ng-select-opened",s.isOpen)("ng-select",s.useDefaultClass)("ng-select-disabled",s.disabled)("ng-select-filtered",s.filtered)("ng-select-single",s.single)},inputs:{bindLabel:"bindLabel",bindValue:"bindValue",markFirst:[ge.HasDecoratorInputTransform,"markFirst","markFirst",Le],placeholder:"placeholder",notFoundText:"notFoundText",typeToSearchText:"typeToSearchText",addTagText:"addTagText",loadingText:"loadingText",clearAllText:"clearAllText",appearance:"appearance",dropdownPosition:"dropdownPosition",appendTo:"appendTo",loading:[ge.HasDecoratorInputTransform,"loading","loading",Le],closeOnSelect:[ge.HasDecoratorInputTransform,"closeOnSelect","closeOnSelect",Le],hideSelected:[ge.HasDecoratorInputTransform,"hideSelected","hideSelected",Le],selectOnTab:[ge.HasDecoratorInputTransform,"selectOnTab","selectOnTab",Le],openOnEnter:[ge.HasDecoratorInputTransform,"openOnEnter","openOnEnter",Le],maxSelectedItems:[ge.HasDecoratorInputTransform,"maxSelectedItems","maxSelectedItems",no],groupBy:"groupBy",groupValue:"groupValue",bufferAmount:[ge.HasDecoratorInputTransform,"bufferAmount","bufferAmount",no],virtualScroll:[ge.HasDecoratorInputTransform,"virtualScroll","virtualScroll",Le],selectableGroup:[ge.HasDecoratorInputTransform,"selectableGroup","selectableGroup",Le],selectableGroupAsModel:[ge.HasDecoratorInputTransform,"selectableGroupAsModel","selectableGroupAsModel",Le],searchFn:"searchFn",trackByFn:"trackByFn",clearOnBackspace:[ge.HasDecoratorInputTransform,"clearOnBackspace","clearOnBackspace",Le],labelForId:"labelForId",inputAttrs:"inputAttrs",tabIndex:[ge.HasDecoratorInputTransform,"tabIndex","tabIndex",no],readonly:[ge.HasDecoratorInputTransform,"readonly","readonly",Le],searchWhileComposing:[ge.HasDecoratorInputTransform,"searchWhileComposing","searchWhileComposing",Le],minTermLength:[ge.HasDecoratorInputTransform,"minTermLength","minTermLength",no],editableSearchTerm:[ge.HasDecoratorInputTransform,"editableSearchTerm","editableSearchTerm",Le],keyDownFn:"keyDownFn",typeahead:"typeahead",multiple:[ge.HasDecoratorInputTransform,"multiple","multiple",Le],addTag:"addTag",searchable:[ge.HasDecoratorInputTransform,"searchable","searchable",Le],clearable:[ge.HasDecoratorInputTransform,"clearable","clearable",Le],isOpen:[ge.HasDecoratorInputTransform,"isOpen","isOpen",Le],items:"items",compareWith:"compareWith",clearSearchOnAdd:"clearSearchOnAdd",deselectOnClick:"deselectOnClick"},outputs:{blurEvent:"blur",focusEvent:"focus",changeEvent:"change",openEvent:"open",closeEvent:"close",searchEvent:"search",clearEvent:"clear",addEvent:"add",removeEvent:"remove",scroll:"scroll",scrollToEnd:"scrollToEnd"},features:[ii([{provide:Ei,useExisting:qt(()=>e),multi:!0},zv]),io,Nt],decls:14,vars:19,consts:[["searchInput",""],["defaultLabelTemplate",""],["defaultLoadingSpinnerTemplate",""],["clearButton",""],["defaultOptionTemplate",""],["defaultTagTemplate",""],["defaultNotFoundTemplate",""],["defaultTypeToSearchTemplate",""],["defaultLoadingTextTemplate",""],[1,"ng-select-container",3,"mousedown"],[1,"ng-value-container"],[1,"ng-placeholder"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["role","combobox","aria-haspopup","listbox",1,"ng-input"],["aria-autocomplete","list",3,"input","compositionstart","compositionend","focus","blur","change","readOnly","disabled","value"],["tabindex","0",1,"ng-clear-wrapper",3,"title"],[1,"ng-arrow-wrapper"],[1,"ng-arrow"],["role","listbox","aria-label","Options list",1,"ng-dropdown-panel",3,"virtualScroll","bufferAmount","appendTo","position","headerTemplate","footerTemplate","filterValue","items","markedItem","ng-select-multiple","ngClass","id"],[1,"ng-value",3,"ng-value-disabled"],[1,"ng-value"],["aria-hidden","true",1,"ng-value-icon","left",3,"click"],[1,"ng-value-label",3,"ngItemLabel","escape"],[3,"ngTemplateOutlet"],[1,"ng-spinner-loader"],["aria-hidden","true",1,"ng-clear"],["role","listbox","aria-label","Options list",1,"ng-dropdown-panel",3,"update","scroll","scrollToEnd","outsideClick","virtualScroll","bufferAmount","appendTo","position","headerTemplate","footerTemplate","filterValue","items","markedItem","ngClass","id"],[1,"ng-option",3,"ng-option-disabled","ng-option-selected","ng-optgroup","ng-option","ng-option-child","ng-option-marked"],["role","option",1,"ng-option",3,"ng-option-marked"],[1,"ng-option",3,"click","mouseover"],[1,"ng-option-label",3,"ngItemLabel","escape"],["role","option",1,"ng-option",3,"mouseover","click"],[1,"ng-tag-label"],[1,"ng-option","ng-option-disabled"]],template:function(r,s){if(r&1){let o=_e();v(0,"div",9),k("mousedown",function(l){return L(o),N(s.handleMousedown(l))}),v(1,"div",10)(2,"div",11),j(3),b(),q(4,BD,2,0)(5,zD,1,5,null,12),v(6,"div",13)(7,"input",14,0),k("input",function(){L(o);let l=Ae(8);return N(s.filter(l.value))})("compositionstart",function(){return L(o),N(s.onCompositionStart())})("compositionend",function(){L(o);let l=Ae(8);return N(s.onCompositionEnd(l.value))})("focus",function(l){return L(o),N(s.onInputFocus(l))})("blur",function(l){return L(o),N(s.onInputBlur(l))})("change",function(l){return L(o),N(l.stopPropagation())}),b()()(),q(9,$D,3,1)(10,UD,4,1,"span",15),v(11,"span",16),G(12,"span",17),b()(),q(13,aT,8,17,"ng-dropdown-panel",18)}r&2&&(ct("ng-appearance-outline",s.appearance==="outline")("ng-has-value",s.hasValue),g(3),fe(s.placeholder),g(),Re(4,(!s.multiLabelTemplate||!s.multiple)&&s.selectedItems.length>0?4:-1),g(),Re(5,s.multiple&&s.multiLabelTemplate&&s.selectedValues.length>0?5:-1),g(),_i("aria-expanded",s.isOpen)("aria-owns",s.isOpen?s.dropdownId:null),g(),C("readOnly",!s.searchable||s.itemsList.maxItemsSelected)("disabled",s.disabled)("value",s.searchTerm?s.searchTerm:""),_i("id",s.labelForId)("tabindex",s.tabIndex)("aria-activedescendant",s.isOpen?s.itemsList==null||s.itemsList.markedItem==null?null:s.itemsList.markedItem.htmlId:null)("aria-controls",s.isOpen?s.dropdownId:null),g(2),Re(9,s.loading?9:-1),g(),Re(10,s.showClear()?10:-1),g(3),Re(13,s.isOpen?13:-1))},dependencies:[ni,jr,Nv,hT],styles:[`@charset "UTF-8";.ng-select{position:relative;display:block;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.ng-select div,.ng-select input,.ng-select span{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.ng-select [hidden]{display:none}.ng-select.ng-select-searchable .ng-select-container .ng-value-container .ng-input{opacity:1}.ng-select.ng-select-opened .ng-select-container{z-index:1001}.ng-select.ng-select-disabled .ng-select-container .ng-value-container .ng-placeholder,.ng-select.ng-select-disabled .ng-select-container .ng-value-container .ng-value{-webkit-user-select:none;user-select:none;cursor:default}.ng-select.ng-select-disabled .ng-arrow-wrapper{cursor:default}.ng-select.ng-select-filtered .ng-placeholder{display:none}.ng-select .ng-select-container{cursor:default;display:flex;outline:none;overflow:hidden;position:relative;width:100%}.ng-select .ng-select-container .ng-value-container{display:flex;flex:1}.ng-select .ng-select-container .ng-value-container .ng-input{opacity:0}.ng-select .ng-select-container .ng-value-container .ng-input>input{box-sizing:content-box;background:none transparent;border:0 none;box-shadow:none;outline:none;padding:0;cursor:default;width:100%}.ng-select .ng-select-container .ng-value-container .ng-input>input::-ms-clear{display:none}.ng-select .ng-select-container .ng-value-container .ng-input>input[readonly]{-webkit-user-select:none;user-select:none;width:0;padding:0}.ng-select.ng-select-single.ng-select-filtered .ng-select-container .ng-value-container .ng-value{visibility:hidden}.ng-select.ng-select-single .ng-select-container .ng-value-container,.ng-select.ng-select-single .ng-select-container .ng-value-container .ng-value{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ng-select.ng-select-single .ng-select-container .ng-value-container .ng-value .ng-value-icon{display:none}.ng-select.ng-select-single .ng-select-container .ng-value-container .ng-input{position:absolute;left:0;width:100%}.ng-select.ng-select-multiple.ng-select-disabled>.ng-select-container .ng-value-container .ng-value .ng-value-icon{display:none}.ng-select.ng-select-multiple .ng-select-container .ng-value-container{flex-wrap:wrap}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-placeholder{position:absolute}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-value{white-space:nowrap}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-value.ng-value-disabled .ng-value-icon{display:none}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-value .ng-value-icon{cursor:pointer}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-input{flex:1;z-index:2}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-placeholder{z-index:1}.ng-select .ng-clear-wrapper{cursor:pointer;position:relative;width:17px;-webkit-user-select:none;user-select:none}.ng-select .ng-clear-wrapper .ng-clear{display:inline-block;font-size:18px;line-height:1;pointer-events:none}.ng-select .ng-spinner-loader{border-radius:50%;width:17px;height:17px;margin-right:5px;font-size:10px;position:relative;text-indent:-9999em;border-top:2px solid rgba(66,66,66,.2);border-right:2px solid rgba(66,66,66,.2);border-bottom:2px solid rgba(66,66,66,.2);border-left:2px solid #424242;transform:translateZ(0);animation:load8 .8s infinite linear}.ng-select .ng-spinner-loader:after{border-radius:50%;width:17px;height:17px}@-webkit-keyframes load8{0%{-webkit-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes load8{0%{-webkit-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.ng-select .ng-arrow-wrapper{cursor:pointer;position:relative;text-align:center;-webkit-user-select:none;user-select:none}.ng-select .ng-arrow-wrapper .ng-arrow{pointer-events:none;display:inline-block;height:0;width:0;position:relative}.ng-dropdown-panel{box-sizing:border-box;position:absolute;opacity:0;width:100%;z-index:1050;-webkit-overflow-scrolling:touch}.ng-dropdown-panel .ng-dropdown-panel-items{display:block;height:auto;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;max-height:240px;overflow-y:auto}.ng-dropdown-panel .ng-dropdown-panel-items .ng-optgroup{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ng-dropdown-panel .ng-dropdown-panel-items .ng-option{box-sizing:border-box;cursor:pointer;display:block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ng-dropdown-panel .ng-dropdown-panel-items .ng-option .ng-option-label:empty:before{content:"\\200b"}.ng-dropdown-panel .ng-dropdown-panel-items .ng-option .highlighted{font-weight:700;text-decoration:underline}.ng-dropdown-panel .ng-dropdown-panel-items .ng-option.disabled{cursor:default}.ng-dropdown-panel .scroll-host{overflow:hidden;overflow-y:auto;position:relative;display:block;-webkit-overflow-scrolling:touch}.ng-dropdown-panel .scrollable-content{top:0;left:0;width:100%;height:100%;position:absolute}.ng-dropdown-panel .total-padding{width:1px;opacity:0}
`],encapsulation:2,changeDetection:0});let t=e;return t})();function xT(){return new Yh}var Yh=class{constructor(){this._selected=[]}get value(){return this._selected}select(e,n,i){if(e.selected=!0,(!e.children||!n&&i)&&this._selected.push(e),n)if(e.parent){let r=e.parent.children.length,s=e.parent.children.filter(o=>o.selected).length;e.parent.selected=r===s}else e.children&&(this._setChildrenSelectedState(e.children,!0),this._removeChildren(e),i&&this._activeChildren(e)?this._selected=[...this._selected.filter(r=>r.parent!==e),e]:this._selected=[...this._selected,...e.children.filter(r=>!r.disabled)])}unselect(e,n){if(this._selected=this._selected.filter(i=>i!==e),e.selected=!1,n)if(e.parent&&e.parent.selected){let i=e.parent.children;this._removeParent(e.parent),this._removeChildren(e.parent),this._selected.push(...i.filter(r=>r!==e&&!r.disabled)),e.parent.selected=!1}else e.children&&(this._setChildrenSelectedState(e.children,!1),this._removeChildren(e))}clear(e){this._selected=e?this._selected.filter(n=>n.disabled):[]}_setChildrenSelectedState(e,n){for(let i of e)i.disabled||(i.selected=n)}_removeChildren(e){this._selected=[...this._selected.filter(n=>n.parent!==e),...e.children.filter(n=>n.parent===e&&n.disabled&&n.selected)]}_removeParent(e){this._selected=this._selected.filter(n=>n!==e)}_activeChildren(e){return e.children.every(n=>!n.disabled||n.selected)}},$v=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Zt({type:e}),e.\u0275inj=Yt({providers:[{provide:Gv,useValue:xT}],imports:[Te]});let t=e;return t})();function ta(t){t||(jp(ta),t=V(pa));let e=new vc(n=>t.onDestroy(n.next.bind(n)));return n=>n.pipe(Ze(e))}var it="top",bt="bottom",pt="right",ot="left",oc="auto",jn=[it,bt,pt,ot],mn="start",Cr="end",Uv="clippingParents",ac="viewport",Hs="popper",Wv="reference",Zh=jn.reduce(function(t,e){return t.concat([e+"-"+mn,e+"-"+Cr])},[]),lc=[].concat(jn,[oc]).reduce(function(t,e){return t.concat([e,e+"-"+mn,e+"-"+Cr])},[]),kT="beforeRead",RT="read",AT="afterRead",FT="beforeMain",PT="main",LT="afterMain",NT="beforeWrite",VT="write",BT="afterWrite",qv=[kT,RT,AT,FT,PT,LT,NT,VT,BT];function mt(t){return t?(t.nodeName||"").toLowerCase():null}function Fe(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function ui(t){var e=Fe(t).Element;return t instanceof e||t instanceof Element}function at(t){var e=Fe(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function zs(t){if(typeof ShadowRoot>"u")return!1;var e=Fe(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function HT(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var i=e.styles[n]||{},r=e.attributes[n]||{},s=e.elements[n];!at(s)||!mt(s)||(Object.assign(s.style,i),Object.keys(r).forEach(function(o){var a=r[o];a===!1?s.removeAttribute(o):s.setAttribute(o,a===!0?"":a)}))})}function zT(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(i){var r=e.elements[i],s=e.attributes[i]||{},o=Object.keys(e.styles.hasOwnProperty(i)?e.styles[i]:n[i]),a=o.reduce(function(l,d){return l[d]="",l},{});!at(r)||!mt(r)||(Object.assign(r.style,a),Object.keys(s).forEach(function(l){r.removeAttribute(l)}))})}}var Yv={name:"applyStyles",enabled:!0,phase:"write",fn:HT,effect:zT,requires:["computeStyles"]};function ft(t){return t.split("-")[0]}var xi=Math.max,Sr=Math.min,fn=Math.round;function Gs(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function ia(){return!/^((?!chrome|android).)*safari/i.test(Gs())}function hi(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var i=t.getBoundingClientRect(),r=1,s=1;e&&at(t)&&(r=t.offsetWidth>0&&fn(i.width)/t.offsetWidth||1,s=t.offsetHeight>0&&fn(i.height)/t.offsetHeight||1);var o=ui(t)?Fe(t):window,a=o.visualViewport,l=!ia()&&n,d=(i.left+(l&&a?a.offsetLeft:0))/r,h=(i.top+(l&&a?a.offsetTop:0))/s,p=i.width/r,m=i.height/s;return{width:p,height:m,top:h,right:d+p,bottom:h+m,left:d,x:d,y:h}}function Dr(t){var e=hi(t),n=t.offsetWidth,i=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:i}}function na(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&zs(n)){var i=e;do{if(i&&t.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function Ft(t){return Fe(t).getComputedStyle(t)}function Kh(t){return["table","td","th"].indexOf(mt(t))>=0}function wt(t){return((ui(t)?t.ownerDocument:t.document)||window.document).documentElement}function gn(t){return mt(t)==="html"?t:t.assignedSlot||t.parentNode||(zs(t)?t.host:null)||wt(t)}function Zv(t){return!at(t)||Ft(t).position==="fixed"?null:t.offsetParent}function GT(t){var e=/firefox/i.test(Gs()),n=/Trident/i.test(Gs());if(n&&at(t)){var i=Ft(t);if(i.position==="fixed")return null}var r=gn(t);for(zs(r)&&(r=r.host);at(r)&&["html","body"].indexOf(mt(r))<0;){var s=Ft(r);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return r;r=r.parentNode}return null}function Oi(t){for(var e=Fe(t),n=Zv(t);n&&Kh(n)&&Ft(n).position==="static";)n=Zv(n);return n&&(mt(n)==="html"||mt(n)==="body"&&Ft(n).position==="static")?e:n||GT(t)||e}function Tr(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Mr(t,e,n){return xi(t,Sr(e,n))}function Kv(t,e,n){var i=Mr(t,e,n);return i>n?n:i}function ra(){return{top:0,right:0,bottom:0,left:0}}function sa(t){return Object.assign({},ra(),t)}function oa(t,e){return e.reduce(function(n,i){return n[i]=t,n},{})}var jT=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,sa(typeof e!="number"?e:oa(e,jn))};function $T(t){var e,n=t.state,i=t.name,r=t.options,s=n.elements.arrow,o=n.modifiersData.popperOffsets,a=ft(n.placement),l=Tr(a),d=[ot,pt].indexOf(a)>=0,h=d?"height":"width";if(!(!s||!o)){var p=jT(r.padding,n),m=Dr(s),f=l==="y"?it:ot,w=l==="y"?bt:pt,M=n.rects.reference[h]+n.rects.reference[l]-o[l]-n.rects.popper[h],_=o[l]-n.rects.reference[l],S=Oi(s),O=S?l==="y"?S.clientHeight||0:S.clientWidth||0:0,B=M/2-_/2,x=p[f],F=O-m[h]-p[w],P=O/2-m[h]/2+B,X=Mr(x,P,F),ee=l;n.modifiersData[i]=(e={},e[ee]=X,e.centerOffset=X-P,e)}}function UT(t){var e=t.state,n=t.options,i=n.element,r=i===void 0?"[data-popper-arrow]":i;r!=null&&(typeof r=="string"&&(r=e.elements.popper.querySelector(r),!r)||na(e.elements.popper,r)&&(e.elements.arrow=r))}var Qh={name:"arrow",enabled:!0,phase:"main",fn:$T,effect:UT,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function pi(t){return t.split("-")[1]}var WT={top:"auto",right:"auto",bottom:"auto",left:"auto"};function qT(t,e){var n=t.x,i=t.y,r=e.devicePixelRatio||1;return{x:fn(n*r)/r||0,y:fn(i*r)/r||0}}function Qv(t){var e,n=t.popper,i=t.popperRect,r=t.placement,s=t.variation,o=t.offsets,a=t.position,l=t.gpuAcceleration,d=t.adaptive,h=t.roundOffsets,p=t.isFixed,m=o.x,f=m===void 0?0:m,w=o.y,M=w===void 0?0:w,_=typeof h=="function"?h({x:f,y:M}):{x:f,y:M};f=_.x,M=_.y;var S=o.hasOwnProperty("x"),O=o.hasOwnProperty("y"),B=ot,x=it,F=window;if(d){var P=Oi(n),X="clientHeight",ee="clientWidth";if(P===Fe(n)&&(P=wt(n),Ft(P).position!=="static"&&a==="absolute"&&(X="scrollHeight",ee="scrollWidth")),P=P,r===it||(r===ot||r===pt)&&s===Cr){x=bt;var he=p&&P===F&&F.visualViewport?F.visualViewport.height:P[X];M-=he-i.height,M*=l?1:-1}if(r===ot||(r===it||r===bt)&&s===Cr){B=pt;var me=p&&P===F&&F.visualViewport?F.visualViewport.width:P[ee];f-=me-i.width,f*=l?1:-1}}var Ie=Object.assign({position:a},d&&WT),$e=h===!0?qT({x:f,y:M},Fe(n)):{x:f,y:M};if(f=$e.x,M=$e.y,l){var Oe;return Object.assign({},Ie,(Oe={},Oe[x]=O?"0":"",Oe[B]=S?"0":"",Oe.transform=(F.devicePixelRatio||1)<=1?"translate("+f+"px, "+M+"px)":"translate3d("+f+"px, "+M+"px, 0)",Oe))}return Object.assign({},Ie,(e={},e[x]=O?M+"px":"",e[B]=S?f+"px":"",e.transform="",e))}function YT(t){var e=t.state,n=t.options,i=n.gpuAcceleration,r=i===void 0?!0:i,s=n.adaptive,o=s===void 0?!0:s,a=n.roundOffsets,l=a===void 0?!0:a,d={placement:ft(e.placement),variation:pi(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,Qv(Object.assign({},d,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,Qv(Object.assign({},d,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var Jv={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:YT,data:{}};var cc={passive:!0};function ZT(t){var e=t.state,n=t.instance,i=t.options,r=i.scroll,s=r===void 0?!0:r,o=i.resize,a=o===void 0?!0:o,l=Fe(e.elements.popper),d=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&d.forEach(function(h){h.addEventListener("scroll",n.update,cc)}),a&&l.addEventListener("resize",n.update,cc),function(){s&&d.forEach(function(h){h.removeEventListener("scroll",n.update,cc)}),a&&l.removeEventListener("resize",n.update,cc)}}var Xv={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:ZT,data:{}};var KT={left:"right",right:"left",bottom:"top",top:"bottom"};function js(t){return t.replace(/left|right|bottom|top/g,function(e){return KT[e]})}var QT={start:"end",end:"start"};function dc(t){return t.replace(/start|end/g,function(e){return QT[e]})}function Ir(t){var e=Fe(t),n=e.pageXOffset,i=e.pageYOffset;return{scrollLeft:n,scrollTop:i}}function Er(t){return hi(wt(t)).left+Ir(t).scrollLeft}function Jh(t,e){var n=Fe(t),i=wt(t),r=n.visualViewport,s=i.clientWidth,o=i.clientHeight,a=0,l=0;if(r){s=r.width,o=r.height;var d=ia();(d||!d&&e==="fixed")&&(a=r.offsetLeft,l=r.offsetTop)}return{width:s,height:o,x:a+Er(t),y:l}}function Xh(t){var e,n=wt(t),i=Ir(t),r=(e=t.ownerDocument)==null?void 0:e.body,s=xi(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),o=xi(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),a=-i.scrollLeft+Er(t),l=-i.scrollTop;return Ft(r||n).direction==="rtl"&&(a+=xi(n.clientWidth,r?r.clientWidth:0)-s),{width:s,height:o,x:a,y:l}}function xr(t){var e=Ft(t),n=e.overflow,i=e.overflowX,r=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+i)}function uc(t){return["html","body","#document"].indexOf(mt(t))>=0?t.ownerDocument.body:at(t)&&xr(t)?t:uc(gn(t))}function $n(t,e){var n;e===void 0&&(e=[]);var i=uc(t),r=i===((n=t.ownerDocument)==null?void 0:n.body),s=Fe(i),o=r?[s].concat(s.visualViewport||[],xr(i)?i:[]):i,a=e.concat(o);return r?a:a.concat($n(gn(o)))}function $s(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function JT(t,e){var n=hi(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function eb(t,e,n){return e===ac?$s(Jh(t,n)):ui(e)?JT(e,n):$s(Xh(wt(t)))}function XT(t){var e=$n(gn(t)),n=["absolute","fixed"].indexOf(Ft(t).position)>=0,i=n&&at(t)?Oi(t):t;return ui(i)?e.filter(function(r){return ui(r)&&na(r,i)&&mt(r)!=="body"}):[]}function ep(t,e,n,i){var r=e==="clippingParents"?XT(t):[].concat(e),s=[].concat(r,[n]),o=s[0],a=s.reduce(function(l,d){var h=eb(t,d,i);return l.top=xi(h.top,l.top),l.right=Sr(h.right,l.right),l.bottom=Sr(h.bottom,l.bottom),l.left=xi(h.left,l.left),l},eb(t,o,i));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function aa(t){var e=t.reference,n=t.element,i=t.placement,r=i?ft(i):null,s=i?pi(i):null,o=e.x+e.width/2-n.width/2,a=e.y+e.height/2-n.height/2,l;switch(r){case it:l={x:o,y:e.y-n.height};break;case bt:l={x:o,y:e.y+e.height};break;case pt:l={x:e.x+e.width,y:a};break;case ot:l={x:e.x-n.width,y:a};break;default:l={x:e.x,y:e.y}}var d=r?Tr(r):null;if(d!=null){var h=d==="y"?"height":"width";switch(s){case mn:l[d]=l[d]-(e[h]/2-n[h]/2);break;case Cr:l[d]=l[d]+(e[h]/2-n[h]/2);break;default:}}return l}function Un(t,e){e===void 0&&(e={});var n=e,i=n.placement,r=i===void 0?t.placement:i,s=n.strategy,o=s===void 0?t.strategy:s,a=n.boundary,l=a===void 0?Uv:a,d=n.rootBoundary,h=d===void 0?ac:d,p=n.elementContext,m=p===void 0?Hs:p,f=n.altBoundary,w=f===void 0?!1:f,M=n.padding,_=M===void 0?0:M,S=sa(typeof _!="number"?_:oa(_,jn)),O=m===Hs?Wv:Hs,B=t.rects.popper,x=t.elements[w?O:m],F=ep(ui(x)?x:x.contextElement||wt(t.elements.popper),l,h,o),P=hi(t.elements.reference),X=aa({reference:P,element:B,strategy:"absolute",placement:r}),ee=$s(Object.assign({},B,X)),he=m===Hs?ee:P,me={top:F.top-he.top+S.top,bottom:he.bottom-F.bottom+S.bottom,left:F.left-he.left+S.left,right:he.right-F.right+S.right},Ie=t.modifiersData.offset;if(m===Hs&&Ie){var $e=Ie[r];Object.keys(me).forEach(function(Oe){var qe=[pt,bt].indexOf(Oe)>=0?1:-1,nt=[it,bt].indexOf(Oe)>=0?"y":"x";me[Oe]+=$e[nt]*qe})}return me}function tp(t,e){e===void 0&&(e={});var n=e,i=n.placement,r=n.boundary,s=n.rootBoundary,o=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,d=l===void 0?lc:l,h=pi(i),p=h?a?Zh:Zh.filter(function(w){return pi(w)===h}):jn,m=p.filter(function(w){return d.indexOf(w)>=0});m.length===0&&(m=p);var f=m.reduce(function(w,M){return w[M]=Un(t,{placement:M,boundary:r,rootBoundary:s,padding:o})[ft(M)],w},{});return Object.keys(f).sort(function(w,M){return f[w]-f[M]})}function eM(t){if(ft(t)===oc)return[];var e=js(t);return[dc(t),e,dc(e)]}function tM(t){var e=t.state,n=t.options,i=t.name;if(!e.modifiersData[i]._skip){for(var r=n.mainAxis,s=r===void 0?!0:r,o=n.altAxis,a=o===void 0?!0:o,l=n.fallbackPlacements,d=n.padding,h=n.boundary,p=n.rootBoundary,m=n.altBoundary,f=n.flipVariations,w=f===void 0?!0:f,M=n.allowedAutoPlacements,_=e.options.placement,S=ft(_),O=S===_,B=l||(O||!w?[js(_)]:eM(_)),x=[_].concat(B).reduce(function(vn,Ri){return vn.concat(ft(Ri)===oc?tp(e,{placement:Ri,boundary:h,rootBoundary:p,padding:d,flipVariations:w,allowedAutoPlacements:M}):Ri)},[]),F=e.rects.reference,P=e.rects.popper,X=new Map,ee=!0,he=x[0],me=0;me<x.length;me++){var Ie=x[me],$e=ft(Ie),Oe=pi(Ie)===mn,qe=[it,bt].indexOf($e)>=0,nt=qe?"width":"height",Ye=Un(e,{placement:Ie,boundary:h,rootBoundary:p,altBoundary:m,padding:d}),gt=qe?Oe?pt:ot:Oe?bt:it;F[nt]>P[nt]&&(gt=js(gt));var mi=js(gt),ti=[];if(s&&ti.push(Ye[$e]<=0),a&&ti.push(Ye[gt]<=0,Ye[mi]<=0),ti.every(function(vn){return vn})){he=Ie,ee=!1;break}X.set(Ie,ti)}if(ee)for(var Ji=w?3:1,yn=function(Ri){var qs=x.find(function(la){var Wn=X.get(la);if(Wn)return Wn.slice(0,Ri).every(function(gc){return gc})});if(qs)return he=qs,"break"},Pt=Ji;Pt>0;Pt--){var fi=yn(Pt);if(fi==="break")break}e.placement!==he&&(e.modifiersData[i]._skip=!0,e.placement=he,e.reset=!0)}}var ip={name:"flip",enabled:!0,phase:"main",fn:tM,requiresIfExists:["offset"],data:{_skip:!1}};function iM(t,e,n){var i=ft(t),r=[ot,it].indexOf(i)>=0?-1:1,s=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,o=s[0],a=s[1];return o=o||0,a=(a||0)*r,[ot,pt].indexOf(i)>=0?{x:a,y:o}:{x:o,y:a}}function nM(t){var e=t.state,n=t.options,i=t.name,r=n.offset,s=r===void 0?[0,0]:r,o=lc.reduce(function(h,p){return h[p]=iM(p,e.rects,s),h},{}),a=o[e.placement],l=a.x,d=a.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=d),e.modifiersData[i]=o}var np={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:nM};function rM(t){var e=t.state,n=t.name;e.modifiersData[n]=aa({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var tb={name:"popperOffsets",enabled:!0,phase:"read",fn:rM,data:{}};function rp(t){return t==="x"?"y":"x"}function sM(t){var e=t.state,n=t.options,i=t.name,r=n.mainAxis,s=r===void 0?!0:r,o=n.altAxis,a=o===void 0?!1:o,l=n.boundary,d=n.rootBoundary,h=n.altBoundary,p=n.padding,m=n.tether,f=m===void 0?!0:m,w=n.tetherOffset,M=w===void 0?0:w,_=Un(e,{boundary:l,rootBoundary:d,padding:p,altBoundary:h}),S=ft(e.placement),O=pi(e.placement),B=!O,x=Tr(S),F=rp(x),P=e.modifiersData.popperOffsets,X=e.rects.reference,ee=e.rects.popper,he=typeof M=="function"?M(Object.assign({},e.rects,{placement:e.placement})):M,me=typeof he=="number"?{mainAxis:he,altAxis:he}:Object.assign({mainAxis:0,altAxis:0},he),Ie=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,$e={x:0,y:0};if(P){if(s){var Oe,qe=x==="y"?it:ot,nt=x==="y"?bt:pt,Ye=x==="y"?"height":"width",gt=P[x],mi=gt+_[qe],ti=gt-_[nt],Ji=f?-ee[Ye]/2:0,yn=O===mn?X[Ye]:ee[Ye],Pt=O===mn?-ee[Ye]:-X[Ye],fi=e.elements.arrow,vn=f&&fi?Dr(fi):{width:0,height:0},Ri=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:ra(),qs=Ri[qe],la=Ri[nt],Wn=Mr(0,X[Ye],vn[Ye]),gc=B?X[Ye]/2-Ji-Wn-qs-me.mainAxis:yn-Wn-qs-me.mainAxis,Db=B?-X[Ye]/2+Ji+Wn+la+me.mainAxis:Pt+Wn+la+me.mainAxis,_c=e.elements.arrow&&Oi(e.elements.arrow),Tb=_c?x==="y"?_c.clientTop||0:_c.clientLeft||0:0,yp=(Oe=Ie?.[x])!=null?Oe:0,Mb=gt+gc-yp-Tb,Ib=gt+Db-yp,vp=Mr(f?Sr(mi,Mb):mi,gt,f?xi(ti,Ib):ti);P[x]=vp,$e[x]=vp-gt}if(a){var bp,Eb=x==="x"?it:ot,xb=x==="x"?bt:pt,qn=P[F],ca=F==="y"?"height":"width",wp=qn+_[Eb],Cp=qn-_[xb],yc=[it,ot].indexOf(S)!==-1,Sp=(bp=Ie?.[F])!=null?bp:0,Dp=yc?wp:qn-X[ca]-ee[ca]-Sp+me.altAxis,Tp=yc?qn+X[ca]+ee[ca]-Sp-me.altAxis:Cp,Mp=f&&yc?Kv(Dp,qn,Tp):Mr(f?Dp:wp,qn,f?Tp:Cp);P[F]=Mp,$e[F]=Mp-qn}e.modifiersData[i]=$e}}var sp={name:"preventOverflow",enabled:!0,phase:"main",fn:sM,requiresIfExists:["offset"]};function op(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function ap(t){return t===Fe(t)||!at(t)?Ir(t):op(t)}function oM(t){var e=t.getBoundingClientRect(),n=fn(e.width)/t.offsetWidth||1,i=fn(e.height)/t.offsetHeight||1;return n!==1||i!==1}function lp(t,e,n){n===void 0&&(n=!1);var i=at(e),r=at(e)&&oM(e),s=wt(e),o=hi(t,r,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!n)&&((mt(e)!=="body"||xr(s))&&(a=ap(e)),at(e)?(l=hi(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):s&&(l.x=Er(s))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function aM(t){var e=new Map,n=new Set,i=[];t.forEach(function(s){e.set(s.name,s)});function r(s){n.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(a){if(!n.has(a)){var l=e.get(a);l&&r(l)}}),i.push(s)}return t.forEach(function(s){n.has(s.name)||r(s)}),i}function cp(t){var e=aM(t);return qv.reduce(function(n,i){return n.concat(e.filter(function(r){return r.phase===i}))},[])}function dp(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function up(t){var e=t.reduce(function(n,i){var r=n[i.name];return n[i.name]=r?Object.assign({},r,i,{options:Object.assign({},r.options,i.options),data:Object.assign({},r.data,i.data)}):i,n},{});return Object.keys(e).map(function(n){return e[n]})}var ib={placement:"bottom",modifiers:[],strategy:"absolute"};function nb(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function rb(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,i=n===void 0?[]:n,r=e.defaultOptions,s=r===void 0?ib:r;return function(a,l,d){d===void 0&&(d=s);var h={placement:"bottom",orderedModifiers:[],options:Object.assign({},ib,s),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},p=[],m=!1,f={state:h,setOptions:function(S){var O=typeof S=="function"?S(h.options):S;M(),h.options=Object.assign({},s,h.options,O),h.scrollParents={reference:ui(a)?$n(a):a.contextElement?$n(a.contextElement):[],popper:$n(l)};var B=cp(up([].concat(i,h.options.modifiers)));return h.orderedModifiers=B.filter(function(x){return x.enabled}),w(),f.update()},forceUpdate:function(){if(!m){var S=h.elements,O=S.reference,B=S.popper;if(nb(O,B)){h.rects={reference:lp(O,Oi(B),h.options.strategy==="fixed"),popper:Dr(B)},h.reset=!1,h.placement=h.options.placement,h.orderedModifiers.forEach(function(me){return h.modifiersData[me.name]=Object.assign({},me.data)});for(var x=0;x<h.orderedModifiers.length;x++){if(h.reset===!0){h.reset=!1,x=-1;continue}var F=h.orderedModifiers[x],P=F.fn,X=F.options,ee=X===void 0?{}:X,he=F.name;typeof P=="function"&&(h=P({state:h,options:ee,name:he,instance:f})||h)}}}},update:dp(function(){return new Promise(function(_){f.forceUpdate(),_(h)})}),destroy:function(){M(),m=!0}};if(!nb(a,l))return f;f.setOptions(d).then(function(_){!m&&d.onFirstUpdate&&d.onFirstUpdate(_)});function w(){h.orderedModifiers.forEach(function(_){var S=_.name,O=_.options,B=O===void 0?{}:O,x=_.effect;if(typeof x=="function"){var F=x({state:h,name:S,instance:f,options:B}),P=function(){};p.push(F||P)}})}function M(){p.forEach(function(_){return _()}),p=[]}return f}}var lM=[Xv,tb,Jv,Yv],hp=rb({defaultModifiers:lM});var cM=["ngbDatepickerDayView",""],dM=["month"],uM=["year"];function hM(t,e){if(t&1&&(v(0,"option",3),j(1),b()),t&2){let n=e.$implicit,i=T();C("value",n),_i("aria-label",i.i18n.getMonthFullName(n,i.date.year)),g(),fe(i.i18n.getMonthShortName(n,i.date.year))}}function pM(t,e){if(t&1&&(v(0,"option",3),j(1),b()),t&2){let n=e.$implicit,i=T();C("value",n),g(),fe(i.i18n.getYearNumerals(n))}}function mM(t,e){if(t&1){let n=_e();v(0,"ngb-datepicker-navigation-select",6),k("select",function(r){L(n);let s=T();return N(s.select.emit(r))}),b()}if(t&2){let n=T();C("date",n.date)("disabled",n.disabled)("months",n.selectBoxes.months)("years",n.selectBoxes.years)}}function fM(t,e){t&1&&G(0,"div",7)}function gM(t,e){t&1&&G(0,"div",7)}function _M(t,e){if(t&1&&(q(0,fM,1,0,"div",7),v(1,"div",8),j(2),b(),q(3,gM,1,0,"div",7)),t&2){let n=e.$implicit,i=e.$index,r=T(2);Re(0,i>0?0:-1),g(2),Sn(" ",r.i18n.getMonthLabel(n.firstDate)," "),g(),Re(3,i!==r.months.length-1?3:-1)}}function yM(t,e){if(t&1&&yi(0,_M,4,3,null,null,Qn),t&2){let n=T();vi(n.months)}}function vM(t,e){if(t&1&&(v(0,"div",1),j(1),b()),t&2){let n=T(2);g(),fe(n.i18n.getWeekLabel())}}function bM(t,e){if(t&1&&(v(0,"div",2),j(1),b()),t&2){let n=e.$implicit;g(),fe(n)}}function wM(t,e){if(t&1&&(v(0,"div",0),q(1,vM,2,1,"div",1),yi(2,bM,2,1,"div",2,am),b()),t&2){let n=T();g(),Re(1,n.datepicker.showWeekNumbers?1:-1),g(),vi(n.viewModel.weekdays)}}function CM(t,e){if(t&1&&(v(0,"div",4),j(1),b()),t&2){let n=T(2).$implicit,i=T();g(),fe(i.i18n.getWeekNumerals(n.number))}}function SM(t,e){}function DM(t,e){if(t&1&&q(0,SM,0,0,"ng-template",7),t&2){let n=T().$implicit,i=T(3);C("ngTemplateOutlet",i.datepicker.dayTemplate)("ngTemplateOutletContext",n.context)}}function TM(t,e){if(t&1){let n=_e();v(0,"div",6),k("click",function(r){let s=L(n).$implicit;return T(3).doSelect(s),N(r.preventDefault())}),q(1,DM,1,2,null,7),b()}if(t&2){let n=e.$implicit;ct("disabled",n.context.disabled)("hidden",n.hidden)("ngb-dp-today",n.context.today),C("tabindex",n.tabindex),_i("aria-label",n.ariaLabel),g(),Re(1,n.hidden?-1:1)}}function MM(t,e){if(t&1&&(v(0,"div",3),q(1,CM,2,1,"div",4),yi(2,TM,2,9,"div",5,Qn),b()),t&2){let n=T().$implicit,i=T();g(),Re(1,i.datepicker.showWeekNumbers?1:-1),g(),vi(n.days)}}function IM(t,e){if(t&1&&q(0,MM,4,1,"div",3),t&2){let n=e.$implicit;Re(0,n.collapsed?-1:0)}}var EM=["defaultDayTemplate"],xM=["content"],OM=t=>({$implicit:t});function kM(t,e){if(t&1&&G(0,"div",8),t&2){let n=e.date,i=e.currentMonth,r=e.selected,s=e.disabled,o=e.focused;C("date",n)("currentMonth",i)("selected",r)("disabled",s)("focused",o)}}function RM(t,e){if(t&1&&(v(0,"div",10),j(1),b()),t&2){let n=T().$implicit,i=T(2);g(),Sn(" ",i.i18n.getMonthLabel(n.firstDate)," ")}}function AM(t,e){if(t&1&&(v(0,"div",9),q(1,RM,2,1,"div",10),G(2,"ngb-datepicker-month",11),b()),t&2){let n=e.$implicit,i=T(2);g(),Re(1,i.navigation==="none"||i.displayMonths>1&&i.navigation==="select"?1:-1),g(),C("month",n.firstDate)}}function FM(t,e){if(t&1&&yi(0,AM,3,2,"div",9,Qn),t&2){let n=T();vi(n.model.months)}}function PM(t,e){if(t&1){let n=_e();v(0,"ngb-datepicker-navigation",12),k("navigate",function(r){L(n);let s=T();return N(s.onNavigateEvent(r))})("select",function(r){L(n);let s=T();return N(s.onNavigateDateSelect(r))}),b()}if(t&2){let n=T();C("date",n.model.firstDate)("months",n.model.months)("disabled",n.model.disabled)("showSelect",n.model.navigation==="select")("prevDisabled",n.model.prevDisabled)("nextDisabled",n.model.nextDisabled)("selectBoxes",n.model.selectBoxes)}}function LM(t,e){}function NM(t,e){}var VM={animation:!0,transitionTimerDelayMs:5};function ki(t){return parseInt(`${t}`,10)}function sb(t){return typeof t=="string"}function _n(t){return!isNaN(ki(t))}function $t(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t}function ob(t){return _n(t)?`0${t}`.slice(-2):""}function BM(t,e){return!e||typeof t.closest>"u"?null:t.closest(e)}var{transitionTimerDelayMs:fY}=VM;var Ct=class t{static from(e){return e instanceof t?e:e?new t(e.year,e.month,e.day):null}constructor(e,n,i){this.year=$t(e)?e:null,this.month=$t(n)?n:null,this.day=$t(i)?i:null}equals(e){return e!=null&&this.year===e.year&&this.month===e.month&&this.day===e.day}before(e){return e?this.year===e.year?this.month===e.month?this.day===e.day?!1:this.day<e.day:this.month<e.month:this.year<e.year:!1}after(e){return e?this.year===e.year?this.month===e.month?this.day===e.day?!1:this.day>e.day:this.month>e.month:this.year>e.year:!1}};function ab(t){return new Ct(t.getFullYear(),t.getMonth()+1,t.getDate())}function hc(t){let e=new Date(t.year,t.month-1,t.day,12);return isNaN(e.getTime())||e.setFullYear(t.year),e}function HM(){return new zM}var Ws=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:()=>HM(),providedIn:"root"});let t=e;return t})(),zM=(()=>{let e=class e extends Ws{getDaysPerWeek(){return 7}getMonths(){return[1,2,3,4,5,6,7,8,9,10,11,12]}getWeeksPerMonth(){return 6}getNext(i,r="d",s=1){let o=hc(i),a=!0,l=o.getMonth();switch(r){case"y":o.setFullYear(o.getFullYear()+s);break;case"m":l+=s,o.setMonth(l),l=l%12,l<0&&(l=l+12);break;case"d":o.setDate(o.getDate()+s),a=!1;break;default:return i}return a&&o.getMonth()!==l&&o.setDate(0),ab(o)}getPrev(i,r="d",s=1){return this.getNext(i,r,-s)}getWeekday(i){let s=hc(i).getDay();return s===0?7:s}getWeekNumber(i,r){r===7&&(r=0);let s=(11-r)%7,o=i[s],a=hc(o);a.setDate(a.getDate()+4-(a.getDay()||7));let l=a.getTime();return a.setMonth(0),a.setDate(1),Math.floor(Math.round((l-a.getTime())/864e5)/7)+1}getToday(){return ab(new Date)}isValid(i){if(!i||!$t(i.year)||!$t(i.month)||!$t(i.day)||i.year===0)return!1;let r=hc(i);return!isNaN(r.getTime())&&r.getFullYear()===i.year&&r.getMonth()+1===i.month&&r.getDate()===i.day}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=Kt(e)))(s||e)}})(),e.\u0275prov=Z({token:e,factory:e.\u0275fac});let t=e;return t})();function Us(t,e){return!GM(t,e)}function hb(t,e){return!t&&!e?!1:!t||!e?!0:t.year!==e.year||t.month!==e.month}function GM(t,e){return!t&&!e||!!t&&!!e&&t.equals(e)}function jM(t,e){if(e&&t&&e.before(t))throw new Error(`'maxDate' ${e} should be greater than 'minDate' ${t}`)}function pc(t,e,n){return t&&e&&t.before(e)?e:t&&n&&t.after(n)?n:t||null}function pp(t,e){let{minDate:n,maxDate:i,disabled:r,markDisabled:s}=e;return!(t==null||r||s&&s(t,{year:t.year,month:t.month})||n&&t.before(n)||i&&t.after(i))}function $M(t,e,n,i){if(!e)return[];let r=t.getMonths(e.year);if(n&&e.year===n.year){let s=r.findIndex(o=>o===n.month);r=r.slice(s)}if(i&&e.year===i.year){let s=r.findIndex(o=>o===i.month);r=r.slice(0,s+1)}return r}function UM(t,e,n){if(!t)return[];let i=e?Math.max(e.year,t.year-500):t.year-10,s=(n?Math.min(n.year,t.year+500):t.year+10)-i+1,o=Array(s);for(let a=0;a<s;a++)o[a]=i+a;return o}function WM(t,e,n){let i=Object.assign(t.getNext(e,"m"),{day:1});return n!=null&&i.after(n)}function qM(t,e,n){let i=Object.assign(t.getPrev(e,"m"),{day:1});return n!=null&&(i.year===n.year&&i.month<n.month||i.year<n.year&&n.month===1)}function YM(t,e,n,i,r){let{displayMonths:s,months:o}=n,a=o.splice(0,o.length);return Array.from({length:s},(d,h)=>{let p=Object.assign(t.getNext(e,"m",h),{day:1});if(o[h]=null,!r){let m=a.findIndex(f=>f.firstDate.equals(p));m!==-1&&(o[h]=a.splice(m,1)[0])}return p}).forEach((d,h)=>{o[h]===null&&(o[h]=ZM(t,d,n,i,a.shift()||{}))}),o}function ZM(t,e,n,i,r={}){let{dayTemplateData:s,minDate:o,maxDate:a,firstDayOfWeek:l,markDisabled:d,outsideDays:h,weekdayWidth:p,weekdaysVisible:m}=n,f=t.getToday();r.firstDate=null,r.lastDate=null,r.number=e.month,r.year=e.year,r.weeks=r.weeks||[],r.weekdays=r.weekdays||[],e=KM(t,e,l),m||(r.weekdays.length=0);for(let w=0;w<t.getWeeksPerMonth();w++){let M=r.weeks[w];M||(M=r.weeks[w]={number:0,days:[],collapsed:!0});let _=M.days;for(let S=0;S<t.getDaysPerWeek();S++){w===0&&m&&(r.weekdays[S]=i.getWeekdayLabel(t.getWeekday(e),p));let O=new Ct(e.year,e.month,e.day),B=t.getNext(O),x=i.getDayAriaLabel(O),F=!!(o&&O.before(o)||a&&O.after(a));!F&&d&&(F=d(O,{month:r.number,year:r.year}));let P=O.equals(f),X=s?s(O,{month:r.number,year:r.year}):void 0;r.firstDate===null&&O.month===r.number&&(r.firstDate=O),O.month===r.number&&B.month!==r.number&&(r.lastDate=O);let ee=_[S];ee||(ee=_[S]={}),ee.date=O,ee.context=Object.assign(ee.context||{},{$implicit:O,date:O,data:X,currentMonth:r.number,currentYear:r.year,disabled:F,focused:!1,selected:!1,today:P}),ee.tabindex=-1,ee.ariaLabel=x,ee.hidden=!1,e=B}M.number=t.getWeekNumber(_.map(S=>S.date),l),M.collapsed=h==="collapsed"&&_[0].date.month!==r.number&&_[_.length-1].date.month!==r.number}return r}function KM(t,e,n){let i=t.getDaysPerWeek(),r=new Ct(e.year,e.month,1),s=t.getWeekday(r)%i;return t.getPrev(r,"d",(i+s-n)%i)}var Or=(()=>{let e=class e{getMonthLabel(i){return`${this.getMonthFullName(i.month,i.year)} ${this.getYearNumerals(i.year)}`}getDayNumerals(i){return`${i.day}`}getWeekNumerals(i){return`${i}`}getYearNumerals(i){return`${i}`}getWeekLabel(){return""}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:()=>new QM,providedIn:"root"});let t=e;return t})(),QM=(()=>{let e=class e extends Or{constructor(){super(...arguments),this._locale=V(mm),this._monthsShort=[...Array(12).keys()].map(i=>Intl.DateTimeFormat(this._locale,{month:"short"}).format(new Date(2e3,i))),this._monthsFull=[...Array(12).keys()].map(i=>Intl.DateTimeFormat(this._locale,{month:"long"}).format(new Date(2e3,i)))}getWeekdayLabel(i,r="narrow"){let s=[...Array(7).keys()].map(a=>Intl.DateTimeFormat(this._locale,{weekday:r}).format(new Date(Date.UTC(2021,5,a-1))));return s.map((a,l)=>s[(l+1)%7])[i-1]||""}getMonthShortName(i){return this._monthsShort[i-1]||""}getMonthFullName(i){return this._monthsFull[i-1]||""}getDayAriaLabel(i){let r=new Date(i.year,i.month-1,i.day);return ym(r,"fullDate",this._locale)}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=Kt(e)))(s||e)}})(),e.\u0275prov=Z({token:e,factory:e.\u0275fac});let t=e;return t})(),mp=(()=>{let e=class e{constructor(){this._VALIDATORS={dayTemplateData:i=>{if(this._state.dayTemplateData!==i)return{dayTemplateData:i}},displayMonths:i=>{if(i=ki(i),$t(i)&&i>0&&this._state.displayMonths!==i)return{displayMonths:i}},disabled:i=>{if(this._state.disabled!==i)return{disabled:i}},firstDayOfWeek:i=>{if(i=ki(i),$t(i)&&i>=0&&this._state.firstDayOfWeek!==i)return{firstDayOfWeek:i}},focusVisible:i=>{if(this._state.focusVisible!==i&&!this._state.disabled)return{focusVisible:i}},markDisabled:i=>{if(this._state.markDisabled!==i)return{markDisabled:i}},maxDate:i=>{let r=this.toValidDate(i,null);if(Us(this._state.maxDate,r))return{maxDate:r}},minDate:i=>{let r=this.toValidDate(i,null);if(Us(this._state.minDate,r))return{minDate:r}},navigation:i=>{if(this._state.navigation!==i)return{navigation:i}},outsideDays:i=>{if(this._state.outsideDays!==i)return{outsideDays:i}},weekdays:i=>{let r=i===!0||i===!1?"narrow":i,s=i===!0||i===!1?i:!0;if(this._state.weekdayWidth!==r||this._state.weekdaysVisible!==s)return{weekdayWidth:r,weekdaysVisible:s}}},this._calendar=V(Ws),this._i18n=V(Or),this._model$=new lt,this._dateSelect$=new lt,this._state={dayTemplateData:null,markDisabled:null,maxDate:null,minDate:null,disabled:!1,displayMonths:1,firstDate:null,firstDayOfWeek:1,lastDate:null,focusDate:null,focusVisible:!1,months:[],navigation:"select",outsideDays:"visible",prevDisabled:!1,nextDisabled:!1,selectedDate:null,selectBoxes:{years:[],months:[]},weekdayWidth:"narrow",weekdaysVisible:!0}}get model$(){return this._model$.pipe(_t(i=>i.months.length>0))}get dateSelect$(){return this._dateSelect$.pipe(_t(i=>i!==null))}set(i){let r=Object.keys(i).map(s=>this._VALIDATORS[s](i[s])).reduce((s,o)=>I(I({},s),o),{});Object.keys(r).length>0&&this._nextState(r)}focus(i){let r=this.toValidDate(i,null);r!=null&&!this._state.disabled&&Us(this._state.focusDate,r)&&this._nextState({focusDate:i})}focusSelect(){pp(this._state.focusDate,this._state)&&this.select(this._state.focusDate,{emitEvent:!0})}open(i){let r=this.toValidDate(i,this._calendar.getToday());r!=null&&!this._state.disabled&&(!this._state.firstDate||hb(this._state.firstDate,r))&&this._nextState({firstDate:r})}select(i,r={}){let s=this.toValidDate(i,null);s!=null&&!this._state.disabled&&(Us(this._state.selectedDate,s)&&this._nextState({selectedDate:s}),r.emitEvent&&pp(s,this._state)&&this._dateSelect$.next(s))}toValidDate(i,r){let s=Ct.from(i);return r===void 0&&(r=this._calendar.getToday()),this._calendar.isValid(s)?s:r}getMonth(i){for(let r of this._state.months)if(i.month===r.number&&i.year===r.year)return r;throw new Error(`month ${i.month} of year ${i.year} not found`)}_nextState(i){let r=this._updateState(i);this._patchContexts(r),this._state=r,this._model$.next(this._state)}_patchContexts(i){let{months:r,displayMonths:s,selectedDate:o,focusDate:a,focusVisible:l,disabled:d,outsideDays:h}=i;i.months.forEach(p=>{p.weeks.forEach(m=>{m.days.forEach(f=>{a&&(f.context.focused=a.equals(f.date)&&l),f.tabindex=!d&&a&&f.date.equals(a)&&a.month===p.number?0:-1,d===!0&&(f.context.disabled=!0),o!==void 0&&(f.context.selected=o!==null&&o.equals(f.date)),p.number!==f.date.month&&(f.hidden=h==="hidden"||h==="collapsed"||s>1&&f.date.after(r[0].firstDate)&&f.date.before(r[s-1].lastDate))})})})}_updateState(i){let r=Object.assign({},this._state,i),s=r.firstDate;if(("minDate"in i||"maxDate"in i)&&(jM(r.minDate,r.maxDate),r.focusDate=pc(r.focusDate,r.minDate,r.maxDate),r.firstDate=pc(r.firstDate,r.minDate,r.maxDate),s=r.focusDate),"disabled"in i&&(r.focusVisible=!1),"selectedDate"in i&&this._state.months.length===0&&(s=r.selectedDate),"focusVisible"in i||"focusDate"in i&&(r.focusDate=pc(r.focusDate,r.minDate,r.maxDate),s=r.focusDate,r.months.length!==0&&r.focusDate&&!r.focusDate.before(r.firstDate)&&!r.focusDate.after(r.lastDate)))return r;if("firstDate"in i&&(r.firstDate=pc(r.firstDate,r.minDate,r.maxDate),s=r.firstDate),s){let o="dayTemplateData"in i||"firstDayOfWeek"in i||"markDisabled"in i||"minDate"in i||"maxDate"in i||"disabled"in i||"outsideDays"in i||"weekdaysVisible"in i,a=YM(this._calendar,s,r,this._i18n,o);r.months=a,r.firstDate=a[0].firstDate,r.lastDate=a[a.length-1].lastDate,"selectedDate"in i&&!pp(r.selectedDate,r)&&(r.selectedDate=null),"firstDate"in i&&(!r.focusDate||r.focusDate.before(r.firstDate)||r.focusDate.after(r.lastDate))&&(r.focusDate=s);let l=!this._state.firstDate||this._state.firstDate.year!==r.firstDate.year,d=!this._state.firstDate||this._state.firstDate.month!==r.firstDate.month;r.navigation==="select"?(("minDate"in i||"maxDate"in i||r.selectBoxes.years.length===0||l)&&(r.selectBoxes.years=UM(r.firstDate,r.minDate,r.maxDate)),("minDate"in i||"maxDate"in i||r.selectBoxes.months.length===0||l)&&(r.selectBoxes.months=$M(this._calendar,r.firstDate,r.minDate,r.maxDate))):r.selectBoxes={years:[],months:[]},(r.navigation==="arrows"||r.navigation==="select")&&(d||l||"minDate"in i||"maxDate"in i||"disabled"in i)&&(r.prevDisabled=r.disabled||qM(this._calendar,r.firstDate,r.minDate),r.nextDisabled=r.disabled||WM(this._calendar,r.lastDate,r.maxDate))}return r}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac});let t=e;return t})(),fc=function(t){return t[t.PREV=0]="PREV",t[t.NEXT=1]="NEXT",t}(fc||{}),fp=(()=>{let e=class e{constructor(){this.displayMonths=1,this.firstDayOfWeek=1,this.navigation="select",this.outsideDays="visible",this.showWeekNumbers=!1,this.weekdays="narrow"}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function JM(){return new XM}var gp=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:()=>JM(),providedIn:"root"});let t=e;return t})(),XM=(()=>{let e=class e extends gp{fromModel(i){return i&&$t(i.year)&&$t(i.month)&&$t(i.day)?{year:i.year,month:i.month,day:i.day}:null}toModel(i){return i&&$t(i.year)&&$t(i.month)&&$t(i.day)?{year:i.year,month:i.month,day:i.day}:null}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=Kt(e)))(s||e)}})(),e.\u0275prov=Z({token:e,factory:e.\u0275fac});let t=e;return t})(),eI=(()=>{let e=class e{processKey(i,r){let{state:s,calendar:o}=r;switch(i.key){case"PageUp":r.focusDate(o.getPrev(s.focusedDate,i.shiftKey?"y":"m",1));break;case"PageDown":r.focusDate(o.getNext(s.focusedDate,i.shiftKey?"y":"m",1));break;case"End":r.focusDate(i.shiftKey?s.maxDate:s.lastDate);break;case"Home":r.focusDate(i.shiftKey?s.minDate:s.firstDate);break;case"ArrowLeft":r.focusDate(o.getPrev(s.focusedDate,"d",1));break;case"ArrowUp":r.focusDate(o.getPrev(s.focusedDate,"d",o.getDaysPerWeek()));break;case"ArrowRight":r.focusDate(o.getNext(s.focusedDate,"d",1));break;case"ArrowDown":r.focusDate(o.getNext(s.focusedDate,"d",o.getDaysPerWeek()));break;case"Enter":case" ":r.focusSelect();break;default:return}i.preventDefault(),i.stopPropagation()}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),tI=(()=>{let e=class e{constructor(){this.i18n=V(Or)}isMuted(){return!this.selected&&(this.date.month!==this.currentMonth||this.disabled)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=se({type:e,selectors:[["","ngbDatepickerDayView",""]],hostAttrs:[1,"btn-light"],hostVars:10,hostBindings:function(r,s){r&2&&ct("bg-primary",s.selected)("text-white",s.selected)("text-muted",s.isMuted())("outside",s.isMuted())("active",s.focused)},inputs:{currentMonth:"currentMonth",date:"date",disabled:"disabled",focused:"focused",selected:"selected"},standalone:!0,features:[pe],attrs:cM,decls:1,vars:1,template:function(r,s){r&1&&j(0),r&2&&fe(s.i18n.getDayNumerals(s.date))},styles:[`[ngbDatepickerDayView]{text-align:center;width:2rem;height:2rem;line-height:2rem;border-radius:.25rem;background:transparent}[ngbDatepickerDayView]:hover:not(.bg-primary),[ngbDatepickerDayView].active:not(.bg-primary){background-color:var(--bs-tertiary-bg);outline:1px solid var(--bs-border-color)}[ngbDatepickerDayView].outside{opacity:.5}
`],encapsulation:2,changeDetection:0});let t=e;return t})(),iI=(()=>{let e=class e{constructor(){this._month=-1,this._year=-1,this.i18n=V(Or),this.select=new Y}changeMonth(i){this.select.emit(new Ct(this.date.year,ki(i),1))}changeYear(i){this.select.emit(new Ct(ki(i),this.date.month,1))}ngAfterViewChecked(){this.date&&(this.date.month!==this._month&&(this._month=this.date.month,this.monthSelect.nativeElement.value=`${this._month}`),this.date.year!==this._year&&(this._year=this.date.year,this.yearSelect.nativeElement.value=`${this._year}`))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=se({type:e,selectors:[["ngb-datepicker-navigation-select"]],viewQuery:function(r,s){if(r&1&&(Tt(dM,7,Be),Tt(uM,7,Be)),r&2){let o;ye(o=ve())&&(s.monthSelect=o.first),ye(o=ve())&&(s.yearSelect=o.first)}},inputs:{date:"date",disabled:"disabled",months:"months",years:"years"},outputs:{select:"select"},standalone:!0,features:[pe],decls:8,vars:2,consts:()=>{let i;i=$localize`:@@ngb.datepicker.select-month:Select month`;let r;r=$localize`:@@ngb.datepicker.select-month:Select month`;let s;s=$localize`:@@ngb.datepicker.select-year:Select year`;let o;return o=$localize`:@@ngb.datepicker.select-year:Select year`,[["month",""],["year",""],["aria-label",i,"title",r,1,"form-select",3,"change","disabled"],[3,"value"],["aria-label",s,"title",o,1,"form-select",3,"change","disabled"]]},template:function(r,s){if(r&1){let o=_e();v(0,"select",2,0),k("change",function(l){return L(o),N(s.changeMonth(l.target.value))}),yi(2,hM,2,3,"option",3,Qn),b(),v(4,"select",4,1),k("change",function(l){return L(o),N(s.changeYear(l.target.value))}),yi(6,pM,2,2,"option",3,Qn),b()}r&2&&(C("disabled",s.disabled),g(2),vi(s.months),g(2),C("disabled",s.disabled),g(2),vi(s.years))},styles:[`ngb-datepicker-navigation-select>.form-select{flex:1 1 auto;padding:0 .5rem;font-size:.875rem;height:1.85rem}ngb-datepicker-navigation-select>.form-select:focus{z-index:1}ngb-datepicker-navigation-select>.form-select::-ms-value{background-color:transparent!important}
`],encapsulation:2,changeDetection:0});let t=e;return t})(),nI=(()=>{let e=class e{constructor(){this.navigation=fc,this.i18n=V(Or),this.months=[],this.navigate=new Y,this.select=new Y}onClickPrev(i){i.currentTarget.focus(),this.navigate.emit(this.navigation.PREV)}onClickNext(i){i.currentTarget.focus(),this.navigate.emit(this.navigation.NEXT)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=se({type:e,selectors:[["ngb-datepicker-navigation"]],inputs:{date:"date",disabled:"disabled",months:"months",showSelect:"showSelect",prevDisabled:"prevDisabled",nextDisabled:"nextDisabled",selectBoxes:"selectBoxes"},outputs:{navigate:"navigate",select:"select"},standalone:!0,features:[pe],decls:8,vars:4,consts:()=>{let i;i=$localize`:@@ngb.datepicker.previous-month:Previous month`;let r;r=$localize`:@@ngb.datepicker.previous-month:Previous month`;let s;s=$localize`:@@ngb.datepicker.next-month:Next month`;let o;return o=$localize`:@@ngb.datepicker.next-month:Next month`,[[1,"ngb-dp-arrow","ngb-dp-arrow-prev"],["type","button","aria-label",i,"title",r,1,"btn","btn-link","ngb-dp-arrow-btn",3,"click","disabled"],[1,"ngb-dp-navigation-chevron"],[1,"ngb-dp-navigation-select",3,"date","disabled","months","years"],[1,"ngb-dp-arrow","ngb-dp-arrow-next"],["type","button","aria-label",s,"title",o,1,"btn","btn-link","ngb-dp-arrow-btn",3,"click","disabled"],[1,"ngb-dp-navigation-select",3,"select","date","disabled","months","years"],[1,"ngb-dp-arrow"],[1,"ngb-dp-month-name"]]},template:function(r,s){r&1&&(v(0,"div",0)(1,"button",1),k("click",function(a){return s.onClickPrev(a)}),G(2,"span",2),b()(),q(3,mM,1,4,"ngb-datepicker-navigation-select",3)(4,yM,2,0),v(5,"div",4)(6,"button",5),k("click",function(a){return s.onClickNext(a)}),G(7,"span",2),b()()),r&2&&(g(),C("disabled",s.prevDisabled),g(2),Re(3,s.showSelect?3:-1),g(),Re(4,s.showSelect?-1:4),g(2),C("disabled",s.nextDisabled))},dependencies:[iI],styles:[`ngb-datepicker-navigation{display:flex;align-items:center}.ngb-dp-navigation-chevron{border-style:solid;border-width:.2em .2em 0 0;display:inline-block;width:.75em;height:.75em;margin-left:.25em;margin-right:.15em;transform:rotate(-135deg)}.ngb-dp-arrow{display:flex;flex:1 1 auto;padding-right:0;padding-left:0;margin:0;width:2rem;height:2rem}.ngb-dp-arrow-next{justify-content:flex-end}.ngb-dp-arrow-next .ngb-dp-navigation-chevron{transform:rotate(45deg);margin-left:.15em;margin-right:.25em}.ngb-dp-arrow-btn{padding:0 .25rem;margin:0 .5rem;border:none;background-color:transparent;z-index:1}.ngb-dp-arrow-btn:focus{outline-width:1px;outline-style:auto}@media all and (-ms-high-contrast: none),(-ms-high-contrast: active){.ngb-dp-arrow-btn:focus{outline-style:solid}}.ngb-dp-month-name{font-size:larger;height:2rem;line-height:2rem;text-align:center}.ngb-dp-navigation-select{display:flex;flex:1 1 9rem}
`],encapsulation:2,changeDetection:0});let t=e;return t})(),rI=(()=>{let e=class e{constructor(){this.templateRef=V(Ee)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=De({type:e,selectors:[["ng-template","ngbDatepickerContent",""]],standalone:!0});let t=e;return t})(),sI=(()=>{let e=class e{constructor(){this._keyboardService=V(eI),this._service=V(mp),this.i18n=V(Or),this.datepicker=V(pb)}set month(i){this.viewModel=this._service.getMonth(i)}onKeyDown(i){this._keyboardService.processKey(i,this.datepicker)}doSelect(i){!i.context.disabled&&!i.hidden&&this.datepicker.onDateSelect(i.date)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=se({type:e,selectors:[["ngb-datepicker-month"]],hostAttrs:["role","grid"],hostBindings:function(r,s){r&1&&k("keydown",function(a){return s.onKeyDown(a)})},inputs:{month:"month"},standalone:!0,features:[pe],decls:3,vars:1,consts:[["role","row",1,"ngb-dp-week","ngb-dp-weekdays"],[1,"ngb-dp-weekday","ngb-dp-showweek","small"],["role","columnheader",1,"ngb-dp-weekday","small"],["role","row",1,"ngb-dp-week"],[1,"ngb-dp-week-number","small","text-muted"],["role","gridcell",1,"ngb-dp-day",3,"disabled","tabindex","hidden","ngb-dp-today"],["role","gridcell",1,"ngb-dp-day",3,"click","tabindex"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(r,s){r&1&&(q(0,wM,4,1,"div",0),yi(1,IM,1,1,null,null,Qn)),r&2&&(Re(0,s.viewModel.weekdays.length>0?0:-1),g(),vi(s.viewModel.weeks))},dependencies:[jr],styles:[`ngb-datepicker-month{display:block}.ngb-dp-weekday,.ngb-dp-week-number{line-height:2rem;text-align:center;font-style:italic}.ngb-dp-weekday{color:var(--bs-info)}.ngb-dp-week{border-radius:.25rem;display:flex}.ngb-dp-weekdays{border-bottom:1px solid var(--bs-border-color);border-radius:0;background-color:var(--bs-tertiary-bg)}.ngb-dp-day,.ngb-dp-weekday,.ngb-dp-week-number{width:2rem;height:2rem}.ngb-dp-day{cursor:pointer}.ngb-dp-day.disabled,.ngb-dp-day.hidden{cursor:default;pointer-events:none}.ngb-dp-day[tabindex="0"]{z-index:1}
`],encapsulation:2});let t=e;return t})(),pb=(()=>{let e=class e{constructor(){this.injector=V(Fr),this._service=V(mp),this._calendar=V(Ws),this._i18n=V(Or),this._config=V(fp),this._nativeElement=V(Be).nativeElement,this._ngbDateAdapter=V(gp),this._ngZone=V(St),this._destroyRef=V(pa),this._controlValue=null,this._publicState={},this.dayTemplate=this._config.dayTemplate,this.dayTemplateData=this._config.dayTemplateData,this.displayMonths=this._config.displayMonths,this.firstDayOfWeek=this._config.firstDayOfWeek,this.footerTemplate=this._config.footerTemplate,this.markDisabled=this._config.markDisabled,this.maxDate=this._config.maxDate,this.minDate=this._config.minDate,this.navigation=this._config.navigation,this.outsideDays=this._config.outsideDays,this.showWeekNumbers=this._config.showWeekNumbers,this.startDate=this._config.startDate,this.weekdays=this._config.weekdays,this.navigate=new Y,this.dateSelect=new Y,this.onChange=r=>{},this.onTouched=()=>{};let i=V(kt);this._service.dateSelect$.pipe(ta()).subscribe(r=>{this.dateSelect.emit(r)}),this._service.model$.pipe(ta()).subscribe(r=>{let s=r.firstDate,o=this.model?this.model.firstDate:null;this._publicState={maxDate:r.maxDate,minDate:r.minDate,firstDate:r.firstDate,lastDate:r.lastDate,focusedDate:r.focusDate,months:r.months.map(p=>p.firstDate)};let a=!1;if(!s.equals(o)&&(this.navigate.emit({current:o?{year:o.year,month:o.month}:null,next:{year:s.year,month:s.month},preventDefault:()=>a=!0}),a&&o!==null)){this._service.open(o);return}let l=r.selectedDate,d=r.focusDate,h=this.model?this.model.focusDate:null;this.model=r,Us(l,this._controlValue)&&(this._controlValue=l,this.onTouched(),this.onChange(this._ngbDateAdapter.toModel(l))),Us(d,h)&&h&&r.focusVisible&&this.focus(),i.markForCheck()})}get state(){return this._publicState}get calendar(){return this._calendar}get i18n(){return this._i18n}focusDate(i){this._service.focus(Ct.from(i))}focusSelect(){this._service.focusSelect()}focus(){this._ngZone.onStable.asObservable().pipe(bn(1)).subscribe(()=>this._nativeElement.querySelector('div.ngb-dp-day[tabindex="0"]')?.focus())}navigateTo(i){this._service.open(Ct.from(i?i.day?i:te(I({},i),{day:1}):null))}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{let i=Lt(this._contentEl.nativeElement,"focusin"),r=Lt(this._contentEl.nativeElement,"focusout");kr(i,r).pipe(_t(s=>{let o=s.target,a=s.relatedTarget;return!(o?.classList.contains("ngb-dp-day")&&a?.classList.contains("ngb-dp-day")&&this._nativeElement.contains(o)&&this._nativeElement.contains(a))}),ta(this._destroyRef)).subscribe(({type:s})=>this._ngZone.run(()=>this._service.set({focusVisible:s==="focusin"})))})}ngOnInit(){if(this.model===void 0){let i={};["dayTemplateData","displayMonths","markDisabled","firstDayOfWeek","navigation","minDate","maxDate","outsideDays","weekdays"].forEach(r=>i[r]=this[r]),this._service.set(i),this.navigateTo(this.startDate)}this.dayTemplate||(this.dayTemplate=this._defaultDayTemplate)}ngOnChanges(i){let r={};if(["dayTemplateData","displayMonths","markDisabled","firstDayOfWeek","navigation","minDate","maxDate","outsideDays","weekdays"].filter(s=>s in i).forEach(s=>r[s]=this[s]),this._service.set(r),"startDate"in i){let{currentValue:s,previousValue:o}=i.startDate;hb(o,s)&&this.navigateTo(this.startDate)}}onDateSelect(i){this._service.focus(i),this._service.select(i,{emitEvent:!0})}onNavigateDateSelect(i){this._service.open(i)}onNavigateEvent(i){switch(i){case fc.PREV:this._service.open(this._calendar.getPrev(this.model.firstDate,"m",1));break;case fc.NEXT:this._service.open(this._calendar.getNext(this.model.firstDate,"m",1));break}}registerOnChange(i){this.onChange=i}registerOnTouched(i){this.onTouched=i}setDisabledState(i){this._service.set({disabled:i})}writeValue(i){this._controlValue=Ct.from(this._ngbDateAdapter.fromModel(i)),this._service.select(this._controlValue)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=se({type:e,selectors:[["ngb-datepicker"]],contentQueries:function(r,s,o){if(r&1&&Dt(o,rI,7),r&2){let a;ye(a=ve())&&(s.contentTemplateFromContent=a.first)}},viewQuery:function(r,s){if(r&1&&(Tt(EM,7),Tt(xM,7)),r&2){let o;ye(o=ve())&&(s._defaultDayTemplate=o.first),ye(o=ve())&&(s._contentEl=o.first)}},hostVars:2,hostBindings:function(r,s){r&2&&ct("disabled",s.model.disabled)},inputs:{contentTemplate:"contentTemplate",dayTemplate:"dayTemplate",dayTemplateData:"dayTemplateData",displayMonths:"displayMonths",firstDayOfWeek:"firstDayOfWeek",footerTemplate:"footerTemplate",markDisabled:"markDisabled",maxDate:"maxDate",minDate:"minDate",navigation:"navigation",outsideDays:"outsideDays",showWeekNumbers:"showWeekNumbers",startDate:"startDate",weekdays:"weekdays"},outputs:{navigate:"navigate",dateSelect:"dateSelect"},exportAs:["ngbDatepicker"],standalone:!0,features:[ii([{provide:Ei,useExisting:qt(()=>e),multi:!0},mp]),Nt,pe],decls:10,vars:9,consts:[["defaultDayTemplate",""],["defaultContentTemplate",""],["content",""],[1,"ngb-dp-header"],[3,"date","months","disabled","showSelect","prevDisabled","nextDisabled","selectBoxes"],[1,"ngb-dp-content"],[3,"ngTemplateOutlet","ngTemplateOutletContext","ngTemplateOutletInjector"],[3,"ngTemplateOutlet"],["ngbDatepickerDayView","",3,"date","currentMonth","selected","disabled","focused"],[1,"ngb-dp-month"],[1,"ngb-dp-month-name"],[3,"month"],[3,"navigate","select","date","months","disabled","showSelect","prevDisabled","nextDisabled","selectBoxes"]],template:function(r,s){if(r&1&&(q(0,kM,1,5,"ng-template",null,0,Qt)(2,FM,2,0,"ng-template",null,1,Qt),v(4,"div",3),q(5,PM,1,7,"ngb-datepicker-navigation",4),b(),v(6,"div",5,2),q(8,LM,0,0,"ng-template",6),b(),q(9,NM,0,0,"ng-template",7)),r&2){let o=Ae(3);g(5),Re(5,s.navigation!=="none"?5:-1),g(),ct("ngb-dp-months",!s.contentTemplate),g(2),C("ngTemplateOutlet",s.contentTemplate||(s.contentTemplateFromContent==null?null:s.contentTemplateFromContent.templateRef)||o)("ngTemplateOutletContext",Ai(7,OM,s))("ngTemplateOutletInjector",s.injector),g(),C("ngTemplateOutlet",s.footerTemplate)}},dependencies:[jr,tI,sI,nI],styles:[`ngb-datepicker{border:1px solid var(--bs-border-color);border-radius:.25rem;display:inline-block}ngb-datepicker-month{pointer-events:auto}ngb-datepicker.dropdown-menu{padding:0}ngb-datepicker.disabled .ngb-dp-weekday,ngb-datepicker.disabled .ngb-dp-week-number,ngb-datepicker.disabled .ngb-dp-month-name{color:var(--bs-text-muted)}.ngb-dp-body{z-index:1055}.ngb-dp-header{border-bottom:0;border-radius:.25rem .25rem 0 0;padding-top:.25rem;background-color:var(--bs-tertiary-bg)}.ngb-dp-months{display:flex}.ngb-dp-month{pointer-events:none}.ngb-dp-month-name{font-size:larger;height:2rem;line-height:2rem;text-align:center;background-color:var(--bs-tertiary-bg)}.ngb-dp-month+.ngb-dp-month .ngb-dp-month-name,.ngb-dp-month+.ngb-dp-month .ngb-dp-week{padding-left:1rem}.ngb-dp-month:last-child .ngb-dp-week{padding-right:.25rem}.ngb-dp-month:first-child .ngb-dp-week{padding-left:.25rem}.ngb-dp-month .ngb-dp-week:last-child{padding-bottom:.25rem}
`],encapsulation:2,changeDetection:0});let t=e;return t})(),mc=(t,e)=>e?e.some(n=>n.contains(t)):!1,lb=(t,e)=>!e||BM(t,e)!=null,oI=(()=>{let t=()=>/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2,e=()=>/Android/.test(navigator.userAgent);return typeof navigator<"u"?!!navigator.userAgent&&(t()||e()):!1})(),aI=t=>oI?()=>setTimeout(()=>t(),100):t;function lI(t,e,n,i,r,s,o,a){n&&t.runOutsideAngular(aI(()=>{let l=m=>{let f=m.target;return m.button===2||mc(f,o)?!1:n==="inside"?mc(f,s)&&lb(f,a):n==="outside"?!mc(f,s):lb(f,a)||!mc(f,s)},d=Lt(e,"keydown").pipe(Ze(r),_t(m=>m.key==="Escape"),Ke(m=>m.preventDefault())),h=Lt(e,"mousedown").pipe(oe(l),Ze(r)),p=Lt(e,"mouseup").pipe(ua(h),_t(([m,f])=>f),Vp(0),Ze(r));Fp([d.pipe(oe(m=>0)),p.pipe(oe(m=>1))]).subscribe(m=>t.run(()=>i(m)))}))}var cI=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function dI(t){let e=Array.from(t.querySelectorAll(cI)).filter(n=>n.tabIndex!==-1);return[e[0],e[e.length-1]]}var uI=(t,e,n,i=!1)=>{t.runOutsideAngular(()=>{let r=Lt(e,"focusin").pipe(Ze(n),oe(s=>s.target));Lt(e,"keydown").pipe(Ze(n),_t(s=>s.key==="Tab"),ua(r)).subscribe(([s,o])=>{let[a,l]=dI(e);(o===a||o===e)&&s.shiftKey&&(l.focus(),s.preventDefault()),o===l&&!s.shiftKey&&(a.focus(),s.preventDefault())}),i&&Lt(e,"click").pipe(Ze(n),ua(r),oe(s=>s[1])).subscribe(s=>s.focus())})},hI=(()=>{let e=class e{constructor(){this._element=V(dt).documentElement}isRTL(){return(this._element.getAttribute("dir")||"").toLowerCase()==="rtl"}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),pI=/\s+/,mI=/  +/gi,fI={top:["top"],bottom:["bottom"],start:["left","right"],left:["left"],end:["right","left"],right:["right"],"top-start":["top-start","top-end"],"top-left":["top-start"],"top-end":["top-end","top-start"],"top-right":["top-end"],"bottom-start":["bottom-start","bottom-end"],"bottom-left":["bottom-start"],"bottom-end":["bottom-end","bottom-start"],"bottom-right":["bottom-end"],"start-top":["left-start","right-start"],"left-top":["left-start"],"start-bottom":["left-end","right-end"],"left-bottom":["left-end"],"end-top":["right-start","left-start"],"right-top":["right-start"],"end-bottom":["right-end","left-end"],"right-bottom":["right-end"]};function gI(t,e){let[n,i]=fI[t];return e&&i||n}var _I=/^left/,yI=/^right/,vI=/^start/,bI=/^end/;function wI(t,e){let[n,i]=e.split("-"),r=n.replace(_I,"start").replace(yI,"end"),s=[r];if(i){let o=i;(n==="left"||n==="right")&&(o=o.replace(vI,"top").replace(bI,"bottom")),s.push(`${r}-${o}`)}return t&&(s=s.map(o=>`${t}-${o}`)),s.join(" ")}function cb({placement:t,baseClass:e},n){let i=Array.isArray(t)?t:t.split(pI),r=["top","bottom","start","end","top-start","top-end","bottom-start","bottom-end","start-top","start-bottom","end-top","end-bottom"],s=i.findIndex(d=>d==="auto");s>=0&&r.forEach(function(d){i.find(h=>h.search("^"+d)!==-1)==null&&i.splice(s++,1,d)});let o=i.map(d=>gI(d,n.isRTL()));return{placement:o.shift(),modifiers:[{name:"bootstrapClasses",enabled:!!e,phase:"write",fn({state:d}){let h=new RegExp(e+"(-[a-z]+)*","gi"),p=d.elements.popper,m=d.placement,f=p.className;f=f.replace(h,""),f+=` ${wI(e,m)}`,f=f.trim().replace(mI," "),p.className=f}},ip,sp,Qh,{enabled:!0,name:"flip",options:{fallbackPlacements:o}},{enabled:!0,name:"preventOverflow",phase:"main",fn:function(){}}]}}function db(t){return t}function CI(){let t=V(hI),e=null;return{createPopper(n){if(!e){let r=(n.updatePopperOptions||db)(cb(n,t));e=hp(n.hostElement,n.targetElement,r)}},update(){e&&e.update()},setOptions(n){if(e){let r=(n.updatePopperOptions||db)(cb(n,t));e.setOptions(r)}},destroy(){e&&(e.destroy(),e=null)}}}function SI(){return new DI}var mb=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=Z({token:e,factory:()=>SI(),providedIn:"root"});let t=e;return t})(),DI=(()=>{let e=class e extends mb{parse(i){if(i!=null){let r=i.trim().split("-");if(r.length===1&&_n(r[0]))return{year:ki(r[0]),month:null,day:null};if(r.length===2&&_n(r[0])&&_n(r[1]))return{year:ki(r[0]),month:ki(r[1]),day:null};if(r.length===3&&_n(r[0])&&_n(r[1])&&_n(r[2]))return{year:ki(r[0]),month:ki(r[1]),day:ki(r[2])}}return null}format(i){return i?`${i.year}-${_n(i.month)?ob(i.month):""}-${_n(i.day)?ob(i.day):""}`:""}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=Kt(e)))(s||e)}})(),e.\u0275prov=Z({token:e,factory:e.\u0275fac});let t=e;return t})(),ub=(()=>{let e=class e extends fp{constructor(){super(...arguments),this.autoClose=!0,this.placement=["bottom-start","bottom-end","top-start","top-end"],this.popperOptions=i=>i,this.restoreFocus=!0}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=Kt(e)))(s||e)}})(),e.\u0275prov=Z({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function TI(t){return e=>(e.modifiers.push(np,{name:"offset",options:{offset:()=>t}}),e)}var fb=(()=>{let e=class e{constructor(){this._parserFormatter=V(mb),this._elRef=V(Be),this._vcRef=V(fa),this._ngZone=V(St),this._calendar=V(Ws),this._dateAdapter=V(gp),this._document=V(dt),this._changeDetector=V(kt),this._config=V(ub),this._cRef=null,this._disabled=!1,this._elWithFocus=null,this._model=null,this._positioning=CI(),this._destroyCloseHandlers$=new lt,this.autoClose=this._config.autoClose,this.placement=this._config.placement,this.popperOptions=this._config.popperOptions,this.container=this._config.container,this.positionTarget=this._config.positionTarget,this.dateSelect=new Y,this.navigate=new Y,this.closed=new Y,this._onChange=i=>{},this._onTouched=()=>{},this._validatorChange=()=>{}}get disabled(){return this._disabled}set disabled(i){this._disabled=i===""||i&&i!=="false",this.isOpen()&&this._cRef.instance.setDisabledState(this._disabled)}registerOnChange(i){this._onChange=i}registerOnTouched(i){this._onTouched=i}registerOnValidatorChange(i){this._validatorChange=i}setDisabledState(i){this.disabled=i}validate(i){let{value:r}=i;if(r!=null){let s=this._fromDateStruct(this._dateAdapter.fromModel(r));if(!s)return{ngbDate:{invalid:r}};if(this.minDate&&s.before(Ct.from(this.minDate)))return{ngbDate:{minDate:{minDate:this.minDate,actual:r}}};if(this.maxDate&&s.after(Ct.from(this.maxDate)))return{ngbDate:{maxDate:{maxDate:this.maxDate,actual:r}}}}return null}writeValue(i){this._model=this._fromDateStruct(this._dateAdapter.fromModel(i)),this._writeModelValue(this._model)}manualDateChange(i,r=!1){let s=i!==this._inputValue;s&&(this._inputValue=i,this._model=this._fromDateStruct(this._parserFormatter.parse(i))),(s||!r)&&this._onChange(this._model?this._dateAdapter.toModel(this._model):i===""?null:i),r&&this._model&&this._writeModelValue(this._model)}isOpen(){return!!this._cRef}open(){if(!this.isOpen()){this._cRef=this._vcRef.createComponent(pb),this._applyPopupStyling(this._cRef.location.nativeElement),this._applyDatepickerInputs(this._cRef),this._subscribeForDatepickerOutputs(this._cRef.instance),this._cRef.instance.ngOnInit(),this._cRef.instance.writeValue(this._dateAdapter.toModel(this._model)),this._cRef.instance.registerOnChange(r=>{this.writeValue(r),this._onChange(r),this._onTouched()}),this._cRef.changeDetectorRef.detectChanges(),this._cRef.instance.setDisabledState(this.disabled),this.container==="body"&&this._document.querySelector(this.container)?.appendChild(this._cRef.location.nativeElement),this._elWithFocus=this._document.activeElement,uI(this._ngZone,this._cRef.location.nativeElement,this.closed,!0),setTimeout(()=>this._cRef?.instance.focus());let i;if(sb(this.positionTarget)?i=this._document.querySelector(this.positionTarget):this.positionTarget instanceof HTMLElement?i=this.positionTarget:i=this._elRef.nativeElement,this.positionTarget&&!i)throw new Error("ngbDatepicker could not find element declared in [positionTarget] to position against.");this._ngZone.runOutsideAngular(()=>{this._cRef&&i&&(this._positioning.createPopper({hostElement:i,targetElement:this._cRef.location.nativeElement,placement:this.placement,updatePopperOptions:r=>this.popperOptions(TI([0,2])(r))}),this._zoneSubscription=this._ngZone.onStable.subscribe(()=>this._positioning.update()))}),this._setCloseHandlers()}}close(){if(this.isOpen()){this._cRef?.destroy(),this._cRef=null,this._positioning.destroy(),this._zoneSubscription?.unsubscribe(),this._destroyCloseHandlers$.next(),this.closed.emit(),this._changeDetector.markForCheck();let i=this._elWithFocus;sb(this.restoreFocus)?i=this._document.querySelector(this.restoreFocus):this.restoreFocus!==void 0&&(i=this.restoreFocus),i&&i.focus?i.focus():this._document.body.focus()}}toggle(){this.isOpen()?this.close():this.open()}navigateTo(i){this.isOpen()&&this._cRef.instance.navigateTo(i)}onBlur(){this._onTouched()}onFocus(){this._elWithFocus=this._elRef.nativeElement}ngOnChanges(i){if((i.minDate||i.maxDate)&&(this._validatorChange(),this.isOpen()&&(i.minDate&&this._cRef.setInput("minDate",this.minDate),i.maxDate&&this._cRef.setInput("maxDate",this.maxDate))),i.datepickerClass){let{currentValue:r,previousValue:s}=i.datepickerClass;this._applyPopupClass(r,s)}i.autoClose&&this.isOpen()&&this._setCloseHandlers()}ngOnDestroy(){this.close()}_applyDatepickerInputs(i){["contentTemplate","dayTemplate","dayTemplateData","displayMonths","firstDayOfWeek","footerTemplate","markDisabled","minDate","maxDate","navigation","outsideDays","showNavigation","showWeekNumbers","weekdays"].forEach(r=>{this[r]!==void 0&&i.setInput(r,this[r])}),i.setInput("startDate",this.startDate||this._model)}_applyPopupClass(i,r){let s=this._cRef?.location.nativeElement;s&&(i&&s.classList.add(i),r&&s.classList.remove(r))}_applyPopupStyling(i){i.classList.add("dropdown-menu","show"),this.container==="body"&&i.classList.add("ngb-dp-body"),this._applyPopupClass(this.datepickerClass)}_subscribeForDatepickerOutputs(i){i.navigate.subscribe(r=>this.navigate.emit(r)),i.dateSelect.subscribe(r=>{this.dateSelect.emit(r),(this.autoClose===!0||this.autoClose==="inside")&&this.close()})}_writeModelValue(i){let r=this._parserFormatter.format(i);this._inputValue=r,this._elRef.nativeElement.value=r,this.isOpen()&&(this._cRef.instance.writeValue(this._dateAdapter.toModel(i)),this._onTouched())}_fromDateStruct(i){let r=i?new Ct(i.year,i.month,i.day):null;return this._calendar.isValid(r)?r:null}_setCloseHandlers(){this._destroyCloseHandlers$.next(),lI(this._ngZone,this._document,this.autoClose,()=>this.close(),this._destroyCloseHandlers$,[],[this._elRef.nativeElement,this._cRef.location.nativeElement])}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=De({type:e,selectors:[["input","ngbDatepicker",""]],hostVars:1,hostBindings:function(r,s){r&1&&k("input",function(a){return s.manualDateChange(a.target.value)})("change",function(a){return s.manualDateChange(a.target.value,!0)})("focus",function(){return s.onFocus()})("blur",function(){return s.onBlur()}),r&2&&lm("disabled",s.disabled)},inputs:{autoClose:"autoClose",contentTemplate:"contentTemplate",datepickerClass:"datepickerClass",dayTemplate:"dayTemplate",dayTemplateData:"dayTemplateData",displayMonths:"displayMonths",firstDayOfWeek:"firstDayOfWeek",footerTemplate:"footerTemplate",markDisabled:"markDisabled",minDate:"minDate",maxDate:"maxDate",navigation:"navigation",outsideDays:"outsideDays",placement:"placement",popperOptions:"popperOptions",restoreFocus:"restoreFocus",showWeekNumbers:"showWeekNumbers",startDate:"startDate",container:"container",positionTarget:"positionTarget",weekdays:"weekdays",disabled:"disabled"},outputs:{dateSelect:"dateSelect",navigate:"navigate",closed:"closed"},exportAs:["ngbDatepicker"],standalone:!0,features:[ii([{provide:Ei,useExisting:qt(()=>e),multi:!0},{provide:zh,useExisting:qt(()=>e),multi:!0},{provide:fp,useExisting:ub}]),Nt]});let t=e;return t})();var gY=new Date(1882,10,12),_Y=new Date(2174,10,25);var yY=1e3*60*60*24;var _p=1080,MI=24*_p,II=12*_p+793,vY=29*MI+II,bY=11*_p+204;var gb=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Zt({type:e}),e.\u0275inj=Yt({});let t=e;return t})();var wY=new ke("live announcer delay",{providedIn:"root",factory:()=>100});function xI(t,e){if(t&1){let n=_e();G(0,"hr",11),v(1,"button",12),k("click",function(){L(n);let r=T(),s=Ae(4);return r.setToday(),N(s.close())}),j(2,"Today"),b(),v(3,"button",13),k("click",function(){L(n);let r=T(),s=Ae(4);return r.clearDate(),N(s.close())}),j(4,"Clear"),b()}}var _b=(()=>{let e=class e{constructor(){this.today=V(Ws).getToday(),this.dateValue=null,this.classInput="",this.dateValueChanged=new Y}ngOnInit(){let i=new Date;this.minDate={year:i.getFullYear()-300,month:1,day:1}}clearDate(){this.dateValue=null,this.dateValueChanged.emit(this.dateValue)}setToday(){this.dateValue=this.today,this.dateValueChanged.emit(this.dateValue)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=se({type:e,selectors:[["app-datepicker"]],inputs:{dateValue:"dateValue",classInput:"classInput"},outputs:{dateValueChanged:"dateValueChanged"},standalone:!0,features:[pe],decls:12,vars:4,consts:[["cal",""],["dtpickr","ngbDatepicker"],["btn",""],["footerTemplt",""],[1,"col-12"],[1,"input-group"],["placeholder","yyyy-mm-dd","name","dp","ngbDatepicker","","placement","top","container","body","autoClose","true",1,"form-control",3,"ngModelChange","ngClass","ngModel","footerTemplate","minDate"],["title","Toggle Calender","type","button",1,"btn","btn-sm","btn-outline-secondary",3,"click"],[1,"fa-regular","fa-calendar-days"],["title","Clear",1,"btn","btn-sm","btn-outline-secondary",3,"click"],[1,"fa-solid","fa-xmark"],[1,"my-0"],["title","Today",1,"btn","btn-primary","btn-sm","m-2","float-start",3,"click"],["title","Clear",1,"btn","btn-secondary","btn-sm","m-2","float-end",3,"click"]],template:function(r,s){if(r&1){let o=_e();v(0,"div",4,0)(2,"div",5)(3,"input",6,1),Xe("ngModelChange",function(l){return L(o),Je(s.dateValue,l)||(s.dateValue=l),N(l)}),k("ngModelChange",function(){L(o);let l=Ae(4);return s.dateValueChanged.emit(s.dateValue),N(l.close())}),b(),v(5,"button",7,2),k("click",function(){L(o);let l=Ae(4);return N(l.toggle())}),G(7,"i",8),b(),v(8,"button",9),k("click",function(){L(o);let l=Ae(4);return s.clearDate(),N(l.close())}),G(9,"i",10),b()()(),q(10,xI,5,0,"ng-template",null,3,Qt)}if(r&2){let o=Ae(11);g(3),C("ngClass",s.classInput),Qe("ngModel",s.dateValue),C("footerTemplate",o)("minDate",s.minDate)}},dependencies:[gb,fb,ht,di,jt,At,Te,ni],styles:[`.ngb-dp-today{background:#ee784e}
`],encapsulation:2});let t=e;return t})();var yb=(()=>{let e=class e{constructor(i){this.mapService=i,this.subscription=new Xi,this.title="Filter Field",this.tooltip="Filter Field",this.selectedItemsChanged=new Y,this.Value1=null,this.Value2=null,this.value2Ok=null,this.DELIMITER="-"}ngOnInit(){this.subscription=this.mapService.resetPlatformFilters$.subscribe(i=>{i==!0&&(this.Value1=null,this.Value2=null)})}setValue1(i){this.Value1=i,this.applyFilter()}setValue2(i){this.Value2=i,this.applyFilter()}resetValues(){this.Value1=null,this.Value2=null,this.resetFilter()}applyFilter(){this.value2Ok=!0;let i="";if(this.Value1!=null&&this.Value2==null)i=">= "+this.toModel(this.Value1);else if(this.Value1!=null&&this.Value2!=null){let r=new Ct(this.Value1.year,this.Value1.month,this.Value1.day);new Ct(this.Value2.year,this.Value2.month,this.Value2.day).before(r)?this.value2Ok=!1:(this.value2Ok=!0,i="between "+this.toModel(this.Value1)+" AND "+this.toModel(this.Value2))}else this.Value1==null&&this.Value2!=null&&(i="<= "+this.toModel(this.Value2));i.length>0?this.selectedItemsChanged.emit(i):this.resetFilter()}resetFilter(){this.selectedItemsChanged.emit(null)}toModel(i){return i?"'"+i.year.toString().padStart(4,"0")+this.DELIMITER+i.month.toString().padStart(2,"0")+this.DELIMITER+i.day.toString().padStart(2,"0")+"'":null}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)($(ci))},e.\u0275cmp=se({type:e,selectors:[["app-date-filter"]],inputs:{title:"title",tooltip:"tooltip"},outputs:{selectedItemsChanged:"selectedItemsChanged"},standalone:!0,features:[pe],decls:10,vars:7,consts:[[1,"d-flex"],[2,"align-self","center",3,"title"],["title","Clear Filter",1,"ms-auto","no-border","rounded-0","btn","btn-sm",3,"click","disabled"],[1,"fa-solid","fa-filter-circle-xmark","text-primary"],["title","value for filter",1,"rangeControls","mt-2","d-flex","gap-2"],[1,"d-grid","gap-2"],["title","Date1",3,"dateValueChanged","dateValue"],[3,"dateValueChanged","dateValue","title","classInput"]],template:function(r,s){r&1&&(v(0,"div")(1,"div",0)(2,"h6",1),j(3),b(),v(4,"button",2),k("click",function(){return s.setValue1(null),s.setValue2(null)}),G(5,"i",3),b()(),v(6,"div",4)(7,"div",5)(8,"app-datepicker",6),k("dateValueChanged",function(a){return s.setValue1(a)}),b(),v(9,"app-datepicker",7),k("dateValueChanged",function(a){return s.setValue2(a)}),b()()()()),r&2&&(g(2),C("title",s.tooltip),g(),fe(s.title),g(),C("disabled",s.Value1==null&&s.Value2==null),g(4),C("dateValue",s.Value1),g(),C("dateValue",s.Value2)("title",s.value2Ok==!1?"Invalid Data. Checks: Date2 > Date1":"Date2")("classInput",s.value2Ok==!1?"data-invalid":""))},dependencies:[Te,ht,_b],encapsulation:2});let t=e;return t})();var vb=(()=>{let e=class e{constructor(i){this.mapService=i,this.subscription=new Xi,this.title="Filter Field",this.tooltip="Filter Field",this.selectedItemsChanged=new Y,this.Value1=null,this.Value2=null,this.value2Ok=null,this.filterApplied=!1}ngOnInit(){this.subscription=this.mapService.resetPlatformFilters$.subscribe(i=>{i==!0&&this.clearValues()})}clearValues(){this.Value1=null,this.Value2=null,this.filterApplied=!1}applyFilter(){this.filterApplied=!0,this.value2Ok=!0;let i="";this.Value1!=null&&this.Value2==null?i=">= "+this.Value1:this.Value1!=null&&this.Value2!=null?this.Value1>this.Value2?this.value2Ok=!1:(this.value2Ok=!0,i="between "+this.Value1+" AND "+this.Value2):this.Value1==null&&this.Value2!=null?i="<= "+this.Value2:this.filterApplied=!1,i.length>0?this.selectedItemsChanged.emit(i):this.resetFilter()}resetFilter(){this.selectedItemsChanged.emit(null)}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)($(ci))},e.\u0275cmp=se({type:e,selectors:[["app-simple-numeric-filter"]],inputs:{title:"title",tooltip:"tooltip"},outputs:{selectedItemsChanged:"selectedItemsChanged"},standalone:!0,features:[pe],decls:10,vars:7,consts:[["v1",""],["v2",""],[1,"d-flex"],[2,"align-content","center",3,"title"],["title","Clear Filter",1,"ms-auto","no-border","rounded-0","btn","btn-sm",3,"click","disabled"],[1,"fa-solid","fa-filter-circle-xmark","text-primary"],["title","value for filter",1,"rangeControls","mt-2","d-flex","gap-2"],["placeholder","Value1","title","Value1","type","number",1,"form-control",3,"ngModelChange","keydown.enter","blur","ngModel"],["placeholder","Value2","type","number",1,"form-control",3,"ngModelChange","keydown.enter","blur","ngModel","title","ngClass"]],template:function(r,s){if(r&1){let o=_e();v(0,"div",2)(1,"span",3),j(2),b(),v(3,"button",4),k("click",function(){return L(o),s.clearValues(),N(s.applyFilter())}),G(4,"i",5),b()(),v(5,"div",6)(6,"input",7,0),Xe("ngModelChange",function(l){return L(o),Je(s.Value1,l)||(s.Value1=l),N(l)}),k("keydown.enter",function(){L(o);let l=Ae(7);return N(l.blur())})("blur",function(){return L(o),N(s.applyFilter())}),b(),v(8,"input",8,1),Xe("ngModelChange",function(l){return L(o),Je(s.Value2,l)||(s.Value2=l),N(l)}),k("keydown.enter",function(){L(o);let l=Ae(9);return N(l.blur())})("blur",function(){return L(o),N(s.applyFilter())}),b()()}r&2&&(g(),C("title",s.tooltip),g(),fe(s.title),g(),C("disabled",s.Value1==null&&s.Value2==null||!s.filterApplied),g(3),Qe("ngModel",s.Value1),g(2),Qe("ngModel",s.Value2),C("title",s.value2Ok==!1?"Invalid Data. Checks: Value2 > Value1":"Value2")("ngClass",s.value2Ok==!1?"data-invalid":""))},dependencies:[Te,ni,ht,di,br,jt,At]});let t=e;return t})();var bb=(()=>{let e=class e{constructor(i){this.mapService=i,this.subscription=new Xi,this.subscriptionP=new Xi,this.title="Filter Field",this.tooltip="Filter Field",this.LayerType=H.None,this.selectedItemsChanged=new Y,this.Value=null,this.filterApplied=!1}ngOnInit(){this.subscription=this.mapService.resetPlatformFilters$.subscribe(i=>{i==!0&&this.LayerType==H.PlatformLayer&&this.clearValues()}),this.subscriptionP=this.mapService.resetPipelineFilters$.subscribe(i=>{i==!0&&this.LayerType==H.PipelineLayer&&this.clearValues()})}clearValues(){this.Value=null,this.filterApplied=!1}applyFilter(){this.filterApplied=!0;let i="";this.Value!=null?i="= "+this.Value:this.filterApplied=!1,i.length>0?this.selectedItemsChanged.emit(i):this.resetFilter()}resetFilter(){this.selectedItemsChanged.emit(null)}ngOnDestroy(){this.subscription.unsubscribe(),this.subscriptionP.unsubscribe()}};e.\u0275fac=function(r){return new(r||e)($(ci))},e.\u0275cmp=se({type:e,selectors:[["app-numeric-equal-filter"]],inputs:{title:"title",tooltip:"tooltip",LayerType:"LayerType"},outputs:{selectedItemsChanged:"selectedItemsChanged"},standalone:!0,features:[pe],decls:8,vars:4,consts:[["v1",""],[1,"d-flex"],[2,"align-content","center",3,"title"],["title","Clear Filter",1,"ms-auto","no-border","rounded-0","btn","btn-sm",3,"click","disabled"],[1,"fa-solid","fa-filter-circle-xmark","text-primary"],["title","value for filter",1,"rangeControls","mt-2","d-flex","gap-2"],["placeholder","Value","title","Value","type","number",1,"form-control",3,"ngModelChange","keydown.enter","blur","ngModel"]],template:function(r,s){if(r&1){let o=_e();v(0,"div",1)(1,"span",2),j(2),b(),v(3,"button",3),k("click",function(){return L(o),s.clearValues(),N(s.applyFilter())}),G(4,"i",4),b()(),v(5,"div",5)(6,"input",6,0),Xe("ngModelChange",function(l){return L(o),Je(s.Value,l)||(s.Value=l),N(l)}),k("keydown.enter",function(){L(o);let l=Ae(7);return N(l.blur())})("blur",function(){return L(o),N(s.applyFilter())}),b()()}r&2&&(g(),C("title",s.tooltip),g(),fe(s.title),g(),C("disabled",s.Value==null||!s.filterApplied),g(3),Qe("ngModel",s.Value))},dependencies:[Te,ht,di,br,jt,At]});let t=e;return t})();var wb=(()=>{let e=class e{constructor(){this.valueField="text",this.displayField="text",this.selectedItemsChanged=new Y}onSelectionChanged(i){this.selectedItemsChanged.emit(i)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=se({type:e,selectors:[["app-single-select"]],inputs:{tooltip:"tooltip",title:"title",options:"options",selectedItem:"selectedItem",valueField:"valueField",displayField:"displayField"},outputs:{selectedItemsChanged:"selectedItemsChanged"},standalone:!0,features:[pe],decls:5,vars:6,consts:[[1,"row"],[1,"col-4","pe-0",2,"align-self","center",3,"title"],[1,"col-8","ps-0"],["placeholder","select",3,"ngModelChange","items","bindLabel","bindValue","ngModel"]],template:function(r,s){r&1&&(v(0,"div",0)(1,"h6",1),j(2),b(),v(3,"div",2)(4,"ng-select",3),Xe("ngModelChange",function(a){return Je(s.selectedItem,a)||(s.selectedItem=a),a}),k("ngModelChange",function(a){return s.onSelectionChanged(a)}),b()()()),r&2&&(g(),C("title",s.tooltip),g(),fe(s.title),g(2),C("items",s.options)("bindLabel",s.displayField)("bindValue",s.valueField),Qe("ngModel",s.selectedItem))},dependencies:[$v,jv,Te,ht,jt,At]});let t=e;return t})();function OI(t,e){t&1&&G(0,"i",24)}function kI(t,e){t&1&&G(0,"i",25)}function RI(t,e){if(t&1){let n=_e();v(0,"div",26)(1,"div",27)(2,"input",28),Xe("ngModelChange",function(r){L(n);let s=T();return Je(s.showBSEEPlatforms,r)||(s.showBSEEPlatforms=r),N(r)}),k("ngModelChange",function(){L(n);let r=T();return N(r.toggleBSEEPlatformLayer())}),b(),v(3,"label",29),j(4,"BSEE Platforms"),b()(),v(5,"div",30)(6,"div",31)(7,"div",32),j(8," Platform Filters "),v(9,"button",33),k("click",function(){L(n);let r=T();return N(r.clearPlatformFilters())}),G(10,"i",34),b(),v(11,"button",35),k("click",function(){L(n);let r=T();return N(r.downloadFilteredPlatforms())}),G(12,"i",36),b(),v(13,"button",37),G(14,"i",38),b()()(),v(15,"div",39)(16,"div")(17,"div",40)(18,"span",41),j(19,"Status"),b(),v(20,"button",1),k("click",function(){L(n);let r=T();return N(r.setPlatformStatus(r.PlatformStatusEnum.Active))}),j(21,"Active"),b(),v(22,"button",1),k("click",function(){L(n);let r=T();return N(r.setPlatformStatus(r.PlatformStatusEnum.Removed))}),j(23,"Removed"),b()()(),G(24,"hr",42),v(25,"app-dropdown-filter",43),k("selectedItemsChanged",function(r){L(n);let s=T();return N(s.OnAreaFilterChanged(r))}),b(),G(26,"hr",42),v(27,"app-dropdown-filter",44),k("selectedItemsChanged",function(r){L(n);let s=T();return N(s.OnBlockNumberFilterChanged(r))}),b(),G(28,"hr",42),v(29,"app-dropdown-filter",45),k("selectedItemsChanged",function(r){L(n);let s=T();return N(s.OnBSEEOperatorFilterChanged(r))}),b(),G(30,"hr",42),v(31,"app-dropdown-filter",46),k("selectedItemsChanged",function(r){L(n);let s=T();return N(s.OniSIMSOperatorFilterChanged(r))}),b(),G(32,"hr",42),v(33,"app-dropdown-filter",47),k("selectedItemsChanged",function(r){L(n);let s=T();return N(s.OnPlatformNameFilterChanged(r))}),b(),G(34,"hr",42),v(35,"app-simple-numeric-filter",48),k("selectedItemsChanged",function(r){L(n);let s=T();return N(s.OnWDFilterChanged(r))}),b(),G(36,"hr",42),v(37,"app-numeric-equal-filter",49),k("selectedItemsChanged",function(r){L(n);let s=T();return N(s.OnCPXIDFilterChanged(r))}),b(),G(38,"hr",42),v(39,"app-date-filter",50),k("selectedItemsChanged",function(r){L(n);let s=T();return N(s.OnInstallDateChanged(r))}),b(),G(40,"hr",42),v(41,"app-date-filter",51),k("selectedItemsChanged",function(r){L(n);let s=T();return N(s.OnRemovalDateChanged(r))}),b()()()()}if(t&2){let n=T();g(2),Qe("ngModel",n.showBSEEPlatforms),g(7),C("disabled",!n.hasLayerFilters.PlatformLayer),g(11),C("ngClass",n.platformStatus.includes(n.PlatformStatusEnum.Active)?"btn-primary":"btn-outline-primary"),g(2),C("ngClass",n.platformStatus.includes(n.PlatformStatusEnum.Removed)?"btn-primary":"btn-outline-primary"),g(3),C("options",n.areaCodes)("selectedItems",n.platformFilterResetItems),g(2),C("options",n.blockNumbers)("selectedItems",n.platformFilterResetItems),g(2),C("options",n.bseeOperators)("selectedItems",n.platformFilterResetItems),g(2),C("options",n.iSIMSOperators)("selectedItems",n.platformFilterResetItems),g(2),C("options",n.platformNames)("selectedItems",n.platformFilterResetItems),g(4),C("LayerType",n.LayerOrWidgetEnum.PlatformLayer)}}function AI(t,e){if(t&1&&(v(0,"li",52),j(1),b()),t&2){let n=e.$implicit;g(),fe(n.Name)}}function FI(t,e){t&1&&G(0,"i",24)}function PI(t,e){t&1&&G(0,"i",25)}function LI(t,e){if(t&1){let n=_e();v(0,"app-dropdown-filter",63),k("selectedItemsChanged",function(r){L(n);let s=T(2);return N(s.OnHConeAdvisoryFilterChanged(r))}),b()}if(t&2){let n=T(2);C("options",n.coneAdvisory)("selectedItems",n.hurricaneFilterResetItems)}}function NI(t,e){if(t&1){let n=_e();v(0,"div",26)(1,"div",30)(2,"div",31)(3,"div"),j(4," Historic Hurricanes "),v(5,"button",53),k("click",function(){L(n);let r=T();return N(r.clearHurricaneFilters())}),G(6,"i",34),b()()(),v(7,"div",39)(8,"app-dropdown-filter",54),k("selectedItemsChanged",function(r){L(n);let s=T();return N(s.OnHurricaneYearsFilterChanged(r))}),b(),G(9,"hr",42),v(10,"app-dropdown-filter",55),k("selectedItemsChanged",function(r){L(n);let s=T();return N(s.OnHurricaneNamesFilterChanged(r))}),b(),v(11,"div",56)(12,"div",57)(13,"input",58),Xe("ngModelChange",function(r){L(n);let s=T();return Je(s.showHH_Track,r)||(s.showHH_Track=r),N(r)}),k("ngModelChange",function(){L(n);let r=T();return N(r.toggleShowHH_Track())}),b(),v(14,"label",59),j(15,"Track"),b()(),v(16,"div",57)(17,"input",60),Xe("ngModelChange",function(r){L(n);let s=T();return Je(s.showHH_Cones,r)||(s.showHH_Cones=r),N(r)}),k("ngModelChange",function(){L(n);let r=T();return N(r.toggleShowHH_Cone())}),b(),v(18,"label",61),j(19,"Cones"),b()()(),q(20,LI,1,2,"app-dropdown-filter",62),b()()()}if(t&2){let n=T();g(5),C("disabled",!n.hasLayerFilters.HistoricHurricaneTrackLayer),g(3),C("options",n.hurricaneYears)("selectedItems",n.hurricaneFilterResetItems),g(2),C("options",n.hurricaneNames)("selectedItems",n.hurricaneFilterResetItems),g(3),Qe("ngModel",n.showHH_Track),g(4),C("disabled",n.coneAdvisory.length<1),Qe("ngModel",n.showHH_Cones),g(3),C("ngIf",n.coneAdvisory.length>0)}}function VI(t,e){t&1&&G(0,"i",24)}function BI(t,e){t&1&&G(0,"i",25)}function HI(t,e){if(t&1){let n=_e();v(0,"div",26)(1,"div",30)(2,"div",31)(3,"div"),j(4," Pipeline Filters "),v(5,"button",33),k("click",function(){L(n);let r=T();return N(r.clearPipelineFilters())}),G(6,"i",34),b()()(),v(7,"div",39)(8,"app-dropdown-filter",64),k("selectedItemsChanged",function(r){L(n);let s=T();return N(s.OnPipelineOperatorFilterChanged(r))}),b(),G(9,"hr",42),v(10,"app-dropdown-filter",65),k("selectedItemsChanged",function(r){L(n);let s=T();return N(s.OnStatusCodeFilterChanged(r))}),b(),G(11,"hr",42),v(12,"app-numeric-equal-filter",66),k("selectedItemsChanged",function(r){L(n);let s=T();return N(s.OnSegmentNumFilterChanged(r))}),b()()()()}if(t&2){let n=T();g(5),C("disabled",!n.hasLayerFilters.PipelineLayer),g(3),C("options",n.pipelineOperators)("selectedItems",n.pipelineFilterResetItems),g(2),C("options",n.pipelineStatusCodes)("selectedItems",n.pipelineFilterResetItems),g(2),C("LayerType",n.LayerOrWidgetEnum.PipelineLayer)}}var Cb=(()=>{let e=class e{constructor(i){this.mapService=i,this.PlatformStatusEnum=Eh,this.LayerOrWidgetEnum=H,this.showBlocks=!1,this.showArea=!1,this.showPlatforms=!0,this.showBSEEPlatforms=!1,this.platformStatus=[],this.showHurricaneUI=!1,this.showPipelines=!1,this.showHH_Track=!1,this.showHH_Cones=!1,this.areaCodes=[],this.blockNumbers=[],this.bseeOperators=[],this.iSIMSOperators=[],this.platformNames=[],this.platformFilterResetItems=[],this.pipelineFilterResetItems=[],this.hurricaneFilterResetItems=[]=[],this.hurricaneYears=[],this.hurricaneNames=[],this.pipelineOperators=[],this.pipelineStatusCodes=[],this.coneAdvisory=[],this.hasLayerFilters={[H.PlatformLayer]:!1,[H.HistoricHurricaneTrackLayer]:!1,[H.BSEEPlatformLayer]:!1,[H.Legend]:!1,[H.AreaLayer]:!1,[H.BLockLayer]:!1,[H.None]:!1,[H.PipelineLayer]:!1,[H.HHConeLayer]:!1},this.resultSet=[],this.shapeOptions=["circle","square","cross","x","diamond","triangle","path"],this.selectedShape=null,this.selectedName=null,this.selectedColor="#0d6efd",this.selectedSize=4,this.selectedResultSet=null,i.setMapFilters$.subscribe(r=>{if(r==null)return;let s=r.details.size>0;r.layerOrWidget==H.PlatformLayer?this.hasLayerFilters.PlatformLayer=s:r.layerOrWidget==H.HistoricHurricaneTrackLayer?this.hasLayerFilters.HistoricHurricaneTrackLayer=s:r.layerOrWidget==H.HHConeLayer?this.hasLayerFilters.HHConeLayer=s:r.layerOrWidget==H.PipelineLayer&&(this.hasLayerFilters.PipelineLayer=s)}),i.filterListFromMap$.subscribe(r=>{switch(r.type){case E.Area_Code:this.areaCodes=r.value;break;case E.Block_Number:this.blockNumbers=r.value;break;case E.Bus_Asc_Name:this.bseeOperators=r.value;break;case E.operatorName:this.iSIMSOperators=r.value;break;case E.platformName:this.platformNames=r.value;break;case E.HurricaneYear:this.hurricaneYears=r.value;break;case E.HurricaneName:this.hurricaneNames=r.value;break;case E.PipelineOperator:this.pipelineOperators=r.value;break;case E.PipelineStatusCode:this.pipelineStatusCodes=r.value;break;case E.HConeAdvisory:this.coneAdvisory=r.value;let s=this.showHH_Cones;this.showHH_Cones=this.showHH_Cones&&this.coneAdvisory.length>0,s!=this.showHH_Cones&&this.toggleShowHH_Cone();break;default:break}})}toggleBlockLayer(){this.showBlocks=!this.showBlocks,this.mapService.ShowHideLayersOrWidgets({type:H.BLockLayer,visible:this.showBlocks})}toggleAreaLayer(){this.showArea=!this.showArea,this.mapService.ShowHideLayersOrWidgets({type:H.AreaLayer,visible:this.showArea})}togglePlatformLayer(){this.showPlatforms=!this.showPlatforms,this.mapService.ShowHideLayersOrWidgets({type:H.PlatformLayer,visible:this.showPlatforms})}toggleBSEEPlatformLayer(){this.mapService.ShowHideLayersOrWidgets({type:H.BSEEPlatformLayer,visible:this.showBSEEPlatforms})}setPlatformStatus(i){this.platformStatus.includes(i)?this.platformStatus.splice(this.platformStatus.indexOf(i),1):this.platformStatus.push(i),this.mapService.setMapFilterValue(E.ActiveStatus,this.platformStatus)}clearPlatformFilters(){this.platformStatus=[],this.mapService.clearPlatformFilters(),this.platformFilterResetItems=[]}downloadFilteredPlatforms(){this.mapService.downloadFilteredData(H.PlatformLayer)}OnAreaFilterChanged(i){var r=i;this.mapService.setMapFilterValue(E.Area_Code,r.map(s=>s.value))}OnBlockNumberFilterChanged(i){var r=i;this.mapService.setMapFilterValue(E.Block_Number,r.map(s=>s.value))}OnBSEEOperatorFilterChanged(i){var r=i;this.mapService.setMapFilterValue(E.Bus_Asc_Name,r.map(s=>s.value))}OniSIMSOperatorFilterChanged(i){var r=i;this.mapService.setMapFilterValue(E.operatorName,r.map(s=>s.value))}OnPlatformNameFilterChanged(i){var r=i;this.mapService.setMapFilterValue(E.platformName,r.map(s=>s.value))}OnWDFilterChanged(i){i==null||i.length==0?this.mapService.setMapFilterValue(E.Water_Depth__feet_,[]):this.mapService.setMapFilterValue(E.Water_Depth__feet_,i)}OnCPXIDFilterChanged(i){i==null||i.length==0?this.mapService.setMapFilterValue(E.Complex_Id_Num,[]):this.mapService.setMapFilterValue(E.Complex_Id_Num,i)}OnInstallDateChanged(i){i==null||i.length==0?this.mapService.setMapFilterValue(E.Install_Date,[]):this.mapService.setMapFilterValue(E.Install_Date,i)}OnRemovalDateChanged(i){i==null||i.length==0?this.mapService.setMapFilterValue(E.Removal_Date,[]):this.mapService.setMapFilterValue(E.Removal_Date,i)}clearHurricaneFilters(){this.mapService.clearHurricaneFilters(),this.hurricaneFilterResetItems=[]}OnHurricaneYearsFilterChanged(i){var r=i;this.mapService.setMapFilterValue(E.HurricaneYear,r.map(s=>s.value))}OnHurricaneNamesFilterChanged(i){var r=i;this.mapService.setMapFilterValue(E.HurricaneName,r.map(s=>s.value))}toggleShowHH_Track(){this.mapService.ShowHideLayersOrWidgets({type:H.HistoricHurricaneTrackLayer,visible:this.showHH_Track})}toggleShowHH_Cone(){this.mapService.ShowHideLayersOrWidgets({type:H.HHConeLayer,visible:this.showHH_Cones})}OnHConeAdvisoryFilterChanged(i){var r=i;this.mapService.setMapFilterValue(E.HConeAdvisory,r.map(s=>s.value))}togglePipelineLayer(){this.showPipelines=!this.showPipelines,this.mapService.ShowHideLayersOrWidgets({type:H.PipelineLayer,visible:this.showPipelines})}clearPipelineFilters(){this.mapService.clearPipelineFilters(),this.pipelineFilterResetItems=[]}OnPipelineOperatorFilterChanged(i){var r=i;this.mapService.setMapFilterValue(E.PipelineOperator,r.map(s=>s.value))}OnStatusCodeFilterChanged(i){var r=i;this.mapService.setMapFilterValue(E.PipelineStatusCode,r.map(s=>s.value))}OnSegmentNumFilterChanged(i){i==null||i.length==0?this.mapService.setMapFilterValue(E.PipelineSegmentNumber,[]):this.mapService.setMapFilterValue(E.PipelineSegmentNumber,i)}shapeSelectionChanged(i){this.selectedShape=i}SaveResultSet(){let i={Color:this.selectedColor!=null?this.selectedColor:"#0d6efd",Shape:this.selectedShape!=null?this.selectedShape:"circle",Size:this.selectedSize!=null?this.selectedSize:4,Name:this.selectedName!=null?this.selectedName:"defaultSet",Index:0};this.selectedResultSet!=null?(i.Index=this.selectedResultSet.Index,this.selectedResultSet=i,this.resultSet.splice(this.selectedResultSet.Index,1,i)):(i.Index=this.resultSet.length,this.resultSet.push(i))}};e.\u0275fac=function(r){return new(r||e)($(ci))},e.\u0275cmp=se({type:e,selectors:[["app-side-panel"]],standalone:!0,features:[pe],decls:53,vars:18,consts:[[1,"d-grid","gap-2"],["type","button",1,"rounded-0","btn","btn-sm",3,"click","ngClass"],[1,"d-grid","gap-2","border","border-primary"],["class","fa-solid fa-angle-down collapseIcon",4,"ngIf"],["class","fa-solid fa-angle-up collapseIcon",4,"ngIf"],["class","d-grid gap-2 mx-2 pb-2",4,"ngIf"],["data-bs-scroll","true","data-bs-backdrop","static","tabindex","-1","id","offcanvasSettings","aria-labelledby","offcanvasRightLabel",1,"offcanvas","offcanvas-end"],[1,"offcanvas-header"],["id","offcanvasRightLabel",1,"offcanvas-title"],["type","button","data-bs-dismiss","offcanvas","aria-label","Close",1,"btn-close"],[1,"offcanvas-body"],["id","shapeSelectDD","title","Shape","tooltip","Select shape",3,"selectedItemsChanged","options"],[1,"row","mt-2"],["for","shapeColor",1,"col-4","pe-0","form-label",2,"align-self","center"],[1,"col-8","ps-0"],["type","color","id","shapeColor","title","Choose a color",1,"w-100","no-effect","form-control","form-control-color",2,"padding","10px",3,"ngModelChange","ngModel"],["for","shapeSize",1,"col-4","pe-0","form-label",2,"align-self","center"],["type","number","id","shapeSize","value","4","title","Choose a size",1,"form-control","no-effect",3,"ngModelChange","ngModel"],["for","setName",1,"col-4","pe-0","form-label",2,"align-self","center"],["type","text","id","setName","value","4","title","Choose a name",1,"form-control","no-effect",3,"ngModelChange","ngModel"],[1,"mt-2","rounded-0","btn","btn-primary",3,"click"],[1,"list-group","list-group-flush"],["class","list-group-item",4,"ngFor","ngForOf"],["type","button",1,"rounded-0","btn","btn-sm","btn-outline-primary",3,"click"],[1,"fa-solid","fa-angle-down","collapseIcon"],[1,"fa-solid","fa-angle-up","collapseIcon"],[1,"d-grid","gap-2","mx-2","pb-2"],[1,"mt-1","form-check","form-switch"],["type","checkbox","id","switchBSEE",1,"form-check-input",3,"ngModelChange","ngModel"],["for","switchBSEE",1,"form-check-label"],[1,"card","rounded-0"],[1,"card-header"],[1,"layerBtn"],["title","Clear Filters",1,"no-border","rounded-0","btn","ms-auto",3,"click","disabled"],[1,"fa-solid","fa-filter-circle-xmark","text-primary"],["title","Export filtered data",1,"no-border","rounded-0","btn","ms-auto",3,"click"],[1,"fa-solid","fa-download","text-primary"],["title","Settings","data-bs-toggle","offcanvas","data-bs-target","#offcanvasSettings","aria-controls","offcanvasSettings",1,"no-border","rounded-0","btn","ms-auto"],[1,"fa-solid","fa-ellipsis-vertical","text-primary"],[1,"card-body","d-grid","gap-2"],[1,"d-flex","gap-2","flex-wrap"],[2,"align-content","center"],[1,"my-1"],["title","Area Code","valueField","value","displayField","text",3,"selectedItemsChanged","options","selectedItems"],["title","Block Number","valueField","value","displayField","text",3,"selectedItemsChanged","options","selectedItems"],["title","BSEE Operator","valueField","value","displayField","text","itemsShowLimit","1",3,"selectedItemsChanged","options","selectedItems"],["title","iSIMS Operator","valueField","value","displayField","text","itemsShowLimit","1",3,"selectedItemsChanged","options","selectedItems"],["title","Platform Name","valueField","value","displayField","text","itemsShowLimit","1",3,"selectedItemsChanged","options","selectedItems"],["title","WD(ft)","tooltip","Water Depth feet",3,"selectedItemsChanged"],["title","Complex ID Num","tooltip","Complex ID Num equals",3,"selectedItemsChanged","LayerType"],["title","Install Date","tooltip","Install Date",3,"selectedItemsChanged"],["title","Removal Date","tooltip","Removal Date",3,"selectedItemsChanged"],[1,"list-group-item"],["title","Clear Filters",1,"rounded-0","btn","ms-auto","no-border",3,"click","disabled"],["title","Year","valueField","value","displayField","text","itemsShowLimit","1",3,"selectedItemsChanged","options","selectedItems"],["title","Name","valueField","value","displayField","text","itemsShowLimit","1",3,"selectedItemsChanged","options","selectedItems"],[1,"d-flex","gap-2"],[1,"mt-1","form-check"],["type","checkbox","id","checkShowHH_Track",1,"form-check-input","squareChkbox",3,"ngModelChange","ngModel"],["for","checkShowHH_Track",1,"form-check-label"],["type","checkbox","id","checkShowHH_Cone",1,"form-check-input","squareChkbox",3,"ngModelChange","disabled","ngModel"],["for","checkShowHH_Cone",1,"form-check-label"],["title","Advisory","valueField","value","displayField","text","itemsShowLimit","1",3,"options","selectedItems","selectedItemsChanged",4,"ngIf"],["title","Advisory","valueField","value","displayField","text","itemsShowLimit","1",3,"selectedItemsChanged","options","selectedItems"],["title","Operator","valueField","value","displayField","text","itemsShowLimit","1",3,"selectedItemsChanged","options","selectedItems"],["title","Status Code","valueField","value","displayField","text","itemsShowLimit","1",3,"selectedItemsChanged","options","selectedItems"],["title","Segment Number","tooltip","Segment Number equals",3,"selectedItemsChanged","LayerType"]],template:function(r,s){r&1&&(v(0,"div",0)(1,"div",0)(2,"button",1),k("click",function(){return s.toggleAreaLayer()}),j(3,"Area"),b(),v(4,"button",1),k("click",function(){return s.toggleBlockLayer()}),j(5,"Block"),b()(),v(6,"div",2)(7,"button",1),k("click",function(){return s.togglePlatformLayer()}),j(8,"Platforms"),q(9,OI,1,0,"i",3)(10,kI,1,0,"i",4),b(),q(11,RI,42,15,"div",5),v(12,"div",6)(13,"div",7)(14,"h2",8),j(15,"Settings"),b(),G(16,"button",9),b(),v(17,"div",10)(18,"h5"),j(19,"Configration"),b(),v(20,"div")(21,"app-single-select",11),k("selectedItemsChanged",function(a){return s.selectedShape=a}),b(),v(22,"div",12)(23,"h6",13),j(24,"Color"),b(),v(25,"div",14)(26,"input",15),Xe("ngModelChange",function(a){return Je(s.selectedColor,a)||(s.selectedColor=a),a}),b()()(),v(27,"div",12)(28,"h6",16),j(29,"Size"),b(),v(30,"div",14)(31,"input",17),Xe("ngModelChange",function(a){return Je(s.selectedSize,a)||(s.selectedSize=a),a}),b()()(),v(32,"div",12)(33,"h6",18),j(34,"Result Set Name"),b(),v(35,"div",14)(36,"input",19),Xe("ngModelChange",function(a){return Je(s.selectedName,a)||(s.selectedName=a),a}),b()()(),v(37,"button",20),k("click",function(){return s.SaveResultSet()}),j(38,"Save Result Set"),b()(),v(39,"ul",21),q(40,AI,2,1,"li",22),b()()()(),v(41,"div",2)(42,"button",23),k("click",function(){return s.showHurricaneUI=!s.showHurricaneUI}),j(43,"Hurricanes"),q(44,FI,1,0,"i",3)(45,PI,1,0,"i",4),b(),q(46,NI,21,9,"div",5),b(),v(47,"div",2)(48,"button",1),k("click",function(){return s.togglePipelineLayer()}),j(49,"Pipelines"),q(50,VI,1,0,"i",3)(51,BI,1,0,"i",4),b(),q(52,HI,13,6,"div",5),b()()),r&2&&(g(2),C("ngClass",s.showArea?"btn-primary":"btn-outline-primary"),g(2),C("ngClass",s.showBlocks?"btn-primary":"btn-outline-primary"),g(3),C("ngClass",s.showPlatforms?"btn-primary":"btn-outline-primary"),g(2),C("ngIf",!s.showPlatforms),g(),C("ngIf",s.showPlatforms),g(),C("ngIf",s.showPlatforms),g(10),C("options",s.shapeOptions),g(5),Qe("ngModel",s.selectedColor),g(5),Qe("ngModel",s.selectedSize),g(5),Qe("ngModel",s.selectedName),g(4),C("ngForOf",s.resultSet),g(4),C("ngIf",!s.showHurricaneUI),g(),C("ngIf",s.showHurricaneUI),g(),C("ngIf",s.showHurricaneUI),g(2),C("ngClass",s.showPipelines?"btn-primary":"btn-outline-primary"),g(2),C("ngIf",!s.showPipelines),g(),C("ngIf",s.showPipelines),g(),C("ngIf",s.showPipelines))},dependencies:[Te,ni,Dn,Tn,ht,di,br,Hh,jt,At,Pv,yb,vb,bb,wb],styles:[".collapseIcon[_ngcontent-%COMP%]{line-height:inherit!important;float:right}.layerBtn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.2rem .4rem}.offcanvas.offcanvas-end[_ngcontent-%COMP%]{width:300px}"]});let t=e;return t})();var Sb=(()=>{let e=class e{constructor(){this.showPlatforms=!0,this.showLegend=!0}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=se({type:e,selectors:[["app-root"]],standalone:!0,features:[pe],decls:10,vars:0,consts:[[1,"container-fliud",2,"margin-top","50px"],[1,"row"],[1,"col-10"],[1,"sidebar","col-2","ps-0"],["name","appSpinner","type","ball-atom"],[1,"text-white"]],template:function(r,s){r&1&&(G(0,"app-header"),v(1,"div",0)(2,"div",1)(3,"div",2),G(4,"app-esri-map"),b(),v(5,"div",3),G(6,"app-side-panel"),b()()(),v(7,"ngx-spinner",4)(8,"h1",5),j(9," Loading... "),b()())},dependencies:[Te,cv,kv,Cb,rv],styles:[".sidebar[_ngcontent-%COMP%]{height:100vh;position:fixed-right;overflow-y:auto}"]});let t=e;return t})();m_(Sb,e0).catch(t=>console.error(t));
