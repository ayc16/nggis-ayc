import{c as ee}from"./chunk-GISCFF3Z.js";import{b as O,i as g,r as f,s as Z,t as Q}from"./chunk-HQMV3KQV.js";import{a as Y}from"./chunk-EAH6BNBL.js";function re(e){return e.__accessor__??null}function mt(e,t){return e?.metadata?.[t]!=null}function ne(e,t,r){return r?k(e,t,{policy:r,path:""}):k(e,t,null)}function k(e,t,r){return t?Object.keys(t).reduce((n,o)=>{let s=o,c=null,i="merge";if(r&&(c=r.path?`${r.path}.${o}`:o,i=r.policy(c)),i==="replace"||i==="replace-arrays"&&Array.isArray(n[s]))return n[s]=t[s],n;if(n[s]===void 0)return n[s]=O(t[s]),n;let a=n[s],u=t[s];if(a===u)return n;if(Array.isArray(u)||Array.isArray(n))a=a?Array.isArray(a)?n[s]=a.concat():n[s]=[a]:n[s]=[],u&&(Array.isArray(u)||(u=[u]),u.forEach(l=>{a.includes(l)||a.push(l)}));else if(u&&typeof u=="object")if(r){let l=r.path;r.path=c,n[s]=k(a,u,r),r.path=l}else n[s]=k(a,u,null);else n.hasOwnProperty(o)&&!t.hasOwnProperty(o)||(n[s]=u);return n},e||{}):e}function oe(e){return Array.isArray(e)?e:e.split(".")}function te(e){return e.includes(",")?e.split(",").map(t=>t.trim()):[e.trim()]}function Pe(e){if(Array.isArray(e)){let t=[];for(let r of e)t.push(...te(r));return t}return te(e)}function ht(e,t,r,n){let o=Pe(t);if(o.length!==1){let s=o.map(c=>n(e,c,r));return ee(s)}return n(e,o[0],r)}function xe(e){return e?.release&&typeof e.release=="function"}function Ce(e){return e?.acquire&&typeof e.acquire=="function"}var wt=(()=>{class e{constructor(r,n,o,s=1,c=0){if(this._ctor=r,this._acquireFunction=n,this._releaseFunction=o,this.allocationSize=s,this._pool=new Array(c),this._initialSize=c,this._ctor)for(let i=0;i<c;i++)this._pool[i]=new this._ctor;this.allocationSize=Math.max(s,1)}destroy(){this.prune(0)}acquire(...r){let n;if(e.test.disabled)n=new this._ctor;else{if(this._pool.length===0){let o=this.allocationSize;for(let s=0;s<o;s++)this._pool[s]=new this._ctor}n=this._pool.pop()}return this._acquireFunction?this._acquireFunction(n,...r):Ce(n)&&n.acquire(...r),n}release(r){r&&!e.test.disabled&&(this._releaseFunction?this._releaseFunction(r):xe(r)&&r.release(),this._pool.push(r))}prune(r=this._initialSize){if(!(r>=this._pool.length)){for(let n=r;n<this._pool.length;++n){let o=this._pool[n];this._dispose(o)}this._pool.length=r}}_dispose(r){r.dispose&&typeof r.dispose=="function"&&r.dispose()}}return e.test={disabled:!1},e})();var y;(function(e){e[e.Dirty=1]="Dirty",e[e.Overridden=2]="Overridden",e[e.Computing=4]="Computing",e[e.NonNullable=8]="NonNullable",e[e.HasDefaultValue=16]="HasDefaultValue",e[e.DepTrackingInitialized=32]="DepTrackingInitialized",e[e.AutoTracked=64]="AutoTracked",e[e.ExplicitlyTracking=128]="ExplicitlyTracking"})(y||(y={}));var P={onObservableAccessed:()=>{},onTrackingEnd:()=>{}},w=[],A=P;function E(e){A.onObservableAccessed(e)}var N=!1,S=!1;function Me(e,t,r){if(N)return I(e,t,r);ie(e);let n=t.call(r);return ae(),n}function kt(e,t){return Me(P,e,t)}function I(e,t,r){let n=N;N=!0,ie(e);let o=null;try{o=t.call(r)}catch(s){S&&f.getLogger("esri.core.accessorSupport.tracking").error(s)}return ae(),N=n,o}function ie(e){A=e,w.push(e)}function ae(){let e=w.length;if(e>1){let t=w.pop();A=w[e-2],t.onTrackingEnd()}else if(e===1){let t=w.pop();A=P,t.onTrackingEnd()}else A=P}function De(e,t){if(t.flags&y.DepTrackingInitialized)return;let r=S;S=!1,t.flags&y.AutoTracked?I(t,t.metadata.get,e):ze(e,t),S=r}var $e=[];function ze(e,t){t.flags&y.ExplicitlyTracking||(t.flags|=y.ExplicitlyTracking,I(t,()=>{let r=t.metadata.dependsOn||$e;for(let n of r)if(typeof n!="string"||n.includes(".")){let o=oe(n);for(let s=0,c=e;s<o.length&&c!=null&&typeof c=="object";++s)c=se(c,o[s],s!==o.length-1)}else se(e,n,!1)}),t.flags&=~y.ExplicitlyTracking)}function se(e,t,r){let n=t[t.length-1]==="?"?t.slice(0,-1):t;if(e.getItemAt!=null||Array.isArray(e)){let s=parseInt(n,10);if(!isNaN(s))return Array.isArray(e)?e[s]:e.at(s)}let o=re(e);if(o){let s=o.propertiesByName.get(n);s&&(E(s),De(e,s))}return r?e[n]:void 0}function St(e,t){for(let[r,n]of e)if(t(n,r))return!0;return!1}function Pt(e,t){for(let[r,n]of e)if(t(n,r))return n;return null}function ce(e,t,r){let n=e.get(t);if(n!==void 0)return n;let o=r();return e.set(t,o),o}function xt(e){let t=new Map;return r=>(t.has(r)||t.set(r,e(r)),t.get(r))}var m=()=>f.getLogger("esri.core.accessorSupport.ensureTypes");function Ee(e){return e==null?e:new Date(e)}function Ie(e){return e==null?e:!!e}function Fe(e){return e==null?e:e.toString()}function Le(e){return e==null?e:(e=parseFloat(e),isNaN(e)?0:e)}function Ve(e){return e==null?e:Math.round(parseFloat(e))}function Re(e){return null}function le(e){return e?.constructor&&e.constructor.__accessorMetadata__!==void 0}function x(e,t){return t!=null&&e&&!(t instanceof e)}function pe(e){return e&&"isCollection"in e}function ue(e){return e?.Type?typeof e.Type=="function"?e.Type:e.Type.base:null}function Ue(e,t){if(!t?.constructor||!pe(t.constructor))return F(e,t)?t:new e(t);let r=ue(e.prototype.itemType),n=ue(t.constructor.prototype.itemType);return r?n?r===n?t:r.prototype.isPrototypeOf(n.prototype)?new e(t):(F(e,t),t):new e(t):t}function F(e,t){return!!le(t)&&(m().error("Accessor#set","Assigning an instance of '"+(t.declaredClass||"unknown")+"' which is not a subclass of '"+M(e)+"'"),!0)}function qe(e,t){return t==null?t:pe(e)?Ue(e,t):x(e,t)?F(e,t)?t:new e(t):t}function M(e){return e?.prototype?.declaredClass||"unknown"}var Be=new WeakMap;function Je(e){switch(e){case Number:return Le;case v:return Ve;case Boolean:return Ie;case String:return Fe;case Date:return Ee;case _:return Re;default:return ce(Be,e,()=>qe.bind(null,e))}}function h(e,t){let r=Je(e);return arguments.length===1?r:r(t)}function C(e,t,r){return arguments.length===1?C.bind(null,e):t&&(Array.isArray(t)?t.map(n=>e(n,r)):[e(t,r)])}function zt(e,t){return arguments.length===1?C(r=>h(e,r)):C(r=>h(e,r),t)}function fe(e,t,r){return t!==0&&Array.isArray(r)?r.map(n=>fe(e,t-1,n)):e(r)}function L(e,t,r){if(arguments.length===2)return s=>L(e,t,s);if(!r)return r;r=fe(e,t,r);let n=t,o=r;for(;n>0&&Array.isArray(o);)n--,o=o[0];if(o!==void 0)for(let s=0;s<n;s++)r=[r];return r}function Et(e,t,r){return arguments.length===2?L(n=>h(e,n),t):L(n=>h(e,n),t,r)}function ye(e){return!!Array.isArray(e)&&!e.some(t=>{let r=typeof t;return!(r==="string"||r==="number"||r==="function"&&e.length>1)})}function Ge(e,t){if(arguments.length===2)return Ge(e).call(null,t);let r=new Set,n=e.filter(i=>typeof i!="function"),o=e.filter(i=>typeof i=="function");for(let i of e)typeof i!="string"&&typeof i!="number"||r.add(i);let s=null,c=null;return(i,a)=>{if(i==null)return i;let u=typeof i,l=u==="string"||u==="number";return l&&(r.has(i)||o.some(p=>u==="string"&&p===String||u==="number"&&p===Number))||u==="object"&&o.some(p=>!x(i,p))?i:(l&&n.length?(s||(s=n.map(p=>typeof p=="string"?`'${p}'`:`${p}`).join(", ")),m().error("Accessor#set",`'${i}' is not a valid value for this property, only the following values are valid: ${s}`)):typeof i=="object"&&o.length?(c||(c=o.map(p=>M(p)).join(", ")),m().error("Accessor#set",`'${i}' is not a valid value for this property, value must be one of ${c}`)):m().error("Accessor#set",`'${i}' is not a valid value for this property`),a&&(a.valid=!1),null)}}function Ke(e,t){if(arguments.length===2)return Ke(e).call(null,t);let r={},n=[],o=[];for(let a in e.typeMap){let u=e.typeMap[a];r[a]=h(u),n.push(M(u)),o.push(a)}let s=()=>`'${n.join("', '")}'`,c=()=>`'${o.join("', '")}'`,i=typeof e.key=="string"?a=>a[e.key]:e.key;return a=>{if(e.base&&!x(e.base,a)||a==null)return a;let u=i(a)||e.defaultKeyValue,l=r[u];if(!l)return m().error("Accessor#set",`Invalid property value, value needs to be one of ${s()}, or a plain object that can autocast (having .type = ${c()})`),null;if(!x(e.typeMap[u],a))return a;if(typeof e.key=="string"&&!le(a)){let p={};for(let d in a)d!==e.key&&(p[d]=a[d]);return l(p)}return l(a)}}var v=class{},_=class{},It={native:e=>({type:"native",value:e}),array:e=>({type:"array",value:e}),oneOf:e=>({type:"one-of",values:e})};function Ft(e){if(!e||!("type"in e))return!1;switch(e.type){case"native":case"array":case"one-of":return!0}return!1}function He(e){switch(e.type){case"native":return h(e.value);case"array":return C(He(e.value));case"one-of":return We(e);default:return null}}function We(e){let t=null;return(r,n)=>R(r,e)?r:(t==null&&(t=V(e)),m().error("Accessor#set",`Invalid property value, value needs to be of type ${t}`),n&&(n.valid=!1),null)}function V(e){switch(e.type){case"native":switch(e.value){case Number:return"number";case String:return"string";case Boolean:return"boolean";case v:return"integer";case Date:return"date";case _:return"null";default:return M(e.value)}case"array":return`array of ${V(e.value)}`;case"one-of":{let t=e.values.map(r=>V(r));return`one of ${t.slice(0,-1)} or ${t[t.length-1]}`}}return"unknown"}function R(e,t){if(e==null)return!0;switch(t.type){case"native":switch(t.value){case Number:case v:return typeof e=="number";case Boolean:return typeof e=="boolean";case String:return typeof e=="string";case _:return e===null}return e instanceof t.value;case"array":return!!Array.isArray(e)&&!e.some(r=>!R(r,t.value));case"one-of":return t.values.some(r=>R(e,r))}}var j=class extends Z{constructor(t,r,n){super(t,r,n)}};j.prototype.type="warning";var de=Symbol("Accessor-beforeDestroy");var D;(function(e){e[e.INITIALIZING=0]="INITIALIZING",e[e.CONSTRUCTING=1]="CONSTRUCTING",e[e.CONSTRUCTED=2]="CONSTRUCTED",e[e.DESTROYED=3]="DESTROYED"})(D||(D={}));function b(e){let t=e.constructor.__accessorMetadata__,r=Object.prototype.hasOwnProperty.call(e.constructor,"__accessorMetadata__");if(t){if(!r){t=Object.create(t);for(let n in t)t[n]=O(t[n]);Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0})}}else t={},Object.defineProperty(e.constructor,"__accessorMetadata__",{value:t,enumerable:!1,configurable:!0,writable:!0});return e.constructor.__accessorMetadata__}function Gt(e,t){let r=b(e),n=r[t];return n||(n=r[t]={}),n}function Kt(e,t){return ne(e,t,Ye)}var Xe=/^(?:[^.]+\.)?(?:value|type|(?:json\.type|json\.origins\.[^.]\.type))$/;function Ye(e){return Xe.test(e)?"replace":"merge"}function ge(e){if(e.json&&e.json.origins){let t=e.json.origins,r={"web-document":["web-scene","web-map"]};for(let n in r)if(t[n]){let o=t[n];r[n].forEach(s=>{t[s]=o}),delete t[n]}}}function $(e){return!!e&&e.prototype?.declaredClass&&e.prototype.declaredClass.indexOf("esri.core.Collection")===0}var U=()=>f.getLogger("esri.core.accessorSupport.extensions.serializableProperty.reader");function q(e,t,r){e&&(!r&&!t.read||t.read?.reader||t.read?.enabled===!1||tt(e)&&g("read.reader",Ze(e),t))}function Ze(e){let t=e.ndimArray??0;if(t>1)return et(e);if(t===1)return me(e);if("type"in e&&be(e.type)){let r=e.type.prototype?.itemType?.Type,n=me(typeof r=="function"?{type:r}:{types:r});return(o,s,c)=>{let i=n(o,s,c);return i&&new e.type(i)}}return B(e)}function B(e){return"type"in e?Qe(e.type):rt(e.types)}function Qe(e){return e.prototype.read?(t,r,n)=>{if(t==null)return t;let o=typeof t;if(o!=="object")return void U().error(`Expected JSON value of type 'object' to deserialize type '${e.prototype.declaredClass}', but got '${o}'`);let s=new e;return s.read(t,n),s}:e.fromJSON}function he(e,t,r,n){return n!==0&&Array.isArray(t)?t.map(o=>he(e,o,r,n-1)):e(t,void 0,r)}function et(e){let t=B(e),r=he.bind(null,t),n=e.ndimArray??0;return(o,s,c)=>{if(o==null)return o;o=r(o,c,n);let i=n,a=o;for(;i>0&&Array.isArray(a);)i--,a=a[0];if(a!==void 0)for(let u=0;u<i;u++)o=[o];return o}}function me(e){let t=B(e);return(r,n,o)=>{if(r==null)return r;if(Array.isArray(r)){let c=[];for(let i of r){let a=t(i,void 0,o);a!==void 0&&c.push(a)}return c}let s=t(r,void 0,o);return s!==void 0?[s]:void 0}}function be(e){if(!$(e))return!1;let t=e.prototype.itemType;return!(!t||!t.Type)&&(typeof t.Type=="function"?J(t.Type):we(t.Type))}function tt(e){return"types"in e?we(e.types):J(e.type)}function J(e){return!Array.isArray(e)&&!!e&&e.prototype&&("read"in e.prototype||"fromJSON"in e||be(e))}function we(e){for(let t in e.typeMap)if(!J(e.typeMap[t]))return!1;return!0}function rt(e){let t=null,r=e.errorContext??"type",n=e.validate;return(o,s,c)=>{if(o==null)return o;let i=typeof o;if(i!=="object")return void U().error(`Expected JSON value of type 'object' to deserialize, but got '${i}'`);t||(t=nt(e));let a=e.key;if(typeof a!="string")return;let u=o[a],l=u?t[u]:e.defaultKeyValue?e.typeMap[e.defaultKeyValue]:void 0;if(!l){let d=`Type '${u||"unknown"}' is not supported`;return c?.messages&&o&&c.messages.push(new j(`${r}:unsupported`,d,{definition:o,context:c})),void U().error(d)}let p=new l;return p.read(o,c),n?n(p):p}}function nt(e){let t={};for(let r in e.typeMap){let n=e.typeMap[r],o=b(n.prototype);if(typeof e.key=="function")continue;let s=o[e.key];if(!s)continue;if(s.json?.type&&Array.isArray(s.json.type)&&s.json.type.length===1&&typeof s.json.type[0]=="string"){t[s.json.type[0]]=n;continue}let c=s.json?.write;if(!c?.writer){t[r]=n;continue}let i=c.target,a=typeof i=="string"?i:e.key,u={};c.writer(r,u,a),u[a]&&(t[u[a]]=n)}return t}function je(e){if(e.json||(e.json={}),ve(e.json),_e(e.json),Ae(e.json),e.json.origins)for(let t in e.json.origins)ve(e.json.origins[t]),_e(e.json.origins[t]),Ae(e.json.origins[t]);return!0}function Ae(e){e.name&&(e.read&&typeof e.read=="object"?e.read.source===void 0&&(e.read.source=e.name):e.read={source:e.name},e.write&&typeof e.write=="object"?e.write.target===void 0&&(e.write.target=e.name):e.write={target:e.name})}function ve(e){typeof e.read=="boolean"?e.read={enabled:e.read}:typeof e.read=="function"?e.read={enabled:!0,reader:e.read}:e.read&&typeof e.read=="object"&&e.read.enabled===void 0&&(e.read.enabled=!0)}function _e(e){typeof e.write=="boolean"?e.write={enabled:e.write}:typeof e.write=="function"?e.write={enabled:!0,writer:e.write}:e.write&&typeof e.write=="object"&&e.write.enabled===void 0&&(e.write.enabled=!0)}function G(e,t){if(!t.write||t.write.writer||t.write.enabled===!1&&!t.write.overridePolicy)return;let r=e?.ndimArray??0;e&&(r===1||"type"in e&&$(e.type))?t.write.writer=at:r>1?t.write.writer=ct(r):t.types?Array.isArray(t.types)?t.write.writer=st(t.types[0]):t.write.writer=ot(t.types):t.write.writer=T}function ot(e){return(t,r,n,o)=>t?Te(t,e,o)?T(t,r,n,o):void 0:T(t,r,n,o)}function Te(e,t,r){for(let n in t.typeMap)if(e instanceof t.typeMap[n])return!0;if(r?.messages){let n=t.errorContext??"type",o=`Values of type '${(typeof t.key!="function"?e[t.key]:e.declaredClass)??"Unknown"}' cannot be written`;r&&r.messages&&e&&r.messages.push(new Q(`${n}:unsupported`,o,{definition:e,context:r})),f.getLogger("esri.core.accessorSupport.extensions.serializableProperty.writer").error(o)}return!1}function st(e){return(t,r,n,o)=>!t||!Array.isArray(t)?T(t,r,n,o):T(t.filter(s=>Te(s,e,o)),r,n,o)}function T(e,t,r,n){g(r,z(e,n),t)}function z(e,t){return e&&typeof e.write=="function"?e.write({},t):e&&typeof e.toJSON=="function"?e.toJSON():typeof e=="number"?it(e):e}function it(e){return e===-1/0?-Number.MAX_VALUE:e===1/0?Number.MAX_VALUE:isNaN(e)?null:e}function at(e,t,r,n){let o;e===null?o=null:e&&typeof e.map=="function"?(o=e.map(s=>z(s,n)),typeof o.toArray=="function"&&(o=o.toArray())):o=[z(e,n)],g(r,o,t)}function Oe(e,t,r){return r!==0&&Array.isArray(e)?e.map(n=>Oe(n,t,r-1)):z(e,t)}function ct(e){return(t,r,n,o)=>{let s;if(t===null)s=null;else{s=Oe(t,o,e);let c=e,i=s;for(;c>0&&Array.isArray(i);)c--,i=i[0];if(i!==void 0)for(let a=0;a<c;a++)s=[s]}g(n,s,r)}}function dr(e,t){return H(e,"any",t?.origin)}function gr(e,t){return H(e,"read",t?.origin)}function mr(e,t){return H(e,"write",t?.origin)}function H(e,t,r){let n=e?.json;if(n?.origins&&r){let o;o=r==="link-chart"?n.origins[r]&&(t==="any"||t in n.origins[r])?n.origins[r]:n.origins["web-map"]:n.origins[r],o&&(t==="any"||t in o)&&(n=o)}return n}function ut(e){let t=lt(e);if(e.json.origins)for(let r in e.json.origins){let n=e.json.origins[r],o=n.types?pt(n):t;q(o,n,!1),n.types&&!n.write&&e.json.write?.enabled&&(n.write=Y({},e.json.write)),G(o,n)}q(t,e.json,!0),G(t,e.json)}function lt(e){return e.json.types?K(e.json):e.type?ke(e):K(e)}function pt(e){return e.type?ke(e):K(e)}function ke(e){if(!e.type)return;let t=0,r=e.type;for(;Array.isArray(r)&&!ye(r);)r=r[0],t++;return{type:r,ndimArray:t}}function K(e){if(!e.types)return;let t=0,r=e.types;for(;Array.isArray(r);)r=r[0],t++;return{types:r,ndimArray:t}}function Ne(e){je(e)&&(ge(e),ut(e))}var W=new Set,X=new Set;function kr(e){return t=>{e??="esri.core.Accessor",t.prototype.declaredClass=e,yt(t);let r=[],n=[],o=t.prototype;for(;o;)o.hasOwnProperty("initialize")&&!W.has(o.initialize)&&(W.add(o.initialize),r.push(o.initialize)),o.hasOwnProperty("destroy")&&!X.has(o.destroy)&&(X.add(o.destroy),n.push(o.destroy)),o=Object.getPrototypeOf(o);W.clear(),X.clear();let s=class extends t{constructor(...i){if(super(...i),this.constructor===s&&typeof this.postscript=="function"){if(r.length&&Object.defineProperty(this,"initialize",{enumerable:!1,configurable:!0,value(){for(let a=r.length-1;a>=0;a--)r[a].call(this)}}),n.length){let a=!1,u=this[de];Object.defineProperty(this,"destroy",{enumerable:!1,configurable:!0,value(){if(!a){a=!0,u.call(this);for(let l=0;l<n.length;l++)n[l].call(this)}}})}Object.defineProperty(this,Symbol.dispose,{enumerable:!1,configurable:!0,value(){this.destroy()}}),this.postscript()}}};s.__accessorMetadata__=b(t.prototype),s.prototype.declaredClass=e;let c=(e||"AccessorSubclass").split(".").slice(-1)[0];return Object.defineProperty(s,"name",{value:c,configurable:!0}),s}}function ft(e,t){return t.get==null?function(){let r=this.__accessor__,n=r.propertiesByName.get(e);if(n===void 0)return;E(n);let o=r.store;return o.has(e)?o.get(e):n.metadata.value}:function(){let r=this.__accessor__,n=r.propertiesByName.get(e);if(n!==void 0)return n.getComputed(r)}}function yt(e){let t=e.prototype,r=b(t),n={};for(let o of Object.getOwnPropertyNames(r)){let s=r[o];Ne(s),n[o]={enumerable:!0,configurable:!0,get:ft(o,s),set(c){let i=this.__accessor__;if(i!==void 0){if(!Object.isFrozen(this))return i.initialized&&s.readOnly?Se("read-only",o):i.lifecycle===D.CONSTRUCTED&&s.constructOnly?Se("construct-only",o):void i.set(o,c)}else Object.defineProperty(this,o,{enumerable:!0,configurable:!0,writable:!0,value:c})}}}Object.defineProperties(e.prototype,n)}var Se=(e,t)=>{f.getLogger("esri.core.Accessor").error(`cannot assign to ${e} property '${t}'`)};export{de as a,re as b,mt as c,ne as d,oe as e,ht as f,D as g,b as h,Gt as i,Kt as j,wt as k,y as l,E as m,Me as n,kt as o,De as p,ze as q,St as r,Pt as s,ce as t,xt as u,Fe as v,Le as w,Ve as x,qe as y,h as z,C as A,zt as B,L as C,Et as D,ye as E,Ge as F,Ke as G,v as H,_ as I,It as J,Ft as K,He as L,j as M,Ze as N,it as O,dr as P,gr as Q,mr as R,kr as S};
