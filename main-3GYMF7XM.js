import{a as Ll,c as u0,d as Ps,e as vu}from"./chunk-RM56F5OF.js";import{b as A_,c as F_}from"./chunk-XRPMTSX6.js";import{a as _u,b as yu}from"./chunk-QW25UBG2.js";import{b as gu,c as ht,d as a0}from"./chunk-UWVTXX2V.js";import"./chunk-OQUBYVYT.js";import{a as p0}from"./chunk-QODWUC62.js";import{a as di,b as k_,c as kl,d as Al}from"./chunk-ZZUOGAMH.js";import{d as m0,e as f0,f as g0,g as _0}from"./chunk-AJX3FWW2.js";import{b as h0,g as b0,k as bu}from"./chunk-BTFKH6KF.js";import"./chunk-I7V2OAI2.js";import{a as Ur,e as y0}from"./chunk-RAMEUAPV.js";import"./chunk-5NHMASEK.js";import"./chunk-3K3SLH5Z.js";import{a as Nl,b as c0,c as Fs,d as v0}from"./chunk-77GHZE77.js";import{a as l0}from"./chunk-AHLE435U.js";import"./chunk-VORAPKV5.js";import{a as r0}from"./chunk-A5T4FFTE.js";import"./chunk-LK45ZNWD.js";import"./chunk-WKQVOD3E.js";import"./chunk-4OC4J3KU.js";import"./chunk-TOLXLK6N.js";import{t as d0}from"./chunk-CXJNPJ3A.js";import"./chunk-QU6JU243.js";import{a as o0,c as s0,i as Te}from"./chunk-7SVLZCA4.js";import{a as i0,b as n0}from"./chunk-ZVNCKSTP.js";import"./chunk-QAJCY744.js";import{a as fu}from"./chunk-BKLTKOZS.js";import{a as x_,b as uu,d as O_}from"./chunk-BZFJVAQS.js";import"./chunk-BWK3LBHF.js";import{a as Ol}from"./chunk-JC4ZKBNS.js";import"./chunk-GAF32LQP.js";import{c as I_}from"./chunk-JNONQQQT.js";import{a as ke}from"./chunk-FHBFWDFD.js";import{e as As}from"./chunk-S3DH7XZE.js";import{a as mu,b as Q_,c as J_,d as X_,e as e0}from"./chunk-4VSZITBC.js";import{b as le,c as E_,d as be}from"./chunk-YKUB35EI.js";import"./chunk-ZJHI7U3R.js";import{a as ci,b as Pl,c as R_,d as vi,f as L_,g as N_,i as V_,j as H_,k as B_,l as G_,m as j_,n as U_,o as z_,p as $_,q as W_,r as pu,s as q_,u as Z_,v as hu,w as Y_,y as K_}from"./chunk-RIQU3TLI.js";import{a as Fl,c as P_}from"./chunk-WBPLJNRU.js";import{b as t0}from"./chunk-2FU5HSUP.js";import{a as Rl}from"./chunk-4KGZTO2H.js";import"./chunk-2774JW3N.js";import"./chunk-3SWZR32A.js";import"./chunk-DXCDSOAV.js";import"./chunk-4XUK6P2F.js";import"./chunk-46I2RIMB.js";import"./chunk-3SBNJPR7.js";import"./chunk-WRIQADAP.js";import{a as M_}from"./chunk-R4ZRZJFL.js";import"./chunk-L657QK52.js";import"./chunk-5UE35WME.js";import"./chunk-4Y7EKSO4.js";import"./chunk-SCOBUUIE.js";import"./chunk-X7ZCOG35.js";import{a as xl}from"./chunk-MW7BA4EZ.js";import{a as T_,b as cu,c as du}from"./chunk-QNOFG4YA.js";import"./chunk-HHIR5BNR.js";import"./chunk-B6VNGUER.js";import{a as lu}from"./chunk-X7HIK3PZ.js";import{a as w_,b as El,c as C_,d as S_,e as Il}from"./chunk-2OOXFUAG.js";import"./chunk-4ZBUTOIE.js";import{e as y_,g as v_,j as b_}from"./chunk-CDCW33GU.js";import{a as Mo}from"./chunk-7JGBMAQ4.js";import"./chunk-DJEFBPF6.js";import{b as h_,c as m_}from"./chunk-IGLWZTM3.js";import{t as g_}from"./chunk-UJ32NKLH.js";import"./chunk-DYVXH2D6.js";import{a as ru}from"./chunk-UOQLGDDP.js";import"./chunk-XHIF7VIS.js";import{a as Yg,b as Kg}from"./chunk-X5XSKIWR.js";import{a as s_}from"./chunk-MJN6ZDZD.js";import{a as ou}from"./chunk-E3472BDJ.js";import{a as i_}from"./chunk-4D3QHJI2.js";import{c as Jg,e as Xg,g as e_,j as t_}from"./chunk-E2J2V7JN.js";import{a as Zg}from"./chunk-AGT7IE2H.js";import{b as tu}from"./chunk-37H4LYIE.js";import"./chunk-D6Q6GMSU.js";import{a as Qg}from"./chunk-IXG346EU.js";import"./chunk-HUYHDVA2.js";import"./chunk-YUIUJIOR.js";import"./chunk-4QS7PGAF.js";import"./chunk-NIYDRLW4.js";import{a as au}from"./chunk-XHOTVM3O.js";import"./chunk-H3VY6XFU.js";import"./chunk-LNYBTIG7.js";import{a as yn}from"./chunk-ACH5BMOT.js";import"./chunk-UBMORCKY.js";import"./chunk-CLVC2DXO.js";import"./chunk-RZU6EEB3.js";import"./chunk-WDTJILD4.js";import"./chunk-ELOLYWII.js";import"./chunk-ITQMD4YG.js";import"./chunk-V5WEARAB.js";import"./chunk-UZW3KXUC.js";import"./chunk-EGCJAGQM.js";import"./chunk-TG4PXMOO.js";import{a as hg}from"./chunk-HSRIUK76.js";import"./chunk-4S7NY4TS.js";import"./chunk-AN6X7B73.js";import"./chunk-FKIHG4NK.js";import"./chunk-UC7SIIH5.js";import"./chunk-4S7K5A3I.js";import"./chunk-SIDAXOMN.js";import"./chunk-S2CEVLI5.js";import"./chunk-ZLKXQ3X4.js";import"./chunk-DTDFZYW6.js";import{a as su}from"./chunk-XURBKGOF.js";import"./chunk-XSGDUFLB.js";import"./chunk-4VRL7OJD.js";import"./chunk-64QAVEVQ.js";import"./chunk-FCT46YZ7.js";import"./chunk-KQ3PALPO.js";import"./chunk-DYBVQO6C.js";import"./chunk-H5BQFJQG.js";import"./chunk-ZPGECEOH.js";import"./chunk-IK3IRLTV.js";import"./chunk-SFX6QP6J.js";import"./chunk-BRJSO7CG.js";import"./chunk-AATZFFI5.js";import"./chunk-YNG4NJVY.js";import"./chunk-3FOGM572.js";import"./chunk-4ANB723A.js";import"./chunk-IGVG5UOD.js";import"./chunk-GT3C7LC6.js";import{a as f_}from"./chunk-LNUI6KC7.js";import"./chunk-BXHQ44WX.js";import"./chunk-EWHTP5EW.js";import"./chunk-N3SZSSU6.js";import"./chunk-3JBDNTAW.js";import"./chunk-H63LVRK7.js";import"./chunk-72WWHQIV.js";import"./chunk-QPCBRHQI.js";import"./chunk-MZNGYP6Z.js";import"./chunk-3GCOAQPV.js";import"./chunk-SJU4N7KJ.js";import"./chunk-6NTJ4HVA.js";import"./chunk-X2KAPCU7.js";import"./chunk-JD3KGBGX.js";import"./chunk-GC4LGG7K.js";import"./chunk-VXW5JMKD.js";import"./chunk-QCG2T55M.js";import"./chunk-NJ5QXHI6.js";import"./chunk-SJTQM4NH.js";import"./chunk-AODEXMIK.js";import"./chunk-NYOCZ43I.js";import"./chunk-IFFYADB3.js";import"./chunk-TMYZ2I35.js";import"./chunk-CBIYPMNC.js";import"./chunk-LHY2TOIB.js";import"./chunk-F4UISFW6.js";import"./chunk-TXAFMDDV.js";import"./chunk-ZCSEBPCJ.js";import"./chunk-S3JJYXYO.js";import"./chunk-LOEAA5XF.js";import"./chunk-S2YBNG2F.js";import"./chunk-NSK56ILC.js";import{a as p_}from"./chunk-R2Q5NMSG.js";import{k as Dl,l as r_,m as a_}from"./chunk-QL456MD5.js";import{a as bl,b as xs}from"./chunk-IY6MAS3P.js";import{B as jr,e as d_,u as u_}from"./chunk-RPWH7ONJ.js";import"./chunk-H76XKIVW.js";import{a as l_,b as c_}from"./chunk-UWZJQ7YC.js";import{i as n_,k as o_,m as iu,n as nu}from"./chunk-NC2NFLV7.js";import{a as Qi}from"./chunk-UJ6V7JUK.js";import"./chunk-GK2MPWKO.js";import"./chunk-FZUISW3U.js";import"./chunk-3NCGJLJJ.js";import"./chunk-Z5FRAQHK.js";import"./chunk-LQWMDYLF.js";import"./chunk-BW3UVZYU.js";import{a as Kn}from"./chunk-47Q3ZDMA.js";import{a as Og,b as kg}from"./chunk-QD5H3SJ3.js";import"./chunk-V2JYXY4D.js";import"./chunk-7LLNOPTV.js";import"./chunk-XRRPDCIR.js";import{d as eu}from"./chunk-XF4ZC6Y7.js";import"./chunk-BBLWQBZT.js";import{a as Cg}from"./chunk-D6QUKPEY.js";import"./chunk-VIAVLHRB.js";import"./chunk-UMZZ3I5D.js";import"./chunk-LSEOQ2KR.js";import{a as jg}from"./chunk-VXJKEPDS.js";import"./chunk-J7IKN4ZN.js";import{a as qg}from"./chunk-I3S324BU.js";import"./chunk-OM7Z3UKX.js";import"./chunk-VNTMBMJI.js";import"./chunk-A66ZXMJV.js";import"./chunk-6KRFVLII.js";import"./chunk-OJB2TSJ7.js";import"./chunk-MCO7DSFO.js";import"./chunk-LUPAMFKK.js";import"./chunk-7JD62GP7.js";import"./chunk-HHJJPMV6.js";import"./chunk-F47ZTJ7Y.js";import"./chunk-YXPGI3LI.js";import"./chunk-LSFTWXAE.js";import{a as Ng,d as Vg}from"./chunk-OO35HBWJ.js";import"./chunk-R5OKRCI7.js";import"./chunk-2EF3JPLL.js";import"./chunk-FWB3IYJJ.js";import"./chunk-U6WVZEYH.js";import"./chunk-KRMYHUR3.js";import"./chunk-R4NNYEN7.js";import{a as ks}from"./chunk-PDBA6QOJ.js";import{b as Ug,c as zg,g as $g,h as Xd,i as Wg}from"./chunk-CF52RSJZ.js";import"./chunk-ALWV3RJ2.js";import"./chunk-7C6Z24SS.js";import{c as Sl,e as Lg,g as Tl,h as Yn,r as Ml}from"./chunk-7G4KK3KW.js";import"./chunk-J3ZDC5ZE.js";import"./chunk-KYNKUTEO.js";import"./chunk-QWLQUMDY.js";import{a as Os,b as Hg,d as Bg,i as Gg,s as To}from"./chunk-2ETHV3H2.js";import{a as cl,b as dl,c as qd,d as Zd,e as kt,f as ze,g as Ze}from"./chunk-AUSMAEKP.js";import{b as Yd,g as M,h as Jf}from"./chunk-WVCJLLRA.js";import{c as Xf}from"./chunk-MDSLION2.js";import{f as Hr,k as Qf}from"./chunk-OVOWBDBP.js";import"./chunk-V2KSICSA.js";import{a as x,b as ai,c as Li,d as gn,f as _n,g as ie,h as qe}from"./chunk-4XUOIGFO.js";import"./chunk-5HCLBNUR.js";import"./chunk-JZ3XIQ5W.js";import{a as Fg,b as Pg,c as Rg}from"./chunk-OMYJOG47.js";import{b as D_}from"./chunk-3B4QONMA.js";import"./chunk-3SZQ2UT4.js";import{a as eg}from"./chunk-SPDSGGOE.js";import"./chunk-2OKSPLJT.js";import"./chunk-7LEG2VDW.js";import"./chunk-R2HWUZ3L.js";import{a as pl}from"./chunk-G24ZJINL.js";import{l as __}from"./chunk-T25YY3N7.js";import"./chunk-ALQ3STGG.js";import"./chunk-EETFV2SL.js";import{d as me}from"./chunk-AM3VOA32.js";import"./chunk-SAOUSUZE.js";import"./chunk-LECQV7I4.js";import{a as Sg,b as Tg,c as Mg,d as wl,e as Cl,f as Dg,g as Zn,j as Eg,n as Ig,o as xg}from"./chunk-7HZKOXPR.js";import"./chunk-DFTBSFIN.js";import"./chunk-4HISZWR4.js";import"./chunk-33BSK37G.js";import{a as Ag}from"./chunk-TQAPQODA.js";import"./chunk-M2GLXRA2.js";import"./chunk-EBWCXIFH.js";import{p as vl,q as wg}from"./chunk-MRVR6F6G.js";import{a as Kd,c as mg,i as fg}from"./chunk-WXQQZY3K.js";import{a as So,h as vg,j as _l,k as yl,s as bg,v as Jd}from"./chunk-VPMDQK57.js";import"./chunk-BCREO4Q5.js";import"./chunk-ZVHU7VE3.js";import{b as Qd,d as Gr,f as gl,g as yg}from"./chunk-76YVRX2R.js";import{l as _g}from"./chunk-OZF6BMOL.js";import"./chunk-GJP6PTKT.js";import{a as fl,c as gg}from"./chunk-RSDQHAJX.js";import{b as Wf,d as qf}from"./chunk-HMKFQDR7.js";import"./chunk-2OT2C2UU.js";import{a as Wd,b as $f}from"./chunk-XIMCHX2H.js";import{b as Y}from"./chunk-SF6Z2K5H.js";import{a as Ue}from"./chunk-GBTN5LIS.js";import{c as Kf,e as qn}from"./chunk-JOSG37QF.js";import"./chunk-SLMQFZE3.js";import"./chunk-FJDNRF2P.js";import"./chunk-VNB5ZT3P.js";import{a as Br}from"./chunk-NDG5FXLR.js";import"./chunk-EJG3F6VR.js";import{a as Zf,b as Yf}from"./chunk-5ODCEDHC.js";import"./chunk-BENVXA3L.js";import{e as lg,h as cg,i as dg,j as ug,l as Fe,m as ml,o as pg,v as Ki}from"./chunk-SA4OMQAD.js";import{a as tg,b as Is}from"./chunk-24BLFS5R.js";import{A as ng,I as og,N as sg,O as rg,R as Co,a as ig,ea as ag,l as Es,m as hl}from"./chunk-JDDD6VJ4.js";import"./chunk-VOYK3LZF.js";import{a as Uf,c as zf}from"./chunk-HOJTYTYD.js";import{a as li}from"./chunk-XNEAL2YW.js";import"./chunk-J7M5V2SQ.js";import"./chunk-RQD6EDD6.js";import{aa as ul}from"./chunk-XPCG2OJX.js";import{E as Nf,F as Vf,L as d,O as P,U as jf,W as Ds,b as ws,d as jd,f as Ef,g as Ud,h as ll,i as fn,o as Vr,r as Lf,s as Ri}from"./chunk-AUTL5LCV.js";import{H as zd,M as $d,S as b,r as Wn,t as Hf,y as Bf,z as Gf}from"./chunk-KUJG22IX.js";import"./chunk-OVHPPCBL.js";import{a as l}from"./chunk-W3WDPWBE.js";import{B as Pf,C as wo,a as $t,c as Cs,f as Yi,h as If,j as Ss,k as Ot,m as xf,p as Ts,r as $n,s as Ms,t as ri,v as Of,x as kf,y as Af,z as Ff}from"./chunk-GISCFF3Z.js";import{b as se,d as Me,e as mn}from"./chunk-MLSR6YE6.js";import{a as Rf}from"./chunk-SNFOAZZQ.js";import"./chunk-CPDJJRWA.js";import"./chunk-DKS57BVI.js";import"./chunk-VU5W7W6Y.js";import{$ as ue,$a as cf,$b as jn,A as os,Aa as as,Ab as mf,Ac as zn,B as Er,Ba as Km,Bb as ff,Bc as vs,C as Hm,Ca as Qm,Cb as It,Cc as bs,D as Dd,Da as Jm,Db as xt,E as Vn,Ea as Xm,Eb as pe,F as Bm,Fa as ef,Fb as he,G as Gm,Ga as tf,Gb as Ne,H as Ir,Ha as nf,Hb as R,I as Hn,Ia as hn,Ib as de,J as Ed,Ja as Fr,Jb as pt,K as jm,Ka as of,Kb as gf,L as Um,La as Pr,Lb as Xe,M as xr,Ma as g,Mb as et,N as ki,Na as V,Nb as tt,O as Qe,Oa as Ad,Ob as yi,P as Je,Pa as Oe,Pb as ae,Q as Xa,Qa as sf,Qb as oi,R as Ce,Ra as rf,Rb as ms,S as ii,Sa as il,Sb as Rd,T as z,Ta as ls,Tb as _f,U as Pt,Ua as af,Ub as fs,V as zm,Va as st,Vb as Ld,W as xe,Wa as nl,Wb as Nd,X as Id,Xa as cs,Xb as si,Y as Se,Ya as Gn,Yb as ol,Z as F,Za as Rr,Zb as sl,_ as Or,_a as lf,_b as yf,a as un,aa as ee,ab as df,ac as Vd,b as Om,ba as Rt,bb as B,bc as vf,c as Cd,ca as ye,cb as Et,cc as Lt,d as Sd,da as el,db as C,dc as bf,e as Td,ea as Bn,eb as gi,ec as Be,f as Ie,fa as $m,fb as ut,fc as Lr,g as Re,ga as kr,gb as _i,gc as gs,h as km,ha as vo,hb as Fd,hc as wf,i as Am,ia as Wm,ib as Le,ic as Cf,j as pn,ja as Ut,jb as uf,jc as We,k as ei,ka as O,kb as bo,kc as rl,l as J,la as k,lb as Ai,lc as Sf,m as Dr,ma as ni,mb as Fi,mc as Tf,n as Fm,na as Ar,nb as _,nc as zt,o as Pm,oa as Zi,ob as y,oc as Un,p as re,pa as xd,pb as L,pc as Pi,q as Ja,qa as tl,qb as ds,qc as _s,r as ti,ra as He,rb as us,rc as ve,s as Rm,sa as $,sb as Pd,sc as Mf,t as Md,ta as qm,tb as oe,tc as Hd,u as Lm,ua as Od,ub as pf,uc as Df,v as jt,va as Zm,vb as hf,w as ns,wa as ss,wb as E,x as yt,xa as Ym,xb as T,xc as al,y as Nm,ya as kd,yb as ps,yc as ys,z as Vm,za as rs,zb as hs}from"./chunk-3F26ENCW.js";import{b as Nr,k as Gd,r as Z,t as ne}from"./chunk-HQMV3KQV.js";import{a as Ge,i as Bd,q as vt}from"./chunk-CRMMDK2Z.js";import"./chunk-MDAB6L5Y.js";import"./chunk-FMFGIQYB.js";import{a as v,b as G,d as xm,e as p1,f as h1,h as I}from"./chunk-EAH6BNBL.js";var Bb=p1((Ph,Rh)=>{"use strict";(function(e,t){typeof define=="function"&&define.amd?define([],t):typeof Ph<"u"?t():(t(),e.FileSaver={})})(Ph,function(){"use strict";function e(a,c){return typeof c>"u"?c={autoBom:!1}:typeof c!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),c={autoBom:!c}),c.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}function t(a,c,u){var p=new XMLHttpRequest;p.open("GET",a),p.responseType="blob",p.onload=function(){r(p.response,c,u)},p.onerror=function(){console.error("could not download file")},p.send()}function n(a){var c=new XMLHttpRequest;c.open("HEAD",a,!1);try{c.send()}catch{}return 200<=c.status&&299>=c.status}function i(a){try{a.dispatchEvent(new MouseEvent("click"))}catch{var c=document.createEvent("MouseEvents");c.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(c)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:void 0,s=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),r=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!s?function(a,c,u){var p=o.URL||o.webkitURL,h=document.createElement("a");c=c||a.name||"download",h.download=c,h.rel="noopener",typeof a=="string"?(h.href=a,h.origin===location.origin?i(h):n(h.href)?t(a,c,u):i(h,h.target="_blank")):(h.href=p.createObjectURL(a),setTimeout(function(){p.revokeObjectURL(h.href)},4e4),setTimeout(function(){i(h)},0))}:"msSaveOrOpenBlob"in navigator?function(a,c,u){if(c=c||a.name||"download",typeof a!="string")navigator.msSaveOrOpenBlob(e(a,u),c);else if(n(a))t(a,c,u);else{var p=document.createElement("a");p.href=a,p.target="_blank",setTimeout(function(){i(p)})}}:function(a,c,u,p){if(p=p||open("","_blank"),p&&(p.document.title=p.document.body.innerText="downloading..."),typeof a=="string")return t(a,c,u);var h=a.type==="application/octet-stream",m=/constructor/i.test(o.HTMLElement)||o.safari,f=/CriOS\/[\d]+/.test(navigator.userAgent);if((f||h&&m||s)&&typeof FileReader<"u"){var S=new FileReader;S.onloadend=function(){var N=S.result;N=f?N:N.replace(/^data:[^;]*;/,"data:attachment/file;"),p?p.location.href=N:location=N,p=null},S.readAsDataURL(a)}else{var A=o.URL||o.webkitURL,H=A.createObjectURL(a);p?p.location=H:location.href=H,p=null,setTimeout(function(){A.revokeObjectURL(H)},4e4)}});o.saveAs=r.saveAs=r,typeof Rh<"u"&&(Rh.exports=r)})});var Su=class extends Cf{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Tu=class e extends Su{static makeCurrent(){wf(new e)}onAndCancel(t,n,i){return t.addEventListener(n,i),()=>{t.removeEventListener(n,i)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return n=n||this.getDefaultDocument(),n.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return n==="window"?window:n==="document"?t:n==="body"?t.body:null}getBaseHref(t){let n=g1();return n==null?null:_1(n)}resetBaseElement(){zr=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Tf(document.cookie,t)}},zr=null;function g1(){return zr=zr||document.querySelector("base"),zr?zr.getAttribute("href"):null}function _1(e){return new URL(e,document.baseURI).pathname}var y1=(()=>{let t=class t{build(){return new XMLHttpRequest}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=z({token:t,factory:t.\u0275fac});let e=t;return e})(),Mu=new xe(""),T0=(()=>{let t=class t{constructor(i,o){this._zone=o,this._eventNameToPlugin=new Map,i.forEach(s=>{s.manager=this}),this._plugins=i.slice().reverse()}addEventListener(i,o,s){return this._findPluginFor(o).addEventListener(i,o,s)}getZone(){return this._zone}_findPluginFor(i){let o=this._eventNameToPlugin.get(i);if(o)return o;if(o=this._plugins.find(r=>r.supports(i)),!o)throw new Ce(5101,!1);return this._eventNameToPlugin.set(i,o),o}};t.\u0275fac=function(o){return new(o||t)(Se(Mu),Se(st))},t.\u0275prov=z({token:t,factory:t.\u0275fac});let e=t;return e})(),Vl=class{constructor(t){this._doc=t}},wu="ng-app-id",M0=(()=>{let t=class t{constructor(i,o,s,r={}){this.doc=i,this.appId=o,this.nonce=s,this.platformId=r,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Hd(r),this.resetHostNodes()}addStyles(i){for(let o of i)this.changeUsageCount(o,1)===1&&this.onStyleAdded(o)}removeStyles(i){for(let o of i)this.changeUsageCount(o,-1)<=0&&this.onStyleRemoved(o)}ngOnDestroy(){let i=this.styleNodesInDOM;i&&(i.forEach(o=>o.remove()),i.clear());for(let o of this.getAllStyles())this.onStyleRemoved(o);this.resetHostNodes()}addHost(i){this.hostNodes.add(i);for(let o of this.getAllStyles())this.addStyleToHost(i,o)}removeHost(i){this.hostNodes.delete(i)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(i){for(let o of this.hostNodes)this.addStyleToHost(o,i)}onStyleRemoved(i){let o=this.styleRef;o.get(i)?.elements?.forEach(s=>s.remove()),o.delete(i)}collectServerRenderedStyles(){let i=this.doc.head?.querySelectorAll(`style[${wu}="${this.appId}"]`);if(i?.length){let o=new Map;return i.forEach(s=>{s.textContent!=null&&o.set(s.textContent,s)}),o}return null}changeUsageCount(i,o){let s=this.styleRef;if(s.has(i)){let r=s.get(i);return r.usage+=o,r.usage}return s.set(i,{usage:o,elements:[]}),o}getStyleElement(i,o){let s=this.styleNodesInDOM,r=s?.get(o);if(r?.parentNode===i)return s.delete(o),r.removeAttribute(wu),r;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=o,this.platformIsServer&&a.setAttribute(wu,this.appId),i.appendChild(a),a}}addStyleToHost(i,o){let s=this.getStyleElement(i,o),r=this.styleRef,a=r.get(o)?.elements;a?a.push(s):r.set(o,{elements:[s],usage:1})}resetHostNodes(){let i=this.hostNodes;i.clear(),i.add(this.doc.head)}};t.\u0275fac=function(o){return new(o||t)(Se(We),Se(Od),Se(kd,8),Se(ss))},t.\u0275prov=z({token:t,factory:t.\u0275fac});let e=t;return e})(),Cu={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Eu=/%COMP%/g,D0="%COMP%",v1=`_nghost-${D0}`,b1=`_ngcontent-${D0}`,w1=!0,C1=new xe("",{providedIn:"root",factory:()=>w1});function S1(e){return b1.replace(Eu,e)}function T1(e){return v1.replace(Eu,e)}function E0(e,t){return t.map(n=>n.replace(Eu,e))}var Hl=(()=>{let t=class t{constructor(i,o,s,r,a,c,u,p=null){this.eventManager=i,this.sharedStylesHost=o,this.appId=s,this.removeStylesOnCompDestroy=r,this.doc=a,this.platformId=c,this.ngZone=u,this.nonce=p,this.rendererByCompId=new Map,this.platformIsServer=Hd(c),this.defaultRenderer=new $r(i,a,u,this.platformIsServer)}createRenderer(i,o){if(!i||!o)return this.defaultRenderer;this.platformIsServer&&o.encapsulation===Or.ShadowDom&&(o=G(v({},o),{encapsulation:Or.Emulated}));let s=this.getOrCreateRenderer(i,o);return s instanceof Bl?s.applyToHost(i):s instanceof Wr&&s.applyStyles(),s}getOrCreateRenderer(i,o){let s=this.rendererByCompId,r=s.get(o.id);if(!r){let a=this.doc,c=this.ngZone,u=this.eventManager,p=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(o.encapsulation){case Or.Emulated:r=new Bl(u,p,o,this.appId,h,a,c,m);break;case Or.ShadowDom:return new Du(u,p,i,o,a,c,this.nonce,m);default:r=new Wr(u,p,o,h,a,c,m);break}s.set(o.id,r)}return r}ngOnDestroy(){this.rendererByCompId.clear()}};t.\u0275fac=function(o){return new(o||t)(Se(T0),Se(M0),Se(Od),Se(C1),Se(We),Se(ss),Se(st),Se(kd))},t.\u0275prov=z({token:t,factory:t.\u0275fac});let e=t;return e})(),$r=class{constructor(t,n,i,o){this.eventManager=t,this.doc=n,this.ngZone=i,this.platformIsServer=o,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,n){return n?this.doc.createElementNS(Cu[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(w0(t)?t.content:t).appendChild(n)}insertBefore(t,n,i){t&&(w0(t)?t.content:t).insertBefore(n,i)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let i=typeof t=="string"?this.doc.querySelector(t):t;if(!i)throw new Ce(-5104,!1);return n||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,i,o){if(o){n=o+":"+n;let s=Cu[o];s?t.setAttributeNS(s,n,i):t.setAttribute(n,i)}else t.setAttribute(n,i)}removeAttribute(t,n,i){if(i){let o=Cu[i];o?t.removeAttributeNS(o,n):t.removeAttribute(`${i}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,i,o){o&(Pr.DashCase|Pr.Important)?t.style.setProperty(n,i,o&Pr.Important?"important":""):t.style[n]=i}removeStyle(t,n,i){i&Pr.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,i){t!=null&&(t[n]=i)}setValue(t,n){t.nodeValue=n}listen(t,n,i){if(typeof t=="string"&&(t=gs().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${n}`);return this.eventManager.addEventListener(t,n,this.decoratePreventDefault(i))}decoratePreventDefault(t){return n=>{if(n==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(n)):t(n))===!1&&n.preventDefault()}}};function w0(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var Du=class extends $r{constructor(t,n,i,o,s,r,a,c){super(t,s,r,c),this.sharedStylesHost=n,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=E0(o.id,o.styles);for(let p of u){let h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=p,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,i){return super.insertBefore(this.nodeOrShadowRoot(t),n,i)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Wr=class extends $r{constructor(t,n,i,o,s,r,a,c){super(t,s,r,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=o,this.styles=c?E0(c,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Bl=class extends Wr{constructor(t,n,i,o,s,r,a,c){let u=o+"-"+i.id;super(t,n,i,s,r,a,c,u),this.contentAttr=S1(u),this.hostAttr=T1(u)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){let i=super.createElement(t,n);return super.setAttribute(i,this.contentAttr,""),i}},M1=(()=>{let t=class t extends Vl{constructor(i){super(i)}supports(i){return!0}addEventListener(i,o,s){return i.addEventListener(o,s,!1),()=>this.removeEventListener(i,o,s)}removeEventListener(i,o,s){return i.removeEventListener(o,s)}};t.\u0275fac=function(o){return new(o||t)(Se(We))},t.\u0275prov=z({token:t,factory:t.\u0275fac});let e=t;return e})(),C0=["alt","control","meta","shift"],D1={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},E1={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},I1=(()=>{let t=class t extends Vl{constructor(i){super(i)}supports(i){return t.parseEventName(i)!=null}addEventListener(i,o,s){let r=t.parseEventName(o),a=t.eventCallback(r.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>gs().onAndCancel(i,r.domEventName,a))}static parseEventName(i){let o=i.toLowerCase().split("."),s=o.shift();if(o.length===0||!(s==="keydown"||s==="keyup"))return null;let r=t._normalizeKey(o.pop()),a="",c=o.indexOf("code");if(c>-1&&(o.splice(c,1),a="code."),C0.forEach(p=>{let h=o.indexOf(p);h>-1&&(o.splice(h,1),a+=p+".")}),a+=r,o.length!=0||r.length===0)return null;let u={};return u.domEventName=s,u.fullKey=a,u}static matchEventFullKeyCode(i,o){let s=D1[i.key]||i.key,r="";return o.indexOf("code.")>-1&&(s=i.code,r="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),C0.forEach(a=>{if(a!==s){let c=E1[a];c(i)&&(r+=a+".")}}),r+=s,r===o)}static eventCallback(i,o,s){return r=>{t.matchEventFullKeyCode(r,i)&&s.runGuarded(()=>o(r))}}static _normalizeKey(i){return i==="esc"?"escape":i}};t.\u0275fac=function(o){return new(o||t)(Se(We))},t.\u0275prov=z({token:t,factory:t.\u0275fac});let e=t;return e})();function I0(e,t){return bf(v({rootComponent:e},x1(t)))}function x1(e){return{appProviders:[...P1,...e?.providers??[]],platformProviders:F1}}function O1(){Tu.makeCurrent()}function k1(){return new xd}function A1(){return qm(document),document}var F1=[{provide:ss,useValue:Mf},{provide:Zm,useValue:O1,multi:!0},{provide:We,useFactory:A1,deps:[]}];var P1=[{provide:$m,useValue:"root"},{provide:xd,useFactory:k1,deps:[]},{provide:Mu,useClass:M1,multi:!0,deps:[We,st,ss]},{provide:Mu,useClass:I1,multi:!0,deps:[We]},Hl,M0,T0,{provide:il,useExisting:Hl},{provide:Df,useClass:y1,deps:[]},[]];var x0=(()=>{let t=class t{constructor(i){this._doc=i}getTitle(){return this._doc.title}setTitle(i){this._doc.title=i||""}};t.\u0275fac=function(o){return new(o||t)(Se(We))},t.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var qr=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=z({token:t,factory:function(o){let s=null;return o?s=new(o||t):s=Se(R1),s},providedIn:"root"});let e=t;return e})(),R1=(()=>{let t=class t extends qr{constructor(i){super(),this._doc=i}sanitize(i,o){if(o==null)return null;switch(i){case hn.NONE:return o;case hn.HTML:return as(o,"HTML")?rs(o):nf(this._doc,String(o)).toString();case hn.STYLE:return as(o,"Style")?rs(o):o;case hn.SCRIPT:if(as(o,"Script"))return rs(o);throw new Ce(5200,!1);case hn.URL:return as(o,"URL")?rs(o):tf(String(o));case hn.RESOURCE_URL:if(as(o,"ResourceURL"))return rs(o);throw new Ce(5201,!1);default:throw new Ce(5202,!1)}}bypassSecurityTrustHtml(i){return Km(i)}bypassSecurityTrustStyle(i){return Qm(i)}bypassSecurityTrustScript(i){return Jm(i)}bypassSecurityTrustUrl(i){return Xm(i)}bypassSecurityTrustResourceUrl(i){return ef(i)}};t.\u0275fac=function(o){return new(o||t)(Se(We))},t.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var te="primary",la=Symbol("RouteTitle"),Fu=class{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Hs(e){return new Fu(e)}function L1(e,t,n){let i=n.path.split("/");if(i.length>e.length||n.pathMatch==="full"&&(t.hasChildren()||i.length<e.length))return null;let o={};for(let s=0;s<i.length;s++){let r=i[s],a=e[s];if(r.startsWith(":"))o[r.substring(1)]=a;else if(r!==a.path)return null}return{consumed:e.slice(0,i.length),posParams:o}}function N1(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!Ji(e[n],t[n]))return!1;return!0}function Ji(e,t){let n=e?Pu(e):void 0,i=t?Pu(t):void 0;if(!n||!i||n.length!=i.length)return!1;let o;for(let s=0;s<n.length;s++)if(o=n[s],!R0(e[o],t[o]))return!1;return!0}function Pu(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function R0(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;let n=[...e].sort(),i=[...t].sort();return n.every((o,s)=>i[s]===o)}else return e===t}function L0(e){return e.length>0?e[e.length-1]:null}function Xn(e){return Fm(e)?e:sl(e)?ei(Promise.resolve(e)):J(e)}var V1={exact:V0,subset:H0},N0={exact:H1,subset:B1,ignored:()=>!0};function O0(e,t,n){return V1[n.paths](e.root,t.root,n.matrixParams)&&N0[n.queryParams](e.queryParams,t.queryParams)&&!(n.fragment==="exact"&&e.fragment!==t.fragment)}function H1(e,t){return Ji(e,t)}function V0(e,t,n){if(!Eo(e.segments,t.segments)||!Ul(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(let i in t.children)if(!e.children[i]||!V0(e.children[i],t.children[i],n))return!1;return!0}function B1(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>R0(e[n],t[n]))}function H0(e,t,n){return B0(e,t,t.segments,n)}function B0(e,t,n,i){if(e.segments.length>n.length){let o=e.segments.slice(0,n.length);return!(!Eo(o,n)||t.hasChildren()||!Ul(o,n,i))}else if(e.segments.length===n.length){if(!Eo(e.segments,n)||!Ul(e.segments,n,i))return!1;for(let o in t.children)if(!e.children[o]||!H0(e.children[o],t.children[o],i))return!1;return!0}else{let o=n.slice(0,e.segments.length),s=n.slice(e.segments.length);return!Eo(e.segments,o)||!Ul(e.segments,o,i)||!e.children[te]?!1:B0(e.children[te],t,s,i)}}function Ul(e,t,n){return t.every((i,o)=>N0[n](e[o].parameters,i.parameters))}var Qn=class{constructor(t=new fe([],{}),n={},i=null){this.root=t,this.queryParams=n,this.fragment=i}get queryParamMap(){return this._queryParamMap??=Hs(this.queryParams),this._queryParamMap}toString(){return U1.serialize(this)}},fe=class{constructor(t,n){this.segments=t,this.children=n,this.parent=null,Object.values(n).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return zl(this)}},Do=class{constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap??=Hs(this.parameters),this._parameterMap}toString(){return j0(this)}};function G1(e,t){return Eo(e,t)&&e.every((n,i)=>Ji(n.parameters,t[i].parameters))}function Eo(e,t){return e.length!==t.length?!1:e.every((n,i)=>n.path===t[i].path)}function j1(e,t){let n=[];return Object.entries(e.children).forEach(([i,o])=>{i===te&&(n=n.concat(t(o,i)))}),Object.entries(e.children).forEach(([i,o])=>{i!==te&&(n=n.concat(t(o,i)))}),n}var rp=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=z({token:t,factory:()=>new Wl,providedIn:"root"});let e=t;return e})(),Wl=class{parse(t){let n=new Lu(t);return new Qn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){let n=`/${Zr(t.root,!0)}`,i=W1(t.queryParams),o=typeof t.fragment=="string"?`#${z1(t.fragment)}`:"";return`${n}${i}${o}`}},U1=new Wl;function zl(e){return e.segments.map(t=>j0(t)).join("/")}function Zr(e,t){if(!e.hasChildren())return zl(e);if(t){let n=e.children[te]?Zr(e.children[te],!1):"",i=[];return Object.entries(e.children).forEach(([o,s])=>{o!==te&&i.push(`${o}:${Zr(s,!1)}`)}),i.length>0?`${n}(${i.join("//")})`:n}else{let n=j1(e,(i,o)=>o===te?[Zr(e.children[te],!1)]:[`${o}:${Zr(i,!1)}`]);return Object.keys(e.children).length===1&&e.children[te]!=null?`${zl(e)}/${n[0]}`:`${zl(e)}/(${n.join("//")})`}}function G0(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Gl(e){return G0(e).replace(/%3B/gi,";")}function z1(e){return encodeURI(e)}function Ru(e){return G0(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function $l(e){return decodeURIComponent(e)}function k0(e){return $l(e.replace(/\+/g,"%20"))}function j0(e){return`${Ru(e.path)}${$1(e.parameters)}`}function $1(e){return Object.entries(e).map(([t,n])=>`;${Ru(t)}=${Ru(n)}`).join("")}function W1(e){let t=Object.entries(e).map(([n,i])=>Array.isArray(i)?i.map(o=>`${Gl(n)}=${Gl(o)}`).join("&"):`${Gl(n)}=${Gl(i)}`).filter(n=>n);return t.length?`?${t.join("&")}`:""}var q1=/^[^\/()?;#]+/;function xu(e){let t=e.match(q1);return t?t[0]:""}var Z1=/^[^\/()?;=#]+/;function Y1(e){let t=e.match(Z1);return t?t[0]:""}var K1=/^[^=?&#]+/;function Q1(e){let t=e.match(K1);return t?t[0]:""}var J1=/^[^&#]+/;function X1(e){let t=e.match(J1);return t?t[0]:""}var Lu=class{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new fe([],{}):new fe([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(i[te]=new fe(t,n)),i}parseSegment(){let t=xu(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new Ce(4009,!1);return this.capture(t),new Do($l(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let n=Y1(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let o=xu(this.remaining);o&&(i=o,this.capture(i))}t[$l(n)]=$l(i)}parseQueryParam(t){let n=Q1(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let r=X1(this.remaining);r&&(i=r,this.capture(i))}let o=k0(n),s=k0(i);if(t.hasOwnProperty(o)){let r=t[o];Array.isArray(r)||(r=[r],t[o]=r),r.push(s)}else t[o]=s}parseParens(t){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=xu(this.remaining),o=this.remaining[i.length];if(o!=="/"&&o!==")"&&o!==";")throw new Ce(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=te);let r=this.parseChildren();n[s]=Object.keys(r).length===1?r[te]:new fe([],r),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new Ce(4011,!1)}};function U0(e){return e.segments.length>0?new fe([],{[te]:e}):e}function z0(e){let t={};for(let[i,o]of Object.entries(e.children)){let s=z0(o);if(i===te&&s.segments.length===0&&s.hasChildren())for(let[r,a]of Object.entries(s.children))t[r]=a;else(s.segments.length>0||s.hasChildren())&&(t[i]=s)}let n=new fe(e.segments,t);return eC(n)}function eC(e){if(e.numberOfChildren===1&&e.children[te]){let t=e.children[te];return new fe(e.segments.concat(t.segments),t.children)}return e}function Bs(e){return e instanceof Qn}function tC(e,t,n=null,i=null){let o=$0(e);return W0(o,t,n,i)}function $0(e){let t;function n(s){let r={};for(let c of s.children){let u=n(c);r[c.outlet]=u}let a=new fe(s.url,r);return s===e&&(t=a),a}let i=n(e.root),o=U0(i);return t??o}function W0(e,t,n,i){let o=e;for(;o.parent;)o=o.parent;if(t.length===0)return Ou(o,o,o,n,i);let s=iC(t);if(s.toRoot())return Ou(o,o,new fe([],{}),n,i);let r=nC(s,o,e),a=r.processChildren?Qr(r.segmentGroup,r.index,s.commands):Z0(r.segmentGroup,r.index,s.commands);return Ou(o,r.segmentGroup,a,n,i)}function ql(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function ea(e){return typeof e=="object"&&e!=null&&e.outlets}function Ou(e,t,n,i,o){let s={};i&&Object.entries(i).forEach(([c,u])=>{s[c]=Array.isArray(u)?u.map(p=>`${p}`):`${u}`});let r;e===t?r=n:r=q0(e,t,n);let a=U0(z0(r));return new Qn(a,s,o)}function q0(e,t,n){let i={};return Object.entries(e.children).forEach(([o,s])=>{s===t?i[o]=n:i[o]=q0(s,t,n)}),new fe(e.segments,i)}var Zl=class{constructor(t,n,i){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=i,t&&i.length>0&&ql(i[0]))throw new Ce(4003,!1);let o=i.find(ea);if(o&&o!==L0(i))throw new Ce(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function iC(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new Zl(!0,0,e);let t=0,n=!1,i=e.reduce((o,s,r)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,u])=>{a[c]=typeof u=="string"?u.split("/"):u}),[...o,{outlets:a}]}if(s.segmentPath)return[...o,s.segmentPath]}return typeof s!="string"?[...o,s]:r===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?n=!0:a===".."?t++:a!=""&&o.push(a))}),o):[...o,s]},[]);return new Zl(n,t,i)}var Ns=class{constructor(t,n,i){this.segmentGroup=t,this.processChildren=n,this.index=i}};function nC(e,t,n){if(e.isAbsolute)return new Ns(t,!0,0);if(!n)return new Ns(t,!1,NaN);if(n.parent===null)return new Ns(n,!0,0);let i=ql(e.commands[0])?0:1,o=n.segments.length-1+i;return oC(n,o,e.numberOfDoubleDots)}function oC(e,t,n){let i=e,o=t,s=n;for(;s>o;){if(s-=o,i=i.parent,!i)throw new Ce(4005,!1);o=i.segments.length}return new Ns(i,!1,o-s)}function sC(e){return ea(e[0])?e[0].outlets:{[te]:e}}function Z0(e,t,n){if(e??=new fe([],{}),e.segments.length===0&&e.hasChildren())return Qr(e,t,n);let i=rC(e,t,n),o=n.slice(i.commandIndex);if(i.match&&i.pathIndex<e.segments.length){let s=new fe(e.segments.slice(0,i.pathIndex),{});return s.children[te]=new fe(e.segments.slice(i.pathIndex),e.children),Qr(s,0,o)}else return i.match&&o.length===0?new fe(e.segments,{}):i.match&&!e.hasChildren()?Nu(e,t,n):i.match?Qr(e,0,o):Nu(e,t,n)}function Qr(e,t,n){if(n.length===0)return new fe(e.segments,{});{let i=sC(n),o={};if(Object.keys(i).some(s=>s!==te)&&e.children[te]&&e.numberOfChildren===1&&e.children[te].segments.length===0){let s=Qr(e.children[te],t,n);return new fe(e.segments,s.children)}return Object.entries(i).forEach(([s,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(o[s]=Z0(e.children[s],t,r))}),Object.entries(e.children).forEach(([s,r])=>{i[s]===void 0&&(o[s]=r)}),new fe(e.segments,o)}}function rC(e,t,n){let i=0,o=t,s={match:!1,pathIndex:0,commandIndex:0};for(;o<e.segments.length;){if(i>=n.length)return s;let r=e.segments[o],a=n[i];if(ea(a))break;let c=`${a}`,u=i<n.length-1?n[i+1]:null;if(o>0&&c===void 0)break;if(c&&u&&typeof u=="object"&&u.outlets===void 0){if(!F0(c,u,r))return s;i+=2}else{if(!F0(c,{},r))return s;i++}o++}return{match:!0,pathIndex:o,commandIndex:i}}function Nu(e,t,n){let i=e.segments.slice(0,t),o=0;for(;o<n.length;){let s=n[o];if(ea(s)){let c=aC(s.outlets);return new fe(i,c)}if(o===0&&ql(n[0])){let c=e.segments[t];i.push(new Do(c.path,A0(n[0]))),o++;continue}let r=ea(s)?s.outlets[te]:`${s}`,a=o<n.length-1?n[o+1]:null;r&&a&&ql(a)?(i.push(new Do(r,A0(a))),o+=2):(i.push(new Do(r,{})),o++)}return new fe(i,{})}function aC(e){let t={};return Object.entries(e).forEach(([n,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(t[n]=Nu(new fe([],{}),0,i))}),t}function A0(e){let t={};return Object.entries(e).forEach(([n,i])=>t[n]=`${i}`),t}function F0(e,t,n){return e==n.path&&Ji(t,n.parameters)}var Jr="imperative",bt=function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e}(bt||{}),bi=class{constructor(t,n){this.id=t,this.url=n}},ta=class extends bi{constructor(t,n,i="imperative",o=null){super(t,n),this.type=bt.NavigationStart,this.navigationTrigger=i,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Io=class extends bi{constructor(t,n,i){super(t,n),this.urlAfterRedirects=i,this.type=bt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},pi=function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e}(pi||{}),Vu=function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e}(Vu||{}),Jn=class extends bi{constructor(t,n,i,o){super(t,n),this.reason=i,this.code=o,this.type=bt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},xo=class extends bi{constructor(t,n,i,o){super(t,n),this.reason=i,this.code=o,this.type=bt.NavigationSkipped}},ia=class extends bi{constructor(t,n,i,o){super(t,n),this.error=i,this.target=o,this.type=bt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Yl=class extends bi{constructor(t,n,i,o){super(t,n),this.urlAfterRedirects=i,this.state=o,this.type=bt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Hu=class extends bi{constructor(t,n,i,o){super(t,n),this.urlAfterRedirects=i,this.state=o,this.type=bt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Bu=class extends bi{constructor(t,n,i,o,s){super(t,n),this.urlAfterRedirects=i,this.state=o,this.shouldActivate=s,this.type=bt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Gu=class extends bi{constructor(t,n,i,o){super(t,n),this.urlAfterRedirects=i,this.state=o,this.type=bt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ju=class extends bi{constructor(t,n,i,o){super(t,n),this.urlAfterRedirects=i,this.state=o,this.type=bt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Uu=class{constructor(t){this.route=t,this.type=bt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},zu=class{constructor(t){this.route=t,this.type=bt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},$u=class{constructor(t){this.snapshot=t,this.type=bt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Wu=class{constructor(t){this.snapshot=t,this.type=bt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},qu=class{constructor(t){this.snapshot=t,this.type=bt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Zu=class{constructor(t){this.snapshot=t,this.type=bt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var na=class{},oa=class{constructor(t){this.url=t}};var Yu=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new tc,this.attachRef=null}},tc=(()=>{let t=class t{constructor(){this.contexts=new Map}onChildOutletCreated(i,o){let s=this.getOrCreateContext(i);s.outlet=o,this.contexts.set(i,s)}onChildOutletDestroyed(i){let o=this.getContext(i);o&&(o.outlet=null,o.attachRef=null)}onOutletDeactivated(){let i=this.contexts;return this.contexts=new Map,i}onOutletReAttached(i){this.contexts=i}getOrCreateContext(i){let o=this.getContext(i);return o||(o=new Yu,this.contexts.set(i,o)),o}getContext(i){return this.contexts.get(i)||null}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),Kl=class{constructor(t){this._root=t}get root(){return this._root.value}parent(t){let n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){let n=Ku(t,this._root);return n?n.children.map(i=>i.value):[]}firstChild(t){let n=Ku(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){let n=Qu(t,this._root);return n.length<2?[]:n[n.length-2].children.map(o=>o.value).filter(o=>o!==t)}pathFromRoot(t){return Qu(t,this._root).map(n=>n.value)}};function Ku(e,t){if(e===t.value)return t;for(let n of t.children){let i=Ku(e,n);if(i)return i}return null}function Qu(e,t){if(e===t.value)return[t];for(let n of t.children){let i=Qu(e,n);if(i.length)return i.unshift(t),i}return[]}var ui=class{constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}};function Ls(e){let t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}var Ql=class extends Kl{constructor(t,n){super(t),this.snapshot=n,lp(this,t)}toString(){return this.snapshot.toString()}};function Y0(e){let t=lC(e),n=new Re([new Do("",{})]),i=new Re({}),o=new Re({}),s=new Re({}),r=new Re(""),a=new Gs(n,i,s,r,o,te,e,t.root);return a.snapshot=t.root,new Ql(new ui(a,[]),t)}function lC(e){let t={},n={},i={},o="",s=new sa([],t,i,o,n,te,e,null,{});return new Jl("",new ui(s,[]))}var Gs=class{constructor(t,n,i,o,s,r,a,c){this.urlSubject=t,this.paramsSubject=n,this.queryParamsSubject=i,this.fragmentSubject=o,this.dataSubject=s,this.outlet=r,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(re(u=>u[la]))??J(void 0),this.url=t,this.params=n,this.queryParams=i,this.fragment=o,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(re(t=>Hs(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(re(t=>Hs(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function ap(e,t,n="emptyOnly"){let i,{routeConfig:o}=e;return t!==null&&(n==="always"||o?.path===""||!t.component&&!t.routeConfig?.loadComponent)?i={params:v(v({},t.params),e.params),data:v(v({},t.data),e.data),resolve:v(v(v(v({},e.data),t.data),o?.data),e._resolvedData)}:i={params:v({},e.params),data:v({},e.data),resolve:v(v({},e.data),e._resolvedData??{})},o&&Q0(o)&&(i.resolve[la]=o.title),i}var sa=class{get title(){return this.data?.[la]}constructor(t,n,i,o,s,r,a,c,u){this.url=t,this.params=n,this.queryParams=i,this.fragment=o,this.data=s,this.outlet=r,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Hs(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Hs(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(i=>i.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${n}')`}},Jl=class extends Kl{constructor(t,n){super(n),this.url=t,lp(this,n)}toString(){return K0(this._root)}};function lp(e,t){t.value._routerState=e,t.children.forEach(n=>lp(e,n))}function K0(e){let t=e.children.length>0?` { ${e.children.map(K0).join(", ")} } `:"";return`${e.value}${t}`}function ku(e){if(e.snapshot){let t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,Ji(t.queryParams,n.queryParams)||e.queryParamsSubject.next(n.queryParams),t.fragment!==n.fragment&&e.fragmentSubject.next(n.fragment),Ji(t.params,n.params)||e.paramsSubject.next(n.params),N1(t.url,n.url)||e.urlSubject.next(n.url),Ji(t.data,n.data)||e.dataSubject.next(n.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function Ju(e,t){let n=Ji(e.params,t.params)&&G1(e.url,t.url),i=!e.parent!=!t.parent;return n&&!i&&(!e.parent||Ju(e.parent,t.parent))}function Q0(e){return typeof e.title=="string"||e.title===null}var cC=(()=>{let t=class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=te,this.activateEvents=new $,this.deactivateEvents=new $,this.attachEvents=new $,this.detachEvents=new $,this.parentContexts=F(tc),this.location=F(nl),this.changeDetector=F(Lt),this.environmentInjector=F(kr),this.inputBinder=F(cp,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(i){if(i.name){let{firstChange:o,previousValue:s}=i.name;if(o)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(i){return this.parentContexts.getContext(i)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let i=this.parentContexts.getContext(this.name);i?.route&&(i.attachRef?this.attach(i.attachRef,i.route):this.activateWith(i.route,i.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Ce(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Ce(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Ce(4012,!1);this.location.detach();let i=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(i.instance),i}attach(i,o){this.activated=i,this._activatedRoute=o,this.location.insert(i.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(i.instance)}deactivate(){if(this.activated){let i=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(i)}}activateWith(i,o){if(this.isActivated)throw new Ce(4013,!1);this._activatedRoute=i;let s=this.location,a=i.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,u=new Xu(i,c,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:u,environmentInjector:o??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};t.\u0275fac=function(o){return new(o||t)},t.\u0275dir=ye({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ut]});let e=t;return e})(),Xu=class e{__ngOutletInjector(t){return new e(this.route,this.childContexts,t)}constructor(t,n,i){this.route=t,this.childContexts=n,this.parent=i}get(t,n){return t===Gs?this.route:t===tc?this.childContexts:this.parent.get(t,n)}},cp=new xe("");function dC(e,t,n){let i=ra(e,t._root,n?n._root:void 0);return new Ql(i,t)}function ra(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){let i=n.value;i._futureSnapshot=t.value;let o=uC(e,t,n);return new ui(i,o)}else{if(e.shouldAttach(t.value)){let s=e.retrieve(t.value);if(s!==null){let r=s.route;return r.value._futureSnapshot=t.value,r.children=t.children.map(a=>ra(e,a)),r}}let i=pC(t.value),o=t.children.map(s=>ra(e,s));return new ui(i,o)}}function uC(e,t,n){return t.children.map(i=>{for(let o of n.children)if(e.shouldReuseRoute(i.value,o.value.snapshot))return ra(e,i,o);return ra(e,i)})}function pC(e){return new Gs(new Re(e.url),new Re(e.params),new Re(e.queryParams),new Re(e.fragment),new Re(e.data),e.outlet,e.component,e)}var J0="ngNavigationCancelingError";function X0(e,t){let{redirectTo:n,navigationBehaviorOptions:i}=Bs(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,o=ey(!1,pi.Redirect);return o.url=n,o.navigationBehaviorOptions=i,o}function ey(e,t){let n=new Error(`NavigationCancelingError: ${e||""}`);return n[J0]=!0,n.cancellationCode=t,n}function hC(e){return ty(e)&&Bs(e.url)}function ty(e){return!!e&&e[J0]}var mC=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=ee({type:t,selectors:[["ng-component"]],standalone:!0,features:[ae],decls:1,vars:0,template:function(o,s){o&1&&L(0,"router-outlet")},dependencies:[cC],encapsulation:2});let e=t;return e})();function fC(e,t){return e.providers&&!e._injector&&(e._injector=cf(e.providers,t,`Route: ${e.path}`)),e._injector??t}function dp(e){let t=e.children&&e.children.map(dp),n=t?G(v({},e),{children:t}):v({},e);return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==te&&(n.component=mC),n}function Xi(e){return e.outlet||te}function gC(e,t){let n=e.filter(i=>Xi(i)===t);return n.push(...e.filter(i=>Xi(i)!==t)),n}function ca(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){let n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var _C=(e,t,n,i)=>re(o=>(new ep(t,o.targetRouterState,o.currentRouterState,n,i).activate(e),o)),ep=class{constructor(t,n,i,o,s){this.routeReuseStrategy=t,this.futureState=n,this.currState=i,this.forwardEvent=o,this.inputBindingEnabled=s}activate(t){let n=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,i,t),ku(this.futureState.root),this.activateChildRoutes(n,i,t)}deactivateChildRoutes(t,n,i){let o=Ls(n);t.children.forEach(s=>{let r=s.value.outlet;this.deactivateRoutes(s,o[r],i),delete o[r]}),Object.values(o).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(t,n,i){let o=t.value,s=n?n.value:null;if(o===s)if(o.component){let r=i.getContext(o.outlet);r&&this.deactivateChildRoutes(t,n,r.children)}else this.deactivateChildRoutes(t,n,i);else s&&this.deactivateRouteAndItsChildren(n,i)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){let i=n.getContext(t.value.outlet),o=i&&t.value.component?i.children:n,s=Ls(t);for(let r of Object.values(s))this.deactivateRouteAndItsChildren(r,o);if(i&&i.outlet){let r=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:r,route:t,contexts:a})}}deactivateRouteAndOutlet(t,n){let i=n.getContext(t.value.outlet),o=i&&t.value.component?i.children:n,s=Ls(t);for(let r of Object.values(s))this.deactivateRouteAndItsChildren(r,o);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(t,n,i){let o=Ls(n);t.children.forEach(s=>{this.activateRoutes(s,o[s.value.outlet],i),this.forwardEvent(new Zu(s.value.snapshot))}),t.children.length&&this.forwardEvent(new Wu(t.value.snapshot))}activateRoutes(t,n,i){let o=t.value,s=n?n.value:null;if(ku(o),o===s)if(o.component){let r=i.getOrCreateContext(o.outlet);this.activateChildRoutes(t,n,r.children)}else this.activateChildRoutes(t,n,i);else if(o.component){let r=i.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){let a=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),r.children.onOutletReAttached(a.contexts),r.attachRef=a.componentRef,r.route=a.route.value,r.outlet&&r.outlet.attach(a.componentRef,a.route.value),ku(a.route.value),this.activateChildRoutes(t,null,r.children)}else{let a=ca(o.snapshot);r.attachRef=null,r.route=o,r.injector=a,r.outlet&&r.outlet.activateWith(o,r.injector),this.activateChildRoutes(t,null,r.children)}}else this.activateChildRoutes(t,null,i)}},Xl=class{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},Vs=class{constructor(t,n){this.component=t,this.route=n}};function yC(e,t,n){let i=e._root,o=t?t._root:null;return Yr(i,o,n,[i.value])}function vC(e){let t=e.routeConfig?e.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:e,guards:t}}function Us(e,t){let n=Symbol(),i=t.get(e,n);return i===n?typeof e=="function"&&!zm(e)?e:t.get(e):i}function Yr(e,t,n,i,o={canDeactivateChecks:[],canActivateChecks:[]}){let s=Ls(t);return e.children.forEach(r=>{bC(r,s[r.value.outlet],n,i.concat([r.value]),o),delete s[r.value.outlet]}),Object.entries(s).forEach(([r,a])=>Xr(a,n.getContext(r),o)),o}function bC(e,t,n,i,o={canDeactivateChecks:[],canActivateChecks:[]}){let s=e.value,r=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(r&&s.routeConfig===r.routeConfig){let c=wC(r,s,s.routeConfig.runGuardsAndResolvers);c?o.canActivateChecks.push(new Xl(i)):(s.data=r.data,s._resolvedData=r._resolvedData),s.component?Yr(e,t,a?a.children:null,i,o):Yr(e,t,n,i,o),c&&a&&a.outlet&&a.outlet.isActivated&&o.canDeactivateChecks.push(new Vs(a.outlet.component,r))}else r&&Xr(t,a,o),o.canActivateChecks.push(new Xl(i)),s.component?Yr(e,null,a?a.children:null,i,o):Yr(e,null,n,i,o);return o}function wC(e,t,n){if(typeof n=="function")return n(e,t);switch(n){case"pathParamsChange":return!Eo(e.url,t.url);case"pathParamsOrQueryParamsChange":return!Eo(e.url,t.url)||!Ji(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Ju(e,t)||!Ji(e.queryParams,t.queryParams);case"paramsChange":default:return!Ju(e,t)}}function Xr(e,t,n){let i=Ls(e),o=e.value;Object.entries(i).forEach(([s,r])=>{o.component?t?Xr(r,t.children.getContext(s),n):Xr(r,null,n):Xr(r,t,n)}),o.component?t&&t.outlet&&t.outlet.isActivated?n.canDeactivateChecks.push(new Vs(t.outlet.component,o)):n.canDeactivateChecks.push(new Vs(null,o)):n.canDeactivateChecks.push(new Vs(null,o))}function da(e){return typeof e=="function"}function CC(e){return typeof e=="boolean"}function SC(e){return e&&da(e.canLoad)}function TC(e){return e&&da(e.canActivate)}function MC(e){return e&&da(e.canActivateChild)}function DC(e){return e&&da(e.canDeactivate)}function EC(e){return e&&da(e.canMatch)}function iy(e){return e instanceof Pm||e?.name==="EmptyError"}var jl=Symbol("INITIAL_VALUE");function js(){return ki(e=>Ja(e.map(t=>t.pipe(Vn(1),xr(jl)))).pipe(re(t=>{for(let n of t)if(n!==!0){if(n===jl)return jl;if(n===!1||n instanceof Qn)return n}return!0}),yt(t=>t!==jl),Vn(1)))}function IC(e,t){return ti(n=>{let{targetSnapshot:i,currentSnapshot:o,guards:{canActivateChecks:s,canDeactivateChecks:r}}=n;return r.length===0&&s.length===0?J(G(v({},n),{guardsResult:!0})):xC(r,i,o,e).pipe(ti(a=>a&&CC(a)?OC(i,s,e,t):J(a)),re(a=>G(v({},n),{guardsResult:a})))})}function xC(e,t,n,i){return ei(e).pipe(ti(o=>RC(o.component,o.route,n,t,i)),Hn(o=>o!==!0,!0))}function OC(e,t,n,i){return ei(t).pipe(Er(o=>Rm(AC(o.route.parent,i),kC(o.route,i),PC(e,o.path,n),FC(e,o.route,n))),Hn(o=>o!==!0,!0))}function kC(e,t){return e!==null&&t&&t(new qu(e)),J(!0)}function AC(e,t){return e!==null&&t&&t(new $u(e)),J(!0)}function FC(e,t,n){let i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||i.length===0)return J(!0);let o=i.map(s=>Md(()=>{let r=ca(t)??n,a=Us(s,r),c=TC(a)?a.canActivate(t,e):vo(r,()=>a(t,e));return Xn(c).pipe(Hn())}));return J(o).pipe(js())}function PC(e,t,n){let i=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(r=>vC(r)).filter(r=>r!==null).map(r=>Md(()=>{let a=r.guards.map(c=>{let u=ca(r.node)??n,p=Us(c,u),h=MC(p)?p.canActivateChild(i,e):vo(u,()=>p(i,e));return Xn(h).pipe(Hn())});return J(a).pipe(js())}));return J(s).pipe(js())}function RC(e,t,n,i,o){let s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!s||s.length===0)return J(!0);let r=s.map(a=>{let c=ca(t)??o,u=Us(a,c),p=DC(u)?u.canDeactivate(e,t,n,i):vo(c,()=>u(e,t,n,i));return Xn(p).pipe(Hn())});return J(r).pipe(js())}function LC(e,t,n,i){let o=t.canLoad;if(o===void 0||o.length===0)return J(!0);let s=o.map(r=>{let a=Us(r,e),c=SC(a)?a.canLoad(t,n):vo(e,()=>a(t,n));return Xn(c)});return J(s).pipe(js(),ny(i))}function ny(e){return Om(Je(t=>{if(Bs(t))throw X0(e,t)}),re(t=>t===!0))}function NC(e,t,n,i){let o=t.canMatch;if(!o||o.length===0)return J(!0);let s=o.map(r=>{let a=Us(r,e),c=EC(a)?a.canMatch(t,n):vo(e,()=>a(t,n));return Xn(c)});return J(s).pipe(js(),ny(i))}var aa=class{constructor(t){this.segmentGroup=t||null}},ec=class extends Error{constructor(t){super(),this.urlTree=t}};function Rs(e){return Dr(new aa(e))}function VC(e){return Dr(new Ce(4e3,!1))}function HC(e){return Dr(ey(!1,pi.GuardRejected))}var tp=class{constructor(t,n){this.urlSerializer=t,this.urlTree=n}lineralizeSegments(t,n){let i=[],o=n.root;for(;;){if(i=i.concat(o.segments),o.numberOfChildren===0)return J(i);if(o.numberOfChildren>1||!o.children[te])return VC(t.redirectTo);o=o.children[te]}}applyRedirectCommands(t,n,i){let o=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),t,i);if(n.startsWith("/"))throw new ec(o);return o}applyRedirectCreateUrlTree(t,n,i,o){let s=this.createSegmentGroup(t,n.root,i,o);return new Qn(s,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){let i={};return Object.entries(t).forEach(([o,s])=>{if(typeof s=="string"&&s.startsWith(":")){let a=s.substring(1);i[o]=n[a]}else i[o]=s}),i}createSegmentGroup(t,n,i,o){let s=this.createSegments(t,n.segments,i,o),r={};return Object.entries(n.children).forEach(([a,c])=>{r[a]=this.createSegmentGroup(t,c,i,o)}),new fe(s,r)}createSegments(t,n,i,o){return n.map(s=>s.path.startsWith(":")?this.findPosParam(t,s,o):this.findOrReturn(s,i))}findPosParam(t,n,i){let o=i[n.path.substring(1)];if(!o)throw new Ce(4001,!1);return o}findOrReturn(t,n){let i=0;for(let o of n){if(o.path===t.path)return n.splice(i),o;i++}return t}},ip={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function BC(e,t,n,i,o){let s=up(e,t,n);return s.matched?(i=fC(t,i),NC(i,t,n,o).pipe(re(r=>r===!0?s:v({},ip)))):J(s)}function up(e,t,n){if(t.path==="**")return GC(n);if(t.path==="")return t.pathMatch==="full"&&(e.hasChildren()||n.length>0)?v({},ip):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let o=(t.matcher||L1)(n,e,t);if(!o)return v({},ip);let s={};Object.entries(o.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let r=o.consumed.length>0?v(v({},s),o.consumed[o.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:o.consumed,remainingSegments:n.slice(o.consumed.length),parameters:r,positionalParamSegments:o.posParams??{}}}function GC(e){return{matched:!0,parameters:e.length>0?L0(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function P0(e,t,n,i){return n.length>0&&zC(e,n,i)?{segmentGroup:new fe(t,UC(i,new fe(n,e.children))),slicedSegments:[]}:n.length===0&&$C(e,n,i)?{segmentGroup:new fe(e.segments,jC(e,n,i,e.children)),slicedSegments:n}:{segmentGroup:new fe(e.segments,e.children),slicedSegments:n}}function jC(e,t,n,i){let o={};for(let s of n)if(ic(e,t,s)&&!i[Xi(s)]){let r=new fe([],{});o[Xi(s)]=r}return v(v({},i),o)}function UC(e,t){let n={};n[te]=t;for(let i of e)if(i.path===""&&Xi(i)!==te){let o=new fe([],{});n[Xi(i)]=o}return n}function zC(e,t,n){return n.some(i=>ic(e,t,i)&&Xi(i)!==te)}function $C(e,t,n){return n.some(i=>ic(e,t,i))}function ic(e,t,n){return(e.hasChildren()||t.length>0)&&n.pathMatch==="full"?!1:n.path===""}function WC(e,t,n,i){return Xi(e)!==i&&(i===te||!ic(t,n,e))?!1:up(t,e,n).matched}function qC(e,t,n){return t.length===0&&!e.children[n]}var np=class{};function ZC(e,t,n,i,o,s,r="emptyOnly"){return new op(e,t,n,i,o,r,s).recognize()}var YC=31,op=class{constructor(t,n,i,o,s,r,a){this.injector=t,this.configLoader=n,this.rootComponentType=i,this.config=o,this.urlTree=s,this.paramsInheritanceStrategy=r,this.urlSerializer=a,this.applyRedirects=new tp(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(t){return new Ce(4002,`'${t.segmentGroup}'`)}recognize(){let t=P0(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(re(n=>{let i=new sa([],Object.freeze({}),Object.freeze(v({},this.urlTree.queryParams)),this.urlTree.fragment,{},te,this.rootComponentType,null,{}),o=new ui(i,n),s=new Jl("",o),r=tC(i,[],this.urlTree.queryParams,this.urlTree.fragment);return r.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(r),this.inheritParamsAndData(s._root,null),{state:s,tree:r}}))}match(t){return this.processSegmentGroup(this.injector,this.config,t,te).pipe(os(i=>{if(i instanceof ec)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof aa?this.noMatchError(i):i}))}inheritParamsAndData(t,n){let i=t.value,o=ap(i,n,this.paramsInheritanceStrategy);i.params=Object.freeze(o.params),i.data=Object.freeze(o.data),t.children.forEach(s=>this.inheritParamsAndData(s,i))}processSegmentGroup(t,n,i,o){return i.segments.length===0&&i.hasChildren()?this.processChildren(t,n,i):this.processSegment(t,n,i,i.segments,o,!0).pipe(re(s=>s instanceof ui?[s]:[]))}processChildren(t,n,i){let o=[];for(let s of Object.keys(i.children))s==="primary"?o.unshift(s):o.push(s);return ei(o).pipe(Er(s=>{let r=i.children[s],a=gC(n,s);return this.processSegmentGroup(t,a,r,s)}),Um((s,r)=>(s.push(...r),s)),Dd(null),jm(),ti(s=>{if(s===null)return Rs(i);let r=oy(s);return KC(r),J(r)}))}processSegment(t,n,i,o,s,r){return ei(n).pipe(Er(a=>this.processSegmentAgainstRoute(a._injector??t,n,a,i,o,s,r).pipe(os(c=>{if(c instanceof aa)return J(null);throw c}))),Hn(a=>!!a),os(a=>{if(iy(a))return qC(i,o,s)?J(new np):Rs(i);throw a}))}processSegmentAgainstRoute(t,n,i,o,s,r,a){return WC(i,o,s,r)?i.redirectTo===void 0?this.matchSegmentAgainstRoute(t,o,i,s,r):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,o,n,i,s,r):Rs(o):Rs(o)}expandSegmentAgainstRouteUsingRedirect(t,n,i,o,s,r){let{matched:a,consumedSegments:c,positionalParamSegments:u,remainingSegments:p}=up(n,o,s);if(!a)return Rs(n);o.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>YC&&(this.allowRedirects=!1));let h=this.applyRedirects.applyRedirectCommands(c,o.redirectTo,u);return this.applyRedirects.lineralizeSegments(o,h).pipe(ti(m=>this.processSegment(t,i,n,m.concat(p),r,!1)))}matchSegmentAgainstRoute(t,n,i,o,s){let r=BC(n,i,o,t,this.urlSerializer);return i.path==="**"&&(n.children={}),r.pipe(ki(a=>a.matched?(t=i._injector??t,this.getChildConfig(t,i,o).pipe(ki(({routes:c})=>{let u=i._loadedInjector??t,{consumedSegments:p,remainingSegments:h,parameters:m}=a,f=new sa(p,m,Object.freeze(v({},this.urlTree.queryParams)),this.urlTree.fragment,JC(i),Xi(i),i.component??i._loadedComponent??null,i,XC(i)),{segmentGroup:S,slicedSegments:A}=P0(n,p,h,c);if(A.length===0&&S.hasChildren())return this.processChildren(u,c,S).pipe(re(N=>N===null?null:new ui(f,N)));if(c.length===0&&A.length===0)return J(new ui(f,[]));let H=Xi(i)===s;return this.processSegment(u,c,S,A,H?te:s,!0).pipe(re(N=>new ui(f,N instanceof ui?[N]:[])))}))):Rs(n)))}getChildConfig(t,n,i){return n.children?J({routes:n.children,injector:t}):n.loadChildren?n._loadedRoutes!==void 0?J({routes:n._loadedRoutes,injector:n._loadedInjector}):LC(t,n,i,this.urlSerializer).pipe(ti(o=>o?this.configLoader.loadChildren(t,n).pipe(Je(s=>{n._loadedRoutes=s.routes,n._loadedInjector=s.injector})):HC(n))):J({routes:[],injector:t})}};function KC(e){e.sort((t,n)=>t.value.outlet===te?-1:n.value.outlet===te?1:t.value.outlet.localeCompare(n.value.outlet))}function QC(e){let t=e.value.routeConfig;return t&&t.path===""}function oy(e){let t=[],n=new Set;for(let i of e){if(!QC(i)){t.push(i);continue}let o=t.find(s=>i.value.routeConfig===s.value.routeConfig);o!==void 0?(o.children.push(...i.children),n.add(o)):t.push(i)}for(let i of n){let o=oy(i.children);t.push(new ui(i.value,o))}return t.filter(i=>!n.has(i))}function JC(e){return e.data||{}}function XC(e){return e.resolve||{}}function eS(e,t,n,i,o,s){return ti(r=>ZC(e,t,n,i,r.extractedUrl,o,s).pipe(re(({state:a,tree:c})=>G(v({},r),{targetSnapshot:a,urlAfterRedirects:c}))))}function tS(e,t){return ti(n=>{let{targetSnapshot:i,guards:{canActivateChecks:o}}=n;if(!o.length)return J(n);let s=new Set(o.map(c=>c.route)),r=new Set;for(let c of s)if(!r.has(c))for(let u of sy(c))r.add(u);let a=0;return ei(r).pipe(Er(c=>s.has(c)?iS(c,i,e,t):(c.data=ap(c,c.parent,e).resolve,J(void 0))),Je(()=>a++),Ed(1),ti(c=>a===r.size?J(n):pn))})}function sy(e){let t=e.children.map(n=>sy(n)).flat();return[e,...t]}function iS(e,t,n,i){let o=e.routeConfig,s=e._resolve;return o?.title!==void 0&&!Q0(o)&&(s[la]=o.title),nS(s,e,t,i).pipe(re(r=>(e._resolvedData=r,e.data=ap(e,e.parent,n).resolve,null)))}function nS(e,t,n,i){let o=Pu(e);if(o.length===0)return J({});let s={};return ei(o).pipe(ti(r=>oS(e[r],t,n,i).pipe(Hn(),Je(a=>{s[r]=a}))),Ed(1),Bm(s),os(r=>iy(r)?pn:Dr(r)))}function oS(e,t,n,i){let o=ca(t)??i,s=Us(e,o),r=s.resolve?s.resolve(t,n):vo(o,()=>s(t,n));return Xn(r)}function Au(e){return ki(t=>{let n=e(t);return n?ei(n).pipe(re(()=>t)):J(t)})}var ry=(()=>{let t=class t{buildTitle(i){let o,s=i.root;for(;s!==void 0;)o=this.getResolvedTitleForRoute(s)??o,s=s.children.find(r=>r.outlet===te);return o}getResolvedTitleForRoute(i){return i.data[la]}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=z({token:t,factory:()=>F(sS),providedIn:"root"});let e=t;return e})(),sS=(()=>{let t=class t extends ry{constructor(i){super(),this.title=i}updateTitle(i){let o=this.buildTitle(i);o!==void 0&&this.title.setTitle(o)}};t.\u0275fac=function(o){return new(o||t)(Se(x0))},t.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),pp=new xe("",{providedIn:"root",factory:()=>({})}),hp=new xe(""),rS=(()=>{let t=class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=F(Vd)}loadComponent(i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return J(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let o=Xn(i.loadComponent()).pipe(re(ay),Je(r=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=r}),Ir(()=>{this.componentLoaders.delete(i)})),s=new Td(o,()=>new Ie).pipe(Sd());return this.componentLoaders.set(i,s),s}loadChildren(i,o){if(this.childrenLoaders.get(o))return this.childrenLoaders.get(o);if(o._loadedRoutes)return J({routes:o._loadedRoutes,injector:o._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(o);let r=aS(o,this.compiler,i,this.onLoadEndListener).pipe(Ir(()=>{this.childrenLoaders.delete(o)})),a=new Td(r,()=>new Ie).pipe(Sd());return this.childrenLoaders.set(o,a),a}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function aS(e,t,n,i){return Xn(e.loadChildren()).pipe(re(ay),ti(o=>o instanceof lf||Array.isArray(o)?J(o):ei(t.compileModuleAsync(o))),re(o=>{i&&i(e);let s,r,a=!1;return Array.isArray(o)?(r=o,a=!0):(s=o.create(n).injector,r=s.get(hp,[],{optional:!0,self:!0}).flat()),{routes:r.map(dp),injector:s}}))}function lS(e){return e&&typeof e=="object"&&"default"in e}function ay(e){return lS(e)?e.default:e}var mp=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=z({token:t,factory:()=>F(cS),providedIn:"root"});let e=t;return e})(),cS=(()=>{let t=class t{shouldProcessUrl(i){return!0}extract(i){return i}merge(i,o){return i}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),dS=new xe("");var uS=(()=>{let t=class t{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Ie,this.transitionAbortSubject=new Ie,this.configLoader=F(rS),this.environmentInjector=F(kr),this.urlSerializer=F(rp),this.rootContexts=F(tc),this.location=F(rl),this.inputBindingEnabled=F(cp,{optional:!0})!==null,this.titleStrategy=F(ry),this.options=F(pp,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=F(mp),this.createViewTransition=F(dS,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>J(void 0),this.rootComponentType=null;let i=s=>this.events.next(new Uu(s)),o=s=>this.events.next(new zu(s));this.configLoader.onLoadEndListener=o,this.configLoader.onLoadStartListener=i}complete(){this.transitions?.complete()}handleNavigationRequest(i){let o=++this.navigationId;this.transitions?.next(G(v(v({},this.transitions.value),i),{id:o}))}setupNavigations(i,o,s){return this.transitions=new Re({id:0,currentUrlTree:o,currentRawUrl:o,extractedUrl:this.urlHandlingStrategy.extract(o),urlAfterRedirects:this.urlHandlingStrategy.extract(o),rawUrl:o,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Jr,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(yt(r=>r.id!==0),re(r=>G(v({},r),{extractedUrl:this.urlHandlingStrategy.extract(r.rawUrl)})),ki(r=>{let a=!1,c=!1;return J(r).pipe(ki(u=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",pi.SupersededByNewNavigation),pn;this.currentTransition=r,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?G(v({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let p=!i.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=u.extras.onSameUrlNavigation??i.onSameUrlNavigation;if(!p&&h!=="reload"){let m="";return this.events.next(new xo(u.id,this.urlSerializer.serialize(u.rawUrl),m,Vu.IgnoredSameUrlNavigation)),u.resolve(null),pn}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return J(u).pipe(ki(m=>{let f=this.transitions?.getValue();return this.events.next(new ta(m.id,this.urlSerializer.serialize(m.extractedUrl),m.source,m.restoredState)),f!==this.transitions?.getValue()?pn:Promise.resolve(m)}),eS(this.environmentInjector,this.configLoader,this.rootComponentType,i.config,this.urlSerializer,this.paramsInheritanceStrategy),Je(m=>{r.targetSnapshot=m.targetSnapshot,r.urlAfterRedirects=m.urlAfterRedirects,this.currentNavigation=G(v({},this.currentNavigation),{finalUrl:m.urlAfterRedirects});let f=new Yl(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(f)}));if(p&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:m,extractedUrl:f,source:S,restoredState:A,extras:H}=u,N=new ta(m,this.urlSerializer.serialize(f),S,A);this.events.next(N);let K=Y0(this.rootComponentType).snapshot;return this.currentTransition=r=G(v({},u),{targetSnapshot:K,urlAfterRedirects:f,extras:G(v({},H),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,J(r)}else{let m="";return this.events.next(new xo(u.id,this.urlSerializer.serialize(u.extractedUrl),m,Vu.IgnoredByUrlHandlingStrategy)),u.resolve(null),pn}}),Je(u=>{let p=new Hu(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(p)}),re(u=>(this.currentTransition=r=G(v({},u),{guards:yC(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),r)),IC(this.environmentInjector,u=>this.events.next(u)),Je(u=>{if(r.guardsResult=u.guardsResult,Bs(u.guardsResult))throw X0(this.urlSerializer,u.guardsResult);let p=new Bu(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(p)}),yt(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",pi.GuardRejected),!1)),Au(u=>{if(u.guards.canActivateChecks.length)return J(u).pipe(Je(p=>{let h=new Gu(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(h)}),ki(p=>{let h=!1;return J(p).pipe(tS(this.paramsInheritanceStrategy,this.environmentInjector),Je({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(p,"",pi.NoDataFromResolver)}}))}),Je(p=>{let h=new ju(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(h)}))}),Au(u=>{let p=h=>{let m=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(h.routeConfig).pipe(Je(f=>{h.component=f}),re(()=>{})));for(let f of h.children)m.push(...p(f));return m};return Ja(p(u.targetSnapshot.root)).pipe(Dd(null),Vn(1))}),Au(()=>this.afterPreactivation()),ki(()=>{let{currentSnapshot:u,targetSnapshot:p}=r,h=this.createViewTransition?.(this.environmentInjector,u.root,p.root);return h?ei(h).pipe(re(()=>r)):J(r)}),re(u=>{let p=dC(i.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=r=G(v({},u),{targetRouterState:p}),this.currentNavigation.targetRouterState=p,r}),Je(()=>{this.events.next(new na)}),_C(this.rootContexts,i.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),Vn(1),Je({next:u=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Io(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{a=!0}}),Qe(this.transitionAbortSubject.pipe(Je(u=>{throw u}))),Ir(()=>{!a&&!c&&this.cancelNavigationTransition(r,"",pi.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation=null,this.currentTransition=null)}),os(u=>{if(c=!0,ty(u))this.events.next(new Jn(r.id,this.urlSerializer.serialize(r.extractedUrl),u.message,u.cancellationCode)),hC(u)?this.events.next(new oa(u.url)):r.resolve(!1);else{this.events.next(new ia(r.id,this.urlSerializer.serialize(r.extractedUrl),u,r.targetSnapshot??void 0));try{r.resolve(i.errorHandler(u))}catch(p){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(p)}}return pn}))}))}cancelNavigationTransition(i,o,s){let r=new Jn(i.id,this.urlSerializer.serialize(i.extractedUrl),o,s);this.events.next(r),i.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function pS(e){return e!==Jr}var hS=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=z({token:t,factory:()=>F(mS),providedIn:"root"});let e=t;return e})(),sp=class{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}},mS=(()=>{let t=class t extends sp{};t.\u0275fac=(()=>{let i;return function(s){return(i||(i=ni(t)))(s||t)}})(),t.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),ly=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=z({token:t,factory:()=>F(fS),providedIn:"root"});let e=t;return e})(),fS=(()=>{let t=class t extends ly{constructor(){super(...arguments),this.location=F(rl),this.urlSerializer=F(rp),this.options=F(pp,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=F(mp),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Qn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Y0(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(i){return this.location.subscribe(o=>{o.type==="popstate"&&i(o.url,o.state)})}handleRouterEvent(i,o){if(i instanceof ta)this.stateMemento=this.createStateMemento();else if(i instanceof xo)this.rawUrlTree=o.initialUrl;else if(i instanceof Yl){if(this.urlUpdateStrategy==="eager"&&!o.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(o.finalUrl,o.initialUrl);this.setBrowserUrl(s,o)}}else i instanceof na?(this.currentUrlTree=o.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(o.finalUrl,o.initialUrl),this.routerState=o.targetRouterState,this.urlUpdateStrategy==="deferred"&&(o.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,o))):i instanceof Jn&&(i.code===pi.GuardRejected||i.code===pi.NoDataFromResolver)?this.restoreHistory(o):i instanceof ia?this.restoreHistory(o,!0):i instanceof Io&&(this.lastSuccessfulId=i.id,this.currentPageId=this.browserPageId)}setBrowserUrl(i,o){let s=this.urlSerializer.serialize(i);if(this.location.isCurrentPathEqualTo(s)||o.extras.replaceUrl){let r=this.browserPageId,a=v(v({},o.extras.state),this.generateNgRouterState(o.id,r));this.location.replaceState(s,"",a)}else{let r=v(v({},o.extras.state),this.generateNgRouterState(o.id,this.browserPageId+1));this.location.go(s,"",r)}}restoreHistory(i,o=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,r=this.currentPageId-s;r!==0?this.location.historyGo(r):this.currentUrlTree===i.finalUrl&&r===0&&(this.resetState(i),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(o&&this.resetState(i),this.resetUrlToCurrentUrlTree())}resetState(i){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,i.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(i,o){return this.canceledNavigationResolution==="computed"?{navigationId:i,\u0275routerPageId:o}:{navigationId:i}}};t.\u0275fac=(()=>{let i;return function(s){return(i||(i=ni(t)))(s||t)}})(),t.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),Kr=function(e){return e[e.COMPLETE=0]="COMPLETE",e[e.FAILED=1]="FAILED",e[e.REDIRECTING=2]="REDIRECTING",e}(Kr||{});function gS(e,t){e.events.pipe(yt(n=>n instanceof Io||n instanceof Jn||n instanceof ia||n instanceof xo),re(n=>n instanceof Io||n instanceof xo?Kr.COMPLETE:(n instanceof Jn?n.code===pi.Redirect||n.code===pi.SupersededByNewNavigation:!1)?Kr.REDIRECTING:Kr.FAILED),yt(n=>n!==Kr.REDIRECTING),Vn(1)).subscribe(()=>{t()})}function _S(e){throw e}var yS={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},vS={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},cy=(()=>{let t=class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=F(ol),this.stateManager=F(ly),this.options=F(pp,{optional:!0})||{},this.pendingTasks=F(df),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=F(uS),this.urlSerializer=F(rp),this.location=F(rl),this.urlHandlingStrategy=F(mp),this._events=new Ie,this.errorHandler=this.options.errorHandler||_S,this.navigated=!1,this.routeReuseStrategy=F(hS),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=F(hp,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!F(cp,{optional:!0}),this.eventsSubscription=new un,this.isNgZoneEnabled=F(st)instanceof st&&st.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:i=>{this.console.warn(i)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let i=this.navigationTransitions.events.subscribe(o=>{try{let s=this.navigationTransitions.currentTransition,r=this.navigationTransitions.currentNavigation;if(s!==null&&r!==null){if(this.stateManager.handleRouterEvent(o,r),o instanceof Jn&&o.code!==pi.Redirect&&o.code!==pi.SupersededByNewNavigation)this.navigated=!0;else if(o instanceof Io)this.navigated=!0;else if(o instanceof oa){let a=this.urlHandlingStrategy.merge(o.url,s.currentRawUrl),c={info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||pS(s.source)};this.scheduleNavigation(a,Jr,null,c,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}wS(o)&&this._events.next(o)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(i)}resetRootComponentType(i){this.routerState.root.component=i,this.navigationTransitions.rootComponentType=i}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Jr,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((i,o)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(i,"popstate",o)},0)})}navigateToSyncWithBrowser(i,o,s){let r={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let u=v({},s);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(r.state=u)}let c=this.parseUrl(i);this.scheduleNavigation(c,o,a,r)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(i){this.config=i.map(dp),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(i,o={}){let{relativeTo:s,queryParams:r,fragment:a,queryParamsHandling:c,preserveFragment:u}=o,p=u?this.currentUrlTree.fragment:a,h=null;switch(c){case"merge":h=v(v({},this.currentUrlTree.queryParams),r);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=r||null}h!==null&&(h=this.removeEmptyProps(h));let m;try{let f=s?s.snapshot:this.routerState.snapshot.root;m=$0(f)}catch{(typeof i[0]!="string"||!i[0].startsWith("/"))&&(i=[]),m=this.currentUrlTree.root}return W0(m,i,h,p??null)}navigateByUrl(i,o={skipLocationChange:!1}){let s=Bs(i)?i:this.parseUrl(i),r=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(r,Jr,null,o)}navigate(i,o={skipLocationChange:!1}){return bS(i),this.navigateByUrl(this.createUrlTree(i,o),o)}serializeUrl(i){return this.urlSerializer.serialize(i)}parseUrl(i){try{return this.urlSerializer.parse(i)}catch{return this.urlSerializer.parse("/")}}isActive(i,o){let s;if(o===!0?s=v({},yS):o===!1?s=v({},vS):s=o,Bs(i))return O0(this.currentUrlTree,i,s);let r=this.parseUrl(i);return O0(this.currentUrlTree,r,s)}removeEmptyProps(i){return Object.entries(i).reduce((o,[s,r])=>(r!=null&&(o[s]=r),o),{})}scheduleNavigation(i,o,s,r,a){if(this.disposed)return Promise.resolve(!1);let c,u,p;a?(c=a.resolve,u=a.reject,p=a.promise):p=new Promise((m,f)=>{c=m,u=f});let h=this.pendingTasks.add();return gS(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:o,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:i,extras:r,resolve:c,reject:u,promise:p,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),p.catch(m=>Promise.reject(m))}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function bS(e){for(let t=0;t<e.length;t++)if(e[t]==null)throw new Ce(4008,!1)}function wS(e){return!(e instanceof na)&&!(e instanceof oa)}var CS=new xe("");function dy(e,...t){return Bn([{provide:hp,multi:!0,useValue:e},[],{provide:Gs,useFactory:SS,deps:[cy]},{provide:yf,multi:!0,useFactory:TS},t.map(n=>n.\u0275providers)])}function SS(e){return e.routerState.root}function TS(){let e=F(Zi);return t=>{let n=e.get(jn);if(t!==n.components[0])return;let i=e.get(cy),o=e.get(MS);e.get(DS)===1&&i.initialNavigation(),e.get(ES,null,Id.Optional)?.setUpPreloading(),e.get(CS,null,Id.Optional)?.init(),i.resetRootComponentType(n.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}var MS=new xe("",{factory:()=>new Ie}),DS=new xe("",{providedIn:"root",factory:()=>1});var ES=new xe("");var uy=[];var IS="@",xS=(()=>{let t=class t{constructor(i,o,s,r,a){this.doc=i,this.delegate=o,this.zone=s,this.animationType=r,this.moduleImpl=a,this._rendererFactoryPromise=null,this.scheduler=F(sf,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){return(this.moduleImpl??import("./chunk-H53KDFSS.js")).catch(o=>{throw new Ce(5300,!1)}).then(({\u0275createEngine:o,\u0275AnimationRendererFactory:s})=>{this._engine=o(this.animationType,this.doc,this.scheduler);let r=new s(this.delegate,this._engine,this.zone);return this.delegate=r,r})}createRenderer(i,o){let s=this.delegate.createRenderer(i,o);if(s.\u0275type===0)return s;typeof s.throwOnSyntheticProps=="boolean"&&(s.throwOnSyntheticProps=!1);let r=new fp(s);return o?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(a=>{let c=a.createRenderer(i,o);r.use(c)}).catch(a=>{r.use(s)}),r}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}};t.\u0275fac=function(o){Ad()},t.\u0275prov=z({token:t,factory:t.\u0275fac});let e=t;return e})(),fp=class{constructor(t){this.delegate=t,this.replay=[],this.\u0275type=1}use(t){if(this.delegate=t,this.replay!==null){for(let n of this.replay)n(t);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(t,n){return this.delegate.createElement(t,n)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}get destroyNode(){return this.delegate.destroyNode}appendChild(t,n){this.delegate.appendChild(t,n)}insertBefore(t,n,i,o){this.delegate.insertBefore(t,n,i,o)}removeChild(t,n,i){this.delegate.removeChild(t,n,i)}selectRootElement(t,n){return this.delegate.selectRootElement(t,n)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,n,i,o){this.delegate.setAttribute(t,n,i,o)}removeAttribute(t,n,i){this.delegate.removeAttribute(t,n,i)}addClass(t,n){this.delegate.addClass(t,n)}removeClass(t,n){this.delegate.removeClass(t,n)}setStyle(t,n,i,o){this.delegate.setStyle(t,n,i,o)}removeStyle(t,n,i){this.delegate.removeStyle(t,n,i)}setProperty(t,n,i){this.shouldReplay(n)&&this.replay.push(o=>o.setProperty(t,n,i)),this.delegate.setProperty(t,n,i)}setValue(t,n){this.delegate.setValue(t,n)}listen(t,n,i){return this.shouldReplay(n)&&this.replay.push(o=>o.listen(t,n,i)),this.delegate.listen(t,n,i)}shouldReplay(t){return this.replay!==null&&t.startsWith(IS)}};function py(e="animations"){return af("NgAsyncAnimations"),Bn([{provide:il,useFactory:(t,n,i)=>new xS(t,n,i,e),deps:[We,Hl,st]},{provide:Ym,useValue:e==="noop"?"NoopAnimations":"BrowserAnimations"}])}var hy=["toast-component",""];function OS(e,t){if(e&1){let n=oe();_(0,"button",5),E("click",function(){O(n);let o=T();return k(o.remove())}),_(1,"span",6),R(2,"\xD7"),y()()}}function kS(e,t){if(e&1&&(ds(0),R(1),us()),e&2){let n=T(2);g(),pt("[",n.duplicatesCount+1,"]")}}function AS(e,t){if(e&1&&(_(0,"div"),R(1),B(2,kS,2,1,"ng-container",4),y()),e&2){let n=T();_i(n.options.titleClass),Et("aria-label",n.title),g(),pt(" ",n.title," "),g(),C("ngIf",n.duplicatesCount)}}function FS(e,t){if(e&1&&L(0,"div",7),e&2){let n=T();_i(n.options.messageClass),C("innerHTML",n.message,Fr)}}function PS(e,t){if(e&1&&(_(0,"div",8),R(1),y()),e&2){let n=T();_i(n.options.messageClass),Et("aria-label",n.message),g(),pt(" ",n.message," ")}}function RS(e,t){if(e&1&&(_(0,"div"),L(1,"div",9),y()),e&2){let n=T();g(),gi("width",n.width()+"%")}}function LS(e,t){if(e&1){let n=oe();_(0,"button",5),E("click",function(){O(n);let o=T();return k(o.remove())}),_(1,"span",6),R(2,"\xD7"),y()()}}function NS(e,t){if(e&1&&(ds(0),R(1),us()),e&2){let n=T(2);g(),pt("[",n.duplicatesCount+1,"]")}}function VS(e,t){if(e&1&&(_(0,"div"),R(1),B(2,NS,2,1,"ng-container",4),y()),e&2){let n=T();_i(n.options.titleClass),Et("aria-label",n.title),g(),pt(" ",n.title," "),g(),C("ngIf",n.duplicatesCount)}}function HS(e,t){if(e&1&&L(0,"div",7),e&2){let n=T();_i(n.options.messageClass),C("innerHTML",n.message,Fr)}}function BS(e,t){if(e&1&&(_(0,"div",8),R(1),y()),e&2){let n=T();_i(n.options.messageClass),Et("aria-label",n.message),g(),pt(" ",n.message," ")}}function GS(e,t){if(e&1&&(_(0,"div"),L(1,"div",9),y()),e&2){let n=T();g(),gi("width",n.width()+"%")}}var gp=class{_attachedHost;component;viewContainerRef;injector;constructor(t,n){this.component=t,this.injector=n}attach(t,n){return this._attachedHost=t,t.attach(this,n)}detach(){let t=this._attachedHost;if(t)return this._attachedHost=void 0,t.detach()}get isAttached(){return this._attachedHost!=null}setAttachedHost(t){this._attachedHost=t}},_p=class{_attachedPortal;_disposeFn;attach(t,n){return this._attachedPortal=t,this.attachComponentPortal(t,n)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(t){this._disposeFn=t}},yp=class{_overlayRef;componentInstance;duplicatesCount=0;_afterClosed=new Ie;_activate=new Ie;_manualClose=new Ie;_resetTimeout=new Ie;_countDuplicate=new Ie;constructor(t){this._overlayRef=t}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(t,n){t&&this._resetTimeout.next(),n&&this._countDuplicate.next(++this.duplicatesCount)}},zs=class{toastId;config;message;title;toastType;toastRef;_onTap=new Ie;_onAction=new Ie;constructor(t,n,i,o,s,r){this.toastId=t,this.config=n,this.message=i,this.title=o,this.toastType=s,this.toastRef=r,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(t){this._onAction.next(t)}onAction(){return this._onAction.asObservable()}},my={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing"},fy=new xe("ToastConfig"),vp=class extends _p{_hostDomElement;_componentFactoryResolver;_appRef;constructor(t,n,i){super(),this._hostDomElement=t,this._componentFactoryResolver=n,this._appRef=i}attachComponentPortal(t,n){let i=this._componentFactoryResolver.resolveComponentFactory(t.component),o;return o=i.create(t.injector),this._appRef.attachView(o.hostView),this.setDisposeFn(()=>{this._appRef.detachView(o.hostView),o.destroy()}),n?this._hostDomElement.insertBefore(this._getComponentRootNode(o),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(o)),o}_getComponentRootNode(t){return t.hostView.rootNodes[0]}},jS=(()=>{class e{_document=F(We);_containerElement;ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let n=this._document.createElement("div");n.classList.add("overlay-container"),n.setAttribute("aria-live","polite"),this._document.body.appendChild(n),this._containerElement=n}static \u0275fac=function(i){return new(i||e)};static \u0275prov=z({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),bp=class{_portalHost;constructor(t){this._portalHost=t}attach(t,n=!0){return this._portalHost.attach(t,n)}detach(){return this._portalHost.detach()}},US=(()=>{class e{_overlayContainer=F(jS);_componentFactoryResolver=F(rf);_appRef=F(jn);_document=F(We);_paneElements=new Map;create(n,i){return this._createOverlayRef(this.getPaneElement(n,i))}getPaneElement(n="",i){return this._paneElements.get(i)||this._paneElements.set(i,{}),this._paneElements.get(i)[n]||(this._paneElements.get(i)[n]=this._createPaneElement(n,i)),this._paneElements.get(i)[n]}_createPaneElement(n,i){let o=this._document.createElement("div");return o.id="toast-container",o.classList.add(n),o.classList.add("toast-container"),i?i.getContainerElement().appendChild(o):this._overlayContainer.getContainerElement().appendChild(o),o}_createPortalHost(n){return new vp(n,this._componentFactoryResolver,this._appRef)}_createOverlayRef(n){return new bp(this._createPortalHost(n))}static \u0275fac=function(i){return new(i||e)};static \u0275prov=z({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),nc=(()=>{class e{overlay;_injector;sanitizer;ngZone;toastrConfig;currentlyActive=0;toasts=[];overlayContainer;previousToastMessage;index=0;constructor(n,i,o,s,r){this.overlay=i,this._injector=o,this.sanitizer=s,this.ngZone=r,this.toastrConfig=v(v({},n.default),n.config),n.config.iconClasses&&(this.toastrConfig.iconClasses=v(v({},n.default.iconClasses),n.config.iconClasses))}show(n,i,o={},s=""){return this._preBuildNotification(s,n,i,this.applyConfig(o))}success(n,i,o={}){let s=this.toastrConfig.iconClasses.success||"";return this._preBuildNotification(s,n,i,this.applyConfig(o))}error(n,i,o={}){let s=this.toastrConfig.iconClasses.error||"";return this._preBuildNotification(s,n,i,this.applyConfig(o))}info(n,i,o={}){let s=this.toastrConfig.iconClasses.info||"";return this._preBuildNotification(s,n,i,this.applyConfig(o))}warning(n,i,o={}){let s=this.toastrConfig.iconClasses.warning||"";return this._preBuildNotification(s,n,i,this.applyConfig(o))}clear(n){for(let i of this.toasts)if(n!==void 0){if(i.toastId===n){i.toastRef.manualClose();return}}else i.toastRef.manualClose()}remove(n){let i=this._findToast(n);if(!i||(i.activeToast.toastRef.close(),this.toasts.splice(i.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){let o=this.toasts[this.currentlyActive].toastRef;o.isInactive()||(this.currentlyActive=this.currentlyActive+1,o.activate())}return!0}findDuplicate(n="",i="",o,s){let{includeTitleDuplicates:r}=this.toastrConfig;for(let a of this.toasts){let c=r&&a.title===n;if((!r||c)&&a.message===i)return a.toastRef.onDuplicate(o,s),a}return null}applyConfig(n={}){return v(v({},this.toastrConfig),n)}_findToast(n){for(let i=0;i<this.toasts.length;i++)if(this.toasts[i].toastId===n)return{index:i,activeToast:this.toasts[i]};return null}_preBuildNotification(n,i,o,s){return s.onActivateTick?this.ngZone.run(()=>this._buildNotification(n,i,o,s)):this._buildNotification(n,i,o,s)}_buildNotification(n,i,o,s){if(!s.toastComponent)throw new Error("toastComponent required");let r=this.findDuplicate(o,i,this.toastrConfig.resetTimeoutOnDuplicate&&s.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&o||i)&&this.toastrConfig.preventDuplicates&&r!==null)return r;this.previousToastMessage=i;let a=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(a=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));let c=this.overlay.create(s.positionClass,this.overlayContainer);this.index=this.index+1;let u=i;i&&s.enableHtml&&(u=this.sanitizer.sanitize(hn.HTML,i));let p=new yp(c),h=new zs(this.index,s,u,o,n,p),m=[{provide:zs,useValue:h}],f=Zi.create({providers:m,parent:this._injector}),S=new gp(s.toastComponent,f),A=c.attach(S,s.newestOnTop);p.componentInstance=A.instance;let H={toastId:this.index,title:o||"",message:i||"",toastRef:p,onShown:p.afterActivate(),onHidden:p.afterClosed(),onTap:h.onTap(),onAction:h.onAction(),portal:A};return a||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{H.toastRef.activate()})),this.toasts.push(H),H}static \u0275fac=function(i){return new(i||e)(Se(fy),Se(US),Se(Zi),Se(qr),Se(st))};static \u0275prov=z({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),zS=(()=>{class e{toastrService;toastPackage;ngZone;message;title;options;duplicatesCount;originalTimeout;width=cs(-1);toastClasses="";state;get _state(){return this.state()}get displayStyle(){if(this.state().value==="inactive")return"none"}timeout;intervalId;hideTime;sub;sub1;sub2;sub3;constructor(n,i,o){this.toastrService=n,this.toastPackage=i,this.ngZone=o,this.message=i.message,this.title=i.title,this.options=i.config,this.originalTimeout=i.config.timeOut,this.toastClasses=`${i.toastType} ${i.config.toastClass}`,this.sub=i.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=i.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=i.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=i.toastRef.countDuplicate().subscribe(s=>{this.duplicatesCount=s}),this.state=cs({value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}})}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state.update(n=>G(v({},n),{value:"active"})),!(this.options.disableTimeOut===!0||this.options.disableTimeOut==="timeOut")&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=new Date().getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(this.width()===0||this.width()===100||!this.options.timeOut)return;let n=new Date().getTime(),i=this.hideTime-n;this.width.set(i/this.options.timeOut*100),this.options.progressAnimation==="increasing"&&this.width.update(o=>100-o),this.width()<=0&&this.width.set(0),this.width()>=100&&this.width.set(100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state.update(n=>G(v({},n),{value:"active"})),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width.set(-1),this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){this.state().value!=="removed"&&(clearTimeout(this.timeout),this.state.update(n=>G(v({},n),{value:"removed"})),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){this.state().value!=="removed"&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){this.state().value!=="removed"&&this.options.disableTimeOut!=="extendedTimeOut"&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width.set(0))}delayedHideToast(){this.options.disableTimeOut===!0||this.options.disableTimeOut==="extendedTimeOut"||this.options.extendedTimeOut===0||this.state().value==="removed"||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width.set(-1),this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(n,i){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(n),i)):this.timeout=setTimeout(()=>n(),i)}outsideInterval(n,i){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(n),i)):this.intervalId=setInterval(()=>n(),i)}runInsideAngular(n){this.ngZone?this.ngZone.run(()=>n()):n()}static \u0275fac=function(i){return new(i||e)(V(nc),V(zs),V(st))};static \u0275cmp=ee({type:e,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(i,o){i&1&&E("click",function(){return o.tapToast()})("mouseenter",function(){return o.stickAround()})("mouseleave",function(){return o.delayedHideToast()}),i&2&&(hf("@flyInOut",o._state),_i(o.toastClasses),gi("display",o.displayStyle))},standalone:!0,features:[ae],attrs:hy,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(i,o){i&1&&B(0,OS,3,0,"button",0)(1,AS,3,5,"div",1)(2,FS,1,3,"div",2)(3,PS,2,4,"div",3)(4,RS,2,2,"div",4),i&2&&(C("ngIf",o.options.closeButton),g(),C("ngIf",o.title),g(),C("ngIf",o.message&&o.options.enableHtml),g(),C("ngIf",o.message&&!o.options.enableHtml),g(),C("ngIf",o.options.progressBar))},dependencies:[Pi],encapsulation:2,data:{animation:[al("flyInOut",[vs("inactive",zn({opacity:0})),vs("active",zn({opacity:1})),vs("removed",zn({opacity:0})),bs("inactive => active",ys("{{ easeTime }}ms {{ easing }}")),bs("active => removed",ys("{{ easeTime }}ms {{ easing }}"))])]},changeDetection:0})}return e})(),$S=G(v({},my),{toastComponent:zS}),wp=(e={})=>Bn([{provide:fy,useValue:{default:$S,config:e}}]),gy=(()=>{class e{static forRoot(n={}){return{ngModule:e,providers:[wp(n)]}}static \u0275fac=function(i){return new(i||e)};static \u0275mod=Rt({type:e});static \u0275inj=Pt({})}return e})();var WS=(()=>{class e{toastrService;toastPackage;appRef;message;title;options;duplicatesCount;originalTimeout;width=cs(-1);toastClasses="";get displayStyle(){return this.state()==="inactive"?"none":null}state=cs("inactive");timeout;intervalId;hideTime;sub;sub1;sub2;sub3;constructor(n,i,o){this.toastrService=n,this.toastPackage=i,this.appRef=o,this.message=i.message,this.title=i.title,this.options=i.config,this.originalTimeout=i.config.timeOut,this.toastClasses=`${i.toastType} ${i.config.toastClass}`,this.sub=i.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=i.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=i.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=i.toastRef.countDuplicate().subscribe(s=>{this.duplicatesCount=s})}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state.set("active"),!(this.options.disableTimeOut===!0||this.options.disableTimeOut==="timeOut")&&this.options.timeOut&&(this.timeout=setTimeout(()=>{this.remove()},this.options.timeOut),this.hideTime=new Date().getTime()+this.options.timeOut,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))),this.options.onActivateTick&&this.appRef.tick()}updateProgress(){if(this.width()===0||this.width()===100||!this.options.timeOut)return;let n=new Date().getTime(),i=this.hideTime-n;this.width.set(i/this.options.timeOut*100),this.options.progressAnimation==="increasing"&&this.width.update(o=>100-o),this.width()<=0&&this.width.set(0),this.width()>=100&&this.width.set(100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state.set("active"),this.options.timeOut=this.originalTimeout,this.timeout=setTimeout(()=>this.remove(),this.originalTimeout),this.hideTime=new Date().getTime()+(this.originalTimeout||0),this.width.set(-1),this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))}remove(){this.state()!=="removed"&&(clearTimeout(this.timeout),this.state.set("removed"),this.timeout=setTimeout(()=>this.toastrService.remove(this.toastPackage.toastId)))}tapToast(){this.state()!=="removed"&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){this.state()!=="removed"&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width.set(0))}delayedHideToast(){this.options.disableTimeOut===!0||this.options.disableTimeOut==="extendedTimeOut"||this.options.extendedTimeOut===0||this.state()==="removed"||(this.timeout=setTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width.set(-1),this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10)))}static \u0275fac=function(i){return new(i||e)(V(nc),V(zs),V(jn))};static \u0275cmp=ee({type:e,selectors:[["","toast-component",""]],hostVars:4,hostBindings:function(i,o){i&1&&E("click",function(){return o.tapToast()})("mouseenter",function(){return o.stickAround()})("mouseleave",function(){return o.delayedHideToast()}),i&2&&(_i(o.toastClasses),gi("display",o.displayStyle))},standalone:!0,features:[ae],attrs:hy,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(i,o){i&1&&B(0,LS,3,0,"button",0)(1,VS,3,5,"div",1)(2,HS,1,3,"div",2)(3,BS,2,4,"div",3)(4,GS,2,2,"div",4),i&2&&(C("ngIf",o.options.closeButton),g(),C("ngIf",o.title),g(),C("ngIf",o.message&&o.options.enableHtml),g(),C("ngIf",o.message&&!o.options.enableHtml),g(),C("ngIf",o.options.progressBar))},dependencies:[Pi],encapsulation:2,changeDetection:0})}return e})(),Sk=G(v({},my),{toastComponent:WS});var _y={providers:[dy(uy),py(),wp({timeOut:3e3,positionClass:"toast-bottom-full-width",progressBar:!0})]};var Cp,ua=Cp=class extends Ds{constructor(e){super(e),this.type="none"}clone(){return new Cp({type:this.type})}};l([Ag({none:"none",stayAbove:"stay-above"})],ua.prototype,"type",void 0),ua=Cp=l([b("esri.ground.NavigationConstraint")],ua);var Sp,vn=Sp=class extends jf(Br){constructor(e){super(e),this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new Y;let t=i=>{i.parent&&i.parent!==this&&"remove"in i.parent&&i.parent.remove(i),i.parent=this,i.type!=="elevation"&&i.type!=="base-elevation"&&Z.getLogger(this).error(`Layer '${i.title}, id:${i.id}' of type '${i.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},n=i=>{i.parent=null};this.addHandles([this.layers.on("after-add",i=>t(i.item)),this.layers.on("after-remove",i=>n(i.item))])}initialize(){this.when().catch(e=>{Ms(e)||Z.getLogger(this).error("#load()","Failed to load ground",e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){let e=this.layers.removeAll();for(let t of e)se(t);this.layers.destroy()}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e=v({},e)).resourceInfo),e}set layers(e){this._set("layers",pl(e,this._get("layers")))}writeLayers(e,t,n,i){let o=[];e&&(i=G(v({},i),{layerContainerType:"ground"}),e.forEach(s=>{if("write"in s){let r={};qg(s)().write(r,i)&&o.push(r)}else i?.messages&&i.messages.push(new ne("layer:unsupported",`Layers (${s.title}, ${s.id}) of type '${s.declaredClass}' cannot be persisted in the ground`,{layer:s}))})),t.layers=o}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return eg(this,e=>{e(this.layers)})}queryElevation(e,t){return I(this,null,function*(){yield this.load({signal:t?.signal});let{ElevationQuery:n}=yield import("./chunk-EID4UUYZ.js");Ot(t);let i=new n,o=this.layers.filter(yy).toArray();return i.queryAll(o,e,t)})}createElevationSampler(e,t){return I(this,null,function*(){yield this.load({signal:t?.signal});let{ElevationQuery:n}=yield import("./chunk-EID4UUYZ.js");Ot(t);let i=new n,o=this.layers.filter(yy).toArray();return i.createSamplerAll(o,e,t)})}clone(){let e={opacity:this.opacity,surfaceColor:Nr(this.surfaceColor),navigationConstraint:Nr(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(e.loadStatus="loaded"),new Sp({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}_loadFromSource(e){let t=this.resourceInfo;return t?this._loadLayersFromJSON(t.data,t.context,e):Promise.resolve()}_loadLayersFromJSON(e,t,n){return I(this,null,function*(){let i=t?.origin||"web-scene",o=t?.portal||null,s=t?.url||null,{populateOperationalLayers:r}=yield import("./chunk-UKWGPRCB.js");Ot(n);let a=[];if(e.layers&&Array.isArray(e.layers)){let c={context:{origin:i,url:s,portal:o,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};a.push(r(this.layers,e.layers,c))}yield Promise.allSettled(a)})}};function ZS(e){return e&&"createElevationSampler"in e}function yy(e){return e.type==="elevation"||ZS(e)}l([d({json:{read:!1}})],vn.prototype,"layers",null),l([tg("layers")],vn.prototype,"writeLayers",null),l([d({readOnly:!0})],vn.prototype,"resourceInfo",void 0),l([d({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:zd,read:{reader:c_,source:"transparency"},write:{writer:(e,t)=>{t.transparency=l_(e)},target:"transparency"}}})],vn.prototype,"opacity",void 0),l([d({type:Qi,json:{type:[zd],write:(e,t)=>{t.surfaceColor=e.toJSON().slice(0,3)}}})],vn.prototype,"surfaceColor",void 0),l([d({type:ua,json:{write:!0}})],vn.prototype,"navigationConstraint",void 0),vn=Sp=l([b("esri.Ground")],vn);var $s=vn;var oc=new WeakMap;function Tp(e){return!e.destroyed&&(oc.has(e)||e.addHandles([x(()=>{let t=e.parent;return!(!t||!("type"in t))&&(t.type==="catalog-dynamic-group"||Tp(t))},t=>oc.set(e,t),qe),$t(()=>oc.delete(e))]),oc.get(e))}function YS(e){return typeof e=="object"&&e!=null&&"loaded"in e&&e.loaded===!0&&"type"in e}function vy(e){return!(!YS(e)||!Ig(e)?.operations?.supportsEditing||"editingEnabled"in e&&!xg(e)||Tp(e))}var by={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function wy(e){let t=null;if(typeof e=="string")if(e in by){let n=by[e];t=new $s({resourceInfo:{data:{layers:[n]}}})}else Z.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${e}. Try "world-elevation"`);else t=Gf($s,e);return t}var Ni=class extends S_(C_(Ue.EventedMixin(P))){constructor(e){super(e),this.allLayers=new Mo({getCollections:()=>[this.basemap?.baseLayers,this.ground?.layers,this.layers,this.basemap?.referenceLayers],getChildrenFunction:t=>"layers"in t?t.layers:null}),this.allTables=w_(this),this.basemap=null,this.editableLayers=new Mo({getCollections:()=>[this.allLayers],itemFilterFunction:vy}),this.ground=new $s,this._basemapCache=Fg()}destroy(){Pg(this._basemapCache),this._basemapCache=null,this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),this.basemap=se(this.basemap),se(this.ground),this._set("ground",null)}castBasemap(e){return Rg(e,this._basemapCache)}castGround(e){return wy(e)??this._get("ground")}findLayerById(e){return this.allLayers.find(t=>t.id===e)}findTableById(e){return this.allTables.find(t=>t.id===e)}};l([d({readOnly:!0,dependsOn:[]})],Ni.prototype,"allLayers",void 0),l([d({readOnly:!0})],Ni.prototype,"allTables",void 0),l([d({type:D_,json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],Ni.prototype,"basemap",void 0),l([li("basemap")],Ni.prototype,"castBasemap",null),l([d({readOnly:!0})],Ni.prototype,"editableLayers",void 0),l([d({type:$s,nonNullable:!0})],Ni.prototype,"ground",void 0),l([li("ground")],Ni.prototype,"castGround",null),l([d()],Ni.prototype,"undoRedo",void 0),Ni=l([b("esri.Map")],Ni);var sc=Ni;var rc={widthBreakpoint:{getValue(e){let t=e.viewSize[0],n=e.breakpoints,i=this.values;return t<=n.xsmall?i.xsmall:t<=n.small?i.small:t<=n.medium?i.medium:t<=n.large?i.large:i.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(e){let t=e.viewSize[1],n=e.breakpoints,i=this.values;return t<=n.xsmall?i.xsmall:t<=n.small?i.small:t<=n.medium?i.medium:t<=n.large?i.large:i.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(e){let t=e.viewSize,n=t[0],i=t[1],o=this.values;return i>=n?o.portrait:o.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},Mp={xsmall:544,small:768,medium:992,large:1200};function KS(e){let t=e;return t&&t.xsmall<t.small&&t.small<t.medium&&t.medium<t.large}function Dp(e,t){return t?rc[e].valueToClassName[t].split(" "):[]}var Cy=e=>{let t=class extends e{constructor(...n){super(...n),this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=Mp}initialize(){this.addHandles(x(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),ie))}destroy(){this.destroyed||this._removeActiveClassNames()}set breakpoints(n){if(n!==this._get("breakpoints")){if(!KS(n)){let i=JSON.stringify(Mp,null,2);console.warn("provided breakpoints are not valid, using defaults:"+i),n=Mp}this._set("breakpoints",v({},n))}}_updateClassNames(){if(!this.container)return;let n=Vr.acquire(),i=Vr.acquire(),o,s=!1;for(o in rc){let r=this[o],a=rc[o].getValue({viewSize:this.size,breakpoints:this.breakpoints});r!==a&&(s=!0,this[o]=a,Dp(o,r).forEach(c=>i.push(c)),Dp(o,a).forEach(c=>n.push(c)))}s&&(this._applyClassNameChanges(n,i),Vr.release(n),Vr.release(i))}_applyClassNameChanges(n,i){let o=this.container;o&&(i.forEach(s=>o.classList.remove(s)),n.forEach(s=>o.classList.add(s)))}_removeActiveClassNames(){let n=this.container;if(!n)return;let i;for(i in rc)Dp(i,this[i]).forEach(o=>n.classList.remove(o))}};return l([d()],t.prototype,"breakpoints",null),l([d()],t.prototype,"orientation",void 0),l([d()],t.prototype,"widthBreakpoint",void 0),l([d()],t.prototype,"heightBreakpoint",void 0),t=l([b("esri.views.BreakpointsOwner")],t),t};var eo=class extends P{constructor(){super(...arguments),this.items=new Y,this._watchUpdatingTracking=new Kn,this._callbacks=new Map,this._projector=Yd(),this._hiddenProjector=Yd()}get needsRender(){return this.items.length>0}get updating(){return this._watchUpdatingTracking?.updating??!1}initialize(){let e=document.createElement("div");e.className="esri-overlay-surface",this._set("surface",e),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),e.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,t=>{for(let n of t.added){let i=()=>n.render();this._callbacks.set(n,i),this._projector.append(this.surface,i)}for(let n of t.removed){let i=this._projector.detach(this._callbacks.get(n));this.surface.removeChild(i.domNode),this._callbacks.delete(n)}})}addItem(e){this.items.add(e)}removeItem(e){this.items.remove(e)}destroy(){this.items.removeAll(),this._callbacks.forEach(e=>this._projector.detach(e)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(e){let t=this._hiddenSurface,n=this._hiddenProjector,i,o=()=>(i=e.render(),i);n.append(t,o),n.renderNow();let s={left:0,top:0,right:0,bottom:0};if(i?.domNode){let r=i.domNode.getBoundingClientRect();s.left=r.left,s.top=r.top,s.right=r.right,s.bottom=r.bottom}for(n.detach(o);t.firstChild;)t.removeChild(t.firstChild);return s}overlaps(e,t){let n=this.computeBoundingRect(e),i=this.computeBoundingRect(t);return Math.max(n.left,i.left)<=Math.min(n.right,i.right)&&Math.max(n.top,i.top)<=Math.min(n.bottom,i.bottom)}get hasVisibleItems(){return this.items.some(e=>e.visible)}prepare(){return I(this,null,function*(){yield document.fonts.load(this._fontString()).catch(()=>{})})}renderCanvas(e,t){let n=!!t?.disableDecorations;if(!this.items.some(o=>o.visible&&!(n&&o.isDecoration)))return;let i=e.getContext("2d");i.save(),i.font=this._fontString(),this.items.forEach(o=>{n&&o.isDecoration||(i.save(),o.renderCanvas(i),i.restore())}),i.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};l([d({readOnly:!0})],eo.prototype,"surface",void 0),l([d({readOnly:!0})],eo.prototype,"items",void 0),l([d({readOnly:!0})],eo.prototype,"needsRender",null),l([d({readOnly:!0})],eo.prototype,"_watchUpdatingTracking",void 0),l([d({readOnly:!0})],eo.prototype,"updating",null),eo=l([b("esri.views.overlay.ViewOverlay")],eo);var Ep=eo;var Ip=[0,0];function QS(e){let t=(e.ownerDocument||window.document).defaultView,n=e.getBoundingClientRect();return Ip[0]=n.left+(t?.pageXOffset??0),Ip[1]=n.top+(t?.pageYOffset??0),Ip}function Sy(e){e&&(dl(e),e.parentNode&&e.parentNode.removeChild(e))}function JS(e){let t=document.createElement("div");return e.appendChild(t),t}var pa=16,ac=750,XS=512,eT=2,Ty=e=>{let t=class extends e{constructor(...n){super(...n),this._freqInfo={freq:pa,time:ac},this._overlayRenderTaskHandle=null,this.height=0,this.messagesCommon=null,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.addHandles([x(()=>this.cursor,i=>{let{surface:o}=this;o&&o.setAttribute("data-cursor",i)}),x(()=>this.navigating,i=>{let{surface:o}=this;o&&o.setAttribute("data-navigating",i.toString())})])}initialize(){this.addHandles([x(()=>this.ui,(n,i)=>this._handleUIChange(n,i),ie),this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])}destroy(){this.destroyed||(this.ui=se(this.ui),this.container=null)}get container(){return this._get("container")??null}set container(n){let i=this._get("container"),o=cl(n);if(o||typeof n!="string"||Z.getLogger(this).error("#container",`element with id '${n}' not found`),i===o)return;if(this._stopMeasuring(),i&&(i.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(Sy(this.root),this._set("root",null)),this.userContent&&(Zd(this.userContent,i),Sy(this.userContent),this._set("userContent",null))),!o)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);o.classList.add("esri-view");let s=document.createElement("div");s.className="esri-view-user-storage",Zd(o,s),o.appendChild(s),this._set("userContent",s);let r=document.createElement("div");r.className="esri-view-root",o.insertBefore(r,o.firstChild),this._set("root",r);let a=document.createElement("div");a.className="esri-view-surface",a.setAttribute("role","application"),a.tabIndex=0,r.appendChild(a),this._set("surface",a);let c=new Ep;r.appendChild(c.surface),this._set("overlay",c),this.addHandles(x(()=>c.needsRender,u=>{u&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=Ri({render:()=>this.overlay?.render()}):this._overlayRenderTaskHandle=Me(this._overlayRenderTaskHandle)})),this.forceDOMReadyCycle(),this._set("container",o),this._startMeasuring()}get focused(){let n=document.activeElement===this.surface;return document.hasFocus()&&n}get size(){return[this.width,this.height]}blur(){this.surface?.blur()}focus(){this.surface?.focus()}pageToContainer(n,i,o){let s=this.position;return n-=s?s[0]:0,i-=s?s[1]:0,o?(o[0]=n,o[1]=i):o=[n,i],o}containerToPage(n,i,o){let s=this.position;return n+=s?s[0]:0,i+=s?s[1]:0,o?(o[0]=n,o[1]=i):o=[n,i],o}_handleUIChange(n,i){this.removeHandles("ui"),i&&i!==n&&i.destroy(),n&&(n.view=this,this.addHandles(x(()=>this.root,o=>{n.container=o?JS(o):null},ie),"ui")),this._set("ui",n)}_stopMeasuring(){this.removeHandles("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){let n=this._freqInfo;n.freq=pa,n.time=ac,this.addHandles([If(window,"resize",()=>{n.freq=pa,n.time=ac}),Ri({prepare:i=>{let o=this._measure(),s=this._freqInfo;if(s.time+=i.deltaTime,o&&(s.freq=pa,this._get("resizing")||this._set("resizing",!0)),s.time<s.freq)return;s.time=0;let r=this._position();s.freq=r||o?pa:Math.min(ac,s.freq*eT),!o&&s.freq>=XS&&this._get("resizing")&&this._set("resizing",!1)}})],"measuring"),this._measure(),this._position()}_measure(){let n=this.container,i=n?n.clientWidth:0,o=n?n.clientHeight:0;if(i===0||o===0)return this.suspended||this._set("suspended",!0),!1;let s=this.width,r=this.height;return i===s&&o===r?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",i),this._set("height",o),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:s,oldHeight:r,width:i,height:o}),!0)}_position(){let n=this.container,i=this.position,o=n&&QS(n);return!!o&&(!i||o[0]!==i[0]||o[1]!==i[1])&&(this._set("position",[o[0],o[1]]),!0)}forceDOMReadyCycle(){}};return l([d()],t.prototype,"container",null),l([d({readOnly:!0})],t.prototype,"focused",null),l([d({readOnly:!0})],t.prototype,"height",void 0),l([d()],t.prototype,"messagesCommon",void 0),l([d({type:Ep})],t.prototype,"overlay",void 0),l([d({readOnly:!0})],t.prototype,"position",void 0),l([d({readOnly:!0})],t.prototype,"resizing",void 0),l([d({readOnly:!0})],t.prototype,"root",void 0),l([d({value:null,readOnly:!0})],t.prototype,"size",null),l([d({readOnly:!0})],t.prototype,"surface",void 0),l([d({readOnly:!0})],t.prototype,"suspended",void 0),l([d()],t.prototype,"ui",void 0),l([d({readOnly:!0})],t.prototype,"userContent",void 0),l([d({readOnly:!0})],t.prototype,"width",void 0),l([d()],t.prototype,"widthBreakpoint",void 0),t=l([b("esri.views.DOMContainer")],t),t};function bn(e){return e!=null&&"open"in e&&"declaredClass"in e}function My(e){return e!=null&&"declaredClass"in e&&"dockOptions"in e}var Dy=e=>{let t=class extends e{constructor(){super(...arguments),this._popupSetupTask=null,this.popup={},this.popupEnabled=!0}initialize(){this.addHandles([x(()=>[this.ui,this.popup],([n,i],o)=>{let s="popup",r="manual";if(o){let[a,c]=o;a&&bn(c)&&(c.view=null,My(c)&&a.remove(c,s))}n&&bn(i)&&(i.view=this,My(i)&&n.add(i,{key:s,position:r,internal:!0}))},ie),this.on("click",n=>{this.popup&&this.popupEnabled&&(n.pointerType!=="mouse"||n.button===0)&&(bn(this.popup)?this.popup.viewModel.handleViewClick(n):n.async(()=>I(this,null,function*(){yield this.setupPopup(),bn(this.popup)&&!this.destroyed&&this.ready&&this.popupEnabled&&this.popup.viewModel.handleViewClick(n)})))},be.WIDGET)]),gn(()=>this.ready&&this.popupEnabled&&!this.updating).then(()=>{import("./chunk-7MOWAMF6.js")})}destroy(){this.destroyed||this.closePopup()}openPopup(n){return I(this,null,function*(){if(bn(this.popup))return this.popup.open(n);try{if(yield this.setupPopup(),!this.popup)return void Z.getLogger(this).error(new ne("view:null-popup","Popup is null and can't be opened"));this.popup.open(n)}catch{}})}closePopup(){this._popupSetupTask?.abort(),bn(this.popup)&&this.popup.close()}fetchPopupFeatures(n,i){return I(this,null,function*(){return yield this.when(),this._popupHitsToFeatures(yield this._getPopupHits(n,i),i)})}setupPopup(){return I(this,null,function*(){if(this._popupSetupTask?.abort(),this.popup&&!bn(this.popup))return this._popupSetupTask=qn(n=>I(this,null,function*(){let{default:i}=yield import("./chunk-7MOWAMF6.js");if(Ot(n),!this.popup||bn(this.popup))return;let o=this.popup;delete o.open,delete o.close,this.popup=new i(o)})),this._popupSetupTask.promise})}_popupHitsToFeatures(s,r){return I(this,arguments,function*({location:n,hits:i},o){let a=[],c=[],u=!1,p=Af(o,Ge("popup-view-fetch-timeout")??tT),h=S=>{let A=new xp(S);return c.push(A),a.push(A.promise),A},m=S=>{let A=c.at(-1);return A&&A.layerView===S&&!u?A:h(S)};for(let S of i)"graphic"in S?(m(S.layerView).graphics.push(S.graphic),u=!1):(a.push(S.layerView.fetchPopupFeaturesAtLocation(S.mapPoint,p)),u=!0);c.map(S=>S.resolve(p));let f=Of(a).then(S=>S.filter(A=>!!A).flat());return{pendingFeatures:a,allGraphicsPromise:f,location:n}})}_getPopupHits(n,i){return I(this,null,function*(){let{hits:o,location:s}=yield this.popupHitTest(n);Ot(i);let r=[];for(let a of o)if("graphic"in a){if(this._isValidPopupGraphic(a.graphic,i)){let c=this._isValidPopupGraphicsLayerView(a.layerView)?a.layerView:void 0;r.push({graphic:a.graphic,layerView:c})}}else this._isValidPopupLocationLayerView(a.layerView)&&r.push({mapPoint:a.mapPoint,layerView:a.layerView});return{hits:r,location:s}})}_isValidPopupGraphic(n,i){return n&&!!n.getEffectivePopupTemplate(i?.defaultPopupTemplateEnabled)}_isValidPopupGraphicsLayerView(n){return!n||(!("layer"in n)||!n.suspended)&&"fetchPopupFeaturesFromGraphics"in n}_isValidPopupLocationLayerView(n){return(!("layer"in n)||!n.suspended)&&"fetchPopupFeaturesAtLocation"in n}};return l([d({cast(n){return!n||bn(n)||typeof n=="object"&&(n.open=i=>(jd(Z.getLogger(this),"view.popup is no longer created by default. view.popup.open() will stop working when the popup isn't created",{replacement:"Use view.openPopup() instead.",version:"4.27"}),this.openPopup(i)),n.close=()=>(jd(Z.getLogger(this),"view.popup is no longer created by default. view.popup.close() will stop working when the popup isn't created",{replacement:"Use view.closePopup() instead.",version:"4.27"}),this.closePopup())),n}})],t.prototype,"popup",void 0),l([d()],t.prototype,"popupEnabled",void 0),t=l([b("esri.views.PopupView")],t),t},xp=class{constructor(t){this.layerView=t,this._resolver=wo(),this.graphics=[]}get promise(){return this._resolver.promise}resolve(t){let{layerView:n,graphics:i,_resolver:o}=this;if(!n)return o.resolve(i),o.promise;let s;return n.fetchPopupFeaturesFromGraphics(i,t).catch(r=>(s=r,null)).then(r=>{r?o.resolve(r):o.reject(s)}),o.promise}},tT=5e3;var ha=class extends T_{constructor(e){super(e),this.addHandles(this.on("before-add",t=>{t.item!=null&&t.item.parent===this.owner&&(Z.getLogger(this).warn("Analysis inside the collection must be unique. Not adding this element again."),t.preventDefault())}))}_own(e){e.parent=this.owner}_release(e){e.parent=null}};ha=l([b("esri.support.AnalysesCollection")],ha);var wn=class extends P{constructor(e){super(e),this.view=null,this.baseLayerViews=new Y,this.referenceLayerViews=new Y,this._loadingHandle=x(()=>this.view?.map?.basemap,t=>{t&&t.load().catch(()=>{})},ie)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null);for(let e of this.baseLayerViews)e.destroy();this.baseLayerViews.length=0;for(let e of this.referenceLayerViews)e.destroy();this.referenceLayerViews.length=0}get suspended(){return!this.view||this.view.suspended}get updating(){if(this.view?.suspended)return!1;let e=this.view?.map?.basemap;return!!e&&!!e.loaded&&(this.baseLayerViews.some(t=>t.updating)||this.referenceLayerViews.some(t=>t.updating))}};l([d({constructOnly:!0})],wn.prototype,"view",void 0),l([d({readOnly:!0})],wn.prototype,"baseLayerViews",void 0),l([d({readOnly:!0})],wn.prototype,"referenceLayerViews",void 0),l([d({readOnly:!0})],wn.prototype,"suspended",null),l([d({type:Boolean,readOnly:!0})],wn.prototype,"updating",null),wn=l([b("esri.views.BasemapView")],wn);function iT(e){return"tryRecycleWith"in e}function nT(e){return e!=null&&typeof e=="object"&&"layerViews"in e}var Op=class{constructor(t,n,i){this.layer=t,this.view=n,this.layerViewImporter=i,this._controller=new AbortController,this._deferred=wo(),this._started=!1,this.done=!1,this.promise=this._deferred.promise,Ts(this._controller.signal,()=>{let o=new ne("cancelled:layerview-create","layerview creation cancelled",{layer:t});this._deferred.reject(o)})}tryRecycle(t){if(!this.done||!this.layerView||!iT(this.layerView))return null;let n=this.layer.type,i=this._controller.signal;for(let o=0;o<t.length;o++){let s=t[o];if(s.type!==n)continue;let r=this.layerView.tryRecycleWith(s,{signal:i});if(r){t.splice(o,1),this.layer=s;let a=this.layerView,c=a.view;return this.promise=Promise.race([r.then(()=>(Ot(this._controller.signal),s.emit("layerview-destroy",{view:c,layerView:a}),c.emit("layerview-destroy",{view:c,layerView:a}),s.emit("layerview-create",{view:c,layerView:a}),c.emit("layerview-create",{view:c,layerView:a}),a)),new Promise((u,p)=>Ts(this._controller.signal,()=>p(Ss())))]),this.promise}}return null}destroy(){this._controller.abort();let{layerView:t}=this;if(t){let{layer:n,view:i}=this;n.emit("layerview-destroy",{view:i,layerView:t}),i.emit("layerview-destroy",{layer:n,layerView:t})}this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null,this._map=null}start(){return I(this,null,function*(){if(this._started)return;this._started=!0;let{_controller:{signal:t},layer:n,view:i}=this;this._map=i.map;try{let o,s;if(yield n.load({signal:t}),n.prefetchResources&&(yield n.prefetchResources({signal:t})),oT(n))o=yield n.createLayerView(i,{signal:t});else{if(!this.layerViewImporter.hasLayerViewModule(n))throw new ne("layer:view-not-supported","No layerview implementation was found");let c=yield this.layerViewImporter.importLayerView(n);Ot(t),o="default"in c?new c.default({layer:n,view:i}):new c({layer:n,view:i})}let r=()=>{s=Me(s),o.destroyed||o.destroy(),o.layer=null,o.parent=null,o.view=null,this.done=!0};s=Ts(t,r),Ot(t);try{yield o.when()}catch(c){throw r(),c}if(!this._map?.allLayers?.includes(n))return r(),void this._deferred.reject(new ne("view:no-layerview-for-layer","The layer has been removed from the map",{layer:n}));this.layerView=o,n.emit("layerview-create",{view:i,layerView:o}),i.emit("layerview-create",{layer:n,layerView:o}),this.done=!0,this._deferred.resolve(o)}catch(o){n.emit("layerview-create-error",{view:i,error:o}),i.emit("layerview-create-error",{layer:n,error:o}),this.done=!0,this._deferred.reject(new ne("layerview:create-error","layerview creation failed",{layer:n,error:o}))}})}},wi=class extends P{constructor(e){super(e),this._layerLayerViewInfoMap=new Map,this._recyclingInfoMap=new Map,this._watchUpdatingTracking=new Kn,this.supportsGround=!0,this._preloadLayerViewModules=()=>{let t=this.view.map?.allLayers;if(t)for(let n of t)this.layerViewImporter.hasLayerViewModule(n)&&this.layerViewImporter.importLayerView(n)},this._reschedule=()=>this.destroyed?Promise.reject():(this._workPromise==null&&(this._workPromise=wo(),this._workPromise.promise.catch(()=>{})),this.removeHandles("reschedule"),this.addHandles(Lf(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{if(this.destroyed)return;let t=this.view.map;if(this._map!==t&&(this.clear(),this._map=t),this._workPromise==null)return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");let n=new Set,i=[],o=this.view.ready,s=a=>{if(a!=null){for(let c of a)if(c){n.add(c);let u=this._layerLayerViewInfoMap.get(c);u&&o?u.start():u||this._recyclingInfoMap.has(c)||i.push(c),"layers"in c&&c.layers&&s(c.layers)}}};for(let a of this._rootCollectionNames)s(fn(this,a));for(let[a,c]of this._layerLayerViewInfoMap)if(!n.has(a)){this._layerLayerViewInfoMap.delete(c.layer);let u=c.tryRecycle(i);u?(this.notifyChange("updating"),this._recyclingInfoMap.set(c.layer,c),u.then(()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(c.layer),this._layerLayerViewInfoMap.set(c.layer,c),this._reschedule()}).catch(()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(c.layer),c.destroy(),this._reschedule()})):c.destroy()}for(let[a,c]of this._recyclingInfoMap)n.has(a)||(this.notifyChange("updating"),this._recyclingInfoMap.delete(c.layer),c.destroy());for(let a of i)this._createLayerView(a);this._refreshCollections();let r=[t?.ground?.layers,t?.basemap?.baseLayers,t?.basemap?.referenceLayers,t?.layers].filter(a=>!!a);n.forEach(a=>"layers"in a&&r.push(a.layers)),this.addHandles(r.map(a=>this._watchUpdatingTracking.addOnCollectionChange(()=>a,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.addHandles([Li(()=>this.view?.map?.allLayers,"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),x(()=>{let e=this.view,t=e?.map;return[t?.basemap,t?.ground,t?.layers,e?.ready]},()=>this._reschedule(),qe)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),El(this._recyclingInfoMap),El(this._layerLayerViewInfoMap),this._watchUpdatingTracking.destroy(),this._map=null,this._workPromise!=null&&(this._workPromise.reject(Ss()),this._workPromise=null)}get _layersToLayerViews(){let e=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&e.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(e)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return this._workPromise!=null||this._watchUpdatingTracking.updating||Wn(this._layerLayerViewInfoMap,e=>!e.done)||this._recyclingInfoMap.size>0}get updatingRemaining(){let e=0;for(let t of this._layerLayerViewInfoMap.values())t.done||++e;return e}clear(){this.destroyed||(El(this._layerLayerViewInfoMap),this._refreshCollections())}whenLayerView(e){return I(this,null,function*(){if(yield this._reschedule(),!this._layerLayerViewInfoMap.has(e)){if(this._recyclingInfoMap.has(e))return this._recyclingInfoMap.get(e).promise;throw new ne("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:e})}return this._layerLayerViewInfoMap.get(e).promise})}isCreatingLayerViewsForLayer(e,t){this.commitProperty("updatingRemaining");let n=this._layerLayerViewInfoMap.get(e);if(!n?.done)return!0;let i=n.layerView;return!(!i||!t||i.parent===t)||!!(n.done&&i&&"layers"in e&&e.layers?.length)&&e.layers.some(o=>this.isCreatingLayerViewsForLayer(o,i))}_refreshCollections(){for(let[e,t]of this._layersToLayerViews)this._populateLayerViewsOwners(fn(this,e),fn(this,t),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_populateLayerViewsOwners(e,t,n){if(!e||!t)return void(t&&t.removeAll());let i=0;for(let o of e){let s=this._layerLayerViewInfoMap.get(o);if(!s?.layerView)continue;let r=s.layerView;r.layer=o,r.parent=n,t.at(i)!==r&&t.splice(i,0,r),"layers"in o&&nT(r)&&this._populateLayerViewsOwners(o.layers,r.layerViews,r),i+=1}i<t.length&&t.splice(i,t.length)}_createLayerView(e){e.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(e)&&this.layerViewImporter.importLayerView(e);let t=new Op(e,this.view,this.layerViewImporter);t.promise.then(()=>this._refreshCollections(),n=>{n&&(Ms(n)||n.name==="cancelled:layerview-create")||Z.getLogger(this).error(`Failed to create layerview for layer title:'${e.title??"no title"}', id:'${e.id??"no id"}' of type '${e.type}'.`,{layer:e,error:n}),this._refreshCollections()}),this._layerLayerViewInfoMap.set(e,t),this.view.ready&&t.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};l([d()],wi.prototype,"_workPromise",void 0),l([d({readOnly:!0})],wi.prototype,"_watchUpdatingTracking",void 0),l([d({readOnly:!0})],wi.prototype,"_layersToLayerViews",null),l([d({readOnly:!0})],wi.prototype,"_rootCollectionNames",null),l([d()],wi.prototype,"layerViewImporter",void 0),l([d()],wi.prototype,"supportsGround",void 0),l([d({readOnly:!0})],wi.prototype,"updating",null),l([d({readOnly:!0})],wi.prototype,"updatingRemaining",null),l([d({constructOnly:!0})],wi.prototype,"view",void 0),wi=l([b("esri.views.LayerViewManager")],wi);var Ey=wi;function oT(e){return"createLayerView"in e&&e.createLayerView!=null}var hi=class extends P{constructor(e){super(e),this.factor=1.5,this.offset=me(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};l([d({type:Number})],hi.prototype,"factor",void 0),l([d({nonNullable:!0})],hi.prototype,"offset",void 0),l([d()],hi.prototype,"position",void 0),l([d({type:Number,range:{min:0}})],hi.prototype,"size",void 0),l([d()],hi.prototype,"maskUrl",void 0),l([d()],hi.prototype,"maskEnabled",void 0),l([d()],hi.prototype,"overlayUrl",void 0),l([d()],hi.prototype,"overlayEnabled",void 0),l([d({readOnly:!0})],hi.prototype,"version",null),l([d({type:Boolean})],hi.prototype,"visible",void 0),hi=l([b("esri.views.Magnifier")],hi);var kp=hi;function ma(e){return!!(e!=null&&typeof e=="object"&&"createQuery"in e&&e.createQuery&&"on"in e&&e.on)}var Cn=class extends Ue.EventedAccessor{constructor(e){super(e),this._selectionMap=new Qg,this._sources=new Y,this._trashCan=[],this._layerEditHandles=new Y,this._vizTaskId=0,this.showHighlight=!0}initialize(){this.addHandles([x(()=>[this.view,this.showHighlight],()=>this._refreshVisualization()),Li(()=>this.sources,"change",t=>{let n=this._selectionMap;for(let i of t.removed)n.delete(i);this._refreshListeners(),this._refreshVisualization()},{onListenerAdd:()=>this._refreshListeners()})]);let e=new Y;this.view.when().then(()=>{this.view.map&&(this.view.map.allLayers.flatten(t=>"sublayers"in t&&t.sublayers?t.sublayers:null).forEach(t=>{(ma(t)&&!Dg(t)||Zn(t))&&e.add(t)}),this.sources=e)})}destroy(){this._layerEditHandles.drain(Me)}get selections(){return Array.from(this._selectionMap.entries()).map(e=>{let[t,n]=e;return{layer:t,selection:[...n.selection]}})}get count(){let e=0;for(let t of this._selectionMap.values())e+=t.selection.length;return e}get hasSelection(){return this.count>0}get sources(){return this._sources}set sources(e){pl(e,this._sources)}getSelectedFeatures(i){return I(this,arguments,function*(e,t={},n="layerView"){let{view:o,selections:s}=this,r=(e!==void 0?s.filter(a=>e.includes(a.layer)):s).filter(a=>a.selection.length>0).map(a=>I(this,null,function*(){let{layer:c,selection:u}=a,p=Zn(c)?c.parent:c;if(p==null||!xy(p))return null;if(n==="layer")return Oy(p,u,t);if(Iy(p))return null;let h=yield o.whenLayerView(p).catch(()=>null);return h?Oy(h,u,t):null}));return(yield Promise.all(r)).filter(a=>a!=null)})}updateSelection(e){let t=new Map;for(let[o,s]of this._selectionMap)t.set(o,[...s.selection]);let n=!1,i=e.current.concat(e.added);for(let o of i){let s=o.sourceLayer,r=o.getObjectId();if(this.sources.includes(s)&&(ma(s)||Zn(s))&&r!==null){let a=Hf(t,s,()=>[]);a.includes(r)||(a.push(r),n=!0)}}for(let o of e.removed){let s=o.sourceLayer,r=o.getObjectId();if(this.sources.includes(s)&&(ma(s)||Zn(s))&&r!==null){let a=t.get(s),c=a?.indexOf(r);c!==void 0&&c>=0&&(a?.splice(c,1),n=!0)}}if(n){let{_selectionMap:o,_trashCan:s}=this,r=[];for(let[a,c]of t){let u=o.get(a);u!==void 0&&s.push(u),o.set(a,{selection:c}),r.push(v({layer:a,selection:c},Bd(u!==void 0?u.selection:[],c)))}this._onSelectionChange(r)}}setSelection(e,t){this._setSelection(e,t)}getSelection(e){return this._selectionMap.get(e)?.selection}appendToSelection(e,t){let n=this._selectionMap.get(e),i=n!==void 0?[...n.selection]:[];for(let o of t)i.includes(o)||i.push(o);this._setSelection(e,i)}removeFromSelection(e,t){let n=this._selectionMap.get(e);if(!n)return;let i=[];for(let o of n.selection)t.includes(o)||i.push(o);this._setSelection(e,i)}toggleInSelection(e,t){let n=this._selectionMap.get(e);if(!n||n.selection.length===0)return void this._setSelection(e,t);let i=new Set(n.selection),o=new Set(t),s=Nf(i,o);this._setSelection(e,Array.from(s))}clear(){let e=this._selectionMap.values();this._trashCan.push(...e);let t=[];for(let[n,i]of this._selectionMap.entries())t.push({layer:n,added:[],removed:[...i.selection],selection:[]});this._selectionMap.clear(),this._onSelectionChange(t)}_onSelectionChange(e){this._refreshVisualization(),this.emit("selection-change",{view:this.view,changes:e})}_refreshVisualization(){if(this.view==null||this.sources==null)return;for(this._vizTaskId++;this._trashCan.length>0;)this._trashCan.pop()?.highlightHandle?.remove();let{sources:e,view:t,_selectionMap:n,showHighlight:i}=this,o=this._vizTaskId;for(let s of e){let r=n.get(s),a=Zn(s)?s.parent:s;if(a!=null&&xy(a)){if(Iy(a))continue;t.whenLayerView(a).then(c=>{r?.highlightHandle?.remove(),r!=null&&i&&o===this._vizTaskId&&"highlight"in c&&typeof c.highlight=="function"&&r.selection.length>0&&(r.highlightHandle=c.highlight(r.selection,"selection"))}).catch(()=>{r?.highlightHandle?.remove()})}}}_refreshListeners(){this._layerEditHandles.drain(Me);for(let e of this.sources){let t=Zn(e)?e.parent:e;if(t!=null&&ma(t)){let n=t.on("edits",i=>{this._handleEditChanges(i,e)});this._layerEditHandles.push(n)}}}_handleEditChanges(e,t){if(e.deletedFeatures!==void 0&&e.deletedFeatures.length>0&&this._selectionMap.has(t)){let n=e.deletedFeatures.filter(i=>i.error==null).map(i=>i.objectId).filter(vt);this.removeFromSelection(t,n)}}_setSelection(e,t){if(!this.sources.includes(e))throw new Error(`Cannot set selection on layer ${e.title} because it is not in 'sources'`);let n=this._selectionMap.get(e);if(n===void 0||!rT(n,{selection:t})){n!==void 0&&this._trashCan.push(n),this._selectionMap.set(e,{selection:[...t]});let i=v({layer:e,selection:[...t]},Bd(n!==void 0?n.selection:[],t));this._onSelectionChange([i])}}};l([d({readOnly:!0,nonNullable:!0})],Cn.prototype,"selections",null),l([d({readOnly:!0,nonNullable:!0})],Cn.prototype,"count",null),l([d({constructOnly:!0,nonNullable:!0})],Cn.prototype,"view",void 0),l([d({readOnly:!0,nonNullable:!0})],Cn.prototype,"hasSelection",null),l([d()],Cn.prototype,"showHighlight",void 0),l([d()],Cn.prototype,"sources",null),Cn=l([b("esri.views.SelectionManager")],Cn);var Iy=e=>Zn(e)?e.parent?.isTable===!0:e.isTable,sT=e=>e.layer!==void 0,xy=e=>e?.when!==void 0,rT=(e,t)=>{if(e==null&&t==null)return!0;if(e!=null&&t==null||e==null&&t!=null)return!1;if(e!=null&&t!=null&&e.selection!=null&&t.selection!=null){let n=[...e.selection],i=[...t.selection];if(n.length!==i.length)return!1;n.sort(),i.sort();for(let o=0;o<n.length;o++)if(n[o]!==i[o])return!1}return!0},Oy=(i,o,...s)=>I(void 0,[i,o,...s],function*(e,t,n={}){let r;if(sT(e)){let a=e;r=a===void 0?null:yield a.queryFeatures(new eu(G(v({},n),{objectIds:t}))).then(c=>({data:c,layer:e.layer}))}else{let a=e;r=a===void 0?null:yield a.queryFeatures(new eu(G(v({},n),{objectIds:t}))).then(c=>({data:c,layer:a}))}return r}),ky=Cn;var fa=class extends jg(P){constructor(e){super(e),this.accentColor=new Qi([255,127,0]),this.textColor=new Qi([255,255,255])}};l([d({type:Qi,nonNullable:!0})],fa.prototype,"accentColor",void 0),l([d({type:Qi,nonNullable:!0})],fa.prototype,"textColor",void 0),fa=l([b("esri.views.Theme")],fa);var lc=fa;var Fp=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],Ay={};function Fy(e){return!!Ay[e]}function aT(e){for(let t of e)if(!Fy(t))return!1;return!0}Fp.forEach(e=>{Ay[e]=!0});var cc=class{constructor(t){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=t,this.inputManager=null}connect(t){t&&this.disconnect(),this.inputManager=t,this._handlers.forEach(({handler:n,priority:i},o)=>this.inputManager?.installHandlers(o,[n],i))}disconnect(){this.inputManager&&this._handlers.forEach((t,n)=>this.inputManager?.uninstallHandlers(n)),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(t,n,i,o){let s=Array.isArray(t)?t:t.split(",");if(!aT(s))return s.some(Fy)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let r,a;Array.isArray(n)?a=n:(r=n,a=[]),typeof i=="function"?r=i:o=i,o=o??be.DEFAULT;let c=this._createUniqueGroupName(),u=new Ap(this.view,s,a,r);this._handlers.set(c,{handler:u,priority:o});for(let p of s){let h=this._handlerCounts.get(p)||0;this._handlerCounts.set(p,h+1)}return this.inputManager&&this.inputManager.installHandlers(c,[u],o),$t(()=>this._removeHandler(c,s))}hasHandler(t){return!!this._handlerCounts.get(t)}_removeHandler(t,n){if(this._handlers.has(t)){this._handlers.delete(t);for(let i of n){let o=this._handlerCounts.get(i);o===void 0||(o===1?this._handlerCounts.delete(i):this._handlerCounts.set(i,o-1))}}this.inputManager&&this.inputManager.uninstallHandlers(t)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}},Ap=class extends le{constructor(t,n,i,o){super(!0),this._latestDragStart=void 0,this.view=t;for(let s of n)switch(s){case"click":this.registerIncoming("click",i,r=>o(dT(t,r)));break;case"double-click":this.registerIncoming("double-click",i,r=>o(uT(t,r)));break;case"immediate-click":this.registerIncoming("immediate-click",i,r=>o(pT(t,r)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",i,r=>o(hT(t,r)));break;case"hold":this.registerIncoming("hold",i,r=>o(mT(t,r)));break;case"drag":this.registerIncoming("drag",i,r=>{let a=this._wrapDrag(r);a&&o(a)});break;case"key-down":this.registerIncoming("key-down",i,r=>o(fT(r)));break;case"key-up":this.registerIncoming("key-up",i,r=>o(gT(r)));break;case"pointer-down":this.registerIncoming("pointer-down",i,r=>o(ga(r,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",i,r=>o(ga(r,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",i,r=>o(ga(r,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",i,r=>o(_T(r)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",i,r=>o(yT(r)));break;case"pointer-enter":this.registerIncoming("pointer-enter",i,r=>o(ga(r,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",i,r=>o(ga(r,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",i,r=>{o(vT(r))});break;case"focus":this.registerIncoming("focus",i,r=>{o(lT(r))});break;case"blur":this.registerIncoming("blur",i,r=>{o(cT(r))})}}_wrapDrag(t){let n=t.data,{x:i,y:o}=n.center,{action:s,pointerType:r,button:a}=n;if(s==="start"&&(this._latestDragStart=n),!this._latestDragStart)return;let c=n.pointer.native,u=n.buttons,{cancelable:p,timestamp:h}=t,m={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return s==="end"&&(this._latestDragStart=void 0),{type:"drag",action:s,x:i,y:o,origin:m,pointerType:r,button:a,buttons:u,radius:n.radius,angle:yg(n.angle),native:c,timestamp:h,cancelable:p,stopPropagation:()=>t.stopPropagation(),async:f=>t.async(f),preventDefault:()=>t.preventDefault()}}};function lT(e){return{type:"focus",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}function cT(e){return{type:"blur",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}function dT(e,t){let{pointerType:n,button:i,buttons:o,x:s,y:r,native:a,eventId:c}=t.data,{cancelable:u,timestamp:p}=t;return{type:"click",pointerType:n,button:i,buttons:o,x:s,y:r,native:a,timestamp:p,screenPoint:me(s,r),mapPoint:_a(e,s,r),eventId:c,cancelable:u,stopPropagation:()=>t.stopPropagation(),async:h=>t.async(h),preventDefault:()=>t.preventDefault()}}function uT(e,t){let{pointerType:n,button:i,buttons:o,x:s,y:r,native:a,eventId:c}=t.data,{cancelable:u,timestamp:p}=t;return{type:"double-click",pointerType:n,button:i,buttons:o,x:s,y:r,native:a,timestamp:p,mapPoint:_a(e,s,r),eventId:c,cancelable:u,stopPropagation:()=>t.stopPropagation(),async:h=>t.async(h),preventDefault:()=>t.preventDefault()}}function pT(e,t){let{pointerType:n,button:i,buttons:o,x:s,y:r,native:a,eventId:c}=t.data,u=a.pointerId,{cancelable:p,timestamp:h}=t;return{type:"immediate-click",pointerId:u,pointerType:n,button:i,buttons:o,x:s,y:r,native:a,timestamp:h,mapPoint:_a(e,s,r),eventId:c,cancelable:p,stopPropagation:()=>t.stopPropagation(),async:m=>t.async(m),preventDefault:()=>t.preventDefault()}}function hT(e,t){let{pointerType:n,button:i,buttons:o,x:s,y:r,native:a,eventId:c}=t.data,u=a.pointerId,{cancelable:p,timestamp:h}=t;return{type:"immediate-double-click",pointerId:u,pointerType:n,button:i,buttons:o,x:s,y:r,native:a,timestamp:h,mapPoint:_a(e,s,r),eventId:c,cancelable:p,stopPropagation:()=>t.stopPropagation(),async:m=>t.async(m),preventDefault:()=>t.preventDefault()}}function mT(e,t){let{pointerType:n,button:i,buttons:o,x:s,y:r,native:a}=t.data,{cancelable:c,timestamp:u}=t;return{type:"hold",pointerType:n,button:i,buttons:o,x:s,y:r,native:a,timestamp:u,mapPoint:_a(e,s,r),cancelable:c,stopPropagation:()=>t.stopPropagation(),async:p=>t.async(p),preventDefault:()=>t.preventDefault()}}function _a(e,t,n){return e.toMap(me(t,n),{exclude:[]})}function fT(e){let{key:t,repeat:n,native:i}=e.data,{cancelable:o,timestamp:s}=e;return{type:"key-down",key:t,repeat:n,native:i,timestamp:s,cancelable:o,stopPropagation:()=>e.stopPropagation(),async:r=>e.async(r),preventDefault:()=>e.preventDefault()}}function gT(e){let{key:t,native:n}=e.data,{cancelable:i,timestamp:o}=e;return{type:"key-up",key:t,native:n,timestamp:o,cancelable:i,stopPropagation:()=>e.stopPropagation(),async:s=>e.async(s),preventDefault:()=>e.preventDefault()}}function ga(e,t){let{x:n,y:i,button:o,buttons:s,native:r,eventId:a}=e.data,c=r.pointerId,u=r.pointerType,{cancelable:p,timestamp:h}=e;return{type:t,x:n,y:i,pointerId:c,pointerType:u,button:o,buttons:s,native:r,timestamp:h,eventId:a,cancelable:p,stopPropagation:()=>e.stopPropagation(),async:m=>e.async(m),preventDefault:()=>e.preventDefault()}}function _T(e){let{x:t,y:n,buttons:i,native:o,eventId:s}=e.data.currentEvent,{button:r}=e.data.startEvent,a=e.data.startEvent.native.pointerId,c=e.data.startEvent.native.pointerType,u=e.data.action,p={x:e.data.startEvent.x,y:e.data.startEvent.y},{cancelable:h,timestamp:m}=e;return{type:"pointer-drag",x:t,y:n,pointerId:a,pointerType:c,button:r,buttons:i,action:u,origin:p,native:o,timestamp:m,eventId:s,cancelable:h,stopPropagation:()=>e.stopPropagation(),async:f=>e.async(f),preventDefault:()=>e.preventDefault()}}function yT(e){let{cancelable:t,data:n,timestamp:i}=e,{x:o,y:s,deltaY:r,native:a}=n;return{type:"mouse-wheel",x:o,y:s,deltaY:r,native:a,timestamp:i,cancelable:t,stopPropagation:()=>e.stopPropagation(),async:c=>e.async(c),preventDefault:()=>e.preventDefault()}}function vT(e){let{action:t,state:n,device:i}=e.data,{cancelable:o,timestamp:s}=e,{buttons:r,axes:a}=n;return{type:"gamepad",device:i,timestamp:s,action:t,buttons:r,axes:a,cancelable:o,stopPropagation:()=>e.stopPropagation(),async:c=>e.async(c),preventDefault:()=>e.preventDefault()}}function Py(e){return[e.on("before-add",t=>{let n=t.item;if(n==null||e.includes(n))return Z.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void t.preventDefault();n.onAdd()}),e.on("after-remove",t=>{let n=t.item;n.active&&(n.view.activeTool=null),n.destroy()})]}function ya(e){return e.visible&&e.getEditableFlag!=null&&e.getEditableFlag(Ur.USER)&&e.getEditableFlag(Ur.MANAGER)}var dc=class{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._revertToNullActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}hasFocusedManipulators(){return this._grabbedManipulators.size>0||this._draggedManipulators.size>0}handleInputEvent(t,n){let i=()=>t.stopPropagation();switch(t.type){case"pointer-move":Ly(t.pointerType)&&this._pointerLocations.set(t.pointerId,{x:t.x,y:t.y,pointerType:t.pointerType});break;case"drag":this._grabbedManipulators.size>0&&(this._stopDrag=!0),this._stopDrag&&(i(),t.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!Ny(t))break;let o=di(t),s=Ws(o,t.pointerType,n.forEachTool);if(s==null)break;let r=s.manipulator,a=s.tool;r==null||a==null||!r.interactive||r.grabbable&&r.grabbableForEvent(t)||!r.grabbing||r.dragging||this._releaseManipulatorBeforeDragging(r,t,n),r!=null&&a!=null&&r.interactive&&r.grabbable&&r.grabbableForEvent(t)&&!r.grabbing&&(this._grabbedManipulators.set(t.pointerId,{manipulator:r,tool:a,start:o,pointerType:t.pointerType}),this._grabbedManipulators.size===1&&n.activeTool==null&&(this._revertToNullActiveTool=!0,n.setActiveTool(s.tool)),r.grabbing=!0,r.events.emit("grab-changed",{action:"start",pointerType:t.pointerType,screenPoint:o}),i());break}case"pointer-up":this._draggedManipulators.has(t.pointerId)||this._handlePointerEnd(t,n);break;case"pointer-drag":{if(!Ny(t))break;let o=this._grabbedManipulators.get(t.pointerId),s=o?.manipulator,r=o?.tool;if(s==null||r==null)break;let a=di(t);a.x=Qd(a.x,0,n.view.width),a.y=Qd(a.y,0,n.view.height);let c=o.start,u=this._draggedManipulators.get(t.pointerId);switch(t.action){case"start":case"update":t.action!=="update"&&this._grabbedManipulators.size!==1||(s.dragging=!0,u?s.events.emit("drag",{action:"update",start:c,screenPoint:a}):s.events.emit("drag",{action:"start",start:c,screenPoint:a,pointerType:t.pointerType}),this._draggedManipulators.set(t.pointerId,{tool:r,manipulator:s,start:c}));break;case"end":s.dragging=!1,u&&s.events.emit("drag",{action:"end",start:c,screenPoint:a}),this._draggedManipulators.delete(t.pointerId),this._handlePointerEnd(t,n)}i();break}case"immediate-click":{let o=di(t),s=Ws(o,t.pointerType,n.forEachTool);if(bT(t)||n.forEachTool(u=>{if((s==null||s.tool!==u||u.automaticManipulatorSelection)&&u.manipulators){let p=!1;u.manipulators.forEach(({manipulator:h})=>{h.selected&&(h.selected=!1,p=!0)}),p&&u.onManipulatorSelectionChanged&&u.onManipulatorSelectionChanged()}}),s==null)break;let{manipulator:r,tool:a}=s;if(!r.interactive)break;r.selectable&&a.automaticManipulatorSelection&&(r.selected=!r.selected,a.onManipulatorSelectionChanged&&a.onManipulatorSelectionChanged());let c=t.native.shiftKey;r.events.emit("immediate-click",{screenPoint:o,button:t.button,pointerType:t.pointerType,shiftKey:c,stopPropagation:i}),Pp(r,i);break}case"click":{let o=di(t),s=Ws(o,t.pointerType,n.forEachTool),r=s?.manipulator;if(r==null||!r.interactive)break;let a=t.native.shiftKey;r.events.emit(t.type,{screenPoint:o,button:t.button,pointerType:t.pointerType,shiftKey:a}),i();break}case"double-click":{let o=di(t),s=Ws(o,t.pointerType,n.forEachTool),r=s!=null?s.manipulator:null;if(r==null||!r.interactive)break;let a=t.native.shiftKey;r.events.emit("double-click",{screenPoint:o,button:t.button,pointerType:t.pointerType,shiftKey:a,stopPropagation:i}),Pp(r,i);break}case"immediate-double-click":{let o=di(t),s=Ws(o,t.pointerType,n.forEachTool),r=s!=null?s.manipulator:null;if(r==null||!r.interactive)break;let a=t.native.shiftKey;r.events.emit("immediate-double-click",{screenPoint:o,button:t.button,pointerType:t.pointerType,shiftKey:a,stopPropagation:i}),Pp(r,i);break}}this._onFocusChange(n.forEachTool)}_releaseManipulatorBeforeDragging(t,n,i){t.grabbing=!1,t.events.emit("grab-changed",{action:"end",pointerType:n.pointerType,screenPoint:di(n)}),this._grabbedManipulators.forEach(({manipulator:o},s)=>{o===t&&this._grabbedManipulators.delete(s)}),this._afterManipulatorRelease(i.setActiveTool)}_handlePointerEnd(t,n){let i=this._grabbedManipulators.get(t.pointerId)?.manipulator;i!=null&&i.grabbing&&(i.grabbing=!1,i.events.emit("grab-changed",{action:"end",pointerType:t.pointerType,screenPoint:di(t)}),this._grabbedManipulators.delete(t.pointerId),this._afterManipulatorRelease(n.setActiveTool))}_onFocusChange(t){this._updateCursor(),this._updateFocusedManipulatorTools(t)}_updateCursor(){this._grabbedManipulators.size>0?this._cursor=Ry(this._grabbedManipulators)||"grabbing":this._hoveredManipulators.size>0?this._cursor=Ry(this._hoveredManipulators)||"pointer":this._cursor=null}_updateFocusedManipulatorTools(t){let n=new Set,i=new Set;this._grabbedManipulators.forEach(({tool:o})=>{n.add(o)}),this._hoveredManipulators.forEach(({tool:o})=>{i.add(o)}),t(o=>{o.hasGrabbedManipulators=n.has(o),o.hasHoveredManipulators=i.has(o);let s=this._grabbedManipulators.values(),r=Ef(s,({tool:a})=>a===o);o.firstGrabbedManipulator=r!=null?r.manipulator:null})}clearPointers(t,{forEachTool:n,setActiveTool:i},o=!0,s){let r=(a,c)=>a===t&&(s==null||s===c);this._grabbedManipulators.forEach(({tool:a,manipulator:c,pointerType:u},p)=>{r(a,c)&&(this._grabbedManipulators.delete(p),c.grabbing=!1,c.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:u}))}),this._draggedManipulators.forEach(({tool:a,manipulator:c},u)=>{r(a,c)&&(this._draggedManipulators.delete(u),c.dragging=!1,c.events.emit("drag",{action:"cancel"}))}),o&&this._hoveredManipulators.forEach(({tool:a,manipulator:c},u)=>{r(a,c)&&(this._hoveredManipulators.delete(u),c.hovering=!1)}),this._afterManipulatorRelease(i),this._onFocusChange(n)}updateHoveredStateFromKnownPointers(t){this._pointerLocations.forEach((n,i)=>{this._updateHoveredStateForPointerAtScreenPosition(me(n.x,n.y),i,n.pointerType,t)})}handleHoverEvent(t,n){t.type!=="pointer-up"&&t.type!=="immediate-click"&&t.type!=="pointer-move"||!Ly(t.pointerType)||this._updateHoveredStateForPointerAtScreenPosition(di(t),t.pointerId,t.pointerType,n)}_updateHoveredStateForPointerAtScreenPosition(t,n,i,o){let s=Ws(t,i,o),r=this._hoveredManipulators.get(n)?.manipulator;s==null||s.manipulator.interactive||(s=null),s!=null&&r===s.manipulator||(r!=null&&(r.hovering=!1),s!=null?(s.manipulator.hovering=!0,this._hoveredManipulators.set(n,s)):this._hoveredManipulators.delete(n),this._onFocusChange(o))}_afterManipulatorRelease(t){this._grabbedManipulators.size===0&&this._revertToNullActiveTool&&(t(null),this._revertToNullActiveTool=!1)}};function Ry(e){let t=null;return Wn(e,({manipulator:n})=>!(n==null||!n.interactive)&&(n.grabbing&&n.grabCursor?(t=n.grabCursor,!0):!!n.cursor&&(t=n.cursor,!0))),t}function Ws(e,t,n){let i=null;return n(o=>{if(o.manipulators==null||!ya(o))return!1;let s=o.manipulators.intersect(e,t);return s!=null&&(i={tool:o,manipulator:s},!0)}),i}function Ly(e){return e==="mouse"}function Ny(e){return e.pointerType!=="mouse"||e.button===0}function bT(e){return!!e.native.shiftKey}function Pp(e,t){e?.consumesClicks&&t()}var Vy="attached",Rp="tools",wT=1e3,Vi=class extends P{constructor(e){super(e),this._updatingHandles=new Kn,this._clock=Yi,this._manipulatorState=new dc,this.tools=new Y,this.cursor=null,this._interacting=!1,this._interactingTimeout=wT,this._interactingTimeoutHandle=null,this._forEachTool=t=>{for(let n of this.tools.items)if(t(n))return}}initialize(){this.addHandles([this.view.on(Fp,e=>{this._handleInputEvent(e)},be.TOOL),...Py(this.tools),this.tools.on("before-add",({item:e})=>{this._updateToolEditableFlag(e)}),this.tools.on("before-remove",({item:e})=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs),this._updateCursor()}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.activeTool=null,this.tools.drain(e=>e.destroy()),this._clearInteractingTimeout(),this._interacting=!1,this._updatingHandles.destroy()}get _manipulatorStateEventArgs(){return{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:e=>{this.activeTool=e},view:this.view}}set activeTool(e){if(e!=null&&!this.view.ready)return void Z.getLogger(this).error("Cannot set active tool while view is not ready.");if(e===this.activeTool)return;let t=this.activeTool;this._set("activeTool",e),t?.deactivate(),e?.activate(),this._removeIncompleteTools(e);for(let n of this.tools){this._updateToolEditableFlag(n);let i=ya(n);this.activeTool!=null&&i||this._manipulatorState.clearPointers(n,this._manipulatorStateEventArgs,!i)}this._updateCursor()}get updating(){return this._updatingHandles.updating||this.tools.some(e=>e.updating)}get interacting(){return this._interacting}_clearInteractingTimeout(){this._interactingTimeoutHandle=Me(this._interactingTimeoutHandle)}_startInteractingTimeout(){this._clearInteractingTimeout(),this._interactingTimeoutHandle=this._clock.setTimeout(()=>this._interacting=!1,this._interactingTimeout)}attach(){this.view.type==="3d"?this.addHandles([x(()=>{let{state:e}=this.view;return"camera"in e&&e.camera},()=>this._forEachManipulator(e=>e.onViewChange())),this.view.elevationProvider?.on("elevation-change",e=>this._forEachManipulator(t=>t.onElevationChange(e)))],Vy):this.addHandles(x(()=>this.view.extent,()=>this._forEachManipulator(e=>e.onViewChange())))}detach(){this.activeTool=null,this.tools.removeAll(),this.removeHandles(Vy),this._clearInteractingTimeout(),this._interacting=!1}_forEachManipulator(e){this._forEachTool(t=>{t.manipulators&&t.manipulators.forEach(({manipulator:n})=>e(n,t))})}_handleInputEvent(e){let t=!1,n=G(v({},e),{stopPropagation:()=>{t=!0,e.stopPropagation()}});this.activeTool!=null?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(n):this._forEachTool(i=>{!t&&i.visible&&i.handleInputEvent(n)}),!t&&e.type==="key-down"&&e.key==="Escape"&&this.activeTool&&(e.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(n,this._manipulatorStateEventArgs),t||this.activeTool==null||this.activeTool.handleInputEventAfter(n),this._manipulatorState.handleHoverEvent(n,this._forEachTool),this._updateCursor(),e.type==="pointer-move"&&(this._manipulatorState.hasFocusedManipulators()||this.activeTool)&&(this._interacting=!0,this._startInteractingTimeout())}_refreshToolWatchers(){this.removeHandles(Rp),this._forEachTool(e=>{if(e instanceof P){let t=x(()=>[e.cursor,e.visible,e.editable],()=>{ya(e)||this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs),this._updateCursor()});this.addHandles(t,Rp)}e.manipulators&&this.addHandles([e.manipulators.on("after-remove",t=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs,!0,t.item.manipulator)}),e.manipulators.on("change",()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()})],Rp)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateToolEditableFlag(e){e.setEditableFlag?.(Ur.MANAGER,this.activeTool==null||e===this.activeTool)}_updateCursor(){let e=this._manipulatorState.cursor;e==null&&this._forEachTool(t=>!(t.cursor==null||!t.visible)&&(e=t.cursor,!0)),this._get("cursor")!==e&&this._set("cursor",e)}_removeIncompleteTools(e){this.tools.filter(t=>(e==null||t!==e)&&!t.created&&t.removeIncompleteOnCancel).forEach(t=>{this.tools.remove(t)})}get test(){}};l([d({constructOnly:!0,nonNullable:!0})],Vi.prototype,"view",void 0),l([d({value:null})],Vi.prototype,"activeTool",null),l([d({readOnly:!0,type:Y})],Vi.prototype,"tools",void 0),l([d({readOnly:!0})],Vi.prototype,"cursor",void 0),l([d({readOnly:!0})],Vi.prototype,"updating",null),l([d()],Vi.prototype,"_interacting",void 0),l([d({readOnly:!0})],Vi.prototype,"interacting",null),Vi=l([b("esri.views.ToolViewManager")],Vi);var qs=class extends P{constructor(e){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",e.mapping==="standard"?this._detectedDeviceType="standard":CT.test(e.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=e.index}get native(){let e=navigator.getGamepads?navigator.getGamepads():[];return this.nativeIndex!=null&&this.nativeIndex<e.length?e[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return ST[this.deviceType]}};l([d({nonNullable:!0,readOnly:!0})],qs.prototype,"nativeIndex",void 0),l([d({type:String,readOnly:!0})],qs.prototype,"deviceType",null),l([d({type:Number,readOnly:!0})],qs.prototype,"axisThreshold",null),qs=l([b("esri.views.input.gamepad.GamepadInputDevice")],qs);var Zs=qs,CT=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),ST={standard:.15,spacemouse:.025,unknown:0};var va=class extends P{constructor(...e){super(...e),this.devices=new Y,this.enabledFocusMode="document"}};l([d({type:Y.ofType(Zs),readOnly:!0})],va.prototype,"devices",void 0),l([d({type:["document","view","none"]})],va.prototype,"enabledFocusMode",void 0),va=l([b("esri.views.input.gamepad.GamepadSettings")],va);var Hy=va;var uc=class extends P{constructor(){super(...arguments),this.gamepad=new Hy}};l([d({readOnly:!0})],uc.prototype,"gamepad",void 0),uc=l([b("esri.views.input.Input")],uc);var By=uc;var to=class extends P{constructor(e){super(e),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};l([d({type:Boolean,nonNullable:!0})],to.prototype,"enabled",void 0),l([d({type:Zs})],to.prototype,"device",void 0),l([d({type:["pan","zoom"],nonNullable:!0})],to.prototype,"mode",void 0),l([d({type:["forward-down","forward-up"],nonNullable:!0})],to.prototype,"tiltDirection",void 0),l([d({type:Number,nonNullable:!0})],to.prototype,"velocityFactor",void 0),to=l([b("esri.views.navigation.gamepad.GamepadSettings")],to);var Lp=to;var Oo=class extends P{constructor(e){super(e),this.browserTouchPanEnabled=!0,this.gamepad=new Lp,this.momentumEnabled=!0,this.mouseWheelZoomEnabled=!0}get effectiveMomentumEnabled(){return this.momentumEnabled&&!Ol()}};l([d({type:Boolean})],Oo.prototype,"browserTouchPanEnabled",void 0),l([d({type:Lp,nonNullable:!0})],Oo.prototype,"gamepad",void 0),l([d({type:Boolean})],Oo.prototype,"momentumEnabled",void 0),l([d({type:Boolean})],Oo.prototype,"mouseWheelZoomEnabled",void 0),Oo=l([b("esri.views.navigation.Navigation")],Oo);var Np=Oo;var Hp,Vp=null;function TT(e){return I(this,null,function*(){Vp||(Vp=import("./chunk-KLZMRINO.js").then(t=>Hp=t)),yield Vp,Ot(e)})}function Bp(e,t,n,i){return I(this,null,function*(){if(!e)return null;let o=e.spatialReference;return Sl()||Ml(o,t)?Yn(e,t):Hp?Hp.projectGeometry(e,t,n,i):(yield Promise.race([TT(i),Tl(i)]),Bp(e,t,n,i))})}var ge=class extends P{constructor(e){super(e),this.required={tileInfo:!1,heightModelInfo:!1,extent:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=mn(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return this.userSpatialReference??this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return this.userSpatialReference==null||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){let e=this.map?.(),t=[];return this.priorityCollection!=null&&t.push(this.priorityCollection),t.push({parent:e?.basemap,layers:e?.basemap?.baseLayers},{layers:e?.layers},{parent:e?.ground,layers:e?.ground?.layers},{parent:e?.basemap,layers:e?.basemap?.referenceLayers}),t}get _allLayers(){return this._collectLayers(this.mapCollections)}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};let{layers:e,updating:t}=this._allLayers,n=null;for(let o of e){let s=this._getSupportedSpatialReferences(o);if(s.length>0){let r=this._narrowDownSpatialReferenceCandidates(n,s);r!=null&&(n=r)}if(n!=null&&n.length===1)break}if(t&&(n==null||n.length!==1))return{updating:!0};let i=this._pickSpatialReferenceCandidate(n);return{spatialReference:i?.spatialReference??null,viewingMode:i?.viewingMode??null,updating:!1}}get _tileInfoTask(){if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};let{layers:e,updating:t}=this._collectLayers([{parent:this.map?.()?.basemap,layers:this.map?.()?.basemap?.baseLayers},{layers:this.map?.()?.layers}]);if(e&&e.length>0&&"tileInfo"in e[0]){let n=e[0].tileInfo;return{tileInfo:n?.spatialReference.equals(this.spatialReference)?n:null,updating:!1}}return{updating:t}}get _heightModelInfoTask(){if(!this.required.heightModelInfo||this.suspended&&this._get("_heightModelInfoTask")?.heightModelInfo)return this._get("_heightModelInfoTask")??{updating:!1};let{layers:e,updating:t}=this._allLayers;for(let n of e)if(F_(n)){let i=A_(n);if(i)return{heightModelInfo:i,vcsWkid:n.spatialReference?.vcsWkid,latestVcsWkid:n.spatialReference?.latestVcsWkid,updating:!1}}return{updating:t}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};let e=this._allLayers,t=e.updating,n=[];for(let i of e.layers){let o="fullExtents"in i&&i.fullExtents||(i.fullExtent!=null?[i.fullExtent]:[]),s=this.requiresExtentInSpatialReference?null:o[0],r=o.find(a=>a.spatialReference.equals(this.spatialReference))??s;if(r)return{candidates:[{extent:r,layer:i}],updating:!1};if(this._getSupportedSpatialReferences(i).length>0)for(let a of o)n.push({extent:a,layer:i})}return{candidates:n,updating:t}}get _extentTask(){let{candidates:e,updating:t}=this._extentCandidatesTask;if(t)return{updating:t};if(e==null||e.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};let n=this._pickExtentCandidate(e),i=this.spatialReference;return n.extent.equals(this._projectExtentTask.input)&&i.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:this._projectExtentTask.task!=null&&!this._projectExtentTask.task.finished}:(this._projectExtentTask.task!=null&&(this._projectExtentTask.task=mn(this._projectExtentTask.task)),this._projectExtentTask={input:n.extent.clone(),output:null,spatialReference:i.clone(),task:qn(o=>I(this,null,function*(){try{let s=yield Bp(n.extent,i,"portalItem"in n.layer?n.layer.portalItem:void 0,o);this._projectExtentTask=G(v({},this._projectExtentTask),{task:null,output:s})}catch{if(xf(o))return;this._projectExtentTask=G(v({},this._projectExtentTask),{task:null})}}))},{updating:!0})}_narrowDownSpatialReferenceCandidates(e,t){if(e==null)return t;let n=new Array;for(let i of e)for(let o of t){if(!i.spatialReference.equals(o.spatialReference))continue;let s=MT(i.viewingMode,o.viewingMode);if(s!==!1){n.push({spatialReference:i.spatialReference,viewingMode:s});break}}return n.length>0?n:null}_pickSpatialReferenceCandidate(e){let t=this.defaultSpatialReference;return e==null||e.length<1?t?{spatialReference:t,viewingMode:null}:null:(t!=null&&e.length>1&&e.some(({spatialReference:n})=>n.equals(t))&&(e=e.filter(({spatialReference:n})=>n.equals(t))),e.length>1&&e.some(({viewingMode:n})=>n!==au.Local)&&(e=e.filter(({viewingMode:n})=>n!==au.Local)),e[0])}_getSupportedSpatialReferences(e){let t="supportedSpatialReferences"in e&&e.supportedSpatialReferences||(e.spatialReference?[e.spatialReference]:[]);if(t.length===0)return[];let n=[];for(let i of t){let o=this.getSpatialReferenceSupport(i,e);if(o!=null){let s=o.constraints??[{spatialReference:i,viewingMode:null}];for(let{spatialReference:r,viewingMode:a}of s)this.requiresExtentInSpatialReference&&this.userSpatialReference!=null&&!r.equals(this.userSpatialReference)||n.push({spatialReference:r,viewingMode:a})}}return n}_pickExtentCandidate(e){let t=this.spatialReference;return e.find(({extent:n})=>t.equals(n.spatialReference))||e[0]}_collectLayers(e){if(this._loadMaybe(this.map?.())!=="loaded")return{layers:[],updating:!0};let t=new Gp;for(let n of e)if(this._collectCollection(n,t),t.preloading===this.sourcePreloadCount)break;return{layers:t.layers,updating:t.updating}}_collectCollection(e,t){if(e.layers){switch(this._loadMaybe(e.parent)){case"loading":return t.updating=!0,void++t.preloading;case"failed":return}for(let n of e.layers){switch(this._loadMaybe(n)){case"failed":continue;case"loading":t.updating=!0,++t.preloading;break;case"loaded":t.updating||t.layers.push(n),"layers"in n&&this._collectCollection({layers:n.layers},t)}if(t.preloading===this.sourcePreloadCount)break}}}_loadMaybe(e){return e&&"loadStatus"in e&&e.loadStatus!=null?e.loadStatus==="not-loaded"?(e.load().catch(t=>{Ms(t)||console.log(t)}),"loading"):e.loadStatus:"loaded"}};l([d()],ge.prototype,"required",void 0),l([d({constructOnly:!0})],ge.prototype,"map",void 0),l([d({constructOnly:!0})],ge.prototype,"getSpatialReferenceSupport",void 0),l([d()],ge.prototype,"defaultSpatialReference",void 0),l([d()],ge.prototype,"userSpatialReference",void 0),l([d()],ge.prototype,"sourcePreloadCount",void 0),l([d()],ge.prototype,"priorityCollection",void 0),l([d()],ge.prototype,"requiresExtentInSpatialReference",void 0),l([d()],ge.prototype,"suspended",void 0),l([d({readOnly:!0})],ge.prototype,"ready",null),l([d({readOnly:!0})],ge.prototype,"heightModelInfoReady",null),l([d({readOnly:!0})],ge.prototype,"spatialReference",null),l([d({readOnly:!0})],ge.prototype,"extent",null),l([d({readOnly:!0})],ge.prototype,"heightModelInfo",null),l([d({readOnly:!0})],ge.prototype,"vcsWkid",null),l([d({readOnly:!0})],ge.prototype,"latestVcsWkid",null),l([d({readOnly:!0})],ge.prototype,"viewingMode",null),l([d({readOnly:!0})],ge.prototype,"tileInfo",null),l([d({readOnly:!0})],ge.prototype,"mapCollections",null),l([d({readOnly:!0})],ge.prototype,"_allLayers",null),l([d({readOnly:!0})],ge.prototype,"_spatialReferenceTask",null),l([d({readOnly:!0})],ge.prototype,"_tileInfoTask",null),l([d({readOnly:!0})],ge.prototype,"_heightModelInfoTask",null),l([d({readOnly:!0})],ge.prototype,"_extentCandidatesTask",null),l([d()],ge.prototype,"_extentTask",null),l([d()],ge.prototype,"_projectExtentTask",void 0),ge=l([b("esri.views.support.DefaultsFromMap")],ge);var Gp=class{constructor(){this.layers=new Array,this.preloading=-1,this.updating=!1}};function MT(e,t){return e!=null?t!=null?e===t&&e:e:t}var ba,U=ba=class extends Ue.EventedMixin(Zf(P)){constructor(e){super(e),this._userSpatialReference=null,this._cursor=null,this.handles=new ll,this.updatingHandles=new Kn,this.allLayerViews=new Mo({getCollections:()=>[this.basemapView?.baseLayerViews,this.groundView?.layerViews,this.layerViews,this.basemapView?.referenceLayerViews],getChildrenFunction:DT}),this.groundView=null,this.basemapView=null,this.fatalError=null,this.graphics=new du,this.analyses=new ha,this.typeSpecificPreconditionsReady=!0,this.layerViews=new Y,this.magnifier=new kp,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this.spatialReferenceWarningDelay=1e3,this.supportsGround=!0,this.timeExtent=null,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new By,this.navigation=new Np,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new cc(this),this.persistableViewModels=new Y,this._isValid=!1,this._readyCycleForced=!1,this._lockedSpatialReference=null,this._userTimeZone=null,this._lockedTimeZone=null,this.theme=null,this.handles.add(x(()=>this.preconditionsReady,t=>{let n=this.ready;if(t?(this._lockedSpatialReference=this.spatialReference,this._lockedTimeZone=this.timeZone,ba.views.add(this)):(this._lockedSpatialReference=null,ba.views.remove(this)),this.notifyChange("spatialReference"),!t&&n)this.toolViewManager?.detach(),this.analysisViewManager!=null&&this.analysisViewManager.detach(),this.layerViewManager?.clear(),this._teardown();else if(t&&!n){try{this._startup()}catch(i){return void queueMicrotask(()=>{this.fatalError=new ne("startup-error",null,i)})}this.analysisViewManager!=null&&this.analysisViewManager.attach(),this.toolViewManager.attach()}},_n))}initialize(){this.addResolvingPromise(Promise.all([this.loadAsyncDependencies(),this.validate()]).then(()=>(this._isValid=!0,gn(()=>this.ready)))),this.basemapView=new wn({view:this}),this.layerViewManager=new Ey({view:this,layerViewImporter:{importLayerView:e=>this.importLayerView(e),hasLayerViewModule:e=>this.hasLayerViewModule(e)},supportsGround:this.supportsGround}),this.toolViewManager=new Vi({view:this}),this._setupSpatialReferenceLogger(),this.selectionManager=new ky({view:this}),this.addHandles([x(()=>this.initialExtentRequired,e=>this.defaultsFromMap.required=G(v({},this.defaultsFromMap.required),{extent:e}),qe),x(()=>this.ready,e=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=e,this.defaultsFromMap.userSpatialReference=e?this.spatialReference:this._userSpatialReference)},_n),x(()=>this._userSpatialReference,e=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=e)},qe)])}_setupSpatialReferenceLogger(){let e=null;this.addHandles([x(()=>this.defaultsFromMap?.ready,t=>{let n=this.map?.allLayers.length>0;if(t&&!this.spatialReference&&n){if(e!=null)return;let i=$t(()=>e=mn(e));e=qn(o=>I(this,null,function*(){try{yield kf(this.spatialReferenceWarningDelay,null,o)}catch{return}finally{e=null}Z.getLogger(this).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")})),this.addHandles(i,"spatial-reference-logger-task")}else this.removeHandles("spatial-reference-logger-task")},{sync:!0})])}destroy(){this.destroyed||(ba.views.remove(this),this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=se(this.graphics),this.analyses=se(this.analyses),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),se(this.analysisViewManager),this.toolViewManager=se(this.toolViewManager),this.layerViewManager=se(this.layerViewManager),this.selectionManager=se(this.selectionManager),this.basemapView=se(this.basemapView),this.groundView?.destroy(),this.layerViews?.forEach(e=>e.destroy()),this.layerViews.length=0,this.invalidate(),this._emitter.clear(),this.handles.destroy(),this.map=se(this.map),this.updatingHandles.destroy())}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return Z.getLogger(this).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){return this.toolViewManager?.activeTool}set activeTool(e){this.toolViewManager&&(this.toolViewManager.activeTool=e)}get animation(){return this._get("animation")}set animation(e){this._set("animation",e)}get center(){return null}get _defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new ge(v({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:(e,t)=>this.getSpatialReferenceSupport(e,t)},this._defaultsFromMapSettings))}get extent(){return this._get("extent")}set extent(e){this._set("extent",e)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){return!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||Br.isLoadable(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._lockedSpatialReference&&!this.defaultsFromMap?.ready||!this.typeSpecificPreconditionsReady)}get resolution(){return 0}set map(e){e!==this._get("map")&&(e?.destroyed&&(Z.getLogger(this).warn("#map","The provided map is already destroyed",{map:e}),e=null),Br.isLoadable(e)&&e.load().catch(()=>{}),this.constructed&&!this.destroyed&&(this.forceReadyCycle(),this._lockedSpatialReference=null),this._set("map",e))}get spatialReference(){let e=this._userSpatialReference||this._lockedSpatialReference||this.getDefaultSpatialReference()||null;if(e&&this.defaultsFromMap?.required?.heightModelInfo){let t=e.clone();return t.vcsWkid=this.defaultsFromMap.vcsWkid,t.latestVcsWkid=this.defaultsFromMap.latestVcsWkid,t}return e}set spatialReference(e){let t=!Es(e,this._get("spatialReference"));this._set("_userSpatialReference",e),t&&(this._set("spatialReference",e),this._spatialReferenceChanged(e))}_spatialReferenceChanged(e){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get timeZone(){return this._userTimeZone??this._lockedTimeZone??this.getDefaultTimeZone()??Wd}set timeZone(e){let t=new Set(["etc/utc","etc/gmt","gmt"]),n=new Set(Intl.supportedValuesOf("timeZone").map(i=>i.toLowerCase()));this._userTimeZone=e,e===Wd||e===$f||t.has(e.toLowerCase())||n.has(e.toLowerCase())||Z.getLogger(this).warn("#timeZone",`the parsed value '${e}' may not be a valid IANA time zone`)}get tools(){return this.toolViewManager?.tools}get initialExtent(){return this.defaultsFromMap?.extent}get cursor(){return this.toolViewManager?.cursor??this._cursor??"default"}set cursor(e){this._cursor=e,this.notifyChange("cursor")}get size(){return[this.width,this.height]}get effectiveTheme(){return this.theme??new lc}whenLayerView(e){return this.layerViewManager?.whenLayerView(e)??Promise.reject()}getDefaultSpatialReference(){return this.defaultsFromMap?.spatialReference}getDefaultHeightModelInfo(){return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??this.defaultsFromMap?.heightModelInfo??null}getDefaultTimeZone(){return null}importLayerView(e){throw new ne("importLayerView() not implemented")}hasLayerViewModule(e){return!1}validate(){return I(this,null,function*(){})}loadAsyncDependencies(){return I(this,null,function*(){})}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(e){return this.getSpatialReferenceSupport(e)!=null}when(e,t){return this.isResolved()&&!this.ready&&Z.getLogger(this).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(e,t)}forceReadyCycle(){this.ready&&(ai(()=>this.destroyed||this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(e){this.toolViewManager.tools.add(e),this.activeTool=e}tryFatalErrorRecovery(){this.fatalError=null}};U.views=new Y,l([d()],U.prototype,"_userSpatialReference",void 0),l([d()],U.prototype,"activeTool",null),l([d({readOnly:!0})],U.prototype,"allLayerViews",void 0),l([d()],U.prototype,"groundView",void 0),l([d()],U.prototype,"animation",null),l([d()],U.prototype,"basemapView",void 0),l([d()],U.prototype,"center",null),l([d({readOnly:!0})],U.prototype,"_defaultsFromMapSettings",null),l([d()],U.prototype,"defaultsFromMap",null),l([d()],U.prototype,"fatalError",void 0),l([d({type:Ki})],U.prototype,"extent",null),l([d(cu(du,"graphics"))],U.prototype,"graphics",void 0),l([d(cu(ha,"analyses"))],U.prototype,"analyses",void 0),l([d({readOnly:!0,type:hg})],U.prototype,"heightModelInfo",null),l([d({readOnly:!0})],U.prototype,"interacting",null),l([d({readOnly:!0})],U.prototype,"navigating",null),l([d({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_lockedSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],U.prototype,"preconditionsReady",null),l([d({readOnly:!0})],U.prototype,"typeSpecificPreconditionsReady",void 0),l([d({type:Y,readOnly:!0})],U.prototype,"layerViews",void 0),l([d()],U.prototype,"resolution",null),l([d({type:kp})],U.prototype,"magnifier",void 0),l([d({value:null,type:sc})],U.prototype,"map",null),l([d()],U.prototype,"padding",void 0),l([d({readOnly:!0})],U.prototype,"ready",void 0),l([d({type:Is})],U.prototype,"spatialReference",null),l([d()],U.prototype,"spatialReferenceWarningDelay",void 0),l([d()],U.prototype,"stationary",null),l([d({readOnly:!0})],U.prototype,"supportsGround",void 0),l([d({type:Cg})],U.prototype,"timeExtent",void 0),l([d({type:String,nonNullable:!0})],U.prototype,"timeZone",null),l([d()],U.prototype,"tools",null),l([d()],U.prototype,"toolViewManager",void 0),l([d({readOnly:!0})],U.prototype,"type",void 0),l([d({type:Number})],U.prototype,"scale",void 0),l([d({readOnly:!0})],U.prototype,"updating",void 0),l([d({readOnly:!0})],U.prototype,"initialExtentRequired",void 0),l([d({readOnly:!0})],U.prototype,"initialExtent",null),l([d()],U.prototype,"cursor",null),l([d({readOnly:!0})],U.prototype,"input",void 0),l([d({type:Np,nonNullable:!0})],U.prototype,"navigation",void 0),l([d()],U.prototype,"layerViewManager",void 0),l([d()],U.prototype,"analysisViewManager",void 0),l([d()],U.prototype,"selectionManager",void 0),l([d()],U.prototype,"width",void 0),l([d()],U.prototype,"height",void 0),l([d({readOnly:!0})],U.prototype,"resizing",void 0),l([d({value:null,readOnly:!0})],U.prototype,"size",null),l([d({readOnly:!0})],U.prototype,"suspended",void 0),l([d({readOnly:!0})],U.prototype,"viewEvents",void 0),l([d({readOnly:!0})],U.prototype,"persistableViewModels",void 0),l([d()],U.prototype,"_isValid",void 0),l([d()],U.prototype,"_readyCycleForced",void 0),l([d()],U.prototype,"_lockedSpatialReference",void 0),l([d()],U.prototype,"_userTimeZone",void 0),l([d()],U.prototype,"_lockedTimeZone",void 0),l([d({type:lc})],U.prototype,"theme",void 0),l([d({readOnly:!0,type:lc})],U.prototype,"effectiveTheme",null),U=ba=l([b("esri.views.View")],U);var Gy=U;function DT(e){return e.layerViews}var io=class extends Yf{constructor(e){super(e),this.state="running",this.target=null,this._resolver=null}initialize(){this._resolver=wo(),this.addResolvingPromise(this._resolver.promise)}get done(){return this.state==="finished"||this.state==="stopped"}stop(){this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),this._resolver?.reject(new ne("ViewAnimation stopped")))}finish(){this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),this._resolver?.resolve())}update(e,t){t||(t=Ff(e)?"waiting-for-target":"running"),this._set("target",e),this._set("state",t)}};l([d({readOnly:!0})],io.prototype,"done",null),l([d({readOnly:!0,type:String})],io.prototype,"state",void 0),l([d()],io.prototype,"target",void 0),io=l([b("esri.views.ViewAnimation")],io),function(e){e.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}}(io||(io={}));var wa=io;function ET(e){return e instanceof Float32Array&&e.length>=2}function IT(e){return Array.isArray(e)&&e.length>=2}function pc(e){return ET(e)||IT(e)}var jp,Sn=[0,0],no=jp=class extends Ds{constructor(e){super(e),this._viewpoint2D={center:ks(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new Ki,this.id=0,this.inverseTransform=Fl(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=Fl(),this.transformNoRotation=Fl(),this.displayMat3=Rl(),this.displayViewMat3=Rl(),this.viewMat3=Rl(),this.viewMat2d=i_(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(e){this._set("pixelRatio",e),this._update()}set size(e){this._set("size",e),this._update()}set viewpoint(e){if(e){let t=this._viewpoint2D,n=e.targetGeometry;t.center[0]=n.x,t.center[1]=n.y,t.rotation=e.rotation,t.scale=e.scale,t.spatialReference=n.spatialReference}this._update()}copy(e){let t=this.size,n=this.viewpoint;return n&&t?(this.viewpoint=vi(n,e.viewpoint),this._set("size",Os(t,e.size))):(this.viewpoint=e.viewpoint.clone(),this._set("size",[e.size[0],e.size[1]])),this._set("pixelRatio",e.pixelRatio),this}clone(){return new jp({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(e,t,n){return pc(t)?To(e,t,this.inverseTransform):(Sn[0]=t,Sn[1]=n,To(e,Sn,this.inverseTransform))}toScreen(e,t,n){return pc(t)?To(e,t,this.transform):(Sn[0]=t,Sn[1]=n,To(e,Sn,this.transform))}toScreenNoRotation(e,t,n){return pc(t)?To(e,t,this.transformNoRotation):(Sn[0]=t,Sn[1]=n,To(e,Sn,this.transformNoRotation))}wrapMapCoordinate(e,t){Os(e,t);let[n]=t,[i]=this.center,{extent:o,spatialReference:s}=this,{xmin:r,xmax:a}=o;if(s.isWrappable){let c=U_(s)/2;r=Math.max(r,i-c),a=Math.min(a,i+c)}return(n<r||n>a)&&(e[0]=Vg(n,i,s)),e}getScreenTransform(e,t){let{center:n}=this._viewpoint2D,i=this._get("pixelRatio")||1,o=this._get("size");return B_(e,n,o,t,0,i),e}_update(){let{center:e,spatialReference:t,scale:n,rotation:i}=this._viewpoint2D,o=this._get("pixelRatio")||1,s=this._get("size"),r=new ci({targetGeometry:new Fe(e[0],e[1],t),scale:n,rotation:i});if(this._set("viewpoint",r),!s||!t||!n)return;this.resolution=V_(r),this.rotation=i,this.scale=n,this.spatialReference=t,Os(this.center,e);let a=s[0]!==0?2/s[0]:0,c=s[1]!==0?-2/s[1]:0;Ug(this.displayMat3,a,0,0,0,c,0,-1,1,1);let u=zg(this.viewMat3),p=tu(s[0]/2,s[1]/2),h=tu(-s[0]/2,-s[1]/2),m=gg(i);Xd(u,u,p),Wg(u,u,m),Xd(u,u,h),$g(this.displayViewMat3,this.displayMat3,u);let f=t_(this.viewMat2d,p);return Xg(f,f,m),e_(f,f,h),L_(this.extent,r,s),G_(this.transform,r,s,o),Jg(this.inverseTransform,this.transform),j_(this.transformNoRotation,r,s,o),this.worldScreenWidth=z_(this.spatialReference,this.resolution),this._set("id",this.id+1),this}};l([d({readOnly:!0})],no.prototype,"id",void 0),l([d({value:1,json:{write:!0}})],no.prototype,"pixelRatio",null),l([d({json:{write:!0}})],no.prototype,"size",null),l([d()],no.prototype,"spatialReference",void 0),l([d({type:ci,json:{write:!0}})],no.prototype,"viewpoint",null),no=jp=l([b("esri.views.2d.ViewState")],no);var Up=no;var zp,$p,Tn=zp=class extends P{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new zp({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};l([d()],Tn.prototype,"left",void 0),l([d()],Tn.prototype,"top",void 0),l([d()],Tn.prototype,"right",void 0),l([d()],Tn.prototype,"bottom",void 0),Tn=zp=l([b("esri.views.2d.PaddedViewState.Padding")],Tn);var Ys=$p=class extends Up{constructor(...e){super(...e),this.paddedViewState=new Up,this._updateContent=(()=>{let t=ks();return()=>{let n=this._get("size"),i=this._get("padding");if(!n||!i)return;let o=this.paddedViewState;Hg(t,i.left+i.right,i.top+i.bottom),Bg(t,n,t),Os(o.size,t);let s=o.viewpoint;s&&(this.viewpoint=s)}})(),this.addHandles(x(()=>[this.size,this.padding],()=>this._updateContent(),_n)),this.padding=new Tn,this.size=[0,0]}set padding(e){this._set("padding",e||new Tn)}set viewpoint(e){if(e){this.paddedViewState.viewpoint=e;let t=this._viewpoint2D;if(this._get("padding")){let n=e.clone();W_(n,e,this._get("size"),this._get("padding"));let i=n.targetGeometry;t.center[0]=i.x,t.center[1]=i.y,t.rotation=n.rotation,t.scale=n.scale,t.spatialReference=i.spatialReference}else{let n=e.targetGeometry;t.center[0]=n.x,t.center[1]=n.y,t.rotation=e.rotation,t.scale=e.scale,t.spatialReference=n.spatialReference}this._update()}}clone(){return new $p({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};l([d()],Ys.prototype,"paddedViewState",void 0),l([d({type:Tn})],Ys.prototype,"padding",null),l([d()],Ys.prototype,"viewpoint",null),Ys=$p=l([b("esri.views.2d.PaddedViewState")],Ys);var Ks=Ys;var Ca=class{constructor(t){this._view=t,this.viewpoint=new ci({targetGeometry:new Fe,scale:0,rotation:0})}get view(){return this._view}get size(){let[t,n]=this._view.size;return Math.sqrt(t*t+n*n)}get scale(){return this.viewpoint.scale}get rotation(){return this.viewpoint.rotation}get center(){return this.viewpoint.targetGeometry}get scaleToResolutionFactor(){return H_(this.center.spatialReference)}pixelsPerPanAtZoom(t){return 1/(t*this.scaleToResolutionFactor)}zoomAtPixelsPerPan(t){return 1/(t*this.scaleToResolutionFactor)}pixelsPerRotateAtZoom(t){return this.size/2}compareTo(t,n){n.pan=ug(this.center,t.center);let i=Math.abs(t.rotation-this.rotation);i=i>=180?360-i:i,n.rotate=gl(i),n.sourceZoom=this.scale,n.targetZoom=t.scale}interpolate(t,n,i){let{pan:o,rotate:s,zoom:r,zoomOffset:a}=i,{center:c}=this;c.spatialReference=t.center.spatialReference,c.x=Gr(t.center.x,n.center.x,o),c.y=Gr(t.center.y,n.center.y,o),this.viewpoint.scale=Gr(t.scale,n.scale+a,r);let u=t.rotation,p=n.rotation;Math.abs(p-u)>=180&&(u+=360*(u<p?1:-1)),this.viewpoint.rotation=Gr(u,p,s)}copyFrom(t){vi(this.viewpoint,t.viewpoint),this._view=t.view}};var Wp=e=>e*e,jy=e=>1-Wp(1-e);var xT=e=>2**(10*(e-1)),Uy=e=>1-xT(1-e);function Ci(e){let t=2*(e-Math.sqrt((e-1)*e)),n=t/2/e;return i=>i<n?e*i*i:t*i-t+1}function Si(e,t){return(n,i)=>n<t?t*e(n/t,i):1-e((1-n)/(1-t),i)*(1-t)}var aV=Si(Ci(1),1),lV=Si(Ci(1),0),qp=Si(Ci(1),.5),cV=Si(Ci(2),1),dV=Si(Ci(2),0),uV=Si(Ci(2),.5),pV=Si(Ci(3),1),hV=Si(Ci(3),0),mV=Si(Ci(3),.5),fV=Si(Ci(4),1),gV=Si(Ci(4),0),_V=Si(Ci(4),.5);var hc=class{constructor(){this.pan=0,this.rotate=0,this.fov=0,this.sourceZoom=0,this.targetZoom=0}};var ko={desiredScreenFlow:2,minDuration:500,maxDuration:8e3},Zp=G(v({},ko),{maxDuration:4e3});var fc=class e{constructor(t){this._createCamera=t,this.compared=new hc,this.segmentStart=0,this.segmentEnd=1,this.settings={desiredScreenFlow:ko.desiredScreenFlow},this.source=t(),this.target=t()}clone(){let t=new e(this._createCamera);return t.copyFrom(this),t}copyFrom(t){this.update(t.source,t.target,t.settings)}update(t,n,i){this.source!==t&&this.source.copyFrom(t),this.target!==n&&this.target.copyFrom(n),this.source.compareTo(this.target,this.compared),this.settings.desiredScreenFlow=i.desiredScreenFlow!=null?i.desiredScreenFlow:ko.desiredScreenFlow,this.desiredPixelFlow=this.settings.desiredScreenFlow*this.target.size,this.halfWindowSize=this.target.size/2}halfWindowPanAtZoom(t){let n=this.target.pixelsPerPanAtZoom(t);return this.halfWindowSize/n}get hasZoom(){return Math.abs(this.compared.sourceZoom-this.compared.targetZoom)>1e-5}get hasPan(){return this.compared.pan>fl()}get hasFov(){return Math.abs(this.compared.fov)>fl()}get hasRotate(){return this.compared.rotate>fl()}};var gc=class{constructor(){this.pan=0,this.rotate=0,this.zoom=0,this.fov=0,this.zoomOffset=0}};var $y=class{constructor(){this.segments=new Array}get time(){return this.segments.reduce((e,t)=>e+t.time,0)}interpolateComponentsAt(e,t){e=Math.min(Math.max(e,0),1),e*=this.time;let n=0,i=0,o=this.definition,s=this.segments.reduce((r,a)=>r||a.definition.hasZoom,!1);for(let r=0;r<this.segments.length;r++){let a=this.segments[r],c=a.definition;if(e<=a.time||r===this.segments.length-1){if(this.segmentInterpolateComponentsAt(a,a.time===0?0:e/a.time,t),o.hasPan&&!isNaN(t.pan)&&isFinite(o.compared.pan)?t.pan=(n+c.compared.pan*t.pan)/o.compared.pan:t.pan=1,o.hasRotate&&!isNaN(t.rotate)&&isFinite(o.compared.rotate)?t.rotate=(i+c.compared.rotate*t.rotate)/o.compared.rotate:t.rotate=1,s&&!isNaN(t.zoom)&&isFinite(c.compared.targetZoom)){let{sourceZoom:u,targetZoom:p}=c.compared,h=t.zoom*(p-u)+u,m=this.segments[0].definition.compared.sourceZoom,f=this.segments[this.segments.length-1].definition.compared.targetZoom,S=Math.abs(p-m)>Math.abs(u-m)?p:u;t.zoomOffset=S-f,t.zoom=(h-m)/(S-m)}else t.zoom=1;return t}e-=a.time,n+=c.compared.pan,i+=c.compared.rotate}}segmentInterpolateComponentsAt(e,t,n){e.interpolateComponentsAt(t,n)}};var Qs=class{get time(){return this._time}constructor(t){t&&this.update(t)}update(t){t&&(this.definition?this.definition.copyFrom(t):this.definition=t.clone()),this._updatePrecomputedVariables(),this._updatePixelFlow()}_updatePrecomputedVariables(){let t=this.definition,n=t.compared,i=n.sourceZoom,o=n.targetZoom;this._zoomSign=i>o?1:-1,this._panPixelsAtSource=n.pan*t.source.pixelsPerPanAtZoom(i);let s=(t.source.pixelsPerRotateAtZoom(i)+t.target.pixelsPerRotateAtZoom(o))/2;this._rotatePixels=n.rotate*s}_updatePixelFlow(){let t=this.definition.compared.sourceZoom,n=this.definition.compared.targetZoom,{hasZoom:i,hasPan:o,hasRotate:s}=this.definition,r=0,a=0;i&&(o&&(r=(n/t-1)/(-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2*this._panPixelsAtSource)),s&&(a=this._zoomSign*(Math.log(t/n)/Math.LN2)*this.definition.halfWindowSize/this._rotatePixels)),this._zoomPixelFlow=0,this._panPixelFlow=0,this._rotatePixelFlow=0;let c=this.definition.desiredPixelFlow;if(i&&o&&s){let u=r+a+r*a;this._zoomPixelFlow=r*a/u*c,this._panPixelFlow=a/u*c,this._rotatePixelFlow=r/u*c}else if(i&&o){let u=1+r;this._zoomPixelFlow=r/u*c,this._panPixelFlow=1/u*c}else if(i&&s){let u=1+a;this._zoomPixelFlow=a/u*c,this._rotatePixelFlow=1/u*c}else if(o&&s){let u=this._panPixelsAtSource/this._rotatePixels,p=1+u;this._panPixelFlow=u/p*c,this._rotatePixelFlow=1/p*c}else o?this._panPixelFlow=c:i?this._zoomPixelFlow=c:s&&(this._rotatePixelFlow=c);this._time=this.rotateTime??this.zoomTime??this.panTime??this.fovTime??0}get rotateTime(){return this.definition.hasRotate?this._rotatePixels/this._rotatePixelFlow:null}get zoomTime(){return this.definition.hasZoom?this._zoomSign*(Math.log(this.definition.compared.sourceZoom/this.definition.compared.targetZoom)/Math.LN2)*this.definition.halfWindowSize/this._zoomPixelFlow:null}get fovTime(){return this.definition.hasFov?Math.abs(this.definition.compared.fov)/OT:null}get panTime(){if(this.definition.hasPan){if(this.definition.hasZoom){let t=-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2,n=t*this._panPixelsAtSource;return Math.log(n*(this._zoomPixelFlow/this._panPixelFlow)+1)/(t*this._zoomPixelFlow)}return this._panPixelsAtSource/this._panPixelFlow}}_interpolateComponentsZoom(t){if(t===0||t===1)return t;if(this.definition.hasZoom){let n=this.definition.compared.sourceZoom,i=this.definition.compared.targetZoom;return(n*(n/i)**-t-n)/(i-n)}return t}_interpolateComponentsFov(t){if(t===0)return this.definition.segmentStart;if(t===1)return this.definition.segmentEnd;if(this.definition.hasFov){let{segmentStart:n,segmentEnd:i}=this.definition;return n+t*(i-n)}return this.definition.segmentStart}_interpolateComponentsPan(t){if(t===0||t===1)return t;if(this.definition.hasPan&&this.definition.hasZoom){let n=-1/(this._zoomSign*this.definition.halfWindowSize)*this._zoomPixelFlow;return 1/this._panPixelsAtSource*(this._panPixelFlow*(2**(n*t*this._time)-1))/(n*Math.LN2)}return t}_interpolateComponentsRotate(t){return t}interpolateComponentsAt(t,n){t=Math.min(Math.max(t,0),1),n.zoom=this._interpolateComponentsZoom(t),n.pan=this._interpolateComponentsPan(t),n.rotate=this._interpolateComponentsRotate(t),n.zoomOffset=0,n.fov=this._interpolateComponentsFov(t)}},OT=gl(90);function Wy(e,t,n){let i=t-e.compared.sourceZoom,o=e.halfWindowPanAtZoom(i);return-e.halfWindowSize*(n.ascensionFactor*Math.LN2*e.compared.pan+o)*Math.log(e.compared.sourceZoom/t)/(e.desiredPixelFlow*Math.LN2*o)}function qy(e,t,n){let i=1/t,o=Math.log(e.compared.sourceZoom*i),s=1/e.desiredPixelFlow,r=1/Math.LN2,a=t-e.compared.sourceZoom,c=1/a,u=(n.ascensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(a))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*i*s*r*c*u-e.halfWindowSize*o*s*r*c+e.halfWindowSize*o*s*r*u/(a*a)}function Zy(e,t,n){let i=t-e.compared.sourceZoom,o=1/i,s=1/t,r=Math.log(e.compared.sourceZoom*s),a=(n.ascensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(i))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*o*(-2*o*s*a+2*o*r+2*s-2*r*a/(i*i)-a/(t*t))/(e.desiredPixelFlow*Math.LN2)}function Yy(e,t){return-e.halfWindowSize*Math.log(e.compared.sourceZoom/t)/(e.desiredPixelFlow*Math.LN2)}function Ky(e,t){return e.halfWindowSize/(t*e.desiredPixelFlow*Math.LN2)}function Qy(e,t){return-e.halfWindowSize/(t*t*e.desiredPixelFlow*Math.LN2)}function Jy(e,t,n){return-e.compared.pan*e.halfWindowSize*(n.ascensionFactor+n.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t))}function Xy(e,t,n){return e.compared.pan*e.halfWindowSize*(n.ascensionFactor+n.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t*t))}function ev(e,t,n){return-2*e.compared.pan*e.halfWindowSize*(n.ascensionFactor+n.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t*t*t))}function tv(e,t,n){return e.halfWindowSize*(-e.halfWindowPanAtZoom(t)-n.descensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(e.compared.targetZoom))*Math.log(t/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2*e.halfWindowPanAtZoom(-t+e.compared.targetZoom))}function iv(e,t,n){let i=Math.log(t/e.compared.targetZoom),o=1/e.desiredPixelFlow,s=1/Math.LN2,r=-t+e.compared.targetZoom,a=1/r,c=(-e.halfWindowPanAtZoom(t)-n.descensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(e.compared.targetZoom))/e.halfWindowPanAtZoom(1);return-e.halfWindowSize*i*o*s*a+e.halfWindowSize*i*o*s*c/(r*r)+e.halfWindowSize*o*s*a*c/t}function nv(e,t,n){let i=t-e.compared.targetZoom,o=1/i,s=1/t,r=Math.log(t/e.compared.targetZoom),a=(e.halfWindowPanAtZoom(t)+n.descensionFactor*Math.LN2*e.compared.pan-e.halfWindowPanAtZoom(e.compared.targetZoom))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*o*(-2*o*s*a-2*o*r+2*s+2*r*a/(i*i)-a/(t*t))/(e.desiredPixelFlow*Math.LN2)}function ov(e,t){return e.halfWindowSize*Math.log(t/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2)}function sv(e,t){return e.halfWindowSize/(t*e.desiredPixelFlow*Math.LN2)}function rv(e,t){return-e.halfWindowSize/(t*t*e.desiredPixelFlow*Math.LN2)}function av(e){let t=e.compared.sourceZoom-e.compared.targetZoom;if(t===0)return e.compared.pan*e.halfWindowSize/(e.desiredPixelFlow*e.halfWindowPanAtZoom(e.compared.sourceZoom));let n=Math.LN2*e.compared.pan,i=t,o=e.halfWindowPanAtZoom(i),s=e.halfWindowSize*Math.log(e.compared.sourceZoom/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2*o);return e.compared.sourceZoom<=e.compared.targetZoom?s*(n-o):s*(n+o)}function lv(e,t){let n=kT(e,t),i={ascensionFactor:t.ascensionFactor!=null?t.ascensionFactor:.5,descensionFactor:t.descensionFactor!=null?t.descensionFactor:.5},o=i.ascensionFactor===0,s=i.descensionFactor===0,r=o?Yy:Wy,a=o?Ky:qy,c=o?Qy:Zy,u=s?ov:tv,p=s?sv:iv,h=s?rv:nv,m=j=>r(e,j,i)+Jy(e,j,i)+u(e,j,i),f=j=>a(e,j,i)+Xy(e,j,i)+p(e,j,i),S=j=>c(e,j,i)+ev(e,j,i)+h(e,j,i),A=m(n),H=av(e),N,K=t.maximumIterations||20,q=t.maximumDistance!=null?t.maximumDistance:1/0;for(N=0;N<K;N++){let j=t.desiredSlope??1e-6,Q=f(n);Math.abs(Q)>j&&(Q+=j);let X=Q/S(n);if(isNaN(X)||n>=q&&X<0){if(!isFinite(q))return null;n=q,A=m(n);break}if(n-=X,n<e.compared.sourceZoom||n<e.compared.targetZoom)return null;let ce=m(n);if(Math.abs(ce-A)/A<=.005)break;A=ce}return A>H*(1-.3)||n<e.compared.sourceZoom||n<e.compared.targetZoom?null:n}function kT(e,t){let n=Math.max(e.compared.sourceZoom,e.compared.targetZoom),i=e.source.zoomAtPixelsPerPan(e.desiredPixelFlow/e.compared.pan)/2;return i<n?t.maximumDistance!=null?n+(t.maximumDistance-n)/2:1.5*n:t.maximumDistance?Math.min(t.maximumDistance,i):i}var _c=class extends $y{constructor(t,n){super(),this._preallocSegments=[new Qs,new Qs,new Qs],this._ascensionSegment=null,this._descensionSegment=null,this.update(t,n)}update(t,n){if(!t)return;this.definition?this.definition.copyFrom(t):this.definition=t.clone();let i=n?.apex?lv(t,n.apex):null;this.segments.length=0,this._ascensionSegment=null,this._descensionSegment=null,i?this._updateWithApex(i,n?.apex):this._updateWithoutApex()}segmentInterpolateComponentsAt(t,n,i){t.interpolateComponentsAt(n,i),t===this._ascensionSegment?i.zoom=jy(i.zoom):t===this._descensionSegment&&(i.zoom=Wp(i.zoom))}_updateWithApex(t,n){let[i,o,s]=this._preallocSegments,r=n?.ascensionFactor??.5,a=Math.min(1-r,n?.ascensionFactor!=null&&n.descensionFactor!=null?n.descensionFactor:.5),c=1-r-a;i.definition?i.definition.copyFrom(this.definition):i.definition=this.definition.clone(),i.definition.compared.targetZoom=t,i.definition.compared.pan=this.definition.compared.pan*r,i.definition.compared.rotate=this.definition.compared.rotate*r,i.definition.segmentEnd=r,i.update(),this._ascensionSegment=i,this.segments.push(i),c>0&&(o.definition?o.definition.copyFrom(this.definition):o.definition=this.definition.clone(),o.definition.copyFrom(this.definition),o.definition.compared.sourceZoom=t,o.definition.compared.targetZoom=t,o.definition.compared.pan=this.definition.compared.pan*c,o.definition.compared.rotate=this.definition.compared.rotate*c,o.definition.segmentStart=i.definition.segmentEnd,o.definition.segmentEnd=i.definition.segmentEnd+c,o.update(),this.segments.push(o)),s.definition?s.definition.copyFrom(this.definition):s.definition=this.definition.clone(),s.definition.compared.sourceZoom=t,s.definition.compared.pan=this.definition.compared.pan*a,s.definition.compared.rotate=this.definition.compared.rotate*a,s.definition.segmentStart=r+c,s.update(),this._descensionSegment=s,this.segments.push(s)}_updateWithoutApex(){let[t]=this._preallocSegments;t.update(this.definition),this.segments.push(t)}};var AT=new gc,cv=class{get time(){return this._time}get isLinear(){return this.path.segments.length===1}constructor(e){this._time=0,this._easing=qp,this.definition=new fc(e),this.path=new _c}update(e,t,n){this.definition.update(e,t,n),this.path.update(this.definition,n),this._time=this._applyTimeSettings(Rf(isFinite(this.path.time)?this.path.time:0),n),this._easing=n.easing??(this._time>=1e3?qp:Uy)}cameraAt(e,t){e=Math.min(Math.max(0,e),1),e=this._normalizedEasing(e);let n=this.path.interpolateComponentsAt(e,AT);t.interpolate(this.definition.source,this.definition.target,n)}_normalizedEasing(e){let t=this._easing(0,this._time),n=this._easing(1,this._time);return(this._easing(e,this._time)-t)/(n-t)}_applyTimeSettings(e,t){let n=t.speedFactor!=null?t.speedFactor:1,i=t.minDuration??ko.minDuration/n,o=t.maxDuration??ko.maxDuration/n;return e=t.duration!=null?t.duration:Math.min(Math.max(e/n,i),o)}};var dv=2e3,FT=64,Yp=class{constructor(t){this._view=t,this._animation=new cv(()=>new Ca(this._view)),this._current=new Ca(this._view)}get _source(){return this._animation.definition.source}get _target(){return this._animation.definition.target}get duration(){return this._animation.time}get animation(){return this._animation}update(t,n,i={}){vi(this._current.viewpoint,t),vi(this._source.viewpoint,t),vi(this._target.viewpoint,n),this._animation.update(this._source,this._target,i)}applyRatio(t,n){this._animation.cameraAt(n,this._current),vi(t,this._current.viewpoint)}},Js=class extends P{constructor(e){super(e),this._animation=null,this._destinationViewState=new Ks,this.updateFunction=null,this.easing=h_.ease,this.viewpoint=new ci({targetGeometry:new Fe,scale:0,rotation:0}),this._updateTask=Ri({postRender:this._postRender.bind(this)}),this._updateTask.pause(),this._transition=new Yp(e.view)}destroy(){this._updateTask=Me(this._updateTask)}get animation(){return this._animation}set animation(e){this._animation=e,this.view.animation=e}animate(e,t,n){this.stop();let i=this.viewpoint;vi(i,t);let o=(typeof n?.easing=="string"?m_(n.easing):n?.easing)||this.easing,s=e.target;this._transition.update(this.viewpoint,s,{apex:{maximumDistance:Math.min(Math.min(t.scale,s.scale)*FT,this.view.constraints.effectiveMinScale),desiredSlope:5e-8},duration:n?.duration,maxDuration:n?.animationMode==="auto"?1/0:n?.maxDuration??Zp.maxDuration,speedFactor:n?.speedFactor,easing:typeof o=="function"?a=>o(a):void 0}),n?.animationMode==="auto"&&(this._destinationViewState.copy(this.view.state),this._destinationViewState.viewpoint=s,PT(this._transition.animation,n,this.view.state,this._destinationViewState)||this._transition.update(this.viewpoint,s,{duration:0}));let r=()=>{this.animation===e&&this._updateTask&&(e.state==="finished"&&(this._transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return e.when(r,r),this._startTime=performance.now(),this._updateTask.resume(),this.animation=e,e}animateContinuous(e,t){this.stop(),this.updateFunction=t,this.viewpoint=e;let n=new wa({target:e.clone()}),i=()=>{this.animation===n&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return n.when(i,i),this._startTime=performance.now(),this._updateTask.resume(),this.animation=n,n}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(e){let t=this.animation;if(t&&t.state!==wa.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,e.deltaTime),this.animation?.update(this.viewpoint);else{let n=performance.now()-this._startTime,i=this._transition.duration,o=i>0?n/i:1,s=o>=1;this._transition.applyRatio(this.viewpoint,o),s&&this.animation?.finish()}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};function PT(e,t,n,i){if(t?.duration!=null)return!0;let{time:o,isLinear:s}=e,r=t?.speedFactor||1,a=t?.maxDuration??Zp.maxDuration/r;if(Ge("esri-goto-debug")&&(console.log("speed factor:",r),console.log("adjusted duration:		",o),console.log("adjusted max duration:	",a),console.log("is linear:",s)),o>a)return Ge("esri-goto-debug")&&console.warn(`failed "auto" heuristic: animations must be shorter than ${a/1e3}s`),!1;if(s){let u=ks(),p=me(...i.toScreen(u,...n.center)),h=me(...n.toScreen(u,...i.center)),m=h!=null&&h.x>-(1.5-.5)*n.size[0]&&h.x<(1.5+.5)*n.size[0]&&h.y>-(1.5-.5)*n.size[1]&&h.y<(1.5+.5)*n.size[1],f=p!=null&&p.x>-(1.5-.5)*i.size[0]&&p.x<(1.5+.5)*i.size[0]&&p.y>-(1.5-.5)*i.size[1]&&p.y<(1.5+.5)*i.size[1];if(Ge("esri-goto-debug")&&(console.log(`dest is within ${1.5} screens at start view:`,m),console.log(`start is within ${1.5} screens at dest view:`,f)),o>dv/r&&!m&&!f)return Ge("esri-goto-debug")&&console.warn(`failed "auto" heuristic: linear animations must be...
  - shorter than ${dv/1e3/r}s, or
  - shorter than ${a/1e3}s and the destination is close enough to the starting screen, or
  - shorter than ${a/1e3}s and the start point is close enough to the destination screen`),!1}return!0}l([d()],Js.prototype,"easing",void 0),l([d()],Js.prototype,"view",void 0),l([d()],Js.prototype,"viewpoint",void 0),Js=l([b("esri.views.2d.AnimationManager")],Js);var uv=Js;var yc=class{constructor(t){this.view=t,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this.stationary=!0,this.animationInProgress=!1,this.prepare=()=>{this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions,this._updateParameters.targetState.copy(this.view.state),this.view.animation&&!("then"in this.view.animation.target)&&(this._updateParameters.targetState.viewpoint=this.view.animation.target))},this.update=()=>{if(this._updateRequested=!1,this.view?.destroyed)return;let{allLayerViews:n,graphicsView:i,labelManager:o,state:{id:s}}=this.view;n.forEach(this._updateLayerView,this),o!=null&&(o.lastUpdateId!==s&&(o.viewChange(),o.lastUpdateId=s),o.updateRequested&&o.processUpdate(this._updateParameters)),i!=null&&(i.lastUpdateId!==s&&(i.viewChange(),i.lastUpdateId=s),i.updateRequested&&i.processUpdate(this._updateParameters)),this.view.graphicsTileStore.setViewState(this._updateParameters.state),this.animationInProgress||this._updateRequested||this._frameTaskHandle?.pause()}}destroy(){this.stop()}start(){if(this._frameTaskHandle)return;let t=this.view;this.stationary=t.stationary,this._updateParameters={state:t.state,targetState:new Ks,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:t.renderingOptions},this._stationaryHandle=x(()=>t.stationary,n=>{this.stationary=n,this.requestFrame()}),this._frameTaskHandle=Ri(this),this.requestUpdate()}stop(){this._frameTaskHandle&&(this._updateRequested=!1,this._stationaryHandle?.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(t){if(!t.attached)return void this.requestUpdate();let n=this.view.state,i=t.lastUpdateId;i!=null&&(this.stationary||t.moving)||(t.moving=!0),i!==n.id&&t.viewChange(),this.stationary&&t.moving&&(t.moving=!1,t.moveEnd()),t.lastUpdateId=n.id,t.updateRequested&&t.processUpdate(this._updateParameters),"layerViews"in t&&t.layerViews?.forEach(this._updateLayerView,this)}};var Sa=class extends P{constructor(e){super(e),this._gotoTask=null}destroy(){this._gotoTask=null}goTo(e,t){return I(this,null,function*(){if(!e)return void Z.getLogger(this).error("#goTo()","target cannot be null or undefined");let n=new wa;this.view.animation=n,yield gn(()=>this.view.ready,t);let i=G(v({},t),{animate:t?.animate??!Ol(),animationMode:t?.animationMode??"auto"}),{extent:o,spatialReference:s,size:r,viewpoint:a,constraints:c,padding:u,allLayerViews:p}=this.view,h=R_(e,{extent:o,spatialReference:s,size:r,viewpoint:a,constraints:c,padding:u,allLayerViews:p,pickClosestTarget:t?.pickClosestTarget??!0});return n?.update(h),this._gotoTask={},i.animate?this._gotoAnimated(h,i):this._gotoImmediate(h,i)})}_gotoImmediate(e,t){let n=this._gotoTask,i=this.view.animation,o=e.then(s=>{if(Ot(t),n!==this._gotoTask)throw new ne("view:goto-interrupted","Goto was interrupted");this.view.viewpoint=i.target=s,i.finish()});return this._cancellableGoTo(n,i,o,t)}_gotoAnimated(e,t){let n=this._gotoTask,i=this.view.animation;if(!i)return Promise.resolve();let o=e.then(s=>{if(Ot(t),n!==this._gotoTask)throw new ne("view:goto-interrupted","Goto was interrupted");return i.update(s),this.view.animationManager.animate(i,this.view.viewpoint,t),i.when().then(()=>{},()=>{})});return this._cancellableGoTo(n,i,o,t)}_cancellableGoTo(e,t,n,i){let o=()=>e===this._gotoTask;return $n(n,i).finally(()=>{o()&&(t.done||t.stop())})}};l([d({constructOnly:!0})],Sa.prototype,"view",void 0),Sa=l([b("esri.views.2d.GoToManager")],Sa);function Ae(){return Promise.all([import("./chunk-OG3VJURW.js"),import("./chunk-JZJZTRGD.js")])}var Ta=()=>Ae().then(()=>import("./chunk-J7RGW3D5.js")),Xs=()=>Ae().then(()=>import("./chunk-QPP3X6VE.js")),pv={"base-dynamic":()=>Ae().then(()=>import("./chunk-WD2UYXXN.js")),"base-tile":Ta,"bing-maps":Ta,catalog:()=>Ae().then(()=>import("./chunk-U2AYWYEC.js")),"catalog-dynamic-group":()=>Ae().then(()=>import("./chunk-D4E7PKL5.js")),"catalog-footprint":()=>Ae().then(()=>import("./chunk-TTRMYILC.js")),csv:Xs,"geo-rss":()=>Ae().then(()=>import("./chunk-6RH7MGFU.js")),feature:Xs,geojson:Xs,graphics:()=>Ae().then(()=>import("./chunk-OYNNY66T.js")),group:()=>Ae().then(()=>import("./chunk-F77UWWUD.js")),imagery:()=>Ae().then(()=>import("./chunk-PWZMAYNF.js")),"imagery-tile":()=>Ae().then(()=>import("./chunk-HAP7IIPR.js")),kml:()=>Ae().then(()=>import("./chunk-R6SHPWYZ.js")),"knowledge-graph":()=>Ae().then(()=>import("./chunk-VKSUWD3O.js")),"link-chart":()=>Ae().then(()=>import("./chunk-VKSUWD3O.js")),"knowledge-graph-sublayer":Xs,"map-image":()=>Ae().then(()=>import("./chunk-JGFYZ3RZ.js")),"map-notes":()=>Ae().then(()=>import("./chunk-3ZEGV35L.js")),media:()=>Ae().then(()=>import("./chunk-LPWHH3Q5.js")),"ogc-feature":()=>Ae().then(()=>import("./chunk-GMRM56KP.js")),"open-street-map":Ta,"oriented-imagery":Xs,route:()=>Ae().then(()=>import("./chunk-FOSXS5A3.js")),stream:()=>Ae().then(()=>import("./chunk-QTU5GZDC.js")),"subtype-group":()=>Ae().then(()=>import("./chunk-WB4G6LY6.js")),tile:Ta,"vector-tile":()=>Ae().then(()=>import("./chunk-P7OLI7G2.js")),video:()=>Ae().then(()=>import("./chunk-6CHJAAYC.js")),wcs:()=>Ae().then(()=>import("./chunk-HAP7IIPR.js")),"web-tile":Ta,wfs:Xs,wms:()=>Ae().then(()=>import("./chunk-XDXQ6D7I.js")),wmts:()=>Ae().then(()=>import("./chunk-6VJURNPV.js")),"line-of-sight":null,"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"integrated-mesh":null,"integrated-mesh-3dtiles":null,"point-cloud":null,voxel:null,scene:null,unknown:null,unsupported:null};function RT(e){let t=e.declaredClass?e.declaredClass.slice(e.declaredClass.lastIndexOf(".")+1):"Unknown",n=t.replaceAll(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new ne(`${n}:view-not-supported`,`${t} is not supported in 2D`)}var Kp={hasLayerViewModule:e=>pv[e.type]!=null,importLayerView:e=>{let t=pv[e.type];if(t==null)throw RT(e);return t(e)}};function hv(e,t){let{spatialReference:n}=t,i=[t.x,t.y],o=Number.POSITIVE_INFINITY,s=0,r=0,a=[0,0],c=e.type==="extent"?[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]:e.rings;for(let u of c)for(let p=0;p<u.length-1;p++){mg(a,i,u,p);let h=Gg(i,a);h<o&&(o=h,s=a[0],r=a[1])}return{coordinate:new Fe({x:s,y:r,spatialReference:n}),distance:o}}var Qp,oo=Qp=class extends xs(P){constructor(e){super(e),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(this.geometry==null||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return Yn(this.geometry,this.spatialReference)}catch(e){return Z.getLogger(this).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:e}),null}return this.geometry}constrain(e,t){if(this.normalizedGeometry==null)return e;let n=e.targetGeometry;if(this.normalizedGeometry.type==="extent"?ml(this.normalizedGeometry,n):pg(this.normalizedGeometry,n))return e;let{coordinate:i}=hv(this.normalizedGeometry,n);return i&&(e.targetGeometry=i),e}clone(){return new Qp({geometry:this.geometry?.clone(),spatialReference:this.spatialReference?.clone()})}};l([d({constructOnly:!0})],oo.prototype,"geometry",void 0),l([d({readOnly:!0})],oo.prototype,"normalizedGeometry",null),l([d({constructOnly:!0})],oo.prototype,"spatialReference",void 0),oo=Qp=l([b("esri.views.2d.constraints.GeometryConstraint")],oo);var Jp,Ma=Jp=class extends xs(P){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(e,t){return this.enabled&&t&&(this.rotationEnabled||(e.rotation=t.rotation)),e}clone(){return new Jp({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};l([d()],Ma.prototype,"enabled",void 0),l([d()],Ma.prototype,"rotationEnabled",void 0),Ma=Jp=l([b("esri.views.2d.constraints.RotationConstraint")],Ma);var Xp=Ma;var eh,Wt=eh=class extends xs(P){constructor(e){super(e),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let e,{lods:t,minScale:n,maxScale:i,minZoom:o,maxZoom:s}=this,r=-1,a=-1,c=!1,u=!1;if(n!==0&&i!==0&&n<i&&([n,i]=[i,n]),!t?.length)return this._set("effectiveMinScale",n),void this._set("effectiveMaxScale",i);t=t.map(p=>p.clone()),t.sort((p,h)=>h.scale-p.scale),t.forEach((p,h)=>p.level=h);for(let p of t)!c&&n>0&&n>=p.scale&&(r=p.level,c=!0),!u&&i>0&&i>=p.scale&&(a=e?e.level:-1,u=!0),e=p;o===-1&&(o=n===0?0:r),s===-1&&(s=i===0?t.length-1:a),o=Math.max(o,0),o=Math.min(o,t.length-1),s=Math.max(s,0),s=Math.min(s,t.length-1),o>s&&([o,s]=[s,o]),n=t[o].scale,i=t[s].scale,t.splice(0,o),t.splice(s-o+1,t.length),t.forEach((p,h)=>{this._lodByScale[p.scale]=p,this._scales[h]=p.scale}),this._set("effectiveLODs",t),this._set("effectiveMinZoom",o),this._set("effectiveMaxZoom",s),this._set("effectiveMinScale",n),this._set("effectiveMaxScale",i)}constrain(e,t){if(t&&e.scale===t.scale)return e;let n=this.effectiveMinScale,i=this.effectiveMaxScale,o=e.targetGeometry,s=t&&t.targetGeometry,r=i!==0&&e.scale<i,a=n!==0&&e.scale>n;if(r||a){let c=a?n:i;if(t&&s){let u=(c-t.scale)/(e.scale-t.scale);o.x=s.x+(o.x-s.x)*u,o.y=s.y+(o.y-s.y)*u}e.scale=c}return this.snapToZoom&&this.effectiveLODs&&(e.scale=this._getClosestScale(e.scale)),e}fit(e){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(e,null);let t=this.scaleToZoom(e.scale),n=Math.abs(t-Math.floor(t));return e.scale=this.zoomToScale(n>.99?Math.round(t):Math.floor(t)),e}zoomToScale(e){if(!this.effectiveLODs)return 0;e-=this.effectiveMinZoom,e=Math.max(0,e);let t=this._scales;if(e<=0)return t[0];if(e>=t.length)return t[t.length-1];let n=Math.floor(e),i=Math.ceil(e);return t[n]+(e-n)*(t[i]-t[n])}scaleToZoom(e){if(!this.effectiveLODs)return-1;let t=this._scales,n,i;if(e>=t[0])return this.effectiveMinZoom;if(e<=t[t.length-1])return this.effectiveMaxZoom;for(let o=0;o<t.length-1;o++){if(n=t[o],i=t[o+1],i===e)return o+this.effectiveMinZoom+1;if(n>e&&i<e)return o+this.effectiveMinZoom+1-(e-i)/(n-i)}return-1}snapToClosestScale(e){if(!this.effectiveLODs)return e;let t=this.scaleToZoom(e);return this.zoomToScale(Math.round(t))}snapToNextScale(e,t=.5){if(!this.effectiveLODs)return e*t;let n=Math.round(this.scaleToZoom(e));return this.zoomToScale(n+1)}snapToPreviousScale(e,t=2){if(!this.effectiveLODs)return e*t;let n=Math.round(this.scaleToZoom(e));return this.zoomToScale(n-1)}clone(){return new eh({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(e){return this._lodByScale[e]||(e=this._scales.reduce((t,n)=>Math.abs(n-e)<=Math.abs(t-e)?n:t,this._scales[0])),this._lodByScale[e].scale}};l([d({readOnly:!0})],Wt.prototype,"effectiveLODs",void 0),l([d({readOnly:!0})],Wt.prototype,"effectiveMinZoom",void 0),l([d({readOnly:!0})],Wt.prototype,"effectiveMaxZoom",void 0),l([d({readOnly:!0})],Wt.prototype,"effectiveMinScale",void 0),l([d({readOnly:!0})],Wt.prototype,"effectiveMaxScale",void 0),l([d()],Wt.prototype,"lods",void 0),l([d()],Wt.prototype,"minZoom",void 0),l([d()],Wt.prototype,"maxZoom",void 0),l([d()],Wt.prototype,"minScale",void 0),l([d()],Wt.prototype,"maxScale",void 0),l([d()],Wt.prototype,"snapToZoom",void 0),Wt=eh=l([b("esri.views.2d.constraints.ZoomConstraint")],Wt);var th=Wt;var LT={base:null,key:"type",typeMap:{extent:Ki,polygon:vl}},$e=class extends P{constructor(e){super(e),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0,this.customConstraints=new Y}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(e){e?this._set("geometry",e):this._set("geometry",null)}get version(){return`${this._zoom?.uid}/${this._rotation?.uid}/${this._geometry?.uid}`}get _geometry(){let e=this._get("_geometry");return e&&this.geometry===e.geometry&&this.view?.constraintsInfo.spatialReference===e.spatialReference?e:new oo({geometry:this.geometry,spatialReference:this.view?.constraintsInfo.spatialReference})}get _rotation(){return new Xp({rotationEnabled:this.rotationEnabled})}get _zoom(){let e=this._get("_zoom"),t=this.lods||this.view?.constraintsInfo.lods,n=this.minZoom,i=this.maxZoom,o=this.minScale,s=this.maxScale,r=this.snapToZoom;return e&&e.lods===t&&e.minZoom===n&&e.maxZoom===i&&e.minScale===o&&e.maxScale===s&&e.snapToZoom===r?e:new th({lods:t,minZoom:n,maxZoom:i,minScale:o,maxScale:s,snapToZoom:r})}canZoomInTo(e){let t=this.effectiveMaxScale;return t===0||e>=t}canZoomOutTo(e){let t=this.effectiveMinScale;return t===0||e<=t}constrain(e,t){return this._zoom.constrain(e,t),this._rotation.constrain(e,t),this._geometry.constrain(e,t),this.customConstraints.forEach(n=>n.constrain(e,t)),e}constrainByGeometry(e){return this._geometry.constrain(e),this.customConstraints.forEach(t=>t.applyPanConstraint?.(e)),e}fit(e){return this._zoom.fit(e)}zoomToScale(e){return this._zoom.zoomToScale(e)}scaleToZoom(e){return this._zoom.scaleToZoom(e)}snapScale(e){return this._zoom.snapToClosestScale(e)}snapToNextScale(e){return this._zoom.snapToNextScale(e)}snapToPreviousScale(e){return this._zoom.snapToPreviousScale(e)}};l([d({readOnly:!0})],$e.prototype,"effectiveLODs",null),l([d({readOnly:!0})],$e.prototype,"effectiveMinScale",null),l([d({readOnly:!0})],$e.prototype,"effectiveMaxScale",null),l([d({readOnly:!0})],$e.prototype,"effectiveMinZoom",null),l([d({readOnly:!0})],$e.prototype,"effectiveMaxZoom",null),l([d({types:LT,value:null})],$e.prototype,"geometry",null),l([d({type:[Og]})],$e.prototype,"lods",void 0),l([d()],$e.prototype,"minScale",void 0),l([d()],$e.prototype,"maxScale",void 0),l([d()],$e.prototype,"minZoom",void 0),l([d()],$e.prototype,"maxZoom",void 0),l([d()],$e.prototype,"rotationEnabled",void 0),l([d()],$e.prototype,"snapToZoom",void 0),l([d({type:Y})],$e.prototype,"customConstraints",void 0),l([d()],$e.prototype,"view",void 0),l([d({readOnly:!0})],$e.prototype,"version",null),l([d({type:oo,readOnly:!0})],$e.prototype,"_geometry",null),l([d({type:Xp})],$e.prototype,"_rotation",null),l([d({readOnly:!0,type:th})],$e.prototype,"_zoom",null),$e=l([b("esri.views.2d.MapViewConstraints")],$e);var ih=$e;var At=class extends P{constructor(e){super(e),this.constraints=null,this.ready=!1,this.resizeAlign="center",this.addHandles([x(()=>this.constraints?.version,t=>{this.constraints&&t&&this.ready&&(this.state.viewpoint=this.constraints.fit(this.state.paddedViewState.viewpoint))},_n)])}get center(){if(!this.ready)return this._get("center");let{center:e,spatialReference:t}=this.state.paddedViewState;return this.state.commitProperty("id"),new Fe({x:e[0],y:e[1],spatialReference:t})}set center(e){if(e==null)return;if(!this.ready)return void this._set("center",e);let t;try{t=this._project(e,this.state.spatialReference)}catch(i){return void Z.getLogger(this).error(new ne("mapview:invalid-center","could not project the value in the view's spatial reference",{input:e,error:i}))}let n=this.viewpoint;pu(n,n,t),this.viewpoint=n}get extent(){return this.ready?(this.state.commitProperty("id"),this.state.paddedViewState.extent.clone()):this._get("extent")}set extent(e){if(e==null)return;if(!e.width||!e.height)return void Z.getLogger(this).error(new ne("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",e),this._set("center",void 0),this._set("viewpoint",void 0),this._set("scale",void 0),void this._set("zoom",void 0);let t;try{t=this._project(e,this.state.spatialReference)}catch(i){return void Z.getLogger(this).error(new ne("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:i}))}let n=this.viewpoint;N_(n,n,t,this.state.size,{constraints:this.constraints}),this.viewpoint=n}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(e){this.ready?(this.state.padding=e,this._set("padding",this.state.padding)):this._set("padding",e)}get resolution(){return this.ready?(this.state.commitProperty("id"),this.state.resolution):0}get rotation(){return this.ready?(this.state.commitProperty("id"),this.state.rotation):this._get("rotation")}set rotation(e){if(isNaN(e))return;if(!this.ready)return void this._set("rotation",e);let t=this.viewpoint;Z_(t,t,e),this.viewpoint=t}get scale(){return this.ready?(this.state.commitProperty("id"),this.state.scale):this._get("scale")}set scale(e){if(!e||isNaN(e))return;if(!this.ready){this._set("scale",e),this._set("zoom",void 0);let n=this._get("extent");return void(n&&(this._set("extent",void 0),this._set("center",n.center)))}let t=this.viewpoint;hu(t,t,e),this.viewpoint=t}get viewpoint(){return this.ready?this.state.paddedViewState.viewpoint.clone():this._get("viewpoint")}set viewpoint(e){if(e==null)return;if(!this.ready)return this._set("viewpoint",e),this._set("extent",void 0),this._set("center",void 0),this._set("zoom",void 0),void this._set("scale",void 0);let t,n;try{t=this._project(e,this.state.spatialReference),!e.scale||isNaN(e.scale)?n=new ne("mapview:invalid-viewpoint",`invalid scale value of ${e.scale}`):e.targetGeometry==null&&(n=new ne("mapview:invalid-viewpoint","geometry not defined"))}catch(o){n=new ne("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:o})}if(n)return void Z.getLogger(this).error(n);this._scaleBeforeChangingSpatialReference=null;let i=new ci({targetGeometry:new Fe,scale:0,rotation:0});vi(i,t),this.constraints?.constrain(i,this.state.paddedViewState.viewpoint),this.state.viewpoint=i,this._set("viewpoint",i)}get zoom(){return this.ready?this.constraints?.scaleToZoom(this.scale)??-1:this._get("zoom")}set zoom(e){if(!(e>=0))return;if(!this.ready){this._set("zoom",e),this._set("scale",void 0);let i=this._get("extent");return void(i&&(this._set("extent",void 0),this._set("center",i.center)))}let t=this.constraints?.zoomToScale(e)??0;if(!t)return void this._set("zoom",-1);let n=this.viewpoint;hu(n,n,t),this.viewpoint=n,this._set("zoom",this.constraints?.scaleToZoom(this.scale)??-1)}getUserStartupOptions(e){if(!e[0]&&!e[1])return{center:void 0,rotation:void 0,scale:void 0};let{padding:t,constraints:n}=this,i=this._get("center"),o=this._get("extent"),s=this._get("scale"),r=this._get("rotation"),a=this._get("viewpoint"),c=this._get("zoom"),u=c!=null&&n!=null&&n.zoomToScale(c)||void 0,p,h,m,f=a?.rotation,S=a?.targetGeometry;S?.type==="extent"?p=S:S?.type==="point"&&(h=S,m=a?.scale);let A=o??p;return{center:i??h??A?.center,rotation:r??f,scale:(s??u??m??(A&&Pl(A,[e[0]-t.left-t.right,e[1]-t.top-t.bottom])))||void 0}}startup(e,t,n,i){let o=e.targetGeometry;try{this._project(e,n)}catch(s){Z.getLogger(this).warn(new $d("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:o.toJSON(),spatialReference:n,error:s})),e.targetGeometry=i||new Fe({x:0,y:0,spatialReference:n})}this.constraints?.fit(e),this._set("state",new Ks({padding:this.padding,size:t,viewpoint:e})),this._set("ready",!0)}teardown(){this._set("ready",!1);let{center:[e,t],spatialReference:n,rotation:i,scale:o}=this.state.paddedViewState,s=new Fe({x:e,y:t,spatialReference:n});this._set("viewpoint",null),this._set("extent",null),this._set("center",s),this._set("zoom",-1),this._set("rotation",i),this._set("scale",o),this._set("state",null)}changeSpatialReference(e){let t=this.state.paddedViewState.clone();if(this._scaleBeforeChangingSpatialReference==null)this._scaleBeforeChangingSpatialReference=t.scale;else{let a=t.viewpoint.clone();a.scale=this._scaleBeforeChangingSpatialReference,t.viewpoint=a}let n=t.clone(),[i,o]=t.center,s=null;try{s=this._project(new Fe({x:i,y:o,spatialReference:t.spatialReference}),e)}catch(a){ig()||Z.getLogger(this).warn(new $d("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:s?.toJSON(),spatialReference:e,error:a}))}s||(s=new Fe({x:0,y:0,spatialReference:e}));let r=pu(new ci({targetGeometry:new Fe,scale:0,rotation:0}),t.viewpoint,s);n.viewpoint=r;try{let c=[t.size[0]/2,t.size[1]/2],u=[c[0]+20,c[1]],p=t.toMap([0,0],u),{x:h,y:m}=this._project(new Fe({x:p[0],y:p[1],spatialReference:t.spatialReference}),e);p[0]=h,p[1]=m,n.toScreen(p,p);let f=$_(c,p,u),S=Math.hypot(p[0]-c[0],p[1]-c[1])/20;!Number.isFinite(S)||Math.abs(S)>4?(r.rotation=0,r.targetGeometry=new Fe({x:0,y:0,spatialReference:e})):(r.scale*=S,r.scale>Ge("mapview-srswitch-adjust-rotation-scale-threshold")?r.rotation=0:r.rotation+=Number.isFinite(f)?f:0)}catch{}this._get("constraints")?.constrain(r,void 0),this._get("state").viewpoint=r}resize(e,t){if(!this.ready)return;let n=this.state,i=this.state.paddedViewState.viewpoint,o=this.state.paddedViewState.size.concat();n.size=[e,t],q_(i,i,o,this.state.paddedViewState.size,this.resizeAlign),i=this.constraints?.constrain(i,void 0)??i,this.state.viewpoint=i}toMap(e){if(!this.ready)return null;let t=[0,0],[n,i]=this.state.toMap(t,[e.x,e.y]),o=this.state.spatialReference;return new Fe({x:n,y:i,spatialReference:o})}toScreen(e,t){if(!this.ready)return null;let n=this._project(e,this.state.spatialReference),i=[n.x,n.y];return t?.pickClosestTarget===!1||this.state.paddedViewState.wrapMapCoordinate(i,i),this.state.toScreen(i,i),me(i[0],i[1])}_project(e,t){let n=e?.targetGeometry||e;if(!t)return e;if(!n)return null;if(t.imageCoordinateSystem||n.spatialReference?.imageCoordinateSystem||Es(t,n.spatialReference))return e;let i=Yn(n,t);if(!i)throw new ne("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:n,spatialReference:t});return NT(e)?(e.targetGeometry=i,e):i}};function NT(e){return e?.declaredClass==="esri.Viewpoint"}l([d({type:Fe})],At.prototype,"center",null),l([d()],At.prototype,"constraints",void 0),l([d({type:Ki})],At.prototype,"extent",null),l([d({value:{top:0,right:0,bottom:0,left:0},cast:e=>v({top:0,right:0,bottom:0,left:0},e)})],At.prototype,"padding",null),l([d()],At.prototype,"ready",void 0),l([d()],At.prototype,"resizeAlign",void 0),l([d({readOnly:!0})],At.prototype,"resolution",null),l([d({type:Number})],At.prototype,"rotation",null),l([d({type:Number})],At.prototype,"scale",null),l([d({readOnly:!0})],At.prototype,"state",void 0),l([d({type:ci})],At.prototype,"viewpoint",null),l([d()],At.prototype,"zoom",null),At=l([b("esri.views.2d.ViewStateManager")],At);function er(e,t){switch(t){case"primary":return e.pointerType==="touch"||e.button===0;case"secondary":return e.pointerType!=="touch"&&e.button===2;case"tertiary":return e.pointerType!=="touch"&&e.button===1}}var Da=class extends le{constructor(t,n){super(!0),this._view=t,this.registerIncoming("double-click",n,i=>this._handleDoubleClick(i,n))}_handleDoubleClick(t,n){er(t.data,"primary")&&(t.stopPropagation(),n?this._view.mapViewNavigation.zoomOut([t.data.x,t.data.y]):this._view.mapViewNavigation.zoomIn([t.data.x,t.data.y]))}};var vc=class extends le{constructor(t,n,i){super(!0),this.view=t,this.pointerType=n,this.registerIncoming("double-tap-drag",i,o=>this._handleDoubleTapDrag(o))}_handleDoubleTapDrag(t){let{data:n}=t,{pointerType:i}=n;if(i!==this.pointerType)return;t.stopPropagation();let{action:o,delta:s}=n,{view:r}=this,{mapViewNavigation:a}=r;switch(o){case"begin":{let{scale:c}=r;this._startScale=c,this._currentScale=c,this._previousDelta=s,a.begin();break}case"update":{if(this._previousDelta.y===s.y)return;this._previousDelta=s;let c=1.015**s.y,u=this._startScale*c,p=u/this._currentScale;a.setViewpointImmediate(p),this._currentScale=u;break}case"end":{let{constraints:c}=r,{effectiveLODs:u,snapToZoom:p}=c;if(!p||!u)return void a.end();let h=c.snapScale(this._currentScale),m=(s.y>0?Math.max(h,c.snapToPreviousScale(this._startScale)):Math.min(h,c.snapToNextScale(this._startScale)))/this._currentScale;a.zoom(m).then(()=>{a.end()});break}}}};var en=class{constructor(t){this._callbacks=t,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(t){let n=t.data,i=n.pointers.size;switch(n.action){case"start":this._currentCount=i,this._emitStart(t);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=i,this._emitStart(t);break;case"update":this._emitUpdate(t);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=i,this._emitStart(t);break;case"end":this._emitEnd(t),this._currentCount=0}this._previousEvent=t}_emitStart(t){this._startEvent=t,this._callbacks.condition?.(this._currentCount,t)&&this._callbacks.start(this._currentCount,t,this._startEvent)}_emitUpdate(t){this._callbacks.condition?.(this._currentCount,t)&&this._callbacks.update(this._currentCount,t,this._startEvent)}_emitEnd(t){this._callbacks.condition?.(this._currentCount,t)&&this._callbacks.end(this._currentCount,t,this._startEvent),this._startEvent=null}};var bc=class extends le{constructor(t,n,i){super(!0),this.view=t,this.pointerAction=n,this.registerIncoming("drag",i,o=>this._handleDrag(o)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(t){super.onInstall(t),this._dragEventSeparator=new en({start:(n,i)=>{this.view.mapViewNavigation.pan.begin(this.view,i.data),i.stopPropagation()},update:(n,i)=>{this.view.mapViewNavigation.pan.update(this.view,i.data),i.stopPropagation()},end:(n,i)=>{this.view.mapViewNavigation.pan.end(this.view,i.data),i.stopPropagation()},condition:(n,i)=>n===1&&er(i.data,this.pointerAction)})}_handleDrag(t){let n=this.view.mapViewNavigation;n.pinch.zoomMomentum||n.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(t)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}};var wc=class extends le{constructor(t,n,i){super(!0),this._view=t,this.pointerAction=n;let o=this._view.mapViewNavigation;this._dragEventSeparator=new en({start:(s,r)=>{o.rotate.begin(this._view,r.data),r.stopPropagation()},update:(s,r)=>{o.rotate.update(this._view,r.data),r.stopPropagation()},end:(s,r)=>{o.rotate.end(),r.stopPropagation()},condition:(s,r)=>s===1&&er(r.data,this.pointerAction)}),this.registerIncoming("drag",i,s=>this._dragEventSeparator.handle(s))}};function Hi(e){let t=e*e;return e<0&&(t*=-1),t}function mv(e){return e.translation[0]=0,e.translation[1]=0,e.translation[2]=0,e.heading=0,e.tilt=0,e}function fv(e,t,n){let i=n,o=e.state,s=e.device,r=t.tiltDirection==="forward-down"?1:-1,a=1;return s.deviceType==="standard"?(i.translation[0]=Hi(o.axes[0]),i.translation[1]=Hi(o.axes[1]),i.translation[2]=Hi(o.buttons[7])-Hi(o.buttons[6]),i.heading=Hi(o.axes[2]),i.tilt=Hi(o.axes[3])):s.deviceType==="spacemouse"&&(i.translation[0]=1.2*Hi(o.axes[0]),i.translation[1]=1.2*Hi(o.axes[1]),i.translation[2]=2*-Hi(o.axes[2]),i.heading=1.2*Hi(o.axes[5]),i.tilt=1.2*Hi(o.axes[3])),i.tilt*=r,_g(i.translation,i.translation,a),i}function gv(e){return e.translation[0]===0&&e.translation[1]===0&&e.translation[2]===0&&e.heading===0&&e.tilt===0&&e.zoom===0}var Cc=class extends le{constructor(t){super(!0),this._view=t,this._frameTask=null,this._watchHandles=new ll,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",n=>this._handleGamePadEvent(n)),this._handle.pause()}onInstall(t){super.onInstall(t),this._watchHandles.add([x(()=>this._view.navigation.gamepad?.enabled,n=>{n?(this._handle.resume(),this._frameTask||(this._frameTask=Ri({update:i=>this._frameUpdate(i.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},ie)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(t){let n=this._view.navigation.gamepad.device;n&&t.data.device!==n||this._currentDevice&&this._currentDevice!==t.data.device||(t.data.action==="end"?(this._currentDevice=null,mv(this._transformation)):(this._currentDevice=t.data.device,fv(t.data,this._view.navigation.gamepad,this._transformation)))}_frameUpdate(t){let n=this._transformation;if(gv(n))return;let i=this._view.viewpoint.clone(),o=this._view.navigation.gamepad.velocityFactor,s=HT*o*t;K_(i,i,[n.translation[0]*s,-n.translation[1]*s]);let r=1+n.translation[2]*BT*t,a=this._view.constraints.rotationEnabled?-n.heading*VT*t:0,c=this._view.size,u=[c[0]/2,c[1]];Y_(i,i,r,a,u,c);let p=this._view.constraints.constrain(i,this._view.viewpoint);this._view.viewpoint=p}},VT=.06,HT=.7,BT=6e-4;function Sc(e){let t=()=>e(document.visibilityState==="visible");return document.addEventListener("visibilitychange",t),$t(()=>document.removeEventListener("visibilitychange",t))}var Tc=class extends le{constructor(t,n,i){super(!0),this.view=t,this.keys=n,this._isSticky=!1,this._pressedKeys=new Set,this._timeout=void 0,this._currentDirection=void 0,this._stickyKeyDuration=200,this._handleKey=o=>{let s=this._keyMap[o.data.key];if(o.modifiers.has("Meta")||o.modifiers.has("Control"))return void this._stopMovement();if(s==null)return;o.stopPropagation(),o.preventDefault();let r=o.type==="key-down";if(this._pressedKeys[r?"add":"delete"](s),r){if(this._direction===s)return;this._direction=s,this._isSticky=!1,this._setTimeout(()=>{this._isSticky&&this._handlePopKey()})}else{let a=this._timeout===void 0,c=this._pressedKeys.size>0;a||c?this._handlePopKey():this._isSticky=!0}},this._handlePopKey=()=>{this._direction=Array.from(this._pressedKeys).pop(),this._direction==null&&this._stopMovement()},this._stopMovement=()=>{this._isSticky=!1,this._direction=void 0,this._pressedKeys.clear(),this._setTimeout(void 0)},this._keyMap={[n.left]:"left",[n.right]:"right",[n.up]:"up",[n.down]:"down"},this.registerIncoming("key-down",i,this._handleKey),this.registerIncoming("key-up",i,this._handleKey),this.registerIncoming("blur",i,this._stopMovement),this._visibilityHandle=Sc(o=>o?null:this._stopMovement())}onUninstall(){this._stopMovement(),this._visibilityHandle?.remove()}get _direction(){return this._currentDirection}set _direction(t){let n=this._currentDirection!=null;if(t!=null){if(n||this.view.mapViewNavigation.begin(),this._currentDirection!==t)switch(t){case"left":this.view.mapViewNavigation.continuousPanLeft();break;case"right":this.view.mapViewNavigation.continuousPanRight();break;case"up":this.view.mapViewNavigation.continuousPanUp();break;case"down":this.view.mapViewNavigation.continuousPanDown()}}else n&&this.view.mapViewNavigation.stop();this._currentDirection=t}_setTimeout(t){clearTimeout(this._timeout),this._timeout=t===void 0?void 0:setTimeout(()=>{this._timeout=void 0,t()},this._stickyKeyDuration)}};var Mc=class extends le{constructor(t,n,i){super(!0),this.view=t,this.keys=n,this._pressed=!1,this._keyToDirection={[n.clockwiseOption1]:"clockwise",[n.clockwiseOption2]:"clockwise",[n.counterClockwiseOption1]:"counterClockwise",[n.counterClockwiseOption2]:"counterClockwise",[n.resetOption1]:"reset",[n.resetOption2]:"reset"},this.registerIncoming("key-down",i,o=>this._handleKeyDown(o)),this.registerIncoming("key-up",i,o=>this._handleKeyUp(o)),this.registerIncoming("blur",i,()=>this._handleStop()),this._visibilityHandle=Sc(o=>o?null:this._handleStop())}onUninstall(){this._visibilityHandle?.remove(),this._handleStop()}_handleKeyDown(t){t.data.repeat||this._handleKey(t,!0)}_handleKeyUp(t){this._handleKey(t,!1)}_handleStop(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(t,n){let i=t.modifiers;if(i.size>0&&!i.has("Shift")||!this.view.constraints.rotationEnabled)return;let o=this._keyToDirection[t.data.key];if(this._pressed=o!=null,this._pressed){if(t.preventDefault(),n)switch(this.view.mapViewNavigation.begin(),o){case"clockwise":this.view.mapViewNavigation.continuousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continuousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();t.stopPropagation()}}};var tr;(function(e){e[e.IN=0]="IN",e[e.OUT=1]="OUT"})(tr||(tr={}));var Dc=class extends le{constructor(t,n,i){super(!0),this.view=t,this.keys=n,this._keysToZoomAction={},this.registerIncoming("key-down",i,o=>this._handleKeyDown(o)),n.zoomIn.forEach(o=>this._keysToZoomAction[o]=tr.IN),n.zoomOut.forEach(o=>this._keysToZoomAction[o]=tr.OUT)}_handleKeyDown(t){this._handleKey(t)}_handleKey(t){let n=t.modifiers;if(n.size>0&&!n.has("Shift"))return;let{key:i}=t.data;if(!(i in this._keysToZoomAction))return;let o=this._keysToZoomAction[i],{mapViewNavigation:s}=this.view,r=null;switch(o){case tr.IN:r=s.zoomIn();break;case tr.OUT:r=s.zoomOut();break;default:return}s.begin(),r.then(()=>s.end()),t.stopPropagation()}};var GT=.6,Ec=class extends le{constructor(t,n){super(!0),this._view=t,this._canZoom=!0,this.registerIncoming("mouse-wheel",n,i=>this._handleMouseWheel(i))}_handleMouseWheel(t){if(!this._view.navigation.mouseWheelZoomEnabled||(t.preventDefault(),t.stopPropagation(),!this._canZoom))return;let n=this._view.mapViewNavigation,{x:i,y:o,deltaY:s}=t.data,r=1/GT**(1/60*s),a=n.zoom(r,[i,o]);a&&(this._canZoom=!1,a.catch(()=>{}).then(()=>{this._canZoom=!0,n.end()}))}};var Ic=class extends le{constructor(t){super(!0),this.view=t,this.registerIncoming("drag",i=>this._handleDrag(i)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());let n=this.view.mapViewNavigation;this._dragEventSeparator=new en({start:(i,o)=>{n.pinch.begin(this.view,o.data),o.stopPropagation()},update:(i,o)=>{n.pinch.update(this.view,o.data),o.stopPropagation()},end:(i,o)=>{n.pinch.end(this.view),o.stopPropagation()},condition:i=>i>=2})}_handleDrag(t){this._dragEventSeparator.handle(t)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}};function nh(e){let t=e.native;return t?{buttons:t.buttons.map(n=>n.pressed?n.value||1:0),axes:t.axes.map(n=>jT(n,e.axisThreshold))}:{buttons:[],axes:[]}}function _v(e,t){if(e.axes.length!==t.axes.length||e.buttons.length!==t.buttons.length)return!1;for(let n=0;n<e.axes.length;n++)if(e.axes[n]!==t.axes[n])return!1;for(let n=0;n<e.buttons.length;n++)if(e.buttons[n]!==t.buttons[n])return!1;return!0}function yv(e){for(let t=0;t<e.axes.length;t++)if(e.axes[t]!==0)return!1;for(let t=0;t<e.buttons.length;t++)if(e.buttons[t]!==0)return!1;return!0}function jT(e,t){let n=Math.abs(e);return n<t?0:Math.sign(e)*(n-t)/(1-t)}var xc=class{constructor(t,n){this._element=t,this._input=n,this._hasEventListeners=!1,this._onConnectGamepad=s=>{this._connectGamepad(s.gamepad)},this._onDisconnectGamepad=s=>{let r=s.gamepad,a=r.index,c=this._inputDevices[a];c&&(this._emitGamepadEvent(r,nh(c),!1),this._inputDevices.splice(a,1),this._latestUpdate.splice(a,1),this._input.gamepad.devices.remove(c),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;let i="getGamepads"in window.navigator,o=window.isSecureContext;this.supported=i&&o,this.supported&&(vv(s=>this._connectGamepad(s)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(t){this._hasEventListeners!==t&&(this._hasEventListeners=t,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(t){this._callback=t}_connectGamepad(t){let n=new Zs(t);n.deviceType!=="unknown"&&(this._inputDevices[t.index]=n,this._input.gamepad.devices.add(n)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this._frameTask==null&&(this._frameTask=Ri({update:()=>this._readGamepadState()}))}_stopPolling(){this._frameTask!=null&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){let t=document.hasFocus(),n=this._element.contains(document.activeElement),i=this._input.gamepad.enabledFocusMode==="document"&&!t||this._input.gamepad.enabledFocusMode==="view"&&!n;vv(o=>{let s=this._inputDevices[o.index];if(!s)return;let r=this._latestUpdate[o.index],a=nh(s),c=i||yv(a);r&&(r.timestamp===o.timestamp||!r.active&&c||_v(r.state,a))||this._emitGamepadEvent(o,a,!c)})}_emitGamepadEvent(t,n,i){let o=this._latestUpdate[t.index],s=o&&o.active;if(!s&&!i)return;let r=!s&&i?"start":s&&i?"update":"end";this._latestUpdate[t.index]={timestamp:t.timestamp,state:n,active:i},this._callback&&this._callback({device:this._inputDevices[t.index],state:n,action:r})}};function UT(e){if(!e||!e.connected)return!1;for(let t=0;t<e.axes.length;t++)if(isNaN(e.axes[t]))return!1;return!0}function vv(e){let t=window.navigator.getGamepads();for(let n=0;n<t.length;n++){let i=t[n];UT(i)&&e(i)}}var bv=Ge("edge"),zT=Ge("chrome"),$T=Ge("ff"),WT=Ge("safari"),wv="esri-view-surface",ir={touchNone:`${wv}--touch-none`,touchPan:`${wv}--touch-pan`},Cv=(()=>{class e{constructor(n,i){this._input=i,this._active={},this._callback=()=>{},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=n,n.getAttribute("tabindex")||n.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new xc(n,this._input),this._gamepadSource.onEvent=o=>this._callback("gamepad",o)}destroy(){this._callback=()=>{},this.activeEvents=null,this._activePointerCaptures.forEach(n=>{this._releasePointerCaptureSafe(n)}),this._gamepadSource=se(this._gamepadSource),this._activePointerCaptures=null,this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(n){this._browserTouchPanningEnabled=n,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(n){this._callback=n}set activeEvents(n){for(let i in this._active)if(!n||!n.has(i)){let o=this._active[i];this._element.removeEventListener(oh[i],o),delete this._active[i]}n&&n.forEach(i=>{if(!this._active[i]&&oh[i]){let o=(this._eventHandlers[i]||this._handleDefault).bind(this,i);this._element.addEventListener(oh[i],o),this._active[i]=o}}),this._gamepadSource.hasEventListeners=n?.has("gamepad")??!1}setPointerCapture(n,i){i?this._setPointerCatpureSafe(n.pointerId):(this._releasePointerCaptureSafe(n.pointerId),this._activePointerCaptures.delete(n.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?ir.touchNone:ir.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?ir.touchPan:ir.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(ir.touchNone),this._element.classList.remove(ir.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_setPointerCatpureSafe(n){try{this._element.setPointerCapture(n),this._activePointerCaptures.add(n)}catch{}}_releasePointerCaptureSafe(n){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(n))return;this._element.releasePointerCapture(n)}catch{}}_updateNormalizedPointerLikeEvent(n,i){let o=k_(this._element,n);return e.test.disableSubpixelCoordinates&&(o.x=Math.round(o.x),o.y=Math.round(o.y)),i.x=o.x,i.y=o.y,i}_handleKey(n,i){let{key:o}=i;o&&n==="key-up"&&this._keyDownState.delete(o);let s={native:i,key:o,repeat:!!o&&this._keyDownState.has(o)};o&&n==="key-down"&&this._keyDownState.add(s.key),this._callback(n,s)}_handlePointer(n,i){let o=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});this._callback(n,o)}_handlePointerPreventDefault(n,i){let o=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});i.preventDefault(),this._callback(n,o)}_handleMouseWheel(n,i){let o=i.deltaY;switch(i.deltaMode){case 0:bv&&(o=o/document.documentElement.clientHeight*600);break;case 1:o*=30;break;case 2:o*=900}bv?o*=.7:zT||WT?o*=.6:$T&&(o*=1.375);let s=100,r=Math.abs(o);r>s&&(o=o/r*200/(1+Math.exp(-.02*(r-s))));let a=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,deltaY:o});this._callback(n,a)}_handlePointerCaptureLost(n,i){this._activePointerCaptures.delete(i.pointerId),this._handleDefault(n,i)}_handleDefault(n,i){let o={native:i};i.preventDefault(),this._callback(n,o)}_preventAltKeyDefault(n){n.key==="Alt"&&n.preventDefault()}_preventMultiTouchPanning(n){n.touches.length>1&&n.preventDefault()}}return e.test={disableSubpixelCoordinates:!1},e})(),oh={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};var Oc=class extends le{constructor(){super(!0),this.registerIncoming("context-menu",t=>{t.data.native.preventDefault()})}};var Ke={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500,maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};function Ao(e,t){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)}function Sv(e,t){let n=t.x-e.x,i=t.y-e.y;return Math.sqrt(n*n+i*i)}function Tv(e,t){if(t?(t.radius=0,t.center.x=0,t.center.y=0):t={radius:0,center:me()},e.length===0)return t;if(e.length===1)return t.center.x=e[0].x,t.center.y=e[0].y,t;if(e.length===2){let[q,j]=e,[Q,X]=[j.x-q.x,j.y-q.y];return t.radius=Math.sqrt(Q*Q+X*X)/2,t.center.x=(q.x+j.x)/2,t.center.y=(q.y+j.y)/2,t}let n=0,i=0;for(let q=0;q<e.length;q++)n+=e[q].x,i+=e[q].y;n/=e.length,i/=e.length;let o=e.map(q=>q.x-n),s=e.map(q=>q.y-i),r=0,a=0,c=0,u=0,p=0,h=0,m=0;for(let q=0;q<o.length;q++){let j=o[q],Q=s[q],X=j*j,ce=Q*Q;r+=X,a+=ce,c+=j*Q,u+=X*j,p+=ce*Q,h+=j*ce,m+=Q*X}let f=.5*(u+h),S=.5*(p+m),A=r*a-c*c,H=(f*a-S*c)/A,N=(r*S-c*f)/A,K=me(H+n,N+i);return{radius:Math.sqrt(H*H+N*N+(r+a)/e.length),center:K}}function tn(e){let{native:t}=e,{pointerId:n,button:i,pointerType:o}=t;return o==="mouse"?`${n}:${i}`:`${o}`}var kc=class extends le{constructor(t=Ke.maximumDoubleClickDelay,n=Ke.maximumDoubleClickDistance,i=Ke.maximumDoubleTouchDelay,o=Ke.maximumDoubleTouchDistance,s=Yi){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=n,this._maximumDoubleTouchDelay=i,this._maximumDoubleTouchDistance=o,this._clock=s,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=me(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new en({start:(r,a)=>this._dragStart(r,a),update:(r,a)=>this._dragUpdate(a),end:(r,a)=>this._dragEnd(a)}),this.registerIncoming("drag",r=>this._dragEventSeparator.handle(r)),this.registerIncoming("pointer-down",r=>this._handlePointerDown(r)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(t=>{t.doubleTapTimeout=Me(t.doubleTapTimeout)})}get hasPendingInputs(){return Wn(this._pointerState,t=>t.doubleTapTimeout!=null)}_clearPointerDown(t){let n=this._pointerState.get(t);n&&(n.doubleTapTimeout=Me(n.doubleTapTimeout),this._pointerState.delete(t),this.refreshHasPendingInputs())}_dragStart(t,n){if(!this._doubleTapDragReady||t!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;let{data:i,modifiers:o}=n,{center:s}=i;this._dragStartCenter=s;let r=sh("begin",me(0,0),i);this._doubleTapDrag.emit(r,void 0,o),n.stopPropagation()}_dragUpdate(t){if(!this._doubleTapDragActive)return;let{data:n,modifiers:i}=t,{center:o}=n,s=sh("update",me(o.x-this._dragStartCenter.x,o.y-this._dragStartCenter.y),n);this._doubleTapDrag.emit(s,void 0,i),t.stopPropagation()}_dragEnd(t){if(!this._doubleTapDragActive)return;let{data:n,modifiers:i}=t,{center:o}=n,s=sh("end",me(o.x-this._dragStartCenter.x,o.y-this._dragStartCenter.y),n);this._doubleTapDrag.emit(s,void 0,i),this._doubleTapDragActive=!1,t.stopPropagation()}_handlePointerDown(t){let{data:n}=t,i=tn(n),o=this._pointerState.get(i),{pointerType:s}=n.native;if(o){let r=s==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;this._clearPointerDown(i),Ao(o.event.data,n)>r?this._storePointerDown(t):this._doubleTapDragReady=!0}else this._storePointerDown(t)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(t){let{data:n}=t,{pointerType:i}=n.native,o=tn(n),s=i==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,r=this._clock.setTimeout(()=>this._clearPointerDown(o),s);this._pointerState.set(o,{event:t,doubleTapTimeout:r}),this.refreshHasPendingInputs()}};function sh(e,t,n){let{button:i,buttons:o,pointer:s,pointers:r,pointerType:a,timestamp:c}=n;return{action:e,delta:t,button:i,buttons:o,pointer:s,pointers:r,pointerType:a,timestamp:c}}var Pc=class extends le{constructor(t){super(!1),this._navigationTouch=t,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(t,n,i,o){return{action:t,pointerType:this._pointerType,button:this._mouseButton,buttons:n.buttons,timestamp:o,pointers:qT(this._activePointerMap),pointer:n,angle:i.angle,radius:i.radius,center:i.center}}_addPointer(t){let n=t.native.pointerId,i=Ac(this._activePointerMap).angle,o={event:t,initialAngle:0,lastAngle:0};this._activePointerMap.set(n,o);let s=Fc(o,Dv(this._activePointerMap));o.initialAngle=s,o.lastAngle=s,this._updatePointerAngles(i)}_updatePointer(t){if(t&&t.x==null&&t.y==null)return;let n=t.native.pointerId,i=this._activePointerMap.get(n);i?i.event=t:this._addPointer(t)}_removePointer(t){let n=Ac(this._activePointerMap).angle;this._activePointerMap.delete(t),this._updatePointerAngles(n)}_updatePointerAngles(t){let n=Ac(this._activePointerMap);this._activePointerMap.forEach(i=>{i.initialAngle=Fc(i,n)-t,i.lastAngle=Fc(i,n)-t})}_emitEvent(t,n,i){let o=Ac(this._activePointerMap);this._drag.emit(this._createPayload(t,n,o,i),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(t){let n=t.data.native.pointerId,i=t.timestamp;this._activePointerMap.get(n)&&(this._activePointerMap.size===1?(this._updatePointer(t.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",t.data,i),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(n)):(this._removePointer(n),this._emitEvent("removed",t.data,t.timestamp)))}_handlePointerDrag(t){let n=t.data,i=n.currentEvent,o=t.timestamp;switch(n.action){case"start":case"update":this._isDragging?this._activePointerMap.has(i.native.pointerId)?(this._updatePointer(i),!this._isCurrentDragSuppressed&&this._emitEvent("update",i,o)):(this._addPointer(i),this._emitEvent("added",i,o),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(i),this._pointerType=t.data.startEvent.pointerType,this._mouseButton=t.data.startEvent.button,this._startStateModifiers=t.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",i,o))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&this._pointerType==="touch"&&this._activePointerMap.size===1}};function Dv(e){let t=[];return e.forEach(n=>{t.push(me(n.event.x,n.event.y))}),Tv(t)}function Ac(e){let t=Dv(e),n=0;return e.forEach(i=>{let o=Fc(i,t),s=o-i.lastAngle;for(;s>Math.PI;)s-=2*Math.PI;for(;s<-Math.PI;)s+=2*Math.PI;o=i.lastAngle+s,i.lastAngle=o;let r=o-i.initialAngle;n+=r}),n/=e.size||1,{angle:n,radius:t.radius,center:t.center}}function qT(e){let t=new Map;return e.forEach((n,i)=>t.set(i,n.event)),t}function Fc(e,t){let n=e.event,i=n.x-t.center.x,o=n.y-t.center.y;return Math.atan2(o,i)}var Mv;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right",e[e.Back=3]="Back",e[e.Forward=4]="Forward",e[e.Undefined=-1]="Undefined"})(Mv||(Mv={}));var Rc=class extends le{constructor(t=Ke.maximumDoubleClickDelay,n=Ke.maximumDoubleClickDistance,i=Ke.maximumDoubleTouchDelay,o=Ke.maximumDoubleTouchDistance,s=Yi){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=n,this._maximumDoubleTouchDelay=i,this._maximumDoubleTouchDistance=o,this._clock=s,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach(t=>{t.immediateDoubleClick&&t.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(t){let n=t.data,i=tn(n);if(!this._pointerState.has(i)){let o={downButton:n.native.button,x:n.x,y:n.y,immediateDoubleClick:null};this._pointerState.set(i,o),this.startCapturingPointer(n.native)}}_handlePointerUp(t){let n=t.data,i=tn(n),o=this._pointerState.get(i);if(o&&o.downButton===n.native.button){let s=o.immediateDoubleClick,r=t.data.native.pointerType==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;s?(s.timeoutHandle.remove(),Ao(s,t.data)>r?this._startImmediateDoubleClick(t,o):(this._immediateDoubleClick.emit(t.data,void 0,s.modifiers),this._removeState(n))):Ao(o,t.data)>r?this._removeState(n):this._startImmediateDoubleClick(t,o)}}_startImmediateDoubleClick(t,n){let i=t.data.native.pointerType==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay;n.immediateDoubleClick={x:t.data.x,y:t.data.y,modifiers:t.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(t.data),i)}}_removeState(t){let n=tn(t);this._pointerState.delete(n),this.stopCapturingPointer(t.native),this.refreshHasPendingInputs()}};var Nc=class extends le{constructor(t=Ke.maximumClickDelay,n=Ke.movementUntilMouseDrag,i=Ke.movementUntilPenDrag,o=Ke.movementUntilTouchDrag,s=Ke.holdDelay,r=Yi){super(!1),this._maximumClickDelay=t,this._movementUntilMouseDrag=n,this._movementUntilPenDrag=i,this._movementUntilTouchDrag=o,this._holdDelay=s,this._clock=r,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",a=>{this._handlePointerLoss(a,"pointer-up")}),this.registerIncoming("pointer-capture-lost",a=>{this._handlePointerLoss(a,"pointer-capture-lost")}),this.registerIncoming("pointer-cancel",a=>{this._handlePointerLoss(a,"pointer-cancel")}),this._moveHandle=this.registerIncoming("pointer-move",this._handlePointerMove.bind(this)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(t=>{t.holdTimeout=Me(t.holdTimeout)}),super.onUninstall()}_handlePointerDown(t){let n=t.data,i=n.native.pointerId,o=null;this._pointerState.size===0&&(o=this._clock.setTimeout(()=>{let r=this._pointerState.get(i);if(r){if(!r.isDragging){let a=r.previousEvent;this._pointerHold.emit(a,void 0,t.modifiers),r.holdEmitted=!0}r.holdTimeout=null}},this._holdDelay));let s={startEvent:n,previousEvent:n,startTimestamp:t.timestamp,isDragging:!1,downButton:n.native.button,holdTimeout:o,modifiers:new Set};this._pointerState.set(i,s),this.startCapturingPointer(n.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(t)}_handlePointerMove(t){let n=t.data,i=n.native.pointerId,o=this._pointerState.get(i);o&&(o.isDragging?this._pointerDrag.emit(Lc("update",o,n),void 0,o.modifiers):Sv(n,o.startEvent)>this._getDragThreshold(n.native.pointerType)&&this._startDragging(t),o.previousEvent=n)}_getDragThreshold(t){switch(t){case"touch":return this._movementUntilTouchDrag;case"pen":return this._movementUntilPenDrag;default:return this._movementUntilMouseDrag}}_startDragging(t){let n=t.data,i=n.native.pointerId;this._pointerState.forEach(o=>{o.holdTimeout!=null&&(o.holdTimeout.remove(),o.holdTimeout=null),o.isDragging||(o.modifiers=t.modifiers,o.isDragging=!0,i===o.startEvent.native.pointerId?this._pointerDrag.emit(Lc("start",o,n)):this._pointerDrag.emit(Lc("start",o,o.previousEvent),t.timestamp))})}_handlePointerLoss(t,n){let i=t.data,o=i.native.pointerId,s=this._pointerState.get(o);s&&(s.holdTimeout!=null&&(s.holdTimeout.remove(),s.holdTimeout=null),s.isDragging?this._pointerDrag.emit(Lc("end",s,n==="pointer-up"?i:s.previousEvent),void 0,s.modifiers):n==="pointer-up"&&s.downButton===i.native.button&&t.timestamp-s.startTimestamp<=this._maximumClickDelay&&!s.holdEmitted&&this._immediateClick.emit(i),this._pointerState.delete(o),this.stopCapturingPointer(i.native),this._pointerState.size===0&&this._moveHandle.pause())}};function Lc(e,t,n){return{action:e,startEvent:t.startEvent,previousEvent:t.previousEvent,currentEvent:n}}var Vc=class extends le{constructor(t=Ke.maximumDoubleClickDelay,n=Ke.maximumDoubleClickDistance,i=Ke.maximumDoubleTouchDelay,o=Ke.maximumDoubleTouchDistance,s=Yi){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=n,this._maximumDoubleTouchDelay=i,this._maximumDoubleTouchDistance=o,this._clock=s,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",this._handleImmediateClick.bind(this)),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this))}onUninstall(){this._pointerState.forEach(t=>t.doubleClickTimer=Me(t.doubleClickTimer))}get hasPendingInputs(){return Wn(this._pointerState,t=>t.doubleClickTimer!=null)}_clearDoubleClickTimer(t,n){let i=this._pointerState.get(t);i&&(i.doubleClickTimer=Me(i.doubleClickTimer),n&&this._click.emit(i.event.data,void 0,i.event.modifiers),this._pointerState.delete(t),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(t){let n=this._pointerState.get(t);n.pointerDownCount===1&&this._click.emit(n.event.data,void 0,n.event.modifiers),n.doubleClickTimer=null,this._pointerState.delete(t),this.refreshHasPendingInputs()}_handleImmediateClick(t){let n=t.data,{pointerType:i}=n.native,o=ZT(n);if(!this._pointerState.has(o))return void this._startClick(t);let s=this._pointerState.get(o),{data:r,modifiers:a}=s.event,c=i==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;Ao(r,n)>c?(this._clearDoubleClickTimer(o,!0),this._startClick(t)):(this._clearDoubleClickTimer(o,!1),s.pointerDownCount===2&&this._doubleClick.emit(r,void 0,a))}_handlePointerDown(t){let n=tn(t.data),i=this._pointerState.get(n);i&&(i.pointerDownCount+=1)}_startClick(t){let{data:n}=t,{native:{pointerType:i}}=n,o=tn(n),s=i==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,r=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(o),s);this._pointerState.set(o,{event:t,doubleClickTimer:r,pointerDownCount:1}),this.refreshHasPendingInputs()}};function ZT(e){let{pointerId:t,pointerType:n,button:i}=e.native;return n==="mouse"?`${t}:${i}`:`${n}`}var Hc={counter:"Control",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"}},Fo=class extends P{initialize(){let e=()=>this.view?.ready;this.addHandles([ai(()=>!e(),()=>this._disconnect()),ai(e,()=>this._connect())])}destroy(){this._disconnect()}get latestPointerType(){return this._inputManager?.latestPointerType}get latestPointerLocation(){return this._inputManager?.latestPointerLocation}get multiTouchActive(){return this._inputManager?.multiTouchActive??!1}isModifierKeyDown(e){return this._inputManager?.isModifierKeyDown(e)??!1}_disconnect(){this.view.viewEvents.disconnect(),this._inputManager=se(this._inputManager)}_connect(){let e=this.view.surface,t=new Cv(e,this.view.input),n=[new Rc,new Nc,new Vc,new Pc(this.view.navigation),new kc],i=new E_({eventSource:t,recognizers:n});i.installHandlers("prevent-context-menu",[new Oc],be.INTERNAL),i.installHandlers("navigation",[new Ic(this.view),new Cc(this.view),new Ec(this.view),new Da(this.view),new Da(this.view,[Hc.counter]),new bc(this.view,"primary"),new Tc(this.view,Hc.pan),new Dc(this.view,Hc.zoom),new Mc(this.view,Hc.rotate),new wc(this.view,"secondary"),new vc(this.view,"touch")],be.INTERNAL),this.view.viewEvents.connect(i),this._source=t,this._inputManager=i,x(()=>this.view?.navigation?.browserTouchPanEnabled,o=>{this._source&&(this._source.browserTouchPanningEnabled=!o)},ie)}get test(){}};l([d()],Fo.prototype,"view",void 0),l([d()],Fo.prototype,"latestPointerType",null),l([d()],Fo.prototype,"latestPointerLocation",null),l([d()],Fo.prototype,"multiTouchActive",null),Fo=l([b("esri.views.2d.input.MapViewInputManager")],Fo);var Ev=Fo;var Po={added:[],removed:[]},rh=new Set,YT=new Zg(0,0,0,0);function KT(e,t){let n=hl(t);if(!n)return null;let[i,o]=n.valid;return e[2]>o?[So([e[0],e[1],o,e[3]]),So([i,e[1],i+e[2]-o,e[3]])]:e[0]<i?[So([i,e[1],e[2],e[3]]),So([o-(i-e[0]),e[1],o,e[3]])]:null}var Bc=class extends Ue{constructor(t){super(),this._tiles=new Map,this._index=s_(9,Ge("esri-csp-restrictions")?n=>({minX:n.bounds[0],minY:n.bounds[1],maxX:n.bounds[2],maxY:n.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=t}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(t){return this._tiles.has(t)}get(t){return this._tiles.get(t)}getIntersectingTiles(t){if(!t||_l(t)===0||yl(t)===0)return[];let n=KT(t,this.tileScheme.spatialReference);return n!=null?[...new Set([...this.boundsIntersections(n[0]),...this.boundsIntersections(n[1])])]:this.boundsIntersections(t)}boundsIntersections(t){return this._index.search({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]})}updateTiles(t){let n={added:[],removed:[]};for(let i of t.added)if(!this.has(i)){let o=new ru(this.tileScheme,i);this._tiles.set(i,o),this._index.insert(o),n.added.push(o)}for(let i of t.removed)if(this.has(i)){let o=this.get(i);this._tiles.delete(i),this._index.remove(o),n.removed.push(o)}this.tiles.length=0,this._tiles.forEach(i=>this.tiles.push(i)),(n.added.length||n.removed.length)&&this.emit("update",n)}setViewState(t){let n=this.tileScheme.getTileCoverage(t,0);if(!n)return;let{spans:i,lodInfo:o}=n,{level:s}=o;if(i.length>0)for(let{row:r,colFrom:a,colTo:c}of i)for(let u=a;u<=c;u++){let p=YT.set(s,r,o.normalizeCol(u),o.getWorldForColumn(u)).id;if(rh.add(p),!this.has(p)){let h=new ru(this.tileScheme,p);this._tiles.set(p,h),this._index.insert(h),this.tiles.push(h),Po.added.push(h)}}for(let r=this.tiles.length-1;r>=0;r--){let a=this.tiles[r];rh.has(a.id)||(this._tiles.delete(a.id),this.tiles.splice(r,1),this._index.remove(a),Po.removed.push(a))}(Po.added.length||Po.removed.length)&&this.emit("update",Po),Yg.pool.release(n),rh.clear(),Po.added.length=0,Po.removed.length=0}};function Ov(e,t,n){return I(this,null,function*(){let i=Al(t)?kl(e,t):t;if(!e.ready||isNaN(i.x)||isNaN(i.y))return{screenPoint:i,results:[]};let o=new Set,s=new Set,r=!1,a=null,c=null;n?.include?xv(n.include,Iv(e,m=>{o.add(m),ah(m,f=>s.add(f))},(m,f)=>{s.add(m),o.add(f)},m=>{a||(a=new Set),a.add(m)},m=>o.add(m),()=>r=!0)):(r=!0,o=new Set(e.allLayerViews),o.forEach(m=>{ah(m,f=>s.add(f))})),n?.exclude&&xv(n.exclude,Iv(e,m=>{o.delete(m),ah(m,f=>s.delete(f))},m=>s.delete(m),m=>{c||(c=new Set),c.add(m)}));let u=e.toMap(i),p=e.allLayerViews.filter(m=>!m.suspended&&o.has(m)&&m.clips.every(f=>t0(e,f,i,u))).reverse(),h=[...r?e.graphicsView.hitTest(u).map(m=>({type:"graphic",graphic:m,layer:null,mapPoint:u})):[],...yield Promise.all(p.map(m=>m.hitTest(u,i)).toArray())].filter(vt).flat().filter(vt);return h=h.filter(m=>m.type!=="graphic"||m.layer?.type!=="subtype-group"||s.has(m.graphic.layer)),a&&(h=h.filter(m=>!("graphic"in m)||!m.graphic||a?.has(lh(m.graphic)))),c&&(h=h.filter(m=>!("graphic"in m)||!m.graphic||!c?.has(lh(m.graphic)))),{screenPoint:i,results:h}})}function Iv(e,t,n,i,o,s){return r=>{if(r instanceof p_){if(r.layer===e)s?.();else{let a=e.allLayerViews.find(c=>c.layer===r.layer);a&&o?.(a)}i(lh(r))}else if(!("layer"in r&&"element"in r))if(r.type==="subtype-sublayer"){let a=e.allLayerViews.find(c=>c.layer===r.parent);a&&n(r,a)}else{let a=e.allLayerViews.find(c=>c.layer===r);a&&t(a)}}}function xv(e,t){if(e)if(Ud(e))for(let n of e)if(Ud(n))for(let i of n)t(i);else t(n);else t(e)}function lh(e){let t=e.getObjectId();return t?`${e.layer?.uid??e.sourceLayer?.uid??"MapView"}/${t}`:`"MapView/${e.uid}`}function ah({layer:e},t){e?.type==="subtype-group"&&e.sublayers.forEach(n=>{t(n)})}var kv={flipY:!0,premultipliedAlpha:!0};function Av(e,t){return I(this,null,function*(){let n=yield Pv(e,t),{format:i,quality:o}=X_(t?.format,t?.quality);return Q_(n,{format:i,quality:o,rotation:0,disableDecorations:!1},kv)})}function Fv(e,t){return I(this,null,function*(){let n=yield Pv(e,t);return J_(n,kv)})}function Pv(e,t){let n=XT(t||{},JT(e.stage,e.size),e.size,e.padding),i=QT(t,e.allLayerViews);return e.stage.takeScreenshot(n,i,e.backgroundColor,t?.rotation)}function QT(e={},t){if(!e.layers)return;let n=[];return e.layers.forEach(i=>{let o=t.find(s=>s.layer.id===i.id);o?.container&&n.push(o.container)}),n}function JT(e,t){return Math.min(4,e0(t,Math.min(4096,e.context.parameters.maxTextureSize)))}function XT(e,t,n,i){e.ignorePadding&&(i={left:0,right:0,top:0,bottom:0});let o=null;e.width!=null&&e.height!=null?o=[e.width,e.height]:e.width==null&&e.height!=null?o=[e.height,e.height]:e.width!=null&&e.height==null?o=[e.width,e.width]:e.width==null&&e.height==null&&(o=null);let s=n[0]-(i.left+i.right),r=n[1]-(i.top+i.bottom),a,c,u=e.area||{x:0,y:0,width:s,height:r};if(o){let p=s/r,h=o[0]/o[1];if(h>p){let m=u.width/h;u={x:u.x,y:Math.round(u.y+(u.height-m)/2),width:u.width,height:Math.round(m)}}else{let m=u.height*h;u={x:Math.round(u.x+(u.width-m)/2),y:u.y,width:Math.round(m),height:u.height}}}else o=[u.width,u.height];return o[0]>u.width?(a=Math.min(o[0]/u.width,t),c=o[0]/u.width/a):(a=1,c=o[0]/u.width),{cropArea:{x:Math.round((u.x+i.left)*a),y:Math.round((u.y+i.top)*a),width:Math.round(u.width*a),height:Math.round(u.height*a)},outputScale:c,resolutionScale:a}}var Rv=160,nr=class extends P{constructor(){super(...arguments),this._timer=void 0}get stationary(){return!this._timer}flip(){this._timestamp=performance.now(),this._timer==null&&(this._timer=setInterval(()=>{performance.now()-this._timestamp>=Rv&&this.clear()},Rv))}clear(){this._timer&&(clearInterval(this._timer),this._timer=void 0)}};l([d()],nr.prototype,"_timer",void 0),l([d()],nr.prototype,"stationary",null),nr=l([b("esri.views.2d.support.StationaryManager")],nr);function Lv(e){let t=M_();return t.available?e==="3d"&&t.majorPerformanceCaveat?new ne("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist."):t.supportsHighPrecisionFragment?t.supportsVertexShaderSamplers?null:new ne("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new ne("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new ne("webgl:required","WebGL2 is required but not supported.",new Error().stack)}function eM(e){return e&&"nodeType"in e}function tM(e){return e&&typeof e.render=="function"}var Nv={component:"esri-component"},Ro=class extends P{constructor(){super(...arguments),this.widget=null}destroy(){this.node=null,this.widget?.destroy()}get id(){return this._get("id")??this.widget?.id??this.node?.id}set id(e){this._set("id",e)}set node(e){let t=this._get("node");e!==t&&(e&&e.classList.add(Nv.component),t&&t.classList.remove(Nv.component),this._set("node",e))}castNode(e){return this.widget?.destroy(),e?typeof e=="string"||eM(e)?(this._set("widget",null),cl(e)):(tM(e)&&!e.domNode&&(e.domNode=document.createElement("div")),this._set("widget",e),e.domNode):(this._set("widget",null),null)}};l([d()],Ro.prototype,"id",null),l([d()],Ro.prototype,"node",null),l([li("node")],Ro.prototype,"castNode",null),l([d({readOnly:!0})],Ro.prototype,"widget",void 0),Ro=l([b("esri.views.ui.Component")],Ro);var or=Ro;var iM={left:0,top:0,bottom:0,right:0},Vv={bottom:30,top:15,right:15,left:15},Mn="esri-ui",qt={ui:Mn,corner:`${Mn}-corner`,innerContainer:`${Mn}-inner-container`,manualContainer:`${Mn}-manual-container`,cornerContainer:`${Mn}-corner-container`,topLeft:`${Mn}-top-left`,topRight:`${Mn}-top-right`,bottomLeft:`${Mn}-bottom-left`,bottomRight:`${Mn}-bottom-right`};function nM(e){return e&&!e._started&&typeof e.postMixInProperties=="function"&&typeof e.buildRendering=="function"&&typeof e.postCreate=="function"&&typeof e.startup=="function"}function Gc(e){return e===0?"0":`${e}px`}function ch(e){let t=typeof e=="object"&&e!==null&&Object.getPrototypeOf(e);return(t===null||t===Object.prototype)&&("component"in e||"index"in e||"position"in e)?e:null}function dh(e,{top:t,bottom:n,left:i,right:o}){e.style.top=t,e.style.bottom=n,e.style.left=i,e.style.right=o}var nn=class extends Ue.EventedAccessor{constructor(e){super(e),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentMap=new Map,this._removeWidgetHandleKey=Symbol("componentOnRemoveSymbol"),this._locale=Uf(),this.view=null,this._applyViewPadding=()=>{let t=this.container;t&&dh(t,this._toPixelPosition(this._getViewPadding()))},this._applyUIPadding=()=>{let t=this._innerContainer;t&&dh(t,this._toPixelPosition(this.padding))},this._initContainers()}initialize(){this.addHandles([x(()=>[this.view?.padding,this.container],this._applyViewPadding,ie),x(()=>this.padding,this._applyUIPadding,ie),x(()=>[this.container,this._locale],([e,t])=>{e&&e.setAttribute("lang",t)},ie),zf(e=>{this._locale=e})])}destroy(){this.container=null;for(let e of this._components)e.destroy();this._components.length=0,this._componentMap.clear()}set container(e){let t=this._get("container");e!==t&&(e&&(e.classList.add(qt.ui),Xf(e),this._attachContainers(e)),t&&(t.classList.remove(qt.ui),dh(t,{top:"",bottom:"",left:"",right:""}),dl(t)),this._set("container",e))}get height(){let e=this.view?.height??0;if(e===0)return e;let t=this._getViewPadding(),{top:n,bottom:i}=t;return Math.max(e-n-i,0)}get padding(){return this._get("padding")}set padding(e){this._overrideIfSome("padding",e)}castPadding(e){return typeof e=="number"?{bottom:e,top:e,right:e,left:e}:v(v({},Vv),e)}get width(){let e=this.view?.width??0;if(e===0)return e;let t=this._getViewPadding(),{left:n,right:i}=t;return Math.max(e-n-i,0)}add(e,t){let n,i,o;if(Array.isArray(e))return void e.forEach(r=>this.add(r,t));let s=ch(e);s&&({index:n,position:t,component:e,key:i}=s),t&&typeof t=="object"&&({index:n,key:i,position:t,internal:o}=t),!e||t&&!this._isValidPosition(t)||this._add(e,t,n,i,o)}remove(e,t){if(!e)return;if(Array.isArray(e))return e.map(i=>this.remove(i,t));let n=this._find(e);if(n){if(this._componentMap.has(n)&&this._componentMap.get(n)?.key!==t)return;let i=this._components.indexOf(n);return n.node.parentNode?.removeChild(n.node),this._componentMap.delete(n),n.widget?.removeHandlesReference(this._removeWidgetHandleKey),this._components.splice(i,1)[0]}}empty(e,t={removeInternal:!1}){if(Array.isArray(e)){for(let o of e)this.empty(o,t);return}let n=this._positionNameToContainerLookup[e??"manual"],i=Array.prototype.slice.call(n.children).map(o=>this._findByNode(o)).filter(o=>o==null?!1:!(this._componentMap.get(o)?.internal??!1)||t.removeInternal);for(let o of i)this.remove(o)}move(e,t){if(Array.isArray(e)&&e.forEach(s=>this.move(s,t)),!e)return;let n,i=ch(e)||ch(t);if(i&&(n=i.index,t=i.position,e=i.component||e),t&&!this._isValidPosition(t))return;let o=this.remove(e);o&&this.add(o,{position:t,index:n})}find(e){if(!e)return null;let t=this._findById(e);return t&&(t.widget||t.node)}getComponents(e,t={includeInternal:!1}){return e?Array.isArray(e)?e.flatMap(n=>this._getComponentsAtPosition(n,t)):this._getComponentsAtPosition(e,t):this._components.filter(n=>t.includeInternal||!this._componentMap.get(n)?.internal).map(({widget:n,node:i})=>n??i)}getPosition(e){for(let t in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[t].contains(e))return t;return null}_add(e,t,n,i,o){e instanceof or||(e=new or({node:e}));let{widget:s}=e;s!=null&&s instanceof P&&s.addHandles($t(()=>{queueMicrotask(()=>this.remove(e))}),this._removeWidgetHandleKey),this._place({component:e,position:t,index:n}),this._components.push(e),this._componentMap.set(e,{key:i,internal:o})}_find(e){return e?e instanceof or?this._findByComponent(e):typeof e=="string"?this._findById(e):this._findByNode(e.domNode||e):null}_getViewPadding(){return this.view?.padding??iM}_attachContainers(e){e.appendChild(this._innerContainer),e.appendChild(this._manualContainer)}_initContainers(){let e=document.createElement("div");e.classList.add(qt.innerContainer,qt.cornerContainer);let t=document.createElement("div");t.classList.add(qt.innerContainer,qt.manualContainer);let n=document.createElement("div");n.classList.add(qt.topLeft,qt.corner),e.appendChild(n);let i=document.createElement("div");i.classList.add(qt.topRight,qt.corner),e.appendChild(i);let o=document.createElement("div");o.classList.add(qt.bottomLeft,qt.corner),e.appendChild(o);let s=document.createElement("div");s.classList.add(qt.bottomRight,qt.corner),e.appendChild(s),this._innerContainer=e,this._manualContainer=t;let r=Hr();this._cornerNameToContainerLookup={"top-left":n,"top-right":i,"bottom-left":o,"bottom-right":s,"top-leading":r?i:n,"top-trailing":r?n:i,"bottom-leading":r?s:o,"bottom-trailing":r?o:s},this._positionNameToContainerLookup=v({manual:t},this._cornerNameToContainerLookup)}_isValidPosition(e){return!!this._positionNameToContainerLookup[e]}_place(e){let t=e.position??"manual",{component:n,index:i}=e,o=this._positionNameToContainerLookup[t],s=i!=null&&i>-1;if(nM(n.widget)&&n.widget.startup(),!s)return void o.appendChild(n.node);let r=Array.from(o.children);if(i===0)return void(o.firstChild?qd(n.node,o.firstChild):o.appendChild(n.node));i>=r.length?o.appendChild(n.node):qd(n.node,r[i])}_toPixelPosition(e){return{top:Gc(e.top),left:Gc(e.left),right:Gc(e.right),bottom:Gc(e.bottom)}}_findByComponent(e){return this._components.find(t=>t===e)??null}_findById(e){return this._components.find(({id:t})=>t===e)??null}_findByNode(e){return this._components.find(({node:t})=>t===e)??null}_getComponentsAtPosition(e,t){let n=this._positionNameToContainerLookup[e];return Array.prototype.slice.call(n.children).map(i=>this._findByNode(i)).filter(vt).filter(i=>t.includeInternal||!this._componentMap.get(i)?.internal).map(({widget:i,node:o})=>i??o)}};l([d()],nn.prototype,"_locale",void 0),l([d()],nn.prototype,"container",null),l([d()],nn.prototype,"height",null),l([d({value:Vv})],nn.prototype,"padding",null),l([li("padding")],nn.prototype,"castPadding",null),l([d()],nn.prototype,"view",void 0),l([d()],nn.prototype,"width",null),nn=l([b("esri.views.ui.UI")],nn);var Hv=nn;var oM=new Map;function Bv(e){return oM.get(e)}function Gv(e,t){return e&&"copyright"in e&&(!t||typeof e.originOf=="function"&&e.originOf("copyright")==="user")}function sM(e,t){return e.length!==t.length||e.some((n,i)=>n.text!==t[i].text)}function Ea(e,t,n){!n||!t||e.find(i=>i.layerView===t&&i.text===n)||e.push({text:n,layerView:t})}function rM(e){return e.type==="bing-maps"}var Dn=[],sr=class extends P{constructor(e){super(e),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.removeHandles("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new Y,this.view=null,this._allLayerViewsChange=t=>{this.removeHandles("suspension"),this.removeHandles("visible-geometry-changed");let n=this.view?.allLayerViews;n&&(this.addHandles(n.map(i=>x(()=>[i.suspended,i.layer?.attributionVisible],()=>this._updateAttributionItems())).toArray(),"suspension"),n.forEach(i=>{i.declaredClass==="esri.views.3d.layers.Tiles3DLayerView3D"&&this.addHandles(i.on("visible-geometry-changed",()=>this._updateAttributionItems()),"visible-geometry-changed")})),t?.removed&&t.removed.forEach(i=>{this._pendingAttributions.delete(i),this._fetchedAttributionData.delete(i)}),this._updateAttributionItems()},this.addHandles([Li(()=>this.view?.allLayerViews,"change",t=>this._allLayerViewsChange(t),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),ai(()=>this.view?.stationary===!0,()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){return this.view?.ready?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){let e=this.view,t=e?.allLayerViews;if(Dn.length=0,!e||!t)return void this._clear();t.forEach(i=>{if(i.suspended||!i.layer?.attributionVisible)return;let o=i.layer;if(Gv(o,"user"))return void Ea(Dn,i,o.copyright);if(o.hasAttributionData){if(this._fetchedAttributionData.has(i)){let r=this._fetchedAttributionData.get(i);return void(r?Ea(Dn,i,this._getDynamicAttribution(r,e,o)):Gv(o)&&Ea(Dn,i,o.copyright))}return void this._fetchAttributionData(i)}let s="portalItem"in o?o.portalItem?.accessInformation:void 0;Ea(Dn,i,s||o.copyright)});let n=t.find(i=>i.layer?.type==="integrated-mesh-3dtiles");if(this.view&&n){let i=Bv(this.view);if(i){let o=i.getAttributionText();for(let s=0;s<o.length;++s)Ea(Dn,n,o[s])}}sM(this.items,Dn)&&(this.items.removeAll(),this.items.addMany(Dn)),Dn.length=0,this.notifyChange("state")}_fetchAttributionData(e){return I(this,null,function*(){if(this._pendingAttributions.has(e))return;this._pendingAttributions.add(e);let t=yield Kf(e.layer.fetchAttributionData());if(this._pendingAttributions.has(e)){let n=t.ok?this._createContributionIndex(t.value,rM(e.layer)):null;this._pendingAttributions.delete(e),this._fetchedAttributionData.set(e,n)}this._updateAttributionItems()})}_createContributionIndex(e,t){let n=e.contributors,i={};if(!n)return i;for(let o=0;o<n.length;o++){let s=n[o],r=s.coverageAreas;if(!r)return;for(let a of r){let c=a.bbox,u=a.zoomMin-(t&&a.zoomMin?1:0),p=a.zoomMax-(t&&a.zoomMax?1:0),h=new Ki({xmin:c[1],ymin:c[0],xmax:c[3],ymax:c[2],spatialReference:Is.WGS84}),m={extent:cg(h),attribution:s.attribution||"",score:a.score!=null?a.score:100,id:o};for(let f=u;f<=p;f++)i[f]??=[],i[f].push(m)}}return i.maxKey=Math.max.apply(null,Object.keys(i)),i}_getDynamicAttribution(e,t,n){let{extent:i,scale:o}=t,s=n.tileInfo?.scaleToZoom(o)??0;if(s=Math.min(e.maxKey??0,Math.round(s)),!i||s==null||s<=-1)return"";let r=e[s],a=lg(i.center.clone().normalize(),t.spatialReference),c=new Set;return r?r.filter(u=>{let p=u.id,h=!c.has(p)&&a&&u.extent&&ml(u.extent,a);return h&&c.add(p),h}).sort((u,p)=>p.score-u.score||u.objectId-p.objectId).map(u=>u.attribution).join(", "):""}};l([d({readOnly:!0,type:Y})],sr.prototype,"items",void 0),l([d({readOnly:!0})],sr.prototype,"state",null),l([d()],sr.prototype,"view",void 0),sr=l([b("esri.widgets.Attribution.AttributionViewModel")],sr);var uh=sr;var rr="esri-attribution",ar={base:rr,poweredBy:`${rr}__powered-by`,sources:`${rr}__sources`,open:`${rr}--open`,sourcesOpen:`${rr}__sources--open`,link:`${rr}__link`},Nt=class extends ze{constructor(e,t){super(e,t),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver(n=>n.forEach(({target:i})=>this._checkSourceTextOverflow(i))),this.itemDelimiter=" | ",this.messages=null,this.viewModel=new uh}initialize(){this.addHandles(Li(()=>this.viewModel?.items,"change",()=>this.scheduleRender()))}destroy(){this._resizeObserver?.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((e,t)=>(e.includes(t.text)||e.push(t.text),e),[]).join(this.itemDelimiter)}get icon(){return"description"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){let e={[ar.open]:this._isOpen};return M("div",{bind:this,class:this.classes(ar.base,ke.widget,e),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),this._renderPoweredBy())}_renderPoweredBy(){return M("div",{class:ar.poweredBy},"Powered by"," ",M("a",{class:ar.link,href:"https://www.esri.com/",rel:"noreferrer",target:"_blank"},"Esri"))}_renderSourcesNode(){let e=this._isOpen,t=this._isInteractive,n=t?0:void 0,{attributionText:i}=this,o={[ar.sourcesOpen]:e,[ke.interactive]:t};return M("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(ar.sources,o),innerHTML:i,tabIndex:n})}_afterSourcesNodeCreate(e){this._prevSourceNodeHeight=e.clientWidth,this._resizeObserver.observe(e)}_checkSourceTextOverflow(e){let t=!1,{clientHeight:n,clientWidth:i,scrollWidth:o}=e,s=o>i,r=this._attributionTextOverflowed!==s;if(this._attributionTextOverflowed=s,r&&(t=!0),this._isOpen){let a=n<this._prevSourceNodeHeight;this._prevSourceNodeHeight=n,a&&(this._isOpen=!1,t=!0)}t&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};l([d()],Nt.prototype,"_isOpen",void 0),l([d()],Nt.prototype,"_isInteractive",null),l([d()],Nt.prototype,"_attributionTextOverflowed",void 0),l([d()],Nt.prototype,"_prevSourceNodeHeight",void 0),l([d({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],Nt.prototype,"attributionText",null),l([d()],Nt.prototype,"icon",null),l([d()],Nt.prototype,"itemDelimiter",void 0),l([d()],Nt.prototype,"label",null),l([d(),Ze("esri/widgets/Attribution/t9n/Attribution")],Nt.prototype,"messages",void 0),l([d()],Nt.prototype,"view",null),l([d({type:uh})],Nt.prototype,"viewModel",void 0),l([I_()],Nt.prototype,"_toggleState",null),Nt=l([b("esri.widgets.Attribution")],Nt);var jv=Nt;function Uv(e){return e?.spatialReference?.isWebMercator||e?.spatialReference?.isGeographic||!1}var Lo=class extends O_(P){constructor(e){super(e),this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this.addHandles(x(()=>this.view,this._updateRotationWatcher,ie))}destroy(){this.view=null}get canShowNorth(){return Uv(this.view)}get state(){return!this.view?.ready||this.view.type==="2d"&&!this.view.constraints.rotationEnabled?"disabled":this.canShowNorth?"compass":"rotation"}reset(){this.view?.ready&&(this.view?.type==="2d"?this.callGoTo({target:{rotation:0},options:{animationMode:"always",duration:Ge("mapview-essential-goto-duration")}}):this.callGoTo({target:{heading:0}}))}_updateForRotation(e){e!=null&&this._set("orientation",{z:e})}_updateForCamera(e){if(!e)return;let t=-e.heading;this._set("orientation",{x:0,y:0,z:t})}_updateRotationWatcher(e){this.removeAllHandles(),e&&this.addHandles(e.type==="2d"?x(()=>e?.rotation,this._updateForRotation,ie):x(()=>e?.camera,this._updateForCamera,ie))}};l([d({readOnly:!0})],Lo.prototype,"canShowNorth",null),l([d({readOnly:!0})],Lo.prototype,"orientation",void 0),l([d({readOnly:!0})],Lo.prototype,"state",null),l([d()],Lo.prototype,"view",void 0),Lo=l([b("esri.widgets.Compass.CompassViewModel")],Lo);var ph=Lo;var zv="esri-compass",hh={base:zv,iconContainer:`${zv}__icon-container`};var En=class extends ze{constructor(e,t){super(e,t),this.messages=null,this.viewModel=new ph,this._reset=()=>{this.viewModel.reset()},this._toRotationTransform=n=>({transform:`rotateZ(${n.z}deg)`})}loadDependencies(){return kt({button:()=>import("./chunk-J63POI2Y.js"),icon:()=>import("./chunk-4HUBSTEF.js")})}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get icon(){return this.viewModel.state==="rotation"?"arrow-up":"compass-needle"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}reset(){return this.viewModel.reset()}render(){let{orientation:e,state:t}=this.viewModel,{messages:n}=this;return M("div",{class:this.classes(hh.base,ke.widget)},M("calcite-button",{class:ke.widgetButton,disabled:t==="disabled",kind:"neutral",label:n.reset,onclick:this._reset,round:!0,scale:"s",title:n.reset},M("div",{"aria-hidden":"true",class:hh.iconContainer,title:n.reset},M("calcite-icon",{icon:this.icon,styles:this._toRotationTransform(e)}))))}};l([d()],En.prototype,"goToOverride",null),l([d()],En.prototype,"icon",null),l([d()],En.prototype,"label",null),l([d(),Ze("esri/widgets/Compass/t9n/Compass")],En.prototype,"messages",void 0),l([d()],En.prototype,"view",null),l([d({type:ph})],En.prototype,"viewModel",void 0),En=l([b("esri.widgets.Compass")],En);var $v=En;var Wv="esri-navigation-toggle",mh={base:Wv,isLayoutHorizontal:`${Wv}--horizontal`};var lr=class extends P{constructor(e){super(e),this._navigationMode="pan",this.view=null}initialize(){this.addHandles(ai(()=>this.view?.inputManager,()=>this._setNavigationMode()))}destroy(){this.view=null}get state(){return this.view?.ready&&this.view?.type==="3d"?"ready":"disabled"}get navigationMode(){return this._navigationMode}set navigationMode(e){this._navigationMode=e,this._setNavigationMode()}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate")}_setNavigationMode(){let e=this.view?.inputManager;e&&(e.primaryDragAction=this._navigationMode==="pan"?"pan":"rotate")}};l([d({readOnly:!0})],lr.prototype,"state",null),l([d()],lr.prototype,"_navigationMode",void 0),l([d()],lr.prototype,"view",void 0),lr=l([b("esri.widgets.NavigationToggle.NavigationToggleViewModel")],lr);var fh=lr;var In=class extends ze{constructor(e,t){super(e,t),this.messages=null,this.viewModel=new fh,this.toggle=()=>this.viewModel.toggle(),this._panButton=null,this._rotateButton=null,this._toggle=()=>{(this.viewModel?.navigationMode==="pan"?this._rotateButton:this._panButton)?.setFocus(),this.toggle()}}loadDependencies(){return kt({button:()=>import("./chunk-J63POI2Y.js")})}get icon(){return"move"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){let e=this.viewModel?.state==="disabled",t=this.viewModel?.navigationMode==="pan",n=this.messages.toggle;return M("div",{class:this.classes(mh.base,ke.widget,{[mh.isLayoutHorizontal]:this.layout==="horizontal"})},M("calcite-button",{afterCreate:i=>{this._panButton=i},appearance:t?"outline-fill":"solid",class:ke.widgetButton,disabled:e,iconStart:"move",kind:"neutral",label:n,onclick:this._toggle,tabIndex:t?void 0:-1,title:n}),M("calcite-button",{afterCreate:i=>{this._rotateButton=i},appearance:t?"solid":"outline-fill",class:ke.widgetButton,disabled:e,iconStart:"rotate",kind:"neutral",label:n,onclick:this._toggle,tabIndex:t?-1:void 0,title:n}))}};l([d()],In.prototype,"icon",null),l([d()],In.prototype,"label",null),l([d({value:"vertical"})],In.prototype,"layout",null),l([d(),Ze("esri/widgets/NavigationToggle/t9n/NavigationToggle")],In.prototype,"messages",void 0),l([d()],In.prototype,"view",null),l([d({type:fh})],In.prototype,"viewModel",void 0),In=l([b("esri.widgets.NavigationToggle")],In);var qv=In;var No=class extends P{get canZoomIn(){if(!this.view?.ready)return!1;let t=this.view?.constraints?.effectiveMaxScale;return t===0||this._scale>t}get canZoomOut(){let{view:e}=this;if(!e?.ready)return!1;let n=e.constraints?.effectiveMinScale;return n===0||this._scale<n}get _scale(){let e=this.view?.animation?.target;return(e&&"then"in e?void 0:e?.scale)??this.view?.scale??0}};l([d({readOnly:!0})],No.prototype,"canZoomIn",null),l([d({readOnly:!0})],No.prototype,"canZoomOut",null),l([d()],No.prototype,"view",void 0),l([d()],No.prototype,"_scale",null),No=l([b("esri.widgets.Zoom.ZoomConditions2D")],No);var Zv=No;var cr=class extends P{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};l([d({readOnly:!0})],cr.prototype,"canZoomIn",null),l([d({readOnly:!0})],cr.prototype,"canZoomOut",null),l([d()],cr.prototype,"view",void 0),cr=l([b("esri.widgets.Zoom.ZoomConditions3D")],cr);var Yv=cr;var so=class extends P{constructor(e){super(e)}destroy(){this.view=null}get canZoomIn(){return this._zoomConditions!=null&&this._zoomConditions.canZoomIn}get canZoomOut(){return this._zoomConditions!=null&&this._zoomConditions?.canZoomOut}get state(){return this.view?.ready?"ready":"disabled"}set view(e){e?e.type==="2d"?this._zoomConditions=new Zv({view:e}):e.type==="3d"&&(this._zoomConditions=new Yv({view:e})):this._zoomConditions=null,this._set("view",e)}zoomIn(){if(!this.canZoomIn)return;let e=this.view;e.type==="2d"?e.mapViewNavigation.zoomIn():ri(e.goTo({zoomFactor:2}))}zoomOut(){if(!this.canZoomOut)return;let e=this.view;e.type==="2d"?e.mapViewNavigation.zoomOut():ri(e.goTo({zoomFactor:.5}))}};l([d()],so.prototype,"_zoomConditions",void 0),l([d()],so.prototype,"canZoomIn",null),l([d()],so.prototype,"canZoomOut",null),l([d({readOnly:!0})],so.prototype,"state",null),l([d()],so.prototype,"view",null),so=l([b("esri.widgets.Zoom.ZoomViewModel")],so);var gh=so;var Kv={base:"esri-zoom",horizontalLayout:"esri-zoom--horizontal"},xn=class extends ze{constructor(e,t){super(e,t),this.messages=null,this.viewModel=new gh,this.zoomIn=()=>this.viewModel.zoomIn(),this.zoomOut=()=>this.viewModel.zoomOut()}loadDependencies(){return kt({button:()=>import("./chunk-J63POI2Y.js")})}get icon(){return"magnifying-glass-plus"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}set view(e){this.viewModel.view=e}get view(){return this.viewModel.view}render(){let e={[Kv.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:t,canZoomOut:n}=this.viewModel,{zoomIn:i,zoomOut:o}=this.messages;return M("div",{class:this.classes(Kv.base,ke.widget,e)},M("calcite-button",{class:ke.widgetButton,disabled:!t,iconStart:"plus",kind:"neutral",label:i,onclick:this.zoomIn,title:i}),M("calcite-button",{class:ke.widgetButton,disabled:!n,iconStart:"minus",kind:"neutral",label:o,onclick:this.zoomOut,title:o}))}};l([d()],xn.prototype,"icon",null),l([d()],xn.prototype,"label",null),l([d({value:"vertical"})],xn.prototype,"layout",null),l([d(),Ze("esri/widgets/Zoom/t9n/Zoom")],xn.prototype,"messages",void 0),l([d()],xn.prototype,"view",null),l([d({type:gh})],xn.prototype,"viewModel",void 0),xn=l([b("esri.widgets.Zoom")],xn);var Qv=xn;function aM(e){return e?.view!==void 0}var jc=class extends Hv{constructor(e){super(e),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[],this._updateViewAwareWidgets=t=>{this.components.forEach(n=>{let i=this._find(n),o=i?.widget;aM(o)&&(o.view=t)})},this._componentsWatcher=(t,n)=>{this._removeComponents(n),this._addComponents(t),this._adjustPadding(t)}}initialize(){this.addHandles([x(()=>this.components,this._componentsWatcher,ie),x(()=>this.view,this._updateViewAwareWidgets,ie)])}_add(e,t,n,i,o){let s=e;if(typeof e=="string"&&this._defaultPositionLookup[e]){if(this._find(e))return;s=this._createComponent(e)}super._add(s,t,n,i,o)}_removeComponents(e){e.forEach(t=>{let n=this._find(t);n&&(this.remove(n),n.destroy())})}_adjustPadding(e){if(!e.includes("attribution")&&!this._isOverridden("padding")){let{top:t}=this.padding;this.padding=t}}_addComponents(e){this.constructed&&e.forEach(t=>this.add(this._createComponent(t),this._defaultPositionLookup[t]))}_createComponent(e){let t=this._createWidget(e);return new or({id:e,node:t})}_createWidget(e){let t=this.view;switch(e){case"attribution":return new jv({view:t});case"compass":return new $v({view:t});case"navigation-toggle":return new qv({view:t});case"zoom":return new Qv({view:t})}}};l([d()],jc.prototype,"components",void 0),jc=l([b("esri.views.ui.DefaultUI")],jc);var Uc=jc;var zc=class extends Uc{constructor(e){super(e),this.components=["attribution","zoom"]}};l([d()],zc.prototype,"components",void 0),zc=l([b("esri.views.ui.2d.DefaultUI2D")],zc);var _h=zc;var yh,$c=yh=class extends Ds{constructor(e){super(e),this.color=new Qi([0,0,0,1])}clone(){return new yh(Nr({color:this.color}))}};l([d({type:Qi,json:{write:!0}})],$c.prototype,"color",void 0),$c=yh=l([b("esri.webmap.background.ColorBackground")],$c);var Jv=$c;var Xv,eb,tb,ib,nb,ob;function lM(){return I(this,null,function*(){let[,{GraphicsView2D:e,GraphicContainer:t,LabelManager:n,MapViewNavigation:i,MagnifierView2D:o,Stage:s}]=yield Promise.all([import("./chunk-OG3VJURW.js"),import("./chunk-JZJZTRGD.js")]);eb=e,tb=t,ib=n,nb=i,ob=o,Xv=s})}var W=class extends Cy(Dy(Ty(Gy))){constructor(e){super(e),this._magnifierView=null,this.stage=null,this._resolveWhenReady=[],this.rootLayerViews=new Mo({getCollections:()=>[this.basemapView?.baseLayerViews,this.layerViews,this.basemapView?.referenceLayerViews],getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.fullOpacity=1,this.goToManager=new Sa({view:this}),this.graphicsView=null,this.stateManager=new At({constraints:new ih({view:this})}),this.stationaryManager=new nr,this.labelManager=null,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.supersampleScreenshotsEnabled=!0,this.supportsGround=!1,this.frameTask=new yc(this),this.floors=new Y,this.highlightOptions=new ou,this.inputManager=new Ev({view:this}),this.map=null,this.spatialReferenceLocked=!1,this.timeline=new mu,this.type="2d",this.ui=new _h,this.test={takeScreenshot:t=>I(this,null,function*(){return Fv(this._getScreenshotView(t),t)})},this.padding={top:0,right:0,bottom:0,left:0},this.addHandles([x(()=>this.viewpoint,()=>this.stationaryManager.flip(),_n),this.on("resize",t=>this.stateManager.resize(t.width,t.height))]),f_()}destroy(){this.layerViewManager.clear(),this._set("preconditionsReady",!1),this.frameTask=se(this.frameTask),this.goToManager.destroy(),this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new Bc(this.featuresTilingScheme)}get constraintsInfo(){let e=this.defaultsFromMap?.tileInfo,t=this.spatialReference;return{lods:e?.spatialReference?.equals(t)?e.lods:null,spatialReference:t}}get state(){return this.stateManager.state}get initialExtentRequired(){if(!this.stateManager)return!1;let{scale:e,constraints:t,center:n,viewpoint:i,extent:o}=this,s=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties?.viewpoint)&&!o&&(t?.effectiveLODs||(s=-1),(!n||e===0&&s===-1)&&(i?.targetGeometry==null||i.targetGeometry.type!=="extent"&&!i.scale))}get _defaultsFromMapSettings(){return{required:{tileInfo:!0,heightModelInfo:!1,extent:!1},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get typeSpecificPreconditionsReady(){let e=this._getDefaultViewpoint();if(!e)return!1;let t=e.targetGeometry,n=this.spatialReference;return Lg(t.spatialReference,n)}set animation(e){let t=this._get("animation");if(e===t)return;if(t&&t.stop(),e!==this.animationManager.animation&&this.animationManager.stop(),!e||e.isFulfilled())return this._set("animation",null),void(this.frameTask.animationInProgress=!1);this._set("animation",e),this.frameTask.animationInProgress=!0;let n=()=>{this.destroyed||(e===this._get("animation")&&(this._set("animation",null),this.frameTask?.requestFrame()),this.frameTask.animationInProgress=!1)};e.when(n,n)}get background(){return fu(this.map)?this.map.initialViewProperties.background:null}set background(e){this._override("background",e)}get center(){return this.stateManager?.center??null}set center(e){this.stateManager.center=e}get constraints(){return this.stateManager?.constraints}set constraints(e){e.view=this;let t=this.stateManager.constraints;this.stateManager.constraints=e,t?.destroy()}get extent(){return this.stateManager?.extent??null}set extent(e){this.stateManager.extent=e}get padding(){return this.stateManager?.padding}set padding(e){this.stateManager&&(this.stateManager.padding=e)}get rendering(){return this.stage?.renderRequested??!1}get resizeAlign(){return this.stateManager.resizeAlign}set resizeAlign(e){this.stateManager.resizeAlign=e}get resolution(){return this.stateManager.resolution??0}get rotation(){return this.stateManager.rotation??0}set rotation(e){let{rotationEnabled:t}=this.constraints;this.constraints.rotationEnabled=!0,this.stateManager.rotation=e,this.constraints.rotationEnabled=t}get scale(){return this.stateManager?.scale??0}set scale(e){this.stateManager&&(this.stateManager.scale=e)}get stationary(){return!this.animation&&!this.navigating&&!this.resizing&&this.stationaryManager.stationary}get tileInfo(){return this.featuresTilingScheme?.tileInfo}get updating(){let e=!(!this.magnifier.visible||this.magnifier.position===null||!this._magnifierView?.updatingHandles.updating),t=!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(n=>!n.destroyed&&!("layerViews"in n)&&n.updating===!0)||e);if(Ge("esri-2d-log-updating")){let n=this.allLayerViews.reduce((i,o)=>G(v({},i),{[`${o.layer.id}(${o.layer.type})`]:!o.destroyed&&!("layerViews"in o)&&o.updating}),{});console.log(`Updating MapView: ${t}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${this.layerViewManager?.updating}
-> labelManager.updating: ${this.labelManager?.updating}
-> graphicsView.updating: ${this.graphicsView?.updating}
-> allLayerViews: ${JSON.stringify(n)}
-> updatingMagnifier: ${e}
`)}return t}get viewpoint(){return this.stateManager.viewpoint??null}set viewpoint(e){this.stateManager.viewpoint=e,this.frameTask.requestFrame()}get zoom(){return this.stateManager.zoom??-1}set zoom(e){this.stateManager.zoom=e}get navigating(){return this.mapViewNavigation?.interacting??!1}goTo(e,t){return this.goToManager.goTo(e,t)}hitTest(e,t){return I(this,null,function*(){return Ov(this,e,t)})}takeScreenshot(e){return I(this,null,function*(){return Av(this._getScreenshotView(e),e)})}toMap(e){if(!this.ready)return null;let t=Al(e)?kl(this,e):e;return this.stateManager.toMap(t)}toScreen(e,t){return this.stateManager.toScreen(e,t)}on(e,t,n,i){return this.inputManager&&this.viewEvents.on(e,t,n,i)||super.on(e,t)}hasEventListener(e){return super.hasEventListener(e)||this.viewEvents.hasHandler(e)}whenLayerView(e){return super.whenLayerView(e)}graphicChanged(e){this.graphicsView&&this.graphicsView.graphicUpdateHandler(e)}whenReady(){return new Promise(e=>{this.ready?e(this):this._resolveWhenReady.push(e)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){return this.map&&"initialViewProperties"in this.map&&this.map?.initialViewProperties?.spatialReference||this.defaultsFromMap?.spatialReference||null}getDefaultTimeZone(){return fu(this.map)?this.map.initialViewProperties.timeZone:null}hasLayerViewModule(e){return Kp.hasLayerViewModule(e)}importLayerView(e){return Kp.importLayerView(e)}pixelSizeAt(){return this.ready?this.resolution:(Z.getLogger(this).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}popupHitTest(e){return I(this,null,function*(){let t=this.toMap(e),n=yield this.hitTest(e),i=this.allLayerViews.toArray().reverse(),o=new globalThis.Map(i.map(c=>[c.layer.uid,c])),s=[],r=0,a=0;for(;r<n.results.length||a<i.length;){let c=n.results.at(r);if(c&&c.type!=="graphic"){++r;continue}let u=o.get((c?.layer??c?.graphic.layer)?.uid);if((!c||u)&&a<i.length&&i.at(a)!==u){let p=i.at(a);"fetchPopupFeaturesAtLocation"in p&&s.push({mapPoint:t,layerView:p}),++a}else c&&(s.push({graphic:c.graphic,layerView:u}),++r)}return{hits:s,location:t}})}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}validate(){return I(this,null,function*(){let e=Lv(this.type);if(Ge("safari")&&Ge("safari")<9&&(e=new ne("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:Ge("safari")})),e!=null)throw Z.getLogger(this).warn("#validate()",e.message),e})}loadAsyncDependencies(){return lM()}_getDefaultViewpoint(){let{constraints:e,initialExtent:t,map:n,padding:i,size:o}=this;if(!e)return null;let s=n&&"initialViewProperties"in n?n.initialViewProperties:void 0,r=this.stateManager.getUserStartupOptions(this.size),a=s?.viewpoint,c=a?.targetGeometry?.extent??t,u=c?.center,p=a?.rotation??0,h=a?.scale||c&&Pl(c,[o[0]-i.left-i.right,o[1]-i.top-i.bottom]),m=r.center??u,f=r.rotation??p,S=r.scale??h;return m&&S?new ci({targetGeometry:m,scale:S,rotation:f}):null}_startup(){this.timeline.begin("MapView Startup");let e=this._getDefaultViewpoint();this.stateManager.startup(e,this.size,this.spatialReference,this.defaultsFromMap.extent?.center),this.graphics.owner=this;let t=new Xv(this.surface,{canvas:this.renderCanvas,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this.stage=t,this._magnifierView=new ob,this._magnifierView.magnifier=this.magnifier;let n=new ib({view:this});this._set("labelManager",n);let i=new uv({view:this});this._set("animationManager",i);let o=new nb({view:this,animationManager:i});this._set("mapViewNavigation",o),this._setupSpatialReferenceDependentProperties(),this.addHandles([this.rootLayerViews.on("change",()=>this._updateStageChildren()),t.on("webgl-error",r=>this.fatalError=r.error),x(()=>this.stationary,r=>t.stationary=r,qe),x(()=>this.background,r=>{t.backgroundColor=r?.color,this._magnifierView.backgroundColor=r?.color},qe),x(()=>this.magnifier,r=>this._magnifierView.magnifier=r,qe),x(()=>this.renderingOptions,r=>t.renderingOptions=r,qe),x(()=>this.highlightOptions,r=>t.highlightOptions=r,qe),x(()=>this.state.id,()=>t.state=this.state,qe)],"map-view"),this._updateStageChildren();let s=this._resolveWhenReady;this._resolveWhenReady=[],s.forEach(r=>r(this)),this.timeline.end("MapView Startup"),this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.removeHandles("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animation=null,this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this.stage.destroy(),this.stage=null,this._set("graphicsView",null),this._magnifierView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask.stop(),this.stationaryManager.clear(),this._set("ready",!1),this.stateManager.teardown()}_updateStageChildren(){this.stage.removeAllChildren(),this.rootLayerViews.forEach(t=>{this.stage.addChild(t.container)});let e=this.graphicsView;this.stage.addChild(e.container),this.stage.addChild(this._magnifierView)}_setupSpatialReferenceDependentProperties(){let e=new Kg(kg.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",e);let t=new eb({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new tb(e)});this._set("graphicsView",t)}_destroySpatialReferenceDependentProperties(){let e=this.graphicsView;this._set("graphicsView",null),e.destroy(),this._set("featuresTilingScheme",null)}_getScreenshotView(e){let{allLayerViews:t,padding:n,size:i,stage:o}=this;return{allLayerViews:t,backgroundColor:e?.ignoreBackground?null:this.background?.color,padding:n,size:i,stage:o}}_spatialReferenceChanged(e){if(this.ready){this.frameTask.stop();for(let t of this.allLayerViews)t.processDetach();this._destroySpatialReferenceDependentProperties(),this.stateManager.changeSpatialReference(e),this.stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(let t of this.allLayerViews)t.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}}};W.type="2d",l([d({readOnly:!0})],W.prototype,"animationManager",void 0),l([d({constructOnly:!0})],W.prototype,"deactivatedWebGLExtensions",void 0),l([d({constructOnly:!0})],W.prototype,"debugWebGLExtensions",void 0),l([d({readOnly:!0})],W.prototype,"featuresTilingScheme",void 0),l([d({readOnly:!0})],W.prototype,"fullOpacity",void 0),l([d()],W.prototype,"goToManager",void 0),l([d({readOnly:!0})],W.prototype,"graphicsTileStore",null),l([d()],W.prototype,"graphicsView",void 0),l([d()],W.prototype,"stateManager",void 0),l([d()],W.prototype,"constraintsInfo",null),l([d({readOnly:!0})],W.prototype,"state",null),l([d()],W.prototype,"initialExtentRequired",null),l([d()],W.prototype,"labelManager",void 0),l([d({readOnly:!0})],W.prototype,"mapViewNavigation",void 0),l([d({constructOnly:!0})],W.prototype,"renderCanvas",void 0),l([d()],W.prototype,"renderingOptions",void 0),l([d({constructOnly:!0})],W.prototype,"supersampleScreenshotsEnabled",void 0),l([d({readOnly:!0})],W.prototype,"supportsGround",void 0),l([d()],W.prototype,"_defaultsFromMapSettings",null),l([d({readOnly:!0})],W.prototype,"typeSpecificPreconditionsReady",null),l([d()],W.prototype,"animation",null),l([d({type:Jv})],W.prototype,"background",null),l([d()],W.prototype,"center",null),l([d({type:ih})],W.prototype,"constraints",null),l([d()],W.prototype,"extent",null),l([d()],W.prototype,"floors",void 0),l([d({type:ou})],W.prototype,"highlightOptions",void 0),l([d({readOnly:!0})],W.prototype,"inputManager",void 0),l([d()],W.prototype,"map",void 0),l([d()],W.prototype,"padding",null),l([d({readOnly:!0})],W.prototype,"rendering",null),l([d()],W.prototype,"resizeAlign",null),l([d({readOnly:!0})],W.prototype,"resolution",null),l([d()],W.prototype,"rotation",null),l([d()],W.prototype,"scale",null),l([d({constructOnly:!0})],W.prototype,"spatialReferenceLocked",void 0),l([d()],W.prototype,"stationary",null),l([d({readOnly:!0})],W.prototype,"tileInfo",null),l([d({type:mu,readOnly:!0})],W.prototype,"timeline",void 0),l([d({readOnly:!0})],W.prototype,"type",void 0),l([d({readOnly:!0})],W.prototype,"updating",null),l([d()],W.prototype,"viewpoint",null),l([d()],W.prototype,"zoom",null),l([d({readOnly:!0})],W.prototype,"navigating",null),l([d(),li(e=>e instanceof Uc?e:Bf(_h,e))],W.prototype,"ui",void 0),W=l([b("esri.views.MapView")],W);var sb=W;var Vt="esri-scale-bar",De={base:Vt,labelContainer:`${Vt}__label-container`,rulerLabelContainer:`${Vt}__label-container--ruler`,lineLabelContainer:`${Vt}__label-container--line`,topLabelContainer:`${Vt}__label-container--top`,bottomLabelContainer:`${Vt}__label-container--bottom`,label:`${Vt}__label`,line:`${Vt}__line`,topLine:`${Vt}__line--top`,bottomLine:`${Vt}__line--bottom`,ruler:`${Vt}__ruler`,rulerBlock:`${Vt}__ruler-block`,barContainer:`${Vt}__bar-container`,rulerBarContainer:`${Vt}__bar-container--ruler`,lineBarContainer:`${Vt}__bar-container--line`};function cM(e){return e>.5?{min:.5,max:1}:e>.2?{min:.2,max:.5}:{min:.1,max:.2}}function dM(e,t){switch(t){case"metric":return e>1e3?{distance:Co(e,"meters","kilometers"),unit:"kilometer"}:e>1?{distance:e,unit:"meter"}:e>.01?{distance:Co(e,"meters","centimeters"),unit:"centimeter"}:{distance:Co(e,"meters","millimeters"),unit:"millimeter"};case"imperial":return e>1609.344?{distance:Co(e,"meters","miles"),unit:"mile"}:e>.3048?{distance:Co(e,"meters","feet"),unit:"foot"}:{distance:Co(e,"meters","inches"),unit:"inch"}}}function uM(e){let{isWebMercator:t,wkt:n,wkt2:i}=e;return t||((i||n)?.includes("WGS_1984_Web_Mercator")??!1)}function rb({state:{paddedViewState:e},spatialReference:t,width:n}){return t.isWrappable&&e.worldScreenWidth<n}function ab(e,t){let{x:n,y:i}=e?dg(t,!0):t;return[n,i]}var dr=class extends P{constructor(e){super(e),this.scaleComputedFrom=me(),this.view=null}get state(){return this.view?.ready&&this.view?.type==="2d"?"ready":"disabled"}getScaleBarProperties(e,t){if(this.state==="disabled"||isNaN(e)||!t||!this.view)return null;let n=this._getDistanceInMeters();return n==null?null:this._getScaleBarProps(e,n,t)}_getDistanceInMeters(){let{state:e,spatialReference:t}=this.view;if(!ng(t))return null;let{isGeographic:n}=t,i=uM(t);if(!n&&!i)return e.extent.width*(ag(t)??1);let[o,s]=this._getScaleMeasuringPoints(),r=i||n&&!o0(t)?Is.WGS84:t,a=new wg({paths:[[ab(i,o),ab(i,s)]],spatialReference:r}),c=Ng(a,10),u;try{[u]=s0([c],"meters")}catch{return null}return u}_getScaleMeasuringPoints(){let e=this.view,{width:t,height:n,position:i,spatialReference:o}=e;if(rb(e)){let c=hl(o),{valid:u}=c;return[new Fe(u[0],0,o),new Fe(u[1],0,o)]}let s=this.scaleComputedFrom.y-i[1];s>n?s=n:s<0&&(s=0);let r=me(0,s),a=me(t,s);return[e.toMap(r),e.toMap(a)]}_getScaleBarProps(e,t,n){let i=this.view,o=e*t/(rb(i)?i.state.paddedViewState.worldScreenWidth:i.width);if(o<.001)return null;let s=dM(o,n),{distance:r,unit:a}=s,c=r,u=0;for(;c>=1;)c/=10,u++;let{min:p,max:h}=cM(c),m=h/c>=c/p?p:h;return{length:e*(m/c),value:10**u*m,unit:a}}};l([d()],dr.prototype,"scaleComputedFrom",void 0),l([d({readOnly:!0})],dr.prototype,"state",null),l([d()],dr.prototype,"view",void 0),dr=l([b("esri.widgets.ScaleBar.ScaleBarViewModel")],dr);var lb=dr;function cb(e,t){return Wf(e,{style:"unit",unit:t,unitDisplay:"short"})}var Bi=class extends ze{constructor(e,t){super(e,t),this.messages=null,this.style="line",this.viewModel=new lb}initialize(){this.addHandles(x(()=>{let{view:e}=this;return[e?.stationary,e?.center,e?.scale,e?.zoom]},([e])=>{e&&this.scheduleRender()}))}get icon(){return"actual-size"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get unit(){return this._defaultUnit}set unit(e){this._overrideIfSome("unit",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){let e=this.viewModel.state==="disabled",t={[ke.disabled]:e},n,i;if(!e){let{unit:o,style:s}=this,r=o==="metric"||o==="dual",a=100,c=o==="dual"?"line":s;if(o==="imperial"||o==="dual"){let u=this.viewModel.getScaleBarProperties(a,"imperial");u&&(i=c==="ruler"?this._renderRuler(u):this._renderLine(u,"bottom"))}if(r){let u=this.viewModel.getScaleBarProperties(a,"metric");u&&(n=c==="ruler"?this._renderRuler(u):this._renderLine(u,"top"))}}return M("div",{afterCreate:this._handleRootCreateOrUpdate,afterUpdate:this._handleRootCreateOrUpdate,bind:this,class:this.classes(De.base,ke.widget,t)},n,i)}_renderRuler(e){let{length:t,unit:n,value:i}=e,o=Math.round(t),s=cb(i,n);return M("div",{class:this.classes(De.barContainer,De.rulerBarContainer),key:De.rulerBarContainer},M("div",{class:De.ruler,styles:{width:`${o}px`}},M("div",{class:De.rulerBlock}),M("div",{class:De.rulerBlock}),M("div",{class:De.rulerBlock}),M("div",{class:De.rulerBlock})),M("div",{class:this.classes(De.labelContainer,De.rulerLabelContainer)},M("div",{class:De.label},"0"),M("div",{class:De.label},s)))}_renderLine(e,t){let{length:n,unit:i,value:o}=e,s=Math.round(n),r=cb(o,i),a={[De.topLabelContainer]:t==="top",[De.bottomLabelContainer]:t==="bottom"},c=M("div",{class:this.classes(De.labelContainer,De.lineLabelContainer,a),key:De.labelContainer},M("div",{class:De.label},r)),u={[De.topLine]:t==="top",[De.bottomLine]:t==="bottom"},p=M("div",{class:this.classes(De.line,u),key:De.line,styles:{width:`${s}px`}});return M("div",{class:this.classes(De.barContainer,De.lineBarContainer),key:De.lineBarContainer},[p,c])}_handleRootCreateOrUpdate(e){if(!this.viewModel)return;let{scaleComputedFrom:t}=this.viewModel,n=e.getBoundingClientRect(),i=n.left+window.pageXOffset,o=n.top+window.pageYOffset,s=me(i,o);(s.x!==t.x||s.y!==t.y)&&(this.viewModel.scaleComputedFrom=s)}};l([d(Ll)],Bi.prototype,"_defaultUnit",void 0),l([d()],Bi.prototype,"icon",null),l([d()],Bi.prototype,"label",null),l([d(),Ze("esri/widgets/ScaleBar/t9n/ScaleBar")],Bi.prototype,"messages",void 0),l([d({type:["ruler","line"]})],Bi.prototype,"style",void 0),l([d({type:["metric","imperial","dual"]})],Bi.prototype,"unit",null),l([d()],Bi.prototype,"view",null),l([d()],Bi.prototype,"viewModel",void 0),Bi=l([b("esri.widgets.ScaleBar")],Bi);var db=Bi;function ub(e){return pM(e).result}function pM(e){if(e.graphic&&e.graphic.layer?.type!=="graphics")return{result:ht.GRAPHICS_LAYER_MISSING};if(!e.operations)return{result:ht.GEOMETRY_MISSING};if(b_(e.elevationInfo))return{result:ht.ELEVATION_MODE_UNSUPPORTED};let t=e.operations.data.type,n=e.operations.data.geometry;return t==="point"||t==="mesh"||t==="polyline"||t==="polygon"?{result:ht.SUPPORTED,geometry:n}:{result:ht.GEOMETRY_TYPE_UNSUPPORTED}}function pb(e){if(e.layer?.type!=="graphics")return ht.GRAPHICS_LAYER_MISSING;if(e.geometry==null)return ht.GEOMETRY_MISSING;switch(e.geometry.type){case"point":break;case"polygon":case"polyline":case"multipoint":case"extent":case"mesh":return ht.SUPPORTED;default:return ht.GEOMETRY_TYPE_UNSUPPORTED}let t=e.symbol!=null&&e.symbol.type==="point-3d"&&e.symbol.symbolLayers;return!t||!t.some(n=>n.type==="object")?ht.SYMBOL_TYPE_UNSUPPORTED:y_(e)!=="on-the-ground"&&v_(e)?ht.ELEVATION_MODE_UNSUPPORTED:ht.SUPPORTED}var wt=class extends Ue.EventedAccessor{constructor(e){super(e),this.cancelled=!1,this.history={undo:[],redo:[]},this.type=null}get tool(){if(!this.activeComponent)return null;switch(this.activeComponent.type){case"graphic-mover":case"move-3d":return"move";case"box":case"transform-3d":return"transform";case"reshape":case"reshape-3d":return"reshape";case"draw-2d":case"draw-3d":return this.activeComponent.geometryType;default:this.activeComponent}return null}addToHistory(e){this.history.redo=[],this.history.undo.push(e)}resetHistory(){this.history.redo=[],this.history.undo=[]}canUndo(){return this.history.undo.length>0}canRedo(){return this.history.redo.length>0}complete(){this._reset(),this.onEnd(),this.emit("complete")}cancel(){this.cancelled=!0,this.complete()}_reset(){this.activeComponent?.reset()}refreshComponent(){let e=this.activeComponent;e&&(e.type!=="box"&&e.type!=="reshape"&&e.type!=="graphic-mover"||e.refresh())}set undo(e){this._set("undo",()=>{this.canUndo()&&e()})}set redo(e){this._set("redo",()=>{this.canRedo()&&e()})}};l([d()],wt.prototype,"activeComponent",void 0),l([d()],wt.prototype,"cancelled",void 0),l([d()],wt.prototype,"history",void 0),l([d()],wt.prototype,"tool",null),l([d()],wt.prototype,"type",void 0),l([d()],wt.prototype,"canUndo",null),l([d()],wt.prototype,"canRedo",null),l([d()],wt.prototype,"onEnd",void 0),l([d()],wt.prototype,"undo",null),l([d()],wt.prototype,"redo",null),l([d()],wt.prototype,"toggleTool",void 0),l([d()],wt.prototype,"addToSelection",void 0),l([d()],wt.prototype,"removeFromSelection",void 0),wt=l([b("esri.widgets.Sketch.support.OperationHandle")],wt);var Ia=class extends wt{};l([d()],Ia.prototype,"activeComponent",void 0),Ia=l([b("esri.widgets.Sketch.support.OperationHandle.CreateOperationHandle")],Ia);var on=class extends wt{};l([d()],on.prototype,"activeComponent",void 0),on=l([b("esri.widgets.Sketch.support.OperationHandle.UpdateOperationHandle")],on);var hb={defaultZ:0},xa={reshapeOptions:{edgeOperation:"split",shapeOperation:"move",vertexOperation:"move"},enableMoveAllGraphics:!0,enableRotation:!0,enableScaling:!0,multipleSelectionEnabled:!0,preserveAspectRatio:!1,toggleToolOnClick:!0,enableZ:!0,highlightOptions:{enabled:!0},tool:"transform"},_e=class extends Ue.EventedAccessor{constructor(e){super(e),this._numUpdating=0,this._defaultSnappingManager=null,this._internalGraphicsLayer=new xl({listMode:"hide",internal:!0,title:"SVM Internal"}),this._operationHandle=null,this._viewHandlesKey="viewHandles",this.activeFillSymbol=null,this.activeLineSymbol=null,this.activeVertexSymbol=null,this.allowDeleteKey=!0,this.layer=null,this.pointSymbol=new iu({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}}),this.polygonSymbol=new o_({color:[150,150,150,.2],outline:{color:[50,50,50],width:2}}),this.polylineSymbol=new n_({color:[130,130,130,1],width:2}),this.meshSymbol=new u_({symbolLayers:new Y([new d_])}),this.updateGraphics=new Y,this.updateOnGraphicClick=!0,this.vertexSymbol=new iu({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}}),this.sketchOptions=new Fs,this._moduleLoaderAbortController=null,this._viewReadyAbortController=null,this._originalPopupEnabled=null,this.defaultCreateOptions=hb,this.defaultUpdateOptions=xa,this.snappingOptions=e?.snappingManager?.options??e?.snappingOptions??new Ps}initialize(){this.addHandles([Li(()=>this.view?.map?.layers,"change",e=>{e.removed.includes(this.layer)&&this.cancel()}),Li(()=>this.layer?.graphics,"change",e=>{if(this._operationHandle!=null)for(let t of e.removed)this.updateGraphics.includes(t)&&(this.updateGraphics.length>1?this._operationHandle.removeFromSelection(t):this._operationHandle.cancel())}),x(()=>this.layer?.elevationInfo??null,e=>{e!==this._internalGraphicsLayer.elevationInfo&&(this.cancel(),this._internalGraphicsLayer.elevationInfo=e)},qe),x(()=>this.view,e=>{this._defaultSnappingManager=se(this._defaultSnappingManager),e&&(this.snappingManager||(this._defaultSnappingManager=new vu({view:e,options:this.snappingOptions})),e.type==="2d"?import("./chunk-CTF447HT.js"):e.type==="3d"&&(import("./chunk-Z4YWSKAI.js"),import("./chunk-GMKENNNU.js")))},qe),x(()=>this.view?.spatialReference,(e,t)=>{e&&t&&!e.equals(t)&&this.cancel()})]),d0(this)}destroy(){this.cancel(),this._removeDefaultLayer(),this._defaultSnappingManager=se(this._defaultSnappingManager),this._set("snappingManager",null),this._set("view",null),this.emit("destroy")}get updating(){return this._numUpdating>0||this.snappingManager!=null&&this.snappingManager.updating}get activeTool(){return this._operationHandle?.tool??null}get activeComponent(){return this._operationHandle?.activeComponent??null}get createGraphic(){return this.activeComponent==null||this.activeComponent.type!=="draw-3d"&&this.activeComponent.type!=="draw-2d"?this._get("createGraphic"):this.activeComponent.graphic}get defaultCreateOptions(){return this._get("defaultCreateOptions")}set defaultCreateOptions(e){this._set("defaultCreateOptions",v(v({},hb),e))}get defaultUpdateOptions(){return this._get("defaultUpdateOptions")}set defaultUpdateOptions(e){this._set("defaultUpdateOptions",G(v(v({},xa),e),{reshapeOptions:v(v({},xa.reshapeOptions),e?.reshapeOptions),highlightOptions:v(v({},xa.highlightOptions),e?.highlightOptions)}))}get labelOptions(){return this.sketchOptions.labels}set labelOptions(e){this.sketchOptions.labels=e}get snappingOptions(){return this.snappingManager?.options??this._get("snappingOptions")}set snappingOptions(e){this._defaultSnappingManager!=null&&(this._defaultSnappingManager.options=e),this._set("snappingOptions",e)}get snappingManager(){return this._isOverridden("snappingManager")&&this._get("snappingManager"),this._defaultSnappingManager}set snappingManager(e){if(e)this._isOverridden("snappingManager")||(this._defaultSnappingManager=se(this._defaultSnappingManager)),this._override("snappingManager",e);else{let{view:t}=this;!this._defaultSnappingManager&&t&&(this._defaultSnappingManager=new vu({options:this.snappingOptions,view:t})),this._clearOverride("snappingManager")}}get state(){let e=!(!this.view?.ready||!this.layer),t=this._operationHandle;return e&&t?"active":e?"ready":"disabled"}get tooltipOptions(){return this.sketchOptions.tooltips}set tooltipOptions(e){this.sketchOptions.tooltips=e}get valueOptions(){return this.sketchOptions.values}set valueOptions(e){this.sketchOptions.values=e}get view(){return this._get("view")}set view(e){let t=this._get("view");if(t){let{container:i,map:o}=t;i&&(t.cursor=null),o?.remove(this._internalGraphicsLayer),this.removeHandles(this._viewHandlesKey),this.cancel()}let n="view-ready";this.removeHandles(n),e&&this.addHandles(ai(()=>e.ready,i=>{this.removeHandles(this._viewHandlesKey),i&&this.addHandles(this._generateViewHandles(e),this._viewHandlesKey)},qe),n),this._set("view",e)}cancel(){this._moduleLoaderAbortController=mn(this._moduleLoaderAbortController),this._viewReadyAbortController=mn(this._viewReadyAbortController),this._operationHandle&&this._operationHandle.cancel()}complete(){this._operationHandle&&this._operationHandle.complete()}delete(){let{state:e,updateGraphics:t}=this;if(e==="active"&&t.length){let{activeTool:n,layer:i}=this,o=t.toArray();i.removeMany(o),this.cancel(),this._emitDeleteEvent({graphics:o,tool:n})}}duplicate(){if(this.state==="active"&&this.updateGraphics.length){let e=this.updateGraphics.map(t=>t.clone()).toArray();return this.layer.addMany(e),this.emit("duplicate",{graphics:e,type:"duplicate"}),e}return[]}create(e,t){return I(this,null,function*(){this.cancel(),yield this._waitViewReady();let{view:n,layer:i}=this;if(!n||this.state==="disabled")throw i||this._logMissingLayer(),Ss();if(n.activeTool!=null&&(n.activeTool=null),!e)return void this._logError("sketch:missing-parameter","Missing parameter 'tool'.");_u(n,this._internalGraphicsLayer);let o=yield this._setupCreateOperation(e,t);if(o==null||this.destroyed)return void n.map.remove(this._internalGraphicsLayer);let s=()=>{if(o===this._operationHandle){let r=this.createGraphic,a=this._operationHandle.cancelled;this._operationHandle.destroy(),this._operationHandle=null,this._set("createGraphic",null),this.view?.map&&this.view.map.remove(this._internalGraphicsLayer),o.cancelled||r==null||i.add(r),this.emit("create",{graphic:r,state:a?"cancel":"complete",tool:e,toolEventInfo:null,type:"create"})}};o.on("complete",s),this._operationHandle=o,n.ready&&n.focus()})}place(e,t){return I(this,null,function*(){return this.create("mesh",v({mode:"click",hasZ:e.hasZ,geometryToPlace:e},t))})}update(e,t){return I(this,null,function*(){this.cancel(),yield this._waitViewReady();let{layer:n,view:i,state:o}=this;if(!i||o==="disabled")throw n||this._logMissingLayer(),Ss();i.activeTool!=null&&(i.activeTool=null);let s=Array.isArray(e)?e:[e];if(e==null||!s?.length)return void this._logError("sketch:missing-parameter","Missing parameter 'graphics'.");if(s.some(a=>a.layer!==n?(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics missing from the supplied GraphicsLayer."),!0):a.geometry==null&&(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics with an unsupported geometry."),!0)))return;let r=yield this._setupUpdateOperation(s,t);this.destroyed||r==null||it(r)||(_u(i,this._internalGraphicsLayer),this._setUpdateOperationHandle(r,t),this.emit("update",{graphics:s,state:"start",aborted:!1,tool:r.tool,toolEventInfo:null,type:"update"}))})}_updateSpatialReference(e){return I(this,null,function*(){let t=this.view;if(t){this._beginAsyncOperation(),e=Array.isArray(e)?e:[e];for(let n of e)n.geometry==null||n.geometry.type==="mesh"||Es(n.geometry.spatialReference,t.spatialReference)||(Ml(n.geometry.spatialReference,t.spatialReference)||Sl()||(yield Tl()),n.geometry=Yn(n.geometry,t.spatialReference));this._endAsyncOperation()}else this._logMissingView()})}undo(){this.canUndo()&&this._operationHandle?.undo()}redo(){this.canRedo()&&this._operationHandle?.redo()}canUndo(){return!!this._operationHandle?.canUndo()}canRedo(){return!!this._operationHandle?.canRedo()}toggleUpdateTool(){this._operationHandle?.toggleTool()}_getFirstHit(e){return I(this,null,function*(){let t=this.view;if(!t)return this._logMissingView(),null;if(t.type==="2d"){let o=[];t.map.allLayers.forEach(r=>{r.type!=="vector-tile"&&r.type!=="imagery"||o.push(r)});let s=yield t.hitTest(e,{exclude:o});return p0(s.results)}let n=[t.map.ground];t.map.allLayers.forEach(o=>{Eg(o.type)&&n.push(o)});let i=yield t.hitTest(e,{exclude:n});if(i.results.length>0){let o=i.results[0];if(o!=null&&o.type==="graphic"&&o.graphic&&(!i.ground.mapPoint||t.map.ground.opacity<1||i.ground.distance-(o.distance??0)>-Math.min(3*i.ground.distance,t.viewingMode==="global"?og(t.renderCoordsHelper.spatialReference).radius/t.renderCoordsHelper.unitInMeters:Number.POSITIVE_INFINITY)))return o}return null})}_generateViewHandles(e){return[e.on("immediate-click",t=>I(this,null,function*(){let n=this.state==="active"&&this._operationHandle?.type==="create";if(this.state==="disabled"||n||!this.updateOnGraphicClick)return;this._beginAsyncOperation();let i=yield t.async(()=>this._getFirstHit(di(t))),o=null;if(i!=null){let s=i.graphic;this.updateGraphics.includes(s)||s.layer===this.layer?(t.stopPropagation(),o=s):e.type!=="2d"||this._isComponentGraphic(s)||this.state!=="active"||this.cancel()}else this.state==="active"&&this.cancel();o==null||this.updateGraphics.includes(o)||(yield this.update([o],G(v({},this.defaultUpdateOptions),{reshapeOptions:v({},this.defaultUpdateOptions.reshapeOptions)}))),this._endAsyncOperation()}),be.WIDGET)]}_setupCreateOperation(e,t){return I(this,null,function*(){let n=this.view;if(!n)return this._logMissingView(),null;let i=v(v({hasZ:n.type==="3d"},this.defaultCreateOptions),t),o=yield this._setupDrawGraphicTool(e,n,i);return o==null?null:(n.tools.add(o),n.activeTool=o,this._setupCreateOperationHandle(o))})}_setupDrawGraphicTool(e,t,n){return I(this,null,function*(){if(e==="multipoint"&&t.type==="3d")return this._logError("sketch:create","Multipoint geometries are not supported in SceneView."),null;if(!t)return this._logMissingView(),null;let{cursor:i,defaultZ:o,hasZ:s,geometryToPlace:r,graphicProperties:a,mode:c,preserveAspectRatio:u}=n,p=e==="rectangle"||e==="circle"?"hybrid":"click",h=u??e!=="rectangle",m={centered:e!=="rectangle"&&!(e==="circle"&&!h),cursor:i,defaultZ:o,forceUniformSize:h,graphicProperties:a,geometryToPlace:r,geometryType:e,graphicSymbol:this._getGraphicSymbolFromTool(e),hasZ:s,mode:c??p,snappingManager:this.snappingManager,snapToScene:!1,view:t};return t.type==="2d"?this._makeDrawGraphicTool2D(m):this._makeDrawGraphicTool3D(m)})}_makeDrawGraphicTool2D(e){return I(this,null,function*(){let t=yield this._requireModule(import("./chunk-CTF447HT.js"));return it(t)||this.destroyed?null:new t.module.DrawGraphicTool2D(G(v({},e),{activeVertexSymbol:this.activeVertexSymbol,regularVerticesSymbol:this.vertexSymbol,activeLineSymbol:this.activeLineSymbol,activeFillSymbol:mM(e.geometryType)?this.activeFillSymbol:null,sketchOptions:this.sketchOptions}))})}_makeDrawGraphicTool3D(e){return I(this,null,function*(){let t=yield this._requireModule(import("./chunk-Z4YWSKAI.js"));if(it(t)||this.destroyed)return null;let{elevationInfo:n}=this.layer;return new t.module.DrawGraphicTool3D(G(v({},e),{elevationInfo:n,snapToScene:!0,sketchOptions:this.sketchOptions}))})}_setupCreateOperationHandle(e){let t=this.view;if(!t)return this._logMissingView(),null;let n=null,i=e.forceUniformSize,o=e.centered,s=[t.on("key-down",a=>{if(a.key===Te.pan)a.stopPropagation(),a.repeat||(e.enabled=!1);else if(a.key===Te.complete)a.stopPropagation(),e.completeCreateOperation();else if(a.key!==Te.vertexAdd||a.repeat)a.key===Te.undo?(a.stopPropagation(),r.undo()):a.key===Te.redo?(a.stopPropagation(),r.redo()):a.key!==Te.constraint||e.geometryType!=="rectangle"&&e.geometryType!=="circle"||a.repeat?a.key===Te.center&&(a.repeat||(e.centered=!o,a.stopPropagation())):(e.forceUniformSize=!i,a.stopPropagation());else{let c=e.drawOperation.geometryType;c!=="polyline"&&c!=="polygon"&&c!=="multipoint"||(a.stopPropagation(),e.drawOperation.commitStagedVertex())}},be.WIDGET),t.on("key-up",a=>{a.key===Te.pan?e.enabled=!0:a.key!==Te.constraint||e.geometryType!=="rectangle"&&e.geometryType!=="circle"?a.key===Te.center&&(e.centered=o,a.stopPropagation()):(e.forceUniformSize=i,a.stopPropagation())},be.WIDGET),e.on("vertex-add",a=>{switch(n=n==null?"start":"active",a.operation){case"apply":this.emit("create",{graphic:e.graphic,state:n,tool:this.activeTool,toolEventInfo:a,type:"create"});break;case"undo":this._emitUndoEvent({graphics:[e.graphic],tool:e.geometryType});break;case"redo":this._emitRedoEvent({graphics:[e.graphic],tool:e.geometryType})}}),e.on("cursor-update",a=>{e.drawOperation.numCommittedVertices>0&&this.emit("create",{graphic:e.graphic,state:"active",tool:this.activeTool,toolEventInfo:{coordinates:a.vertices[0].coordinates,type:"cursor-update"},type:"create"})}),e.on("vertex-remove",a=>{switch(a.operation){case"apply":this.emit("create",{graphic:e.graphic,state:"active",tool:this.activeTool,toolEventInfo:a,type:"create"});break;case"undo":this._emitUndoEvent({graphics:[e.graphic],tool:e.geometryType});break;case"redo":this._emitRedoEvent({graphics:[e.graphic],tool:e.geometryType})}}),e.on("complete",a=>{this._set("createGraphic",a.graphic),n="complete",a.aborted?r&&r.cancel():r&&r.complete()}),x(()=>this._getGraphicSymbolFromTool(e.geometryType),a=>{e.graphicSymbol=a})],r=new Ia({activeComponent:e,tool:e.geometryType,type:"create",onEnd:()=>{s.forEach(a=>a.remove()),s.length=0,t.tools?.remove(e)},undo:()=>{e.canUndo&&e.undo()},redo:()=>{e.canRedo&&e.redo()},canUndo:()=>e.canUndo,canRedo:()=>e.canRedo});return r}_getGraphicSymbolFromTool(e){switch(e){case"point":case"multipoint":return this.pointSymbol;case"polyline":return this.polylineSymbol;case"circle":case"rectangle":case"polygon":return this.polygonSymbol;case"mesh":return this.meshSymbol}}_setupUpdateOperation(e,t){return I(this,null,function*(){let{layer:n,view:i}=this;if(!i)return this._logMissingView(),null;let o=G(v(v({},this.defaultUpdateOptions),t),{reshapeOptions:v(v({},this.defaultUpdateOptions.reshapeOptions),t?.reshapeOptions),highlightOptions:v(v({},this.defaultUpdateOptions.highlightOptions),t?.highlightOptions)}),s=o.tool??xa.tool;for(let r of e)n.remove(r),n.add(r);if(i.type==="3d"){if(e.length===0)return null;switch(s){case"move":return this._setupMove3DOperation(e,o,i,s);case"reshape":return e.length>1?(this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null):this._setupReshape3DOperation(e[0],o,i);case"transform":return this._setupGraphicTransform3DOperation(e,o,i)}}switch(s){case"move":return this._setupMove2DOperation(e,o,i);case"reshape":return e.length>1?(this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null):this._setupTransformOrReshape2DOperation(e,s,o,i);case"transform":if(e.length===1){let r=e[0].geometry?.type;r!=="point"&&r!=="multipoint"||(s="reshape")}return this._setupTransformOrReshape2DOperation(e,s,o,i)}})}_setupMove3DOperation(e,t,n,i,o=!1){return I(this,null,function*(){let s=yield this._requireModule(import("./chunk-Z4YWSKAI.js"));if(it(s))return s;let{ManipulatedObject3DGraphic:r,MoveTool3D:a}=s.module,c=new Map,u=()=>{c.forEach(f=>f.destroy()),c.clear()};for(let f of e){let S=new r({view:n,graphic:f}),A=a0(S);if(A!==ht.SUPPORTED)return u(),this._logError("sketch:move",`Move operation not supported for provided graphic(s) (${gu(A)}).`),null;c.set(f,S)}let p=new a({view:n,enableZ:t.enableZ,snappingManager:this.snappingManager,sketchOptions:this.sketchOptions});n.tools.add(p),p.objects.addMany(Array.from(c.values())),o||this.updateGraphics.addMany(e);let h=[],m=new on({activeComponent:p,tool:i,type:"update",onEnd:()=>{h.forEach(f=>f.remove()),h.length=0,n.tools?.remove(p),p.destroyed||p.destroy(),u()},undo:()=>{fb(this.view,p),Wc(m,this.updateGraphics.toArray()),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:i})},redo:()=>{qc(m,this.updateGraphics.toArray()),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:i})},addToSelection:f=>{this.updateGraphics.push(f);let S=new r({view:n,graphic:f});c.set(f,S),p.objects.push(S),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[f],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:f=>{let S=this.updateGraphics.indexOf(f);if(m.history.undo.forEach(H=>H.updates.splice(S,1)),m.history.redo.forEach(H=>H.updates.splice(S,1)),this.updateGraphics.remove(f),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[f],type:"selection-change"},type:"update"}),this.updateGraphics.length===0)return void m.complete();let A=c.get(f);A&&(p.objects.remove(A),A.destroy(),c.delete(f))},toggleTool:()=>I(this,null,function*(){if(this.updateGraphics.length!==1||t.toggleToolOnClick===!1||i!=="transform")return;let f=this.updateGraphics.at(0),S=yield this._setupReshape3DOperation(f,t,n,!0);S&&!it(S)&&(m.onEnd(),m.destroy(),this._setUpdateOperationHandle(S,t))})});return h.push(...this._getHandlesForComponent(m,t),n.on("immediate-click",f=>this._getCommonUpdateOperationClickHandlers(m,f,t),be.WIDGET),n.on("key-down",f=>{this._getCommonUpdateOperationKeyDownHandlers(m,f)},be.WIDGET)),m})}_setupGraphicTransform3DOperation(e,t,n,i=!1){if(e.length===1&&pb(e[0])===ht.SUPPORTED){let o=e[0],s=o.geometry;if(s!=null&&(s.type==="point"||s.type==="mesh"))return this._setupPointTransform3DOperation(o,t,n);if(s!=null&&(s.type==="polygon"||s.type==="polyline"))return this._setupPolyTransform3DOperation(o,t,n,i)}return this._setupMove3DOperation(e,t,n,"transform",i)}_setupPointTransform3DOperation(e,t,n){return I(this,null,function*(){let i="transform",{enableRotation:o,enableScaling:s,enableZ:r}=t,a=yield this._requireModule(import("./chunk-Z4YWSKAI.js"));if(it(a))return a;let{TransformTool3D:c,ManipulatedObject3DGraphic:u}=a.module,p=new u({graphic:e,view:n}),h=new c({object:p,view:n,enableRotation:o,enableScaling:s,enableZ:r,snappingManager:this.snappingManager,sketchOptions:this.sketchOptions});n.tools.add(h),this.updateGraphics.add(e);let m=[],f=new on({activeComponent:h,tool:i,type:"update",onEnd:()=>{m.forEach(S=>S.remove()),m.length=0,n.tools?.remove(h),h.destroyed||h.destroy(),p.destroy()},undo:()=>{fb(this.view,h),Wc(f,this.updateGraphics.toArray()),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:i})},redo:()=>{qc(f,this.updateGraphics.toArray()),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:i})},addToSelection:S=>I(this,null,function*(){this.updateGraphics.add(S),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[S],removed:[],type:"selection-change"},type:"update"}),f.onEnd(),f.destroy();let A=yield this._setupMove3DOperation(this.updateGraphics.toArray(),t,n,"transform",!0);it(A)||this._setUpdateOperationHandle(A,t)}),removeFromSelection:S=>{this.updateGraphics.remove(S),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[S],type:"selection-change"},type:"update"}),f.complete()},toggleTool:()=>{}});return m.push(...this._getHandlesForComponent(f,t),n.on("immediate-click",S=>this._getCommonUpdateOperationClickHandlers(f,S,t),be.WIDGET),n.on("key-down",S=>{this._getCommonUpdateOperationKeyDownHandlers(f,S)},be.WIDGET)),f})}_setupPolyTransform3DOperation(e,t,n,i=!1){return I(this,null,function*(){let o="transform",{enableRotation:s,enableScaling:r,enableZ:a,preserveAspectRatio:c}=t,u=yield this._requireModule(import("./chunk-Z4YWSKAI.js"));if(it(u))return u;let{ManipulatedObject3DGraphic:p,ExtentTransformTool:h}=u.module,m=this.view?.inputManager?.isModifierKeyDown(Te.constraint),f=new p({view:n,graphic:e}),S=new h({object:f,view:n,enableRotation:s,enableScaling:r,enableZ:a,preserveAspectRatio:!!c!=!!m,sketchOptions:this.sketchOptions});n.tools.add(S),i||this.updateGraphics.add(e);let A=[],H=new on({activeComponent:S,tool:o,type:"update",onEnd:()=>{A.forEach(N=>N.remove()),A.length=0,n.tools?.remove(S),S.destroyed||S.destroy(),f.destroy()},canUndo:()=>S.canUndo,undo:()=>{S.undo(),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:o})},canRedo:()=>S.canRedo,redo:()=>{S.redo(),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:o})},addToSelection:N=>I(this,null,function*(){this.updateGraphics.add(N),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[N],removed:[],type:"selection-change"},type:"update"}),H.onEnd(),H.destroy();let K=yield this._setupMove3DOperation(this.updateGraphics.toArray(),t,n,"transform",!0);it(K)||this._setUpdateOperationHandle(K,t)}),removeFromSelection:N=>{this.updateGraphics.remove(N),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[N],type:"selection-change"},type:"update"}),H.complete()},toggleTool:()=>I(this,null,function*(){if(this.updateGraphics.length!==1||t.toggleToolOnClick===!1)return;let N=yield this._setupReshape3DOperation(e,t,n,!0);N&&!it(N)&&(H.onEnd(),H.destroy(),this._setUpdateOperationHandle(N,t))})});return A.push(...this._getHandlesForComponent(H,t),n.on("immediate-click",N=>this._getCommonUpdateOperationClickHandlers(H,N,t),be.WIDGET),n.on("key-down",N=>this._getCommonUpdateOperationKeyDownHandlers(H,N),be.WIDGET),n.on("key-down",N=>{N.key!==Te.constraint||N.repeat||(S.preserveAspectRatio=!S.preserveAspectRatio,N.stopPropagation())},be.WIDGET),n.on("key-up",N=>{N.key===Te.constraint&&(S.preserveAspectRatio=!S.preserveAspectRatio,N.stopPropagation())},be.WIDGET)),H})}_setupMove2DOperation(e,t,n){return I(this,null,function*(){let i="move";this.updateGraphics.addMany(e),yield this._updateSpatialReference(e);let o=yield this._getGraphicMover(e,t,n);if(it(o))return o;let s=new on({activeComponent:o,tool:i,type:"update",onEnd:()=>{this._displayDefaultCursor(),c.forEach(u=>u.remove()),a.forEach(u=>u.remove()),c=[],a=[],o.destroy(),this._internalGraphicsLayer?.removeMany([...this.updateGraphics.toArray()])},undo:()=>{let u=this.updateGraphics.toArray();Wc(s,u),s.refreshComponent(),this._emitUndoEvent({graphics:u,tool:i})},redo:()=>{let u=this.updateGraphics.toArray();qc(s,u),s.refreshComponent(),this._emitRedoEvent({graphics:u,tool:i})},addToSelection:u=>I(this,null,function*(){yield this._updateSpatialReference(u),this.updateGraphics.push(u),o.graphics=this.updateGraphics.toArray(),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[u],removed:[],type:"selection-change"},type:"update"})}),removeFromSelection:u=>{let p=this.updateGraphics.indexOf(u);s.history.undo.forEach(m=>m.updates.splice(p,1)),s.history.redo.forEach(m=>m.updates.splice(p,1)),this.updateGraphics.remove(u);let h=this.updateGraphics.toArray();this.emit("update",{graphics:h,state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[u],type:"selection-change"},type:"update"}),this.updateGraphics.length!==0?o.graphics=h:s.complete()}}),r=!1,a=[n.on("immediate-click",u=>this._getCommonUpdateOperationClickHandlers(s,u,t),be.WIDGET),n.on("key-down",u=>{this._getCommonUpdateOperationKeyDownHandlers(s,u),u.key!==Te.constraint||u.repeat||(r=!0,o.enableMoveAllGraphics=!o.enableMoveAllGraphics)},be.WIDGET),n.on("key-up",u=>{u.key===Te.constraint&&r&&(r=!1,o.enableMoveAllGraphics=!o.enableMoveAllGraphics)},be.WIDGET)],c=this._getHandlesForComponent(s,t);return s})}_setupReshape3DOperation(e,t,n,i=!1){return I(this,null,function*(){let o="reshape",s=yield this._requireModule(import("./chunk-Z4YWSKAI.js"));if(it(s))return s;let{ManipulatedObject3DGraphic:r,ReshapeTool3D:a}=s.module,c=new r({view:n,graphic:e}),u=ub(c);if(u!==ht.SUPPORTED)return c.destroy(),this._logError("sketch:reshape",`Reshape operation not supported for provided graphic(s) (${gu(u)}).`),null;let p=t.reshapeOptions,h=new a({view:n,object:c,enableZVertex:t.enableZ&&p?.vertexOperation==="move",enableZShape:t.enableZ&&p?.shapeOperation==="move",enableMoveObject:p?.shapeOperation==="move"||p?.shapeOperation==="move-xy",enableMidpoints:p?.edgeOperation==="split",enableEdgeOffset:p?.edgeOperation==="offset",snappingManager:this.snappingManager,sketchOptions:this.sketchOptions});n.tools.add(h),i||this.updateGraphics.add(c.graphic);let m=[],f=new on({activeComponent:h,tool:o,type:"update",onEnd:()=>{m.forEach(S=>S.remove()),m.length=0,n.tools?.remove(h),h.destroyed||h.destroy(),c.destroy()},canUndo:()=>h.canUndo,undo:()=>{h.undo(),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:o})},canRedo:()=>h.canRedo,redo:()=>{h.redo(),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:o})},addToSelection:S=>I(this,null,function*(){this.updateGraphics.add(S),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[S],removed:[],type:"selection-change"},type:"update"}),f.onEnd(),f.destroy();let A=yield this._setupMove3DOperation(this.updateGraphics.toArray(),t,n,"transform",!0);it(A)||this._setUpdateOperationHandle(A,t)}),removeFromSelection:S=>{this.updateGraphics.remove(S),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[S],type:"selection-change"},type:"update"}),f.complete()},toggleTool:()=>I(this,null,function*(){if(t.toggleToolOnClick===!1)return;f.onEnd(),f.destroy();let S=yield this._setupGraphicTransform3DOperation(this.updateGraphics.toArray(),t,n,!0);it(S)||this._setUpdateOperationHandle(S,t)})});return m.push(...this._getHandlesForComponent(f,t),n.on("immediate-click",S=>this._getCommonUpdateOperationClickHandlers(f,S,t),be.WIDGET),n.on("key-down",S=>{this._getCommonUpdateOperationKeyDownHandlers(f,S)},be.WIDGET)),f})}_setupTransformOrReshape2DOperation(e,t,n,i){return I(this,null,function*(){this.updateGraphics.addMany(e),yield this._updateSpatialReference(e);let o=t==="transform"?yield this._getBox(e,n,i):yield this._getReshape(e,n,i);if(it(o))return o;let s=new on({activeComponent:o,type:"update",onEnd:()=>{a.forEach(c=>c.remove()),r.forEach(c=>c.remove()),a=[],r=[],s.activeComponent&&!s.activeComponent.destroyed&&s.activeComponent.destroy(),this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray())},undo:()=>{Wc(s,this.updateGraphics.toArray()),s.refreshComponent(),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:s.tool})},redo:()=>{qc(s,this.updateGraphics.toArray()),s.refreshComponent(),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:s.tool})},addToSelection:c=>I(this,null,function*(){let u=s.activeComponent;if(u?.type==="reshape"){let p=[...this.updateGraphics,c];this.updateGraphics.removeAll(),s.onEnd(),s.destroy();let h=yield this._setupTransformOrReshape2DOperation(p,"transform",n,i);if(it(h))return;this._setUpdateOperationHandle(h,n)}else this.updateGraphics.add(c),u.graphics=this.updateGraphics.toArray(),u.refresh(),s.resetHistory();this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[c],removed:[],type:"selection-change"},type:"update"})}),removeFromSelection:c=>I(this,null,function*(){let u=this.updateGraphics.indexOf(c);s.history.undo.forEach(h=>h.updates.splice(u,1)),s.history.redo.forEach(h=>h.updates.splice(u,1)),this.updateGraphics.remove(c);let p=this.updateGraphics.toArray();if(p.length===0)s.complete();else{let h=p[0].geometry;p.length!==1||h==null||h.type!=="point"&&h.type!=="multipoint"?s.activeComponent.graphics=p:s.toggleTool()}this.emit("update",{graphics:p,state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[c],type:"selection-change"},type:"update"})}),toggleTool:()=>I(this,null,function*(){if(this.updateGraphics.length>1)return;let c=this.updateGraphics.at(0),u=c.geometry;if(u!=null&&(s.tool==="reshape"&&(u.type==="point"||u.type==="multipoint")||s.tool==="transform"&&u.type==="extent"))return;let p=null;s.tool==="transform"?p=yield this._getReshape([c],n,i):s.tool==="reshape"&&(p=yield this._getBox([c],n,i)),it(p)||(s.activeComponent?.destroy(),s.activeComponent=p,s.activeComponent&&(a.forEach(h=>h.remove()),a=this._getHandlesForComponent(s,n)))})}),r=[i.on("immediate-click",c=>this._getCommonUpdateOperationClickHandlers(s,c,n),be.WIDGET),i.on("key-down",c=>{if(this._getCommonUpdateOperationKeyDownHandlers(s,c),c.key===Te.constraint&&!c.repeat&&s){let u=s.activeComponent;u&&u.type==="box"&&(u.preserveAspectRatio=!u.preserveAspectRatio)}},be.WIDGET),i.on("key-up",c=>{if(c.key===Te.constraint&&s){let u=s.activeComponent;u&&u.type==="box"&&(u.preserveAspectRatio=!u.preserveAspectRatio)}},be.WIDGET)],a=this._getHandlesForComponent(s,n);return s})}_getGraphicMover(e,t,n){return I(this,null,function*(){let{enableMoveAllGraphics:i,highlightOptions:o}=t,s=yield this._requireModule(import("./chunk-BKFQMIA6.js"));return it(s)?s:new s.module.default({enableMoveAllGraphics:i,highlightsEnabled:!!o?.enabled,indicatorsEnabled:!1,graphics:e,view:n,callbacks:{onGraphicMoveStart:({dx:r,dy:a,graphic:c})=>{this._displayGrabbingCursor(),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:r,dy:a,mover:c,type:"move-start"},type:"update"})},onGraphicMove:({dx:r,dy:a,graphic:c})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:r,dy:a,mover:c,type:"move"},type:"update"}),onGraphicMoveStop:({dx:r,dy:a,graphic:c})=>{this._displayPointerCursor(),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:r,dy:a,mover:c,type:"move-stop"},type:"update"})},onGraphicPointerOver:()=>this._displayPointerCursor(),onGraphicPointerOut:()=>this._displayDefaultCursor()}})})}_getBox(e,t,n){return I(this,null,function*(){let{enableRotation:i,enableScaling:o,highlightOptions:s,preserveAspectRatio:r}=t,a=yield this._requireModule(import("./chunk-5BZOO7C5.js"));if(it(a))return a;let c=this.view?.inputManager?.isModifierKeyDown(Te.constraint);return new a.module.default({graphics:e,enableRotation:i,enableScaling:o,highlightsEnabled:!!s?.enabled,preserveAspectRatio:!!r!=!!c,layer:this._internalGraphicsLayer,view:n,sketchOptions:this.sketchOptions,callbacks:{onMoveStart:u=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:v({},u),type:"update"}),onMove:u=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:v({},u),type:"update"}),onMoveStop:u=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:v({},u),type:"update"}),onScaleStart:u=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:v({},u),type:"update"}),onScale:u=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:v({},u),type:"update"}),onScaleStop:u=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:v({},u),type:"update"}),onRotateStart:u=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:v({},u),type:"update"}),onRotate:u=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:v({},u),type:"update"}),onRotateStop:u=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:v({},u),type:"update"})}})})}_getReshape(e,t,n){return I(this,null,function*(){let i=t.reshapeOptions?.edgeOperation==="split",o=t.reshapeOptions?.shapeOperation==="move",s=!!t.highlightOptions?.enabled,r=yield this._requireModule(import("./chunk-3EGHHX2T.js"));return it(r)?r:new r.module.default({enableMidpoints:i,enableMovement:o,graphic:e[0],highlightsEnabled:s,layer:this._internalGraphicsLayer,snappingManager:this.snappingManager,sketchOptions:this.sketchOptions,view:n,callbacks:{onReshapeStart:a=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:v({},a),type:"update"}),onReshape:a=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:v({},a),type:"update"}),onReshapeStop:({mover:a,type:c})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:a,type:c},type:"update"}),onMoveStart:({dx:a,dy:c,mover:u,type:p})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:a,dy:c,mover:u,type:p},type:"update"}),onMove:({dx:a,dy:c,mover:u,type:p})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:a,dy:c,mover:u,type:p},type:"update"}),onMoveStop:({dx:a,dy:c,mover:u,type:p})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:a,dy:c,mover:u,type:p},type:"update"}),onVertexAdd:({added:a,type:c,vertices:u})=>{let p=a.map(h=>Kd(h.geometry));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:p,vertices:u,type:c},type:"update"})},onVertexRemove:({removed:a,type:c,vertices:u})=>{let p=a.map(h=>Kd(h.geometry));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{removed:p,vertices:u,type:c},type:"update"})}}})})}_getHandlesForComponent(e,t){let n=e.activeComponent;if(!n)return[];switch(n.type){case"graphic-mover":return[n.on("graphic-click",({graphic:i,viewEvent:o})=>{o.native?.shiftKey&&(o.stopPropagation(),e.removeFromSelection(i))}),n.on("graphic-move-start",i=>e.addToHistory(ro(i.allGraphics)))];case"box":return[n.on("graphic-click",i=>this._onTransformOrReshape2DGraphicClick(e,t,i)),n.on("move-start",i=>e.addToHistory(ro(i.graphics))),n.on("rotate-start",i=>e.addToHistory(ro(i.graphics))),n.on("scale-start",i=>e.addToHistory(ro(i.graphics)))];case"reshape":return[n.on("graphic-click",i=>this._onTransformOrReshape2DGraphicClick(e,t,i)),n.on("move-start",i=>e.addToHistory(ro([i.mover]))),n.on("reshape-start",i=>e.addToHistory(ro([i.graphic]))),n.on("vertex-add",i=>e.addToHistory(ro([i.oldGraphic]))),n.on("vertex-remove",i=>e.addToHistory(ro([i.oldGraphic])))];case"move-3d":return[n.events.on("record-undo",({updates:i})=>{e.addToHistory({updates:i})}),n.events.on("move-start",i=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,mover:i.objects.length>0?i.objects[0].graphic:null,type:"move-start"},type:"update"})}),n.events.on("move",i=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:i.dx,dy:i.dy,mover:i.objects.length>0?i.objects[0].graphic:null,type:"move"},type:"update"})}),n.events.on("move-stop",i=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,mover:i.objects.length>0?i.objects[0].graphic:null,type:"move-stop"},type:"update"})}),n.events.on("immediate-click",i=>{i.shiftKey?this._toggleSelection([i.object.graphic],e,t):e.toggleTool()})];case"transform-3d":return[n.events.on("record-undo",({updates:i})=>{e.addToHistory({updates:i})}),n.events.on("translate-start",i=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:i.object.graphic,dx:i.dxScreen,dy:i.dyScreen,type:"move-start"},type:"update"})}),n.events.on("translate-stop",i=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:i.object.graphic,dx:i.dxScreen,dy:i.dyScreen,type:"move-stop"},type:"update"})}),n.events.on("rotate-start",i=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:i.object.graphic,angle:i.angle,type:"rotate-start"},type:"update"})}),n.events.on("rotate-stop",i=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:i.object.graphic,angle:i.angle,type:"rotate-stop"},type:"update"})}),n.events.on("scale-start",i=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:i.object.graphic,xScale:i.xScale,yScale:i.yScale,type:"scale-start"},type:"update"})}),n.events.on("scale-stop",i=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:i.object.graphic,xScale:i.xScale,yScale:i.yScale,type:"scale-stop"},type:"update"})}),n.events.on("translate",i=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:i.object.graphic,dx:i.dxScreen,dy:i.dyScreen,type:"move"},type:"update"})}),n.events.on("rotate",i=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:i.object.graphic,angle:i.angle,type:"rotate"},type:"update"})}),n.events.on("scale",i=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:i.object.graphic,xScale:i.xScale,yScale:i.yScale,type:"scale"},type:"update"})}),n.events.on("immediate-click",i=>{i.shiftKey?this._toggleSelection([i.object.graphic],e,t):e.toggleTool()})];case"reshape-3d":return[n.events.on("reshape",i=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:G(v({},i),{mover:i.object.graphic}),type:"update"})}),n.events.on("move",i=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:G(v({},i),{mover:i.object.graphic}),type:"update"})}),n.events.on("vertex-add",i=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:i,type:"update"})}),n.events.on("vertex-remove",i=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:i,type:"update"})}),n.events.on("immediate-click",i=>{i.shiftKey?this._toggleSelection([i.object.graphic],e,t):e.toggleTool()})]}}_onTransformOrReshape2DGraphicClick(e,t,n){let{graphic:i,viewEvent:o}=n;return o.native?.shiftKey&&i.layer===this.layer?(o.stopPropagation(),e.removeFromSelection(i)):t.toggleToolOnClick?(o.stopPropagation(),e.toggleTool()):void 0}_setUpdateOperationHandle(e,t){this._operationHandle=e;let n=this.view?.map;this._disablePopup(t);let i=()=>{if(e===this._operationHandle){let o=this.updateGraphics.toArray(),s=this._operationHandle.tool;this._operationHandle.destroy(),this._operationHandle=null,this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray()),this.updateGraphics.removeAll(),n&&n.remove(this._internalGraphicsLayer),this._restorePopup(t),this.emit("update",{graphics:o,state:"complete",aborted:e.cancelled,tool:s,toolEventInfo:null,type:"update"})}};e.on("complete",i)}_getCommonUpdateOperationClickHandlers(e,t,n){return I(this,null,function*(){let i=di(t),o=yield t.async(()=>this._getFirstHit(i));if(o==null)return void e.complete();if(t.native.shiftKey&&this._toggleSelection([o.graphic],e,n))return void t.stopPropagation();this.updateGraphics.includes(o.graphic)?t.stopPropagation():e.complete()})}_toggleSelection(e,t,n){let i=!!n.multipleSelectionEnabled;return e.some(o=>o!=null&&!(!i||o.layer!==this.layer)&&(this.updateGraphics.includes(o)?t.removeFromSelection(o):t.addToSelection(o),!0))}_getCommonUpdateOperationKeyDownHandlers(e,t){if(!e)return;let n=t.key;n===Te.undo&&e.canUndo()?(t.stopPropagation(),e.undo()):n===Te.redo&&e.canRedo()?(t.stopPropagation(),e.redo()):n===Te.cancel?(t.stopPropagation(),e.cancel()):this.allowDeleteKey&&Te.delete.includes(n)&&this._onDeleteKey(t)}_onDeleteKey(e){if(!this._operationHandle||this._operationHandle.type!=="update")return;let t=this.activeComponent,n=this.updateGraphics.toArray();t!=null&&(t.type!=="reshape"||n.length===1&&n[0].geometry?.type==="point")&&(e.stopPropagation(),this.delete())}_removeDefaultLayer(){this._internalGraphicsLayer&&(this.view?.map?.remove(this._internalGraphicsLayer),this._internalGraphicsLayer=se(this._internalGraphicsLayer))}_isComponentGraphic(e){let{activeComponent:t}=this;return!(!e||t==null)&&(e.attributes?.esriSketchTool||t.type==="draw-2d"&&t.graphic===e||(t.type==="box"||t.type==="reshape")&&t.isUIGraphic(e))}_displayPointerCursor(){this.view?.container&&this.view.cursor!=="pointer"&&(this.view.cursor="pointer")}_displayGrabbingCursor(){this.view?.container&&this.view.cursor!=="grabbing"&&(this.view.cursor="grabbing")}_displayDefaultCursor(){this.view?.container&&this.view.cursor!==null&&(this.view.cursor=null)}_logError(e,t,n){Z.getLogger(this).error(new ne(e,t,n))}_requireModule(e){return I(this,null,function*(){let t=new AbortController;this._moduleLoaderAbortController=t;let n=yield e;return this._moduleLoaderAbortController!==t||t.signal.aborted?{requireError:"aborted"}:{module:n}})}_emitUndoEvent(e){this.emit("undo",G(v({},e),{type:"undo"}))}_emitRedoEvent(e){this.emit("redo",G(v({},e),{type:"redo"}))}_emitDeleteEvent(e){this.emit("delete",G(v({},e),{type:"delete"}))}get test(){}wait(){return gn(()=>!this.updating)}_beginAsyncOperation(){this._numUpdating+=1,this.notifyChange("updating")}_endAsyncOperation(){this._numUpdating-=1,this.notifyChange("updating")}_disablePopupEnabled(e){return this.view?.type!=="3d"||this.updateOnGraphicClick||(e?.toggleToolOnClick??!1)}_disablePopup(e){this._disablePopupEnabled(e)&&this.view&&this._originalPopupEnabled==null&&(this._originalPopupEnabled=this.view.popupEnabled,this.view.popupEnabled=!1)}_restorePopup(e){this._disablePopupEnabled(e)&&this.view&&this._originalPopupEnabled!=null&&(this.view.popupEnabled=this._originalPopupEnabled,this._originalPopupEnabled=null)}_waitViewReady(){return I(this,null,function*(){let e=this.view;e?(mn(this._viewReadyAbortController),this._viewReadyAbortController=new AbortController,yield $n(gn(()=>e?.ready),this._viewReadyAbortController.signal)):this._logMissingView()})}_logMissingView(){this._logError("sketch:missing-property",mb("view"))}_logMissingLayer(){this._logError(hM,mb("layer"))}};l([d()],_e.prototype,"_defaultSnappingManager",void 0),l([d()],_e.prototype,"updating",null),l([d()],_e.prototype,"_operationHandle",void 0),l([d({readOnly:!0})],_e.prototype,"activeTool",null),l([d()],_e.prototype,"activeFillSymbol",void 0),l([d()],_e.prototype,"activeLineSymbol",void 0),l([d()],_e.prototype,"activeVertexSymbol",void 0),l([d()],_e.prototype,"allowDeleteKey",void 0),l([d({readOnly:!0})],_e.prototype,"createGraphic",null),l([d()],_e.prototype,"defaultCreateOptions",null),l([d()],_e.prototype,"defaultUpdateOptions",null),l([d({type:l0,nonNullable:!0})],_e.prototype,"labelOptions",null),l([d()],_e.prototype,"layer",void 0),l([d({types:jr})],_e.prototype,"pointSymbol",void 0),l([d({types:jr})],_e.prototype,"polygonSymbol",void 0),l([d({types:jr})],_e.prototype,"polylineSymbol",void 0),l([d()],_e.prototype,"meshSymbol",void 0),l([d({type:Ps,nonNullable:!0})],_e.prototype,"snappingOptions",null),l([d()],_e.prototype,"snappingManager",null),l([d({readOnly:!0})],_e.prototype,"state",null),l([d({type:c0,nonNullable:!0})],_e.prototype,"tooltipOptions",null),l([d({readOnly:!0})],_e.prototype,"updateGraphics",void 0),l([d()],_e.prototype,"updateOnGraphicClick",void 0),l([d({type:Nl,nonNullable:!0})],_e.prototype,"valueOptions",null),l([d({types:jr})],_e.prototype,"vertexSymbol",void 0),l([d({value:null})],_e.prototype,"view",null),l([d({constructOnly:!0,type:Fs})],_e.prototype,"sketchOptions",void 0),_e=l([b("esri.widgets.Sketch.SketchViewModel")],_e);var hM="sketch:missing-property",mb=e=>`Property '${e}' is missing on SketchViewModel.`;function mM(e){return e==="polygon"||e==="rectangle"||e==="circle"}function Wc(e,t){gb("undo",e.history.undo,e.history.redo,t)}function qc(e,t){gb("redo",e.history.redo,e.history.undo,t)}function gb(e,t,n,i){let o=t.pop();if(!o)return;let s=o.updates,r=[];i.forEach((a,c)=>{let u=s[c];u!=null&&("geometry"in u&&u.geometry!=null&&(r.push({geometry:a.geometry}),a.geometry=u.geometry),"symbol"in u&&u.symbol!=null&&(r.push({symbol:a.symbol}),a.symbol=u.symbol),"undo"in u&&(r.push(u),u[e](a)))}),n.push({updates:r})}function fb(e,t){e!=null&&t.hasGrabbedManipulators&&(e.activeTool=null)}function ro(e){return{updates:e.map(({geometry:t})=>t?.type==="mesh"?{geometry:t.cloneShallow()}:{geometry:t})}}function it(e){return"requireError"in e&&e.requireError==="aborted"}var _b=_e;var On=class extends P{constructor(e){super(e),this.enabledToggle=!0,this.featureEnabledToggle=!0,this.header=!1,this.layerList=!0,this.layerListToggleLayersButton=!0,this.selfEnabledToggle=!0}};l([d({type:Boolean,nonNullable:!0})],On.prototype,"enabledToggle",void 0),l([d({type:Boolean,nonNullable:!0})],On.prototype,"featureEnabledToggle",void 0),l([d({type:Boolean,nonNullable:!0})],On.prototype,"header",void 0),l([d({type:Boolean,nonNullable:!0})],On.prototype,"layerList",void 0),l([d({type:Boolean,nonNullable:!0})],On.prototype,"layerListToggleLayersButton",void 0),l([d({type:Boolean,nonNullable:!0})],On.prototype,"selfEnabledToggle",void 0),On=l([b("esri.widgets.support.SnappingControls.VisibleElements")],On);var ur=On;var Gi=class extends P{constructor(e){super(e),this.point=!0,this.polyline=!0,this.polygon=!0,this.rectangle=!0,this.circle=!0,this.multipoint=!0,this.mesh=!0}};l([d({type:Boolean,nonNullable:!0})],Gi.prototype,"point",void 0),l([d({type:Boolean,nonNullable:!0})],Gi.prototype,"polyline",void 0),l([d({type:Boolean,nonNullable:!0})],Gi.prototype,"polygon",void 0),l([d({type:Boolean,nonNullable:!0})],Gi.prototype,"rectangle",void 0),l([d({type:Boolean,nonNullable:!0})],Gi.prototype,"circle",void 0),l([d({type:Boolean,nonNullable:!0})],Gi.prototype,"multipoint",void 0),l([d({type:Boolean,nonNullable:!0})],Gi.prototype,"mesh",void 0),Gi=l([b("esri.widgets.Sketch.VisibleElements.CreateToolVisibilityMap")],Gi);var Vo=class extends P{constructor(e){super(e),this["rectangle-selection"]=!0,this["lasso-selection"]=!0,this["custom-selection"]=!0}};l([d({nonNullable:!0})],Vo.prototype,"rectangle-selection",void 0),l([d({nonNullable:!0})],Vo.prototype,"lasso-selection",void 0),l([d({nonNullable:!0})],Vo.prototype,"custom-selection",void 0),Vo=l([b("esri.widgets.Sketch.VisibleElements.SelectionToolVisibilityMap")],Vo);var mi=class extends P{constructor(e){super(e),this.createTools=new Gi,this.directionModePicker=!1,this.duplicateButton=!0,this.labelsToggle=!0,this.selectionTools=new Vo,this.settingsMenu=!0,this.snappingControls=!0,this.snappingControlsElements=new ur,this.tooltipsToggle=!0,this.undoRedoMenu=!0}};l([d({type:Gi,nonNullable:!0})],mi.prototype,"createTools",void 0),l([d({type:Boolean,nonNullable:!0})],mi.prototype,"directionModePicker",void 0),l([d({type:Boolean,nonNullable:!0})],mi.prototype,"duplicateButton",void 0),l([d({type:Boolean,nonNullable:!0})],mi.prototype,"labelsToggle",void 0),l([d({type:Vo,nonNullable:!0})],mi.prototype,"selectionTools",void 0),l([d({type:Boolean,nonNullable:!0})],mi.prototype,"settingsMenu",void 0),l([d({type:Boolean,nonNullable:!0})],mi.prototype,"snappingControls",void 0),l([d({type:ur,nonNullable:!0})],mi.prototype,"snappingControlsElements",void 0),l([d({type:Boolean,nonNullable:!0})],mi.prototype,"tooltipsToggle",void 0),l([d({type:Boolean,nonNullable:!0})],mi.prototype,"undoRedoMenu",void 0),mi=l([b("esri.widgets.Sketch.VisibleElements")],mi);var vh=mi;var Ht=class extends P{constructor(e){super(e),this.coordinates=void 0,this.strokeDash=[],this.strokeWidth=1,this.strokeColor=[0,0,0,1],this.strokeDashColor=[255,255,255,1],this.fillColor=[0,0,0,0],this.visible=!0,this.isDecoration=!0}get _strokeStyle(){let e=this.strokeColor;return`rgba(${e[0]}, ${e[1]}, ${e[2]}, ${e[3]})`}get _strokeBackgroundStyle(){let e=this.strokeDashColor;return`rgba(${e[0]}, ${e[1]}, ${e[2]}, ${e[3]})`}get _fillStyle(){let e=this.fillColor;return`rgba(${e[0]}, ${e[1]}, ${e[2]}, ${e[3]})`}get _renderCoordinates(){let e=[];if(!this.coordinates)return{coordinates:e,rect:Jd};let t=bg(vg(So(Jd),this.coordinates),2*this.strokeWidth);t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]+.5),t[3]=Math.ceil(t[3]+.5);for(let n of this.coordinates)e.push([Math.floor(n[0]-t[0])+.5,Math.floor(n[1]-t[1])+.5]);return e.reverse(),{coordinates:e,rect:t}}render(){let{coordinates:e,rect:t}=this._renderCoordinates,n=_l(t),i=yl(t);return M("div",{classes:{"esri-outline-overlay-item":!0},styles:{left:t[0]+"px",top:t[1]+"px",width:n+"px",height:i+"px",visibility:this.visible?"visible":"hidden"}},M("svg",{height:i,styles:{display:"block"},width:n},M("polygon",{fill:this._fillStyle,points:e.map(([o,s])=>`${o},${s}`).join(" "),stroke:this._strokeBackgroundStyle,"stroke-width":this.strokeWidth}),M("polygon",{fill:"transparent",points:e.map(([o,s])=>`${o},${s}`).join(" "),stroke:this._strokeStyle,"stroke-dasharray":this.strokeDash.length?this.strokeDash.join(" "):void 0,"stroke-width":this.strokeWidth})))}renderCanvas(){}};l([d()],Ht.prototype,"coordinates",void 0),l([d()],Ht.prototype,"strokeDash",void 0),l([d()],Ht.prototype,"strokeWidth",void 0),l([d()],Ht.prototype,"strokeColor",void 0),l([d()],Ht.prototype,"strokeDashColor",void 0),l([d()],Ht.prototype,"fillColor",void 0),l([d()],Ht.prototype,"visible",void 0),l([d()],Ht.prototype,"isDecoration",void 0),l([d({readOnly:!0})],Ht.prototype,"_strokeStyle",null),l([d({readOnly:!0})],Ht.prototype,"_strokeBackgroundStyle",null),l([d({readOnly:!0})],Ht.prototype,"_fillStyle",null),l([d({readOnly:!0})],Ht.prototype,"_renderCoordinates",null),Ht=l([b("esri.views.overlay.OutlineOverlayItem")],Ht);var yb=Ht;var Zt=class extends Ue.EventedMixin(y0){constructor(e){super(e),this._overlayItem=void 0,this.geometryType=null,this.mode=null,this.type="draw-screen"}initialize(){this.drawOperation=this._makeDrawOperation();let e=t=>this.drawOperation.on(t,n=>{this._updateVisuals(),this.emit(t,n)});this.addHandles([e("vertex-add"),e("vertex-remove"),e("vertex-update"),e("cursor-update"),e("complete")]),this.finishToolCreation()}destroy(){this.drawOperation=se(this.drawOperation),this._set("view",null)}get canRedo(){return this.drawOperation.canRedo}get canUndo(){return this.drawOperation.canUndo}set centeredToggled(e){this._set("centeredToggled",e),this._updateVisuals()}set enabled(e){this.drawOperation.interactive=e,this._set("enabled",e)}set uniformSizeToggled(e){this._set("uniformSizeToggled",e),this._updateVisuals()}get updating(){return this.drawOperation?.updating??!1}get cursor(){return this.geometryType==="point"?"default":"crosshair"}completeCreateOperation(){this.drawOperation.complete()}onInputEvent(e){this.destroyed||this.drawOperation.onInputEvent(e)}redo(){this.drawOperation.redo()}undo(){this.drawOperation.undo()}reset(){}_makeDrawOperation(){let{view:e}=this;return new b0({view:e,manipulators:this.manipulators,geometryType:fM(this.geometryType),drawingMode:this.mode,hasZ:!1,defaultZ:0,snapToSceneEnabled:!1,drawSurface:new bu,hasM:!1,snappingManager:null,snappingVisualizer:null,graphic:null,cursor:this.cursor})}get coordinates(){let{drawOperation:e}=this;if(!e?.geometryIncludingUncommittedVertices.length)return[];let{coordinateHelper:t}=e,n=e.committableVertex,i=e.committedVertices.slice();n!=null&&i.push(t.pointToArray(n));let o=i.length;switch(this.geometryType){case"circle":case"rectangle":{let s=new h0(P_,bu.spatialReference),r=this.geometryType==="circle"?g0:m0,a=this.geometryType==="circle"?_0:f0;if(o===1&&e.isCompleted){let c=i[0],u=s.makeMapPoint(c[0]+gM,c[1]);return r([c,u],s,!0)?.geometry.rings[0]??[]}if(o===2){let c=this.geometryType!=="rectangle",u=this.centeredToggled!==c,p=this.geometryType!=="rectangle";return(this.uniformSizeToggled!==p?r(i,s,u)?.geometry.rings[0]:a(i,s,u)?.geometry.rings[0])??[]}return[]}}return i}_updateVisuals(){if(!this._overlayItem){let e=new yb({strokeDash:[5],strokeDashColor:[255,255,255,255]});this.view.overlay?.addItem(e),this.addHandles($t(()=>{this.view.overlay?.removeItem(e),e?.destroy(),this._overlayItem=void 0})),this._overlayItem=e}this._overlayItem.coordinates=this.coordinates}onDeactivate(){this.drawOperation.isCompleted||this.drawOperation.cancel()}};function fM(e){switch(e){case"polygon":case"point":return e;case"circle":case"rectangle":return"segment"}}l([d({value:!1})],Zt.prototype,"centeredToggled",null),l([d()],Zt.prototype,"drawOperation",void 0),l([d({value:!0})],Zt.prototype,"enabled",null),l([d({value:!1})],Zt.prototype,"uniformSizeToggled",null),l([d({constructOnly:!0})],Zt.prototype,"geometryType",void 0),l([d({constructOnly:!0})],Zt.prototype,"mode",void 0),l([d({readOnly:!0})],Zt.prototype,"type",void 0),l([d({readOnly:!0})],Zt.prototype,"updating",null),l([d({constructOnly:!0,nonNullable:!0})],Zt.prototype,"view",void 0),l([d()],Zt.prototype,"cursor",null),Zt=l([b("esri.views.draw.DrawScreenTool")],Zt);var gM=48;function _M(){return I(this,null,function*(){return import("./chunk-PM74IUJK.js")})}function yM(){return I(this,null,function*(){return _M().then(({contains:e,intersects:t,overlaps:n,simplify:i})=>({contains:e,intersects:t,overlaps:n,simplify:i}))})}function bb(e){return I(this,null,function*(){let{currentSelection:t,selector:n,signal:i,sources:o,view:s}=e;if(!o?.length)return{added:[],removed:[]};let{layers:r,layerViews:a,graphicsLayers:c}=CM(o),u=(yield $n(Promise.all([bM(n,r,s,i),wM(n,a,s,i),vM(n,c,s)]),i)).flat();if(!t)return{added:u,removed:[]};let p=t.toArray(),h=u.filter(f=>!vb(p,f)),m=p.filter(f=>!vb(u,f));return t.removeMany(m),t.addMany(h),{added:h,removed:m}})}var vM=(e,t,n)=>I(void 0,null,function*(){return DM({candidates:t.flatMap(i=>i.graphics.toArray())??[],selector:e,view:n})}),bM=(e,t,n,i)=>I(void 0,null,function*(){let o=yield ri(TM({selector:e,signal:i,layers:t,view:n}));return o?wb(o):[]}),wM=(e,t,n,i)=>I(void 0,null,function*(){let o=yield ri(SM({selector:e,signal:i,layerViews:t,view:n}));return o?wb(o):[]});function wb(e){let t=[];for(let n=0;n<e.length;n++){let i=e[n];i.status==="fulfilled"&&t.push(...i.value)}return t}function CM(e){let t=[],n=[],i=[];return e.forEach(o=>{Sg(o)?t.push(o):(wl(o)||Cl(o))&&o.layers?.length?t.push(...o.layers.toArray()):Mg(o)&&o.sublayers?.length?i.push(...o.sublayers.toArray()):Tg(o)?i.push(o):As(o)&&n.push(o)}),{layers:t,layerViews:n,graphicsLayers:i}}function vb(e,t){if(e.includes(t))return!0;let n=t.getObjectId(),i=n!=null,{layer:o,uid:s}=t;return i?e.some(r=>{if(o===r.layer)return n===r.getObjectId()}):e.some(r=>{if(o===r.layer)return s===r.uid})}function SM(e){return I(this,null,function*(){let{layerViews:t,selector:n,signal:i,view:o}=e;return $n(Promise.allSettled(t.map(s=>I(this,null,function*(){let r=s.createQuery(),{geometry:a}=Cb(n,s.layer,o);return r.outFields=["*"],r.geometry=a,r.returnGeometry=!0,r.outSpatialReference=o.spatialReference,s.queryFeatures(r,{signal:i}).then(({features:c})=>c)}))),i)})}function TM(e){return I(this,null,function*(){let{layers:t,selector:n,signal:i,view:o}=e;return $n(Promise.allSettled(t.map(s=>I(this,null,function*(){return s.queryFeatures(MM(s.createQuery(),n,s,o),{signal:i}).then(({features:r})=>r)}))),i)})}function Cb(e,t,n){let i="displayField"in t?t.displayField:null,o=__({displayField:i,fields:t.fields}),s=[t.objectIdField];o!=null&&t.fieldsIndex.has(o)&&s.push(o);let r="renderer"in t?i0({renderer:t.renderer}):0;return{geometry:e.type==="point"?n0(e,r,n):e,outFields:s}}function MM(e,t,n,i){let{outFields:o,geometry:s}=Cb(t,n,i);return e.outFields=o,e.geometry=s,e.returnGeometry=!0,e.outSpatialReference=i.spatialReference,e}function DM(e){return I(this,null,function*(){let{selector:t,candidates:n,view:i}=e;if(!n?.length||!t)return[];let{spatialReference:o}=i,s=t,r=yield yM();return n.filter(a=>r.intersects(o,s,a.geometry))})}var EM=100,Ho=class extends Ue.EventedAccessor{constructor(e){super(e),this._processTask=null,this.options=null,this.selection=new Y,this.sources=null,this._process=Pf((t,n)=>I(this,null,function*(){let{callback:i,selector:o,completed:s}=t,r=qn(a=>I(this,null,function*(){let{sources:c,selection:u,view:p}=this;if(!(!c?.length&&!p?.selectionManager.sources.length)&&p){if(o&&c!=null){let h=yield bb({currentSelection:u,selector:o,signal:a,sources:c,view:p});s&&p.selectionManager?.updateSelection(v({current:u.toArray()},h))}i&&i()}else u.removeAll()}));return Ts(n,()=>r.abort()),this._processTask=r,r.promise}),EM)}initialize(){this._setup()}cancel(){this.removeAllHandles(),this._processTask?.abort()}_setup(){return I(this,null,function*(){let{view:e}=this;if(yield e.whenReady(),this.destroyed)return;let t=this.options,n=t?.createTool??"rectangle",i=t?.mode??(n==="polygon"?"click":"hybrid"),o=Symbol();this._tool=new Zt({view:e,mode:i,geometryType:n}),t?.selectOnComplete||this.addHandles(this._tool.on(["cursor-update","vertex-add","vertex-remove"],()=>ri(this._process({selector:this._selectionArea}))),o),this.addHandles([e.on("key-down",s=>{if(!s.repeat)switch(s.key){case Te.constraint:this._tool.uniformSizeToggled=!0,s.stopPropagation();break;case Te.center:this._tool.centeredToggled=!0,s.stopPropagation()}}),e.on("key-up",s=>{switch(s.key){case Te.constraint:this._tool.uniformSizeToggled=!1,s.stopPropagation();break;case Te.center:this._tool.centeredToggled=!1,s.stopPropagation()}}),this._tool.on("complete",s=>I(this,null,function*(){this.removeHandles(o);let r=()=>{this.removeAllHandles(),this.emit("complete",{aborted:s.aborted,selection:this.selection.toArray()})};s.aborted?(this.cancel(),this.selection.removeAll(),r()):yield this._process({selector:this._selectionArea,callback:r,completed:!0})}))],o),this.addHandles($t(()=>e.tools.remove(this._tool))),e.addAndActivateTool(this._tool)})}get _selectionArea(){let e=me(),t=this._tool.coordinates,n=this.view.spatialReference,i=s=>{e.x=s[0],e.y=s[1];let{x:r,y:a}=this.view.toMap(e);return[r,a]};if(t.length===1){let[s,r]=i(t[0]);return new Fe({x:s,y:r,spatialReference:n})}let o=this._tool.coordinates.map(i);if(o.length!==0)return fg(o)||o.reverse(),new vl({spatialReference:n,rings:[o]})}};l([d()],Ho.prototype,"options",void 0),l([d({readOnly:!0})],Ho.prototype,"selection",void 0),l([d()],Ho.prototype,"sources",void 0),l([d({constructOnly:!0})],Ho.prototype,"view",void 0),Ho=l([b("esri.widgets.support.Selector2D.SelectionOperation")],Ho);var Sb=Ho;var kn=class extends Ue.EventedAccessor{constructor(e){super(e),this._operationHandlesGroup=null,this.activeOperation=null,this.sources=null}initialize(){this.addHandles([x(()=>this._sources,e=>{this.activeOperation&&(this.activeOperation.sources=e)})])}destroy(){this._operationHandlesGroup=Me(this._operationHandlesGroup)}get _sources(){let{sources:e,view:t}=this;return t&&e?.length?e.flatMap(n=>{if(As(n))return n;if(wl(n)||Cl(n)){let o=n.layers||[],s=o.map(r=>{let a=yu(t,r)||void 0;return As(a)?a:r});return s.length?s.toArray():o.length?o.toArray():n}let i=yu(t,n)||void 0;return As(i)?i:n}):[]}get layers(){return ws(Z.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.sources}set layers(e){ws(Z.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.sources=e}get state(){let{_sources:e,view:t}=this,n=!e?.length&&!t?.selectionManager.sources.length;return this.activeOperation?"active":t?.ready&&!n?"ready":"disabled"}cancel(){this.state==="active"&&(this.activeOperation?.cancel(),this._set("activeOperation",null))}activate(e){let{_sources:t,state:n,view:i}=this,o=!t?.length&&!i?.selectionManager.sources.length;if(n==="disabled"||o||!this.view)return;n==="active"&&this.cancel();let s=new Sb({view:this.view,sources:t,options:e});return this._operationHandlesGroup=Cs([s.selection.on("change",r=>this.emit("selection-change",r)),s.once("complete",r=>this._onOperationComplete(r))]),this._set("activeOperation",s),s}_onOperationComplete(e){this._operationHandlesGroup=Me(this._operationHandlesGroup),this._set("activeOperation",null),this.emit("complete",e)}};l([d()],kn.prototype,"_sources",null),l([d({readOnly:!0})],kn.prototype,"activeOperation",void 0),l([d()],kn.prototype,"layers",null),l([d()],kn.prototype,"sources",void 0),l([d({readOnly:!0})],kn.prototype,"state",null),l([d()],kn.prototype,"view",void 0),kn=l([b("esri.widgets.support.SelectionToolbar.SelectionToolbarViewModel")],kn);var Tb=kn;var Mb={lassoTool:!0,rectangleTool:!0},IM={createTool:"polygon",mode:"freehand"},xM={createTool:"rectangle"},bh="esri-selection-toolbar",wh={base:bh,container:`${bh}__container`,toolButton:`${bh}__tool-button`},Yt=class extends ze{constructor(e,t){super(e,t),this._viewModelHandlesGroup=null,this.activeToolInfo=null,this.messages=null,this.toolConfigs=[],this.viewModel=new Tb,this.visibleElements=v({},Mb),this._viewModelHandlesGroup=Cs([this.viewModel.on("complete",n=>{this._set("activeToolInfo",null),this.emit("complete",n)})])}destroy(){this._viewModelHandlesGroup=Me(this._viewModelHandlesGroup)}loadDependencies(){return kt({action:()=>import("./chunk-EANCIRMG.js"),icon:()=>import("./chunk-4HUBSTEF.js")})}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get layers(){return ws(Z.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.viewModel.sources}set layers(e){ws(Z.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.viewModel.sources=e}get sources(){return this.viewModel.sources}set sources(e){this.viewModel.sources=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}castVisibleElements(e){return v(v({},Mb),e)}get visibleToolCount(){let{view:e,toolConfigs:t,visibleElements:n}=this;return(t?.length??0)+(e?.type==="2d"?(n.lassoTool?1:0)+(n.rectangleTool?1:0):0)}activate(e){if(this.cancel(),this.viewModel.state!=="disabled")switch(e){case"lasso":this._activateTool("lasso");break;case"rectangle":this._activateTool("rectangle");break;default:this._activateTool(e)}}cancel(){this.viewModel.cancel(),this._set("activeToolInfo",null)}render(){return M("div",{"aria-label":this.label,class:this.classes(wh.base,ke.widget)},M("div",{class:wh.container},this._renderDefaultTools(),this._renderCustomTools()))}_renderDefaultTools(){if(this.view?.type==="2d")return[this._renderRectangleTool(),this._renderLassoTool()]}_renderCustomTools(){if(this.toolConfigs?.length)return this.toolConfigs.map(({toolName:e,icon:t})=>M("calcite-action",{active:this.activeToolInfo?.toolName===e,bind:this,class:wh.toolButton,disabled:this.viewModel.state==="disabled",onclick:()=>this._onCustomToolClick(e),scale:"s",text:e,title:e},M("calcite-icon",{icon:t||"selection",scale:"s"})))}_renderLassoTool(){let{activeToolInfo:e,messages:t,visibleElements:n}=this;if(!n.lassoTool)return;let i=t.selectByLasso;return M("calcite-action",{active:e?.toolName==="lasso",bind:this,disabled:this.viewModel.state==="disabled",onclick:this._onLassoToolClick,scale:"s",text:i,title:i},M("calcite-icon",{icon:"lasso-select",scale:"s"}))}_renderRectangleTool(){let{activeToolInfo:e,messages:t,visibleElements:n}=this;if(!n.rectangleTool)return;let i=t.selectByRectangle;return M("calcite-action",{active:e?.toolName==="rectangle",bind:this,disabled:this.viewModel.state==="disabled",onclick:this._onRectangleToolClick,scale:"s",text:i,title:i},M("calcite-icon",{icon:"cursor-marquee",scale:"s"}))}_onCustomToolClick(e){this._toggleTool(e)}_onLassoToolClick(){this._toggleTool("lasso")}_onRectangleToolClick(){this._toggleTool("rectangle")}_activateTool(e){let t=this._getToolOptions(e);if(!t)return;let n=this.viewModel.activate(t);n&&this._set("activeToolInfo",{toolName:e,operation:n})}_toggleTool(e){if(this.activeToolInfo){let t=this.activeToolInfo.toolName;if(this.cancel(),t===e)return}this._activateTool(e)}_getToolOptions(e){return e==="lasso"?IM:e==="rectangle"?xM:this.toolConfigs.find(t=>t.toolName===e)}};l([d({readOnly:!0})],Yt.prototype,"activeToolInfo",void 0),l([d()],Yt.prototype,"label",null),l([d()],Yt.prototype,"layers",null),l([d(),Ze("esri/widgets/support/SelectionToolbar/t9n/SelectionToolbar")],Yt.prototype,"messages",void 0),l([d()],Yt.prototype,"sources",null),l([d()],Yt.prototype,"toolConfigs",void 0),l([d()],Yt.prototype,"view",null),l([d()],Yt.prototype,"viewModel",void 0),l([d()],Yt.prototype,"visibleElements",void 0),l([li("visibleElements")],Yt.prototype,"castVisibleElements",null),l([d()],Yt.prototype,"visibleToolCount",null),Yt=l([b("esri.widgets.support.SelectionToolbar")],Yt);var Db=Yt;var Kc=()=>Promise.all([kt({icon:()=>import("./chunk-4HUBSTEF.js"),label:()=>import("./chunk-LMCBFGZ4.js"),switch:()=>import("./chunk-JZRA6NKO.js"),tooltip:()=>import("./chunk-3DLWI6VB.js")})]),Zc="esri-labeled-switch",Yc={label:`${Zc}__label`,labelContent:`${Zc}__label-content`,icon:`${Zc}__icon`,tooltip:`${Zc}__tooltip`};function Bo({checked:e,disabled:t,hint:n,key:i,label:o,onChange:s}){return M("calcite-label",{class:Yc.label,disabled:t,key:i,layout:"inline-space-between",scale:"s"},M("div",{class:Yc.labelContent,key:"label-content"},n?M(Jf,null,M("div",null,o),M("calcite-icon",{class:Yc.icon,icon:"information",id:i,scale:"s"}),M("calcite-tooltip",{class:Yc.tooltip,referenceElement:i},n)):o),M("calcite-switch",{checked:e,disabled:t,scale:"s",onCalciteSwitchChange:r=>s(r.target.checked)}))}var Go=class extends P{constructor(e){super(e),this.directionModePicker=!1,this.header=!1,this.labelsToggle=!0,this.tooltipsToggle=!0}};l([d({type:Boolean,nonNullable:!0})],Go.prototype,"directionModePicker",void 0),l([d({type:Boolean,nonNullable:!0})],Go.prototype,"header",void 0),l([d({type:Boolean,nonNullable:!0})],Go.prototype,"labelsToggle",void 0),l([d({type:Boolean,nonNullable:!0})],Go.prototype,"tooltipsToggle",void 0),Go=l([b("esri.widgets.support.SketchTooltipControls.VisibleElements")],Go);var Ch=Go;var Oa="esri-sketch-tooltip-controls",Qc={base:Oa,block:`${Oa}__block`,blockContent:`${Oa}__block-content`,hintIcon:`${Oa}__hint-icon`,radioButtonLabelWrapper:`${Oa}__radio-button-label-wrapper`},ao=class extends ze{constructor(e,t){super(e,t),this.viewModel=null,this.visibleElements=new Ch,this.sketchOptions=new Fs,this.viewType=void 0,this._onTooltipsEnabledChange=n=>{this.sketchOptions.tooltips.enabled=n},this._onLabelsEnabledChange=n=>{this.sketchOptions.labels.enabled=n},this._onDirectionModeChange=n=>{this.sketchOptions.values.directionMode=n.target.selectedItem.value}}loadDependencies(){return Promise.all([kt({block:()=>import("./chunk-ZKHFZ44S.js"),label:()=>import("./chunk-LMCBFGZ4.js"),icon:()=>import("./chunk-4HUBSTEF.js"),"radio-button":()=>import("./chunk-KVC4CJDJ.js"),"radio-button-group":()=>import("./chunk-FRJNOSUK.js")}),Kc()])}render(){let{label:e,visibleElements:t}=this,n=this._renderContent();return M("div",{"aria-label":e,class:this.classes(Qc.base,ke.widget)},n?M("calcite-block",{class:Qc.block,heading:t.header?this.label:"",key:"content-block",open:!0},M("div",{class:Qc.blockContent,key:"content"},n)):void 0)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}_renderContent(){let{visibleElements:e,viewType:t}=this,n=[e.tooltipsToggle?this._renderTooltipsToggle():null,e.labelsToggle&&t!=="2d"?this._renderLabelsToggle():null,e.directionModePicker?this._renderDirectionModePicker():null].filter(vt);return n.length===0?null:n}_renderTooltipsToggle(){let{messages:e,sketchOptions:t}=this;return M(Bo,{checked:t.tooltips.effectiveEnabled,hint:e.tooltipsToggleHint,key:`${this.id}__tooltips`,label:e.tooltipsToggle,onChange:this._onTooltipsEnabledChange})}_renderLabelsToggle(){let{messages:e,sketchOptions:t}=this;return M(Bo,{checked:t.labels.enabled,hint:e.labelsToggleHint,key:`${this.id}__labels`,label:e.labelsToggle,onChange:this._onLabelsEnabledChange})}_renderDirectionModePicker(){let{messages:e,sketchOptions:t}=this,{directionMode:n}=t.values;return M("calcite-label",{key:"direction-mode",layout:"default",scale:"s"},e.directionModePicker,M("calcite-radio-button-group",{key:"radio-button-group",layout:"horizontal",name:this.id,scale:"s",value:n,onCalciteRadioButtonGroupChange:this._onDirectionModeChange},this._renderDirectionModeOption("relative",n,e.directionModeRelative),this._renderDirectionModeOption("absolute",n,e.directionModeAbsolute)))}_renderDirectionModeOption(e,t,n){return M("calcite-label",{key:e,layout:"inline",scale:"s"},M("calcite-radio-button",{checked:e===t,scale:"s",value:e}),M("div",{class:Qc.radioButtonLabelWrapper,key:"label-wrapper"},M("calcite-icon",{icon:v0[e],scale:"s"}),n))}};l([d()],ao.prototype,"label",null),l([d({type:Ch,nonNullable:!0})],ao.prototype,"visibleElements",void 0),l([d(),Ze("esri/widgets/support/SketchTooltipControls/t9n/SketchTooltipControls")],ao.prototype,"messages",void 0),l([d({nonNullable:!0,type:Fs})],ao.prototype,"sketchOptions",void 0),l([d({type:String})],ao.prototype,"viewType",void 0),ao=l([b("esri.widgets.support.SketchTooltipControls")],ao);var Eb=ao;var OM={hide:"hide",hideChildren:"hide-children"};function pr(e){return e?.listMode??void 0}function Ib(e){if(!e)return"inherited";let t=kM(Th(e)?e.layer:e);return t!=null?t?"independent":"inherited":"visibilityMode"in e&&e.visibilityMode!=null?e.visibilityMode:"independent"}function Jc(e){if(e&&(!("type"in e)||e.type!=="wmts"))return"sublayers"in e?"sublayers":"layers"in e?"layers":void 0}function hr(e){return pr(e)!==OM.hide}function Sh(e){let t=e?.layer;return t&&"layers"in t?t.layers:null}function Th(e){return e!=null&&"layer"in e&&e.layer!=null}function kM(e){let t=AM(e);return t!=null&&"supportsSublayerVisibility"in t?t.supportsSublayerVisibility:void 0}function AM(e){return e&&"capabilities"in e&&e.capabilities!=null&&"exportMap"in e.capabilities?e.capabilities.exportMap:void 0}var Mh,lo=Mh=class extends Dl{constructor(e){super(e),this.displayValueEnabled=!1,this.max=1,this.min=0,this.step=.1,this.type="slider",this.value=null}clone(){return new Mh({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,displayValueEnabled:this.displayValueEnabled,max:this.max,min:this.min,step:this.step,value:this.value})}};l([d()],lo.prototype,"displayValueEnabled",void 0),l([d()],lo.prototype,"max",void 0),l([d()],lo.prototype,"min",void 0),l([d()],lo.prototype,"step",void 0),l([d()],lo.prototype,"value",void 0),lo=Mh=l([b("esri.support.actions.ActionSlider")],lo);var xb=lo;var Ct=class extends bl(ze){constructor(e,t){super(e,t),this._legend=null,this.className=null,this.content=null,this.flowEnabled=!1,this.image=null,this.listItem=null,this.open=!1,this.visible=!0}initialize(){this.addHandles([x(()=>this._canCreateLegend,()=>this._createLegend(),ie),x(()=>[this._legend,this._legendOptions],()=>this._updateLegend(),ie)])}destroy(){this._legend=se(this._legend)}get _canCreateLegend(){let{content:e,listItem:t}=this;if(!t)return!1;let n="legend";return e===n||e!=null&&!!Array.isArray(e)&&e.includes(n)}get _legendOptions(){let{listItem:e,_legendLayerInfo:t}=this,n=e?.view;return t&&n?{view:n,layerInfos:[t]}:{}}get _legendLayerInfo(){let e=this.listItem?.layer;if(!e||e.type==="subtype-sublayer")return null;let t=Th(e)?e:null,n=e?.parent,i=n!=null&&"type"in n&&n.type==="map-image"?t?.source:null,o="";return i&&n?{layer:n,title:o,sublayerIds:[i.mapLayerId]}:{layer:e,title:o}}get disabled(){let{listItem:e,_legend:t,content:n}=this;return!e||!(Array.isArray(n)&&n.length>1)&&!!t&&(!t.activeLayerInfos?.length||!e.visibleAtCurrentScale||!e.visible)}set disabled(e){this._overrideIfSome("disabled",e)}get icon(){let{image:e}=this,t=this._getFirstWidget();return this._get("icon")??(!e&&t?t.icon:null)}set icon(e){this._overrideIfSome("icon",e)}get title(){return this._get("title")||(this._getFirstWidget()?.label??"")}set title(e){this._override("title",e)}render(){return M("div",{class:"esri-list-item-panel"},this._renderContents())}_renderContent(e){let{_legend:t,disabled:n,open:i}=this;return e&&!n&&i?e==="legend"&&t?M("div",{key:"legend-widget"},t.render()):typeof e=="string"?M("div",{innerHTML:e,key:e}):uu(e)?M("div",{key:"content-widget"},e.render()):e instanceof HTMLElement?M("div",{afterCreate:this._attachToNode,bind:e,key:"content-element"}):null:null}_renderContents(){let{content:e,open:t}=this;return t?Array.isArray(e)?e.map(n=>this._renderContent(n)):this._renderContent(e):null}_createLegend(){return I(this,null,function*(){if(se(this._legend),this._legend=null,!this._canCreateLegend)return;let{default:e}=yield import("./chunk-G6ZOFGOF.js"),t=new e(this._legendOptions);this._legend=t})}_attachToNode(e){e.appendChild(this)}_updateLegend(){let e=this._legend;e&&e.set(this._legendOptions)}_getWidget(e){return e==="legend"?this._legend:uu(e)?e:null}_getFirstWidget(){let{content:e}=this;return Array.isArray(e)?e.map(t=>this._getWidget(t)).find(t=>t):this._getWidget(e)}};l([d()],Ct.prototype,"_legend",void 0),l([d()],Ct.prototype,"_canCreateLegend",null),l([d()],Ct.prototype,"_legendOptions",null),l([d()],Ct.prototype,"_legendLayerInfo",null),l([d()],Ct.prototype,"className",void 0),l([d()],Ct.prototype,"content",void 0),l([d()],Ct.prototype,"disabled",null),l([d()],Ct.prototype,"flowEnabled",void 0),l([d()],Ct.prototype,"icon",null),l([d()],Ct.prototype,"image",void 0),l([d()],Ct.prototype,"listItem",void 0),l([d()],Ct.prototype,"open",void 0),l([d()],Ct.prototype,"title",null),l([d()],Ct.prototype,"visible",void 0),Ct=l([b("esri.widgets.LayerList.ListItemPanel")],Ct);var Dh=Ct;var ka,FM=Y.ofType({key:"type",defaultKeyValue:"button",base:Dl,typeMap:{button:r_,toggle:a_,slider:xb}}),Ob=Y.ofType(FM),Eh="layer",Xc="child-list-mode",PM="hide",we=ka=class extends bl(P){constructor(e){super(e),this.actionsSections=new Ob,this.actionsOpen=!1,this.checkPublishStatusEnabled=!1,this.children=new(Y.ofType(ka)),this.childrenSortable=!0,this.hidden=!1,this.layer=null,this.listItemCreatedFunction=null,this.listModeDisabled=!1,this.open=!1,this.panel=null,this.parent=null,this.view=null}initialize(){if(this.addHandles([x(()=>[this.layer,this.layer?.listMode,this.listModeDisabled],()=>this._watchLayerProperties(this.layer),ie),x(()=>this.checkPublishStatusEnabled,e=>this._updateChildrenPublishing(e),ie),x(()=>this.view,e=>this._updateChildrenView(e),ie),x(()=>this.panel,e=>this._setListItemOnPanel(e),ie)]),typeof this.listItemCreatedFunction=="function"){let e={item:this};this.listItemCreatedFunction.call(null,e)}}destroy(){this.panel?.destroy(),this.children.destroyAll(),this.view=null}get connectionStatus(){let{layerView:e,publishing:t}=this;if(!t&&e&&"connectionStatus"in e)return e.connectionStatus}get error(){return this.layer?.loadError}get incompatible(){let{layerView:e}=this;return!(!e||!("spatialReferenceSupported"in e))&&!e.spatialReferenceSupported}get layerView(){let{layer:e,view:t}=this;if(!e||!t||e.type==="sublayer")return null;let n=e.type==="subtype-sublayer"?e.parent:e;return t.allLayerViews.find(i=>i.layer===n)??null}castPanel(e){return this.panel?.open&&!e.hasOwnProperty("open")&&(e.open=!0),e?new Dh(e):null}get sortable(){return this.layer?.type!=="knowledge-graph-sublayer"&&this._get("sortable")}set sortable(e){this._set("sortable",e)}get title(){let e=fn(this,"layer.layer");return(!e||e&&fn(this,"layer.layer.loaded"))&&fn(this,"layer.title")||fn(this,"layer.attributes.title")||""}set title(e){this._override("title",e)}get publishing(){let{layer:e,checkPublishStatusEnabled:t}=this;return t&&e&&"publishingInfo"in e&&e.publishingInfo?.status==="publishing"}get updating(){let{layerView:e,connectionStatus:t,layer:n,publishing:i}=this;return!i&&!t&&(e?e.updating:n?.loadStatus==="loading"||!1)}get visible(){return this.layer?.visible}set visible(e){let t=this.layer;t&&(t.visible=e)}get visibleAtCurrentScale(){return this.layerView?.visibleAtCurrentScale??!0}get visibleAtCurrentTimeExtent(){return this.layerView?.visibleAtCurrentTimeExtent??!0}get visibilityMode(){return Ib(this.layer)}clone(){return new ka({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,checkPublishStatusEnabled:this.checkPublishStatusEnabled,children:this.children.clone(),childrenSortable:this.childrenSortable,hidden:this.hidden,layer:this.layer,listItemCreatedFunction:this.listItemCreatedFunction,listModeDisabled:this.listModeDisabled,open:this.open,panel:this.panel,parent:this.parent,sortable:this.sortable,title:this.title,view:this.view,visible:this.visible})}_setListItemOnPanel(e){e&&(e.listItem=this)}_updateChildrenPublishing(e){let t=this.children;t&&t.forEach(n=>n.checkPublishStatusEnabled=e)}_updateChildrenView(e){let t=this.children;t&&t.forEach(n=>n.view=e)}_createChildren(e){let{listModeDisabled:t,children:n}=this,i=e.filter(o=>!n.some(s=>s.layer===o));n.addMany(this._createChildItems(i,t))}_destroyChildren(e){let{children:t}=this,n=t.filter(i=>!e.includes(i.layer));t.destroyMany(n)}_sortChildren(e){this.children.sort((t,n)=>e.indexOf(n.layer)-e.indexOf(t.layer))}_destroyAllChildren(){this.removeHandles(Xc),this.children.destroyAll()}_watchChildLayerListMode(e){this.removeHandles(Xc),this.listModeDisabled||this.addHandles(e.toArray().map(t=>x(()=>t.listMode,()=>this._compileChildren(e))),Xc)}_compileChildren(e){let t=this.listModeDisabled?e:e?.filter(n=>pr(n)!==PM);t?.length?(this._createChildren(t),this._destroyChildren(t),this._sortChildren(t),this._watchChildLayerListMode(e)):this._destroyAllChildren()}_watchSublayerChanges(e){e&&this.addHandles(e.on("change",()=>this._compileChildren(e)),Eh)}_initializeChildLayers(e){this._compileChildren(e),this._watchSublayerChanges(e)}_createChildItems(e,t){return e.map(n=>t||hr(n)?new ka({layer:n,checkPublishStatusEnabled:this.checkPublishStatusEnabled,listItemCreatedFunction:this.listItemCreatedFunction,listModeDisabled:this.listModeDisabled,parent:this,view:this.view}):null).filter(vt).reverse()}_watchLayerProperties(e){if(this.removeHandles(Eh),this.removeHandles(Xc),!e)return;if((!this.listModeDisabled&&pr(e))==="hide-children")return void this.children.destroyAll();let t=Jc(e);t&&this.addHandles(x(()=>e[t],n=>{e.hasOwnProperty(t)&&this._initializeChildLayers(n)},ie),Eh)}};l([d({type:Ob})],we.prototype,"actionsSections",void 0),l([d()],we.prototype,"actionsOpen",void 0),l([d()],we.prototype,"checkPublishStatusEnabled",void 0),l([d({type:Y})],we.prototype,"children",void 0),l([d()],we.prototype,"childrenSortable",void 0),l([d({readOnly:!0})],we.prototype,"connectionStatus",null),l([d({readOnly:!0})],we.prototype,"error",null),l([d()],we.prototype,"hidden",void 0),l([d({readOnly:!0})],we.prototype,"incompatible",null),l([d()],we.prototype,"layer",void 0),l([d({readOnly:!0})],we.prototype,"layerView",null),l([d()],we.prototype,"listItemCreatedFunction",void 0),l([d({nonNullable:!0})],we.prototype,"listModeDisabled",void 0),l([d()],we.prototype,"open",void 0),l([d({type:Dh})],we.prototype,"panel",void 0),l([li("panel")],we.prototype,"castPanel",null),l([d()],we.prototype,"parent",void 0),l([d({value:!0})],we.prototype,"sortable",null),l([d()],we.prototype,"title",null),l([d({readOnly:!0})],we.prototype,"publishing",null),l([d({readOnly:!0})],we.prototype,"updating",null),l([d()],we.prototype,"view",void 0),l([d()],we.prototype,"visible",null),l([d({readOnly:!0})],we.prototype,"visibleAtCurrentScale",null),l([d({readOnly:!0})],we.prototype,"visibleAtCurrentTimeExtent",null),l([d({readOnly:!0})],we.prototype,"visibilityMode",null),we=ka=l([b("esri.widgets.LayerList.ListItem")],we);var Aa=we;var ji={view:"view",viewLayers:"view-layers",mapLayers:"map-layers",layerViews:"layer-views",layerListMode:"layer-list-mode"},RM="hide",kb=Y.ofType(Aa),sn=class extends Ue.EventedAccessor{constructor(e){super(e),this.checkPublishStatusEnabled=!1,this.listItemCreatedFunction=null,this.listModeDisabled=!1,this.operationalItems=new kb,this.view=null}initialize(){this.addHandles([x(()=>this.view?.ready===!0,()=>this._viewHandles(),ie),x(()=>[this.listItemCreatedFunction,this.checkPublishStatusEnabled,this.listModeDisabled],()=>this._recompileList())],ji.view)}destroy(){this._removeAllItems(),this.view=null}get state(){let{view:e}=this;return e?.ready?"ready":e?"loading":"disabled"}get totalItems(){return this.operationalItems.flatten(e=>e.children).length}triggerAction(e,t){e&&!e.disabled&&this.emit("trigger-action",{action:e,item:t})}moveListItem(e,t,n,i){let o=e?.layer;if(!o||o.type==="subtype-sublayer"||o.type==="sublayer")return;let s=this.view?.map?.layers,r=t?Sh(t):s,a=n?Sh(n):s;if(!r||!a)return;let{operationalItems:c}=this,u=t?.children||c,p=n?.children||c,h=a.length-i;e.parent=n||null,u.remove(e),r.remove(o),p.includes(e)||p.add(e,h),a.includes(o)||a.add(o,h),this._compileList()}_createLayerViewHandles(e){this.removeHandles(ji.layerViews),this._compileList(),e&&this.addHandles(e.on("change",()=>this._compileList()),ji.layerViews)}_createMapLayerHandles(e){this.removeHandles(ji.mapLayers),this._compileList(),e&&this.addHandles(e.on("change",()=>this._compileList()),ji.mapLayers)}_createListItem(e){let{view:t,listItemCreatedFunction:n,checkPublishStatusEnabled:i,listModeDisabled:o}=this;return new Aa({checkPublishStatusEnabled:i,listModeDisabled:o,layer:e,listItemCreatedFunction:n,view:t})}_removeAllItems(){this.operationalItems.destroyAll()}_getViewableLayers(e){return e?this.listModeDisabled?e:e.filter(t=>pr(t)!==RM):void 0}_watchLayersListMode(e){this.removeHandles(ji.layerListMode),e&&!this.listModeDisabled&&this.addHandles(x(()=>e.filter(t=>"listMode"in t).map(t=>t.listMode).toArray(),()=>this._compileList()),ji.layerListMode)}_compileList(){let e=this.view?.map?.layers;this._watchLayersListMode(e);let t=this._getViewableLayers(e);t?.length?(this._createNewItems(t),this._removeItems(t),this._sortItems(t)):this._removeAllItems()}_createNewItems(e){let{operationalItems:t}=this;e.forEach(n=>{t.some(i=>i.layer===n)||t.add(this._createListItem(n))})}_removeItems(e){let{operationalItems:t}=this,n=[];t.forEach(i=>{i&&e&&e.includes(i.layer)||n.push(i)}),t.destroyMany(n)}_sortItems(e){let{operationalItems:t}=this;t.sort((n,i)=>{let o=e.indexOf(n.layer),s=e.indexOf(i.layer);return o>s?-1:o<s?1:0})}_recompileList(){this._removeAllItems(),this._compileList()}_viewHandles(){let{view:e}=this;this.removeHandles([ji.mapLayers,ji.layerViews,ji.viewLayers]),e?.ready?this.addHandles([x(()=>this.view?.map?.allLayers,t=>this._createMapLayerHandles(t),ie),x(()=>this.view?.allLayerViews,t=>this._createLayerViewHandles(t),ie)],ji.viewLayers):this._removeAllItems()}};l([d()],sn.prototype,"checkPublishStatusEnabled",void 0),l([d()],sn.prototype,"listItemCreatedFunction",void 0),l([d({nonNullable:!0})],sn.prototype,"listModeDisabled",void 0),l([d({type:kb})],sn.prototype,"operationalItems",void 0),l([d({readOnly:!0})],sn.prototype,"state",null),l([d()],sn.prototype,"totalItems",null),l([d()],sn.prototype,"view",void 0),sn=l([b("esri.widgets.LayerList.LayerListViewModel")],sn);var Ab=sn;var Fa=e=>LM(e)||NM(e),LM=e=>{if(!("type"in e))return!1;switch(e.type){case"feature":case"geojson":case"csv":case"graphics":case"wfs":case"map-notes":case"oriented-imagery":case"scene":case"building-scene":case"subtype-sublayer":return!0;default:return!1}},NM=e=>{let t=Jc(e);if(t!=null&&e.hasOwnProperty(t)&&e[t]!=null){for(let n of e[t])if(Fa(n))return!0}return!1},Pa=(e,t)=>t!=null&&e!=null&&(t.test(e.title)?"self":!!e.children.some(n=>Pa(n,t)!==!1)&&"children");var Ih,rn=Ih=class extends Aa{constructor(e){super(e),this.children=new Y,this.parent=null}get enabled(){let{children:e}=this;if(e.length===0)return this.featureSource!=null&&this.featureSource.enabled?"enabled":"disabled";let t=!1,n=!1;for(let i of e){if(i.enabled==="indeterminate")return i.enabled;if(i.enabled==="enabled"?t=!0:i.enabled==="disabled"&&(n=!0),n&&t)return"indeterminate"}return n?"disabled":"enabled"}get childLayerIds(){return this.children.toArray().flatMap(e=>[e.layer.id,...e.childLayerIds])}get featureSource(){let{layer:e,getFeatureSnappingSources:t}=this;return t().find(n=>n.layer===e)}_initializeChildLayers(e){if(!e)return;let t=e.filter(Fa);super._initializeChildLayers(t)}_createChildItems(e){return e.map(t=>hr(t)?new Ih({layer:t,parent:this,view:this.view,getFeatureSnappingSources:this.getFeatureSnappingSources}):null).filter(vt).reverse()}};l([d()],rn.prototype,"enabled",null),l([d()],rn.prototype,"children",void 0),l([d()],rn.prototype,"childLayerIds",null),l([d()],rn.prototype,"featureSource",null),l([d({constructOnly:!0})],rn.prototype,"getFeatureSnappingSources",void 0),l([d()],rn.prototype,"parent",void 0),rn=Ih=l([b("esri.widgets.support.SnappingControls.SnappingListItem")],rn);var co=class extends Ab{constructor(){super(...arguments),this.featureSnappingSources=new Y}get operationalItemsFlat(){return this.operationalItems.flatten(e=>e.children)}get selectableItems(){return this.operationalItemsFlat.filter(e=>!e.children?.length)}_compileList(){let e=this.view?.map?.layers;if(!e)return;let t=e.filter(Fa);this._watchLayersListMode(t);let n=this._getViewableLayers(t);n?.length?(this._createNewItems(n),this._removeItems(n),this._sortItems(n)):this._removeAllItems()}_createListItem(e){return new rn({layer:e,view:this.view,getFeatureSnappingSources:()=>this.featureSnappingSources})}};l([d()],co.prototype,"featureSnappingSources",void 0),l([d()],co.prototype,"operationalItems",void 0),l([d()],co.prototype,"operationalItemsFlat",null),l([d()],co.prototype,"selectableItems",null),co=l([b("esri.widgets.support.SnappingControls.SnappingLayerListViewModel")],co);var an=class extends P{constructor(e){super(e),this.layerListViewModel=new co,this.snappingOptions=new Ps,this.view=null}initialize(){this.addHandles([x(()=>({viewModel:this.layerListViewModel,view:this.view}),({viewModel:e,view:t})=>{e.view=t},ie),x(()=>({viewModel:this.layerListViewModel,sources:this.snappingOptions?.featureSources}),({viewModel:e,sources:t})=>{e.featureSnappingSources=t},ie)])}get allLayersEnabled(){return(this.layerListViewModel?.selectableItems??[]).every(e=>e.enabled==="enabled")}get allLayersDisabled(){return(this.layerListViewModel?.selectableItems??[]).every(e=>!e.enabled)}get layersEnabledCount(){return this.layerListViewModel?.selectableItems?.filter(e=>e.enabled==="enabled").length??0}get state(){return this.snappingOptions?"ready":"disabled"}toggleSnappingForLayers(e,t){e?.forEach(n=>t?this.enableSnappingForLayer(n):this.disableSnappingForLayer(n))}toggleSnappingForAllLayers(e){this.layerListViewModel.selectableItems.forEach(({layer:{id:t}})=>{e?this.enableSnappingForLayer(t):this.disableSnappingForLayer(t)})}enableSnappingForLayer(e){let t=this._findSnappingSourceForLayer(e)??this._makeSnappingSourceForLayer(e);t&&(t.enabled=!0)}disableSnappingForLayer(e){let t=this._findSnappingSourceForLayer(e);t&&(t.enabled=!1)}updateEnabledFeatureSources(e){for(let t of this.snappingOptions.featureSources)hr(t.layer)&&(t.enabled=e.includes(t.layer.id))}_findSnappingSourceForLayer(e){return this.snappingOptions.featureSources.find(t=>t.layer.id===e)}_makeSnappingSourceForLayer(e){let t=this.layerListViewModel.operationalItemsFlat.find(i=>i.layer.id===e)?.layer;if(!t)throw new ne("snapping-controls:layer-not-found",`cannot enable snapping for layer with id ${e} because no such layer was found in the view`);if(t.type==="group")return;let n=new u0({layer:t});return this.snappingOptions.featureSources.add(n),n}};l([d()],an.prototype,"allLayersEnabled",null),l([d()],an.prototype,"allLayersDisabled",null),l([d({constructOnly:!0})],an.prototype,"layerListViewModel",void 0),l([d()],an.prototype,"layersEnabledCount",null),l([d({type:Ps,nonNullable:!0})],an.prototype,"snappingOptions",void 0),l([d()],an.prototype,"state",null),l([d()],an.prototype,"view",void 0),an=l([b("esri.widgets.support.SnappingControls.SnappingControlsViewModel")],an);var Fb=an;var Ui="esri-snapping-controls",ln={base:Ui,container:`${Ui}__container`,item:`${Ui}__item`,toggleBlock:`${Ui}__toggle-block`,layerListBlock:`${Ui}__layer-list-block`,layerList:`${Ui}__layer-list`,layerListFilter:`${Ui}__layer-list__filter`,layerListButton:`${Ui}__layer-list__button`,layerListItem:`${Ui}__layer-list__item`,layerListGroup:`${Ui}__layer-list__group`,nestedContainer:`${Ui}__nested-container`},Kt=class extends ze{constructor(e,t){super(e,t),this._defaultViewModel=null,this._layerListFilter=null,this.layerListOpen=!0,this.messages=null,this.visibleElements=new ur,this._enableSnappingSwitchChange=s=>{this.snappingOptions.enabled=s},this._featureEnabledSwitchChange=s=>{this.snappingOptions.featureEnabled=s},this._selfEnabledSwitchChange=s=>{this.snappingOptions.selfEnabled=s},this._onToggleLayersButtonClick=s=>{this.viewModel.toggleSnappingForAllLayers(!this.viewModel.allLayersEnabled),requestAnimationFrame(()=>s.target.setFocus())};let{snappingOptions:n,view:i,viewModel:o}=e;this.viewModel=o??(this._defaultViewModel=new Fb({snappingOptions:n,view:i}))}normalizeCtorArgs(e){let s=e,{snappingOptions:t,view:n,viewModel:i}=s;return xm(s,["snappingOptions","view","viewModel"])}destroy(){this.viewModel!==this._defaultViewModel&&(this._defaultViewModel=se(this._defaultViewModel))}loadDependencies(){return Promise.all([kt({block:()=>import("./chunk-ZKHFZ44S.js"),button:()=>import("./chunk-J63POI2Y.js"),input:()=>import("./chunk-6R2Z5WOF.js"),list:()=>import("./chunk-DB7XGNRL.js"),"list-item":()=>import("./chunk-4FFGJW4G.js"),checkbox:()=>import("./chunk-NRW7GLO6.js")}),Kc()])}get icon(){return"snap-to-point"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get snappingOptions(){return this.viewModel.snappingOptions}set snappingOptions(e){this.viewModel.snappingOptions=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}set viewModel(e){e!==this._get("viewModel")&&(this._defaultViewModel!=null&&this._defaultViewModel===e||(this._defaultViewModel=se(this._defaultViewModel)),this._set("viewModel",e))}render(){let{label:e}=this;return M("div",{"aria-label":e,class:this.classes(ln.base,ke.widget)},M("div",{class:ln.container},this._renderContent()))}_renderContent(){return[this._renderToggles(),this._renderLayerList()]}_renderToggles(){let{visibleElements:e}=this,t=[e.selfEnabledToggle?this._renderSelfEnabledToggle():null,e.featureEnabledToggle?this._renderFeatureEnabledToggle():null].filter(vt),n=[e.enabledToggle?this._renderEnabledToggle():null,t.length>0?M("div",{class:ln.nestedContainer},t):null].filter(vt);return n.length===0?null:M("calcite-block",{class:ln.toggleBlock,heading:e.header?this.label:"",key:"toggle-block",open:!0},n)}_renderEnabledToggle(){let{messages:e,viewModel:t}=this,{snappingOptions:n}=t;return M(Bo,{checked:n.enabled,disabled:this._enabledToggleDisabled,key:`${this.id}__enabled-toggle`,label:e.enableSnapping,onChange:this._enableSnappingSwitchChange})}_renderSelfEnabledToggle(){let{messages:e,viewModel:t}=this,{snappingOptions:n}=t,i=n.enabled&&n.selfEnabled;return M(Bo,{checked:i,disabled:this._secondaryElementsDisabled,key:`${this.id}__self-enabled-toggle`,label:e.geometryGuides,onChange:this._selfEnabledSwitchChange})}_renderFeatureEnabledToggle(){let{messages:e,viewModel:t}=this,{snappingOptions:n}=t,i=n.enabled&&n.featureEnabled;return M(Bo,{checked:i,disabled:this._secondaryElementsDisabled,key:`${this.id}__feature-enabled-toggle`,label:e.featureToFeature,onChange:this._featureEnabledSwitchChange})}_renderLayerList(){if(!this.visibleElements.layerList)return null;let{messages:e,viewModel:t}=this,n=({target:{value:r}})=>{this._layerListFilter=r===""?null:new RegExp(r,"i")},i=t.layerListViewModel.operationalItems.length>9?M("calcite-input",{class:ln.layerListFilter,clearable:!0,placeholder:e?.searchLayers,onCalciteInputInput:n}):null,o=this._secondaryElementsDisabled,s=this.layerListOpen&&!o;return M("calcite-block",{class:ln.layerListBlock,collapsible:!0,disabled:this._secondaryElementsDisabled,heading:e.snappingLayers,key:"list-block",open:s,onCalciteBlockToggle:r=>this.layerListOpen=r.target.open},i,this._renderToggleLayersButton(),M("calcite-list",{class:ln.layerList,selectionMode:"none"},this._renderLayerListItemCollection(t.layerListViewModel.operationalItems)))}_renderLayerListItemCollection(e){let t=this._layerListFilter;return e.map(n=>{switch(t?Pa(n,t):null){case"children":{let i=n.children.filter(o=>Pa(o,t)!==!1);return this._renderLayerListItemGroup(n,i)}case"self":case null:return this._renderLayerListItemOrGroup(n);case!1:return Pa(n.parent,t)==="self"?this._renderLayerListItemOrGroup(n):null}}).toArray().filter(vt)}_renderToggleLayersButton(){if(!this.visibleElements.layerListToggleLayersButton)return null;let{viewModel:{allLayersEnabled:e},messages:t}=this,n=e?t.disableAllLayers:t.enableAllLayers;return M("calcite-button",{appearance:"transparent",class:ln.layerListButton,label:n,name:"layer-toggle",onclick:this._onToggleLayersButtonClick},n)}_renderLayerListItemOrGroup(e){if(e.children.length)return this._renderLayerListItemGroup(e);let{messages:{untitledLayer:t}}=this,n=e.title||t,i=()=>{this.viewModel.toggleSnappingForLayers([e.layer.id],e.enabled!=="enabled")};return M("calcite-list-item",{class:ln.layerListItem,key:`${this.id}-list-item-${e.uid}`,label:n,onCalciteListItemSelect:o=>{o.stopPropagation(),i()}},M("calcite-checkbox",{checked:e.enabled==="enabled",slot:"actions-start",onCalciteCheckboxChange:i}))}_renderLayerListItemGroup(e,t){let{children:n,title:i}=e,o=i||this.messages.untitledLayer,s=i&&i!==""?i:Vf(),r=!!t?.length,a=t??n,c=()=>{this.viewModel.toggleSnappingForLayers(e.childLayerIds,e.enabled!=="enabled")};return M("calcite-list-item",{class:ln.layerListGroup,key:s,label:o,open:r,onCalciteListItemSelect:u=>{u.stopPropagation(),c()}},M("calcite-checkbox",{checked:e.enabled==="enabled",indeterminate:e.enabled==="indeterminate",slot:"actions-start",onCalciteCheckboxChange:c}),M("calcite-list",null,this._renderLayerListItemCollection(a)))}get _enabledToggleDisabled(){let e=this.snappingOptions;return e.enabledToggled||e.forceDisabled}get _secondaryElementsDisabled(){return this._enabledToggleDisabled||!this.snappingOptions.enabled}};l([d()],Kt.prototype,"_defaultViewModel",void 0),l([d()],Kt.prototype,"_layerListFilter",void 0),l([d()],Kt.prototype,"label",null),l([d({type:Boolean,nonNullable:!0})],Kt.prototype,"layerListOpen",void 0),l([d(),Ze("esri/widgets/support/SnappingControls/t9n/SnappingControls")],Kt.prototype,"messages",void 0),l([d()],Kt.prototype,"snappingOptions",null),l([d()],Kt.prototype,"view",null),l([d()],Kt.prototype,"viewModel",null),l([d({type:ur,nonNullable:!0})],Kt.prototype,"visibleElements",void 0),l([d()],Kt.prototype,"_enabledToggleDisabled",null),l([d()],Kt.prototype,"_secondaryElementsDisabled",null),Kt=l([b("esri.widgets.support.SnappingControls")],Kt);var Pb=Kt;var rt="esri-sketch",at={base:rt,verticalLayout:`${rt}--vertical`,horizontalLayout:`${rt}--horizontal`,panel:`${rt}__panel`,infoPanel:`${rt}__info-panel`,section:`${rt}__section`,toolSection:`${rt}__tool-section`,infoSection:`${rt}__info-section`,infoCountSection:`${rt}__info-count-section`,menuContainer:`${rt}__menu-container`,menuHeader:`${rt}__menu-header`,menuTitle:`${rt}__menu-title`,featureCountBadge:`${rt}__feature-count-badge`,featureCountText:`${rt}__feature-count-text`,featureCountNumber:`${rt}__feature-count-number`,actionToggle:`${rt}__action-toggle`,actionToggleOn:`${rt}__action-toggle--on`,actionTitle:`${rt}__item-action-title`,actionIcon:`${rt}__item-action-icon`},Pe=class extends ze{constructor(e,t){super(e,t),this._activeCreateOptions=null,this._menuOpen=!1,this._selectionToolbar=null,this._viewModelHandlesGroup=null,this.availableCreateTools=["point","polyline","polygon","rectangle","circle"],this.creationMode="continuous",this.layout="horizontal",this.messages=null,this.messagesCommon=null,this.visibleElements=new vh,this._activateCreateTool=this._activateCreateTool.bind(this),this.viewModel=e?.viewModel||new _b}initialize(){let{layer:e,view:t}=this,n=new Db({view:t?.type==="2d"?t:null,sources:e?[e]:null});this.addHandles([x(()=>this.viewModel,i=>{this._viewModelHandlesGroup=Me(this._viewModelHandlesGroup),i&&(this._viewModelHandlesGroup=Cs([i.on("create",o=>{this.scheduleRender(),this._onCreateOperation(o)}),i.on("update",()=>this.scheduleRender()),i.on("delete",o=>this.emit("delete",o)),i.on("undo",()=>this.scheduleRender()),i.on("redo",()=>this.scheduleRender()),x(()=>i.layer,o=>{this._selectionToolbar&&(this._selectionToolbar.sources=o?[o]:null)}),x(()=>i.view,o=>{this._selectionToolbar&&(this._selectionToolbar.view=o?.type==="2d"?o:null)}),x(()=>i.state,()=>this.notifyChange("state"))]))},qe),ai(()=>n.activeToolInfo,()=>this.viewModel.cancel()),n.on("complete",i=>this._onSelectionOperationComplete(i)),x(()=>{let{selectionTools:i}=this.visibleElements;return{lassoTool:!!i?.["lasso-selection"],rectangleTool:!!i?.["rectangle-selection"]}},i=>{Object.assign(n.visibleElements,i)},qe)]),this._selectionToolbar=n}loadDependencies(){return kt({action:()=>import("./chunk-EANCIRMG.js"),icon:()=>import("./chunk-4HUBSTEF.js")})}destroy(){this._selectionToolbar?.destroy(),this._viewModelHandlesGroup=Me(this._viewModelHandlesGroup)}get activeTool(){let e=this._selectionToolbar?.activeToolInfo;if(e)switch(e.toolName){case"lasso":return"lasso-selection";case"rectangle":return"rectangle-selection";case"default":return"custom-selection"}return this.viewModel.activeTool}get createGraphic(){return this.viewModel.createGraphic}get defaultCreateOptions(){return this.viewModel.defaultCreateOptions}set defaultCreateOptions(e){this.viewModel.defaultCreateOptions=e}get defaultUpdateOptions(){return this.viewModel.defaultUpdateOptions}set defaultUpdateOptions(e){this.viewModel.defaultUpdateOptions=e}get icon(){return"pencil"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get labelOptions(){return this.viewModel.labelOptions}set labelOptions(e){this.viewModel.labelOptions=e}get layer(){return this.viewModel.layer}set layer(e){this.viewModel.layer=e}get snappingOptions(){return this.viewModel.snappingOptions}set snappingOptions(e){this.viewModel.snappingOptions=e}get state(){return this._selectionToolbar?.activeToolInfo?"active":this.viewModel.state}get tooltipOptions(){return this.viewModel.tooltipOptions}set tooltipOptions(e){this.viewModel.tooltipOptions=e}get updateGraphics(){return this.viewModel.updateGraphics}get valueOptions(){return this.viewModel.valueOptions}set valueOptions(e){this.viewModel.valueOptions=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}set viewModel(e){let t=this._get("viewModel");e!==t&&(t&&se(t),this._set("viewModel",e))}get _effectiveAvailableCreateTools(){let{availableCreateTools:e,visibleElements:t}=this;return e?.filter(n=>!!t.createTools?.[n])}create(e,t){return this._activeCreateOptions=t||null,ri(this.viewModel.create(e,t))}update(e,t){return ri(this.viewModel.update(e,t))}complete(){this.viewModel.complete()}cancel(){this._selectionToolbar?.cancel(),this.viewModel.cancel()}undo(){this.viewModel.undo(),this.view?.focus()}redo(){this.viewModel.redo(),this.view?.focus()}delete(){this.viewModel.delete()}duplicate(){return this.viewModel.duplicate()}render(){let{label:e,layout:t,viewModel:{state:n}}=this;return M("div",{"aria-label":e,class:this.classes(at.base,ke.widget,{[ke.disabled]:n==="disabled",[at.verticalLayout]:t==="vertical",[at.horizontalLayout]:t==="horizontal"})},M("div",{class:at.panel,role:"toolbar"},this._renderTopPanelContents()),M("div",{class:this.classes(at.panel,at.infoPanel)},this._renderInfoPanelContents()))}_renderTopPanelContents(){let e=this.classes(at.section,at.toolSection),{_effectiveAvailableCreateTools:t,visibleElements:n,viewModel:i}=this;return[i.updateOnGraphicClick||this._selectionToolbar?.visibleToolCount?M("div",{class:e,key:"selection-button-container",role:"menu"},this._renderDefaultSelectionButton(),this._renderSelectionToolbar()):null,t?.length?M("div",{class:e,role:"menu"},this._renderDrawActions()):null,n.undoRedoMenu?M("div",{class:e,key:"undo-redo-menu-button-container",role:"menu"},this._renderUndoRedoMenuButtons()):null,n.settingsMenu?M("div",{class:at.section,key:"settings-menu-button-container"},this._renderSettingsMenuButton()):null]}_renderInfoPanelContents(){return this._menuOpen?this._renderSettingsMenu():this.updateGraphics.length?[M("div",{class:this.classes(at.section,at.infoSection,at.infoCountSection),key:"feature-count-container"},this._renderFeatureCount()),M("div",{class:this.classes(at.section,at.infoSection),key:"delete-button-container"},this._renderDuplicateButton(),this._renderDeleteButton())]:void 0}_renderSettingsMenu(){let{messagesCommon:e,snappingOptions:t,view:n,viewModel:i,visibleElements:o}=this,s={directionModePicker:o.directionModePicker,labelsToggle:o.labelsToggle,tooltipsToggle:o.tooltipsToggle};return M("div",{class:at.menuContainer,"data-testid":"menu",key:"settings-menu-container",role:"menu"},M("header",{class:at.menuHeader,key:"settings-menu-header"},M("span",{class:at.menuTitle},e.settings)),Qf(s)?M(Eb,{sketchOptions:i.sketchOptions,viewType:n?.type,visibleElements:s}):void 0,o.snappingControls&&n&&t?M(Pb,{snappingOptions:t,view:n,visibleElements:o.snappingControlsElements}):void 0)}_renderFeatureCount(){let{layout:e,messages:t,updateGraphics:{length:n}}=this,i=qf(t.selectedCount,{count:n});return M("div",{"aria-label":i,class:at.featureCountBadge},M("span",{class:at.featureCountNumber},e==="vertical"?n:i))}_renderDuplicateButton(){if(!this.visibleElements.duplicateButton)return;let e=this.messages,t=this.updateGraphics.length>1?e.duplicateFeatures:e.duplicateFeature;return M("calcite-action",{bind:this,onclick:this._onDuplicateSelect,scale:"s",text:t,title:t},M("calcite-icon",{icon:"copy",scale:"s"}))}_renderDeleteButton(){let e=this.messages,t=this.updateGraphics.length>1?e.deleteFeatures:e.deleteFeature;return M("calcite-action",{bind:this,onclick:this.delete,scale:"s",text:t,title:t},M("calcite-icon",{icon:"trash",scale:"s"}))}_renderDefaultSelectionButton(){if(!this.viewModel.updateOnGraphicClick)return;let{messages:e,state:t}=this,n=e.selectFeature;return M("calcite-action",{active:t==="ready",bind:this,disabled:t==="disabled",onclick:this._activateDefaultSelectTool,scale:"s",text:n,title:n},M("calcite-icon",{icon:"cursor",scale:"s"}))}_renderSelectionToolbar(){if(this.view?.type==="2d"&&this._selectionToolbar)return this._selectionToolbar.render()}_renderDrawActions(){let{messages:e}=this;return this._effectiveAvailableCreateTools?.map(t=>{switch(t){case"point":return this._renderAction(t,e.drawPoint,"pin");case"polyline":return this._renderAction(t,e.drawPolyline,"line");case"polygon":return this._renderAction(t,e.drawPolygon,"polygon");case"rectangle":return this._renderAction(t,e.drawRectangle,"rectangle");case"circle":return this._renderAction(t,e.drawCircle,"circle");default:return}})}_renderAction(e,t,n){return M("calcite-action",{active:this.activeTool===e,bind:this,disabled:this.state==="disabled",onclick:()=>this._activateCreateTool(e),scale:"s",text:t,title:t},M("calcite-icon",{icon:n,scale:"s"}))}_renderUndoRedoMenuButtons(){return[this._renderUndoButton(),this._renderRedoButton()]}_renderUndoButton(){let e=this.messages.undo;return M("calcite-action",{bind:this,disabled:!this.viewModel.canUndo()||this.state==="disabled",onclick:this.undo,scale:"s",text:e,title:e},M("calcite-icon",{icon:Hr(this.container)?"redo":"undo",scale:"s"}))}_renderRedoButton(){let e=this.messages.redo;return M("calcite-action",{bind:this,disabled:!this.viewModel.canRedo()||this.state==="disabled",onclick:this.redo,scale:"s",text:e,title:e},M("calcite-icon",{icon:Hr(this.container)?"undo":"redo",scale:"s"}))}_renderSettingsMenuButton(){let e=this.messagesCommon.settings;return M("calcite-action",{active:this._menuOpen,bind:this,"data-testid":"settings-menu-action",disabled:this.state==="disabled",onclick:this._toggleMenu,scale:"s",text:e,title:e},M("calcite-icon",{icon:"gear",scale:"s"}))}_activateCreateTool(e){this.activeTool!==e?(this._selectionToolbar?.cancel(),this.create(e)):this.cancel()}_onCreateOperation(e){if(e.state!=="complete")return;let{creationMode:t}=this,{type:n}=e;if(n==="create"){let{tool:i,graphic:o}=e,s=this._activeCreateOptions;this._activeCreateOptions=null,t==="continuous"?this.create(i,s):t==="update"&&this.update([o])}}_toggleMenu(){this._menuOpen=!this._menuOpen,this.scheduleRender()}_onDuplicateSelect(){let e=this.duplicate(),t=this.viewModel.activeTool;t!=="transform"&&t!=="reshape"||this.update(e,{tool:t})}_onSelectionOperationComplete(e){let{viewModel:{defaultUpdateOptions:t}}=this,{selection:n}=e;if(!e.aborted&&n.length){let i=t.tool,o=n.length>1&&i==="reshape"?"transform":i;this.update(n,G(v({},t),{tool:o}))}this.notifyChange("state")}_activateDefaultSelectTool(){this.cancel(),this.view?.focus()}};l([d()],Pe.prototype,"activeTool",null),l([d({cast:e=>{if(!e?.length)return null;let t=new Set(["point","polyline","polygon","rectangle","circle"]);return e.filter(n=>t.has(n))}})],Pe.prototype,"availableCreateTools",void 0),l([d({readOnly:!0})],Pe.prototype,"createGraphic",null),l([d()],Pe.prototype,"creationMode",void 0),l([d()],Pe.prototype,"defaultCreateOptions",null),l([d()],Pe.prototype,"defaultUpdateOptions",null),l([d()],Pe.prototype,"icon",null),l([d()],Pe.prototype,"label",null),l([d()],Pe.prototype,"labelOptions",null),l([d()],Pe.prototype,"layer",null),l([d({type:["horizontal","vertical"]})],Pe.prototype,"layout",void 0),l([d(),Ze("esri/widgets/Sketch/t9n/Sketch")],Pe.prototype,"messages",void 0),l([d(),Ze("esri/t9n/common")],Pe.prototype,"messagesCommon",void 0),l([d()],Pe.prototype,"snappingOptions",null),l([d()],Pe.prototype,"state",null),l([d()],Pe.prototype,"tooltipOptions",null),l([d({readOnly:!0})],Pe.prototype,"updateGraphics",null),l([d({type:Nl,nonNullable:!0})],Pe.prototype,"valueOptions",null),l([d()],Pe.prototype,"view",null),l([d(),x_(["create","update","undo","redo"])],Pe.prototype,"viewModel",null),l([d({type:vh,nonNullable:!0})],Pe.prototype,"visibleElements",void 0),l([d()],Pe.prototype,"_effectiveAvailableCreateTools",null),Pe=l([b("esri.widgets.Sketch")],Pe);var Rb=Pe;var cn=class extends P{constructor(e){super(e),this.activeTool=null,this.activeViewModel=null,this.view=null}get areaUnit(){return this.defaultUnit}set areaUnit(e){this._overrideIfSome("areaUnit",e)}get linearUnit(){return this.defaultUnit}set linearUnit(e){this._overrideIfSome("linearUnit",e)}get state(){let{activeViewModel:e}=this;return e?e.state:"disabled"}};l([d({type:["area","distance","direct-line"]})],cn.prototype,"activeTool",void 0),l([d()],cn.prototype,"activeViewModel",void 0),l([d({type:sg})],cn.prototype,"areaUnit",null),l([d(Ll)],cn.prototype,"defaultUnit",void 0),l([d({type:rg})],cn.prototype,"linearUnit",null),l([d({readOnly:!0})],cn.prototype,"state",null),l([d()],cn.prototype,"view",void 0),cn=l([b("esri.widgets.Measurement.MeasurementViewModel")],cn);var xh=cn;var VM={base:"esri-measurement"};function HM(e){return e?.declaredClass==="esri.widgets.AreaMeasurement2D"||e?.declaredClass==="esri.widgets.AreaMeasurement3D"}var fi=class extends ze{constructor(e,t){super(e,t),this._widgets=new Map,this.activeWidget=null,this.messages=null,this.viewModel=new xh}initialize(){this.activeWidget&&this.viewModel.set("activeViewModel",this.activeWidget.viewModel),this.view&&this.activeTool&&this._getActiveWidget().then(e=>{this._set("activeWidget",e)}),this.addHandles([x(()=>[this.view,this.activeTool],()=>I(this,null,function*(){this._set("activeWidget",yield this._getActiveWidget())})),x(()=>this.activeWidget,(e,t)=>{this.viewModel.set("activeViewModel",e?e.viewModel:null),t&&(t.visible=!1)}),x(()=>[this.areaUnit,this.linearUnit,this.uiStrings],()=>this._updateSubWidgetProperties())])}destroy(){this._destroyWidgets()}get activeTool(){return this.viewModel.activeTool}set activeTool(e){this.viewModel.activeTool=e}get areaUnit(){return this.viewModel.areaUnit}set areaUnit(e){this.viewModel.areaUnit=e}get icon(){return"measure"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get linearUnit(){return this.viewModel.linearUnit}set linearUnit(e){this.viewModel.linearUnit=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){let{activeWidget:e}=this,t=e&&!e.destroyed?e.render():null;return M("div",{class:VM.base},t)}clear(){this.activeTool=null,this._destroyWidgets()}startMeasurement(){let{activeViewModel:e}=this.viewModel;e&&ri(e.start())}_createWidget(e){return I(this,null,function*(){let{areaUnit:t,linearUnit:n,view:i}=this;if(!i)return null;switch(e){case"area":{let{type:o}=i;switch(o){case"2d":return new(yield import("./chunk-ZVTFGOTK.js")).default({view:i,unit:t,uiStrings:this._createUIStringsForWidget(e)});case"3d":return new(yield import("./chunk-YRBNLTH6.js")).default({view:i,unit:t,uiStrings:this._createUIStringsForWidget(e)});default:return null}}case"distance":{let{type:o}=i;return o==="2d"?new(yield import("./chunk-KL27SKGA.js")).default({view:i,unit:n,uiStrings:this._createUIStringsForWidget(e)}):null}case"direct-line":{let{type:o}=i;return o==="3d"?new(yield import("./chunk-DXHN7UKG.js")).default({view:i,unit:n,uiStrings:this._createUIStringsForWidget(e)}):null}default:return null}})}_destroyWidgets(){this._widgets.forEach(e=>e.destroy()),this._widgets.clear()}_getActiveWidget(){return I(this,null,function*(){let{activeTool:e,view:t}=this;if(!t||!e)return null;let n=null;if(this._widgets.has(e))n=this._widgets.get(e),n.visible=!0;else{if(n=yield this._createWidget(e),!n)return null;yield n.viewModel.start(),this._widgets.set(e,n)}return n})}_createUIStringsForWidget(e){if(!this.uiStrings)return;let t=e+"-"+this.view?.type;return this.uiStrings[t]}_updateSubWidgetProperties(){this._widgets.forEach((e,t)=>{let{areaUnit:n,linearUnit:i}=this;e.unit=HM(e)?n:i,e.uiStrings=this._createUIStringsForWidget(t)})}};l([d()],fi.prototype,"activeTool",null),l([d({readOnly:!0})],fi.prototype,"activeWidget",void 0),l([d()],fi.prototype,"areaUnit",null),l([d()],fi.prototype,"icon",null),l([d()],fi.prototype,"label",null),l([d()],fi.prototype,"linearUnit",null),l([d(),Ze("esri/widgets/Measurement/t9n/Measurement")],fi.prototype,"messages",void 0),l([d()],fi.prototype,"uiStrings",void 0),l([d()],fi.prototype,"view",null),l([d({type:xh})],fi.prototype,"viewModel",void 0),fi=l([b("esri.widgets.Measurement")],fi);var Lb=fi;var Ti=(()=>{let t=class t{constructor(){this.showLayersOrWidgetsSubject=new Re({type:w.PlatformLayer,visible:!0}),this.showLayersOrWidgets$=this.showLayersOrWidgetsSubject.asObservable(),this.setMapFiltersSubject=new Re(null),this.setMapFilters$=this.setMapFiltersSubject.asObservable(),this.platformFilters={layerOrWidget:w.PlatformLayer,details:new jo},this.resetPlatformFiltersSubject=new Re(null),this.resetPlatformFilters$=this.resetPlatformFiltersSubject.asObservable(),this.updateFiltersListSubject=new Re(null),this.updateFiltersList$=this.updateFiltersListSubject.asObservable(),this.downloadFilteredDataSubject=new Re(null),this.downloadFilteredData$=this.downloadFilteredDataSubject.asObservable(),this.hurricaneFilters={layerOrWidget:w.HistoricHurricaneTrackLayer,details:new jo},this.rHFilters={layerOrWidget:w.RecentHGroupLayer,details:new jo},this.hConeLayerFilters={layerOrWidget:w.HHConeLayer,details:new jo},this.HLayerListFromMapSubject=new Re(null),this.hLayerListFromMap$=this.HLayerListFromMapSubject.asObservable(),this.pipelineFilters={layerOrWidget:w.PipelineLayer,details:new jo},this.resetPipelineFiltersSubject=new Re(null),this.resetPipelineFilters$=this.resetPipelineFiltersSubject.asObservable(),this.FilterListFromMapSubject=new Re({type:D.None,value:[]}),this.filterListFromMap$=this.FilterListFromMapSubject.asObservable()}ShowHideLayersOrWidgets(i){this.showLayersOrWidgetsSubject.next(i)}setMapFilterValue(i,o){let s=this.getLayerOrWidgetFromFilterType(i),r=this.getFilterObjectFromLayerOrWidgetType(s);if(r==null)return;let a=!1;if(o.length<1?r.details.has(i)&&(r.details.delete(i),a=!0):(r.details.set(i,o),a=!0),!!a)switch(this.setMapFiltersSubject.next(r),s){case w.PlatformLayer:this.updatePlatformFilterList(i,o);break;case w.HistoricHurricaneTrackLayer:this.updateHurricaneFilterList(i,o);break}}updatePlatformFilterList(i,o){if(i===D.Area_Code){let s=new Map;s.set(D.Area_Code,o),this.updateFiltersListSubject.next({type:D.Block_Number,value:s})}}clearPlatformFilters(){let i=this.platformFilters.details.get(D.Area_Code);this.platformFilters.details.clear(),this.setMapFiltersSubject.next(this.platformFilters),this.resetPlatformFiltersSubject.next(!0),i&&i.length>0&&this.updateFiltersListSubject.next({type:D.Block_Number,value:null})}downloadFilteredData(i){this.downloadFilteredDataSubject.next(i)}updateHurricaneFilterList(i,o){if(i===D.HurricaneYear){if(!this.hurricaneFilters.details.has(D.HurricaneName)){let s=new Map;s.set(D.HurricaneYear,o),this.updateFiltersListSubject.next({type:D.HurricaneName,value:s})}if(o.length<1){let s=null;this.hurricaneFilters.details.has(D.HurricaneName)&&(s=new Map,s.set(D.HurricaneName,this.hurricaneFilters.details.get(D.HurricaneName))),this.updateFiltersListSubject.next({type:D.HurricaneYear,value:s})}}else if(i===D.HurricaneName){if(!this.hurricaneFilters.details.has(D.HurricaneYear)){let s=new Map;s.set(D.HurricaneName,o),this.updateFiltersListSubject.next({type:D.HurricaneYear,value:s})}if(o.length<1){let s=null;this.hurricaneFilters.details.has(D.HurricaneYear)&&(s=new Map,s.set(D.HurricaneYear,this.hurricaneFilters.details.get(D.HurricaneYear))),this.updateFiltersListSubject.next({type:D.HurricaneName,value:s})}}this.updateFiltersListSubject.next({type:D.HConeAdvisory,value:this.hurricaneFilters.details})}clearHurricaneFilters(){let i=this.hurricaneFilters.details.get(D.HurricaneYear),o=this.hurricaneFilters.details.get(D.HurricaneName);this.hurricaneFilters.details.clear(),this.hConeLayerFilters.details.clear(),this.setMapFiltersSubject.next(this.hurricaneFilters),this.setMapFiltersSubject.next(this.hConeLayerFilters),i&&i.length>0&&this.updateFiltersListSubject.next({type:D.HurricaneName,value:null}),o&&o.length>0&&this.updateFiltersListSubject.next({type:D.HurricaneYear,value:null})}clearRHFilters(){this.rHFilters.details.clear(),this.setMapFiltersSubject.next(this.rHFilters)}setHLayerListFromMap(i){this.HLayerListFromMapSubject.next(i)}clearPipelineFilters(){this.pipelineFilters.details.clear(),this.setMapFiltersSubject.next(this.pipelineFilters),this.resetPipelineFiltersSubject.next(!0)}setFilterListFromMap(i){this.FilterListFromMapSubject.next(i)}getLayerOrWidgetFromFilterType(i){switch(i){case D.ActiveStatus:case D.Area_Code:case D.Block_Number:case D.Bus_Asc_Name:case D.operatorName:case D.Complex_Id_Num:case D.Install_Date:case D.Removal_Date:case D.Water_Depth__feet_:case D.platformName:return w.PlatformLayer;case D.HurricaneName:case D.HurricaneYear:return w.HistoricHurricaneTrackLayer;case D.PipelineOperator:case D.PipelineSegmentNumber:case D.PipelineStatusCode:return w.PipelineLayer;case D.HConeAdvisory:return w.HHConeLayer;case D.RH_STORMNAME:return w.RecentHGroupLayer;default:return w.None}}getFilterObjectFromType(i){let o=this.getLayerOrWidgetFromFilterType(i);return this.getFilterObjectFromLayerOrWidgetType(o)}getFilterObjectFromLayerOrWidgetType(i){switch(i){case w.PlatformLayer:return this.platformFilters;case w.HistoricHurricaneTrackLayer:return this.hurricaneFilters;case w.HHConeLayer:return this.hConeLayerFilters;case w.PipelineLayer:return this.pipelineFilters;case w.RecentHGroupLayer:return this.rHFilters;default:return null}}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),D=function(e){return e.None="None",e.ActiveStatus="activeStatus",e.Area_Code="area_Code",e.Block_Number="block_Number",e.Bus_Asc_Name="bus_Asc_Name",e.operatorName="i_OperatorName",e.platformName="platformName",e.Water_Depth__feet_="water_Depth__feet_",e.Install_Date="install_Date",e.Removal_Date="removal_Date",e.Complex_Id_Num="complex_Id_Num",e.HurricaneYear="year",e.HurricaneName="NAME",e.PipelineSegmentNumber="SEGMENT_NU",e.PipelineOperator="SDE_COMPAN",e.PipelineStatusCode="STATUS_COD",e.HConeAdvisory="AdvisoryNo",e.RH_STORMNAME="STORMNAME",e}(D||{}),Oh=function(e){return e.Active="Active",e.Removed="Removed",e}(Oh||{}),w=function(e){return e.PlatformLayer="PlatformLayer",e.BSEEPlatformLayer="BSEEPlatformLayer",e.Legend="Legend",e.AreaLayer="AreaLayer",e.BLockLayer="BLockLayer",e.HistoricHurricaneTrackLayer="HistoricHurricaneTrackLayer",e.HHConeLayer="HHConeLayer",e.ForecastGroupLayer="ForecastGroupLayer",e.PipelineLayer="PipelineLayer",e.ForecastSubLayerAll="ForecastSubLayerAll",e.ForecastSubLayer0="ForecastSubLayer0",e.ForecastSubLayer1="ForecastSubLayer1",e.ForecastSubLayer2="ForecastSubLayer2",e.ForecastSubLayer3="ForecastSubLayer3",e.ForecastSubLayer4="ForecastSubLayer4",e.ForecastSubLayer5="ForecastSubLayer5",e.ForecastSubLayer7="ForecastSubLayer7",e.ForecastSubLayer8="ForecastSubLayer8",e.ForecastSubLayer9="ForecastSubLayer9",e.ForecastSubLayer10="ForecasSubtLayer10",e.ForecastSubLayer11="ForecasSubtLayer11",e.RecentHGroupLayer="RecentHGroupLayer",e.RecentHSubLayer0="RecentHSubLayer0",e.RecentHSubLayer1="RecentHSubLayer1",e.RecentHSubLayer2="RecentHSubLayer2",e.None="None",e.Sketch="Sketch",e.Measurement="Measurement",e}(w||{}),jo=class extends Map{};var BM=["overlay"],GM=["*"];function jM(e,t){e&1&&L(0,"div")}function UM(e,t){if(e&1&&(_(0,"div"),B(1,jM,1,0,"div",6),y()),e&2){let n=T(2);_i(n.spinner.class),gi("color",n.spinner.color),g(),C("ngForOf",n.spinner.divArray)}}function zM(e,t){if(e&1&&(L(0,"div",7),fs(1,"safeHtml")),e&2){let n=T(2);C("innerHTML",Ld(1,1,n.template),Fr)}}function $M(e,t){if(e&1&&(_(0,"div",2,0),B(2,UM,2,5,"div",3)(3,zM,2,3,"div",4),_(4,"div",5),hs(5),y()()),e&2){let n=T();gi("background-color",n.spinner.bdColor)("z-index",n.spinner.zIndex)("position",n.spinner.fullScreen?"fixed":"absolute"),C("@.disabled",n.disableAnimation)("@fadeIn","in"),g(2),C("ngIf",!n.template),g(),C("ngIf",n.template),g(),gi("z-index",n.spinner.zIndex)}}var WM={"ball-8bits":16,"ball-atom":4,"ball-beat":3,"ball-circus":5,"ball-climbing-dot":4,"ball-clip-rotate":1,"ball-clip-rotate-multiple":2,"ball-clip-rotate-pulse":2,"ball-elastic-dots":5,"ball-fall":3,"ball-fussion":4,"ball-grid-beat":9,"ball-grid-pulse":9,"ball-newton-cradle":4,"ball-pulse":3,"ball-pulse-rise":5,"ball-pulse-sync":3,"ball-rotate":1,"ball-running-dots":5,"ball-scale":1,"ball-scale-multiple":3,"ball-scale-pulse":2,"ball-scale-ripple":1,"ball-scale-ripple-multiple":3,"ball-spin":8,"ball-spin-clockwise":8,"ball-spin-clockwise-fade":8,"ball-spin-clockwise-fade-rotating":8,"ball-spin-fade":8,"ball-spin-fade-rotating":8,"ball-spin-rotate":2,"ball-square-clockwise-spin":8,"ball-square-spin":8,"ball-triangle-path":3,"ball-zig-zag":2,"ball-zig-zag-deflect":2,cog:1,"cube-transition":2,fire:3,"line-scale":5,"line-scale-party":5,"line-scale-pulse-out":5,"line-scale-pulse-out-rapid":5,"line-spin-clockwise-fade":8,"line-spin-clockwise-fade-rotating":8,"line-spin-fade":8,"line-spin-fade-rotating":8,pacman:6,"square-jelly-box":2,"square-loader":1,"square-spin":1,timer:1,"triangle-skew-spin":1},kh={BD_COLOR:"rgba(51,51,51,0.8)",SPINNER_COLOR:"#fff",Z_INDEX:99999},Ah="primary",Uo=class e{constructor(t){Object.assign(this,t)}static create(t){return!t?.template&&!t?.type&&console.warn(`[ngx-spinner]: Property "type" is missed. Please, provide animation type to <ngx-spinner> component
        and ensure css is added to angular.json file`),new e(t)}},Fh=(()=>{let t=class t{constructor(){this.spinnerObservable=new Re(null)}getSpinner(i){return this.spinnerObservable.asObservable().pipe(yt(o=>o&&o.name===i))}show(i=Ah,o){return new Promise((s,r)=>{setTimeout(()=>{o&&Object.keys(o).length?(o.name=i,this.spinnerObservable.next(new Uo(G(v({},o),{show:!0}))),s(!0)):(this.spinnerObservable.next(new Uo({name:i,show:!0})),s(!0))},10)})}hide(i=Ah,o=10){return new Promise((s,r)=>{setTimeout(()=>{this.spinnerObservable.next(new Uo({name:i,show:!1})),s(!0)},o)})}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),Nb=new xe("NGX_SPINNER_CONFIG"),qM=(()=>{let t=class t{constructor(i){this._sanitizer=i}transform(i){if(i)return this._sanitizer.bypassSecurityTrustHtml(i)}};t.\u0275fac=function(o){return new(o||t)(V(qr,16))},t.\u0275pipe=el({name:"safeHtml",type:t,pure:!0,standalone:!0});let e=t;return e})(),Vb=(()=>{let t=class t{constructor(i,o,s,r){this.spinnerService=i,this.changeDetector=o,this.elementRef=s,this.globalConfig=r,this.disableAnimation=!1,this.spinner=new Uo,this.ngUnsubscribe=new Ie,this.setDefaultOptions=()=>{let{type:a}=this.globalConfig??{};this.spinner=Uo.create({name:this.name,bdColor:this.bdColor,size:this.size,color:this.color,type:this.type??a,fullScreen:this.fullScreen,divArray:this.divArray,divCount:this.divCount,show:this.show,zIndex:this.zIndex,template:this.template,showSpinner:this.showSpinner})},this.bdColor=kh.BD_COLOR,this.zIndex=kh.Z_INDEX,this.color=kh.SPINNER_COLOR,this.size="large",this.fullScreen=!0,this.name=Ah,this.template=null,this.showSpinner=!1,this.divArray=[],this.divCount=0,this.show=!1}initObservable(){this.spinnerService.getSpinner(this.name).pipe(Qe(this.ngUnsubscribe)).subscribe(i=>{this.setDefaultOptions(),Object.assign(this.spinner,i),i.show&&this.onInputChange(),this.changeDetector.detectChanges()})}ngOnInit(){this.setDefaultOptions(),this.initObservable()}isSpinnerZone(i){return i===this.elementRef.nativeElement.parentElement?!0:i.parentNode&&this.isSpinnerZone(i.parentNode)}ngOnChanges(i){for(let o in i)if(o){let s=i[o];if(s.isFirstChange())return;typeof s.currentValue<"u"&&s.currentValue!==s.previousValue&&s.currentValue!==""&&(this.spinner[o]=s.currentValue,o==="showSpinner"&&(s.currentValue?this.spinnerService.show(this.spinner.name,this.spinner):this.spinnerService.hide(this.spinner.name)),o==="name"&&this.initObservable())}}getClass(i,o){this.spinner.divCount=WM[i],this.spinner.divArray=Array(this.spinner.divCount).fill(0).map((r,a)=>a);let s="";switch(o.toLowerCase()){case"small":s="la-sm";break;case"medium":s="la-2x";break;case"large":s="la-3x";break;default:break}return"la-"+i+" "+s}onInputChange(){this.spinner.class=this.getClass(this.spinner.type,this.spinner.size)}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}};t.\u0275fac=function(o){return new(o||t)(V(Fh),V(Lt),V(He),V(Nb,8))},t.\u0275cmp=ee({type:t,selectors:[["ngx-spinner"]],viewQuery:function(o,s){if(o&1&&xt(BM,5),o&2){let r;pe(r=he())&&(s.spinnerDOM=r.first)}},inputs:{bdColor:"bdColor",size:"size",color:"color",type:"type",fullScreen:"fullScreen",name:"name",zIndex:"zIndex",template:"template",showSpinner:"showSpinner",disableAnimation:"disableAnimation"},standalone:!0,features:[Ut,ae],ngContentSelectors:GM,decls:1,vars:1,consts:[["overlay",""],["class","ngx-spinner-overlay",3,"background-color","z-index","position",4,"ngIf"],[1,"ngx-spinner-overlay"],[3,"class","color",4,"ngIf"],[3,"innerHTML",4,"ngIf"],[1,"loading-text"],[4,"ngFor","ngForOf"],[3,"innerHTML"]],template:function(o,s){o&1&&(ps(),B(0,$M,6,12,"div",1)),o&2&&C("ngIf",s.spinner.show)},dependencies:[qM,Pi,Un],styles:[".ngx-spinner-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%}.ngx-spinner-overlay[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:not(.loading-text){top:50%;left:50%;margin:0;position:absolute;transform:translate(-50%,-50%)}.loading-text[_ngcontent-%COMP%]{position:absolute;top:60%;left:50%;transform:translate(-50%,-60%)}"],data:{animation:[al("fadeIn",[vs("in",zn({opacity:1})),bs(":enter",[zn({opacity:0}),ys(300)]),bs(":leave",ys(200,zn({opacity:0})))])]},changeDetection:0});let e=t;return e})(),Hb=(()=>{let t=class t{static forRoot(i){return{ngModule:t,providers:[{provide:Nb,useValue:i}]}}};t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=Rt({type:t}),t.\u0275inj=Pt({imports:[ve]});let e=t;return e})();var Gb=h1(Bb());var jb=(()=>{let t=class t{constructor(){}ExportDataExcel(i,o,s){let r=[];r.push(o),import("./chunk-AAQMBHOX.js").then(a=>{let c=a.utils.json_to_sheet([]);a.utils.sheet_add_aoa(c,r),this.autoFitColumns(c,r),a.utils.sheet_add_json(c,i,{origin:"A2",skipHeader:!0});let u={Sheets:{data:c},SheetNames:["data"]},p=a.write(u,{bookType:"xlsx",type:"array"});this.saveAsExcelFile(p,s)})}autoFitColumns(i,o){let s=[];o.map(a=>{a.map(c=>{let u=c.length>10?c.length:10;s[c]=s[c]>=u?s[c]:u})});let r=[];Object.keys(s).map(a=>{let c=s[a]===null?10:s[a];r.push({width:c})}),i["!cols"]=r}saveAsExcelFile(i,o){let s="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8",r=".xlsx",a=new Blob([i],{type:s});Gb.saveAs(a,o+"_"+new Date().toLocaleDateString()+r)}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var KM=["mapViewNode"],Ub=e=>({"text-primary":e}),zb=(()=>{let t=class t{constructor(i,o,s,r){this.mapService=i,this.spinnerService=o,this.excelService=s,this.toastr=r,this.baseUrl="https://gisisims.azurewebsites.net/api/",this.view=null,this.mapReady=!1,this.forecastHLayers=[],this.forecastHLayersDetails=[],this.recentHLayers=[],this.recentHLayersDetails=[],this.defaultConditionForLayer={[w.PlatformLayer]:"latitude <> 0 AND longitude <> 0",[w.BSEEPlatformLayer]:void 0,[w.Legend]:void 0,[w.AreaLayer]:void 0,[w.BLockLayer]:void 0,[w.HistoricHurricaneTrackLayer]:"1=0",[w.None]:void 0,[w.PipelineLayer]:"1=1",[w.HHConeLayer]:"1=0",[w.ForecastGroupLayer]:"1=1",[w.ForecastSubLayer0]:void 0,[w.ForecastSubLayer1]:void 0,[w.ForecastSubLayer2]:void 0,[w.ForecastSubLayer3]:void 0,[w.ForecastSubLayer4]:void 0,[w.ForecastSubLayer5]:void 0,[w.ForecastSubLayer7]:void 0,[w.ForecastSubLayer8]:void 0,[w.ForecastSubLayer9]:void 0,[w.ForecastSubLayer10]:void 0,[w.ForecastSubLayer11]:void 0,[w.ForecastSubLayerAll]:void 0,[w.Sketch]:void 0,[w.RecentHGroupLayer]:void 0,[w.RecentHSubLayer0]:void 0,[w.RecentHSubLayer1]:void 0,[w.RecentHSubLayer2]:void 0,[w.Measurement]:void 0}}initializeMap(){let i=this.mapViewEl.nativeElement;Gd.apiKey="AAPKd618a22668304d46bef2738772b6593bfCyEJX_kFpN0SYkRDaQSMcopf5s2JUROU6_-R7hRCsCZzlJLDciyRkfSlNltWu6a",Gd.log.level="error";let o=new sc({basemap:"arcgis-topographic"});this.map=o,this.view=new sb({container:i,map:o,zoom:6,popup:{defaultPopupTemplateEnabled:!0},center:[-89.052,24.96]}),this.view.constraints={minZoom:3};let s=new db({view:this.view});this.view.ui.add(s,{position:"top-left"}),this.legend=new r0({view:this.view,visible:!0}),this.view.ui.add(this.legend,"bottom-right"),this.measurementWidget=new Lb({view:this.view,visible:!1,linearUnit:"miles",areaUnit:"square-miles"}),this.view.ui.add(this.measurementWidget,"bottom-right"),this.SetAreaLayer(),this.SetBlockLayer(),this.SetBSEEPlatformLayer(),this.SetPipelineLayer();var r=this;return Promise.all([this.areaLayer.load(),this.blockLayer.load(),this.platformsBSEELayer.load()]).then(function(){o.addMany([r.areaLayer,r.blockLayer,r.platformsBSEELayer])}).catch(function(a){console.error("Error loading layers:",a)}),Promise.all([this.pipelineLayer.load()]).then(function(){o.add(r.pipelineLayer)}).catch(function(a){console.error("Error loading pipeline layer:",a)}),this.SetMainPlatformLayer(),o.add(this.platformLayer),this.platformLayer.when(()=>{this.view.whenLayerView(this.platformLayer).then(function(a){r.platformLayerView=a})}).catch(a=>{console.log("view platformLayer error",a)}),this.SetHistoricHurricaneLayer(),this.historicHurricaneTrackLayer.load().then(function(){o.add(r.historicHurricaneTrackLayer)}),this.SetHHConesLayer(),this.hhConesLayer.load().then(function(){o.add(r.hhConesLayer)}),this.SetForecastHurricaneLayer(),this.SetSketchLayer(),o.add(this.graphicsLayer),this.view.ui.add(this.sketchWidget,"top-right"),this.SetRHurricaneLayer(),this.view.ui.add("sketchPanel","top-right"),this.view.ui.add("measurementDiv","top-right"),this.view.when()}distanceMeasurement(){this.measurementWidget.activeTool="distance"}areaMeasurement(){this.measurementWidget.activeTool="area"}clearMeasurements(){this.measurementWidget.clear()}ClearSketch(){this.graphicsLayer.removeAll()}ExportFeatures(){return I(this,null,function*(){let o=this.graphicsLayer.graphics.items.map(function(r){return r.geometry}),s=yield g_(o);if(this.platformLayerView){let r={geometry:s,outFields:["*"]};this.platformLayerView.queryFeatures(r).then(a=>{this.exportDataToExcel(a)}).catch(a=>{console.log("error while downloading sketched feature:",a)})}})}getDateFormat(i){if(i){var o=new Date(i);return o.toISOString().slice(0,10)}return i}SetSketchLayer(){this.graphicsLayer=new xl({title:"graphicsLayer"}),this.sketchWidget=new Rb({layer:this.graphicsLayer,view:this.view,creationMode:"update",snappingOptions:{enabled:!0,selfEnabled:!1,featureSources:[{layer:this.graphicsLayer,enabled:!0}]}})}ngOnInit(){this.initializeMap().then(()=>{console.log("The map is ready."),this.mapReady=!0,this.setFilterValue(),this.mapService.showLayersOrWidgets$.subscribe(i=>{if(this.mapReady)switch(i.type){case w.PlatformLayer:this.platformLayer&&(this.platformLayer.visible=i.visible);break;case w.BSEEPlatformLayer:this.platformsBSEELayer&&(this.platformsBSEELayer.visible=i.visible);break;case w.AreaLayer:this.areaLayer&&(this.areaLayer.visible=i.visible);break;case w.BLockLayer:this.blockLayer&&(this.blockLayer.visible=i.visible);break;case w.Legend:this.legend&&(this.legend.visible=i.visible);break;case w.HistoricHurricaneTrackLayer:this.historicHurricaneTrackLayer&&(this.historicHurricaneTrackLayer.visible=i.visible);break;case w.HHConeLayer:this.hhConesLayer&&(this.hhConesLayer.visible=i.visible);break;case w.ForecastGroupLayer:this.forecastHGroupLayer&&(this.forecastHGroupLayer.visible=i.visible);break;case w.RecentHGroupLayer:this.recentHGroupLayer&&(this.recentHGroupLayer.visible=i.visible);break;case w.PipelineLayer:this.pipelineLayer&&(i.visible==!0&&this.showLoading(this.pipelineLayer),this.pipelineLayer.visible=i.visible);break;case w.ForecastSubLayerAll:this.forecastHGroupLayer.layers.items&&this.forecastHGroupLayer.layers.items.forEach(a=>{a.visible=i.visible});break;case w.Sketch:if(this.sketchWidget){this.sketchWidget.visible=i.visible;var o=document.getElementById("sketchPanel");o&&(o.style.display=i.visible?"block":"none")}break;case w.Measurement:if(this.measurementWidget){i.visible?this.distanceMeasurement():this.clearMeasurements(),this.measurementWidget.visible=i.visible;var s=document.getElementById("measurementDiv");s&&(s.style.display=i.visible?"block":"none")}break;default:let r=this.getLayerFromLayerOrWidget(i.type);r&&(r.visible=i.visible);break}}),this.mapService.setMapFilters$.subscribe(i=>{i!=null&&this.ApplyMapFilters(i)}),this.mapService.updateFiltersList$.subscribe(i=>{this.UpdateFilterList(i)}),this.mapService.downloadFilteredData$.subscribe(i=>{i!=null&&this.downloadFilteredData(i)})})}downloadFilteredData(i){let o=this,s="1=1";i==w.PlatformLayer&&this.defaultConditionForLayer.PlatformLayer!=null&&(s=this.defaultConditionForLayer.PlatformLayer);let r=this.getLayerFromLayerOrWidget(i);r.queryFeatures({where:r.definitionExpression||s,outFields:["*"],orderByFields:[D.platformName]}).then(function(a){o.exportDataToExcel(a)})}exportDataToExcel(i){if(i.features&&i.features.length>0){let o=Object.keys(i.features[0].attributes),s=[];for(let r=0;r<i.features.length;r++)i.features[r].attributes.install_Date=this.getDateFormat(i.features[r].attributes.install_Date),i.features[r].attributes.removal_Date=this.getDateFormat(i.features[r].attributes.removal_Date),i.features[r].attributes.site_Clear_Date=this.getDateFormat(i.features[r].attributes.site_Clear_Date),i.features[r].attributes.i_InstallDate=this.getDateFormat(i.features[r].attributes.i_InstallDate),i.features[r].attributes.i_RemovalDate=this.getDateFormat(i.features[r].attributes.i_RemovalDate),s.push(i.features[r].attributes);this.excelService.ExportDataExcel(s,o,"Platforms")}else this.toastr.warning("No data to export","NO DATA")}SetMainPlatformLayer(){let i={type:"simple-marker",size:"4px",outline:{color:"transparent"}};var o=[{value:"Removed",symbol:G(v({},i),{color:"grey"})}];let s={type:"unique-value",legendOptions:{title:"Business Asc Name"},field:"bus_Asc_Name",defaultLabel:"Active",valueExpression:`
      var bus_Asc_Name = $feature.bus_Asc_Name;
      var removal_Date = $feature.removal_Date;
      var today_date = Today();
      var diff = DateDiff(today_date, removal_Date, 'days');

      if (diff > 0) {
        return 'Removed';
      } else {
        return bus_Asc_Name;
      }
    `,defaultSymbol:G(v({},i),{color:"blue"}),uniqueValueInfos:o};this.platformLayer=new lu({url:`${this.baseUrl}GIS/gisplatformsgeojoined`,customParameters:{format:"geojson"},visible:!0,title:"Platforms",refreshInterval:5,outFields:["*"],popupTemplate:this.getPlatformPopupTemplate()}),this.platformLayer.renderer=s}getPlatformPopupTemplate(){var i={title:"<span style='color: orange;'>Platform : {area_Code} {block_Number} {structure_Name}</span>",content:`
      <table class="esri-widget__table" style="width:100%">
          <tr>
              <th style="width:30%">Field Name</th>
              <th style="width:35%">BSEE</th>
              <th style="width:35%">iSIMS</th>
          </tr>
          <tr>
              <td>Complex Id Num</td>
              <td>{complex_Id_Num}</td>
              <td>{i_Cpxid}</td>
          </tr>
          <tr>
              <td>Structure Number</td>
              <td>{structure_Number}</td>
              <td>{i_Stn}</td>
          </tr>
          <tr>
              <td>Bus Asc Name</td>
              <td>{bus_Asc_Name}</td>
              <td>{i_OperatorName}</td>
          </tr>
          <tr>
              <td>Platform Name</td>
              <td>{platformName}</td>
              <td>{i_Platformname}</td>
          </tr>
          <tr>
              <td>Water Depth (feet)</td>
              <td>{water_Depth__feet_}</td>
              <td>{i_Wd}</td>
          </tr>
          <tr>
              <td>Authority Number</td>
              <td>{authority_Number}</td>
              <td>{i_AUTHNUM}</td>
          </tr>
          <tr>
              <td>Authority Status</td>
              <td>{authority_Status}</td>
              <td>{i_AUTHSTATUS}</td>
          </tr>
          <tr>
              <td>Authority Type</td>
              <td>{authority_Type}</td>
              <td>{i_AUTHTYP}</td>
          </tr>
          <tr>
              <td>Install Date</td>
              <td>{install_Date}</td>
              <td>{i_InstallDate}</td>
          </tr>
          <tr>
              <td>Attended 8 Hr</td>
              <td>{attended_8_Hr}</td>
              <td>{i_IsAttendedEighthHours}</td>
          </tr>
          <tr>
              <td>Heliport Flag</td>
              <td>{heliport_Flag}</td>
              <td>{i_HasHeliport}</td>
          </tr>
          <tr>
              <td>District Code</td>
              <td>{district_Code}</td>
              <td>{i_DistrictCode}</td>
          </tr>
          <tr>
              <td>Field</td>
              <td>{field}</td>
              <td></td>
          </tr>
          <tr>
              <td>INCs</td>
              <td>{iNCs}</td>
              <td></td>
          </tr>
          <tr>
              <td>Latitude</td>
              <td>{latitude}</td>
              <td>{i_Latitude}</td>
          </tr>
          <tr>
              <td>Lease Number</td>
              <td>{lease_Number}</td>
              <td></td>
          </tr>
          <tr>
              <td>Longitude</td>
              <td>{longitude}</td>
              <td>{i_Longitude}</td>
          </tr>
          <tr>
              <td>Maj Struc Flag</td>
              <td>{maj_Struc_Flag}</td>
              <td>{i_IsMajorStructure}</td>
          </tr>
          <tr>
              <td>Manned 24 Hr</td>
              <td>{manned_24_Hr}</td>
              <td></td>
          </tr>
          <tr>
              <td>Nad Year Cd</td>
              <td>{nad_Year_Cd}</td>
              <td></td>
          </tr>
          <tr>
              <td>Proj Code</td>
              <td>{proj_Code}</td>
              <td></td>
          </tr>
          <tr>
              <td>Ptfrm X Location</td>
              <td>{ptfrm_X_Location}</td>
              <td></td>
          </tr>
          <tr>
              <td>Ptfrm Y Location</td>
              <td>{ptfrm_Y_Location}</td>
              <td></td>
          </tr>
          <tr>
              <td>Removal Date</td>
              <td>{removal_Date}</td>
              <td>{i_RemovalDate}</td>
          </tr>
          <tr>
              <td>Site Clear Date</td>
              <td>{site_Clear_Date}</td>
              <td></td>
          </tr>
          <tr>
              <td>Struc Type Code</td>
              <td>{struc_Type_Code}</td>
              <td></td>
          </tr>
          <tr>
              <td>Surf E W Code</td>
              <td>{surf_E_W_Code}</td>
              <td></td>
          </tr>
          <tr>
              <td>Surf E W Dist</td>
              <td>{surf_E_W_Dist}</td>
              <td></td>
          </tr>
          <tr>
              <td>Surf N S Code</td>
              <td>{surf_N_S_Code}</td>
              <td></td>
          </tr>
          <tr>
              <td>Surf N S Dist</td>
              <td>{surf_N_S_Dist}</td>
              <td></td>
          </tr>
      </table>
  `};return i}SetBSEEPlatformLayer(){let i={type:"simple",symbol:{type:"simple-marker",color:[200,200,200,1],size:"4px",outline:{color:"transparent"}}};var o={title:"Platform:{platformName}",content:[{type:"fields",fieldInfos:[{fieldName:"bus_Asc_Name",label:"Operator Name"},{fieldName:"water_Depth__feet_",label:"Water Depth feet"},{fieldName:"install_Date",label:"Install Date"},{fieldName:"removal_Date",label:"Removal Date"}]}]};this.platformsBSEELayer=new lu({url:`${this.baseUrl}GIS/gisbseeplatformsgeo`,visible:!1,customParameters:{format:"geojson"},refreshInterval:60,title:"Platform BSEE",popupTemplate:o,opacity:.5,renderer:i})}SetAreaLayer(){var i=new su({labelExpressionInfo:{expression:"$feature.AREA_CODE"},symbol:new nu({color:"black",haloColor:"",haloSize:"2px",font:{family:"Arial",size:6,weight:"bold"}})});this.areaLayer=new yn({url:"https://services2.arcgis.com/Tk8KtWY399EerUu0/arcgis/rest/services/protclip/FeatureServer",labelingInfo:[i],visible:!1,title:"Area",popupTemplate:{title:"Area:{AREA_CODE}",content:[{type:"fields",fieldInfos:[{fieldName:"AREA_CODE",label:"Area code"},{fieldName:"PLAN_AREA_",label:"Plan area"},{fieldName:"PLAN_AREA1",label:"plan area1"},{fieldName:"PROJ_ZONE_",label:"Proj zone"},{fieldName:"PROT_APRV_",label:"PROT_APRV_"},{fieldName:"PROT_NAME",label:"PROT_NAME"},{fieldName:"PROT_NUMBE",label:"PROT_NUMBER"},{fieldName:"PROTCLIP_",label:"PROTCLIP"}]}]}})}SetBlockLayer(){var i=new su({labelExpressionInfo:{expression:"$feature.BLOCK_NUMB"},symbol:new nu({color:"black",haloColor:"",haloSize:"2px",font:{family:"Arial",size:6,weight:"bold"}}),minScale:5e5,maxScale:1e5});this.blockLayer=new yn({url:"https://services2.arcgis.com/Tk8KtWY399EerUu0/arcgis/rest/services/block/FeatureServer/0",labelingInfo:[i],visible:!1,title:"Block",popupTemplate:{title:"Block:{BLOCK_NUMB}",content:[{type:"fields",fieldInfos:[{fieldName:"AC_LAB",label:"AC_LAB"},{fieldName:"AREA_CODE",label:"AREA_CODE"},{fieldName:"BLK_FED_AP	",label:"BLK_FED_AP	"},{fieldName:"BLOCK LAB	",label:"BLOCK LAB	"},{fieldName:"BLOCK_NUMB",label:"BLOCK_NUMB"},{fieldName:"BLOCKS",label:"BLOCKS"},{fieldName:"BLOCKS_ID",label:"BLOCKS_ID"},{fieldName:"PROT_APRV_",label:"PROT_APRV_"},{fieldName:"PROT_NUMBE",label:"PROT_NUMBE"},{fieldName:"MMS_REGION",label:"MMS_REGION"}]}]}})}SetPipelineLayer(){let i={type:"simple",symbol:{type:"simple-line",color:"#a553b7"}};this.pipelineLayer=new yn({url:"https://services2.arcgis.com/Tk8KtWY399EerUu0/arcgis/rest/services/Join_Features_to_Pipeline_view/FeatureServer",visible:!1,title:"Pipelines",opacity:.4,popupTemplate:{title:"Segment Number:{SEGMENT_NU}",content:[{type:"fields",fieldInfos:[{fieldName:"SEG_LENGTH",label:"Segment Length"},{fieldName:"STATUS_COD",label:"Status Code"},{fieldName:"PPL_SIZE_C	",label:"Pipeline Size"},{fieldName:"ROW_NUMBER",label:"Row Number"},{fieldName:"PROD_CODE",label:"Production Code"},{fieldName:"APRV_CODE",label:"Approval code"},{fieldName:"SDE_COMPAN",label:"SDE Company"},{fieldName:"Originating_Id_Name",label:"Originating Id Name"},{fieldName:"Originating_Area_Code",label:"Originating Area Code"},{fieldName:"Originating_Block_Number",label:"Originating Block Number"},{fieldName:"Originating_Lease_Number",label:"Originating Lease Number"},{fieldName:"Receiving_Id_Name",label:"Receiving Id Name"},{fieldName:"Receiving_Area_Code",label:"Receiving Area Code"},{fieldName:"Receiving_Block_Number",label:"Receiving Block Number"},{fieldName:"Receiving_Lease_Number",label:"Receiving Lease Number"},{fieldName:"Approved_Date",label:" Approved Date"},{fieldName:"Install_Date",label:"Install Date"},{fieldName:"Max_Water_Depth__feet_",label:"Max Water Depth (feet)"},{fieldName:"Max_Allowable_Operating_Pressure",label:"Max Allowable Operating Pressure"},{fieldName:"Authority",label:"Authority"},{fieldName:"Bidirectional",label:" Bidirectional"},{fieldName:"Out_of_Service_Date",label:"Out of Service Date"},{fieldName:"Abandonment_Approval_Date",label:"Abandonment Approval Date"},{fieldName:"Abandonment_Date",label:"Abandonment Date"}]}]},renderer:i})}ApplyMapFilters(i){let o=this.platformLayer,s=this.defaultConditionForLayer.PlatformLayer;i.layerOrWidget==w.HistoricHurricaneTrackLayer?(o=this.historicHurricaneTrackLayer,s=this.defaultConditionForLayer.HistoricHurricaneTrackLayer):i.layerOrWidget==w.PipelineLayer?(o=this.pipelineLayer,s=this.defaultConditionForLayer.PipelineLayer):i.layerOrWidget==w.HHConeLayer?(o=this.hhConesLayer,s=this.defaultConditionForLayer.HHConeLayer):i.layerOrWidget==w.ForecastGroupLayer?(o=this.forecastHLayers,s=this.defaultConditionForLayer.ForecastGroupLayer):i.layerOrWidget==w.RecentHGroupLayer&&(o=this.recentHGroupLayer.layers?.items[0],s=this.defaultConditionForLayer.RecentHGroupLayer);let r=this.getFinalFilterCondition(i.details,s);i.layerOrWidget==w.HHConeLayer?o.definitionExpression=this.historicHurricaneTrackLayer.definitionExpression+"  AND "+r:i.layerOrWidget==w.PlatformLayer?o.definitionExpression=this.defaultConditionForLayer.PlatformLayer+" AND "+r:i.layerOrWidget==w.RecentHGroupLayer?this.recentHGroupLayer.layers.forEach(c=>{c.definitionExpression=r}):o.definitionExpression=r,this.showLoading(o);let a=this;o.queryExtent().then(function(c){c!=null&&c.extent?a.view.goTo(c.extent):a.platformLayer.visible?a.view.goTo(a.platformLayer.fullExtent):a.pipelineLayer.visible?a.view.goTo(a.pipelineLayer.fullExtent):a.historicHurricaneTrackLayer.visible&&a.historicHurricaneTrackLayer.definitionExpression!="1=0"?a.view.goTo(a.historicHurricaneTrackLayer.fullExtent):a.hhConesLayer.visible&&a.hhConesLayer.definitionExpression!="1=0"?a.view.goTo(a.hhConesLayer.fullExtent):a.view.goTo(a.platformLayer.fullExtent)})}showLoading(i){this.spinnerService.show("appSpinner");var o=this,s=this.view.whenLayerView(i);s.then(function(r){if(!r.updating){o.spinnerService.hide("appSpinner");return}var a=r.watch("updating",function(c,u,p,h){c||(a.remove(),o.spinnerService.hide("appSpinner"))})})}UpdateFilterList(i){if(i==null)return;let o="1=1";i.type==D.HConeAdvisory&&(o="1=0");let s=this.getFinalFilterCondition(i.value,o);this.getFieldDataForFilter(i.type,s)}getFinalFilterCondition(i,o){let s=[];i!=null&&i.size>0&&i.forEach((a,c)=>{if(a.length>0)switch(c){case D.ActiveStatus:case D.Area_Code:case D.Block_Number:case D.Bus_Asc_Name:case D.platformName:case D.operatorName:case D.HurricaneName:case D.HurricaneYear:case D.PipelineOperator:case D.PipelineStatusCode:case D.HConeAdvisory:case D.RH_STORMNAME:let u=c.toString()+" IN ('"+a.join("', '")+"')";s.push(u);break;case D.Water_Depth__feet_:case D.Complex_Id_Num:case D.PipelineSegmentNumber:case D.Install_Date:case D.Removal_Date:let p=c.toString()+" "+a;s.push(p);break;default:break}});let r=o;return s.length&&(r=s.join(" AND ")),r}getLayerFromLayerOrWidget(i){switch(i){case w.PlatformLayer:return this.platformLayer;case w.HistoricHurricaneTrackLayer:return this.historicHurricaneTrackLayer;case w.PipelineLayer:return this.pipelineLayer;case w.HHConeLayer:return this.hhConesLayer;case w.ForecastGroupLayer:return this.forecastHLayers;case w.ForecastSubLayer0:return this.forecastHGroupLayer.layers.items[0];case w.ForecastSubLayer1:return this.forecastHGroupLayer.layers.items[1];case w.ForecastSubLayer2:return this.forecastHGroupLayer.layers.items[2];case w.ForecastSubLayer3:return this.forecastHGroupLayer.layers.items[3];case w.ForecastSubLayer4:return this.forecastHGroupLayer.layers.items[4];case w.ForecastSubLayer5:return this.forecastHGroupLayer.layers.items[5];case w.ForecastSubLayer7:return this.forecastHGroupLayer.layers.items[6];case w.ForecastSubLayer8:return this.forecastHGroupLayer.layers.items[7];case w.ForecastSubLayer9:return this.forecastHGroupLayer.layers.items[8];case w.ForecastSubLayer10:return this.forecastHGroupLayer.layers.items[9];case w.ForecastSubLayer11:return this.forecastHGroupLayer.layers.items[10];case w.RecentHGroupLayer:return this.recentHGroupLayer;case w.RecentHSubLayer0:return this.recentHGroupLayer.layers.items[0];case w.RecentHSubLayer1:return this.recentHGroupLayer.layers.items[1];case w.RecentHSubLayer2:return this.recentHGroupLayer.layers.items[2]}return null}getFieldDataForFilter(i,o="1=1"){let s=this,r=[],a=this.mapService.getLayerOrWidgetFromFilterType(i),c=this.getLayerFromLayerOrWidget(a);i===D.RH_STORMNAME&&(c=this.recentHGroupLayer.layers.items[0]),c.queryFeatures({where:o,returnDistinctValues:!0,outFields:[i],orderByFields:[i]}).then(function(u){u.features.forEach(function(p){var h=p.attributes[i],m=h;(h==null||h=="")&&(m="Unknown"),r.push({text:m,value:h})}),i==D.HConeAdvisory&&r.sort((p,h)=>parseFloat(p.text)-parseFloat(h.text)),s.mapService.setFilterListFromMap({type:i,value:r})})}setFilterValue(){this.getFieldDataForFilter(D.Area_Code),this.getFieldDataForFilter(D.Block_Number),this.getFieldDataForFilter(D.Bus_Asc_Name),this.getFieldDataForFilter(D.operatorName,"i_IsMainOperator = 1"),this.getFieldDataForFilter(D.platformName),this.getFieldDataForFilter(D.HurricaneYear),this.getFieldDataForFilter(D.HurricaneName),this.getFieldDataForFilter(D.PipelineOperator),this.getFieldDataForFilter(D.PipelineStatusCode)}SetHistoricHurricaneLayer(){this.historicHurricaneTrackLayer=new yn({url:"https://services2.arcgis.com/FiaPA4ga0iQKduv3/arcgis/rest/services/IBTrACS_ALL_list_v04r00_lines_1/FeatureServer",title:"Historic Hurricanes",refreshInterval:5,outFields:["*"],definitionExpression:"1=0",visible:!1})}SetHHConesLayer(){this.hhConesLayer=new yn({url:"https://services2.arcgis.com/Tk8KtWY399EerUu0/arcgis/rest/services/ALL_Cones/FeatureServer",title:"Historic Hurricanes Cones",refreshInterval:5,outFields:["*"],definitionExpression:"1=0",visible:!1})}SetForecastHurricaneLayer(){let i="https://services9.arcgis.com/RHVPKKiFTONKtxq3/arcgis/rest/services/Active_Hurricanes_v1/FeatureServer",o=this;ul(i,{responseType:"json",query:{f:"json"}}).then(s=>{this.forecastHLayersDetails=s.data.layers,this.forecastHLayersDetails.forEach(r=>{r.isVisible=!0;var a=new yn({url:"https://services9.arcgis.com/RHVPKKiFTONKtxq3/arcgis/rest/services/Active_Hurricanes_v1/FeatureServer/"+r.id,title:r.name,outFields:["*"],definitionExpression:"1=1",visible:!0});this.forecastHLayers.push(a)}),this.forecastHGroupLayer=new Il({visibilityMode:"independent",title:"Forecast Hurricanes",visible:!1}),this.forecastHGroupLayer.layers.addMany(this.forecastHLayers),this.forecastHGroupLayer.loadAll().catch(r=>{console.error("Error loading forecast hurricane layers:",r)}).then(()=>{o.map.add(o.forecastHGroupLayer),this.mapService.setHLayerListFromMap({layerOrWidget:w.ForecastGroupLayer,detailedList:o.forecastHLayersDetails})})}).catch(s=>{s.name==="AbortError"?console.log("Request aborted"):console.error("Error encountered",s)})}SetRHurricaneLayer(){let i="https://services9.arcgis.com/RHVPKKiFTONKtxq3/arcgis/rest/services/Recent_Hurricanes_v1/FeatureServer",o=this;ul(i,{responseType:"json",query:{f:"json"}}).then(s=>{this.recentHLayersDetails=s.data.layers,this.recentHLayersDetails.forEach(r=>{r.isVisible=!0;var a=new yn({url:i+"/"+r.id,title:r.name,outFields:["*"],definitionExpression:"1=1",visible:!0});this.recentHLayers.push(a)}),this.recentHGroupLayer=new Il({visibilityMode:"independent",title:"Recent Hurricanes",visible:!1}),this.recentHGroupLayer.layers.addMany(this.recentHLayers),this.recentHGroupLayer.loadAll().catch(r=>{console.error("Error loading recent hurricane layers:",r)}).then(()=>{o.map.add(o.recentHGroupLayer),this.mapService.setHLayerListFromMap({layerOrWidget:w.RecentHGroupLayer,detailedList:o.recentHLayersDetails}),this.getFieldDataForFilter(D.RH_STORMNAME)})}).catch(s=>{s.name==="AbortError"?console.log("Request aborted"):console.error("Error encountered",s)})}SetRHurricaneLayer_ISims(){let i="https://services2.arcgis.com/Tk8KtWY399EerUu0/arcgis/rest/services/recent_hurricane/FeatureServer",o=this;ul(i,{responseType:"json",query:{f:"json"}}).then(s=>{this.recentHLayersDetails=s.data.layers,this.recentHLayersDetails.forEach(r=>{r.isVisible=!0;var a=new yn({url:i+"/"+r.id,title:r.name,outFields:["*"],definitionExpression:"1=1",visible:!0});if(r.name=="Observed Wind Swath"){let u={type:"unique-value",field:"RADII",uniqueValueInfos:[this.createFillSymbol("34","#FFFF00","Tropical Storm Force (34kts)"),this.createFillSymbol("50","#FF9900","Strong Tropical Storm (50kts)"),this.createFillSymbol("64","#FF0000","Hurricane Force (64kts+)")]};a.renderer=u,a.opacity=.3}else if(r.name=="Observed Track"){let u="#ff73df",p=3;var c=[this.createLineSymbol("Low",u,p),this.createLineSymbol("Remnant Low",u,p),this.createLineSymbol("Disturbance",u,p),this.createLineSymbol("Subtropical Storm",u,p),this.createLineSymbol("Tropical Wave",u,p),this.createLineSymbol("Tropical Depression",u,p),this.createLineSymbol("Tropical Storm","blue",p),this.createLineSymbol("Hurricane1","#00FF00",4),this.createLineSymbol("Hurricane2","yellow",5),this.createLineSymbol("Hurricane3","#FF8000",6),this.createLineSymbol("Hurricane4","#FF0000",7),this.createLineSymbol("Hurricane5","#000000",8)];let h={type:"unique-value",legendOptions:{title:"Observed Track"},field:"STORMTYPE",uniqueValueInfos:c};a.renderer=h,a.opacity=.5}else if(r.name=="Observed Position"){let u=this.createDotSymbol("black","10px","orange",2);a.renderer=u,a.opacity=1}this.recentHLayers.push(a)}),this.recentHGroupLayer=new Il({visibilityMode:"independent",title:"Recent Hurricanes",visible:!1}),this.recentHGroupLayer.layers.addMany(this.recentHLayers),this.recentHGroupLayer.loadAll().catch(r=>{console.error("Error loading recent hurricane layers:",r)}).then(()=>{o.map.add(o.recentHGroupLayer),this.mapService.setHLayerListFromMap({layerOrWidget:w.RecentHGroupLayer,detailedList:o.recentHLayersDetails}),this.getFieldDataForFilter(D.RH_STORMNAME)})}).catch(s=>{s.name==="AbortError"?console.log("Request aborted"):console.error("Error encountered",s)})}createFillSymbol(i,o,s){return{value:i,symbol:{color:o,type:"simple-fill",style:"solid",outline:{style:"none"}},label:s}}createLineSymbol(i,o,s){return{value:i,symbol:{color:o,type:"simple-line",style:"solid",width:s},label:i}}createDotSymbol(i,o,s,r){return{type:"simple",symbol:{type:"simple-marker",size:o,color:i,outline:{width:r,color:s}}}}ngOnDestroy(){this.view&&this.view.destroy()}};t.\u0275fac=function(o){return new(o||t)(V(Ti),V(Fh),V(jb),V(nc))},t.\u0275cmp=ee({type:t,selectors:[["app-esri-map"]],viewQuery:function(o,s){if(o&1&&xt(KM,7),o&2){let r;pe(r=he())&&(s.mapViewEl=r.first)}},standalone:!0,features:[ae],decls:10,vars:6,consts:[["mapViewNode",""],["id","sketchPanel"],["id","sketchActions",1,"d-flex"],["title","Download Platforms",1,"esri-icon-download","esri-widget--button","esri-widget","esri-interactive",3,"click"],["title","Clear Sketch",1,"esri-icon-erase","esri-widget--button","esri-widget","esri-interactive",3,"click"],["id","measurementDiv",2,"display","none"],["id","toolbarDiv",1,"d-flex"],["id","distance","title","Distance Measurement Tool",1,"esri-widget--button","esri-interactive","esri-icon-measure-line",3,"click","ngClass"],["id","area","title","Area Measurement Tool",1,"esri-widget--button","esri-interactive","esri-icon-measure-area",3,"click","ngClass"]],template:function(o,s){if(o&1){let r=oe();L(0,"div",null,0),_(2,"div",1)(3,"div",2)(4,"div",3),E("click",function(){return O(r),k(s.ExportFeatures())}),y(),_(5,"div",4),E("click",function(){return O(r),k(s.ClearSketch())}),y()()(),_(6,"div",5)(7,"div",6)(8,"div",7),E("click",function(){return O(r),k(s.distanceMeasurement())}),y(),_(9,"div",8),E("click",function(){return O(r),k(s.areaMeasurement())}),y()()()}o&2&&(g(8),C("ngClass",oi(2,Ub,s.measurementWidget.activeTool=="distance")),g(),C("ngClass",oi(4,Ub,s.measurementWidget.activeTool=="area")))},dependencies:[Hb,gy,ve,zt],styles:[`.esri-view,#mapViewNode{padding:0;margin:0;height:100%;width:100%}.form-check-input.squareChkbox{border-radius:0!important}.form-check-input:focus{box-shadow:none!important}
`],encapsulation:2});let e=t;return e})();var Xb=(()=>{let t=class t{constructor(i,o){this._renderer=i,this._elementRef=o,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(i,o){this._renderer.setProperty(this._elementRef.nativeElement,i,o)}registerOnTouched(i){this.onTouched=i}registerOnChange(i){this.onChange=i}setDisabledState(i){this.setProperty("disabled",i)}};t.\u0275fac=function(o){return new(o||t)(V(ls),V(He))},t.\u0275dir=ye({type:t});let e=t;return e})(),Gh=(()=>{let t=class t extends Xb{};t.\u0275fac=(()=>{let i;return function(s){return(i||(i=ni(t)))(s||t)}})(),t.\u0275dir=ye({type:t,features:[Gn]});let e=t;return e})(),zi=new xe(""),QM={provide:zi,useExisting:ii(()=>jh),multi:!0},jh=(()=>{let t=class t extends Gh{writeValue(i){this.setProperty("checked",i)}};t.\u0275fac=(()=>{let i;return function(s){return(i||(i=ni(t)))(s||t)}})(),t.\u0275dir=ye({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(o,s){o&1&&E("change",function(a){return s.onChange(a.target.checked)})("blur",function(){return s.onTouched()})},features:[yi([QM]),Gn]});let e=t;return e})(),JM={provide:zi,useExisting:ii(()=>Mi),multi:!0};function XM(){let e=gs()?gs().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}var eD=new xe(""),Mi=(()=>{let t=class t extends Xb{constructor(i,o,s){super(i,o),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!XM())}writeValue(i){let o=i??"";this.setProperty("value",o)}_handleInput(i){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(i)}_compositionStart(){this._composing=!0}_compositionEnd(i){this._composing=!1,this._compositionMode&&this.onChange(i)}};t.\u0275fac=function(o){return new(o||t)(V(ls),V(He),V(eD,8))},t.\u0275dir=ye({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(o,s){o&1&&E("input",function(a){return s._handleInput(a.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(a){return s._compositionEnd(a.target.value)})},features:[yi([JM]),Gn]});let e=t;return e})();var Uh=new xe(""),tD=new xe("");function ew(e){return e!=null}function tw(e){return sl(e)?ei(e):e}function iw(e){let t={};return e.forEach(n=>{t=n!=null?v(v({},t),n):t}),Object.keys(t).length===0?null:t}function nw(e,t){return t.map(n=>n(e))}function iD(e){return!e.validate}function ow(e){return e.map(t=>iD(t)?t:n=>t.validate(n))}function nD(e){if(!e)return null;let t=e.filter(ew);return t.length==0?null:function(n){return iw(nw(n,t))}}function sw(e){return e!=null?nD(ow(e)):null}function oD(e){if(!e)return null;let t=e.filter(ew);return t.length==0?null:function(n){let i=nw(n,t).map(tw);return Lm(i).pipe(re(iw))}}function rw(e){return e!=null?oD(ow(e)):null}function $b(e,t){return e===null?[t]:Array.isArray(e)?[...e,t]:[e,t]}function sD(e){return e._rawValidators}function rD(e){return e._rawAsyncValidators}function Lh(e){return e?Array.isArray(e)?e:[e]:[]}function id(e,t){return Array.isArray(e)?e.includes(t):e===t}function Wb(e,t){let n=Lh(t);return Lh(e).forEach(o=>{id(n,o)||n.push(o)}),n}function qb(e,t){return Lh(t).filter(n=>!id(e,n))}var nd=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=sw(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=rw(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,n){return this.control?this.control.hasError(t,n):!1}getError(t,n){return this.control?this.control.getError(t,n):null}},Nh=class extends nd{get formDirective(){return null}get path(){return null}},Na=class extends nd{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Vh=class{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},aD={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},vK=G(v({},aD),{"[class.ng-submitted]":"isSubmitted"}),Qt=(()=>{let t=class t extends Vh{constructor(i){super(i)}};t.\u0275fac=function(o){return new(o||t)(V(Na,2))},t.\u0275dir=ye({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(o,s){o&2&&ut("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[Gn]});let e=t;return e})();var Ra="VALID",ed="INVALID",fr="PENDING",La="DISABLED";function zh(e){return(sd(e)?e.validators:e)||null}function lD(e){return Array.isArray(e)?sw(e):e||null}function $h(e,t){return(sd(t)?t.asyncValidators:e)||null}function cD(e){return Array.isArray(e)?rw(e):e||null}function sd(e){return e!=null&&!Array.isArray(e)&&typeof e=="object"}function aw(e,t,n){let i=e.controls;if(!(t?Object.keys(i):i).length)throw new Ce(1e3,"");if(!i[n])throw new Ce(1001,"")}function lw(e,t,n){e._forEachChild((i,o)=>{if(n[o]===void 0)throw new Ce(1002,"")})}var gr=class{constructor(t,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Ra}get invalid(){return this.status===ed}get pending(){return this.status==fr}get disabled(){return this.status===La}get enabled(){return this.status!==La}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(Wb(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(Wb(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(qb(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(qb(t,this._rawAsyncValidators))}hasValidator(t){return id(this._rawValidators,t)}hasAsyncValidator(t){return id(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=fr,t.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=La,this.errors=null,this._forEachChild(i=>{i.disable(G(v({},t),{onlySelf:!0}))}),this._updateValue(),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(G(v({},t),{skipPristineCheck:n})),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=Ra,this._forEachChild(i=>{i.enable(G(v({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(G(v({},t),{skipPristineCheck:n})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ra||this.status===fr)&&this._runAsyncValidator(t.emitEvent)),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?La:Ra}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=fr,this._hasOwnPendingAsyncValidator=!0;let n=tw(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,n={}){this.errors=t,this._updateControlsErrors(n.emitEvent!==!1)}get(t){let n=t;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((i,o)=>i&&i._find(o),this)}getError(t,n){let i=n?this.get(n):this;return i&&i.errors?i.errors[t]:null}hasError(t,n){return!!this.getError(t,n)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new $,this.statusChanges=new $}_calculateStatus(){return this._allControlsDisabled()?La:this.errors?ed:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(fr)?fr:this._anyControlsHaveStatus(ed)?ed:Ra}_anyControlsHaveStatus(t){return this._anyControls(n=>n.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){sd(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let n=this._parent&&this._parent.dirty;return!t&&!!n&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=lD(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=cD(this._rawAsyncValidators)}},od=class extends gr{constructor(t,n,i){super(zh(n),$h(i,n)),this.controls=t,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,n){return this.controls[t]?this.controls[t]:(this.controls[t]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(t,n,i={}){this.registerControl(t,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(t,n,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],n&&this.registerControl(t,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,n={}){lw(this,!0,t),Object.keys(t).forEach(i=>{aw(this,!0,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(t,n={}){t!=null&&(Object.keys(t).forEach(i=>{let o=this.controls[i];o&&o.patchValue(t[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(t={},n={}){this._forEachChild((i,o)=>{i.reset(t?t[o]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(t,n,i)=>(t[i]=n.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(n,i)=>i._syncPendingControls()?!0:n);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(n=>{let i=this.controls[n];i&&t(i,n)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[n,i]of Object.entries(this.controls))if(this.contains(n)&&t(i))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(n,i,o)=>((i.enabled||this.disabled)&&(n[o]=i.value),n))}_reduceChildren(t,n){let i=t;return this._forEachChild((o,s)=>{i=n(i,o,s)}),i}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var Hh=class extends od{};var cw=new xe("CallSetDisabledState",{providedIn:"root",factory:()=>Wh}),Wh="always";function dD(e,t){return[...t.path,e]}function uD(e,t,n=Wh){hD(e,t),t.valueAccessor.writeValue(e.value),(e.disabled||n==="always")&&t.valueAccessor.setDisabledState?.(e.disabled),mD(e,t),gD(e,t),fD(e,t),pD(e,t)}function Zb(e,t){e.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(t)})}function pD(e,t){if(t.valueAccessor.setDisabledState){let n=i=>{t.valueAccessor.setDisabledState(i)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}function hD(e,t){let n=sD(e);t.validator!==null?e.setValidators($b(n,t.validator)):typeof n=="function"&&e.setValidators([n]);let i=rD(e);t.asyncValidator!==null?e.setAsyncValidators($b(i,t.asyncValidator)):typeof i=="function"&&e.setAsyncValidators([i]);let o=()=>e.updateValueAndValidity();Zb(t._rawValidators,o),Zb(t._rawAsyncValidators,o)}function mD(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,e.updateOn==="change"&&dw(e,t)})}function fD(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,e.updateOn==="blur"&&e._pendingChange&&dw(e,t),e.updateOn!=="submit"&&e.markAsTouched()})}function dw(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function gD(e,t){let n=(i,o)=>{t.valueAccessor.writeValue(i),o&&t.viewToModelUpdate(i)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}function _D(e,t){if(!e.hasOwnProperty("model"))return!1;let n=e.model;return n.isFirstChange()?!0:!Object.is(t,n.currentValue)}function yD(e){return Object.getPrototypeOf(e.constructor)===Gh}function vD(e,t){if(!t)return null;Array.isArray(t);let n,i,o;return t.forEach(s=>{s.constructor===Mi?n=s:yD(s)?i=s:o=s}),o||i||n||null}function Yb(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function Kb(e){return typeof e=="object"&&e!==null&&Object.keys(e).length===2&&"value"in e&&"disabled"in e}var td=class extends gr{constructor(t=null,n,i){super(zh(n),$h(i,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),sd(n)&&(n.nonNullable||n.initialValueIsDefault)&&(Kb(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,n={}){this.value=this._pendingValue=t,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(t,n={}){this.setValue(t,n)}reset(t=this.defaultValue,n={}){this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){Yb(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){Yb(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){Kb(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var bD={provide:Na,useExisting:ii(()=>Bt)},Qb=Promise.resolve(),Bt=(()=>{let t=class t extends Na{constructor(i,o,s,r,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this.control=new td,this._registered=!1,this.name="",this.update=new $,this._parent=i,this._setValidators(o),this._setAsyncValidators(s),this.valueAccessor=vD(this,r)}ngOnChanges(i){if(this._checkForErrors(),!this._registered||"name"in i){if(this._registered&&(this._checkName(),this.formDirective)){let o=i.name.previousValue;this.formDirective.removeControl({name:o,path:this._getPath(o)})}this._setUpControl()}"isDisabled"in i&&this._updateDisabled(i),_D(i,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){uD(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(i){Qb.then(()=>{this.control.setValue(i,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(i){let o=i.isDisabled.currentValue,s=o!==0&&Be(o);Qb.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(i){return this._parent?dD(i,this._parent):[i]}};t.\u0275fac=function(o){return new(o||t)(V(Nh,9),V(Uh,10),V(tD,10),V(zi,10),V(Lt,8),V(cw,8))},t.\u0275dir=ye({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[ue.None,"disabled","isDisabled"],model:[ue.None,"ngModel","model"],options:[ue.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[yi([bD]),Gn,Ut]});let e=t;return e})();var wD={provide:zi,useExisting:ii(()=>$o),multi:!0},$o=(()=>{let t=class t extends Gh{writeValue(i){let o=i??"";this.setProperty("value",o)}registerOnChange(i){this.onChange=o=>{i(o==""?null:parseFloat(o))}}};t.\u0275fac=(()=>{let i;return function(s){return(i||(i=ni(t)))(s||t)}})(),t.\u0275dir=ye({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(o,s){o&1&&E("input",function(a){return s.onChange(a.target.value)})("blur",function(){return s.onTouched()})},features:[yi([wD]),Gn]});let e=t;return e})();var CD=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=Rt({type:t}),t.\u0275inj=Pt({});let e=t;return e})(),Bh=class extends gr{constructor(t,n,i){super(zh(n),$h(i,n)),this.controls=t,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[this._adjustIndex(t)]}push(t,n={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(t,n,i={}){this.controls.splice(t,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(t,n={}){let i=this._adjustIndex(t);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(t,n,i={}){let o=this._adjustIndex(t);o<0&&(o=0),this.controls[o]&&this.controls[o]._registerOnCollectionChange(()=>{}),this.controls.splice(o,1),n&&(this.controls.splice(o,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,n={}){lw(this,!1,t),t.forEach((i,o)=>{aw(this,!1,o),this.at(o).setValue(i,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(t,n={}){t!=null&&(t.forEach((i,o)=>{this.at(o)&&this.at(o).patchValue(i,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(t=[],n={}){this._forEachChild((i,o)=>{i.reset(t[o],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this.controls.map(t=>t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_adjustIndex(t){return t<0?t+this.length:t}_syncPendingControls(){let t=this.controls.reduce((n,i)=>i._syncPendingControls()?!0:n,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((n,i)=>{t(n,i)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(n=>n.enabled&&t(n))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(let t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}_find(t){return this.at(t)??null}};function Jb(e){return!!e&&(e.asyncValidators!==void 0||e.validators!==void 0||e.updateOn!==void 0)}var uw=(()=>{let t=class t{constructor(){this.useNonNullable=!1}get nonNullable(){let i=new t;return i.useNonNullable=!0,i}group(i,o=null){let s=this._reduceControls(i),r={};return Jb(o)?r=o:o!==null&&(r.validators=o.validator,r.asyncValidators=o.asyncValidator),new od(s,r)}record(i,o=null){let s=this._reduceControls(i);return new Hh(s,o)}control(i,o,s){let r={};return this.useNonNullable?(Jb(o)?r=o:(r.validators=o,r.asyncValidators=s),new td(i,G(v({},r),{nonNullable:!0}))):new td(i,o,s)}array(i,o,s){let r=i.map(a=>this._createControl(a));return new Bh(r,o,s)}_reduceControls(i){let o={};return Object.keys(i).forEach(s=>{o[s]=this._createControl(i[s])}),o}_createControl(i){if(i instanceof td)return i;if(i instanceof gr)return i;if(Array.isArray(i)){let o=i[0],s=i.length>1?i[1]:null,r=i.length>2?i[2]:null;return this.control(o,s,r)}else return this.control(i)}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var mt=(()=>{let t=class t{static withConfig(i){return{ngModule:t,providers:[{provide:cw,useValue:i.callSetDisabledState??Wh}]}}};t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=Rt({type:t}),t.\u0275inj=Pt({imports:[CD]});let e=t;return e})();var pw=(()=>{let t=class t{constructor(i){this.mapService=i,this.showLegend=!0,this.showSketch=!0,this.showMeasurement=!1}toggleLegend(){this.showLegend=!this.showLegend,this.mapService.ShowHideLayersOrWidgets({type:w.Legend,visible:this.showLegend})}toggleSketch(){this.showSketch=!this.showSketch,this.mapService.ShowHideLayersOrWidgets({type:w.Sketch,visible:this.showSketch})}toggleMeasurement(){this.showMeasurement=!this.showMeasurement,this.mapService.ShowHideLayersOrWidgets({type:w.Measurement,visible:this.showMeasurement})}};t.\u0275fac=function(o){return new(o||t)(V(Ti))},t.\u0275cmp=ee({type:t,selectors:[["app-header"]],standalone:!0,features:[ae],decls:12,vars:3,consts:[["id","header",1,"fixed-top"],[1,"d-flex","flex-wrap"],[1,"me-auto"],[1,"text-white"],[1,"d-flex"],["title","Legend","type","button",1,"no-border","rounded-0","btn","btn-lg",3,"click","ngClass"],[1,"fa-solid","fa-list"],["title","Sketch Tool","type","button",1,"no-border","rounded-0","btn","btn-lg",3,"click","ngClass"],[1,"fa-solid","fa-draw-polygon"],["title","Measurement Tool","type","button",1,"no-border","rounded-0","btn","btn-lg",3,"click","ngClass"],[1,"esri-icon-measure-area"]],template:function(o,s){o&1&&(_(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),R(4,"IntelliSIMS"),y()(),_(5,"div",4)(6,"button",5),E("click",function(){return s.toggleLegend()}),L(7,"i",6),y(),_(8,"button",7),E("click",function(){return s.toggleSketch()}),L(9,"i",8),y(),_(10,"button",9),E("click",function(){return s.toggleMeasurement()}),L(11,"i",10),y()()()()),o&2&&(g(6),C("ngClass",s.showLegend?"text-dark":"text-white"),g(2),C("ngClass",s.showSketch?"text-dark":"text-white"),g(2),C("ngClass",s.showMeasurement?"text-dark":"text-white"))},dependencies:[mt,ve,zt],styles:["#header[_ngcontent-%COMP%]{background-color:#e95420;padding:5px 10px;margin:0}"]});let e=t;return e})();var SD=e=>({"dropdown-multiselect--active":e});function TD(e,t){if(e&1&&(_(0,"span"),R(1),y()),e&2){let n=T();g(),de(n._placeholder)}}function MD(e,t){if(e&1){let n=oe();_(0,"span",15)(1,"span",16)(2,"span"),R(3),y(),_(4,"a",17),E("click",function(o){let s=O(n).$implicit,r=T();return k(r.onItemClick(o,s))}),R(5,"x"),y()()()}if(e&2){let n=t.$implicit,i=t.index,o=T();g(),C("hidden",i>o._settings.itemsShowLimit-1),g(2),pt("",n.text,"\xA0")}}function DD(e,t){if(e&1&&(_(0,"span",18),R(1),y()),e&2){let n=T();g(),pt("+",n.itemShowRemaining(),"")}}function ED(e,t){if(e&1){let n=oe();_(0,"li",19),E("click",function(){O(n);let o=T();return k(o.toggleSelectAll())}),L(1,"input",20),_(2,"div"),R(3),y()()}if(e&2){let n=T();g(),C("checked",n.isAllItemsSelected())("disabled",n.disabled||n.isLimitSelectionReached()),g(2),de(n.isAllItemsSelected()?n._settings.unSelectAllText:n._settings.selectAllText)}}function ID(e,t){if(e&1){let n=oe();_(0,"li",21)(1,"input",22),tt("ngModelChange",function(o){O(n);let s=T();return et(s.filter.text,o)||(s.filter.text=o),k(o)}),E("ngModelChange",function(o){O(n);let s=T();return k(s.onFilterTextChange(o))}),y()()}if(e&2){let n=T();g(),C("readOnly",n.disabled)("placeholder",n._settings.searchPlaceholderText),Xe("ngModel",n.filter.text)}}function xD(e,t){if(e&1){let n=oe();_(0,"li",23),E("click",function(o){let s=O(n).$implicit,r=T();return k(r.onItemClick(o,s))}),L(1,"input",24),_(2,"div"),R(3),y()()}if(e&2){let n=t.$implicit,i=T();g(),C("checked",i.isSelected(n))("disabled",i.disabled||i.isLimitSelectionReached()&&!i.isSelected(n)||n.isDisabled),Et("aria-label",n.text),g(2),de(n.text)}}function OD(e,t){if(e&1&&(_(0,"li",25)(1,"h5"),R(2),y()()),e&2){let n=T();g(2),de(n._settings.noFilteredDataAvailablePlaceholderText)}}function kD(e,t){if(e&1&&(_(0,"li",26)(1,"h5"),R(2),y()()),e&2){let n=T();g(2),de(n._settings.noDataAvailablePlaceholderText)}}var An=class{id;text;isDisabled;constructor(t){(typeof t=="string"||typeof t=="number")&&(this.id=this.text=t,this.isDisabled=!1),typeof t=="object"&&(this.id=t.id,this.text=t.text,this.isDisabled=t.isDisabled)}},qh=(()=>{class e{transform(n,i){return!n||!i?n:n.filter(o=>this.applyFilter(o,i))}applyFilter(n,i){return typeof n.text=="string"&&typeof i.text=="string"?!(i.text&&n.text&&n.text.toLowerCase().indexOf(i.text.toLowerCase())===-1):!(i.text&&n.text&&n.text.toString().toLowerCase().indexOf(i.text.toString().toLowerCase())===-1)}static \u0275fac=function(i){return new(i||e)};static \u0275pipe=el({name:"multiSelectFilter",type:e,pure:!1})}return e})(),AD=(()=>{class e{_elementRef;constructor(n){this._elementRef=n}clickOutside=new $;onClick(n,i){if(!i)return;this._elementRef.nativeElement.contains(i)||this.clickOutside.emit(n)}static \u0275fac=function(i){return new(i||e)(V(He))};static \u0275dir=ye({type:e,selectors:[["","clickOutside",""]],hostBindings:function(i,o){i&1&&E("click",function(r){return o.onClick(r,r.target)},!1,of)},outputs:{clickOutside:"clickOutside"}})}return e})(),FD={provide:zi,useExisting:ii(()=>Zh),multi:!0},hw=()=>{},Zh=(()=>{class e{listFilterPipe;cdr;_settings;_data=[];selectedItems=[];isDropdownOpen=!0;_placeholder="Select";_sourceDataType=null;_sourceDataFields=[];filter=new An(this.data);defaultSettings={singleSelection:!1,idField:"id",textField:"text",disabledField:"isDisabled",enableCheckAll:!0,selectAllText:"Select All",unSelectAllText:"UnSelect All",allowSearchFilter:!1,limitSelection:-1,clearSearchFilter:!0,maxHeight:197,itemsShowLimit:999999999999,searchPlaceholderText:"Search",noDataAvailablePlaceholderText:"No data available",noFilteredDataAvailablePlaceholderText:"No filtered data available",closeDropDownOnSelection:!1,showSelectedItemsAtTop:!1,defaultOpen:!1,allowRemoteDataSearch:!1};set placeholder(n){n?this._placeholder=n:this._placeholder="Select"}disabled=!1;set settings(n){n?this._settings=Object.assign(this.defaultSettings,n):this._settings=Object.assign(this.defaultSettings)}set data(n){if(!n)this._data=[];else{let i=n[0];this._sourceDataType=typeof i,this._sourceDataFields=this.getFields(i),this._data=n.map(o=>typeof o=="string"||typeof o=="number"?new An(o):new An({id:o[this._settings.idField],text:o[this._settings.textField],isDisabled:o[this._settings.disabledField]}))}}onFilterChange=new $;onDropDownClose=new $;onSelect=new $;onDeSelect=new $;onSelectAll=new $;onDeSelectAll=new $;onTouchedCallback=hw;onChangeCallback=hw;onFilterTextChange(n){this.onFilterChange.emit(n)}constructor(n,i){this.listFilterPipe=n,this.cdr=i}onItemClick(n,i){if(this.disabled||i.isDisabled)return!1;let o=this.isSelected(i),s=this._settings.limitSelection===-1||this._settings.limitSelection>0&&this.selectedItems.length<this._settings.limitSelection;o?this.removeSelected(i):s&&this.addSelected(i),this._settings.singleSelection&&this._settings.closeDropDownOnSelection&&this.closeDropdown()}writeValue(n){if(n!=null&&n.length>0)if(this._settings.singleSelection)try{if(n.length>=1){let i=n[0];this.selectedItems=[typeof i=="string"||typeof i=="number"?new An(i):new An({id:i[this._settings.idField],text:i[this._settings.textField],isDisabled:i[this._settings.disabledField]})]}}catch{}else{let i=n.map(o=>typeof o=="string"||typeof o=="number"?new An(o):new An({id:o[this._settings.idField],text:o[this._settings.textField],isDisabled:o[this._settings.disabledField]}));this._settings.limitSelection>0?this.selectedItems=i.splice(0,this._settings.limitSelection):this.selectedItems=i}else this.selectedItems=[];this.onChangeCallback(n),this.cdr.markForCheck()}registerOnChange(n){this.onChangeCallback=n}registerOnTouched(n){this.onTouchedCallback=n}onTouched(){this.onTouchedCallback()}trackByFn(n,i){return i.id}isSelected(n){let i=!1;return this.selectedItems.forEach(o=>{n.id===o.id&&(i=!0)}),i}isLimitSelectionReached(){return this._settings.limitSelection===this.selectedItems.length}isAllItemsSelected(){let n=this.listFilterPipe.transform(this._data,this.filter),i=n.filter(o=>o.isDisabled).length;return(!this.data||this.data.length===0)&&this._settings.allowRemoteDataSearch?!1:n.length===this.selectedItems.length+i}showButton(){return this._settings.singleSelection?!1:!(this._settings.limitSelection>0)}itemShowRemaining(){return this.selectedItems.length-this._settings.itemsShowLimit}addSelected(n){this._settings.singleSelection?(this.selectedItems=[],this.selectedItems.push(n)):this.selectedItems.push(n),this.onChangeCallback(this.emittedValue(this.selectedItems)),this.onSelect.emit(this.emittedValue(n))}removeSelected(n){this.selectedItems.forEach(i=>{n.id===i.id&&this.selectedItems.splice(this.selectedItems.indexOf(i),1)}),this.onChangeCallback(this.emittedValue(this.selectedItems)),this.onDeSelect.emit(this.emittedValue(n))}emittedValue(n){let i=[];if(Array.isArray(n))n.map(o=>{i.push(this.objectify(o))});else if(n)return this.objectify(n);return i}objectify(n){if(this._sourceDataType==="object"){let i={};return i[this._settings.idField]=n.id,i[this._settings.textField]=n.text,this._sourceDataFields.includes(this._settings.disabledField)&&(i[this._settings.disabledField]=n.isDisabled),i}return this._sourceDataType==="number"?Number(n.id):n.text}toggleDropdown(n){n.preventDefault(),!(this.disabled&&this._settings.singleSelection)&&(this._settings.defaultOpen=!this._settings.defaultOpen,this._settings.defaultOpen||this.onDropDownClose.emit())}closeDropdown(){this._settings.defaultOpen=!1,this._settings.clearSearchFilter&&(this.filter.text=""),this.onDropDownClose.emit()}toggleSelectAll(){if(this.disabled)return!1;this.isAllItemsSelected()?(this.selectedItems=[],this.onDeSelectAll.emit(this.emittedValue(this.selectedItems))):(this.selectedItems=this.listFilterPipe.transform(this._data,this.filter).filter(n=>!n.isDisabled).slice(),this.onSelectAll.emit(this.emittedValue(this.selectedItems))),this.onChangeCallback(this.emittedValue(this.selectedItems))}getFields(n){let i=[];if(typeof n!="object")return i;for(let o in n)i.push(o);return i}static \u0275fac=function(i){return new(i||e)(V(qh),V(Lt))};static \u0275cmp=ee({type:e,selectors:[["ng-multiselect-dropdown"]],hostBindings:function(i,o){i&1&&E("blur",function(){return o.onTouched()})},inputs:{placeholder:"placeholder",disabled:"disabled",settings:"settings",data:"data"},outputs:{onFilterChange:"onFilterChange",onDropDownClose:"onDropDownClose",onSelect:"onSelect",onDeSelect:"onDeSelect",onSelectAll:"onSelectAll",onDeSelectAll:"onDeSelectAll"},features:[yi([FD])],decls:18,vars:23,consts:[["tabindex","0",1,"multiselect-dropdown",3,"blur","clickOutside"],["tabindex","-1",1,"dropdown-btn",3,"click"],[4,"ngIf"],["class","selected-item-container",4,"ngFor","ngForOf","ngForTrackBy"],[2,"float","right !important","padding-right","4px",3,"ngClass"],["style","padding-right: 15px;",4,"ngIf"],[1,"dropdown-multiselect__caret"],[1,"dropdown-list",3,"hidden"],[1,"item1"],["class","multiselect-item-checkbox","style","border-bottom: 1px solid #ccc;padding:10px",3,"click",4,"ngIf"],["class","filter-textbox",4,"ngIf"],[1,"item2"],["class","multiselect-item-checkbox",3,"click",4,"ngFor","ngForOf"],["class","no-filtered-data",4,"ngIf"],["class","no-data",4,"ngIf"],[1,"selected-item-container"],[1,"selected-item",3,"hidden"],[2,"padding-left","2px","color","white",3,"click"],[2,"padding-right","15px"],[1,"multiselect-item-checkbox",2,"border-bottom","1px solid #ccc","padding","10px",3,"click"],["type","checkbox","aria-label","multiselect-select-all",3,"checked","disabled"],[1,"filter-textbox"],["type","text","aria-label","multiselect-search",3,"ngModelChange","readOnly","placeholder","ngModel"],[1,"multiselect-item-checkbox",3,"click"],["type","checkbox",3,"checked","disabled"],[1,"no-filtered-data"],[1,"no-data"]],template:function(i,o){i&1&&(_(0,"div",0),E("blur",function(){return o.onTouched()})("clickOutside",function(){return o.closeDropdown()}),_(1,"div")(2,"span",1),E("click",function(r){return o.toggleDropdown(r)}),B(3,TD,2,1,"span",2)(4,MD,6,2,"span",3),_(5,"span",4),B(6,DD,2,1,"span",5),L(7,"span",6),y()()(),_(8,"div",7)(9,"ul",8),B(10,ED,4,3,"li",9)(11,ID,2,3,"li",10),y(),_(12,"ul",11),B(13,xD,4,4,"li",12),fs(14,"multiSelectFilter"),B(15,OD,3,1,"li",13),fs(16,"multiSelectFilter"),B(17,kD,3,1,"li",14),y()()()),i&2&&(g(),ut("disabled",o.disabled),g(2),C("ngIf",o.selectedItems.length==0),g(),C("ngForOf",o.selectedItems)("ngForTrackBy",o.trackByFn),g(),C("ngClass",oi(21,SD,o._settings.defaultOpen)),g(),C("ngIf",o.itemShowRemaining()>0),g(2),C("hidden",!o._settings.defaultOpen),g(2),C("ngIf",(o._data.length>0||o._settings.allowRemoteDataSearch)&&!o._settings.singleSelection&&o._settings.enableCheckAll&&o._settings.limitSelection===-1),g(),C("ngIf",(o._data.length>0||o._settings.allowRemoteDataSearch)&&o._settings.allowSearchFilter),g(),gi("max-height",o._settings.maxHeight+"px"),g(),C("ngForOf",Nd(14,15,o._data,o.filter)),g(2),C("ngIf",o._data.length!=0&&Nd(16,18,o._data,o.filter).length==0&&!o._settings.allowRemoteDataSearch),g(2),C("ngIf",o._data.length==0&&!o._settings.allowRemoteDataSearch))},dependencies:[zt,Un,Pi,Mi,Qt,Bt,AD,qh],styles:['.multiselect-dropdown[_ngcontent-%COMP%]{position:relative;width:100%;font-size:inherit;font-family:inherit}.multiselect-dropdown[_ngcontent-%COMP%]   .dropdown-btn[_ngcontent-%COMP%]{display:inline-block;border:1px solid #adadad;width:100%;padding:6px 12px;margin-bottom:0;font-weight:400;line-height:1.52857143;text-align:left;vertical-align:middle;cursor:pointer;background-image:none;border-radius:4px}.multiselect-dropdown[_ngcontent-%COMP%]   .dropdown-btn[_ngcontent-%COMP%]   .selected-item-container[_ngcontent-%COMP%]{display:flex;float:left}.multiselect-dropdown[_ngcontent-%COMP%]   .dropdown-btn[_ngcontent-%COMP%]   .selected-item-container[_ngcontent-%COMP%]   .selected-item[_ngcontent-%COMP%]{border:1px solid #337ab7;margin-right:4px;background:#337ab7;padding:0 5px;color:#fff;border-radius:2px;float:left;max-width:100px}.multiselect-dropdown[_ngcontent-%COMP%]   .dropdown-btn[_ngcontent-%COMP%]   .selected-item-container[_ngcontent-%COMP%]   .selected-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis}.multiselect-dropdown[_ngcontent-%COMP%]   .dropdown-btn[_ngcontent-%COMP%]   .selected-item-container[_ngcontent-%COMP%]   .selected-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}.multiselect-dropdown[_ngcontent-%COMP%]   .dropdown-btn[_ngcontent-%COMP%]   .selected-item[_ngcontent-%COMP%]:hover{box-shadow:1px 1px #959595}.multiselect-dropdown[_ngcontent-%COMP%]   .dropdown-btn[_ngcontent-%COMP%]   .dropdown-multiselect__caret[_ngcontent-%COMP%]{line-height:16px;display:block;position:absolute;box-sizing:border-box;width:40px;height:38px;right:1px;top:0;padding:4px 8px;margin:0;text-decoration:none;text-align:center;cursor:pointer;transition:transform .2s ease}.multiselect-dropdown[_ngcontent-%COMP%]   .dropdown-btn[_ngcontent-%COMP%]   .dropdown-multiselect__caret[_ngcontent-%COMP%]:before{position:relative;right:0;top:65%;color:#999;margin-top:4px;border-style:solid;border-width:8px 8px 0 8px;border-color:#999999 transparent;content:""}.multiselect-dropdown[_ngcontent-%COMP%]   .dropdown-btn[_ngcontent-%COMP%]   .dropdown-multiselect--active[_ngcontent-%COMP%]   .dropdown-multiselect__caret[_ngcontent-%COMP%]{transform:rotate(180deg)}.multiselect-dropdown[_ngcontent-%COMP%]   .disabled[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{background-color:#eceeef}.dropdown-list[_ngcontent-%COMP%]{position:absolute;padding-top:6px;width:100%;z-index:9999;border:1px solid #ccc;border-radius:3px;background:#fff;margin-top:10px;box-shadow:0 1px 5px #959595}.dropdown-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding:0;list-style:none;overflow:auto;margin:0}.dropdown-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:6px 10px;cursor:pointer;text-align:left}.dropdown-list[_ngcontent-%COMP%]   .filter-textbox[_ngcontent-%COMP%]{border-bottom:1px solid #ccc;position:relative;padding:10px}.dropdown-list[_ngcontent-%COMP%]   .filter-textbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:0px;width:100%;padding:0 0 0 26px}.dropdown-list[_ngcontent-%COMP%]   .filter-textbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none}.multiselect-item-checkbox[_ngcontent-%COMP%]:hover{background-color:#e4e3e3}.multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:focus + div[_ngcontent-%COMP%]:before, .multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:hover + div[_ngcontent-%COMP%]:before{border-color:#337ab7;background-color:#f2f2f2}.multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:active + div[_ngcontent-%COMP%]:before{transition-duration:0s}.multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%] + div[_ngcontent-%COMP%]{position:relative;padding-left:2em;vertical-align:middle;-webkit-user-select:none;user-select:none;cursor:pointer;margin:0;color:#000}.multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%] + div[_ngcontent-%COMP%]:before{box-sizing:content-box;content:"";color:#337ab7;position:absolute;top:50%;left:0;width:14px;height:14px;margin-top:-9px;border:2px solid #337ab7;text-align:center;transition:all .4s ease}.multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%] + div[_ngcontent-%COMP%]:after{box-sizing:content-box;content:"";background-color:#337ab7;position:absolute;top:50%;left:4px;width:10px;height:10px;margin-top:-5px;transform:scale(0);transform-origin:50%;transition:transform .2s ease-out}.multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:disabled + div[_ngcontent-%COMP%]:before{border-color:#ccc}.multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:disabled:focus + div[_ngcontent-%COMP%]:before   .multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:disabled:hover + div[_ngcontent-%COMP%]:before{background-color:inherit}.multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:disabled:checked + div[_ngcontent-%COMP%]:before{background-color:#ccc}.multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%] + div[_ngcontent-%COMP%]:after{background-color:transparent;top:50%;left:4px;width:8px;height:3px;margin-top:-4px;border-style:solid;border-color:#fff;border-width:0 0 3px 3px;border-image:none;transform:rotate(-45deg) scale(0)}.multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + div[_ngcontent-%COMP%]:after{content:"";transform:rotate(-45deg) scale(1);transition:transform .2s ease-out}.multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + div[_ngcontent-%COMP%]:before{animation:_ngcontent-%COMP%_borderscale .2s ease-in;background:#337ab7}.multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + div[_ngcontent-%COMP%]:after{transform:rotate(-45deg) scale(1)}@keyframes _ngcontent-%COMP%_borderscale{50%{box-shadow:0 0 0 2px #337ab7}}'],changeDetection:0})}return e})(),mw=(()=>{class e{static forRoot(){return{ngModule:e}}static \u0275fac=function(i){return new(i||e)};static \u0275mod=Rt({type:e});static \u0275inj=Pt({providers:[qh],imports:[ve,mt]})}return e})();function RD(e,t){if(e&1){let n=oe();_(0,"button",7),E("click",function(){O(n);let o=T();return k(o.selExpanded=!o.selExpanded)}),L(1,"i",8),y()}if(e&2){let n=T();ff("title","Selected ",n.title,"")}}function LD(e,t){if(e&1&&(_(0,"div"),R(1),y()),e&2){let n=t.$implicit,i=t.index;g(),gf("",i+1,". ",n,"")}}function ND(e,t){if(e&1&&(_(0,"div",9),B(1,LD,2,2,"div",10),y()),e&2){let n=T();g(),C("ngForOf",n.selectedValues)}}var fw=(()=>{let t=class t{constructor(i){this.fb=i,this.title="Multi Select",this.options=[],this.disabled=!1,this.ShowFilter=!0,this.itemsShowLimit=3,this.enableCheckAll=!0,this.limitSelection=-1,this.singleSelection=!1,this.valueField="id",this.displayField="",this.selectedItemsChanged=new $,this.selectedItems=[],this.selectedValues=[],this.dropdownSettings={},this.selExpanded=!1}writeValue(i){console.log("from parent",i),this.selectedItems=i}ngOnInit(){this.dropdownSettings={singleSelection:this.singleSelection,itemsShowLimit:this.itemsShowLimit,enableCheckAll:this.enableCheckAll,limitSelection:this.limitSelection,allowSearchFilter:this.ShowFilter,idField:this.valueField,textField:this.displayField}}onSelectionChanged(i){this.selectedValues=i.map(o=>o.value),this.selectedItemsChanged.emit(i)}};t.\u0275fac=function(o){return new(o||t)(V(uw))},t.\u0275cmp=ee({type:t,selectors:[["app-multi-select"]],inputs:{title:"title",options:"options",disabled:"disabled",ShowFilter:"ShowFilter",itemsShowLimit:"itemsShowLimit",enableCheckAll:"enableCheckAll",limitSelection:"limitSelection",singleSelection:"singleSelection",valueField:"valueField",displayField:"displayField",selectedItems:"selectedItems"},outputs:{selectedItemsChanged:"selectedItemsChanged"},standalone:!0,features:[ae],decls:10,vars:9,consts:[[1,"d-flex"],["name","selItems",1,"flex-fill",2,"align-content","center",3,"ngModelChange","placeholder","ngModel","settings","data","disabled"],[1,"d-grid"],["title","Clear Selection",1,"ms-auto","no-border","rounded-0","btn","btn-sm",3,"click","disabled"],[1,"fa-solid","fa-filter-circle-xmark","text-primary"],["class","p-0 btn rounded-0 btn-sm no-border","type","button",3,"title","click",4,"ngIf"],["class","text-info",4,"ngIf"],["type","button",1,"p-0","btn","rounded-0","btn-sm","no-border",3,"click","title"],[1,"fa-solid","fa-list-check"],[1,"text-info"],[4,"ngFor","ngForOf"]],template:function(o,s){o&1&&(_(0,"div")(1,"h6"),R(2),y(),_(3,"div",0)(4,"ng-multiselect-dropdown",1),tt("ngModelChange",function(a){return et(s.selectedItems,a)||(s.selectedItems=a),a}),E("ngModelChange",function(a){return s.onSelectionChanged(a)}),y(),_(5,"div",2)(6,"button",3),E("click",function(){return s.selectedItems=[]}),L(7,"i",4),y(),B(8,RD,2,2,"button",5),y()(),B(9,ND,2,1,"div",6),y()),o&2&&(g(2),de(s.title),g(2),C("placeholder",s.title),Xe("ngModel",s.selectedItems),C("settings",s.dropdownSettings)("data",s.options)("disabled",s.disabled),g(2),C("disabled",s.selectedItems.length<1),g(2),C("ngIf",s.selectedValues!=null&&s.selectedValues.length>0),g(),C("ngIf",s.selExpanded))},dependencies:[mw,Zh,ve,Un,Pi,mt,Qt,Bt],styles:[`.multiselect-dropdown .dropdown-btn .selected-item-container .selected-item{margin-top:4px!important;max-width:max-content!important;background:#ee784e!important}
`],encapsulation:2});let e=t;return e})();var gw=(()=>{let t=class t{constructor(){this.ShowFilter=!0,this.itemsShowLimit="2",this.selectedItemsChanged=new $}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=ee({type:t,selectors:[["app-dropdown-filter"]],inputs:{ShowFilter:"ShowFilter",title:"title",options:"options",itemsShowLimit:"itemsShowLimit",selectedItems:"selectedItems",valueField:"valueField",displayField:"displayField"},outputs:{selectedItemsChanged:"selectedItemsChanged"},standalone:!0,features:[ae],decls:1,vars:7,consts:[[3,"selectedItemsChanged","ShowFilter","title","options","valueField","displayField","itemsShowLimit","selectedItems"]],template:function(o,s){o&1&&(_(0,"app-multi-select",0),E("selectedItemsChanged",function(a){return s.selectedItemsChanged.emit(a)}),y()),o&2&&C("ShowFilter",s.ShowFilter)("title",s.title)("options",s.options)("valueField",s.valueField)("displayField",s.displayField)("itemsShowLimit",s.itemsShowLimit)("selectedItems",s.selectedItems)},dependencies:[fw,ve]});let e=t;return e})();var VD=["content"],HD=["scroll"],BD=["padding"],vw=["*"],Ha=e=>({searchTerm:e});function GD(e,t){if(e&1&&(_(0,"div",3),Pd(1,6),y()),e&2){let n=T();g(),C("ngTemplateOutlet",n.headerTemplate)("ngTemplateOutletContext",oi(2,Ha,n.filterValue))}}function jD(e,t){if(e&1&&(_(0,"div",5),Pd(1,6),y()),e&2){let n=T();g(),C("ngTemplateOutlet",n.footerTemplate)("ngTemplateOutletContext",oi(2,Ha,n.filterValue))}}var UD=["searchInput"],zD=["clearButton"],$D=(e,t,n)=>({item:e,clear:t,label:n}),WD=(e,t)=>({items:e,clear:t}),qD=(e,t,n,i)=>({item:e,item$:t,index:n,searchTerm:i});function ZD(e,t){if(e&1){let n=oe();_(0,"span",21),E("click",function(){O(n);let o=T().$implicit,s=T(2);return k(s.unselect(o))}),R(1,"\xD7"),y(),L(2,"span",22)}if(e&2){let n=T().$implicit,i=T(2);g(2),C("ngItemLabel",n.label)("escape",i.escapeHTML)}}function YD(e,t){}function KD(e,t){if(e&1&&(_(0,"div",20),B(1,ZD,3,2,"ng-template",null,1,si)(3,YD,0,0,"ng-template",12),y()),e&2){let n=t.$implicit,i=Ne(2),o=T(2);ut("ng-value-disabled",n.disabled),g(3),C("ngTemplateOutlet",o.labelTemplate||i)("ngTemplateOutletContext",Rd(4,$D,n.value,o.clearItem,n.label))}}function QD(e,t){if(e&1&&Ai(0,KD,4,8,"div",19,Fd().trackByOption,!0),e&2){let n=T();Fi(n.selectedItems)}}function JD(e,t){}function XD(e,t){if(e&1&&B(0,JD,0,0,"ng-template",12),e&2){let n=T();C("ngTemplateOutlet",n.multiLabelTemplate)("ngTemplateOutletContext",ms(2,WD,n.selectedValues,n.clearItem))}}function eE(e,t){e&1&&L(0,"div",24)}function tE(e,t){}function iE(e,t){if(e&1&&B(0,eE,1,0,"ng-template",null,2,si)(2,tE,0,0,"ng-template",23),e&2){let n=Ne(1),i=T();g(2),C("ngTemplateOutlet",i.loadingSpinnerTemplate||n)}}function nE(e,t){if(e&1&&(_(0,"span",15,3)(2,"span",25),R(3,"\xD7"),y()()),e&2){let n=T();mf("title",n.clearAllText)}}function oE(e,t){if(e&1&&L(0,"span",30),e&2){let n=T().$implicit,i=T(2);C("ngItemLabel",n.label)("escape",i.escapeHTML)}}function sE(e,t){}function rE(e,t){if(e&1){let n=oe();_(0,"div",29),E("click",function(){let o=O(n).$implicit,s=T(2);return k(s.toggleItem(o))})("mouseover",function(){let o=O(n).$implicit,s=T(2);return k(s.onItemHover(o))}),B(1,oE,1,2,"ng-template",null,4,si)(3,sE,0,0,"ng-template",12),y()}if(e&2){let n=t.$implicit,i=Ne(2),o=T(2);ut("ng-option-disabled",n.disabled)("ng-option-selected",n.selected)("ng-optgroup",n.children)("ng-option",!n.children)("ng-option-child",!!n.parent)("ng-option-marked",n===o.itemsList.markedItem),Et("role",n.children?"group":"option")("aria-selected",n.selected)("id",n==null?null:n.htmlId),g(3),C("ngTemplateOutlet",n.children?o.optgroupTemplate||i:o.optionTemplate||i)("ngTemplateOutletContext",_f(17,qD,n.value,n,n.index,o.searchTerm))}}function aE(e,t){if(e&1&&(_(0,"span")(1,"span",32),R(2),y(),R(3),y()),e&2){let n=T(3);g(2),de(n.addTagText),g(),pt('"',n.searchTerm,'"')}}function lE(e,t){}function cE(e,t){if(e&1){let n=oe();_(0,"div",31),E("mouseover",function(){O(n);let o=T(2);return k(o.itemsList.unmarkItem())})("click",function(){O(n);let o=T(2);return k(o.selectTag())}),B(1,aE,4,2,"ng-template",null,5,si)(3,lE,0,0,"ng-template",12),y()}if(e&2){let n=Ne(2),i=T(2);ut("ng-option-marked",!i.itemsList.markedItem),g(3),C("ngTemplateOutlet",i.tagTemplate||n)("ngTemplateOutletContext",oi(4,Ha,i.searchTerm))}}function dE(e,t){if(e&1&&(_(0,"div",33),R(1),y()),e&2){let n=T(3);g(),de(n.notFoundText)}}function uE(e,t){}function pE(e,t){if(e&1&&B(0,dE,2,1,"ng-template",null,6,si)(2,uE,0,0,"ng-template",12),e&2){let n=Ne(1),i=T(2);g(2),C("ngTemplateOutlet",i.notFoundTemplate||n)("ngTemplateOutletContext",oi(2,Ha,i.searchTerm))}}function hE(e,t){if(e&1&&(_(0,"div",33),R(1),y()),e&2){let n=T(3);g(),de(n.typeToSearchText)}}function mE(e,t){}function fE(e,t){if(e&1&&B(0,hE,2,1,"ng-template",null,7,si)(2,mE,0,0,"ng-template",23),e&2){let n=Ne(1),i=T(2);g(2),C("ngTemplateOutlet",i.typeToSearchTemplate||n)}}function gE(e,t){if(e&1&&(_(0,"div",33),R(1),y()),e&2){let n=T(3);g(),de(n.loadingText)}}function _E(e,t){}function yE(e,t){if(e&1&&B(0,gE,2,1,"ng-template",null,8,si)(2,_E,0,0,"ng-template",12),e&2){let n=Ne(1),i=T(2);g(2),C("ngTemplateOutlet",i.loadingTextTemplate||n)("ngTemplateOutletContext",oi(2,Ha,i.searchTerm))}}function vE(e,t){if(e&1){let n=oe();_(0,"ng-dropdown-panel",26),E("update",function(o){O(n);let s=T();return k(s.viewPortItems=o)})("scroll",function(o){O(n);let s=T();return k(s.scroll.emit(o))})("scrollToEnd",function(o){O(n);let s=T();return k(s.scrollToEnd.emit(o))})("outsideClick",function(){O(n);let o=T();return k(o.close())}),ds(1),Ai(2,rE,4,22,"div",27,Fd().trackByOption,!0),B(4,cE,4,6,"div",28),us(),B(5,pE,3,4)(6,fE,3,1)(7,yE,3,4),y()}if(e&2){let n=T();ut("ng-select-multiple",n.multiple),C("virtualScroll",n.virtualScroll)("bufferAmount",n.bufferAmount)("appendTo",n.appendTo)("position",n.dropdownPosition)("headerTemplate",n.headerTemplate)("footerTemplate",n.footerTemplate)("filterValue",n.searchTerm)("items",n.itemsList.filteredItems)("markedItem",n.itemsList.markedItem)("ngClass",n.appendTo?n.classes:null)("id",n.dropdownId),g(2),Fi(n.viewPortItems),g(2),Le(4,n.showAddTag?4:-1),g(),Le(5,n.showNoItemsFound()?5:-1),g(),Le(6,n.showTypeToSearch()?6:-1),g(),Le(7,n.loading&&n.itemsList.filteredItems.length===0?7:-1)}}var bw=/[&<>"']/g,bE=RegExp(bw.source),wE={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function CE(e){return e&&bE.test(e)?e.replace(bw,t=>wE[t]):e}function je(e){return e!=null}function Va(e){return typeof e=="object"&&je(e)}function SE(e){return e instanceof Promise}function ad(e){return e instanceof Function}var TE=(()=>{let t=class t{constructor(i){this.element=i,this.escape=!0}ngOnChanges(i){this.element.nativeElement.innerHTML=this.escape?CE(this.ngItemLabel):this.ngItemLabel}};t.\u0275fac=function(o){return new(o||t)(V(He))},t.\u0275dir=ye({type:t,selectors:[["","ngItemLabel",""]],inputs:{ngItemLabel:"ngItemLabel",escape:"escape"},features:[Ut]});let e=t;return e})(),ME=(()=>{let t=class t{constructor(i){this.template=i}};t.\u0275fac=function(o){return new(o||t)(V(Oe))},t.\u0275dir=ye({type:t,selectors:[["","ng-option-tmp",""]]});let e=t;return e})(),DE=(()=>{let t=class t{constructor(i){this.template=i}};t.\u0275fac=function(o){return new(o||t)(V(Oe))},t.\u0275dir=ye({type:t,selectors:[["","ng-optgroup-tmp",""]]});let e=t;return e})(),EE=(()=>{let t=class t{constructor(i){this.template=i}};t.\u0275fac=function(o){return new(o||t)(V(Oe))},t.\u0275dir=ye({type:t,selectors:[["","ng-label-tmp",""]]});let e=t;return e})(),IE=(()=>{let t=class t{constructor(i){this.template=i}};t.\u0275fac=function(o){return new(o||t)(V(Oe))},t.\u0275dir=ye({type:t,selectors:[["","ng-multi-label-tmp",""]]});let e=t;return e})(),xE=(()=>{let t=class t{constructor(i){this.template=i}};t.\u0275fac=function(o){return new(o||t)(V(Oe))},t.\u0275dir=ye({type:t,selectors:[["","ng-header-tmp",""]]});let e=t;return e})(),OE=(()=>{let t=class t{constructor(i){this.template=i}};t.\u0275fac=function(o){return new(o||t)(V(Oe))},t.\u0275dir=ye({type:t,selectors:[["","ng-footer-tmp",""]]});let e=t;return e})(),kE=(()=>{let t=class t{constructor(i){this.template=i}};t.\u0275fac=function(o){return new(o||t)(V(Oe))},t.\u0275dir=ye({type:t,selectors:[["","ng-notfound-tmp",""]]});let e=t;return e})(),AE=(()=>{let t=class t{constructor(i){this.template=i}};t.\u0275fac=function(o){return new(o||t)(V(Oe))},t.\u0275dir=ye({type:t,selectors:[["","ng-typetosearch-tmp",""]]});let e=t;return e})(),FE=(()=>{let t=class t{constructor(i){this.template=i}};t.\u0275fac=function(o){return new(o||t)(V(Oe))},t.\u0275dir=ye({type:t,selectors:[["","ng-loadingtext-tmp",""]]});let e=t;return e})(),PE=(()=>{let t=class t{constructor(i){this.template=i}};t.\u0275fac=function(o){return new(o||t)(V(Oe))},t.\u0275dir=ye({type:t,selectors:[["","ng-tag-tmp",""]]});let e=t;return e})(),RE=(()=>{let t=class t{constructor(i){this.template=i}};t.\u0275fac=function(o){return new(o||t)(V(Oe))},t.\u0275dir=ye({type:t,selectors:[["","ng-loadingspinner-tmp",""]]});let e=t;return e})();function ww(){return"axxxxxxxxxxx".replace(/[x]/g,()=>(Math.random()*16|0).toString(16))}var LE={"\u24B6":"A",\uFF21:"A",\u00C0:"A",\u00C1:"A",\u00C2:"A",\u1EA6:"A",\u1EA4:"A",\u1EAA:"A",\u1EA8:"A",\u00C3:"A",\u0100:"A",\u0102:"A",\u1EB0:"A",\u1EAE:"A",\u1EB4:"A",\u1EB2:"A",\u0226:"A",\u01E0:"A",\u00C4:"A",\u01DE:"A",\u1EA2:"A",\u00C5:"A",\u01FA:"A",\u01CD:"A",\u0200:"A",\u0202:"A",\u1EA0:"A",\u1EAC:"A",\u1EB6:"A",\u1E00:"A",\u0104:"A","\u023A":"A","\u2C6F":"A","\uA732":"AA",\u00C6:"AE",\u01FC:"AE",\u01E2:"AE","\uA734":"AO","\uA736":"AU","\uA738":"AV","\uA73A":"AV","\uA73C":"AY","\u24B7":"B",\uFF22:"B",\u1E02:"B",\u1E04:"B",\u1E06:"B","\u0243":"B",\u0182:"B",\u0181:"B","\u24B8":"C",\uFF23:"C",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u00C7:"C",\u1E08:"C",\u0187:"C","\u023B":"C","\uA73E":"C","\u24B9":"D",\uFF24:"D",\u1E0A:"D",\u010E:"D",\u1E0C:"D",\u1E10:"D",\u1E12:"D",\u1E0E:"D",\u0110:"D",\u018B:"D",\u018A:"D",\u0189:"D","\uA779":"D",\u01F1:"DZ",\u01C4:"DZ",\u01F2:"Dz",\u01C5:"Dz","\u24BA":"E",\uFF25:"E",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u1EC0:"E",\u1EBE:"E",\u1EC4:"E",\u1EC2:"E",\u1EBC:"E",\u0112:"E",\u1E14:"E",\u1E16:"E",\u0114:"E",\u0116:"E",\u00CB:"E",\u1EBA:"E",\u011A:"E",\u0204:"E",\u0206:"E",\u1EB8:"E",\u1EC6:"E",\u0228:"E",\u1E1C:"E",\u0118:"E",\u1E18:"E",\u1E1A:"E",\u0190:"E",\u018E:"E","\u24BB":"F",\uFF26:"F",\u1E1E:"F",\u0191:"F","\uA77B":"F","\u24BC":"G",\uFF27:"G",\u01F4:"G",\u011C:"G",\u1E20:"G",\u011E:"G",\u0120:"G",\u01E6:"G",\u0122:"G",\u01E4:"G",\u0193:"G","\uA7A0":"G","\uA77D":"G","\uA77E":"G","\u24BD":"H",\uFF28:"H",\u0124:"H",\u1E22:"H",\u1E26:"H",\u021E:"H",\u1E24:"H",\u1E28:"H",\u1E2A:"H",\u0126:"H","\u2C67":"H","\u2C75":"H","\uA78D":"H","\u24BE":"I",\uFF29:"I",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u0128:"I",\u012A:"I",\u012C:"I",\u0130:"I",\u00CF:"I",\u1E2E:"I",\u1EC8:"I",\u01CF:"I",\u0208:"I",\u020A:"I",\u1ECA:"I",\u012E:"I",\u1E2C:"I",\u0197:"I","\u24BF":"J",\uFF2A:"J",\u0134:"J","\u0248":"J","\u24C0":"K",\uFF2B:"K",\u1E30:"K",\u01E8:"K",\u1E32:"K",\u0136:"K",\u1E34:"K",\u0198:"K","\u2C69":"K","\uA740":"K","\uA742":"K","\uA744":"K","\uA7A2":"K","\u24C1":"L",\uFF2C:"L",\u013F:"L",\u0139:"L",\u013D:"L",\u1E36:"L",\u1E38:"L",\u013B:"L",\u1E3C:"L",\u1E3A:"L",\u0141:"L","\u023D":"L","\u2C62":"L","\u2C60":"L","\uA748":"L","\uA746":"L","\uA780":"L",\u01C7:"LJ",\u01C8:"Lj","\u24C2":"M",\uFF2D:"M",\u1E3E:"M",\u1E40:"M",\u1E42:"M","\u2C6E":"M",\u019C:"M","\u24C3":"N",\uFF2E:"N",\u01F8:"N",\u0143:"N",\u00D1:"N",\u1E44:"N",\u0147:"N",\u1E46:"N",\u0145:"N",\u1E4A:"N",\u1E48:"N","\u0220":"N",\u019D:"N","\uA790":"N","\uA7A4":"N",\u01CA:"NJ",\u01CB:"Nj","\u24C4":"O",\uFF2F:"O",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u1ED2:"O",\u1ED0:"O",\u1ED6:"O",\u1ED4:"O",\u00D5:"O",\u1E4C:"O",\u022C:"O",\u1E4E:"O",\u014C:"O",\u1E50:"O",\u1E52:"O",\u014E:"O",\u022E:"O",\u0230:"O",\u00D6:"O",\u022A:"O",\u1ECE:"O",\u0150:"O",\u01D1:"O",\u020C:"O",\u020E:"O",\u01A0:"O",\u1EDC:"O",\u1EDA:"O",\u1EE0:"O",\u1EDE:"O",\u1EE2:"O",\u1ECC:"O",\u1ED8:"O",\u01EA:"O",\u01EC:"O",\u00D8:"O",\u01FE:"O",\u0186:"O",\u019F:"O","\uA74A":"O","\uA74C":"O",\u01A2:"OI","\uA74E":"OO",\u0222:"OU","\u24C5":"P",\uFF30:"P",\u1E54:"P",\u1E56:"P",\u01A4:"P","\u2C63":"P","\uA750":"P","\uA752":"P","\uA754":"P","\u24C6":"Q",\uFF31:"Q","\uA756":"Q","\uA758":"Q","\u024A":"Q","\u24C7":"R",\uFF32:"R",\u0154:"R",\u1E58:"R",\u0158:"R",\u0210:"R",\u0212:"R",\u1E5A:"R",\u1E5C:"R",\u0156:"R",\u1E5E:"R","\u024C":"R","\u2C64":"R","\uA75A":"R","\uA7A6":"R","\uA782":"R","\u24C8":"S",\uFF33:"S","\u1E9E":"S",\u015A:"S",\u1E64:"S",\u015C:"S",\u1E60:"S",\u0160:"S",\u1E66:"S",\u1E62:"S",\u1E68:"S",\u0218:"S",\u015E:"S","\u2C7E":"S","\uA7A8":"S","\uA784":"S","\u24C9":"T",\uFF34:"T",\u1E6A:"T",\u0164:"T",\u1E6C:"T",\u021A:"T",\u0162:"T",\u1E70:"T",\u1E6E:"T",\u0166:"T",\u01AC:"T",\u01AE:"T","\u023E":"T","\uA786":"T","\uA728":"TZ","\u24CA":"U",\uFF35:"U",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u0168:"U",\u1E78:"U",\u016A:"U",\u1E7A:"U",\u016C:"U",\u00DC:"U",\u01DB:"U",\u01D7:"U",\u01D5:"U",\u01D9:"U",\u1EE6:"U",\u016E:"U",\u0170:"U",\u01D3:"U",\u0214:"U",\u0216:"U",\u01AF:"U",\u1EEA:"U",\u1EE8:"U",\u1EEE:"U",\u1EEC:"U",\u1EF0:"U",\u1EE4:"U",\u1E72:"U",\u0172:"U",\u1E76:"U",\u1E74:"U","\u0244":"U","\u24CB":"V",\uFF36:"V",\u1E7C:"V",\u1E7E:"V",\u01B2:"V","\uA75E":"V","\u0245":"V","\uA760":"VY","\u24CC":"W",\uFF37:"W",\u1E80:"W",\u1E82:"W",\u0174:"W",\u1E86:"W",\u1E84:"W",\u1E88:"W","\u2C72":"W","\u24CD":"X",\uFF38:"X",\u1E8A:"X",\u1E8C:"X","\u24CE":"Y",\uFF39:"Y",\u1EF2:"Y",\u00DD:"Y",\u0176:"Y",\u1EF8:"Y",\u0232:"Y",\u1E8E:"Y",\u0178:"Y",\u1EF6:"Y",\u1EF4:"Y",\u01B3:"Y","\u024E":"Y","\u1EFE":"Y","\u24CF":"Z",\uFF3A:"Z",\u0179:"Z",\u1E90:"Z",\u017B:"Z",\u017D:"Z",\u1E92:"Z",\u1E94:"Z",\u01B5:"Z",\u0224:"Z","\u2C7F":"Z","\u2C6B":"Z","\uA762":"Z","\u24D0":"a",\uFF41:"a",\u1E9A:"a",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u1EA7:"a",\u1EA5:"a",\u1EAB:"a",\u1EA9:"a",\u00E3:"a",\u0101:"a",\u0103:"a",\u1EB1:"a",\u1EAF:"a",\u1EB5:"a",\u1EB3:"a",\u0227:"a",\u01E1:"a",\u00E4:"a",\u01DF:"a",\u1EA3:"a",\u00E5:"a",\u01FB:"a",\u01CE:"a",\u0201:"a",\u0203:"a",\u1EA1:"a",\u1EAD:"a",\u1EB7:"a",\u1E01:"a",\u0105:"a","\u2C65":"a",\u0250:"a","\uA733":"aa",\u00E6:"ae",\u01FD:"ae",\u01E3:"ae","\uA735":"ao","\uA737":"au","\uA739":"av","\uA73B":"av","\uA73D":"ay","\u24D1":"b",\uFF42:"b",\u1E03:"b",\u1E05:"b",\u1E07:"b",\u0180:"b",\u0183:"b",\u0253:"b","\u24D2":"c",\uFF43:"c",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u00E7:"c",\u1E09:"c",\u0188:"c","\u023C":"c","\uA73F":"c","\u2184":"c","\u24D3":"d",\uFF44:"d",\u1E0B:"d",\u010F:"d",\u1E0D:"d",\u1E11:"d",\u1E13:"d",\u1E0F:"d",\u0111:"d",\u018C:"d",\u0256:"d",\u0257:"d","\uA77A":"d",\u01F3:"dz",\u01C6:"dz","\u24D4":"e",\uFF45:"e",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u1EC1:"e",\u1EBF:"e",\u1EC5:"e",\u1EC3:"e",\u1EBD:"e",\u0113:"e",\u1E15:"e",\u1E17:"e",\u0115:"e",\u0117:"e",\u00EB:"e",\u1EBB:"e",\u011B:"e",\u0205:"e",\u0207:"e",\u1EB9:"e",\u1EC7:"e",\u0229:"e",\u1E1D:"e",\u0119:"e",\u1E19:"e",\u1E1B:"e","\u0247":"e",\u025B:"e",\u01DD:"e","\u24D5":"f",\uFF46:"f",\u1E1F:"f",\u0192:"f","\uA77C":"f","\u24D6":"g",\uFF47:"g",\u01F5:"g",\u011D:"g",\u1E21:"g",\u011F:"g",\u0121:"g",\u01E7:"g",\u0123:"g",\u01E5:"g",\u0260:"g","\uA7A1":"g","\u1D79":"g","\uA77F":"g","\u24D7":"h",\uFF48:"h",\u0125:"h",\u1E23:"h",\u1E27:"h",\u021F:"h",\u1E25:"h",\u1E29:"h",\u1E2B:"h",\u1E96:"h",\u0127:"h","\u2C68":"h","\u2C76":"h",\u0265:"h",\u0195:"hv","\u24D8":"i",\uFF49:"i",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u0129:"i",\u012B:"i",\u012D:"i",\u00EF:"i",\u1E2F:"i",\u1EC9:"i",\u01D0:"i",\u0209:"i",\u020B:"i",\u1ECB:"i",\u012F:"i",\u1E2D:"i",\u0268:"i",\u0131:"i","\u24D9":"j",\uFF4A:"j",\u0135:"j",\u01F0:"j","\u0249":"j","\u24DA":"k",\uFF4B:"k",\u1E31:"k",\u01E9:"k",\u1E33:"k",\u0137:"k",\u1E35:"k",\u0199:"k","\u2C6A":"k","\uA741":"k","\uA743":"k","\uA745":"k","\uA7A3":"k","\u24DB":"l",\uFF4C:"l",\u0140:"l",\u013A:"l",\u013E:"l",\u1E37:"l",\u1E39:"l",\u013C:"l",\u1E3D:"l",\u1E3B:"l",\u017F:"l",\u0142:"l",\u019A:"l",\u026B:"l","\u2C61":"l","\uA749":"l","\uA781":"l","\uA747":"l",\u01C9:"lj","\u24DC":"m",\uFF4D:"m",\u1E3F:"m",\u1E41:"m",\u1E43:"m",\u0271:"m",\u026F:"m","\u24DD":"n",\uFF4E:"n",\u01F9:"n",\u0144:"n",\u00F1:"n",\u1E45:"n",\u0148:"n",\u1E47:"n",\u0146:"n",\u1E4B:"n",\u1E49:"n",\u019E:"n",\u0272:"n",\u0149:"n","\uA791":"n","\uA7A5":"n",\u01CC:"nj","\u24DE":"o",\uFF4F:"o",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u1ED3:"o",\u1ED1:"o",\u1ED7:"o",\u1ED5:"o",\u00F5:"o",\u1E4D:"o",\u022D:"o",\u1E4F:"o",\u014D:"o",\u1E51:"o",\u1E53:"o",\u014F:"o",\u022F:"o",\u0231:"o",\u00F6:"o",\u022B:"o",\u1ECF:"o",\u0151:"o",\u01D2:"o",\u020D:"o",\u020F:"o",\u01A1:"o",\u1EDD:"o",\u1EDB:"o",\u1EE1:"o",\u1EDF:"o",\u1EE3:"o",\u1ECD:"o",\u1ED9:"o",\u01EB:"o",\u01ED:"o",\u00F8:"o",\u01FF:"o",\u0254:"o","\uA74B":"o","\uA74D":"o",\u0275:"o",\u01A3:"oi",\u0223:"ou","\uA74F":"oo","\u24DF":"p",\uFF50:"p",\u1E55:"p",\u1E57:"p",\u01A5:"p","\u1D7D":"p","\uA751":"p","\uA753":"p","\uA755":"p","\u24E0":"q",\uFF51:"q","\u024B":"q","\uA757":"q","\uA759":"q","\u24E1":"r",\uFF52:"r",\u0155:"r",\u1E59:"r",\u0159:"r",\u0211:"r",\u0213:"r",\u1E5B:"r",\u1E5D:"r",\u0157:"r",\u1E5F:"r","\u024D":"r",\u027D:"r","\uA75B":"r","\uA7A7":"r","\uA783":"r","\u24E2":"s",\uFF53:"s",\u00DF:"s",\u015B:"s",\u1E65:"s",\u015D:"s",\u1E61:"s",\u0161:"s",\u1E67:"s",\u1E63:"s",\u1E69:"s",\u0219:"s",\u015F:"s","\u023F":"s","\uA7A9":"s","\uA785":"s",\u1E9B:"s","\u24E3":"t",\uFF54:"t",\u1E6B:"t",\u1E97:"t",\u0165:"t",\u1E6D:"t",\u021B:"t",\u0163:"t",\u1E71:"t",\u1E6F:"t",\u0167:"t",\u01AD:"t",\u0288:"t","\u2C66":"t","\uA787":"t","\uA729":"tz","\u24E4":"u",\uFF55:"u",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u0169:"u",\u1E79:"u",\u016B:"u",\u1E7B:"u",\u016D:"u",\u00FC:"u",\u01DC:"u",\u01D8:"u",\u01D6:"u",\u01DA:"u",\u1EE7:"u",\u016F:"u",\u0171:"u",\u01D4:"u",\u0215:"u",\u0217:"u",\u01B0:"u",\u1EEB:"u",\u1EE9:"u",\u1EEF:"u",\u1EED:"u",\u1EF1:"u",\u1EE5:"u",\u1E73:"u",\u0173:"u",\u1E77:"u",\u1E75:"u",\u0289:"u","\u24E5":"v",\uFF56:"v",\u1E7D:"v",\u1E7F:"v",\u028B:"v","\uA75F":"v",\u028C:"v","\uA761":"vy","\u24E6":"w",\uFF57:"w",\u1E81:"w",\u1E83:"w",\u0175:"w",\u1E87:"w",\u1E85:"w",\u1E98:"w",\u1E89:"w","\u2C73":"w","\u24E7":"x",\uFF58:"x",\u1E8B:"x",\u1E8D:"x","\u24E8":"y",\uFF59:"y",\u1EF3:"y",\u00FD:"y",\u0177:"y",\u1EF9:"y",\u0233:"y",\u1E8F:"y",\u00FF:"y",\u1EF7:"y",\u1E99:"y",\u1EF5:"y",\u01B4:"y","\u024F":"y","\u1EFF":"y","\u24E9":"z",\uFF5A:"z",\u017A:"z",\u1E91:"z",\u017C:"z",\u017E:"z",\u1E93:"z",\u1E95:"z",\u01B6:"z",\u0225:"z","\u0240":"z","\u2C6C":"z","\uA763":"z",\u0386:"\u0391",\u0388:"\u0395",\u0389:"\u0397",\u038A:"\u0399",\u03AA:"\u0399",\u038C:"\u039F",\u038E:"\u03A5",\u03AB:"\u03A5",\u038F:"\u03A9",\u03AC:"\u03B1",\u03AD:"\u03B5",\u03AE:"\u03B7",\u03AF:"\u03B9",\u03CA:"\u03B9",\u0390:"\u03B9",\u03CC:"\u03BF",\u03CD:"\u03C5",\u03CB:"\u03C5",\u03B0:"\u03C5",\u03C9:"\u03C9",\u03C2:"\u03C3"};function rd(e){let t=n=>LE[n]||n;return e.replace(/[^\u0000-\u007E]/g,t)}var Yh=class{constructor(t,n){this._ngSelect=t,this._selectionModel=n,this._items=[],this._filteredItems=[],this._markedIndex=-1}get items(){return this._items}get filteredItems(){return this._filteredItems}get markedIndex(){return this._markedIndex}get selectedItems(){return this._selectionModel.value}get markedItem(){return this._filteredItems[this._markedIndex]}get noItemsToSelect(){return this._ngSelect.hideSelected&&this._items.length===this.selectedItems.length}get maxItemsSelected(){return this._ngSelect.multiple&&this._ngSelect.maxSelectedItems<=this.selectedItems.length}get lastSelectedItem(){let t=this.selectedItems.length-1;for(;t>=0;t--){let n=this.selectedItems[t];if(!n.disabled)return n}return null}setItems(t){this._items=t.map((n,i)=>this.mapItem(n,i)),this._ngSelect.groupBy?(this._groups=this._groupBy(this._items,this._ngSelect.groupBy),this._items=this._flatten(this._groups)):(this._groups=new Map,this._groups.set(void 0,this._items)),this._filteredItems=[...this._items]}select(t){if(t.selected||this.maxItemsSelected)return;let n=this._ngSelect.multiple;n||this.clearSelected(),this._selectionModel.select(t,n,this._ngSelect.selectableGroupAsModel),this._ngSelect.hideSelected&&this._hideSelected(t)}unselect(t){t.selected&&(this._selectionModel.unselect(t,this._ngSelect.multiple),this._ngSelect.hideSelected&&je(t.index)&&this._ngSelect.multiple&&this._showSelected(t))}findItem(t){let n;return this._ngSelect.compareWith?n=i=>this._ngSelect.compareWith(i.value,t):this._ngSelect.bindValue?n=i=>!i.children&&this.resolveNested(i.value,this._ngSelect.bindValue)===t:n=i=>i.value===t||!i.children&&i.label&&i.label===this.resolveNested(t,this._ngSelect.bindLabel),this._items.find(i=>n(i))}addItem(t){let n=this.mapItem(t,this._items.length);return this._items.push(n),this._filteredItems.push(n),n}clearSelected(t=!1){this._selectionModel.clear(t),this._items.forEach(n=>{n.selected=t&&n.selected&&n.disabled,n.marked=!1}),this._ngSelect.hideSelected&&this.resetFilteredItems()}findByLabel(t){return t=rd(t).toLocaleLowerCase(),this.filteredItems.find(n=>rd(n.label).toLocaleLowerCase().substr(0,t.length)===t)}filter(t){if(!t){this.resetFilteredItems();return}this._filteredItems=[],t=this._ngSelect.searchFn?t:rd(t).toLocaleLowerCase();let n=this._ngSelect.searchFn||this._defaultSearchFn,i=this._ngSelect.hideSelected;for(let o of Array.from(this._groups.keys())){let s=[];for(let r of this._groups.get(o)){if(i&&(r.parent&&r.parent.selected||r.selected))continue;let a=this._ngSelect.searchFn?r.value:r;n(t,a)&&s.push(r)}if(s.length>0){let[r]=s.slice(-1);if(r.parent){let a=this._items.find(c=>c===r.parent);this._filteredItems.push(a)}this._filteredItems.push(...s)}}}resetFilteredItems(){this._filteredItems.length!==this._items.length&&(this._ngSelect.hideSelected&&this.selectedItems.length>0?this._filteredItems=this._items.filter(t=>!t.selected):this._filteredItems=this._items)}unmarkItem(){this._markedIndex=-1}markNextItem(){this._stepToItem(1)}markPreviousItem(){this._stepToItem(-1)}markItem(t){this._markedIndex=this._filteredItems.indexOf(t)}markSelectedOrDefault(t){if(this._filteredItems.length===0)return;let n=this._getLastMarkedIndex();n>-1?this._markedIndex=n:this._markedIndex=t?this.filteredItems.findIndex(i=>!i.disabled):-1}resolveNested(t,n){if(!Va(t))return t;if(n.indexOf(".")===-1)return t[n];{let i=n.split("."),o=t;for(let s=0,r=i.length;s<r;++s){if(o==null)return null;o=o[i[s]]}return o}}mapItem(t,n){let i=je(t.$ngOptionLabel)?t.$ngOptionLabel:this.resolveNested(t,this._ngSelect.bindLabel),o=je(t.$ngOptionValue)?t.$ngOptionValue:t;return{index:n,label:je(i)?i.toString():"",value:o,disabled:t.disabled,htmlId:`${this._ngSelect.dropdownId}-${n}`}}mapSelectedItems(){let t=this._ngSelect.multiple;for(let n of this.selectedItems){let i=this._ngSelect.bindValue?this.resolveNested(n.value,this._ngSelect.bindValue):n.value,o=je(i)?this.findItem(i):null;this._selectionModel.unselect(n,t),this._selectionModel.select(o||n,t,this._ngSelect.selectableGroupAsModel)}this._ngSelect.hideSelected&&(this._filteredItems=this.filteredItems.filter(n=>this.selectedItems.indexOf(n)===-1))}_showSelected(t){if(this._filteredItems.push(t),t.parent){let n=t.parent;this._filteredItems.find(o=>o===n)||this._filteredItems.push(n)}else if(t.children)for(let n of t.children)n.selected=!1,this._filteredItems.push(n);this._filteredItems=[...this._filteredItems.sort((n,i)=>n.index-i.index)]}_hideSelected(t){this._filteredItems=this._filteredItems.filter(n=>n!==t),t.parent?t.parent.children.every(i=>i.selected)&&(this._filteredItems=this._filteredItems.filter(i=>i!==t.parent)):t.children&&(this._filteredItems=this.filteredItems.filter(n=>n.parent!==t))}_defaultSearchFn(t,n){return rd(n.label).toLocaleLowerCase().indexOf(t)>-1}_getNextItemIndex(t){return t>0?this._markedIndex>=this._filteredItems.length-1?0:this._markedIndex+1:this._markedIndex<=0?this._filteredItems.length-1:this._markedIndex-1}_stepToItem(t){this._filteredItems.length===0||this._filteredItems.every(n=>n.disabled)||(this._markedIndex=this._getNextItemIndex(t),this.markedItem.disabled&&this._stepToItem(t))}_getLastMarkedIndex(){if(this._ngSelect.hideSelected||this._markedIndex>-1&&this.markedItem===void 0)return-1;let t=this._filteredItems.indexOf(this.lastSelectedItem);return this.lastSelectedItem&&t<0?-1:Math.max(this.markedIndex,t)}_groupBy(t,n){let i=new Map;if(t.length===0)return i;if(Array.isArray(t[0].value[n])){for(let r of t){let a=(r.value[n]||[]).map((c,u)=>this.mapItem(c,u));i.set(r,a)}return i}let o=ad(this._ngSelect.groupBy),s=r=>{let a=o?n(r.value):r.value[n];return je(a)?a:void 0};for(let r of t){let a=s(r),c=i.get(a);c?c.push(r):i.set(a,[r])}return i}_flatten(t){let n=ad(this._ngSelect.groupBy),i=[];for(let o of Array.from(t.keys())){let s=i.length;if(o===void 0){let h=t.get(void 0)||[];i.push(...h.map(m=>(m.index=s++,m)));continue}let r=Va(o),a={label:r?"":String(o),children:void 0,parent:null,index:s++,disabled:!this._ngSelect.selectableGroup,htmlId:ww()},c=n?this._ngSelect.bindLabel:this._ngSelect.groupBy,u=this._ngSelect.groupValue||(()=>r?o.value:{[c]:o}),p=t.get(o).map(h=>(h.parent=a,h.children=void 0,h.index=s++,h));a.children=p,a.value=u(o,p.map(h=>h.value)),i.push(a),i.push(...p)}return i}},dn=function(e){return e[e.Tab=9]="Tab",e[e.Enter=13]="Enter",e[e.Esc=27]="Esc",e[e.Space=32]="Space",e[e.ArrowUp=38]="ArrowUp",e[e.ArrowDown=40]="ArrowDown",e[e.Backspace=8]="Backspace",e}(dn||{}),Cw=(()=>{let t=class t{constructor(){this._dimensions={itemHeight:0,panelHeight:0,itemsPerViewport:0}}get dimensions(){return this._dimensions}calculateItems(i,o,s){let r=this._dimensions,a=r.itemHeight*o,u=Math.max(0,i)/a*o,p=Math.min(o,Math.ceil(u)+(r.itemsPerViewport+1)),m=Math.max(0,p-r.itemsPerViewport),f=Math.min(m,Math.floor(u)),S=r.itemHeight*Math.ceil(f)-r.itemHeight*Math.min(f,s);return S=isNaN(S)?0:S,f=isNaN(f)?-1:f,p=isNaN(p)?-1:p,f-=s,f=Math.max(0,f),p+=s,p=Math.min(o,p),{topPadding:S,scrollHeight:a,start:f,end:p}}setDimensions(i,o){let s=Math.max(1,Math.floor(o/i));this._dimensions={itemHeight:i,panelHeight:o,itemsPerViewport:s}}getScrollTo(i,o,s){let{panelHeight:r}=this.dimensions,a=i+o,c=s,u=c+r;return r>=a&&s===i?null:a>u?c+a-u:i<=c?i:null}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=z({token:t,factory:t.\u0275fac});let e=t;return e})(),_w=["top","right","bottom","left"],NE=typeof requestAnimationFrame<"u"?Am:km,yw=(()=>{let t=class t{constructor(i,o,s,r,a){this._renderer=i,this._zone=o,this._panelService=s,this._document=a,this.items=[],this.position="auto",this.virtualScroll=!1,this.filterValue=null,this.update=new $,this.scroll=new $,this.scrollToEnd=new $,this.outsideClick=new $,this._destroy$=new Ie,this._scrollToEndFired=!1,this._updateScrollHeight=!1,this._lastScrollPosition=0,this._dropdown=r.nativeElement}get currentPosition(){return this._currentPosition}get itemsLength(){return this._itemsLength}set itemsLength(i){i!==this._itemsLength&&(this._itemsLength=i,this._onItemsLengthChanged())}get _startOffset(){if(this.markedItem){let{itemHeight:i,panelHeight:o}=this._panelService.dimensions,s=this.markedItem.index*i;return o>s?0:s}return 0}ngOnInit(){this._select=this._dropdown.parentElement,this._virtualPadding=this.paddingElementRef.nativeElement,this._scrollablePanel=this.scrollElementRef.nativeElement,this._contentPanel=this.contentElementRef.nativeElement,this._handleScroll(),this._handleOutsideClick(),this._appendDropdown(),this._setupMousedownListener()}ngOnChanges(i){if(i.items){let o=i.items;this._onItemsChange(o.currentValue,o.firstChange)}}ngOnDestroy(){this._destroy$.next(),this._destroy$.complete(),this._destroy$.unsubscribe(),this.appendTo&&this._renderer.removeChild(this._dropdown.parentNode,this._dropdown)}scrollTo(i,o=!1){if(!i)return;let s=this.items.indexOf(i);if(s<0||s>=this.itemsLength)return;let r;if(this.virtualScroll){let a=this._panelService.dimensions.itemHeight;r=this._panelService.getScrollTo(s*a,a,this._lastScrollPosition)}else{let a=this._dropdown.querySelector(`#${i.htmlId}`),c=o?a.offsetTop:this._lastScrollPosition;r=this._panelService.getScrollTo(a.offsetTop,a.clientHeight,c)}je(r)&&(this._scrollablePanel.scrollTop=r)}scrollToTag(){let i=this._scrollablePanel;i.scrollTop=i.scrollHeight-i.clientHeight}adjustPosition(){this._updateYPosition()}_handleDropdownPosition(){this._currentPosition=this._calculateCurrentPosition(this._dropdown),_w.includes(this._currentPosition)?this._updateDropdownClass(this._currentPosition):this._updateDropdownClass("bottom"),this.appendTo&&this._updateYPosition(),this._dropdown.style.opacity="1"}_updateDropdownClass(i){_w.forEach(s=>{let r=`ng-select-${s}`;this._renderer.removeClass(this._dropdown,r),this._renderer.removeClass(this._select,r)});let o=`ng-select-${i}`;this._renderer.addClass(this._dropdown,o),this._renderer.addClass(this._select,o)}_handleScroll(){this._zone.runOutsideAngular(()=>{jt(this.scrollElementRef.nativeElement,"scroll").pipe(Qe(this._destroy$),Vm(0,NE)).subscribe(i=>{let o=i.path||i.composedPath&&i.composedPath();if(!o||o.length===0&&!i.target)return;let s=!o||o.length===0?i.target.scrollTop:o[0].scrollTop;this._onContentScrolled(s)})})}_handleOutsideClick(){this._document&&this._zone.runOutsideAngular(()=>{ns(jt(this._document,"touchstart",{capture:!0}),jt(this._document,"click",{capture:!0})).pipe(Qe(this._destroy$)).subscribe(i=>this._checkToClose(i))})}_checkToClose(i){if(this._select.contains(i.target)||this._dropdown.contains(i.target))return;let o=i.path||i.composedPath&&i.composedPath();i.target&&i.target.shadowRoot&&o&&o[0]&&this._select.contains(o[0])||this._zone.run(()=>this.outsideClick.emit())}_onItemsChange(i,o){this.items=i||[],this._scrollToEndFired=!1,this.itemsLength=i.length,this.virtualScroll?this._updateItemsRange(o):(this._setVirtualHeight(),this._updateItems(o))}_updateItems(i){this.update.emit(this.items),i!==!1&&this._zone.runOutsideAngular(()=>{Promise.resolve().then(()=>{let o=this._scrollablePanel.clientHeight;this._panelService.setDimensions(0,o),this._handleDropdownPosition(),this.scrollTo(this.markedItem,i)})})}_updateItemsRange(i){this._zone.runOutsideAngular(()=>{this._measureDimensions().then(()=>{i?(this._renderItemsRange(this._startOffset),this._handleDropdownPosition()):this._renderItemsRange()})})}_onContentScrolled(i){this.virtualScroll&&this._renderItemsRange(i),this._lastScrollPosition=i,this._fireScrollToEnd(i)}_updateVirtualHeight(i){this._updateScrollHeight&&(this._virtualPadding.style.height=`${i}px`,this._updateScrollHeight=!1)}_setVirtualHeight(){this._virtualPadding&&(this._virtualPadding.style.height="0px")}_onItemsLengthChanged(){this._updateScrollHeight=!0}_renderItemsRange(i=null){if(i&&this._lastScrollPosition===i)return;i=i||this._scrollablePanel.scrollTop;let o=this._panelService.calculateItems(i,this.itemsLength,this.bufferAmount);this._updateVirtualHeight(o.scrollHeight),this._contentPanel.style.transform=`translateY(${o.topPadding}px)`,this._zone.run(()=>{this.update.emit(this.items.slice(o.start,o.end)),this.scroll.emit({start:o.start,end:o.end})}),je(i)&&this._lastScrollPosition===0&&(this._scrollablePanel.scrollTop=i,this._lastScrollPosition=i)}_measureDimensions(){if(this._panelService.dimensions.itemHeight>0||this.itemsLength===0)return Promise.resolve(this._panelService.dimensions);let[i]=this.items;return this.update.emit([i]),Promise.resolve().then(()=>{let s=this._dropdown.querySelector(`#${i.htmlId}`).clientHeight;this._virtualPadding.style.height=`${s*this.itemsLength}px`;let r=this._scrollablePanel.clientHeight;return this._panelService.setDimensions(s,r),this._panelService.dimensions})}_fireScrollToEnd(i){if(this._scrollToEndFired||i===0)return;let o=this.virtualScroll?this._virtualPadding:this._contentPanel;i+this._dropdown.clientHeight>=o.clientHeight-1&&(this._zone.run(()=>this.scrollToEnd.emit()),this._scrollToEndFired=!0)}_calculateCurrentPosition(i){if(this.position!=="auto")return this.position;let o=this._select.getBoundingClientRect(),s=document.documentElement.scrollTop||document.body.scrollTop,r=o.top+window.pageYOffset,a=o.height,c=i.getBoundingClientRect().height;return r+a+c>s+document.documentElement.clientHeight?"top":"bottom"}_appendDropdown(){if(this.appendTo){if(this._parent=document.querySelector(this.appendTo),!this._parent)throw new Error(`appendTo selector ${this.appendTo} did not found any parent element`);this._updateXPosition(),this._parent.appendChild(this._dropdown)}}_updateXPosition(){let i=this._select.getBoundingClientRect(),o=this._parent.getBoundingClientRect(),s=i.left-o.left;this._dropdown.style.left=s+"px",this._dropdown.style.width=i.width+"px",this._dropdown.style.minWidth=i.width+"px"}_updateYPosition(){let i=this._select.getBoundingClientRect(),o=this._parent.getBoundingClientRect(),s=i.height;if(this._currentPosition==="top"){let r=o.bottom-i.bottom;this._dropdown.style.bottom=r+s+"px",this._dropdown.style.top="auto"}else if(this._currentPosition==="bottom"){let r=i.top-o.top;this._dropdown.style.top=r+s+"px",this._dropdown.style.bottom="auto"}}_setupMousedownListener(){this._zone.runOutsideAngular(()=>{jt(this._dropdown,"mousedown").pipe(Qe(this._destroy$)).subscribe(i=>{i.target.tagName!=="INPUT"&&i.preventDefault()})})}};t.\u0275fac=function(o){return new(o||t)(V(ls),V(st),V(Cw),V(He),V(We,8))},t.\u0275cmp=ee({type:t,selectors:[["ng-dropdown-panel"]],viewQuery:function(o,s){if(o&1&&(xt(VD,7,He),xt(HD,7,He),xt(BD,7,He)),o&2){let r;pe(r=he())&&(s.contentElementRef=r.first),pe(r=he())&&(s.scrollElementRef=r.first),pe(r=he())&&(s.paddingElementRef=r.first)}},inputs:{items:"items",markedItem:"markedItem",position:"position",appendTo:"appendTo",bufferAmount:"bufferAmount",virtualScroll:[ue.HasDecoratorInputTransform,"virtualScroll","virtualScroll",Be],headerTemplate:"headerTemplate",footerTemplate:"footerTemplate",filterValue:"filterValue"},outputs:{update:"update",scroll:"scroll",scrollToEnd:"scrollToEnd",outsideClick:"outsideClick"},features:[Rr,Ut],ngContentSelectors:vw,decls:9,vars:6,consts:[["scroll",""],["padding",""],["content",""],[1,"ng-dropdown-header"],["role","listbox",1,"ng-dropdown-panel-items","scroll-host"],[1,"ng-dropdown-footer"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(o,s){o&1&&(ps(),B(0,GD,2,4,"div",3),_(1,"div",4,0),L(3,"div",null,1),_(5,"div",null,2),hs(7),y()(),B(8,jD,2,4,"div",5)),o&2&&(Le(0,s.headerTemplate?0:-1),g(3),ut("total-padding",s.virtualScroll),g(2),ut("scrollable-content",s.virtualScroll&&s.items.length),g(3),Le(8,s.footerTemplate?8:-1))},dependencies:[_s],encapsulation:2,changeDetection:0});let e=t;return e})(),VE=(()=>{let t=class t{constructor(i){this.elementRef=i,this.disabled=!1,this.stateChange$=new Ie}get label(){return(this.elementRef.nativeElement.textContent||"").trim()}ngOnChanges(i){i.disabled&&this.stateChange$.next({value:this.value,disabled:this.disabled})}ngAfterViewChecked(){this.label!==this._previousLabel&&(this._previousLabel=this.label,this.stateChange$.next({value:this.value,disabled:this.disabled,label:this.elementRef.nativeElement.innerHTML}))}ngOnDestroy(){this.stateChange$.complete()}};t.\u0275fac=function(o){return new(o||t)(V(He))},t.\u0275cmp=ee({type:t,selectors:[["ng-option"]],inputs:{value:"value",disabled:[ue.HasDecoratorInputTransform,"disabled","disabled",Be]},features:[Rr,Ut],ngContentSelectors:vw,decls:1,vars:0,template:function(o,s){o&1&&(ps(),hs(0))},encapsulation:2,changeDetection:0});let e=t;return e})(),HE=(()=>{let t=class t{constructor(){this.notFoundText="No items found",this.typeToSearchText="Type to search",this.addTagText="Add item",this.loadingText="Loading...",this.clearAllText="Clear all",this.disableVirtualScroll=!0,this.openOnEnter=!0,this.appearance="underline"}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),BE=(()=>{let t=class t{warn(i){console.warn(i)}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),Sw=new xe("ng-select-selection-model"),Tw=(()=>{let t=class t{get items(){return this._items}set items(i){this._itemsAreUsed=!0,this._items=i??[]}get compareWith(){return this._compareWith}set compareWith(i){if(i!=null&&!ad(i))throw Error("`compareWith` must be a function.");this._compareWith=i}get clearSearchOnAdd(){return je(this._clearSearchOnAdd)?this._clearSearchOnAdd:je(this.config.clearSearchOnAdd)?this.config.clearSearchOnAdd:this.closeOnSelect}set clearSearchOnAdd(i){this._clearSearchOnAdd=i}get deselectOnClick(){return je(this._deselectOnClick)?this._deselectOnClick:je(this.config.deselectOnClick)?this.config.deselectOnClick:this.multiple}set deselectOnClick(i){this._deselectOnClick=i}get disabled(){return this.readonly||this._disabled}get filtered(){return!!this.searchTerm&&this.searchable||this._isComposing}get single(){return!this.multiple}get _editableSearchTerm(){return this.editableSearchTerm&&!this.multiple}constructor(i,o,s,r,a,c,u){this.classes=i,this.autoFocus=o,this.config=s,this._cd=c,this._console=u,this.markFirst=!0,this.dropdownPosition="auto",this.loading=!1,this.closeOnSelect=!0,this.hideSelected=!1,this.selectOnTab=!1,this.bufferAmount=4,this.selectableGroup=!1,this.selectableGroupAsModel=!0,this.searchFn=null,this.trackByFn=null,this.clearOnBackspace=!0,this.labelForId=null,this.inputAttrs={},this.readonly=!1,this.searchWhileComposing=!0,this.minTermLength=0,this.editableSearchTerm=!1,this.keyDownFn=p=>!0,this.multiple=!1,this.addTag=!1,this.searchable=!0,this.clearable=!0,this.isOpen=!1,this.blurEvent=new $,this.focusEvent=new $,this.changeEvent=new $,this.openEvent=new $,this.closeEvent=new $,this.searchEvent=new $,this.clearEvent=new $,this.addEvent=new $,this.removeEvent=new $,this.scroll=new $,this.scrollToEnd=new $,this.useDefaultClass=!0,this.viewPortItems=[],this.searchTerm=null,this.dropdownId=ww(),this.escapeHTML=!0,this._items=[],this._defaultLabel="label",this._pressedKeys=[],this._isComposing=!1,this._destroy$=new Ie,this._keyPress$=new Ie,this._onChange=p=>{},this._onTouched=()=>{},this.clearItem=p=>{let h=this.selectedItems.find(m=>m.value===p);this.unselect(h)},this.trackByOption=(p,h)=>this.trackByFn?this.trackByFn(h.value):h,this._mergeGlobalConfig(s),this.itemsList=new Yh(this,r()),this.element=a.nativeElement}get selectedItems(){return this.itemsList.selectedItems}get selectedValues(){return this.selectedItems.map(i=>i.value)}get hasValue(){return this.selectedItems.length>0}get currentPanelPosition(){if(this.dropdownPanel)return this.dropdownPanel.currentPosition}ngOnInit(){this._handleKeyPresses(),this._setInputAttributes()}ngOnChanges(i){i.multiple&&this.itemsList.clearSelected(),i.items&&this._setItems(i.items.currentValue||[]),i.isOpen&&(this._manualOpen=je(i.isOpen.currentValue))}ngAfterViewInit(){this._itemsAreUsed||(this.escapeHTML=!1,this._setItemsFromNgOptions()),je(this.autoFocus)&&this.focus()}ngOnDestroy(){this._destroy$.next(),this._destroy$.complete()}handleKeyDown(i){if(dn[i.which]){if(this.keyDownFn(i)===!1)return;this.handleKeyCode(i)}else i.key&&i.key.length===1&&this._keyPress$.next(i.key.toLocaleLowerCase())}handleKeyCode(i){let o=i.target;this.clearButton&&this.clearButton.nativeElement===o?this.handleKeyCodeClear(i):this.handleKeyCodeInput(i)}handleKeyCodeInput(i){switch(i.which){case dn.ArrowDown:this._handleArrowDown(i);break;case dn.ArrowUp:this._handleArrowUp(i);break;case dn.Space:this._handleSpace(i);break;case dn.Enter:this._handleEnter(i);break;case dn.Tab:this._handleTab(i);break;case dn.Esc:this.close(),i.preventDefault();break;case dn.Backspace:this._handleBackspace();break}}handleKeyCodeClear(i){switch(i.which){case dn.Enter:this.handleClearClick(),i.preventDefault();break}}handleMousedown(i){let o=i.target;if(o.tagName!=="INPUT"&&i.preventDefault(),o.classList.contains("ng-clear-wrapper")){this.handleClearClick();return}if(o.classList.contains("ng-arrow-wrapper")){this.handleArrowClick();return}o.classList.contains("ng-value-icon")||(this.focused||this.focus(),this.searchable?this.open():this.toggle())}handleArrowClick(){this.isOpen?this.close():this.open()}handleClearClick(){this.hasValue&&(this.itemsList.clearSelected(!0),this._updateNgModel()),this._clearSearch(),this.focus(),this.clearEvent.emit(),this._onSelectionChanged()}clearModel(){this.clearable&&(this.itemsList.clearSelected(),this._updateNgModel())}writeValue(i){this.itemsList.clearSelected(),this._handleWriteValue(i),this._cd.markForCheck()}registerOnChange(i){this._onChange=i}registerOnTouched(i){this._onTouched=i}setDisabledState(i){this._disabled=i,this._cd.markForCheck()}toggle(){this.isOpen?this.close():this.open()}open(){this.disabled||this.isOpen||this._manualOpen||!this._isTypeahead&&!this.addTag&&this.itemsList.noItemsToSelect||(this.isOpen=!0,this.itemsList.markSelectedOrDefault(this.markFirst),this.openEvent.emit(),this.searchTerm||this.focus(),this.detectChanges())}close(){!this.isOpen||this._manualOpen||(this.isOpen=!1,this._isComposing=!1,this._editableSearchTerm?this.itemsList.resetFilteredItems():this._clearSearch(),this.itemsList.unmarkItem(),this._onTouched(),this.closeEvent.emit(),this._cd.markForCheck())}toggleItem(i){!i||i.disabled||this.disabled||(this.deselectOnClick&&i.selected?this.unselect(i):this.select(i),this._editableSearchTerm&&this._setSearchTermFromItems(),this._onSelectionChanged())}select(i){i.selected||(this.itemsList.select(i),this.clearSearchOnAdd&&!this._editableSearchTerm&&this._clearSearch(),this._updateNgModel(),this.multiple&&this.addEvent.emit(i.value)),(this.closeOnSelect||this.itemsList.noItemsToSelect)&&this.close()}focus(){this.searchInput.nativeElement.focus()}blur(){this.searchInput.nativeElement.blur()}unselect(i){i&&(this.itemsList.unselect(i),this.focus(),this._updateNgModel(),this.removeEvent.emit(i.value))}selectTag(){let i;ad(this.addTag)?i=this.addTag(this.searchTerm):i=this._primitive?this.searchTerm:{[this.bindLabel]:this.searchTerm};let o=s=>this._isTypeahead||!this.isOpen?this.itemsList.mapItem(s,null):this.itemsList.addItem(s);SE(i)?i.then(s=>this.select(o(s))).catch(()=>{}):i&&this.select(o(i))}showClear(){return this.clearable&&(this.hasValue||this.searchTerm)&&!this.disabled}focusOnClear(){this.blur(),this.clearButton&&this.clearButton.nativeElement.focus()}get showAddTag(){if(!this._validTerm)return!1;let i=this.searchTerm.toLowerCase().trim();return this.addTag&&!this.itemsList.filteredItems.some(o=>o.label.toLowerCase()===i)&&(!this.hideSelected&&this.isOpen||!this.selectedItems.some(o=>o.label.toLowerCase()===i))&&!this.loading}showNoItemsFound(){let i=this.itemsList.filteredItems.length===0;return(i&&!this._isTypeahead&&!this.loading||i&&this._isTypeahead&&this._validTerm&&!this.loading)&&!this.showAddTag}showTypeToSearch(){return this.itemsList.filteredItems.length===0&&this._isTypeahead&&!this._validTerm&&!this.loading}onCompositionStart(){this._isComposing=!0}onCompositionEnd(i){this._isComposing=!1,!this.searchWhileComposing&&this.filter(i)}filter(i){this._isComposing&&!this.searchWhileComposing||(this.searchTerm=i,this._isTypeahead&&(this._validTerm||this.minTermLength===0)&&this.typeahead.next(i),this._isTypeahead||(this.itemsList.filter(this.searchTerm),this.isOpen&&this.itemsList.markSelectedOrDefault(this.markFirst)),this.searchEvent.emit({term:i,items:this.itemsList.filteredItems.map(o=>o.value)}),this.open())}onInputFocus(i){this.focused||(this._editableSearchTerm&&this._setSearchTermFromItems(),this.element.classList.add("ng-select-focused"),this.focusEvent.emit(i),this.focused=!0)}onInputBlur(i){this.element.classList.remove("ng-select-focused"),this.blurEvent.emit(i),!this.isOpen&&!this.disabled&&this._onTouched(),this._editableSearchTerm&&this._setSearchTermFromItems(),this.focused=!1}onItemHover(i){i.disabled||this.itemsList.markItem(i)}detectChanges(){this._cd.destroyed||this._cd.detectChanges()}_setSearchTermFromItems(){let i=this.selectedItems&&this.selectedItems[0];this.searchTerm=i&&i.label||null}_setItems(i){let o=i[0];this.bindLabel=this.bindLabel||this._defaultLabel,this._primitive=je(o)?!Va(o):this._primitive||this.bindLabel===this._defaultLabel,this.itemsList.setItems(i),i.length>0&&this.hasValue&&this.itemsList.mapSelectedItems(),this.isOpen&&je(this.searchTerm)&&!this._isTypeahead&&this.itemsList.filter(this.searchTerm),(this._isTypeahead||this.isOpen)&&this.itemsList.markSelectedOrDefault(this.markFirst)}_setItemsFromNgOptions(){let i=s=>{this.items=s.map(r=>({$ngOptionValue:r.value,$ngOptionLabel:r.elementRef.nativeElement.innerHTML,disabled:r.disabled})),this.itemsList.setItems(this.items),this.hasValue&&this.itemsList.mapSelectedItems(),this.detectChanges()},o=()=>{let s=ns(this.ngOptions.changes,this._destroy$);ns(...this.ngOptions.map(r=>r.stateChange$)).pipe(Qe(s)).subscribe(r=>{let a=this.itemsList.findItem(r.value);a.disabled=r.disabled,a.label=r.label||a.label,this._cd.detectChanges()})};this.ngOptions.changes.pipe(xr(this.ngOptions),Qe(this._destroy$)).subscribe(s=>{this.bindLabel=this._defaultLabel,i(s),o()})}_isValidWriteValue(i){if(!je(i)||this.multiple&&i===""||Array.isArray(i)&&i.length===0)return!1;let o=s=>!je(this.compareWith)&&Va(s)&&this.bindValue?(this._console.warn(`Setting object(${JSON.stringify(s)}) as your model with bindValue is not allowed unless [compareWith] is used.`),!1):!0;return this.multiple?Array.isArray(i)?i.every(s=>o(s)):(this._console.warn("Multiple select ngModel should be array."),!1):o(i)}_handleWriteValue(i){if(!this._isValidWriteValue(i))return;let o=s=>{let r=this.itemsList.findItem(s);if(r)this.itemsList.select(r);else{let a=Va(s),c=!a&&!this.bindValue;a||c?this.itemsList.select(this.itemsList.mapItem(s,null)):this.bindValue&&(r={[this.bindLabel]:null,[this.bindValue]:s},this.itemsList.select(this.itemsList.mapItem(r,null)))}};this.multiple?i.forEach(s=>o(s)):o(i)}_handleKeyPresses(){this.searchable||this._keyPress$.pipe(Qe(this._destroy$),Je(i=>this._pressedKeys.push(i)),Hm(200),yt(()=>this._pressedKeys.length>0),re(()=>this._pressedKeys.join(""))).subscribe(i=>{let o=this.itemsList.findByLabel(i);o&&(this.isOpen?(this.itemsList.markItem(o),this._scrollToMarked(),this._cd.markForCheck()):this.select(o)),this._pressedKeys=[]})}_setInputAttributes(){let i=this.searchInput.nativeElement,o=v({type:"text",autocorrect:"off",autocapitalize:"off",autocomplete:this.labelForId?"off":this.dropdownId},this.inputAttrs);for(let s of Object.keys(o))i.setAttribute(s,o[s])}_updateNgModel(){let i=[];for(let s of this.selectedItems)if(this.bindValue){let r=null;if(s.children){let a=this.groupValue?this.bindValue:this.groupBy;r=s.value[a||this.groupBy]}else r=this.itemsList.resolveNested(s.value,this.bindValue);i.push(r)}else i.push(s.value);let o=this.selectedItems.map(s=>s.value);this.multiple?(this._onChange(i),this.changeEvent.emit(o)):(this._onChange(je(i[0])?i[0]:null),this.changeEvent.emit(o[0])),this._cd.markForCheck()}_clearSearch(){this.searchTerm&&(this._changeSearch(null),this.itemsList.resetFilteredItems())}_changeSearch(i){this.searchTerm=i,this._isTypeahead&&this.typeahead.next(i)}_scrollToMarked(){!this.isOpen||!this.dropdownPanel||this.dropdownPanel.scrollTo(this.itemsList.markedItem)}_scrollToTag(){!this.isOpen||!this.dropdownPanel||this.dropdownPanel.scrollToTag()}_onSelectionChanged(){this.isOpen&&this.deselectOnClick&&this.appendTo&&(this._cd.detectChanges(),this.dropdownPanel.adjustPosition())}_handleTab(i){if(this.isOpen===!1){if(this.showClear()&&!i.shiftKey)this.focusOnClear(),i.preventDefault();else if(!this.addTag)return}this.selectOnTab?this.itemsList.markedItem?(this.toggleItem(this.itemsList.markedItem),i.preventDefault()):this.showAddTag?(this.selectTag(),i.preventDefault()):this.close():this.close()}_handleEnter(i){if(this.isOpen||this._manualOpen)this.itemsList.markedItem?this.toggleItem(this.itemsList.markedItem):this.showAddTag&&this.selectTag();else if(this.openOnEnter)this.open();else return;i.preventDefault()}_handleSpace(i){this.isOpen||this._manualOpen||(this.open(),i.preventDefault())}_handleArrowDown(i){this._nextItemIsTag(1)?(this.itemsList.unmarkItem(),this._scrollToTag()):(this.itemsList.markNextItem(),this._scrollToMarked()),this.open(),i.preventDefault()}_handleArrowUp(i){this.isOpen&&(this._nextItemIsTag(-1)?(this.itemsList.unmarkItem(),this._scrollToTag()):(this.itemsList.markPreviousItem(),this._scrollToMarked()),i.preventDefault())}_nextItemIsTag(i){let o=this.itemsList.markedIndex+i;return this.addTag&&this.searchTerm&&this.itemsList.markedItem&&(o<0||o===this.itemsList.filteredItems.length)}_handleBackspace(){this.searchTerm||!this.clearable||!this.clearOnBackspace||!this.hasValue||(this.multiple?this.unselect(this.itemsList.lastSelectedItem):this.clearModel())}get _isTypeahead(){return this.typeahead&&this.typeahead.observers.length>0}get _validTerm(){let i=this.searchTerm&&this.searchTerm.trim();return i&&i.length>=this.minTermLength}_mergeGlobalConfig(i){this.placeholder=this.placeholder||i.placeholder,this.notFoundText=this.notFoundText||i.notFoundText,this.typeToSearchText=this.typeToSearchText||i.typeToSearchText,this.addTagText=this.addTagText||i.addTagText,this.loadingText=this.loadingText||i.loadingText,this.clearAllText=this.clearAllText||i.clearAllText,this.virtualScroll=je(this.virtualScroll)?this.virtualScroll:je(i.disableVirtualScroll)?!i.disableVirtualScroll:!1,this.openOnEnter=je(this.openOnEnter)?this.openOnEnter:i.openOnEnter,this.appendTo=this.appendTo||i.appendTo,this.bindValue=this.bindValue||i.bindValue,this.bindLabel=this.bindLabel||i.bindLabel,this.appearance=this.appearance||i.appearance}};t.\u0275fac=function(o){return new(o||t)(Ar("class"),Ar("autofocus"),V(HE),V(Sw),V(He),V(Lt),V(BE))},t.\u0275cmp=ee({type:t,selectors:[["ng-select"]],contentQueries:function(o,s,r){if(o&1&&(It(r,ME,5,Oe),It(r,DE,5,Oe),It(r,EE,5,Oe),It(r,IE,5,Oe),It(r,xE,5,Oe),It(r,OE,5,Oe),It(r,kE,5,Oe),It(r,AE,5,Oe),It(r,FE,5,Oe),It(r,PE,5,Oe),It(r,RE,5,Oe),It(r,VE,5)),o&2){let a;pe(a=he())&&(s.optionTemplate=a.first),pe(a=he())&&(s.optgroupTemplate=a.first),pe(a=he())&&(s.labelTemplate=a.first),pe(a=he())&&(s.multiLabelTemplate=a.first),pe(a=he())&&(s.headerTemplate=a.first),pe(a=he())&&(s.footerTemplate=a.first),pe(a=he())&&(s.notFoundTemplate=a.first),pe(a=he())&&(s.typeToSearchTemplate=a.first),pe(a=he())&&(s.loadingTextTemplate=a.first),pe(a=he())&&(s.tagTemplate=a.first),pe(a=he())&&(s.loadingSpinnerTemplate=a.first),pe(a=he())&&(s.ngOptions=a)}},viewQuery:function(o,s){if(o&1&&(xt(yw,5),xt(UD,7),xt(zD,5)),o&2){let r;pe(r=he())&&(s.dropdownPanel=r.first),pe(r=he())&&(s.searchInput=r.first),pe(r=he())&&(s.clearButton=r.first)}},hostVars:20,hostBindings:function(o,s){o&1&&E("keydown",function(a){return s.handleKeyDown(a)}),o&2&&ut("ng-select-typeahead",s.typeahead)("ng-select-multiple",s.multiple)("ng-select-taggable",s.addTag)("ng-select-searchable",s.searchable)("ng-select-clearable",s.clearable)("ng-select-opened",s.isOpen)("ng-select",s.useDefaultClass)("ng-select-disabled",s.disabled)("ng-select-filtered",s.filtered)("ng-select-single",s.single)},inputs:{bindLabel:"bindLabel",bindValue:"bindValue",markFirst:[ue.HasDecoratorInputTransform,"markFirst","markFirst",Be],placeholder:"placeholder",notFoundText:"notFoundText",typeToSearchText:"typeToSearchText",addTagText:"addTagText",loadingText:"loadingText",clearAllText:"clearAllText",appearance:"appearance",dropdownPosition:"dropdownPosition",appendTo:"appendTo",loading:[ue.HasDecoratorInputTransform,"loading","loading",Be],closeOnSelect:[ue.HasDecoratorInputTransform,"closeOnSelect","closeOnSelect",Be],hideSelected:[ue.HasDecoratorInputTransform,"hideSelected","hideSelected",Be],selectOnTab:[ue.HasDecoratorInputTransform,"selectOnTab","selectOnTab",Be],openOnEnter:[ue.HasDecoratorInputTransform,"openOnEnter","openOnEnter",Be],maxSelectedItems:[ue.HasDecoratorInputTransform,"maxSelectedItems","maxSelectedItems",Lr],groupBy:"groupBy",groupValue:"groupValue",bufferAmount:[ue.HasDecoratorInputTransform,"bufferAmount","bufferAmount",Lr],virtualScroll:[ue.HasDecoratorInputTransform,"virtualScroll","virtualScroll",Be],selectableGroup:[ue.HasDecoratorInputTransform,"selectableGroup","selectableGroup",Be],selectableGroupAsModel:[ue.HasDecoratorInputTransform,"selectableGroupAsModel","selectableGroupAsModel",Be],searchFn:"searchFn",trackByFn:"trackByFn",clearOnBackspace:[ue.HasDecoratorInputTransform,"clearOnBackspace","clearOnBackspace",Be],labelForId:"labelForId",inputAttrs:"inputAttrs",tabIndex:[ue.HasDecoratorInputTransform,"tabIndex","tabIndex",Lr],readonly:[ue.HasDecoratorInputTransform,"readonly","readonly",Be],searchWhileComposing:[ue.HasDecoratorInputTransform,"searchWhileComposing","searchWhileComposing",Be],minTermLength:[ue.HasDecoratorInputTransform,"minTermLength","minTermLength",Lr],editableSearchTerm:[ue.HasDecoratorInputTransform,"editableSearchTerm","editableSearchTerm",Be],keyDownFn:"keyDownFn",typeahead:"typeahead",multiple:[ue.HasDecoratorInputTransform,"multiple","multiple",Be],addTag:"addTag",searchable:[ue.HasDecoratorInputTransform,"searchable","searchable",Be],clearable:[ue.HasDecoratorInputTransform,"clearable","clearable",Be],isOpen:[ue.HasDecoratorInputTransform,"isOpen","isOpen",Be],items:"items",compareWith:"compareWith",clearSearchOnAdd:"clearSearchOnAdd",deselectOnClick:"deselectOnClick"},outputs:{blurEvent:"blur",focusEvent:"focus",changeEvent:"change",openEvent:"open",closeEvent:"close",searchEvent:"search",clearEvent:"clear",addEvent:"add",removeEvent:"remove",scroll:"scroll",scrollToEnd:"scrollToEnd"},features:[yi([{provide:zi,useExisting:ii(()=>t),multi:!0},Cw]),Rr,Ut],decls:14,vars:19,consts:[["searchInput",""],["defaultLabelTemplate",""],["defaultLoadingSpinnerTemplate",""],["clearButton",""],["defaultOptionTemplate",""],["defaultTagTemplate",""],["defaultNotFoundTemplate",""],["defaultTypeToSearchTemplate",""],["defaultLoadingTextTemplate",""],[1,"ng-select-container",3,"mousedown"],[1,"ng-value-container"],[1,"ng-placeholder"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["role","combobox","aria-haspopup","listbox",1,"ng-input"],["aria-autocomplete","list",3,"input","compositionstart","compositionend","focus","blur","change","readOnly","disabled","value"],["tabindex","0",1,"ng-clear-wrapper",3,"title"],[1,"ng-arrow-wrapper"],[1,"ng-arrow"],["role","listbox","aria-label","Options list",1,"ng-dropdown-panel",3,"virtualScroll","bufferAmount","appendTo","position","headerTemplate","footerTemplate","filterValue","items","markedItem","ng-select-multiple","ngClass","id"],[1,"ng-value",3,"ng-value-disabled"],[1,"ng-value"],["aria-hidden","true",1,"ng-value-icon","left",3,"click"],[1,"ng-value-label",3,"ngItemLabel","escape"],[3,"ngTemplateOutlet"],[1,"ng-spinner-loader"],["aria-hidden","true",1,"ng-clear"],["role","listbox","aria-label","Options list",1,"ng-dropdown-panel",3,"update","scroll","scrollToEnd","outsideClick","virtualScroll","bufferAmount","appendTo","position","headerTemplate","footerTemplate","filterValue","items","markedItem","ngClass","id"],[1,"ng-option",3,"ng-option-disabled","ng-option-selected","ng-optgroup","ng-option","ng-option-child","ng-option-marked"],["role","option",1,"ng-option",3,"ng-option-marked"],[1,"ng-option",3,"click","mouseover"],[1,"ng-option-label",3,"ngItemLabel","escape"],["role","option",1,"ng-option",3,"mouseover","click"],[1,"ng-tag-label"],[1,"ng-option","ng-option-disabled"]],template:function(o,s){if(o&1){let r=oe();_(0,"div",9),E("mousedown",function(c){return O(r),k(s.handleMousedown(c))}),_(1,"div",10)(2,"div",11),R(3),y(),B(4,QD,2,0)(5,XD,1,5,null,12),_(6,"div",13)(7,"input",14,0),E("input",function(){O(r);let c=Ne(8);return k(s.filter(c.value))})("compositionstart",function(){return O(r),k(s.onCompositionStart())})("compositionend",function(){O(r);let c=Ne(8);return k(s.onCompositionEnd(c.value))})("focus",function(c){return O(r),k(s.onInputFocus(c))})("blur",function(c){return O(r),k(s.onInputBlur(c))})("change",function(c){return O(r),k(c.stopPropagation())}),y()()(),B(9,iE,3,1)(10,nE,4,1,"span",15),_(11,"span",16),L(12,"span",17),y()(),B(13,vE,8,17,"ng-dropdown-panel",18)}o&2&&(ut("ng-appearance-outline",s.appearance==="outline")("ng-has-value",s.hasValue),g(3),de(s.placeholder),g(),Le(4,(!s.multiLabelTemplate||!s.multiple)&&s.selectedItems.length>0?4:-1),g(),Le(5,s.multiple&&s.multiLabelTemplate&&s.selectedValues.length>0?5:-1),g(),Et("aria-expanded",s.isOpen)("aria-owns",s.isOpen?s.dropdownId:null),g(),C("readOnly",!s.searchable||s.itemsList.maxItemsSelected)("disabled",s.disabled)("value",s.searchTerm?s.searchTerm:""),Et("id",s.labelForId)("tabindex",s.tabIndex)("aria-activedescendant",s.isOpen?s.itemsList==null||s.itemsList.markedItem==null?null:s.itemsList.markedItem.htmlId:null)("aria-controls",s.isOpen?s.dropdownId:null),g(2),Le(9,s.loading?9:-1),g(),Le(10,s.showClear()?10:-1),g(3),Le(13,s.isOpen?13:-1))},dependencies:[zt,_s,yw,TE],styles:[`@charset "UTF-8";.ng-select{position:relative;display:block;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.ng-select div,.ng-select input,.ng-select span{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.ng-select [hidden]{display:none}.ng-select.ng-select-searchable .ng-select-container .ng-value-container .ng-input{opacity:1}.ng-select.ng-select-opened .ng-select-container{z-index:1001}.ng-select.ng-select-disabled .ng-select-container .ng-value-container .ng-placeholder,.ng-select.ng-select-disabled .ng-select-container .ng-value-container .ng-value{-webkit-user-select:none;user-select:none;cursor:default}.ng-select.ng-select-disabled .ng-arrow-wrapper{cursor:default}.ng-select.ng-select-filtered .ng-placeholder{display:none}.ng-select .ng-select-container{cursor:default;display:flex;outline:none;overflow:hidden;position:relative;width:100%}.ng-select .ng-select-container .ng-value-container{display:flex;flex:1}.ng-select .ng-select-container .ng-value-container .ng-input{opacity:0}.ng-select .ng-select-container .ng-value-container .ng-input>input{box-sizing:content-box;background:none transparent;border:0 none;box-shadow:none;outline:none;padding:0;cursor:default;width:100%}.ng-select .ng-select-container .ng-value-container .ng-input>input::-ms-clear{display:none}.ng-select .ng-select-container .ng-value-container .ng-input>input[readonly]{-webkit-user-select:none;user-select:none;width:0;padding:0}.ng-select.ng-select-single.ng-select-filtered .ng-select-container .ng-value-container .ng-value{visibility:hidden}.ng-select.ng-select-single .ng-select-container .ng-value-container,.ng-select.ng-select-single .ng-select-container .ng-value-container .ng-value{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ng-select.ng-select-single .ng-select-container .ng-value-container .ng-value .ng-value-icon{display:none}.ng-select.ng-select-single .ng-select-container .ng-value-container .ng-input{position:absolute;left:0;width:100%}.ng-select.ng-select-multiple.ng-select-disabled>.ng-select-container .ng-value-container .ng-value .ng-value-icon{display:none}.ng-select.ng-select-multiple .ng-select-container .ng-value-container{flex-wrap:wrap}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-placeholder{position:absolute}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-value{white-space:nowrap}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-value.ng-value-disabled .ng-value-icon{display:none}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-value .ng-value-icon{cursor:pointer}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-input{flex:1;z-index:2}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-placeholder{z-index:1}.ng-select .ng-clear-wrapper{cursor:pointer;position:relative;width:17px;-webkit-user-select:none;user-select:none}.ng-select .ng-clear-wrapper .ng-clear{display:inline-block;font-size:18px;line-height:1;pointer-events:none}.ng-select .ng-spinner-loader{border-radius:50%;width:17px;height:17px;margin-right:5px;font-size:10px;position:relative;text-indent:-9999em;border-top:2px solid rgba(66,66,66,.2);border-right:2px solid rgba(66,66,66,.2);border-bottom:2px solid rgba(66,66,66,.2);border-left:2px solid #424242;transform:translateZ(0);animation:load8 .8s infinite linear}.ng-select .ng-spinner-loader:after{border-radius:50%;width:17px;height:17px}@-webkit-keyframes load8{0%{-webkit-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes load8{0%{-webkit-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.ng-select .ng-arrow-wrapper{cursor:pointer;position:relative;text-align:center;-webkit-user-select:none;user-select:none}.ng-select .ng-arrow-wrapper .ng-arrow{pointer-events:none;display:inline-block;height:0;width:0;position:relative}.ng-dropdown-panel{box-sizing:border-box;position:absolute;opacity:0;width:100%;z-index:1050;-webkit-overflow-scrolling:touch}.ng-dropdown-panel .ng-dropdown-panel-items{display:block;height:auto;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;max-height:240px;overflow-y:auto}.ng-dropdown-panel .ng-dropdown-panel-items .ng-optgroup{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ng-dropdown-panel .ng-dropdown-panel-items .ng-option{box-sizing:border-box;cursor:pointer;display:block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ng-dropdown-panel .ng-dropdown-panel-items .ng-option .ng-option-label:empty:before{content:"\\200b"}.ng-dropdown-panel .ng-dropdown-panel-items .ng-option .highlighted{font-weight:700;text-decoration:underline}.ng-dropdown-panel .ng-dropdown-panel-items .ng-option.disabled{cursor:default}.ng-dropdown-panel .scroll-host{overflow:hidden;overflow-y:auto;position:relative;display:block;-webkit-overflow-scrolling:touch}.ng-dropdown-panel .scrollable-content{top:0;left:0;width:100%;height:100%;position:absolute}.ng-dropdown-panel .total-padding{width:1px;opacity:0}
`],encapsulation:2,changeDetection:0});let e=t;return e})();function GE(){return new Kh}var Kh=class{constructor(){this._selected=[]}get value(){return this._selected}select(t,n,i){if(t.selected=!0,(!t.children||!n&&i)&&this._selected.push(t),n)if(t.parent){let o=t.parent.children.length,s=t.parent.children.filter(r=>r.selected).length;t.parent.selected=o===s}else t.children&&(this._setChildrenSelectedState(t.children,!0),this._removeChildren(t),i&&this._activeChildren(t)?this._selected=[...this._selected.filter(o=>o.parent!==t),t]:this._selected=[...this._selected,...t.children.filter(o=>!o.disabled)])}unselect(t,n){if(this._selected=this._selected.filter(i=>i!==t),t.selected=!1,n)if(t.parent&&t.parent.selected){let i=t.parent.children;this._removeParent(t.parent),this._removeChildren(t.parent),this._selected.push(...i.filter(o=>o!==t&&!o.disabled)),t.parent.selected=!1}else t.children&&(this._setChildrenSelectedState(t.children,!1),this._removeChildren(t))}clear(t){this._selected=t?this._selected.filter(n=>n.disabled):[]}_setChildrenSelectedState(t,n){for(let i of t)i.disabled||(i.selected=n)}_removeChildren(t){this._selected=[...this._selected.filter(n=>n.parent!==t),...t.children.filter(n=>n.parent===t&&n.disabled&&n.selected)]}_removeParent(t){this._selected=this._selected.filter(n=>n!==t)}_activeChildren(t){return t.children.every(n=>!n.disabled||n.selected)}},Mw=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=Rt({type:t}),t.\u0275inj=Pt({providers:[{provide:Sw,useValue:GE}],imports:[ve]});let e=t;return e})();function Ba(e){e||(Wm(Ba),e=F(tl));let t=new Cd(n=>e.onDestroy(n.next.bind(n)));return n=>n.pipe(Qe(t))}var nt="top",St="bottom",ft="right",lt="left",ld="auto",uo=[nt,St,ft,lt],Fn="start",qo="end",Dw="clippingParents",cd="viewport",_r="popper",Ew="reference",Qh=uo.reduce(function(e,t){return e.concat([t+"-"+Fn,t+"-"+qo])},[]),dd=[].concat(uo,[ld]).reduce(function(e,t){return e.concat([t,t+"-"+Fn,t+"-"+qo])},[]),UE="beforeRead",zE="read",$E="afterRead",WE="beforeMain",qE="main",ZE="afterMain",YE="beforeWrite",KE="write",QE="afterWrite",Iw=[UE,zE,$E,WE,qE,ZE,YE,KE,QE];function gt(e){return e?(e.nodeName||"").toLowerCase():null}function Ve(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Di(e){var t=Ve(e).Element;return e instanceof t||e instanceof Element}function ct(e){var t=Ve(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function yr(e){if(typeof ShadowRoot>"u")return!1;var t=Ve(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function JE(e){var t=e.state;Object.keys(t.elements).forEach(function(n){var i=t.styles[n]||{},o=t.attributes[n]||{},s=t.elements[n];!ct(s)||!gt(s)||(Object.assign(s.style,i),Object.keys(o).forEach(function(r){var a=o[r];a===!1?s.removeAttribute(r):s.setAttribute(r,a===!0?"":a)}))})}function XE(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(i){var o=t.elements[i],s=t.attributes[i]||{},r=Object.keys(t.styles.hasOwnProperty(i)?t.styles[i]:n[i]),a=r.reduce(function(c,u){return c[u]="",c},{});!ct(o)||!gt(o)||(Object.assign(o.style,a),Object.keys(s).forEach(function(c){o.removeAttribute(c)}))})}}var xw={name:"applyStyles",enabled:!0,phase:"write",fn:JE,effect:XE,requires:["computeStyles"]};function _t(e){return e.split("-")[0]}var $i=Math.max,Zo=Math.min,Pn=Math.round;function vr(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function Ga(){return!/^((?!chrome|android).)*safari/i.test(vr())}function Ei(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var i=e.getBoundingClientRect(),o=1,s=1;t&&ct(e)&&(o=e.offsetWidth>0&&Pn(i.width)/e.offsetWidth||1,s=e.offsetHeight>0&&Pn(i.height)/e.offsetHeight||1);var r=Di(e)?Ve(e):window,a=r.visualViewport,c=!Ga()&&n,u=(i.left+(c&&a?a.offsetLeft:0))/o,p=(i.top+(c&&a?a.offsetTop:0))/s,h=i.width/o,m=i.height/s;return{width:h,height:m,top:p,right:u+h,bottom:p+m,left:u,x:u,y:p}}function Yo(e){var t=Ei(e),n=e.offsetWidth,i=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-i)<=1&&(i=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:i}}function ja(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&yr(n)){var i=t;do{if(i&&e.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function Gt(e){return Ve(e).getComputedStyle(e)}function Jh(e){return["table","td","th"].indexOf(gt(e))>=0}function Tt(e){return((Di(e)?e.ownerDocument:e.document)||window.document).documentElement}function Rn(e){return gt(e)==="html"?e:e.assignedSlot||e.parentNode||(yr(e)?e.host:null)||Tt(e)}function Ow(e){return!ct(e)||Gt(e).position==="fixed"?null:e.offsetParent}function eI(e){var t=/firefox/i.test(vr()),n=/Trident/i.test(vr());if(n&&ct(e)){var i=Gt(e);if(i.position==="fixed")return null}var o=Rn(e);for(yr(o)&&(o=o.host);ct(o)&&["html","body"].indexOf(gt(o))<0;){var s=Gt(o);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||t&&s.willChange==="filter"||t&&s.filter&&s.filter!=="none")return o;o=o.parentNode}return null}function Wi(e){for(var t=Ve(e),n=Ow(e);n&&Jh(n)&&Gt(n).position==="static";)n=Ow(n);return n&&(gt(n)==="html"||gt(n)==="body"&&Gt(n).position==="static")?t:n||eI(e)||t}function Ko(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Qo(e,t,n){return $i(e,Zo(t,n))}function kw(e,t,n){var i=Qo(e,t,n);return i>n?n:i}function Ua(){return{top:0,right:0,bottom:0,left:0}}function za(e){return Object.assign({},Ua(),e)}function $a(e,t){return t.reduce(function(n,i){return n[i]=e,n},{})}var tI=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,za(typeof t!="number"?t:$a(t,uo))};function iI(e){var t,n=e.state,i=e.name,o=e.options,s=n.elements.arrow,r=n.modifiersData.popperOffsets,a=_t(n.placement),c=Ko(a),u=[lt,ft].indexOf(a)>=0,p=u?"height":"width";if(!(!s||!r)){var h=tI(o.padding,n),m=Yo(s),f=c==="y"?nt:lt,S=c==="y"?St:ft,A=n.rects.reference[p]+n.rects.reference[c]-r[c]-n.rects.popper[p],H=r[c]-n.rects.reference[c],N=Wi(s),K=N?c==="y"?N.clientHeight||0:N.clientWidth||0:0,q=A/2-H/2,j=h[f],Q=K-m[p]-h[S],X=K/2-m[p]/2+q,ce=Qo(j,X,Q),Ee=c;n.modifiersData[i]=(t={},t[Ee]=ce,t.centerOffset=ce-X,t)}}function nI(e){var t=e.state,n=e.options,i=n.element,o=i===void 0?"[data-popper-arrow]":i;o!=null&&(typeof o=="string"&&(o=t.elements.popper.querySelector(o),!o)||ja(t.elements.popper,o)&&(t.elements.arrow=o))}var Xh={name:"arrow",enabled:!0,phase:"main",fn:iI,effect:nI,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Ii(e){return e.split("-")[1]}var oI={top:"auto",right:"auto",bottom:"auto",left:"auto"};function sI(e,t){var n=e.x,i=e.y,o=t.devicePixelRatio||1;return{x:Pn(n*o)/o||0,y:Pn(i*o)/o||0}}function Aw(e){var t,n=e.popper,i=e.popperRect,o=e.placement,s=e.variation,r=e.offsets,a=e.position,c=e.gpuAcceleration,u=e.adaptive,p=e.roundOffsets,h=e.isFixed,m=r.x,f=m===void 0?0:m,S=r.y,A=S===void 0?0:S,H=typeof p=="function"?p({x:f,y:A}):{x:f,y:A};f=H.x,A=H.y;var N=r.hasOwnProperty("x"),K=r.hasOwnProperty("y"),q=lt,j=nt,Q=window;if(u){var X=Wi(n),ce="clientHeight",Ee="clientWidth";if(X===Ve(n)&&(X=Tt(n),Gt(X).position!=="static"&&a==="absolute"&&(ce="scrollHeight",Ee="scrollWidth")),X=X,o===nt||(o===lt||o===ft)&&s===qo){j=St;var dt=h&&X===Q&&Q.visualViewport?Q.visualViewport.height:X[ce];A-=dt-i.height,A*=c?1:-1}if(o===lt||(o===nt||o===St)&&s===qo){q=ft;var ot=h&&X===Q&&Q.visualViewport?Q.visualViewport.width:X[Ee];f-=ot-i.width,f*=c?1:-1}}var Dt=Object.assign({position:a},u&&oI),xi=p===!0?sI({x:f,y:A},Ve(n)):{x:f,y:A};if(f=xi.x,A=xi.y,c){var Ft;return Object.assign({},Dt,(Ft={},Ft[j]=K?"0":"",Ft[q]=N?"0":"",Ft.transform=(Q.devicePixelRatio||1)<=1?"translate("+f+"px, "+A+"px)":"translate3d("+f+"px, "+A+"px, 0)",Ft))}return Object.assign({},Dt,(t={},t[j]=K?A+"px":"",t[q]=N?f+"px":"",t.transform="",t))}function rI(e){var t=e.state,n=e.options,i=n.gpuAcceleration,o=i===void 0?!0:i,s=n.adaptive,r=s===void 0?!0:s,a=n.roundOffsets,c=a===void 0?!0:a,u={placement:_t(t.placement),variation:Ii(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:o,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,Aw(Object.assign({},u,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:r,roundOffsets:c})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,Aw(Object.assign({},u,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}var Fw={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:rI,data:{}};var ud={passive:!0};function aI(e){var t=e.state,n=e.instance,i=e.options,o=i.scroll,s=o===void 0?!0:o,r=i.resize,a=r===void 0?!0:r,c=Ve(t.elements.popper),u=[].concat(t.scrollParents.reference,t.scrollParents.popper);return s&&u.forEach(function(p){p.addEventListener("scroll",n.update,ud)}),a&&c.addEventListener("resize",n.update,ud),function(){s&&u.forEach(function(p){p.removeEventListener("scroll",n.update,ud)}),a&&c.removeEventListener("resize",n.update,ud)}}var Pw={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:aI,data:{}};var lI={left:"right",right:"left",bottom:"top",top:"bottom"};function br(e){return e.replace(/left|right|bottom|top/g,function(t){return lI[t]})}var cI={start:"end",end:"start"};function pd(e){return e.replace(/start|end/g,function(t){return cI[t]})}function Jo(e){var t=Ve(e),n=t.pageXOffset,i=t.pageYOffset;return{scrollLeft:n,scrollTop:i}}function Xo(e){return Ei(Tt(e)).left+Jo(e).scrollLeft}function em(e,t){var n=Ve(e),i=Tt(e),o=n.visualViewport,s=i.clientWidth,r=i.clientHeight,a=0,c=0;if(o){s=o.width,r=o.height;var u=Ga();(u||!u&&t==="fixed")&&(a=o.offsetLeft,c=o.offsetTop)}return{width:s,height:r,x:a+Xo(e),y:c}}function tm(e){var t,n=Tt(e),i=Jo(e),o=(t=e.ownerDocument)==null?void 0:t.body,s=$i(n.scrollWidth,n.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),r=$i(n.scrollHeight,n.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),a=-i.scrollLeft+Xo(e),c=-i.scrollTop;return Gt(o||n).direction==="rtl"&&(a+=$i(n.clientWidth,o?o.clientWidth:0)-s),{width:s,height:r,x:a,y:c}}function es(e){var t=Gt(e),n=t.overflow,i=t.overflowX,o=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+o+i)}function hd(e){return["html","body","#document"].indexOf(gt(e))>=0?e.ownerDocument.body:ct(e)&&es(e)?e:hd(Rn(e))}function po(e,t){var n;t===void 0&&(t=[]);var i=hd(e),o=i===((n=e.ownerDocument)==null?void 0:n.body),s=Ve(i),r=o?[s].concat(s.visualViewport||[],es(i)?i:[]):i,a=t.concat(r);return o?a:a.concat(po(Rn(r)))}function wr(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function dI(e,t){var n=Ei(e,!1,t==="fixed");return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function Rw(e,t,n){return t===cd?wr(em(e,n)):Di(t)?dI(t,n):wr(tm(Tt(e)))}function uI(e){var t=po(Rn(e)),n=["absolute","fixed"].indexOf(Gt(e).position)>=0,i=n&&ct(e)?Wi(e):e;return Di(i)?t.filter(function(o){return Di(o)&&ja(o,i)&&gt(o)!=="body"}):[]}function im(e,t,n,i){var o=t==="clippingParents"?uI(e):[].concat(t),s=[].concat(o,[n]),r=s[0],a=s.reduce(function(c,u){var p=Rw(e,u,i);return c.top=$i(p.top,c.top),c.right=Zo(p.right,c.right),c.bottom=Zo(p.bottom,c.bottom),c.left=$i(p.left,c.left),c},Rw(e,r,i));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function Wa(e){var t=e.reference,n=e.element,i=e.placement,o=i?_t(i):null,s=i?Ii(i):null,r=t.x+t.width/2-n.width/2,a=t.y+t.height/2-n.height/2,c;switch(o){case nt:c={x:r,y:t.y-n.height};break;case St:c={x:r,y:t.y+t.height};break;case ft:c={x:t.x+t.width,y:a};break;case lt:c={x:t.x-n.width,y:a};break;default:c={x:t.x,y:t.y}}var u=o?Ko(o):null;if(u!=null){var p=u==="y"?"height":"width";switch(s){case Fn:c[u]=c[u]-(t[p]/2-n[p]/2);break;case qo:c[u]=c[u]+(t[p]/2-n[p]/2);break;default:}}return c}function ho(e,t){t===void 0&&(t={});var n=t,i=n.placement,o=i===void 0?e.placement:i,s=n.strategy,r=s===void 0?e.strategy:s,a=n.boundary,c=a===void 0?Dw:a,u=n.rootBoundary,p=u===void 0?cd:u,h=n.elementContext,m=h===void 0?_r:h,f=n.altBoundary,S=f===void 0?!1:f,A=n.padding,H=A===void 0?0:A,N=za(typeof H!="number"?H:$a(H,uo)),K=m===_r?Ew:_r,q=e.rects.popper,j=e.elements[S?K:m],Q=im(Di(j)?j:j.contextElement||Tt(e.elements.popper),c,p,r),X=Ei(e.elements.reference),ce=Wa({reference:X,element:q,strategy:"absolute",placement:o}),Ee=wr(Object.assign({},q,ce)),dt=m===_r?Ee:X,ot={top:Q.top-dt.top+N.top,bottom:dt.bottom-Q.bottom+N.bottom,left:Q.left-dt.left+N.left,right:dt.right-Q.right+N.right},Dt=e.modifiersData.offset;if(m===_r&&Dt){var xi=Dt[o];Object.keys(ot).forEach(function(Ft){var mo=[ft,St].indexOf(Ft)>=0?1:-1,fo=[nt,St].indexOf(Ft)>=0?"y":"x";ot[Ft]+=xi[fo]*mo})}return ot}function nm(e,t){t===void 0&&(t={});var n=t,i=n.placement,o=n.boundary,s=n.rootBoundary,r=n.padding,a=n.flipVariations,c=n.allowedAutoPlacements,u=c===void 0?dd:c,p=Ii(i),h=p?a?Qh:Qh.filter(function(S){return Ii(S)===p}):uo,m=h.filter(function(S){return u.indexOf(S)>=0});m.length===0&&(m=h);var f=m.reduce(function(S,A){return S[A]=ho(e,{placement:A,boundary:o,rootBoundary:s,padding:r})[_t(A)],S},{});return Object.keys(f).sort(function(S,A){return f[S]-f[A]})}function pI(e){if(_t(e)===ld)return[];var t=br(e);return[pd(e),t,pd(t)]}function hI(e){var t=e.state,n=e.options,i=e.name;if(!t.modifiersData[i]._skip){for(var o=n.mainAxis,s=o===void 0?!0:o,r=n.altAxis,a=r===void 0?!0:r,c=n.fallbackPlacements,u=n.padding,p=n.boundary,h=n.rootBoundary,m=n.altBoundary,f=n.flipVariations,S=f===void 0?!0:f,A=n.allowedAutoPlacements,H=t.options.placement,N=_t(H),K=N===H,q=c||(K||!S?[br(H)]:pI(H)),j=[H].concat(q).reduce(function(is,Nn){return is.concat(_t(Nn)===ld?nm(t,{placement:Nn,boundary:p,rootBoundary:h,padding:u,flipVariations:S,allowedAutoPlacements:A}):Nn)},[]),Q=t.rects.reference,X=t.rects.popper,ce=new Map,Ee=!0,dt=j[0],ot=0;ot<j.length;ot++){var Dt=j[ot],xi=_t(Dt),Ft=Ii(Dt)===Fn,mo=[nt,St].indexOf(xi)>=0,fo=mo?"width":"height",Xt=ho(t,{placement:Dt,boundary:p,rootBoundary:h,altBoundary:m,padding:u}),Oi=mo?Ft?ft:lt:Ft?St:nt;Q[fo]>X[fo]&&(Oi=br(Oi));var qa=br(Oi),go=[];if(s&&go.push(Xt[xi]<=0),a&&go.push(Xt[Oi]<=0,Xt[qa]<=0),go.every(function(is){return is})){dt=Dt,Ee=!1;break}ce.set(Dt,go)}if(Ee)for(var Za=S?3:1,yd=function(Nn){var Mr=j.find(function(Ka){var _o=ce.get(Ka);if(_o)return _o.slice(0,Nn).every(function(vd){return vd})});if(Mr)return dt=Mr,"break"},Tr=Za;Tr>0;Tr--){var Ya=yd(Tr);if(Ya==="break")break}t.placement!==dt&&(t.modifiersData[i]._skip=!0,t.placement=dt,t.reset=!0)}}var om={name:"flip",enabled:!0,phase:"main",fn:hI,requiresIfExists:["offset"],data:{_skip:!1}};function mI(e,t,n){var i=_t(e),o=[lt,nt].indexOf(i)>=0?-1:1,s=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,r=s[0],a=s[1];return r=r||0,a=(a||0)*o,[lt,ft].indexOf(i)>=0?{x:a,y:r}:{x:r,y:a}}function fI(e){var t=e.state,n=e.options,i=e.name,o=n.offset,s=o===void 0?[0,0]:o,r=dd.reduce(function(p,h){return p[h]=mI(h,t.rects,s),p},{}),a=r[t.placement],c=a.x,u=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=c,t.modifiersData.popperOffsets.y+=u),t.modifiersData[i]=r}var sm={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:fI};function gI(e){var t=e.state,n=e.name;t.modifiersData[n]=Wa({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}var Lw={name:"popperOffsets",enabled:!0,phase:"read",fn:gI,data:{}};function rm(e){return e==="x"?"y":"x"}function _I(e){var t=e.state,n=e.options,i=e.name,o=n.mainAxis,s=o===void 0?!0:o,r=n.altAxis,a=r===void 0?!1:r,c=n.boundary,u=n.rootBoundary,p=n.altBoundary,h=n.padding,m=n.tether,f=m===void 0?!0:m,S=n.tetherOffset,A=S===void 0?0:S,H=ho(t,{boundary:c,rootBoundary:u,padding:h,altBoundary:p}),N=_t(t.placement),K=Ii(t.placement),q=!K,j=Ko(N),Q=rm(j),X=t.modifiersData.popperOffsets,ce=t.rects.reference,Ee=t.rects.popper,dt=typeof A=="function"?A(Object.assign({},t.rects,{placement:t.placement})):A,ot=typeof dt=="number"?{mainAxis:dt,altAxis:dt}:Object.assign({mainAxis:0,altAxis:0},dt),Dt=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,xi={x:0,y:0};if(X){if(s){var Ft,mo=j==="y"?nt:lt,fo=j==="y"?St:ft,Xt=j==="y"?"height":"width",Oi=X[j],qa=Oi+H[mo],go=Oi-H[fo],Za=f?-Ee[Xt]/2:0,yd=K===Fn?ce[Xt]:Ee[Xt],Tr=K===Fn?-Ee[Xt]:-ce[Xt],Ya=t.elements.arrow,is=f&&Ya?Yo(Ya):{width:0,height:0},Nn=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Ua(),Mr=Nn[mo],Ka=Nn[fo],_o=Qo(0,ce[Xt],is[Xt]),vd=q?ce[Xt]/2-Za-_o-Mr-ot.mainAxis:yd-_o-Mr-ot.mainAxis,r1=q?-ce[Xt]/2+Za+_o+Ka+ot.mainAxis:Tr+_o+Ka+ot.mainAxis,bd=t.elements.arrow&&Wi(t.elements.arrow),a1=bd?j==="y"?bd.clientTop||0:bd.clientLeft||0:0,bm=(Ft=Dt?.[j])!=null?Ft:0,l1=Oi+vd-bm-a1,c1=Oi+r1-bm,wm=Qo(f?Zo(qa,l1):qa,Oi,f?$i(go,c1):go);X[j]=wm,xi[j]=wm-Oi}if(a){var Cm,d1=j==="x"?nt:lt,u1=j==="x"?St:ft,yo=X[Q],Qa=Q==="y"?"height":"width",Sm=yo+H[d1],Tm=yo-H[u1],wd=[nt,lt].indexOf(N)!==-1,Mm=(Cm=Dt?.[Q])!=null?Cm:0,Dm=wd?Sm:yo-ce[Qa]-Ee[Qa]-Mm+ot.altAxis,Em=wd?yo+ce[Qa]+Ee[Qa]-Mm-ot.altAxis:Tm,Im=f&&wd?kw(Dm,yo,Em):Qo(f?Dm:Sm,yo,f?Em:Tm);X[Q]=Im,xi[Q]=Im-yo}t.modifiersData[i]=xi}}var am={name:"preventOverflow",enabled:!0,phase:"main",fn:_I,requiresIfExists:["offset"]};function lm(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function cm(e){return e===Ve(e)||!ct(e)?Jo(e):lm(e)}function yI(e){var t=e.getBoundingClientRect(),n=Pn(t.width)/e.offsetWidth||1,i=Pn(t.height)/e.offsetHeight||1;return n!==1||i!==1}function dm(e,t,n){n===void 0&&(n=!1);var i=ct(t),o=ct(t)&&yI(t),s=Tt(t),r=Ei(e,o,n),a={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(i||!i&&!n)&&((gt(t)!=="body"||es(s))&&(a=cm(t)),ct(t)?(c=Ei(t,!0),c.x+=t.clientLeft,c.y+=t.clientTop):s&&(c.x=Xo(s))),{x:r.left+a.scrollLeft-c.x,y:r.top+a.scrollTop-c.y,width:r.width,height:r.height}}function vI(e){var t=new Map,n=new Set,i=[];e.forEach(function(s){t.set(s.name,s)});function o(s){n.add(s.name);var r=[].concat(s.requires||[],s.requiresIfExists||[]);r.forEach(function(a){if(!n.has(a)){var c=t.get(a);c&&o(c)}}),i.push(s)}return e.forEach(function(s){n.has(s.name)||o(s)}),i}function um(e){var t=vI(e);return Iw.reduce(function(n,i){return n.concat(t.filter(function(o){return o.phase===i}))},[])}function pm(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function hm(e){var t=e.reduce(function(n,i){var o=n[i.name];return n[i.name]=o?Object.assign({},o,i,{options:Object.assign({},o.options,i.options),data:Object.assign({},o.data,i.data)}):i,n},{});return Object.keys(t).map(function(n){return t[n]})}var Nw={placement:"bottom",modifiers:[],strategy:"absolute"};function Vw(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function Hw(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,i=n===void 0?[]:n,o=t.defaultOptions,s=o===void 0?Nw:o;return function(a,c,u){u===void 0&&(u=s);var p={placement:"bottom",orderedModifiers:[],options:Object.assign({},Nw,s),modifiersData:{},elements:{reference:a,popper:c},attributes:{},styles:{}},h=[],m=!1,f={state:p,setOptions:function(N){var K=typeof N=="function"?N(p.options):N;A(),p.options=Object.assign({},s,p.options,K),p.scrollParents={reference:Di(a)?po(a):a.contextElement?po(a.contextElement):[],popper:po(c)};var q=um(hm([].concat(i,p.options.modifiers)));return p.orderedModifiers=q.filter(function(j){return j.enabled}),S(),f.update()},forceUpdate:function(){if(!m){var N=p.elements,K=N.reference,q=N.popper;if(Vw(K,q)){p.rects={reference:dm(K,Wi(q),p.options.strategy==="fixed"),popper:Yo(q)},p.reset=!1,p.placement=p.options.placement,p.orderedModifiers.forEach(function(ot){return p.modifiersData[ot.name]=Object.assign({},ot.data)});for(var j=0;j<p.orderedModifiers.length;j++){if(p.reset===!0){p.reset=!1,j=-1;continue}var Q=p.orderedModifiers[j],X=Q.fn,ce=Q.options,Ee=ce===void 0?{}:ce,dt=Q.name;typeof X=="function"&&(p=X({state:p,options:Ee,name:dt,instance:f})||p)}}}},update:pm(function(){return new Promise(function(H){f.forceUpdate(),H(p)})}),destroy:function(){A(),m=!0}};if(!Vw(a,c))return f;f.setOptions(u).then(function(H){!m&&u.onFirstUpdate&&u.onFirstUpdate(H)});function S(){p.orderedModifiers.forEach(function(H){var N=H.name,K=H.options,q=K===void 0?{}:K,j=H.effect;if(typeof j=="function"){var Q=j({state:p,name:N,instance:f,options:q}),X=function(){};h.push(Q||X)}})}function A(){h.forEach(function(H){return H()}),h=[]}return f}}var bI=[Pw,Lw,Fw,xw],mm=Hw({defaultModifiers:bI});var wI=["ngbDatepickerDayView",""],CI=["month"],SI=["year"];function TI(e,t){if(e&1&&(_(0,"option",3),R(1),y()),e&2){let n=t.$implicit,i=T();C("value",n),Et("aria-label",i.i18n.getMonthFullName(n,i.date.year)),g(),de(i.i18n.getMonthShortName(n,i.date.year))}}function MI(e,t){if(e&1&&(_(0,"option",3),R(1),y()),e&2){let n=t.$implicit,i=T();C("value",n),g(),de(i.i18n.getYearNumerals(n))}}function DI(e,t){if(e&1){let n=oe();_(0,"ngb-datepicker-navigation-select",6),E("select",function(o){O(n);let s=T();return k(s.select.emit(o))}),y()}if(e&2){let n=T();C("date",n.date)("disabled",n.disabled)("months",n.selectBoxes.months)("years",n.selectBoxes.years)}}function EI(e,t){e&1&&L(0,"div",7)}function II(e,t){e&1&&L(0,"div",7)}function xI(e,t){if(e&1&&(B(0,EI,1,0,"div",7),_(1,"div",8),R(2),y(),B(3,II,1,0,"div",7)),e&2){let n=t.$implicit,i=t.$index,o=T(2);Le(0,i>0?0:-1),g(2),pt(" ",o.i18n.getMonthLabel(n.firstDate)," "),g(),Le(3,i!==o.months.length-1?3:-1)}}function OI(e,t){if(e&1&&Ai(0,xI,4,3,null,null,bo),e&2){let n=T();Fi(n.months)}}function kI(e,t){if(e&1&&(_(0,"div",1),R(1),y()),e&2){let n=T(2);g(),de(n.i18n.getWeekLabel())}}function AI(e,t){if(e&1&&(_(0,"div",2),R(1),y()),e&2){let n=t.$implicit;g(),de(n)}}function FI(e,t){if(e&1&&(_(0,"div",0),B(1,kI,2,1,"div",1),Ai(2,AI,2,1,"div",2,uf),y()),e&2){let n=T();g(),Le(1,n.datepicker.showWeekNumbers?1:-1),g(),Fi(n.viewModel.weekdays)}}function PI(e,t){if(e&1&&(_(0,"div",4),R(1),y()),e&2){let n=T(2).$implicit,i=T();g(),de(i.i18n.getWeekNumerals(n.number))}}function RI(e,t){}function LI(e,t){if(e&1&&B(0,RI,0,0,"ng-template",7),e&2){let n=T().$implicit,i=T(3);C("ngTemplateOutlet",i.datepicker.dayTemplate)("ngTemplateOutletContext",n.context)}}function NI(e,t){if(e&1){let n=oe();_(0,"div",6),E("click",function(o){let s=O(n).$implicit;return T(3).doSelect(s),k(o.preventDefault())}),B(1,LI,1,2,null,7),y()}if(e&2){let n=t.$implicit;ut("disabled",n.context.disabled)("hidden",n.hidden)("ngb-dp-today",n.context.today),C("tabindex",n.tabindex),Et("aria-label",n.ariaLabel),g(),Le(1,n.hidden?-1:1)}}function VI(e,t){if(e&1&&(_(0,"div",3),B(1,PI,2,1,"div",4),Ai(2,NI,2,9,"div",5,bo),y()),e&2){let n=T().$implicit,i=T();g(),Le(1,i.datepicker.showWeekNumbers?1:-1),g(),Fi(n.days)}}function HI(e,t){if(e&1&&B(0,VI,4,1,"div",3),e&2){let n=t.$implicit;Le(0,n.collapsed?-1:0)}}var BI=["defaultDayTemplate"],GI=["content"],jI=e=>({$implicit:e});function UI(e,t){if(e&1&&L(0,"div",8),e&2){let n=t.date,i=t.currentMonth,o=t.selected,s=t.disabled,r=t.focused;C("date",n)("currentMonth",i)("selected",o)("disabled",s)("focused",r)}}function zI(e,t){if(e&1&&(_(0,"div",10),R(1),y()),e&2){let n=T().$implicit,i=T(2);g(),pt(" ",i.i18n.getMonthLabel(n.firstDate)," ")}}function $I(e,t){if(e&1&&(_(0,"div",9),B(1,zI,2,1,"div",10),L(2,"ngb-datepicker-month",11),y()),e&2){let n=t.$implicit,i=T(2);g(),Le(1,i.navigation==="none"||i.displayMonths>1&&i.navigation==="select"?1:-1),g(),C("month",n.firstDate)}}function WI(e,t){if(e&1&&Ai(0,$I,3,2,"div",9,bo),e&2){let n=T();Fi(n.model.months)}}function qI(e,t){if(e&1){let n=oe();_(0,"ngb-datepicker-navigation",12),E("navigate",function(o){O(n);let s=T();return k(s.onNavigateEvent(o))})("select",function(o){O(n);let s=T();return k(s.onNavigateDateSelect(o))}),y()}if(e&2){let n=T();C("date",n.model.firstDate)("months",n.model.months)("disabled",n.model.disabled)("showSelect",n.model.navigation==="select")("prevDisabled",n.model.prevDisabled)("nextDisabled",n.model.nextDisabled)("selectBoxes",n.model.selectBoxes)}}function ZI(e,t){}function YI(e,t){}var KI={animation:!0,transitionTimerDelayMs:5};function qi(e){return parseInt(`${e}`,10)}function Bw(e){return typeof e=="string"}function Ln(e){return!isNaN(qi(e))}function Jt(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e}function Gw(e){return Ln(e)?`0${e}`.slice(-2):""}function QI(e,t){return!t||typeof e.closest>"u"?null:e.closest(t)}var{transitionTimerDelayMs:iie}=KI;var Mt=class e{static from(t){return t instanceof e?t:t?new e(t.year,t.month,t.day):null}constructor(t,n,i){this.year=Jt(t)?t:null,this.month=Jt(n)?n:null,this.day=Jt(i)?i:null}equals(t){return t!=null&&this.year===t.year&&this.month===t.month&&this.day===t.day}before(t){return t?this.year===t.year?this.month===t.month?this.day===t.day?!1:this.day<t.day:this.month<t.month:this.year<t.year:!1}after(t){return t?this.year===t.year?this.month===t.month?this.day===t.day?!1:this.day>t.day:this.month>t.month:this.year>t.year:!1}};function jw(e){return new Mt(e.getFullYear(),e.getMonth()+1,e.getDate())}function md(e){let t=new Date(e.year,e.month-1,e.day,12);return isNaN(t.getTime())||t.setFullYear(e.year),t}function JI(){return new XI}var Sr=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=z({token:t,factory:()=>JI(),providedIn:"root"});let e=t;return e})(),XI=(()=>{let t=class t extends Sr{getDaysPerWeek(){return 7}getMonths(){return[1,2,3,4,5,6,7,8,9,10,11,12]}getWeeksPerMonth(){return 6}getNext(i,o="d",s=1){let r=md(i),a=!0,c=r.getMonth();switch(o){case"y":r.setFullYear(r.getFullYear()+s);break;case"m":c+=s,r.setMonth(c),c=c%12,c<0&&(c=c+12);break;case"d":r.setDate(r.getDate()+s),a=!1;break;default:return i}return a&&r.getMonth()!==c&&r.setDate(0),jw(r)}getPrev(i,o="d",s=1){return this.getNext(i,o,-s)}getWeekday(i){let s=md(i).getDay();return s===0?7:s}getWeekNumber(i,o){o===7&&(o=0);let s=(11-o)%7,r=i[s],a=md(r);a.setDate(a.getDate()+4-(a.getDay()||7));let c=a.getTime();return a.setMonth(0),a.setDate(1),Math.floor(Math.round((c-a.getTime())/864e5)/7)+1}getToday(){return jw(new Date)}isValid(i){if(!i||!Jt(i.year)||!Jt(i.month)||!Jt(i.day)||i.year===0)return!1;let o=md(i);return!isNaN(o.getTime())&&o.getFullYear()===i.year&&o.getMonth()+1===i.month&&o.getDate()===i.day}};t.\u0275fac=(()=>{let i;return function(s){return(i||(i=ni(t)))(s||t)}})(),t.\u0275prov=z({token:t,factory:t.\u0275fac});let e=t;return e})();function Cr(e,t){return!ex(e,t)}function qw(e,t){return!e&&!t?!1:!e||!t?!0:e.year!==t.year||e.month!==t.month}function ex(e,t){return!e&&!t||!!e&&!!t&&e.equals(t)}function tx(e,t){if(t&&e&&t.before(e))throw new Error(`'maxDate' ${t} should be greater than 'minDate' ${e}`)}function fd(e,t,n){return e&&t&&e.before(t)?t:e&&n&&e.after(n)?n:e||null}function fm(e,t){let{minDate:n,maxDate:i,disabled:o,markDisabled:s}=t;return!(e==null||o||s&&s(e,{year:e.year,month:e.month})||n&&e.before(n)||i&&e.after(i))}function ix(e,t,n,i){if(!t)return[];let o=e.getMonths(t.year);if(n&&t.year===n.year){let s=o.findIndex(r=>r===n.month);o=o.slice(s)}if(i&&t.year===i.year){let s=o.findIndex(r=>r===i.month);o=o.slice(0,s+1)}return o}function nx(e,t,n){if(!e)return[];let i=t?Math.max(t.year,e.year-500):e.year-10,s=(n?Math.min(n.year,e.year+500):e.year+10)-i+1,r=Array(s);for(let a=0;a<s;a++)r[a]=i+a;return r}function ox(e,t,n){let i=Object.assign(e.getNext(t,"m"),{day:1});return n!=null&&i.after(n)}function sx(e,t,n){let i=Object.assign(e.getPrev(t,"m"),{day:1});return n!=null&&(i.year===n.year&&i.month<n.month||i.year<n.year&&n.month===1)}function rx(e,t,n,i,o){let{displayMonths:s,months:r}=n,a=r.splice(0,r.length);return Array.from({length:s},(u,p)=>{let h=Object.assign(e.getNext(t,"m",p),{day:1});if(r[p]=null,!o){let m=a.findIndex(f=>f.firstDate.equals(h));m!==-1&&(r[p]=a.splice(m,1)[0])}return h}).forEach((u,p)=>{r[p]===null&&(r[p]=ax(e,u,n,i,a.shift()||{}))}),r}function ax(e,t,n,i,o={}){let{dayTemplateData:s,minDate:r,maxDate:a,firstDayOfWeek:c,markDisabled:u,outsideDays:p,weekdayWidth:h,weekdaysVisible:m}=n,f=e.getToday();o.firstDate=null,o.lastDate=null,o.number=t.month,o.year=t.year,o.weeks=o.weeks||[],o.weekdays=o.weekdays||[],t=lx(e,t,c),m||(o.weekdays.length=0);for(let S=0;S<e.getWeeksPerMonth();S++){let A=o.weeks[S];A||(A=o.weeks[S]={number:0,days:[],collapsed:!0});let H=A.days;for(let N=0;N<e.getDaysPerWeek();N++){S===0&&m&&(o.weekdays[N]=i.getWeekdayLabel(e.getWeekday(t),h));let K=new Mt(t.year,t.month,t.day),q=e.getNext(K),j=i.getDayAriaLabel(K),Q=!!(r&&K.before(r)||a&&K.after(a));!Q&&u&&(Q=u(K,{month:o.number,year:o.year}));let X=K.equals(f),ce=s?s(K,{month:o.number,year:o.year}):void 0;o.firstDate===null&&K.month===o.number&&(o.firstDate=K),K.month===o.number&&q.month!==o.number&&(o.lastDate=K);let Ee=H[N];Ee||(Ee=H[N]={}),Ee.date=K,Ee.context=Object.assign(Ee.context||{},{$implicit:K,date:K,data:ce,currentMonth:o.number,currentYear:o.year,disabled:Q,focused:!1,selected:!1,today:X}),Ee.tabindex=-1,Ee.ariaLabel=j,Ee.hidden=!1,t=q}A.number=e.getWeekNumber(H.map(N=>N.date),c),A.collapsed=p==="collapsed"&&H[0].date.month!==o.number&&H[H.length-1].date.month!==o.number}return o}function lx(e,t,n){let i=e.getDaysPerWeek(),o=new Mt(t.year,t.month,1),s=e.getWeekday(o)%i;return e.getPrev(o,"d",(i+s-n)%i)}var ts=(()=>{let t=class t{getMonthLabel(i){return`${this.getMonthFullName(i.month,i.year)} ${this.getYearNumerals(i.year)}`}getDayNumerals(i){return`${i.day}`}getWeekNumerals(i){return`${i}`}getYearNumerals(i){return`${i}`}getWeekLabel(){return""}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=z({token:t,factory:()=>new cx,providedIn:"root"});let e=t;return e})(),cx=(()=>{let t=class t extends ts{constructor(){super(...arguments),this._locale=F(vf),this._monthsShort=[...Array(12).keys()].map(i=>Intl.DateTimeFormat(this._locale,{month:"short"}).format(new Date(2e3,i))),this._monthsFull=[...Array(12).keys()].map(i=>Intl.DateTimeFormat(this._locale,{month:"long"}).format(new Date(2e3,i)))}getWeekdayLabel(i,o="narrow"){let s=[...Array(7).keys()].map(a=>Intl.DateTimeFormat(this._locale,{weekday:o}).format(new Date(Date.UTC(2021,5,a-1))));return s.map((a,c)=>s[(c+1)%7])[i-1]||""}getMonthShortName(i){return this._monthsShort[i-1]||""}getMonthFullName(i){return this._monthsFull[i-1]||""}getDayAriaLabel(i){let o=new Date(i.year,i.month-1,i.day);return Sf(o,"fullDate",this._locale)}};t.\u0275fac=(()=>{let i;return function(s){return(i||(i=ni(t)))(s||t)}})(),t.\u0275prov=z({token:t,factory:t.\u0275fac});let e=t;return e})(),gm=(()=>{let t=class t{constructor(){this._VALIDATORS={dayTemplateData:i=>{if(this._state.dayTemplateData!==i)return{dayTemplateData:i}},displayMonths:i=>{if(i=qi(i),Jt(i)&&i>0&&this._state.displayMonths!==i)return{displayMonths:i}},disabled:i=>{if(this._state.disabled!==i)return{disabled:i}},firstDayOfWeek:i=>{if(i=qi(i),Jt(i)&&i>=0&&this._state.firstDayOfWeek!==i)return{firstDayOfWeek:i}},focusVisible:i=>{if(this._state.focusVisible!==i&&!this._state.disabled)return{focusVisible:i}},markDisabled:i=>{if(this._state.markDisabled!==i)return{markDisabled:i}},maxDate:i=>{let o=this.toValidDate(i,null);if(Cr(this._state.maxDate,o))return{maxDate:o}},minDate:i=>{let o=this.toValidDate(i,null);if(Cr(this._state.minDate,o))return{minDate:o}},navigation:i=>{if(this._state.navigation!==i)return{navigation:i}},outsideDays:i=>{if(this._state.outsideDays!==i)return{outsideDays:i}},weekdays:i=>{let o=i===!0||i===!1?"narrow":i,s=i===!0||i===!1?i:!0;if(this._state.weekdayWidth!==o||this._state.weekdaysVisible!==s)return{weekdayWidth:o,weekdaysVisible:s}}},this._calendar=F(Sr),this._i18n=F(ts),this._model$=new Ie,this._dateSelect$=new Ie,this._state={dayTemplateData:null,markDisabled:null,maxDate:null,minDate:null,disabled:!1,displayMonths:1,firstDate:null,firstDayOfWeek:1,lastDate:null,focusDate:null,focusVisible:!1,months:[],navigation:"select",outsideDays:"visible",prevDisabled:!1,nextDisabled:!1,selectedDate:null,selectBoxes:{years:[],months:[]},weekdayWidth:"narrow",weekdaysVisible:!0}}get model$(){return this._model$.pipe(yt(i=>i.months.length>0))}get dateSelect$(){return this._dateSelect$.pipe(yt(i=>i!==null))}set(i){let o=Object.keys(i).map(s=>this._VALIDATORS[s](i[s])).reduce((s,r)=>v(v({},s),r),{});Object.keys(o).length>0&&this._nextState(o)}focus(i){let o=this.toValidDate(i,null);o!=null&&!this._state.disabled&&Cr(this._state.focusDate,o)&&this._nextState({focusDate:i})}focusSelect(){fm(this._state.focusDate,this._state)&&this.select(this._state.focusDate,{emitEvent:!0})}open(i){let o=this.toValidDate(i,this._calendar.getToday());o!=null&&!this._state.disabled&&(!this._state.firstDate||qw(this._state.firstDate,o))&&this._nextState({firstDate:o})}select(i,o={}){let s=this.toValidDate(i,null);s!=null&&!this._state.disabled&&(Cr(this._state.selectedDate,s)&&this._nextState({selectedDate:s}),o.emitEvent&&fm(s,this._state)&&this._dateSelect$.next(s))}toValidDate(i,o){let s=Mt.from(i);return o===void 0&&(o=this._calendar.getToday()),this._calendar.isValid(s)?s:o}getMonth(i){for(let o of this._state.months)if(i.month===o.number&&i.year===o.year)return o;throw new Error(`month ${i.month} of year ${i.year} not found`)}_nextState(i){let o=this._updateState(i);this._patchContexts(o),this._state=o,this._model$.next(this._state)}_patchContexts(i){let{months:o,displayMonths:s,selectedDate:r,focusDate:a,focusVisible:c,disabled:u,outsideDays:p}=i;i.months.forEach(h=>{h.weeks.forEach(m=>{m.days.forEach(f=>{a&&(f.context.focused=a.equals(f.date)&&c),f.tabindex=!u&&a&&f.date.equals(a)&&a.month===h.number?0:-1,u===!0&&(f.context.disabled=!0),r!==void 0&&(f.context.selected=r!==null&&r.equals(f.date)),h.number!==f.date.month&&(f.hidden=p==="hidden"||p==="collapsed"||s>1&&f.date.after(o[0].firstDate)&&f.date.before(o[s-1].lastDate))})})})}_updateState(i){let o=Object.assign({},this._state,i),s=o.firstDate;if(("minDate"in i||"maxDate"in i)&&(tx(o.minDate,o.maxDate),o.focusDate=fd(o.focusDate,o.minDate,o.maxDate),o.firstDate=fd(o.firstDate,o.minDate,o.maxDate),s=o.focusDate),"disabled"in i&&(o.focusVisible=!1),"selectedDate"in i&&this._state.months.length===0&&(s=o.selectedDate),"focusVisible"in i||"focusDate"in i&&(o.focusDate=fd(o.focusDate,o.minDate,o.maxDate),s=o.focusDate,o.months.length!==0&&o.focusDate&&!o.focusDate.before(o.firstDate)&&!o.focusDate.after(o.lastDate)))return o;if("firstDate"in i&&(o.firstDate=fd(o.firstDate,o.minDate,o.maxDate),s=o.firstDate),s){let r="dayTemplateData"in i||"firstDayOfWeek"in i||"markDisabled"in i||"minDate"in i||"maxDate"in i||"disabled"in i||"outsideDays"in i||"weekdaysVisible"in i,a=rx(this._calendar,s,o,this._i18n,r);o.months=a,o.firstDate=a[0].firstDate,o.lastDate=a[a.length-1].lastDate,"selectedDate"in i&&!fm(o.selectedDate,o)&&(o.selectedDate=null),"firstDate"in i&&(!o.focusDate||o.focusDate.before(o.firstDate)||o.focusDate.after(o.lastDate))&&(o.focusDate=s);let c=!this._state.firstDate||this._state.firstDate.year!==o.firstDate.year,u=!this._state.firstDate||this._state.firstDate.month!==o.firstDate.month;o.navigation==="select"?(("minDate"in i||"maxDate"in i||o.selectBoxes.years.length===0||c)&&(o.selectBoxes.years=nx(o.firstDate,o.minDate,o.maxDate)),("minDate"in i||"maxDate"in i||o.selectBoxes.months.length===0||c)&&(o.selectBoxes.months=ix(this._calendar,o.firstDate,o.minDate,o.maxDate))):o.selectBoxes={years:[],months:[]},(o.navigation==="arrows"||o.navigation==="select")&&(u||c||"minDate"in i||"maxDate"in i||"disabled"in i)&&(o.prevDisabled=o.disabled||sx(this._calendar,o.firstDate,o.minDate),o.nextDisabled=o.disabled||ox(this._calendar,o.lastDate,o.maxDate))}return o}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=z({token:t,factory:t.\u0275fac});let e=t;return e})(),_d=function(e){return e[e.PREV=0]="PREV",e[e.NEXT=1]="NEXT",e}(_d||{}),_m=(()=>{let t=class t{constructor(){this.displayMonths=1,this.firstDayOfWeek=1,this.navigation="select",this.outsideDays="visible",this.showWeekNumbers=!1,this.weekdays="narrow"}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function dx(){return new ux}var ym=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=z({token:t,factory:()=>dx(),providedIn:"root"});let e=t;return e})(),ux=(()=>{let t=class t extends ym{fromModel(i){return i&&Jt(i.year)&&Jt(i.month)&&Jt(i.day)?{year:i.year,month:i.month,day:i.day}:null}toModel(i){return i&&Jt(i.year)&&Jt(i.month)&&Jt(i.day)?{year:i.year,month:i.month,day:i.day}:null}};t.\u0275fac=(()=>{let i;return function(s){return(i||(i=ni(t)))(s||t)}})(),t.\u0275prov=z({token:t,factory:t.\u0275fac});let e=t;return e})(),px=(()=>{let t=class t{processKey(i,o){let{state:s,calendar:r}=o;switch(i.key){case"PageUp":o.focusDate(r.getPrev(s.focusedDate,i.shiftKey?"y":"m",1));break;case"PageDown":o.focusDate(r.getNext(s.focusedDate,i.shiftKey?"y":"m",1));break;case"End":o.focusDate(i.shiftKey?s.maxDate:s.lastDate);break;case"Home":o.focusDate(i.shiftKey?s.minDate:s.firstDate);break;case"ArrowLeft":o.focusDate(r.getPrev(s.focusedDate,"d",1));break;case"ArrowUp":o.focusDate(r.getPrev(s.focusedDate,"d",r.getDaysPerWeek()));break;case"ArrowRight":o.focusDate(r.getNext(s.focusedDate,"d",1));break;case"ArrowDown":o.focusDate(r.getNext(s.focusedDate,"d",r.getDaysPerWeek()));break;case"Enter":case" ":o.focusSelect();break;default:return}i.preventDefault(),i.stopPropagation()}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),hx=(()=>{let t=class t{constructor(){this.i18n=F(ts)}isMuted(){return!this.selected&&(this.date.month!==this.currentMonth||this.disabled)}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=ee({type:t,selectors:[["","ngbDatepickerDayView",""]],hostAttrs:[1,"btn-light"],hostVars:10,hostBindings:function(o,s){o&2&&ut("bg-primary",s.selected)("text-white",s.selected)("text-muted",s.isMuted())("outside",s.isMuted())("active",s.focused)},inputs:{currentMonth:"currentMonth",date:"date",disabled:"disabled",focused:"focused",selected:"selected"},standalone:!0,features:[ae],attrs:wI,decls:1,vars:1,template:function(o,s){o&1&&R(0),o&2&&de(s.i18n.getDayNumerals(s.date))},styles:[`[ngbDatepickerDayView]{text-align:center;width:2rem;height:2rem;line-height:2rem;border-radius:.25rem;background:transparent}[ngbDatepickerDayView]:hover:not(.bg-primary),[ngbDatepickerDayView].active:not(.bg-primary){background-color:var(--bs-tertiary-bg);outline:1px solid var(--bs-border-color)}[ngbDatepickerDayView].outside{opacity:.5}
`],encapsulation:2,changeDetection:0});let e=t;return e})(),mx=(()=>{let t=class t{constructor(){this._month=-1,this._year=-1,this.i18n=F(ts),this.select=new $}changeMonth(i){this.select.emit(new Mt(this.date.year,qi(i),1))}changeYear(i){this.select.emit(new Mt(qi(i),this.date.month,1))}ngAfterViewChecked(){this.date&&(this.date.month!==this._month&&(this._month=this.date.month,this.monthSelect.nativeElement.value=`${this._month}`),this.date.year!==this._year&&(this._year=this.date.year,this.yearSelect.nativeElement.value=`${this._year}`))}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=ee({type:t,selectors:[["ngb-datepicker-navigation-select"]],viewQuery:function(o,s){if(o&1&&(xt(CI,7,He),xt(SI,7,He)),o&2){let r;pe(r=he())&&(s.monthSelect=r.first),pe(r=he())&&(s.yearSelect=r.first)}},inputs:{date:"date",disabled:"disabled",months:"months",years:"years"},outputs:{select:"select"},standalone:!0,features:[ae],decls:8,vars:2,consts:()=>{let i;i=$localize`:@@ngb.datepicker.select-month:Select month`;let o;o=$localize`:@@ngb.datepicker.select-month:Select month`;let s;s=$localize`:@@ngb.datepicker.select-year:Select year`;let r;return r=$localize`:@@ngb.datepicker.select-year:Select year`,[["month",""],["year",""],["aria-label",i,"title",o,1,"form-select",3,"change","disabled"],[3,"value"],["aria-label",s,"title",r,1,"form-select",3,"change","disabled"]]},template:function(o,s){if(o&1){let r=oe();_(0,"select",2,0),E("change",function(c){return O(r),k(s.changeMonth(c.target.value))}),Ai(2,TI,2,3,"option",3,bo),y(),_(4,"select",4,1),E("change",function(c){return O(r),k(s.changeYear(c.target.value))}),Ai(6,MI,2,2,"option",3,bo),y()}o&2&&(C("disabled",s.disabled),g(2),Fi(s.months),g(2),C("disabled",s.disabled),g(2),Fi(s.years))},styles:[`ngb-datepicker-navigation-select>.form-select{flex:1 1 auto;padding:0 .5rem;font-size:.875rem;height:1.85rem}ngb-datepicker-navigation-select>.form-select:focus{z-index:1}ngb-datepicker-navigation-select>.form-select::-ms-value{background-color:transparent!important}
`],encapsulation:2,changeDetection:0});let e=t;return e})(),fx=(()=>{let t=class t{constructor(){this.navigation=_d,this.i18n=F(ts),this.months=[],this.navigate=new $,this.select=new $}onClickPrev(i){i.currentTarget.focus(),this.navigate.emit(this.navigation.PREV)}onClickNext(i){i.currentTarget.focus(),this.navigate.emit(this.navigation.NEXT)}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=ee({type:t,selectors:[["ngb-datepicker-navigation"]],inputs:{date:"date",disabled:"disabled",months:"months",showSelect:"showSelect",prevDisabled:"prevDisabled",nextDisabled:"nextDisabled",selectBoxes:"selectBoxes"},outputs:{navigate:"navigate",select:"select"},standalone:!0,features:[ae],decls:8,vars:4,consts:()=>{let i;i=$localize`:@@ngb.datepicker.previous-month:Previous month`;let o;o=$localize`:@@ngb.datepicker.previous-month:Previous month`;let s;s=$localize`:@@ngb.datepicker.next-month:Next month`;let r;return r=$localize`:@@ngb.datepicker.next-month:Next month`,[[1,"ngb-dp-arrow","ngb-dp-arrow-prev"],["type","button","aria-label",i,"title",o,1,"btn","btn-link","ngb-dp-arrow-btn",3,"click","disabled"],[1,"ngb-dp-navigation-chevron"],[1,"ngb-dp-navigation-select",3,"date","disabled","months","years"],[1,"ngb-dp-arrow","ngb-dp-arrow-next"],["type","button","aria-label",s,"title",r,1,"btn","btn-link","ngb-dp-arrow-btn",3,"click","disabled"],[1,"ngb-dp-navigation-select",3,"select","date","disabled","months","years"],[1,"ngb-dp-arrow"],[1,"ngb-dp-month-name"]]},template:function(o,s){o&1&&(_(0,"div",0)(1,"button",1),E("click",function(a){return s.onClickPrev(a)}),L(2,"span",2),y()(),B(3,DI,1,4,"ngb-datepicker-navigation-select",3)(4,OI,2,0),_(5,"div",4)(6,"button",5),E("click",function(a){return s.onClickNext(a)}),L(7,"span",2),y()()),o&2&&(g(),C("disabled",s.prevDisabled),g(2),Le(3,s.showSelect?3:-1),g(),Le(4,s.showSelect?-1:4),g(2),C("disabled",s.nextDisabled))},dependencies:[mx],styles:[`ngb-datepicker-navigation{display:flex;align-items:center}.ngb-dp-navigation-chevron{border-style:solid;border-width:.2em .2em 0 0;display:inline-block;width:.75em;height:.75em;margin-left:.25em;margin-right:.15em;transform:rotate(-135deg)}.ngb-dp-arrow{display:flex;flex:1 1 auto;padding-right:0;padding-left:0;margin:0;width:2rem;height:2rem}.ngb-dp-arrow-next{justify-content:flex-end}.ngb-dp-arrow-next .ngb-dp-navigation-chevron{transform:rotate(45deg);margin-left:.15em;margin-right:.25em}.ngb-dp-arrow-btn{padding:0 .25rem;margin:0 .5rem;border:none;background-color:transparent;z-index:1}.ngb-dp-arrow-btn:focus{outline-width:1px;outline-style:auto}@media all and (-ms-high-contrast: none),(-ms-high-contrast: active){.ngb-dp-arrow-btn:focus{outline-style:solid}}.ngb-dp-month-name{font-size:larger;height:2rem;line-height:2rem;text-align:center}.ngb-dp-navigation-select{display:flex;flex:1 1 9rem}
`],encapsulation:2,changeDetection:0});let e=t;return e})(),gx=(()=>{let t=class t{constructor(){this.templateRef=F(Oe)}};t.\u0275fac=function(o){return new(o||t)},t.\u0275dir=ye({type:t,selectors:[["ng-template","ngbDatepickerContent",""]],standalone:!0});let e=t;return e})(),_x=(()=>{let t=class t{constructor(){this._keyboardService=F(px),this._service=F(gm),this.i18n=F(ts),this.datepicker=F(Zw)}set month(i){this.viewModel=this._service.getMonth(i)}onKeyDown(i){this._keyboardService.processKey(i,this.datepicker)}doSelect(i){!i.context.disabled&&!i.hidden&&this.datepicker.onDateSelect(i.date)}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=ee({type:t,selectors:[["ngb-datepicker-month"]],hostAttrs:["role","grid"],hostBindings:function(o,s){o&1&&E("keydown",function(a){return s.onKeyDown(a)})},inputs:{month:"month"},standalone:!0,features:[ae],decls:3,vars:1,consts:[["role","row",1,"ngb-dp-week","ngb-dp-weekdays"],[1,"ngb-dp-weekday","ngb-dp-showweek","small"],["role","columnheader",1,"ngb-dp-weekday","small"],["role","row",1,"ngb-dp-week"],[1,"ngb-dp-week-number","small","text-muted"],["role","gridcell",1,"ngb-dp-day",3,"disabled","tabindex","hidden","ngb-dp-today"],["role","gridcell",1,"ngb-dp-day",3,"click","tabindex"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(o,s){o&1&&(B(0,FI,4,1,"div",0),Ai(1,HI,1,1,null,null,bo)),o&2&&(Le(0,s.viewModel.weekdays.length>0?0:-1),g(),Fi(s.viewModel.weeks))},dependencies:[_s],styles:[`ngb-datepicker-month{display:block}.ngb-dp-weekday,.ngb-dp-week-number{line-height:2rem;text-align:center;font-style:italic}.ngb-dp-weekday{color:var(--bs-info)}.ngb-dp-week{border-radius:.25rem;display:flex}.ngb-dp-weekdays{border-bottom:1px solid var(--bs-border-color);border-radius:0;background-color:var(--bs-tertiary-bg)}.ngb-dp-day,.ngb-dp-weekday,.ngb-dp-week-number{width:2rem;height:2rem}.ngb-dp-day{cursor:pointer}.ngb-dp-day.disabled,.ngb-dp-day.hidden{cursor:default;pointer-events:none}.ngb-dp-day[tabindex="0"]{z-index:1}
`],encapsulation:2});let e=t;return e})(),Zw=(()=>{let t=class t{constructor(){this.injector=F(Zi),this._service=F(gm),this._calendar=F(Sr),this._i18n=F(ts),this._config=F(_m),this._nativeElement=F(He).nativeElement,this._ngbDateAdapter=F(ym),this._ngZone=F(st),this._destroyRef=F(tl),this._controlValue=null,this._publicState={},this.dayTemplate=this._config.dayTemplate,this.dayTemplateData=this._config.dayTemplateData,this.displayMonths=this._config.displayMonths,this.firstDayOfWeek=this._config.firstDayOfWeek,this.footerTemplate=this._config.footerTemplate,this.markDisabled=this._config.markDisabled,this.maxDate=this._config.maxDate,this.minDate=this._config.minDate,this.navigation=this._config.navigation,this.outsideDays=this._config.outsideDays,this.showWeekNumbers=this._config.showWeekNumbers,this.startDate=this._config.startDate,this.weekdays=this._config.weekdays,this.navigate=new $,this.dateSelect=new $,this.onChange=o=>{},this.onTouched=()=>{};let i=F(Lt);this._service.dateSelect$.pipe(Ba()).subscribe(o=>{this.dateSelect.emit(o)}),this._service.model$.pipe(Ba()).subscribe(o=>{let s=o.firstDate,r=this.model?this.model.firstDate:null;this._publicState={maxDate:o.maxDate,minDate:o.minDate,firstDate:o.firstDate,lastDate:o.lastDate,focusedDate:o.focusDate,months:o.months.map(h=>h.firstDate)};let a=!1;if(!s.equals(r)&&(this.navigate.emit({current:r?{year:r.year,month:r.month}:null,next:{year:s.year,month:s.month},preventDefault:()=>a=!0}),a&&r!==null)){this._service.open(r);return}let c=o.selectedDate,u=o.focusDate,p=this.model?this.model.focusDate:null;this.model=o,Cr(c,this._controlValue)&&(this._controlValue=c,this.onTouched(),this.onChange(this._ngbDateAdapter.toModel(c))),Cr(u,p)&&p&&o.focusVisible&&this.focus(),i.markForCheck()})}get state(){return this._publicState}get calendar(){return this._calendar}get i18n(){return this._i18n}focusDate(i){this._service.focus(Mt.from(i))}focusSelect(){this._service.focusSelect()}focus(){this._ngZone.onStable.asObservable().pipe(Vn(1)).subscribe(()=>this._nativeElement.querySelector('div.ngb-dp-day[tabindex="0"]')?.focus())}navigateTo(i){this._service.open(Mt.from(i?i.day?i:G(v({},i),{day:1}):null))}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{let i=jt(this._contentEl.nativeElement,"focusin"),o=jt(this._contentEl.nativeElement,"focusout");ns(i,o).pipe(yt(s=>{let r=s.target,a=s.relatedTarget;return!(r?.classList.contains("ngb-dp-day")&&a?.classList.contains("ngb-dp-day")&&this._nativeElement.contains(r)&&this._nativeElement.contains(a))}),Ba(this._destroyRef)).subscribe(({type:s})=>this._ngZone.run(()=>this._service.set({focusVisible:s==="focusin"})))})}ngOnInit(){if(this.model===void 0){let i={};["dayTemplateData","displayMonths","markDisabled","firstDayOfWeek","navigation","minDate","maxDate","outsideDays","weekdays"].forEach(o=>i[o]=this[o]),this._service.set(i),this.navigateTo(this.startDate)}this.dayTemplate||(this.dayTemplate=this._defaultDayTemplate)}ngOnChanges(i){let o={};if(["dayTemplateData","displayMonths","markDisabled","firstDayOfWeek","navigation","minDate","maxDate","outsideDays","weekdays"].filter(s=>s in i).forEach(s=>o[s]=this[s]),this._service.set(o),"startDate"in i){let{currentValue:s,previousValue:r}=i.startDate;qw(r,s)&&this.navigateTo(this.startDate)}}onDateSelect(i){this._service.focus(i),this._service.select(i,{emitEvent:!0})}onNavigateDateSelect(i){this._service.open(i)}onNavigateEvent(i){switch(i){case _d.PREV:this._service.open(this._calendar.getPrev(this.model.firstDate,"m",1));break;case _d.NEXT:this._service.open(this._calendar.getNext(this.model.firstDate,"m",1));break}}registerOnChange(i){this.onChange=i}registerOnTouched(i){this.onTouched=i}setDisabledState(i){this._service.set({disabled:i})}writeValue(i){this._controlValue=Mt.from(this._ngbDateAdapter.fromModel(i)),this._service.select(this._controlValue)}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=ee({type:t,selectors:[["ngb-datepicker"]],contentQueries:function(o,s,r){if(o&1&&It(r,gx,7),o&2){let a;pe(a=he())&&(s.contentTemplateFromContent=a.first)}},viewQuery:function(o,s){if(o&1&&(xt(BI,7),xt(GI,7)),o&2){let r;pe(r=he())&&(s._defaultDayTemplate=r.first),pe(r=he())&&(s._contentEl=r.first)}},hostVars:2,hostBindings:function(o,s){o&2&&ut("disabled",s.model.disabled)},inputs:{contentTemplate:"contentTemplate",dayTemplate:"dayTemplate",dayTemplateData:"dayTemplateData",displayMonths:"displayMonths",firstDayOfWeek:"firstDayOfWeek",footerTemplate:"footerTemplate",markDisabled:"markDisabled",maxDate:"maxDate",minDate:"minDate",navigation:"navigation",outsideDays:"outsideDays",showWeekNumbers:"showWeekNumbers",startDate:"startDate",weekdays:"weekdays"},outputs:{navigate:"navigate",dateSelect:"dateSelect"},exportAs:["ngbDatepicker"],standalone:!0,features:[yi([{provide:zi,useExisting:ii(()=>t),multi:!0},gm]),Ut,ae],decls:10,vars:9,consts:[["defaultDayTemplate",""],["defaultContentTemplate",""],["content",""],[1,"ngb-dp-header"],[3,"date","months","disabled","showSelect","prevDisabled","nextDisabled","selectBoxes"],[1,"ngb-dp-content"],[3,"ngTemplateOutlet","ngTemplateOutletContext","ngTemplateOutletInjector"],[3,"ngTemplateOutlet"],["ngbDatepickerDayView","",3,"date","currentMonth","selected","disabled","focused"],[1,"ngb-dp-month"],[1,"ngb-dp-month-name"],[3,"month"],[3,"navigate","select","date","months","disabled","showSelect","prevDisabled","nextDisabled","selectBoxes"]],template:function(o,s){if(o&1&&(B(0,UI,1,5,"ng-template",null,0,si)(2,WI,2,0,"ng-template",null,1,si),_(4,"div",3),B(5,qI,1,7,"ngb-datepicker-navigation",4),y(),_(6,"div",5,2),B(8,ZI,0,0,"ng-template",6),y(),B(9,YI,0,0,"ng-template",7)),o&2){let r=Ne(3);g(5),Le(5,s.navigation!=="none"?5:-1),g(),ut("ngb-dp-months",!s.contentTemplate),g(2),C("ngTemplateOutlet",s.contentTemplate||(s.contentTemplateFromContent==null?null:s.contentTemplateFromContent.templateRef)||r)("ngTemplateOutletContext",oi(7,jI,s))("ngTemplateOutletInjector",s.injector),g(),C("ngTemplateOutlet",s.footerTemplate)}},dependencies:[_s,hx,_x,fx],styles:[`ngb-datepicker{border:1px solid var(--bs-border-color);border-radius:.25rem;display:inline-block}ngb-datepicker-month{pointer-events:auto}ngb-datepicker.dropdown-menu{padding:0}ngb-datepicker.disabled .ngb-dp-weekday,ngb-datepicker.disabled .ngb-dp-week-number,ngb-datepicker.disabled .ngb-dp-month-name{color:var(--bs-text-muted)}.ngb-dp-body{z-index:1055}.ngb-dp-header{border-bottom:0;border-radius:.25rem .25rem 0 0;padding-top:.25rem;background-color:var(--bs-tertiary-bg)}.ngb-dp-months{display:flex}.ngb-dp-month{pointer-events:none}.ngb-dp-month-name{font-size:larger;height:2rem;line-height:2rem;text-align:center;background-color:var(--bs-tertiary-bg)}.ngb-dp-month+.ngb-dp-month .ngb-dp-month-name,.ngb-dp-month+.ngb-dp-month .ngb-dp-week{padding-left:1rem}.ngb-dp-month:last-child .ngb-dp-week{padding-right:.25rem}.ngb-dp-month:first-child .ngb-dp-week{padding-left:.25rem}.ngb-dp-month .ngb-dp-week:last-child{padding-bottom:.25rem}
`],encapsulation:2,changeDetection:0});let e=t;return e})(),gd=(e,t)=>t?t.some(n=>n.contains(e)):!1,Uw=(e,t)=>!t||QI(e,t)!=null,yx=(()=>{let e=()=>/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2,t=()=>/Android/.test(navigator.userAgent);return typeof navigator<"u"?!!navigator.userAgent&&(e()||t()):!1})(),vx=e=>yx?()=>setTimeout(()=>e(),100):e;function bx(e,t,n,i,o,s,r,a){n&&e.runOutsideAngular(vx(()=>{let c=m=>{let f=m.target;return m.button===2||gd(f,r)?!1:n==="inside"?gd(f,s)&&Uw(f,a):n==="outside"?!gd(f,s):Uw(f,a)||!gd(f,s)},u=jt(t,"keydown").pipe(Qe(o),yt(m=>m.key==="Escape"),Je(m=>m.preventDefault())),p=jt(t,"mousedown").pipe(re(c),Qe(o)),h=jt(t,"mouseup").pipe(Xa(p),yt(([m,f])=>f),Gm(0),Qe(o));Nm([u.pipe(re(m=>0)),h.pipe(re(m=>1))]).subscribe(m=>e.run(()=>i(m)))}))}var wx=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function Cx(e){let t=Array.from(e.querySelectorAll(wx)).filter(n=>n.tabIndex!==-1);return[t[0],t[t.length-1]]}var Sx=(e,t,n,i=!1)=>{e.runOutsideAngular(()=>{let o=jt(t,"focusin").pipe(Qe(n),re(s=>s.target));jt(t,"keydown").pipe(Qe(n),yt(s=>s.key==="Tab"),Xa(o)).subscribe(([s,r])=>{let[a,c]=Cx(t);(r===a||r===t)&&s.shiftKey&&(c.focus(),s.preventDefault()),r===c&&!s.shiftKey&&(a.focus(),s.preventDefault())}),i&&jt(t,"click").pipe(Qe(n),Xa(o),re(s=>s[1])).subscribe(s=>s.focus())})},Tx=(()=>{let t=class t{constructor(){this._element=F(We).documentElement}isRTL(){return(this._element.getAttribute("dir")||"").toLowerCase()==="rtl"}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),Mx=/\s+/,Dx=/  +/gi,Ex={top:["top"],bottom:["bottom"],start:["left","right"],left:["left"],end:["right","left"],right:["right"],"top-start":["top-start","top-end"],"top-left":["top-start"],"top-end":["top-end","top-start"],"top-right":["top-end"],"bottom-start":["bottom-start","bottom-end"],"bottom-left":["bottom-start"],"bottom-end":["bottom-end","bottom-start"],"bottom-right":["bottom-end"],"start-top":["left-start","right-start"],"left-top":["left-start"],"start-bottom":["left-end","right-end"],"left-bottom":["left-end"],"end-top":["right-start","left-start"],"right-top":["right-start"],"end-bottom":["right-end","left-end"],"right-bottom":["right-end"]};function Ix(e,t){let[n,i]=Ex[e];return t&&i||n}var xx=/^left/,Ox=/^right/,kx=/^start/,Ax=/^end/;function Fx(e,t){let[n,i]=t.split("-"),o=n.replace(xx,"start").replace(Ox,"end"),s=[o];if(i){let r=i;(n==="left"||n==="right")&&(r=r.replace(kx,"top").replace(Ax,"bottom")),s.push(`${o}-${r}`)}return e&&(s=s.map(r=>`${e}-${r}`)),s.join(" ")}function zw({placement:e,baseClass:t},n){let i=Array.isArray(e)?e:e.split(Mx),o=["top","bottom","start","end","top-start","top-end","bottom-start","bottom-end","start-top","start-bottom","end-top","end-bottom"],s=i.findIndex(u=>u==="auto");s>=0&&o.forEach(function(u){i.find(p=>p.search("^"+u)!==-1)==null&&i.splice(s++,1,u)});let r=i.map(u=>Ix(u,n.isRTL()));return{placement:r.shift(),modifiers:[{name:"bootstrapClasses",enabled:!!t,phase:"write",fn({state:u}){let p=new RegExp(t+"(-[a-z]+)*","gi"),h=u.elements.popper,m=u.placement,f=h.className;f=f.replace(p,""),f+=` ${Fx(t,m)}`,f=f.trim().replace(Dx," "),h.className=f}},om,am,Xh,{enabled:!0,name:"flip",options:{fallbackPlacements:r}},{enabled:!0,name:"preventOverflow",phase:"main",fn:function(){}}]}}function $w(e){return e}function Px(){let e=F(Tx),t=null;return{createPopper(n){if(!t){let o=(n.updatePopperOptions||$w)(zw(n,e));t=mm(n.hostElement,n.targetElement,o)}},update(){t&&t.update()},setOptions(n){if(t){let o=(n.updatePopperOptions||$w)(zw(n,e));t.setOptions(o)}},destroy(){t&&(t.destroy(),t=null)}}}function Rx(){return new Lx}var Yw=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=z({token:t,factory:()=>Rx(),providedIn:"root"});let e=t;return e})(),Lx=(()=>{let t=class t extends Yw{parse(i){if(i!=null){let o=i.trim().split("-");if(o.length===1&&Ln(o[0]))return{year:qi(o[0]),month:null,day:null};if(o.length===2&&Ln(o[0])&&Ln(o[1]))return{year:qi(o[0]),month:qi(o[1]),day:null};if(o.length===3&&Ln(o[0])&&Ln(o[1])&&Ln(o[2]))return{year:qi(o[0]),month:qi(o[1]),day:qi(o[2])}}return null}format(i){return i?`${i.year}-${Ln(i.month)?Gw(i.month):""}-${Ln(i.day)?Gw(i.day):""}`:""}};t.\u0275fac=(()=>{let i;return function(s){return(i||(i=ni(t)))(s||t)}})(),t.\u0275prov=z({token:t,factory:t.\u0275fac});let e=t;return e})(),Ww=(()=>{let t=class t extends _m{constructor(){super(...arguments),this.autoClose=!0,this.placement=["bottom-start","bottom-end","top-start","top-end"],this.popperOptions=i=>i,this.restoreFocus=!0}};t.\u0275fac=(()=>{let i;return function(s){return(i||(i=ni(t)))(s||t)}})(),t.\u0275prov=z({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function Nx(e){return t=>(t.modifiers.push(sm,{name:"offset",options:{offset:()=>e}}),t)}var Kw=(()=>{let t=class t{constructor(){this._parserFormatter=F(Yw),this._elRef=F(He),this._vcRef=F(nl),this._ngZone=F(st),this._calendar=F(Sr),this._dateAdapter=F(ym),this._document=F(We),this._changeDetector=F(Lt),this._config=F(Ww),this._cRef=null,this._disabled=!1,this._elWithFocus=null,this._model=null,this._positioning=Px(),this._destroyCloseHandlers$=new Ie,this.autoClose=this._config.autoClose,this.placement=this._config.placement,this.popperOptions=this._config.popperOptions,this.container=this._config.container,this.positionTarget=this._config.positionTarget,this.dateSelect=new $,this.navigate=new $,this.closed=new $,this._onChange=i=>{},this._onTouched=()=>{},this._validatorChange=()=>{}}get disabled(){return this._disabled}set disabled(i){this._disabled=i===""||i&&i!=="false",this.isOpen()&&this._cRef.instance.setDisabledState(this._disabled)}registerOnChange(i){this._onChange=i}registerOnTouched(i){this._onTouched=i}registerOnValidatorChange(i){this._validatorChange=i}setDisabledState(i){this.disabled=i}validate(i){let{value:o}=i;if(o!=null){let s=this._fromDateStruct(this._dateAdapter.fromModel(o));if(!s)return{ngbDate:{invalid:o}};if(this.minDate&&s.before(Mt.from(this.minDate)))return{ngbDate:{minDate:{minDate:this.minDate,actual:o}}};if(this.maxDate&&s.after(Mt.from(this.maxDate)))return{ngbDate:{maxDate:{maxDate:this.maxDate,actual:o}}}}return null}writeValue(i){this._model=this._fromDateStruct(this._dateAdapter.fromModel(i)),this._writeModelValue(this._model)}manualDateChange(i,o=!1){let s=i!==this._inputValue;s&&(this._inputValue=i,this._model=this._fromDateStruct(this._parserFormatter.parse(i))),(s||!o)&&this._onChange(this._model?this._dateAdapter.toModel(this._model):i===""?null:i),o&&this._model&&this._writeModelValue(this._model)}isOpen(){return!!this._cRef}open(){if(!this.isOpen()){this._cRef=this._vcRef.createComponent(Zw),this._applyPopupStyling(this._cRef.location.nativeElement),this._applyDatepickerInputs(this._cRef),this._subscribeForDatepickerOutputs(this._cRef.instance),this._cRef.instance.ngOnInit(),this._cRef.instance.writeValue(this._dateAdapter.toModel(this._model)),this._cRef.instance.registerOnChange(o=>{this.writeValue(o),this._onChange(o),this._onTouched()}),this._cRef.changeDetectorRef.detectChanges(),this._cRef.instance.setDisabledState(this.disabled),this.container==="body"&&this._document.querySelector(this.container)?.appendChild(this._cRef.location.nativeElement),this._elWithFocus=this._document.activeElement,Sx(this._ngZone,this._cRef.location.nativeElement,this.closed,!0),setTimeout(()=>this._cRef?.instance.focus());let i;if(Bw(this.positionTarget)?i=this._document.querySelector(this.positionTarget):this.positionTarget instanceof HTMLElement?i=this.positionTarget:i=this._elRef.nativeElement,this.positionTarget&&!i)throw new Error("ngbDatepicker could not find element declared in [positionTarget] to position against.");this._ngZone.runOutsideAngular(()=>{this._cRef&&i&&(this._positioning.createPopper({hostElement:i,targetElement:this._cRef.location.nativeElement,placement:this.placement,updatePopperOptions:o=>this.popperOptions(Nx([0,2])(o))}),this._zoneSubscription=this._ngZone.onStable.subscribe(()=>this._positioning.update()))}),this._setCloseHandlers()}}close(){if(this.isOpen()){this._cRef?.destroy(),this._cRef=null,this._positioning.destroy(),this._zoneSubscription?.unsubscribe(),this._destroyCloseHandlers$.next(),this.closed.emit(),this._changeDetector.markForCheck();let i=this._elWithFocus;Bw(this.restoreFocus)?i=this._document.querySelector(this.restoreFocus):this.restoreFocus!==void 0&&(i=this.restoreFocus),i&&i.focus?i.focus():this._document.body.focus()}}toggle(){this.isOpen()?this.close():this.open()}navigateTo(i){this.isOpen()&&this._cRef.instance.navigateTo(i)}onBlur(){this._onTouched()}onFocus(){this._elWithFocus=this._elRef.nativeElement}ngOnChanges(i){if((i.minDate||i.maxDate)&&(this._validatorChange(),this.isOpen()&&(i.minDate&&this._cRef.setInput("minDate",this.minDate),i.maxDate&&this._cRef.setInput("maxDate",this.maxDate))),i.datepickerClass){let{currentValue:o,previousValue:s}=i.datepickerClass;this._applyPopupClass(o,s)}i.autoClose&&this.isOpen()&&this._setCloseHandlers()}ngOnDestroy(){this.close()}_applyDatepickerInputs(i){["contentTemplate","dayTemplate","dayTemplateData","displayMonths","firstDayOfWeek","footerTemplate","markDisabled","minDate","maxDate","navigation","outsideDays","showNavigation","showWeekNumbers","weekdays"].forEach(o=>{this[o]!==void 0&&i.setInput(o,this[o])}),i.setInput("startDate",this.startDate||this._model)}_applyPopupClass(i,o){let s=this._cRef?.location.nativeElement;s&&(i&&s.classList.add(i),o&&s.classList.remove(o))}_applyPopupStyling(i){i.classList.add("dropdown-menu","show"),this.container==="body"&&i.classList.add("ngb-dp-body"),this._applyPopupClass(this.datepickerClass)}_subscribeForDatepickerOutputs(i){i.navigate.subscribe(o=>this.navigate.emit(o)),i.dateSelect.subscribe(o=>{this.dateSelect.emit(o),(this.autoClose===!0||this.autoClose==="inside")&&this.close()})}_writeModelValue(i){let o=this._parserFormatter.format(i);this._inputValue=o,this._elRef.nativeElement.value=o,this.isOpen()&&(this._cRef.instance.writeValue(this._dateAdapter.toModel(i)),this._onTouched())}_fromDateStruct(i){let o=i?new Mt(i.year,i.month,i.day):null;return this._calendar.isValid(o)?o:null}_setCloseHandlers(){this._destroyCloseHandlers$.next(),bx(this._ngZone,this._document,this.autoClose,()=>this.close(),this._destroyCloseHandlers$,[],[this._elRef.nativeElement,this._cRef.location.nativeElement])}};t.\u0275fac=function(o){return new(o||t)},t.\u0275dir=ye({type:t,selectors:[["input","ngbDatepicker",""]],hostVars:1,hostBindings:function(o,s){o&1&&E("input",function(a){return s.manualDateChange(a.target.value)})("change",function(a){return s.manualDateChange(a.target.value,!0)})("focus",function(){return s.onFocus()})("blur",function(){return s.onBlur()}),o&2&&pf("disabled",s.disabled)},inputs:{autoClose:"autoClose",contentTemplate:"contentTemplate",datepickerClass:"datepickerClass",dayTemplate:"dayTemplate",dayTemplateData:"dayTemplateData",displayMonths:"displayMonths",firstDayOfWeek:"firstDayOfWeek",footerTemplate:"footerTemplate",markDisabled:"markDisabled",minDate:"minDate",maxDate:"maxDate",navigation:"navigation",outsideDays:"outsideDays",placement:"placement",popperOptions:"popperOptions",restoreFocus:"restoreFocus",showWeekNumbers:"showWeekNumbers",startDate:"startDate",container:"container",positionTarget:"positionTarget",weekdays:"weekdays",disabled:"disabled"},outputs:{dateSelect:"dateSelect",navigate:"navigate",closed:"closed"},exportAs:["ngbDatepicker"],standalone:!0,features:[yi([{provide:zi,useExisting:ii(()=>t),multi:!0},{provide:Uh,useExisting:ii(()=>t),multi:!0},{provide:_m,useExisting:Ww}]),Ut]});let e=t;return e})();var nie=new Date(1882,10,12),oie=new Date(2174,10,25);var sie=1e3*60*60*24;var vm=1080,Vx=24*vm,Hx=12*vm+793,rie=29*Vx+Hx,aie=11*vm+204;var Qw=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=Rt({type:t}),t.\u0275inj=Pt({});let e=t;return e})();var lie=new xe("live announcer delay",{providedIn:"root",factory:()=>100});function Gx(e,t){if(e&1){let n=oe();L(0,"hr",11),_(1,"button",12),E("click",function(){O(n);let o=T(),s=Ne(4);return o.setToday(),k(s.close())}),R(2,"Today"),y(),_(3,"button",13),E("click",function(){O(n);let o=T(),s=Ne(4);return o.clearDate(),k(s.close())}),R(4,"Clear"),y()}}var Jw=(()=>{let t=class t{constructor(){this.today=F(Sr).getToday(),this.dateValue=null,this.classInput="",this.dateValueChanged=new $}ngOnInit(){let i=new Date;this.minDate={year:i.getFullYear()-300,month:1,day:1}}clearDate(){this.dateValue=null,this.dateValueChanged.emit(this.dateValue)}setToday(){this.dateValue=this.today,this.dateValueChanged.emit(this.dateValue)}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=ee({type:t,selectors:[["app-datepicker"]],inputs:{dateValue:"dateValue",classInput:"classInput"},outputs:{dateValueChanged:"dateValueChanged"},standalone:!0,features:[ae],decls:12,vars:4,consts:[["cal",""],["dtpickr","ngbDatepicker"],["btn",""],["footerTemplt",""],[1,"col-12"],[1,"input-group"],["placeholder","yyyy-mm-dd","name","dp","ngbDatepicker","","placement","top","container","body","autoClose","true",1,"form-control",3,"ngModelChange","ngClass","ngModel","footerTemplate","minDate"],["title","Toggle Calender","type","button",1,"btn","btn-sm","btn-outline-secondary",3,"click"],[1,"fa-regular","fa-calendar-days"],["title","Clear",1,"btn","btn-sm","btn-outline-secondary",3,"click"],[1,"fa-solid","fa-xmark"],[1,"my-0"],["title","Today",1,"btn","btn-primary","btn-sm","m-2","float-start",3,"click"],["title","Clear",1,"btn","btn-secondary","btn-sm","m-2","float-end",3,"click"]],template:function(o,s){if(o&1){let r=oe();_(0,"div",4,0)(2,"div",5)(3,"input",6,1),tt("ngModelChange",function(c){return O(r),et(s.dateValue,c)||(s.dateValue=c),k(c)}),E("ngModelChange",function(){O(r);let c=Ne(4);return s.dateValueChanged.emit(s.dateValue),k(c.close())}),y(),_(5,"button",7,2),E("click",function(){O(r);let c=Ne(4);return k(c.toggle())}),L(7,"i",8),y(),_(8,"button",9),E("click",function(){O(r);let c=Ne(4);return s.clearDate(),k(c.close())}),L(9,"i",10),y()()(),B(10,Gx,5,0,"ng-template",null,3,si)}if(o&2){let r=Ne(11);g(3),C("ngClass",s.classInput),Xe("ngModel",s.dateValue),C("footerTemplate",r)("minDate",s.minDate)}},dependencies:[Qw,Kw,mt,Mi,Qt,Bt,ve,zt],styles:[`.ngb-dp-today{background:#ee784e}
`],encapsulation:2});let e=t;return e})();var Xw=(()=>{let t=class t{constructor(i){this.mapService=i,this.subscription=new un,this.title="Filter Field",this.tooltip="Filter Field",this.selectedItemsChanged=new $,this.Value1=null,this.Value2=null,this.value2Ok=null,this.DELIMITER="-"}ngOnInit(){this.subscription=this.mapService.resetPlatformFilters$.subscribe(i=>{i==!0&&(this.Value1=null,this.Value2=null)})}setValue1(i){this.Value1=i,this.applyFilter()}setValue2(i){this.Value2=i,this.applyFilter()}resetValues(){this.Value1=null,this.Value2=null,this.resetFilter()}applyFilter(){this.value2Ok=!0;let i="";if(this.Value1!=null&&this.Value2==null)i=">= "+this.toModel(this.Value1);else if(this.Value1!=null&&this.Value2!=null){let o=new Mt(this.Value1.year,this.Value1.month,this.Value1.day);new Mt(this.Value2.year,this.Value2.month,this.Value2.day).before(o)?this.value2Ok=!1:(this.value2Ok=!0,i="between "+this.toModel(this.Value1)+" AND "+this.toModel(this.Value2))}else this.Value1==null&&this.Value2!=null&&(i="<= "+this.toModel(this.Value2));i.length>0?this.selectedItemsChanged.emit(i):this.resetFilter()}resetFilter(){this.selectedItemsChanged.emit(null)}toModel(i){let o=i?"'"+i.year.toString().padStart(4,"0")+this.DELIMITER+i.month.toString().padStart(2,"0")+this.DELIMITER+i.day.toString().padStart(2,"0")+"'":null;return o?"date "+o:null}ngOnDestroy(){this.subscription.unsubscribe()}};t.\u0275fac=function(o){return new(o||t)(V(Ti))},t.\u0275cmp=ee({type:t,selectors:[["app-date-filter"]],inputs:{title:"title",tooltip:"tooltip"},outputs:{selectedItemsChanged:"selectedItemsChanged"},standalone:!0,features:[ae],decls:10,vars:7,consts:[[1,"d-flex"],[2,"align-self","center",3,"title"],["title","Clear Filter",1,"ms-auto","no-border","rounded-0","btn","btn-sm",3,"click","disabled"],[1,"fa-solid","fa-filter-circle-xmark","text-primary"],["title","value for filter",1,"rangeControls","mt-2","d-flex","gap-2"],[1,"d-grid","gap-2"],["title","Date1",3,"dateValueChanged","dateValue"],[3,"dateValueChanged","dateValue","title","classInput"]],template:function(o,s){o&1&&(_(0,"div")(1,"div",0)(2,"h6",1),R(3),y(),_(4,"button",2),E("click",function(){return s.setValue1(null),s.setValue2(null)}),L(5,"i",3),y()(),_(6,"div",4)(7,"div",5)(8,"app-datepicker",6),E("dateValueChanged",function(a){return s.setValue1(a)}),y(),_(9,"app-datepicker",7),E("dateValueChanged",function(a){return s.setValue2(a)}),y()()()()),o&2&&(g(2),C("title",s.tooltip),g(),de(s.title),g(),C("disabled",s.Value1==null&&s.Value2==null),g(4),C("dateValue",s.Value1),g(),C("dateValue",s.Value2)("title",s.value2Ok==!1?"Invalid Data. Checks: Date2 > Date1":"Date2")("classInput",s.value2Ok==!1?"data-invalid":""))},dependencies:[ve,mt,Jw],encapsulation:2});let e=t;return e})();var e1=(()=>{let t=class t{constructor(i){this.mapService=i,this.subscription=new un,this.title="Filter Field",this.tooltip="Filter Field",this.selectedItemsChanged=new $,this.Value1=null,this.Value2=null,this.value2Ok=null,this.filterApplied=!1}ngOnInit(){this.subscription=this.mapService.resetPlatformFilters$.subscribe(i=>{i==!0&&this.clearValues()})}clearValues(){this.Value1=null,this.Value2=null,this.filterApplied=!1}applyFilter(){this.filterApplied=!0,this.value2Ok=!0;let i="";this.Value1!=null&&this.Value2==null?i=">= "+this.Value1:this.Value1!=null&&this.Value2!=null?this.Value1>this.Value2?this.value2Ok=!1:(this.value2Ok=!0,i="between "+this.Value1+" AND "+this.Value2):this.Value1==null&&this.Value2!=null?i="<= "+this.Value2:this.filterApplied=!1,i.length>0?this.selectedItemsChanged.emit(i):this.resetFilter()}resetFilter(){this.selectedItemsChanged.emit(null)}ngOnDestroy(){this.subscription.unsubscribe()}};t.\u0275fac=function(o){return new(o||t)(V(Ti))},t.\u0275cmp=ee({type:t,selectors:[["app-simple-numeric-filter"]],inputs:{title:"title",tooltip:"tooltip"},outputs:{selectedItemsChanged:"selectedItemsChanged"},standalone:!0,features:[ae],decls:10,vars:7,consts:[["v1",""],["v2",""],[1,"d-flex"],[2,"align-content","center",3,"title"],["title","Clear Filter",1,"ms-auto","no-border","rounded-0","btn","btn-sm",3,"click","disabled"],[1,"fa-solid","fa-filter-circle-xmark","text-primary"],["title","value for filter",1,"rangeControls","mt-2","d-flex","gap-2"],["placeholder","Value1","title","Value1","type","number",1,"form-control",3,"ngModelChange","keydown.enter","blur","ngModel"],["placeholder","Value2","type","number",1,"form-control",3,"ngModelChange","keydown.enter","blur","ngModel","title","ngClass"]],template:function(o,s){if(o&1){let r=oe();_(0,"div",2)(1,"span",3),R(2),y(),_(3,"button",4),E("click",function(){return O(r),s.clearValues(),k(s.applyFilter())}),L(4,"i",5),y()(),_(5,"div",6)(6,"input",7,0),tt("ngModelChange",function(c){return O(r),et(s.Value1,c)||(s.Value1=c),k(c)}),E("keydown.enter",function(){O(r);let c=Ne(7);return k(c.blur())})("blur",function(){return O(r),k(s.applyFilter())}),y(),_(8,"input",8,1),tt("ngModelChange",function(c){return O(r),et(s.Value2,c)||(s.Value2=c),k(c)}),E("keydown.enter",function(){O(r);let c=Ne(9);return k(c.blur())})("blur",function(){return O(r),k(s.applyFilter())}),y()()}o&2&&(g(),C("title",s.tooltip),g(),de(s.title),g(),C("disabled",s.Value1==null&&s.Value2==null||!s.filterApplied),g(3),Xe("ngModel",s.Value1),g(2),Xe("ngModel",s.Value2),C("title",s.value2Ok==!1?"Invalid Data. Checks: Value2 > Value1":"Value2")("ngClass",s.value2Ok==!1?"data-invalid":""))},dependencies:[ve,zt,mt,Mi,$o,Qt,Bt]});let e=t;return e})();var t1=(()=>{let t=class t{constructor(i){this.mapService=i,this.subscription=new un,this.subscriptionP=new un,this.title="Filter Field",this.tooltip="Filter Field",this.LayerType=w.None,this.selectedItemsChanged=new $,this.Value=null,this.filterApplied=!1}ngOnInit(){this.subscription=this.mapService.resetPlatformFilters$.subscribe(i=>{i==!0&&this.LayerType==w.PlatformLayer&&this.clearValues()}),this.subscriptionP=this.mapService.resetPipelineFilters$.subscribe(i=>{i==!0&&this.LayerType==w.PipelineLayer&&this.clearValues()})}clearValues(){this.Value=null,this.filterApplied=!1}applyFilter(){this.filterApplied=!0;let i="";this.Value!=null?i="= "+this.Value:this.filterApplied=!1,i.length>0?this.selectedItemsChanged.emit(i):this.resetFilter()}resetFilter(){this.selectedItemsChanged.emit(null)}ngOnDestroy(){this.subscription.unsubscribe(),this.subscriptionP.unsubscribe()}};t.\u0275fac=function(o){return new(o||t)(V(Ti))},t.\u0275cmp=ee({type:t,selectors:[["app-numeric-equal-filter"]],inputs:{title:"title",tooltip:"tooltip",LayerType:"LayerType"},outputs:{selectedItemsChanged:"selectedItemsChanged"},standalone:!0,features:[ae],decls:8,vars:4,consts:[["v1",""],[1,"d-flex"],[2,"align-content","center",3,"title"],["title","Clear Filter",1,"ms-auto","no-border","rounded-0","btn","btn-sm",3,"click","disabled"],[1,"fa-solid","fa-filter-circle-xmark","text-primary"],["title","value for filter",1,"rangeControls","mt-2","d-flex","gap-2"],["placeholder","Value","title","Value","type","number",1,"form-control",3,"ngModelChange","keydown.enter","blur","ngModel"]],template:function(o,s){if(o&1){let r=oe();_(0,"div",1)(1,"span",2),R(2),y(),_(3,"button",3),E("click",function(){return O(r),s.clearValues(),k(s.applyFilter())}),L(4,"i",4),y()(),_(5,"div",5)(6,"input",6,0),tt("ngModelChange",function(c){return O(r),et(s.Value,c)||(s.Value=c),k(c)}),E("keydown.enter",function(){O(r);let c=Ne(7);return k(c.blur())})("blur",function(){return O(r),k(s.applyFilter())}),y()()}o&2&&(g(),C("title",s.tooltip),g(),de(s.title),g(),C("disabled",s.Value==null||!s.filterApplied),g(3),Xe("ngModel",s.Value))},dependencies:[ve,mt,Mi,$o,Qt,Bt]});let e=t;return e})();var i1=(()=>{let t=class t{constructor(){this.valueField="text",this.displayField="text",this.selectedItemsChanged=new $}onSelectionChanged(i){this.selectedItemsChanged.emit(i)}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=ee({type:t,selectors:[["app-single-select"]],inputs:{tooltip:"tooltip",title:"title",options:"options",selectedItem:"selectedItem",valueField:"valueField",displayField:"displayField"},outputs:{selectedItemsChanged:"selectedItemsChanged"},standalone:!0,features:[ae],decls:5,vars:6,consts:[[1,"row"],[1,"col-4","pe-0",2,"align-self","center",3,"title"],[1,"col-8","ps-0"],["placeholder","select",3,"ngModelChange","items","bindLabel","bindValue","ngModel"]],template:function(o,s){o&1&&(_(0,"div",0)(1,"h6",1),R(2),y(),_(3,"div",2)(4,"ng-select",3),tt("ngModelChange",function(a){return et(s.selectedItem,a)||(s.selectedItem=a),a}),E("ngModelChange",function(a){return s.onSelectionChanged(a)}),y()()()),o&2&&(g(),C("title",s.tooltip),g(),de(s.title),g(2),C("items",s.options)("bindLabel",s.displayField)("bindValue",s.valueField),Xe("ngModel",s.selectedItem))},dependencies:[Mw,Tw,ve,mt,Qt,Bt]});let e=t;return e})();var n1=(e,t)=>({"fa-eye-slash":e,"fa-eye":t});function jx(e,t){e&1&&L(0,"i",24)}function Ux(e,t){e&1&&L(0,"i",25)}function zx(e,t){if(e&1){let n=oe();_(0,"div",26)(1,"div",27)(2,"input",28),tt("ngModelChange",function(o){O(n);let s=T();return et(s.showBSEEPlatforms,o)||(s.showBSEEPlatforms=o),k(o)}),E("ngModelChange",function(){O(n);let o=T();return k(o.toggleBSEEPlatformLayer())}),y(),_(3,"label",29),R(4,"BSEE Platforms"),y()(),_(5,"div",30)(6,"div",31)(7,"div",32),R(8," Platform Filters "),_(9,"button",33),E("click",function(){O(n);let o=T();return k(o.clearPlatformFilters())}),L(10,"i",34),y(),_(11,"button",35),E("click",function(){O(n);let o=T();return k(o.downloadFilteredPlatforms())}),L(12,"i",36),y(),_(13,"button",37),L(14,"i",38),y()()(),_(15,"div",39)(16,"div")(17,"div",40)(18,"span",41),R(19,"Status"),y(),_(20,"button",1),E("click",function(){O(n);let o=T();return k(o.setPlatformStatus(o.PlatformStatusEnum.Active))}),R(21,"Active"),y(),_(22,"button",1),E("click",function(){O(n);let o=T();return k(o.setPlatformStatus(o.PlatformStatusEnum.Removed))}),R(23,"Removed"),y()()(),L(24,"hr",42),_(25,"app-dropdown-filter",43),E("selectedItemsChanged",function(o){O(n);let s=T();return k(s.OnAreaFilterChanged(o))}),y(),L(26,"hr",42),_(27,"app-dropdown-filter",44),E("selectedItemsChanged",function(o){O(n);let s=T();return k(s.OnBlockNumberFilterChanged(o))}),y(),L(28,"hr",42),_(29,"app-dropdown-filter",45),E("selectedItemsChanged",function(o){O(n);let s=T();return k(s.OnBSEEOperatorFilterChanged(o))}),y(),L(30,"hr",42),_(31,"app-dropdown-filter",46),E("selectedItemsChanged",function(o){O(n);let s=T();return k(s.OniSIMSOperatorFilterChanged(o))}),y(),L(32,"hr",42),_(33,"app-dropdown-filter",47),E("selectedItemsChanged",function(o){O(n);let s=T();return k(s.OnPlatformNameFilterChanged(o))}),y(),L(34,"hr",42),_(35,"app-simple-numeric-filter",48),E("selectedItemsChanged",function(o){O(n);let s=T();return k(s.OnWDFilterChanged(o))}),y(),L(36,"hr",42),_(37,"app-numeric-equal-filter",49),E("selectedItemsChanged",function(o){O(n);let s=T();return k(s.OnCPXIDFilterChanged(o))}),y(),L(38,"hr",42),_(39,"app-date-filter",50),E("selectedItemsChanged",function(o){O(n);let s=T();return k(s.OnInstallDateChanged(o))}),y(),L(40,"hr",42),_(41,"app-date-filter",51),E("selectedItemsChanged",function(o){O(n);let s=T();return k(s.OnRemovalDateChanged(o))}),y()()()()}if(e&2){let n=T();g(2),Xe("ngModel",n.showBSEEPlatforms),g(7),C("disabled",!n.hasLayerFilters.PlatformLayer),g(11),C("ngClass",n.platformStatus.includes(n.PlatformStatusEnum.Active)?"btn-primary":"btn-outline-primary"),g(2),C("ngClass",n.platformStatus.includes(n.PlatformStatusEnum.Removed)?"btn-primary":"btn-outline-primary"),g(3),C("options",n.areaCodes)("selectedItems",n.platformFilterResetItems),g(2),C("options",n.blockNumbers)("selectedItems",n.platformFilterResetItems),g(2),C("options",n.bseeOperators)("selectedItems",n.platformFilterResetItems),g(2),C("options",n.iSIMSOperators)("selectedItems",n.platformFilterResetItems),g(2),C("options",n.platformNames)("selectedItems",n.platformFilterResetItems),g(4),C("LayerType",n.LayerOrWidgetEnum.PlatformLayer)}}function $x(e,t){if(e&1&&(_(0,"li",52),R(1),y()),e&2){let n=t.$implicit;g(),de(n.Name)}}function Wx(e,t){e&1&&L(0,"i",24)}function qx(e,t){e&1&&L(0,"i",25)}function Zx(e,t){if(e&1){let n=oe();_(0,"app-dropdown-filter",63),E("selectedItemsChanged",function(o){O(n);let s=T(2);return k(s.OnHConeAdvisoryFilterChanged(o))}),y()}if(e&2){let n=T(2);C("options",n.coneAdvisory)("selectedItems",n.hurricaneFilterResetItems)}}function Yx(e,t){if(e&1){let n=oe();_(0,"div",26)(1,"div",30)(2,"div",31)(3,"div"),R(4," Historic Hurricanes "),_(5,"button",53),E("click",function(){O(n);let o=T();return k(o.clearHurricaneFilters())}),L(6,"i",34),y()()(),_(7,"div",39)(8,"app-dropdown-filter",54),E("selectedItemsChanged",function(o){O(n);let s=T();return k(s.OnHurricaneYearsFilterChanged(o))}),y(),L(9,"hr",42),_(10,"app-dropdown-filter",55),E("selectedItemsChanged",function(o){O(n);let s=T();return k(s.OnHurricaneNamesFilterChanged(o))}),y(),_(11,"div",56)(12,"div",57)(13,"input",58),tt("ngModelChange",function(o){O(n);let s=T();return et(s.showHH_Track,o)||(s.showHH_Track=o),k(o)}),E("ngModelChange",function(){O(n);let o=T();return k(o.toggleShowHH_Track())}),y(),_(14,"label",59),R(15,"Track"),y()(),_(16,"div",57)(17,"input",60),tt("ngModelChange",function(o){O(n);let s=T();return et(s.showHH_Cones,o)||(s.showHH_Cones=o),k(o)}),E("ngModelChange",function(){O(n);let o=T();return k(o.toggleShowHH_Cone())}),y(),_(18,"label",61),R(19,"Cones"),y()()(),B(20,Zx,1,2,"app-dropdown-filter",62),y()()()}if(e&2){let n=T();g(5),C("disabled",!n.hasLayerFilters.HistoricHurricaneTrackLayer),g(3),C("options",n.hurricaneYears)("selectedItems",n.hurricaneFilterResetItems),g(2),C("options",n.hurricaneNames)("selectedItems",n.hurricaneFilterResetItems),g(3),Xe("ngModel",n.showHH_Track),g(4),C("disabled",n.coneAdvisory.length<1),Xe("ngModel",n.showHH_Cones),g(3),C("ngIf",n.coneAdvisory.length>0)}}function Kx(e,t){e&1&&L(0,"i",24)}function Qx(e,t){e&1&&L(0,"i",25)}function Jx(e,t){if(e&1){let n=oe();_(0,"div")(1,"i",67),E("click",function(){let o=O(n).$implicit,s=T(3);return k(s.toggleShowFHlayer(o))}),y(),R(2),y()}if(e&2){let n=t.$implicit;g(),C("ngClass",ms(2,n1,!n.isVisible,n.isVisible)),g(),pt("",n.name," ")}}function Xx(e,t){if(e&1&&(_(0,"div",39),B(1,Jx,3,5,"div",66),y()),e&2){let n=T(2);g(),C("ngForOf",n.fhSubLayers)}}function eO(e,t){if(e&1&&(_(0,"div",26)(1,"div",30)(2,"div",31)(3,"div",64),R(4," Layers "),y()(),B(5,Xx,2,1,"div",65),y()()),e&2){let n=T();g(5),C("ngIf",n.showFH)}}function tO(e,t){e&1&&L(0,"i",24)}function iO(e,t){e&1&&L(0,"i",25)}function nO(e,t){if(e&1){let n=oe();_(0,"div")(1,"i",67),E("click",function(){let o=O(n).$implicit,s=T(2);return k(s.toggleShowRHlayer(o))}),y(),R(2),y()}if(e&2){let n=t.$implicit;g(),C("ngClass",ms(2,n1,!n.isVisible,n.isVisible)),g(),pt("",n.name," ")}}function oO(e,t){if(e&1){let n=oe();_(0,"div",26)(1,"div",30)(2,"div",31)(3,"div"),R(4," Recent Hurricanes Filters "),_(5,"button",53),E("click",function(){O(n);let o=T();return k(o.clearRHFilters())}),L(6,"i",34),y()()(),_(7,"div",39)(8,"app-dropdown-filter",55),E("selectedItemsChanged",function(o){O(n);let s=T();return k(s.OnRHNamesFilterChanged(o))}),y(),B(9,nO,3,5,"div",66),y()()()}if(e&2){let n=T();g(5),C("disabled",!n.hasLayerFilters.RecentHGroupLayer),g(3),C("options",n.rHurricaneNames)("selectedItems",n.recentHFilterResetItems),g(),C("ngForOf",n.rhSubLayers)}}function sO(e,t){e&1&&L(0,"i",24)}function rO(e,t){e&1&&L(0,"i",25)}function aO(e,t){if(e&1){let n=oe();_(0,"div",26)(1,"div",30)(2,"div",31)(3,"div"),R(4," Pipeline Filters "),_(5,"button",33),E("click",function(){O(n);let o=T();return k(o.clearPipelineFilters())}),L(6,"i",34),y()()(),_(7,"div",39)(8,"app-dropdown-filter",68),E("selectedItemsChanged",function(o){O(n);let s=T();return k(s.OnPipelineOperatorFilterChanged(o))}),y(),L(9,"hr",42),_(10,"app-dropdown-filter",69),E("selectedItemsChanged",function(o){O(n);let s=T();return k(s.OnStatusCodeFilterChanged(o))}),y(),L(11,"hr",42),_(12,"app-numeric-equal-filter",70),E("selectedItemsChanged",function(o){O(n);let s=T();return k(s.OnSegmentNumFilterChanged(o))}),y()()()()}if(e&2){let n=T();g(5),C("disabled",!n.hasLayerFilters.PipelineLayer),g(3),C("options",n.pipelineOperators)("selectedItems",n.pipelineFilterResetItems),g(2),C("options",n.pipelineStatusCodes)("selectedItems",n.pipelineFilterResetItems),g(2),C("LayerType",n.LayerOrWidgetEnum.PipelineLayer)}}var o1=(()=>{let t=class t{constructor(i){this.mapService=i,this.PlatformStatusEnum=Oh,this.LayerOrWidgetEnum=w,this.showBlocks=!1,this.showArea=!1,this.showPlatforms=!0,this.showBSEEPlatforms=!1,this.platformStatus=[],this.showHurricaneUI=!1,this.showRecentHurricane=!1,this.showPipelines=!1,this.showHH_Track=!1,this.showHH_Cones=!1,this.showFH=!1,this.areaCodes=[],this.blockNumbers=[],this.bseeOperators=[],this.iSIMSOperators=[],this.platformNames=[],this.platformFilterResetItems=[],this.pipelineFilterResetItems=[],this.hurricaneFilterResetItems=[]=[],this.recentHFilterResetItems=[]=[],this.hurricaneYears=[],this.hurricaneNames=[],this.pipelineOperators=[],this.pipelineStatusCodes=[],this.coneAdvisory=[],this.rHurricaneNames=[],this.fhSubLayers=[],this.rhSubLayers=[],this.hasLayerFilters={[w.PlatformLayer]:!1,[w.HistoricHurricaneTrackLayer]:!1,[w.BSEEPlatformLayer]:!1,[w.Legend]:!1,[w.AreaLayer]:!1,[w.BLockLayer]:!1,[w.None]:!1,[w.PipelineLayer]:!1,[w.HHConeLayer]:!1,[w.ForecastGroupLayer]:!1,[w.ForecastSubLayer0]:!1,[w.ForecastSubLayer1]:!1,[w.ForecastSubLayer2]:!1,[w.ForecastSubLayer3]:!1,[w.ForecastSubLayer4]:!1,[w.ForecastSubLayer5]:!1,[w.ForecastSubLayer7]:!1,[w.ForecastSubLayer8]:!1,[w.ForecastSubLayer9]:!1,[w.ForecastSubLayer10]:!1,[w.ForecastSubLayer11]:!1,[w.ForecastSubLayerAll]:!1,[w.Sketch]:!1,[w.RecentHGroupLayer]:!1,[w.RecentHSubLayer0]:!1,[w.RecentHSubLayer1]:!1,[w.RecentHSubLayer2]:!1,[w.Measurement]:!1},this.resultSet=[],this.shapeOptions=["circle","square","cross","x","diamond","triangle","path"],this.selectedShape=null,this.selectedName=null,this.selectedColor="#0d6efd",this.selectedSize=4,this.selectedResultSet=null,i.setMapFilters$.subscribe(o=>{if(o==null)return;let s=o.details.size>0;o.layerOrWidget==w.PlatformLayer?this.hasLayerFilters.PlatformLayer=s:o.layerOrWidget==w.HistoricHurricaneTrackLayer?this.hasLayerFilters.HistoricHurricaneTrackLayer=s:o.layerOrWidget==w.HHConeLayer?this.hasLayerFilters.HHConeLayer=s:o.layerOrWidget==w.PipelineLayer?this.hasLayerFilters.PipelineLayer=s:o.layerOrWidget==w.RecentHGroupLayer&&(this.hasLayerFilters.RecentHGroupLayer=s)}),i.filterListFromMap$.subscribe(o=>{switch(o.type){case D.Area_Code:this.areaCodes=o.value;break;case D.Block_Number:this.blockNumbers=o.value;break;case D.Bus_Asc_Name:this.bseeOperators=o.value;break;case D.operatorName:this.iSIMSOperators=o.value;break;case D.platformName:this.platformNames=o.value;break;case D.HurricaneYear:this.hurricaneYears=o.value;break;case D.HurricaneName:this.hurricaneNames=o.value;break;case D.PipelineOperator:this.pipelineOperators=o.value;break;case D.PipelineStatusCode:this.pipelineStatusCodes=o.value;break;case D.HConeAdvisory:this.coneAdvisory=o.value;let s=this.showHH_Cones;this.showHH_Cones=this.showHH_Cones&&this.coneAdvisory.length>0,s!=this.showHH_Cones&&this.toggleShowHH_Cone();break;case D.RH_STORMNAME:this.rHurricaneNames=o.value;break;default:break}}),i.hLayerListFromMap$.subscribe(o=>{o&&(o?.layerOrWidget==w.ForecastGroupLayer&&(this.fhSubLayers=o.detailedList),o?.layerOrWidget==w.RecentHGroupLayer&&(this.rhSubLayers=o.detailedList))})}toggleBlockLayer(){this.showBlocks=!this.showBlocks,this.mapService.ShowHideLayersOrWidgets({type:w.BLockLayer,visible:this.showBlocks})}toggleAreaLayer(){this.showArea=!this.showArea,this.mapService.ShowHideLayersOrWidgets({type:w.AreaLayer,visible:this.showArea})}togglePlatformLayer(){this.showPlatforms=!this.showPlatforms,this.mapService.ShowHideLayersOrWidgets({type:w.PlatformLayer,visible:this.showPlatforms})}toggleBSEEPlatformLayer(){this.mapService.ShowHideLayersOrWidgets({type:w.BSEEPlatformLayer,visible:this.showBSEEPlatforms})}setPlatformStatus(i){this.platformStatus.includes(i)?this.platformStatus.splice(this.platformStatus.indexOf(i),1):this.platformStatus.push(i),this.mapService.setMapFilterValue(D.ActiveStatus,this.platformStatus)}clearPlatformFilters(){this.platformStatus=[],this.mapService.clearPlatformFilters(),this.platformFilterResetItems=[]}downloadFilteredPlatforms(){this.mapService.downloadFilteredData(w.PlatformLayer)}OnAreaFilterChanged(i){var o=i;this.mapService.setMapFilterValue(D.Area_Code,o.map(s=>s.value))}OnBlockNumberFilterChanged(i){var o=i;this.mapService.setMapFilterValue(D.Block_Number,o.map(s=>s.value))}OnBSEEOperatorFilterChanged(i){var o=i;this.mapService.setMapFilterValue(D.Bus_Asc_Name,o.map(s=>s.value))}OniSIMSOperatorFilterChanged(i){var o=i;this.mapService.setMapFilterValue(D.operatorName,o.map(s=>s.value))}OnPlatformNameFilterChanged(i){var o=i;this.mapService.setMapFilterValue(D.platformName,o.map(s=>s.value))}OnWDFilterChanged(i){i==null||i.length==0?this.mapService.setMapFilterValue(D.Water_Depth__feet_,[]):this.mapService.setMapFilterValue(D.Water_Depth__feet_,i)}OnCPXIDFilterChanged(i){i==null||i.length==0?this.mapService.setMapFilterValue(D.Complex_Id_Num,[]):this.mapService.setMapFilterValue(D.Complex_Id_Num,i)}OnInstallDateChanged(i){i==null||i.length==0?this.mapService.setMapFilterValue(D.Install_Date,[]):this.mapService.setMapFilterValue(D.Install_Date,i)}OnRemovalDateChanged(i){i==null||i.length==0?this.mapService.setMapFilterValue(D.Removal_Date,[]):this.mapService.setMapFilterValue(D.Removal_Date,i)}clearHurricaneFilters(){this.mapService.clearHurricaneFilters(),this.hurricaneFilterResetItems=[]}OnHurricaneYearsFilterChanged(i){var o=i;this.mapService.setMapFilterValue(D.HurricaneYear,o.map(s=>s.value))}OnHurricaneNamesFilterChanged(i){var o=i;this.mapService.setMapFilterValue(D.HurricaneName,o.map(s=>s.value))}OnRHNamesFilterChanged(i){var o=i;this.mapService.setMapFilterValue(D.RH_STORMNAME,o.map(s=>s.value))}toggleShowHH_Track(){this.mapService.ShowHideLayersOrWidgets({type:w.HistoricHurricaneTrackLayer,visible:this.showHH_Track})}toggleShowHH_Cone(){this.mapService.ShowHideLayersOrWidgets({type:w.HHConeLayer,visible:this.showHH_Cones})}OnHConeAdvisoryFilterChanged(i){var o=i;this.mapService.setMapFilterValue(D.HConeAdvisory,o.map(s=>s.value))}toggleShowFH(){this.showFH=!this.showFH,this.mapService.ShowHideLayersOrWidgets({type:w.ForecastGroupLayer,visible:this.showFH})}toggleShowFHlayer(i){i.isVisible=!i.isVisible;let s="ForecastSubLayer"+i.id;this.mapService.ShowHideLayersOrWidgets({type:w[s],visible:i.isVisible})}toggleRecentHLayer(){this.showRecentHurricane=!this.showRecentHurricane,this.mapService.ShowHideLayersOrWidgets({type:w.RecentHGroupLayer,visible:this.showRecentHurricane})}toggleShowRHlayer(i){i.isVisible=!i.isVisible;let s="RecentHSubLayer"+i.id;this.mapService.ShowHideLayersOrWidgets({type:w[s],visible:i.isVisible})}clearRHFilters(){this.mapService.clearRHFilters(),this.recentHFilterResetItems=[]}togglePipelineLayer(){this.showPipelines=!this.showPipelines,this.mapService.ShowHideLayersOrWidgets({type:w.PipelineLayer,visible:this.showPipelines})}clearPipelineFilters(){this.mapService.clearPipelineFilters(),this.pipelineFilterResetItems=[]}OnPipelineOperatorFilterChanged(i){var o=i;this.mapService.setMapFilterValue(D.PipelineOperator,o.map(s=>s.value))}OnStatusCodeFilterChanged(i){var o=i;this.mapService.setMapFilterValue(D.PipelineStatusCode,o.map(s=>s.value))}OnSegmentNumFilterChanged(i){i==null||i.length==0?this.mapService.setMapFilterValue(D.PipelineSegmentNumber,[]):this.mapService.setMapFilterValue(D.PipelineSegmentNumber,i)}shapeSelectionChanged(i){this.selectedShape=i}SaveResultSet(){let i={Color:this.selectedColor!=null?this.selectedColor:"#0d6efd",Shape:this.selectedShape!=null?this.selectedShape:"circle",Size:this.selectedSize!=null?this.selectedSize:4,Name:this.selectedName!=null?this.selectedName:"defaultSet",Index:0};this.selectedResultSet!=null?(i.Index=this.selectedResultSet.Index,this.selectedResultSet=i,this.resultSet.splice(this.selectedResultSet.Index,1,i)):(i.Index=this.resultSet.length,this.resultSet.push(i))}};t.\u0275fac=function(o){return new(o||t)(V(Ti))},t.\u0275cmp=ee({type:t,selectors:[["app-side-panel"]],standalone:!0,features:[ae],decls:65,vars:24,consts:[[1,"d-grid","gap-2"],["type","button",1,"rounded-0","btn","btn-sm",3,"click","ngClass"],[1,"d-grid","gap-2","border","border-primary"],["class","fa-solid fa-angle-down collapseIcon",4,"ngIf"],["class","fa-solid fa-angle-up collapseIcon",4,"ngIf"],["class","d-grid gap-2 mx-2 pb-2",4,"ngIf"],["data-bs-scroll","true","data-bs-backdrop","static","tabindex","-1","id","offcanvasSettings","aria-labelledby","offcanvasRightLabel",1,"offcanvas","offcanvas-end"],[1,"offcanvas-header"],["id","offcanvasRightLabel",1,"offcanvas-title"],["type","button","data-bs-dismiss","offcanvas","aria-label","Close",1,"btn-close"],[1,"offcanvas-body"],["id","shapeSelectDD","title","Shape","tooltip","Select shape",3,"selectedItemsChanged","options"],[1,"row","mt-2"],["for","shapeColor",1,"col-4","pe-0","form-label",2,"align-self","center"],[1,"col-8","ps-0"],["type","color","id","shapeColor","title","Choose a color",1,"w-100","no-effect","form-control","form-control-color",2,"padding","10px",3,"ngModelChange","ngModel"],["for","shapeSize",1,"col-4","pe-0","form-label",2,"align-self","center"],["type","number","id","shapeSize","value","4","title","Choose a size",1,"form-control","no-effect",3,"ngModelChange","ngModel"],["for","setName",1,"col-4","pe-0","form-label",2,"align-self","center"],["type","text","id","setName","value","4","title","Choose a name",1,"form-control","no-effect",3,"ngModelChange","ngModel"],[1,"mt-2","rounded-0","btn","btn-primary",3,"click"],[1,"list-group","list-group-flush"],["class","list-group-item",4,"ngFor","ngForOf"],["type","button",1,"rounded-0","btn","btn-sm","btn-outline-primary",3,"click"],[1,"fa-solid","fa-angle-down","collapseIcon"],[1,"fa-solid","fa-angle-up","collapseIcon"],[1,"d-grid","gap-2","mx-2","pb-2"],[1,"mt-1","form-check","form-switch"],["type","checkbox","id","switchBSEE",1,"form-check-input",3,"ngModelChange","ngModel"],["for","switchBSEE",1,"form-check-label"],[1,"card","rounded-0"],[1,"card-header"],[1,"layerBtn"],["title","Clear Filters",1,"no-border","rounded-0","btn","ms-auto",3,"click","disabled"],[1,"fa-solid","fa-filter-circle-xmark","text-primary"],["title","Export filtered data",1,"no-border","rounded-0","btn","ms-auto",3,"click"],[1,"fa-solid","fa-download","text-primary"],["title","Settings","data-bs-toggle","offcanvas","data-bs-target","#offcanvasSettings","aria-controls","offcanvasSettings",1,"no-border","rounded-0","btn","ms-auto"],[1,"fa-solid","fa-ellipsis-vertical","text-primary"],[1,"card-body","d-grid","gap-2"],[1,"d-flex","gap-2","flex-wrap"],[2,"align-content","center"],[1,"my-1"],["title","Area Code","valueField","value","displayField","text",3,"selectedItemsChanged","options","selectedItems"],["title","Block Number","valueField","value","displayField","text",3,"selectedItemsChanged","options","selectedItems"],["title","BSEE Operator","valueField","value","displayField","text","itemsShowLimit","1",3,"selectedItemsChanged","options","selectedItems"],["title","iSIMS Operator","valueField","value","displayField","text","itemsShowLimit","1",3,"selectedItemsChanged","options","selectedItems"],["title","Platform Name","valueField","value","displayField","text","itemsShowLimit","1",3,"selectedItemsChanged","options","selectedItems"],["title","WD(ft)","tooltip","Water Depth feet",3,"selectedItemsChanged"],["title","Complex ID Num","tooltip","Complex ID Num equals",3,"selectedItemsChanged","LayerType"],["title","Install Date","tooltip","Install Date",3,"selectedItemsChanged"],["title","Removal Date","tooltip","Removal Date",3,"selectedItemsChanged"],[1,"list-group-item"],["title","Clear Filters",1,"rounded-0","btn","ms-auto","no-border",3,"click","disabled"],["title","Year","valueField","value","displayField","text","itemsShowLimit","1",3,"selectedItemsChanged","options","selectedItems"],["title","Name","valueField","value","displayField","text","itemsShowLimit","1",3,"selectedItemsChanged","options","selectedItems"],[1,"d-flex","gap-2"],[1,"mt-1","form-check"],["type","checkbox","id","checkShowHH_Track",1,"form-check-input","squareChkbox",3,"ngModelChange","ngModel"],["for","checkShowHH_Track",1,"form-check-label"],["type","checkbox","id","checkShowHH_Cone",1,"form-check-input","squareChkbox",3,"ngModelChange","disabled","ngModel"],["for","checkShowHH_Cone",1,"form-check-label"],["title","Advisory","valueField","value","displayField","text","itemsShowLimit","1",3,"options","selectedItems","selectedItemsChanged",4,"ngIf"],["title","Advisory","valueField","value","displayField","text","itemsShowLimit","1",3,"selectedItemsChanged","options","selectedItems"],[1,"d-flex"],["class","card-body d-grid gap-2",4,"ngIf"],[4,"ngFor","ngForOf"],["title","visibility",1,"fa","text-primary","me-2",3,"click","ngClass"],["title","Operator","valueField","value","displayField","text","itemsShowLimit","1",3,"selectedItemsChanged","options","selectedItems"],["title","Status Code","valueField","value","displayField","text","itemsShowLimit","1",3,"selectedItemsChanged","options","selectedItems"],["title","Segment Number","tooltip","Segment Number equals",3,"selectedItemsChanged","LayerType"]],template:function(o,s){o&1&&(_(0,"div",0)(1,"div",0)(2,"button",1),E("click",function(){return s.toggleAreaLayer()}),R(3,"Area"),y(),_(4,"button",1),E("click",function(){return s.toggleBlockLayer()}),R(5,"Block"),y()(),_(6,"div",2)(7,"button",1),E("click",function(){return s.togglePlatformLayer()}),R(8,"Platforms"),B(9,jx,1,0,"i",3)(10,Ux,1,0,"i",4),y(),B(11,zx,42,15,"div",5),_(12,"div",6)(13,"div",7)(14,"h2",8),R(15,"Settings"),y(),L(16,"button",9),y(),_(17,"div",10)(18,"h5"),R(19,"Configration"),y(),_(20,"div")(21,"app-single-select",11),E("selectedItemsChanged",function(a){return s.selectedShape=a}),y(),_(22,"div",12)(23,"h6",13),R(24,"Color"),y(),_(25,"div",14)(26,"input",15),tt("ngModelChange",function(a){return et(s.selectedColor,a)||(s.selectedColor=a),a}),y()()(),_(27,"div",12)(28,"h6",16),R(29,"Size"),y(),_(30,"div",14)(31,"input",17),tt("ngModelChange",function(a){return et(s.selectedSize,a)||(s.selectedSize=a),a}),y()()(),_(32,"div",12)(33,"h6",18),R(34,"Result Set Name"),y(),_(35,"div",14)(36,"input",19),tt("ngModelChange",function(a){return et(s.selectedName,a)||(s.selectedName=a),a}),y()()(),_(37,"button",20),E("click",function(){return s.SaveResultSet()}),R(38,"Save Result Set"),y()(),_(39,"ul",21),B(40,$x,2,1,"li",22),y()()()(),_(41,"div",2)(42,"button",23),E("click",function(){return s.showHurricaneUI=!s.showHurricaneUI}),R(43,"Historic Hurricanes"),B(44,Wx,1,0,"i",3)(45,qx,1,0,"i",4),y(),B(46,Yx,21,9,"div",5),y(),_(47,"div",2)(48,"button",23),E("click",function(){return s.toggleShowFH()}),R(49,"Forecast Hurricanes"),B(50,Kx,1,0,"i",3)(51,Qx,1,0,"i",4),y(),B(52,eO,6,1,"div",5),y(),_(53,"div",2)(54,"button",23),E("click",function(){return s.toggleRecentHLayer()}),R(55,"Recent Hurricanes"),B(56,tO,1,0,"i",3)(57,iO,1,0,"i",4),y(),B(58,oO,10,4,"div",5),y(),_(59,"div",2)(60,"button",1),E("click",function(){return s.togglePipelineLayer()}),R(61,"Pipelines"),B(62,sO,1,0,"i",3)(63,rO,1,0,"i",4),y(),B(64,aO,13,6,"div",5),y()()),o&2&&(g(2),C("ngClass",s.showArea?"btn-primary":"btn-outline-primary"),g(2),C("ngClass",s.showBlocks?"btn-primary":"btn-outline-primary"),g(3),C("ngClass",s.showPlatforms?"btn-primary":"btn-outline-primary"),g(2),C("ngIf",!s.showPlatforms),g(),C("ngIf",s.showPlatforms),g(),C("ngIf",s.showPlatforms),g(10),C("options",s.shapeOptions),g(5),Xe("ngModel",s.selectedColor),g(5),Xe("ngModel",s.selectedSize),g(5),Xe("ngModel",s.selectedName),g(4),C("ngForOf",s.resultSet),g(4),C("ngIf",!s.showHurricaneUI),g(),C("ngIf",s.showHurricaneUI),g(),C("ngIf",s.showHurricaneUI),g(4),C("ngIf",!s.showFH),g(),C("ngIf",s.showFH),g(),C("ngIf",s.showFH),g(4),C("ngIf",!s.showRecentHurricane),g(),C("ngIf",s.showRecentHurricane),g(),C("ngIf",s.showRecentHurricane),g(2),C("ngClass",s.showPipelines?"btn-primary":"btn-outline-primary"),g(2),C("ngIf",!s.showPipelines),g(),C("ngIf",s.showPipelines),g(),C("ngIf",s.showPipelines))},dependencies:[ve,zt,Un,Pi,mt,Mi,$o,jh,Qt,Bt,gw,Xw,e1,t1,i1],styles:[".collapseIcon[_ngcontent-%COMP%]{line-height:inherit!important;float:right}.layerBtn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.2rem .4rem}.offcanvas.offcanvas-end[_ngcontent-%COMP%]{width:300px}"]});let e=t;return e})();var s1=(()=>{let t=class t{constructor(){this.showPlatforms=!0,this.showLegend=!0}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=ee({type:t,selectors:[["app-root"]],standalone:!0,features:[ae],decls:10,vars:0,consts:[[1,"container-fliud",2,"margin-top","50px"],[1,"row"],[1,"col-10"],[1,"sidebar","col-2","ps-0"],["name","appSpinner","type","ball-atom"],[1,"text-white"]],template:function(o,s){o&1&&(L(0,"app-header"),_(1,"div",0)(2,"div",1)(3,"div",2),L(4,"app-esri-map"),y(),_(5,"div",3),L(6,"app-side-panel"),y()()(),_(7,"ngx-spinner",4)(8,"h1",5),R(9," Loading... "),y()())},dependencies:[ve,zb,pw,o1,Vb],styles:[".sidebar[_ngcontent-%COMP%]{height:100vh;position:fixed-right;overflow-y:auto}"]});let e=t;return e})();I0(s1,_y).catch(e=>console.error(e));
