import{a as n}from"./chunk-GCXZ2WQT.js";import{i as v,j as f}from"./chunk-VK5N5HMZ.js";import"./chunk-SYUMSOAT.js";import"./chunk-FQTXYWH5.js";import"./chunk-KLXERNY4.js";import{b as p}from"./chunk-2622HKWI.js";import"./chunk-UBRTYYXN.js";import"./chunk-QCG2T55M.js";import{a as u,b as m,d as l,g as o}from"./chunk-UAZOXZEX.js";import"./chunk-IISBSAYJ.js";import"./chunk-2TKJWM7A.js";import"./chunk-PRVSRJH5.js";import"./chunk-QWLQUMDY.js";import"./chunk-V2KSICSA.js";import"./chunk-M76YZBV5.js";import"./chunk-HXQMOXFX.js";import"./chunk-BKKKVIAS.js";import"./chunk-BCREO4Q5.js";import"./chunk-76YVRX2R.js";import"./chunk-OZF6BMOL.js";import"./chunk-GJP6PTKT.js";import"./chunk-RSDQHAJX.js";import"./chunk-SLMQFZE3.js";import"./chunk-BN2F4ATU.js";import"./chunk-DJULDHPW.js";import"./chunk-NDG5FXLR.js";import"./chunk-V477EWXM.js";import"./chunk-5ODCEDHC.js";import"./chunk-2KZICFRS.js";import"./chunk-D2RUV6O4.js";import"./chunk-4JWMB5SM.js";import"./chunk-VOYK3LZF.js";import"./chunk-HOJTYTYD.js";import"./chunk-XNEAL2YW.js";import"./chunk-J7M5V2SQ.js";import"./chunk-HRFJUMCP.js";import"./chunk-375OYO4P.js";import"./chunk-AUTL5LCV.js";import"./chunk-KUJG22IX.js";import"./chunk-OVHPPCBL.js";import"./chunk-W3WDPWBE.js";import"./chunk-GISCFF3Z.js";import"./chunk-MLSR6YE6.js";import"./chunk-SNFOAZZQ.js";import"./chunk-CPDJJRWA.js";import"./chunk-HQMV3KQV.js";import"./chunk-CRMMDK2Z.js";import{a as c,b as y,h as t}from"./chunk-EAH6BNBL.js";var d="Group Layer",R="group-layer-save",P="group-layer-save-as",i=o.GROUP_LAYER_MAP;function I(e){return{isValid:e.type==="group",errorMessage:"Layer.type should be 'group'"}}function T(e){return{isValid:m(e,i),errorMessage:`Layer.portalItem.typeKeywords should have '${i}'`}}function g(e,r){return y(c({},p(e,"web-map",!0)),{initiator:r})}function w(e){let r=e.layerJSON;return Promise.resolve(r&&Object.keys(r).length?r:null)}function h(e,r){return t(this,null,function*(){r.title||=e.title,l(r,o.METADATA),u(r,i)})}function O(e,r){return t(this,null,function*(){return v({layer:e,itemType:d,validateLayer:I,validateItem:T,createJSONContext:a=>g(a,e),createItemData:w,errorNamePrefix:R,saveResources:(a,s)=>t(this,null,function*(){return e.sourceIsPortalItem||(yield a.removeAllResources().catch(()=>{})),n(e.resourceReferences,s)})},r)})}function M(e,r,a){return t(this,null,function*(){return f({layer:e,itemType:d,validateLayer:I,createJSONContext:s=>g(s,e),createItemData:w,errorNamePrefix:P,newItem:r,setItemProperties:h,saveResources:(s,A)=>n(e.resourceReferences,A)},a)})}export{O as save,M as saveAs};
