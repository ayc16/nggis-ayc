import{a as En}from"./chunk-S64LE5CT.js";import{a as T}from"./chunk-SD4HEAP6.js";import{a as Ue}from"./chunk-WXYOVYVR.js";import{e as Rn,f as kn,g as Pn,h as Fn,i as $e}from"./chunk-I2ZQGXY4.js";import{a as ze}from"./chunk-6CZVQOI6.js";import{b as Qe,c as _}from"./chunk-C4KJ5QFP.js";import{Aa as In,G as We,Ja as bn,Ka as Te,L as E,La as _n,Ma as Sn,Na as I,O as Se,Oa as Nn,P as me,Pa as Dn,Q as yn,R as C,S as Me,T as F,U as H,V as G,W as te,Y as S,Z as q,_ as xn,aa as An,b as f,c as m,ca as P,da as K,ea as L,fa as M,ha as h,ia as Xe,ja as pe,ka as vn,m as Be,ma as ge,n as Ve,na as v,pa as Ne,qa as g,ra as U,sa as De,ta as j,ua as de,ya as Re}from"./chunk-VUJUH7MP.js";import{a as gn}from"./chunk-JDLVIKS3.js";import{c as wn}from"./chunk-YTDHENVR.js";import{a as O,b as _e,c as Q,h as $}from"./chunk-LX3TXNPU.js";import{f as V}from"./chunk-QBQKFGOZ.js";import{a as se,o as oe,p as ce}from"./chunk-F7PIPM6E.js";import{f as pn}from"./chunk-FR6Q4MSQ.js";import{c as On}from"./chunk-CGTLZX6D.js";import{d as Ie}from"./chunk-BENVXA3L.js";import{b as ne,j as z,t as be}from"./chunk-UI76XBLJ.js";import{b as hn}from"./chunk-UE2YGKE7.js";import{a as dn}from"./chunk-3RDV3O6N.js";import{m as mn}from"./chunk-CTGIUUCS.js";import{w as he}from"./chunk-WKT5W7KT.js";import{a as fn}from"./chunk-MLSR6YE6.js";import{h as X}from"./chunk-EAH6BNBL.js";var Ln=class{constructor(i,n){this._moduleSingletons=i,this._syntaxModules=n}loadLibrary(i){if(this._syntaxModules==null)return null;let n=this._syntaxModules[i.toLowerCase()];return n?{syntax:n.script,uri:n.uri}:null}};var Cn={all:{min:2,max:2},time:{min:0,max:4},dateonly:{min:0,max:3},getenvironment:{min:0,max:0},none:{min:2,max:2},any:{min:2,max:2},reduce:{min:2,max:3},map:{min:2,max:2},filter:{min:2,max:2},fromcodepoint:{min:1,max:-1},fromcharcode:{min:1,max:-1},tocodepoint:{min:1,max:2},tocharcode:{min:1,max:2},concatenate:{min:0,max:-1},expects:{min:1,max:-1},getfeatureset:{min:1,max:2},week:{min:1,max:2},fromjson:{min:1,max:1},length3d:{min:1,max:2},tohex:{min:1,max:1},hash:{min:1,max:1},timezone:{min:1,max:1},timezoneoffset:{min:1,max:1},changetimezone:{min:2,max:2},isoweek:{min:1,max:1},isoweekday:{min:1,max:1},hasvalue:{min:2,max:2},isomonth:{min:1,max:1},isoyear:{min:1,max:1},resize:{min:2,max:3},slice:{min:0,max:-1},splice:{min:0,max:-1},push:{min:2,max:2},pop:{min:1,max:1},includes:{min:2,max:2},array:{min:0,max:2},front:{min:1,max:1},back:{min:1,max:1},insert:{min:3,max:3},erase:{min:2,max:2},split:{min:2,max:4},guid:{min:0,max:1},standardizeguid:{min:2,max:2},today:{min:0,max:0},angle:{min:2,max:3},bearing:{min:2,max:3},urlencode:{min:1,max:1},now:{min:0,max:0},timestamp:{min:0,max:0},day:{min:1,max:1},month:{min:1,max:1},year:{min:1,max:1},hour:{min:1,max:1},second:{min:1,max:1},millisecond:{min:1,max:1},minute:{min:1,max:1},weekday:{min:1,max:1},toutc:{min:1,max:1},tolocal:{min:1,max:1},date:{min:0,max:8},datediff:{min:2,max:4},dateadd:{min:2,max:3},trim:{min:1,max:1},text:{min:1,max:2},left:{min:2,max:2},right:{min:2,max:2},mid:{min:2,max:3},upper:{min:1,max:1},proper:{min:1,max:2},lower:{min:1,max:1},find:{min:2,max:3},iif:{min:3,max:3},decode:{min:2,max:-1},when:{min:2,max:-1},defaultvalue:{min:2,max:3},isempty:{min:1,max:1},domaincode:{min:2,max:4},domainname:{min:2,max:4},polygon:{min:1,max:1},point:{min:1,max:1},polyline:{min:1,max:1},extent:{min:1,max:1},multipoint:{min:1,max:1},ringisclockwise:{min:1,max:1},geometry:{min:1,max:1},count:{min:0,max:-1},number:{min:1,max:2},acos:{min:1,max:1},asin:{min:1,max:1},atan:{min:1,max:1},atan2:{min:2,max:2},ceil:{min:1,max:2},floor:{min:1,max:2},round:{min:1,max:2},cos:{min:1,max:1},exp:{min:1,max:1},log:{min:1,max:1},min:{min:0,max:-1},constrain:{min:3,max:3},console:{min:0,max:-1},max:{min:0,max:-1},pow:{min:2,max:2},random:{min:0,max:0},sqrt:{min:1,max:1},sin:{min:1,max:1},tan:{min:1,max:1},abs:{min:1,max:1},isnan:{min:1,max:1},stdev:{min:0,max:-1},average:{min:0,max:-1},mean:{min:0,max:-1},sum:{min:0,max:-1},variance:{min:0,max:-1},distinct:{min:0,max:-1},first:{min:1,max:1},top:{min:2,max:2},boolean:{min:1,max:1},dictionary:{min:0,max:-1},typeof:{min:1,max:1},reverse:{min:1,max:1},replace:{min:3,max:4},sort:{min:1,max:2},feature:{min:1,max:-1},haskey:{min:2,max:2},indexof:{min:2,max:2},disjoint:{min:2,max:2},intersects:{min:2,max:2},touches:{min:2,max:2},crosses:{min:2,max:2},within:{min:2,max:2},contains:{min:2,max:2},overlaps:{min:2,max:2},equals:{min:2,max:2},relate:{min:3,max:3},intersection:{min:2,max:2},union:{min:1,max:2},difference:{min:2,max:2},symmetricdifference:{min:2,max:2},clip:{min:2,max:2},cut:{min:2,max:2},area:{min:1,max:2},areageodetic:{min:1,max:2},length:{min:1,max:2},lengthgeodetic:{min:1,max:2},distancegeodetic:{min:2,max:3},distance:{min:2,max:3},densify:{min:2,max:3},densifygeodetic:{min:2,max:3},generalize:{min:2,max:4},buffer:{min:2,max:3},buffergeodetic:{min:2,max:3},offset:{min:2,max:6},rotate:{min:2,max:3},issimple:{min:1,max:1},simplify:{min:1,max:1},convexhull:{min:1,max:1},centroid:{min:1,max:1},nearestcoordinate:{min:2,max:2},nearestvertex:{min:2,max:2},isselfintersecting:{min:1,max:1},multiparttosinglepart:{min:1,max:1},setgeometry:{min:2,max:2},portal:{min:1,max:1},getuser:{min:0,max:2},subtypes:{min:1,max:1},subtypecode:{min:1,max:1},subtypename:{min:1,max:1},domain:{min:2,max:3},convertdirection:{min:3,max:3},sqltimestamp:{min:1,max:3},schema:{min:1,max:1},measuretocoordinate:{min:2,max:2},distancetocoordinate:{min:2,max:2},pointtocoordinate:{min:2,max:2}},je={functionDefinitions:new Map,constantDefinitions:new Map},Ze={functionDefinitions:new Map,constantDefinitions:new Map};for(let r of["pi","infinity"])Ze.constantDefinitions.set(r,{type:"constant"}),je.constantDefinitions.set(r,{type:"constant"});Ze.constantDefinitions.set("textformatting",{type:"namespace",key:"textformatting",members:[{key:"backwardslash",type:"constant"},{key:"doublequote",type:"constant"},{key:"forwardslash",type:"constant"},{key:"tab",type:"constant"},{key:"singlequote",type:"constant"},{key:"newline",type:"constant"}]}),je.constantDefinitions.set("textformatting",{type:"namespace",key:"textformatting",members:[{key:"backwardslash",type:"constant"},{key:"tab",type:"constant"},{key:"singlequote",type:"constant"},{key:"doublequote",type:"constant"},{key:"forwardslash",type:"constant"},{key:"newline",type:"constant"}]});for(let r in Cn){let i=Cn[r];Ze.functionDefinitions.set(r,{overloads:[{type:"function",parametersInfo:{min:i.min,max:i.max}}]}),je.functionDefinitions.set(r,{overloads:[{type:"function",parametersInfo:{min:i.min,max:i.max}}]})}var Xn=new Set(["featureset","featuresetbyid","featuresetbyname","featuresetbyassociation","featuresetbyrelationshipname","featuresetbyurl","getfeatureset","getuser","attachments","featuresetbyportalitem","getfeaturesetinfo","filterbysubtypecode","knowledgegraphbyportalitem","querygraph"]),Qn=new Set(["disjoint","intersects","touches","crosses","within","contains","overlaps","equals","relate","intersection","nearestvertex","nearestcoordinate","union","difference","symmetricdifference","clip","cut","area","areageodetic","length","length3d","lengthgeodetic","distance","distancegeodetic","densify","densifygeodetic","generalize","buffer","buffergeodetic","offset","rotate","issimple","convexhull","simplify","multiparttosinglepart","pointtocoordinate","distancetocoordinate","measuretocoordinate"]);function Mn(r){return typeof r=="string"||r instanceof String}function _t(r,i){let n=i==="sync"?je:Ze;n.functionDefinitions.has(r.name.toLowerCase())?n.functionDefinitions.get(r.name.toLowerCase())?.overloads.push({type:"function",parametersInfo:{min:r.min,max:r.max}}):n.functionDefinitions.set(r.name.toLowerCase(),{overloads:[{type:"function",parametersInfo:{min:r.min,max:r.max}}]})}function re(r,i){if(r)for(let n of r)R(n,i)}function R(r,i){if(r&&i(r)!==!1)switch(r.type){case"ImportDeclaration":re(r.specifiers,i),R(r.source,i);break;case"ExportNamedDeclaration":R(r.declaration,i);break;case"ArrayExpression":re(r.elements,i);break;case"AssignmentExpression":case"BinaryExpression":case"LogicalExpression":R(r.left,i),R(r.right,i);break;case"BlockStatement":case"Program":re(r.body,i);break;case"BreakStatement":case"ContinueStatement":case"EmptyStatement":case"Identifier":case"Literal":break;case"CallExpression":R(r.callee,i),re(r.arguments,i);break;case"ExpressionStatement":R(r.expression,i);break;case"ForInStatement":R(r.left,i),R(r.right,i),R(r.body,i);break;case"ForStatement":R(r.init,i),R(r.test,i),R(r.update,i),R(r.body,i);break;case"WhileStatement":R(r.test,i),R(r.body,i);break;case"FunctionDeclaration":R(r.id,i),re(r.params,i),R(r.body,i);break;case"IfStatement":R(r.test,i),R(r.consequent,i),R(r.alternate,i);break;case"MemberExpression":R(r.object,i),R(r.property,i);break;case"ObjectExpression":re(r.properties,i);break;case"Property":R(r.key,i),R(r.value,i);break;case"ReturnStatement":case"UnaryExpression":case"UpdateExpression":R(r.argument,i);break;case"VariableDeclaration":re(r.declarations,i);break;case"VariableDeclarator":R(r.id,i),R(r.init,i);break;case"TemplateLiteral":re(r.expressions,i),re(r.quasis,i)}}function $n(r,i){let n=!1,a=i.toLowerCase();return R(r,o=>!n&&(o.type==="Identifier"&&o.name&&o.name.toLowerCase()===a&&(n=!0),!0)),n}function Kn(r){let i=[];return R(r,n=>(n.type==="ImportDeclaration"&&n.source&&n.source.value&&i.push({libname:n.specifiers[0].local.name.toLowerCase(),source:n.source.value}),!0)),i}function St(r,i){let n=!1,a=i.toLowerCase();return R(r,o=>!n&&(o.type!=="CallExpression"||o.callee.type!=="Identifier"||!o.callee.name||o.callee.name.toLowerCase()!==a||(n=!0,!1))),n}function Nt(r){let i=[];return R(r,n=>n.type!=="MemberExpression"||n.object.type!=="Identifier"||(n.computed===!1&&n.object&&n.object.name&&n.property&&n.property.type==="Identifier"&&n.property.name?i.push(n.object.name.toLowerCase()+"."+n.property.name.toLowerCase()):n.object&&n.object.name&&n.property&&n.property.type==="Literal"&&typeof n.property.value=="string"&&i.push(n.object.name.toLowerCase()+"."+n.property.value?.toString().toLowerCase()),!1)),i}function Dt(r){let i=[];return R(r,n=>{if(n.type==="CallExpression"){if(n.callee.type==="Identifier"&&n.callee.name.toLowerCase()==="expects"){let a="";for(let o=0;o<(n.arguments||[]).length;o++)o===0?n.arguments[o].type==="Identifier"&&(a=n.arguments[o].name.toLowerCase()):a&&n.arguments[o].type==="Literal"&&Mn(n.arguments[o].value)&&i.push(a+"."+n.arguments[o].value.toLowerCase());return!1}if(n.callee.type==="Identifier"&&["domainname","domaincode","domain","haskey"].includes(n.callee.name.toLowerCase())&&n.arguments.length>=2){let a="";return n.arguments[0].type==="Identifier"&&(a=n.arguments[0].name.toLowerCase()),a&&n.arguments[1].type==="Literal"&&Mn(n.arguments[1].value)&&i.push(a+"."+n.arguments[1].value.toLowerCase()),!1}}return n.type!=="MemberExpression"||n.object.type!=="Identifier"||(n.computed===!1&&n.object&&n.object.name&&n.property&&n.property.type==="Identifier"&&n.property.name?i.push(n.object.name.toLowerCase()+"."+n.property.name.toLowerCase()):n.object&&n.object.name&&n.property&&n.property.type==="Literal"&&typeof n.property.value=="string"&&i.push(n.object.name.toLowerCase()+"."+n.property.value?.toString().toLowerCase()),!1)}),i}function Tn(r){let i=[];return R(r,n=>(n.type==="CallExpression"&&n.callee.type==="Identifier"&&i.push(n.callee.name.toLowerCase()),!0)),i}function Rt(r,i=[]){let n=null;if(r.usesFeatureSet===void 0){n===null&&(n=Tn(r)),r.usesFeatureSet=!1;for(let a=0;a<n.length;a++)Xn.has(n[a])&&(r.usesFeatureSet=!0,r.isAsync=!0);if(r.usesFeatureSet===!1&&i&&i.length>0){for(let a of i)if($n(r,a)){r.usesFeatureSet=!0,r.isAsync=!0;break}}}if(r.usesModules===void 0&&(r.usesModules=!1,Kn(r).length>0&&(r.usesModules=!0)),r.usesGeometry===void 0){r.usesGeometry=!1,n===null&&(n=Tn(r));for(let a=0;a<n.length;a++)Qn.has(n[a])&&(r.usesGeometry=!0)}}function Yn(r){function i(t,s,l){if(t instanceof gn)return t.toArray();if(S(t))return t;throw new m(s,f.InvalidParameter,l)}function n(t,s){let l=t.length,d=Math.floor(l/2);return l===0?[]:l===1?[t[0]]:a(n(t.slice(0,d),s),n(t.slice(d,l),s),s)}function a(t,s,l){let d=[];for(;t.length>0||s.length>0;)if(t.length>0&&s.length>0){let c=l(t[0],s[0]);isNaN(c)&&(c=0),c<=0?(d.push(t[0]),t=t.slice(1)):(d.push(s[0]),s=s.slice(1))}else t.length>0?(d.push(t[0]),t=t.slice(1)):s.length>0&&(d.push(s[0]),s=s.slice(1));return d}function o(t,s){return X(this,null,function*(){let l=t.length,d=Math.floor(l/2);if(l===0)return[];if(l===1)return[t[0]];let c=[yield o(t.slice(0,d),s),yield o(t.slice(d,l),s)];return u(c[0],c[1],s,[])})}function u(t,s,l,d){return X(this,null,function*(){let c=d;if(!(t.length>0||s.length>0))return d;if(t.length>0&&s.length>0){let p=yield l(t[0],s[0]);return isNaN(p)&&(p=1),p<=0?(c.push(t[0]),t=t.slice(1)):(c.push(s[0]),s=s.slice(1)),u(t,s,l,d)}return t.length>0?(c.push(t[0]),u(t=t.slice(1),s,l,d)):s.length>0?(c.push(s[0]),u(t,s=s.slice(1),l,d)):void 0})}function e(t,s,l,d){h(l,1,2,t,s);let c=l[0];if(P(c)&&(c=c.toArray()),S(c)===!1)throw new m(t,f.InvalidParameter,s);if(l.length>1){if(me(l[1])===!1)throw new m(t,f.InvalidParameter,s);let A=c,D=l[1].createFunction(t);return d?o(A,D):(A=n(A,(Z,Ce)=>D(Z,Ce)),A)}let p=c;if(p.length===0)return[];let w={};for(let A=0;A<p.length;A++){let D=Me(p[A]);D!==""&&(w[D]=!0)}if(w.Array===!0||w.Dictionary===!0||w.Feature===!0||w.Point===!0||w.Polygon===!0||w.Polyline===!0||w.Multipoint===!0||w.Extent===!0||w.Function===!0)return p.slice(0);let x=0,b="";for(let A in w)x++,b=A;return p=x>1||b==="String"?n(p,(A,D)=>{if(A==null||A===E)return D==null||D===E?0:1;if(D==null||D===E)return-1;let Z=v(A),Ce=v(D);return Z<Ce?-1:Z===Ce?0:1}):b==="Number"?n(p,(A,D)=>A-D):b==="Boolean"?n(p,(A,D)=>A===D?0:D?-1:1):b==="Date"?n(p,(A,D)=>D-A):p.slice(0),p}r.functions.array=function(t,s){return r.standardFunction(t,s,(l,d,c)=>{if(h(c,0,2,t,s),c.length===0)return[];if(c.length===1&&c[0]===null)return[];if(S(c[0])){if(c.length===2&&H(c[1])===!1)throw new m(t,f.InvalidParameter,s);return C(c[1],!1)===!0?Qe(c[0]):c[0].slice(0)}if(P(c[0])){if(c.length===2&&H(c[1])===!1)throw new m(t,f.InvalidParameter,s);return C(c[1],!1)===!0?Qe(c[0]):c[0].toArray().slice(0)}let p=g(c[0]);if(isNaN(p)||te(p)===!1)throw new m(t,f.InvalidParameter,s);let w=C(c[1],null),x=new Array(p);return x.fill(w),x})},r.functions.front=function(t,s){return r.standardFunction(t,s,(l,d,c)=>{if(h(c,1,1,t,s),P(c[0])){if(c[0].length()<=0)throw new m(t,f.OutOfBounds,s);return c[0].get(0)}if(S(c[0])){if(c[0].length<=0)throw new m(t,f.OutOfBounds,s);return c[0][0]}throw new m(t,f.InvalidParameter,s)})},r.functions.back=function(t,s){return r.standardFunction(t,s,(l,d,c)=>{if(h(c,1,1,t,s),P(c[0])){if(c[0].length()<=0)throw new m(t,f.OutOfBounds,s);return c[0].get(c[0].length()-1)}if(S(c[0])){if(c[0].length<=0)throw new m(t,f.OutOfBounds,s);return c[0][c[0].length-1]}throw new m(t,f.InvalidParameter,s)})},r.functions.push=function(t,s){return r.standardFunction(t,s,(l,d,c)=>{if(h(c,1,2,t,s),S(c[0]))return c[0][c[0].length]=c[1],c[0].length;throw new m(t,f.InvalidParameter,s)})},r.functions.pop=function(t,s){return r.standardFunction(t,s,(l,d,c)=>{if(h(c,1,1,t,s),S(c[0])){if(c[0].length<=0)throw new m(t,f.OutOfBounds,s);let p=c[0][c[0].length-1];return c[0].length=c[0].length-1,p}throw new m(t,f.InvalidParameter,s)})},r.functions.erase=function(t,s){return r.standardFunction(t,s,(l,d,c)=>{if(h(c,2,2,t,s),S(c[0])){let p=g(c[1]);if(isNaN(p)||te(p)===!1)throw new m(t,f.InvalidParameter,s);let w=c[0];if(w.length<=0)throw new m(t,f.OutOfBounds,s);if(p<0&&(p=w.length+p),p<0)throw new m(t,f.OutOfBounds,s);if(p>=w.length)throw new m(t,f.OutOfBounds,s);return w.splice(p,1),E}throw new m(t,f.InvalidParameter,s)})},r.functions.insert=function(t,s){return r.standardFunction(t,s,(l,d,c)=>{if(h(c,3,3,t,s),S(c[0])){let p=g(c[1]);if(isNaN(p)||te(p)===!1)throw new m(t,f.InvalidParameter,s);let w=c[2],x=c[0];if(p>x.length)throw new m(t,f.OutOfBounds,s);if(p<0&&p<-1*x.length)throw new m(t,f.OutOfBounds,s);return p===x.length?(x[p]=w,E):(x.splice(p,0,w),E)}throw new m(t,f.InvalidParameter,s)})},r.functions.resize=function(t,s){return r.standardFunction(t,s,(l,d,c)=>{if(h(c,2,3,t,s),S(c[0])){let p=g(c[1]);if(isNaN(p)||te(p)===!1)throw new m(t,f.InvalidParameter,s);if(p<0)throw new m(t,f.InvalidParameter,s);let w=C(c[2],null),x=c[0];if(x.length>=p)return x.length=p,E;let b=x.length;x.length=p;for(let A=b;A<x.length;A++)x[A]=w;return E}throw new m(t,f.InvalidParameter,s)})},r.functions.includes=function(t,s){return r.standardFunction(t,s,(l,d,c)=>{if(h(c,2,2,t,s),S(c[0])){let p=c[1];return c[0].findIndex(w=>ge(w,p))>-1}if(P(c[0])){let p=c[1];return c[0].toArray().findIndex(w=>ge(w,p))>-1}throw new m(t,f.InvalidParameter,s)})},r.functions.slice=function(t,s){return r.standardFunction(t,s,(l,d,c)=>{if(h(c,1,3,t,s),S(c[0])){let p=g(C(c[1],0)),w=g(C(c[2],c[0].length));if(isNaN(p)||te(p)===!1)throw new m(t,f.InvalidParameter,s);if(isNaN(w)||te(w)===!1)throw new m(t,f.InvalidParameter,s);return c[0].slice(p,w)}if(P(c[0])){let p=c[0],w=g(C(c[1],0)),x=g(C(c[2],p.length()));if(isNaN(w)||te(w)===!1)throw new m(t,f.InvalidParameter,s);if(isNaN(x)||te(x)===!1)throw new m(t,f.InvalidParameter,s);return p.toArray().slice(w,x)}throw new m(t,f.InvalidParameter,s)})},r.functions.splice=function(t,s){return r.standardFunction(t,s,(l,d,c)=>{let p=[];for(let w=0;w<c.length;w++)S(c[w])?p.push(...c[w]):P(c[w])?p.push(...c[w].toArray()):p.push(c[w]);return p})},r.functions.top=function(t,s){return r.standardFunction(t,s,(l,d,c)=>{if(h(c,2,2,t,s),S(c[0]))return g(c[1])>=c[0].length?c[0].slice(0):c[0].slice(0,g(c[1]));if(P(c[0]))return g(c[1])>=c[0].length()?c[0].slice(0):c[0].slice(0,g(c[1]));throw new m(t,f.InvalidParameter,s)})},r.functions.first=function(t,s){return r.standardFunction(t,s,(l,d,c)=>(h(c,1,1,t,s),S(c[0])?c[0].length===0?null:c[0][0]:P(c[0])?c[0].length()===0?null:c[0].get(0):null))},r.mode==="sync"&&(r.functions.sort=function(t,s){return r.standardFunction(t,s,(l,d,c)=>e(t,s,c,!1))},r.functions.any=function(t,s){return r.standardFunction(t,s,(l,d,c)=>{h(c,2,2,t,s);let p=c[1].createFunction(t),w=i(c[0],t,s);for(let x of w){let b=p(x);if(H(b)&&b===!0)return!0}return!1})},r.functions.all=function(t,s){return r.standardFunction(t,s,(l,d,c)=>{h(c,2,2,t,s);let p=c[1].createFunction(t),w=i(c[0],t,s);for(let x of w)if(p(x)!==!0)return!1;return!0})},r.functions.none=function(t,s){return r.standardFunction(t,s,(l,d,c)=>{h(c,2,2,t,s);let p=c[1].createFunction(t),w=i(c[0],t,s);for(let x of w)if(p(x)===!0)return!1;return!0})},r.functions.reduce=function(t,s){return r.standardFunction(t,s,(l,d,c)=>{h(c,2,3,t,s);let p=c[1].createFunction(t),w=i(c[0],t,s);return c.length===2?w.length===0?null:w.reduce((x,b)=>{let A=p(x,b);return x=A!==void 0&&A!==E?A:null}):w.reduce((x,b)=>{let A=p(x,b);return x=A!==void 0&&A!==E?A:null},c[2])})},r.functions.map=function(t,s){return r.standardFunction(t,s,(l,d,c)=>{h(c,2,2,t,s);let p=c[1].createFunction(t),w=i(c[0],t,s),x=[];for(let b of w){let A=p(b);A!==void 0&&A!==E?x.push(A):x.push(null)}return x})},r.functions.filter=function(t,s){return r.standardFunction(t,s,(l,d,c)=>{h(c,2,2,t,s);let p=c[1].createFunction(t),w=i(c[0],t,s),x=[];for(let b of w)p(b)===!0&&x.push(b);return x})}),r.mode==="async"&&(r.functions.sort=function(t,s){return r.standardFunctionAsync(t,s,(l,d,c)=>e(t,s,c,!0))},r.functions.any=function(t,s){return r.standardFunctionAsync(t,s,(l,d,c)=>X(this,null,function*(){h(c,2,2,t,s);let p=c[1].createFunction(t),w=i(c[0],t,s);for(let x of w){let b=yield p(x),A=null;if(A=he(A)?yield b:b,H(A)&&A===!0)return!0}return!1}))},r.functions.all=function(t,s){return r.standardFunctionAsync(t,s,(l,d,c)=>X(this,null,function*(){h(c,2,2,t,s);let p=c[1].createFunction(t),w=i(c[0],t,s);for(let x of w){let b=yield p(x),A=null;if(A=he(A)?yield b:b,A!==!0)return!1}return!0}))},r.functions.none=function(t,s){return r.standardFunctionAsync(t,s,(l,d,c)=>X(this,null,function*(){h(c,2,2,t,s);let p=c[1].createFunction(t),w=i(c[0],t,s);for(let x of w){let b=yield p(x),A=null;if(A=he(A)?yield b:b,A===!0)return!1}return!0}))},r.functions.filter=function(t,s){return r.standardFunctionAsync(t,s,(l,d,c)=>X(this,null,function*(){h(c,2,2,t,s);let p=c[1].createFunction(t),w=i(c[0],t,s),x=[];for(let b of w){let A=yield p(b),D=null;D=he(D)?yield A:A,D===!0&&x.push(b)}return x}))},r.functions.reduce=function(t,s){return r.standardFunctionAsync(t,s,(l,d,c)=>{h(c,2,3,t,s);let p=c[1].createFunction(t),w=i(c[0],t,s),x=null;if(c.length>2){let b=C(c[2],null);x=w.reduce((A,D)=>X(this,null,function*(){let Z=yield A;return Z!==void 0&&Z!==E||(Z=null),p(Z,D)}),Promise.resolve(b))}else{if(w.length===0)return null;x=w.reduce((b,A,D)=>X(this,null,function*(){if(D<=1)return p(b,A);let Z=yield b;return Z!==void 0&&Z!==E||(Z=null),p(Z,A)}))}return x.then(b=>b!==void 0&&b!==E?b:null)})},r.functions.map=function(t,s){return r.standardFunctionAsync(t,s,(l,d,c)=>X(this,null,function*(){h(c,2,2,t,s);let p=c[1].createFunction(t),w=i(c[0],t,s),x=[];for(let b of w){let A=yield p(b),D=null;D=he(D)?yield A:A,D!==void 0&&D!==E?x.push(D):x.push(null)}return x}))})}var Ct=Object.freeze(Object.defineProperty({__proto__:null,registerFunctions:Yn},Symbol.toStringTag,{value:"Module"}));function et(r,i,n){return r+(nt(n)?rt:tt)[i]}function nt(r){return r%4==0&&(r%100!=0||r%400==0)}var tt=[0,31,59,90,120,151,181,212,243,273,304,334],rt=[0,31,60,91,121,152,182,213,244,274,305,335];function Y(r){return r===null?r:r.isValid===!1?null:r}function ke(r,i){return r===""||r.toLowerCase().trim()==="default"?I(i):r==="z"||r==="Z"?"UTC":r}function ae(r,i){return L(r)?r.toArcadeDate():U(r,I(i))}function Jt(r,i){r.today=function(n,a){return i(n,a,(o,u,e)=>{h(e,0,0,n,a);let t=new Date;return t.setHours(0,0,0,0),O.dateJSAndZoneToArcadeDate(t,I(n))})},r.time=function(n,a){return i(n,a,(o,u,e)=>{switch(h(e,0,4,n,a),e.length){case 0:{let t=O.nowToArcadeDate(I(n));return new $(t.hour,t.minute,t.second,t.millisecond)}case 1:{if(M(e[0]))return e[0].clone();if(K(e[0]))return new $(e[0].hour,e[0].minute,e[0].second,e[0].millisecond);if(L(e[0]))return new $(0,0,0,0);if(F(e[0]))return $.fromString(e[0]);let t=g(e[0]);return isNaN(t)===!1?$.fromMilliseconds(t):null}case 2:return F(e[0])&&F(e[1])?$.fromString(e[0],e[1]):$.fromParts(g(e[0]),g(e[1]),0,0);case 3:return $.fromParts(g(e[0]),g(e[1]),g(e[2]),0);case 4:return $.fromParts(g(e[0]),g(e[1]),g(e[2]),g(e[3]))}throw new m(n,f.InvalidParameter,a)})},r.dateonly=function(n,a){return i(n,a,(o,u,e)=>{if(h(e,0,3,n,a),e.length===3)return Q.fromParts(g(e[0]),g(e[1])+1,g(e[2]));if(e.length===2){let t=v(e[1]);return t===""?null:t==="X"?Q.fromSeconds(g(e[0])):t==="x"?Q.fromMilliseconds(g(e[0])):Q.fromString(v(e[0]),t)}if(e.length===1){if(F(e[0])){if(e[0].replaceAll(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")==="")return null;if(/^[0-9][0-9][0-9][0-9]$/.test(e[0])===!0)return Q.fromString(e[0]+"-01-01")}if(L(e[0]))return e[0].clone();if(K(e[0]))return Q.fromParts(e[0].year,e[0].monthJS+1,e[0].day);let t=g(e[0]);return isNaN(t)===!1?Q.fromMilliseconds(t):F(e[0])?Q.fromString(e[0]):null}if(e.length===0){let t=O.nowToArcadeDate(I(n));return t.isValid===!1?null:Q.fromParts(t.year,t.monthJS+1,t.day)}return null})},r.changetimezone=function(n,a){return i(n,a,(o,u,e)=>{if(h(e,2,2,n,a),e[0]===null)return null;if(L(e[0]))throw new m(n,f.CannotChangeTimeZoneDateOnly,a);if(L(e[0]))throw new m(n,f.CannotChangeTimeZoneTime,a);let t=U(e[0],I(n));if(t===null)throw new m(n,f.InvalidParameter,a);let s=_e(ke(v(e[1]),n),!1);if(s===null)return null;let l=O.arcadeDateAndZoneToArcadeDate(t,s);return l.isValid===!1?null:l})},r.timezone=function(n,a){return i(n,a,(o,u,e)=>{if(h(e,1,2,n,a),M(e[0])||L(e[0]))return"Unknown";let t=U(e[0],I(n));if(t===null)return null;let s=t.timeZone;return s==="system"?O.systemTimeZoneCanonicalName:s.toLowerCase()==="utc"?"UTC":s.toLowerCase()==="unknown"?"Unknown":s})},r.timezoneoffset=function(n,a){return i(n,a,(o,u,e)=>{h(e,1,1,n,a);let t=U(e[0],I(n));return t===null?null:60*t.timeZoneOffset*1e3})},r.now=function(n,a){return i(n,a,(o,u,e)=>{h(e,0,0,n,a);let t=O.nowToArcadeDate(I(n));return t.isValid===!1?null:t})},r.timestamp=function(n,a){return i(n,a,(o,u,e)=>{h(e,0,0,n,a);let t=O.nowUTCToArcadeDate();return t.isValid===!1?null:t})},r.toutc=function(n,a){return i(n,a,(o,u,e)=>{h(e,1,1,n,a);let t=U(e[0],I(n));return t===null?null:t.toUTC()})},r.tolocal=function(n,a){return i(n,a,(o,u,e)=>{h(e,1,1,n,a);let t=U(e[0],I(n));return t===null?null:t.toLocal()})},r.day=function(n,a){return i(n,a,(o,u,e)=>{h(e,1,1,n,a);let t=ae(e[0],I(n));return t===null?NaN:t.day})},r.month=function(n,a){return i(n,a,(o,u,e)=>{h(e,1,1,n,a);let t=ae(e[0],I(n));return t===null?NaN:t.monthJS})},r.year=function(n,a){return i(n,a,(o,u,e)=>{h(e,1,1,n,a);let t=ae(e[0],I(n));return t===null?NaN:t.year})},r.hour=function(n,a){return i(n,a,(o,u,e)=>{if(h(e,1,1,n,a),M(e[0]))return e[0].hour;let t=U(e[0],I(n));return t===null?NaN:t.hour})},r.second=function(n,a){return i(n,a,(o,u,e)=>{if(h(e,1,1,n,a),M(e[0]))return e[0].second;let t=U(e[0],I(n));return t===null?NaN:t.second})},r.millisecond=function(n,a){return i(n,a,(o,u,e)=>{if(h(e,1,1,n,a),M(e[0]))return e[0].millisecond;let t=U(e[0],I(n));return t===null?NaN:t.millisecond})},r.minute=function(n,a){return i(n,a,(o,u,e)=>{if(h(e,1,1,n,a),M(e[0]))return e[0].minute;let t=U(e[0],I(n));return t===null?NaN:t.minute})},r.week=function(n,a){return i(n,a,(o,u,e)=>{h(e,1,2,n,a);let t=ae(e[0],I(n));if(t===null)return NaN;let s=g(C(e[1],0));if(s<0||s>6)throw new m(n,f.InvalidParameter,a);let l=t.day,d=t.monthJS,c=t.year,p=t.dayOfWeekJS,w=et(l,d,c)-1,x=Math.floor(w/7);return p-s+(p-s<0?7:0)<w-7*x?x+1:x})},r.weekday=function(n,a){return i(n,a,(o,u,e)=>{h(e,1,1,n,a);let t=ae(e[0],I(n));return t===null?NaN:t.dayOfWeekJS})},r.isoweekday=function(n,a){return i(n,a,(o,u,e)=>{h(e,1,1,n,a);let t=ae(e[0],I(n));return t===null?NaN:t.dayOfWeekISO})},r.isomonth=function(n,a){return i(n,a,(o,u,e)=>{h(e,1,1,n,a);let t=ae(e[0],I(n));return t===null?NaN:t.monthISO})},r.isoweek=function(n,a){return i(n,a,(o,u,e)=>{h(e,1,1,n,a);let t=ae(e[0],I(n));return t===null?NaN:t.weekISO})},r.isoyear=function(n,a){return i(n,a,(o,u,e)=>{h(e,1,1,n,a);let t=ae(e[0],I(n));return t===null?NaN:t.yearISO})},r.date=function(n,a){return i(n,a,(o,u,e)=>{if(h(e,0,8,n,a),e.length===3){if(L(e[0])&&M(e[1])&&F(e[2])){let t=_e(ke(v(e[2])??"unknown",n),!1);return t===null?null:Y(O.fromParts(e[0].year,e[0].month,e[0].day,e[1].hour,e[1].minute,e[1].second,e[1].millisecond,t))}return Y(O.fromParts(g(e[0]),g(e[1])+1,g(e[2]),0,0,0,0,I(n)))}if(e.length===4)return Y(O.fromParts(g(e[0]),g(e[1])+1,g(e[2]),g(e[3]),0,0,0,I(n)));if(e.length===5)return Y(O.fromParts(g(e[0]),g(e[1])+1,g(e[2]),g(e[3]),g(e[4]),0,0,I(n)));if(e.length===6)return Y(O.fromParts(g(e[0]),g(e[1])+1,g(e[2]),g(e[3]),g(e[4]),g(e[5]),0,I(n)));if(e.length===7)return Y(O.fromParts(g(e[0]),g(e[1])+1,g(e[2]),g(e[3]),g(e[4]),g(e[5]),g(e[6]),I(n)));if(e.length===8){let t=_e(ke(v(e[7])??"unknown",n),!1);return t===null?null:Y(O.fromParts(g(e[0]),g(e[1])+1,g(e[2]),g(e[3]),g(e[4]),g(e[5]),g(e[6]),t))}if(e.length===2){if(L(e[0])&&F(e[1])){let l=_e(ke(v(e[1])??"unknown",n),!1);return l===null?null:Y(O.fromParts(e[0].year,e[0].month,e[0].day,0,0,0,0,l))}if(L(e[0])&&M(e[1]))return Y(O.fromParts(e[0].year,e[0].month,e[0].day,e[1].hour,e[1].minute,e[1].second,e[1].millisecond,"unknown"));let t,s=v(e[1]);return s===""?null:(s=vn(s,!0),t=s==="X"?Ie.fromSeconds(g(e[0])):s==="x"?Ie.fromMillis(g(e[0])):Ie.fromFormat(v(e[0]),s,{locale:dn(),numberingSystem:"latn"}),t.isValid?O.dateTimeToArcadeDate(t):null)}if(e.length===1){if(L(e[0]))return Y(O.fromParts(e[0].year,e[0].month,e[0].day,0,0,0,0,"unknown"));if(F(e[0])){if(e[0].replaceAll(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")==="")return null;if(/^[0-9][0-9][0-9][0-9]$/.test(e[0])===!0)return U(e[0]+"-01-01",I(n))}let t=g(e[0]);if(isNaN(t)===!1){let s=Ie.fromMillis(t);return s.isValid?O.dateTimeAndZoneToArcadeDate(s,I(n)):null}return U(e[0],I(n))}return e.length===0?O.nowToArcadeDate(I(n)):null})},r.datediff=function(n,a){return i(n,a,(o,u,e)=>{if(h(e,2,4,n,a),M(e[0]))return M(e[1])?e[0].difference(e[1],v(e[2])):NaN;if(M(e[1]))return NaN;if(L(e[0]))return L(e[1])?e[0].difference(e[1],v(e[2])):NaN;if(L(e[1]))return NaN;let t=U(e[0],I(n)),s=U(e[1],I(n));if(t===null||s===null)return NaN;let l=C(e[3],"");switch(l!==""&&l!==null?(l=ke(v(l),n),t=O.arcadeDateAndZoneToArcadeDate(t,l),s=O.arcadeDateAndZoneToArcadeDate(s,l)):t.timeZone!==s.timeZone&&(t.isUnknownTimeZone?t=O.arcadeDateAndZoneToArcadeDate(t,s.timeZone):s=(s.isUnknownTimeZone,O.arcadeDateAndZoneToArcadeDate(s,t.timeZone))),v(e[2]).toLowerCase()){case"days":case"day":case"d":return t.diff(s,"days");case"months":case"month":return t.diff(s,"months");case"minutes":case"minute":case"m":return e[2]==="M"?t.diff(s,"months"):t.diff(s,"minutes");case"seconds":case"second":case"s":return t.diff(s,"seconds");case"milliseconds":case"millisecond":case"ms":default:return t.diff(s);case"hours":case"hour":case"h":return t.diff(s,"hours");case"years":case"year":case"y":return t.diff(s,"years")}})},r.dateadd=function(n,a){return i(n,a,(o,u,e)=>{h(e,2,3,n,a);let t=g(e[1]);if(isNaN(t)||t===1/0||t===-1/0)return M(e[0])||L(e[0])?e[0].clone():U(e[0],I(n));let s="milliseconds";switch(v(e[2]).toLowerCase()){case"days":case"day":case"d":s="days",t=L(e[0])?t:Xe(t);break;case"months":case"month":s="months",t=L(e[0])?t:Xe(t);break;case"minutes":case"minute":case"m":s=e[2]==="M"?"months":"minutes";break;case"seconds":case"second":case"s":s="seconds";break;case"milliseconds":case"millisecond":case"ms":s="milliseconds";break;case"hours":case"hour":case"h":s="hours";break;case"years":case"year":case"y":s="years"}if(M(e[0])||L(e[0]))return e[0].plus(s,t);let l=U(e[0],I(n));return l===null?null:l.plus({[s]:t})})}}function qe(r){return r&&r.arcadeDeclaredClass==="esri.arcade.Feature"}function cr(r,i){r.ringisclockwise=function(n,a){return i(n,a,(o,u,e)=>{h(e,1,1,n,a);let t=[];if(e[0]===null)return!1;if(S(e[0]))for(let s of e[0]){if(!(s instanceof z))throw new m(n,f.InvalidParameter,a);t.push(s.hasZ?s.hasM?[s.x,s.y,s.z,s.m]:[s.x,s.y,s.z]:[s.x,s.y])}else if(e[0]instanceof Be)t=e[0]._elements;else{if(!P(e[0]))throw new m(n,f.InvalidParameter,a);for(let s of e[0].toArray()){if(!(s instanceof z))throw new m(n,f.InvalidParameter,a);t.push(s.hasZ?s.hasM?[s.x,s.y,s.z,s.m]:[s.x,s.y,s.z]:[s.x,s.y])}}return!(t.length<3)&&pn(t)})},r.polygon=function(n,a){return i(n,a,(o,u,e)=>{h(e,1,1,n,a);let t=null;if(e[0]instanceof _){if(t=j(T.parseGeometryFromDictionary(e[0],n.spatialReference),n.spatialReference),!(t instanceof oe))throw new m(n,f.InvalidParameter,a)}else if(e[0]instanceof oe)t=V(e[0].toJSON());else{let s=JSON.parse(e[0]);s&&!s.spatialReference&&(s.spatialReference=n.spatialReference),t=j(new oe(s),n.spatialReference)}if(t!==null&&t.spatialReference.equals(n.spatialReference)===!1)throw new m(n,f.WrongSpatialReference,a);return de(t)})},r.polyline=function(n,a){return i(n,a,(o,u,e)=>{h(e,1,1,n,a);let t=null;if(e[0]instanceof _){if(t=j(T.parseGeometryFromDictionary(e[0],n.spatialReference),n.spatialReference),!(t instanceof ce))throw new m(n,f.InvalidParameter,a)}else if(e[0]instanceof ce)t=V(e[0].toJSON());else{let s=JSON.parse(e[0]);s&&!s.spatialReference&&(s.spatialReference=n.spatialReference),t=j(new ce(s),n.spatialReference)}if(t!==null&&t.spatialReference.equals(n.spatialReference)===!1)throw new m(n,f.WrongSpatialReference,a);return de(t)})},r.point=function(n,a){return i(n,a,(o,u,e)=>{h(e,1,1,n,a);let t=null;if(e[0]instanceof _){if(t=j(T.parseGeometryFromDictionary(e[0],n.spatialReference),n.spatialReference),!(t instanceof z))throw new m(n,f.InvalidParameter,a)}else if(e[0]instanceof z)t=V(e[0].toJSON());else{let s=JSON.parse(e[0]);s&&!s.spatialReference&&(s.spatialReference=n.spatialReference),t=j(new z(s),n.spatialReference)}if(t!==null&&t.spatialReference.equals(n.spatialReference)===!1)throw new m(n,f.WrongSpatialReference,a);return de(t)})},r.multipoint=function(n,a){return i(n,a,(o,u,e)=>{h(e,1,1,n,a);let t=null;if(e[0]instanceof _){if(t=j(T.parseGeometryFromDictionary(e[0],n.spatialReference),n.spatialReference),!(t instanceof se))throw new m(n,f.InvalidParameter,a)}else if(e[0]instanceof se)t=V(e[0].toJSON());else{let s=JSON.parse(e[0]);s&&!s.spatialReference&&(s.spatialReference=n.spatialReference),t=j(new se(s),n.spatialReference)}if(t!==null&&t.spatialReference.equals(n.spatialReference)===!1)throw new m(n,f.WrongSpatialReference,a);return de(t)})},r.extent=function(n,a){return i(n,a,(o,u,e)=>{e=Re(e),h(e,1,1,n,a);let t=null;if(e[0]instanceof _)t=j(T.parseGeometryFromDictionary(e[0],n.spatialReference),n.spatialReference);else if(e[0]instanceof z){let s={xmin:e[0].x,ymin:e[0].y,xmax:e[0].x,ymax:e[0].y,spatialReference:e[0].spatialReference.toJSON()},l=e[0];l.hasZ?(s.zmin=l.z,s.zmax=l.z):l.hasM&&(s.mmin=l.m,s.mmax=l.m),t=V(s)}else if(e[0]instanceof oe)t=V(e[0].extent?.toJSON());else if(e[0]instanceof ce)t=V(e[0].extent?.toJSON());else if(e[0]instanceof se)t=V(e[0].extent?.toJSON());else if(e[0]instanceof be)t=V(e[0].toJSON());else{let s=JSON.parse(e[0]);s&&!s.spatialReference&&(s.spatialReference=n.spatialReference),t=j(new be(s),n.spatialReference)}if(t!==null&&t.spatialReference.equals(n.spatialReference)===!1)throw new m(n,f.WrongSpatialReference,a);return de(t)})},r.geometry=function(n,a){return i(n,a,(o,u,e)=>{h(e,1,1,n,a);let t=null;if(e[0]===null)return null;if(qe(e[0]))t=j(e[0].geometry(),n.spatialReference);else if(e[0]instanceof _)t=j(T.parseGeometryFromDictionary(e[0],n.spatialReference),n.spatialReference);else{let s=JSON.parse(e[0]);s&&!s.spatialReference&&(s.spatialReference=n.spatialReference),t=j(V(s),n.spatialReference)}if(t!==null&&t.spatialReference.equals(n.spatialReference)===!1)throw new m(n,f.WrongSpatialReference,a);return de(t)})},r.setgeometry=function(n,a){return i(n,a,(o,u,e)=>{if(h(e,2,2,n,a),!qe(e[0]))throw new m(n,f.InvalidParameter,a);if(e[0].immutable===!0)throw new m(n,f.Immutable,a);if(!(e[1]instanceof ne||e[1]===null))throw new m(n,f.InvalidParameter,a);return e[0]._geometry=e[1],E})},r.feature=function(n,a){return i(n,a,(o,u,e)=>{if(e.length===0)throw new m(n,f.WrongNumberOfParameters,a);let t=null;if(e.length===1)if(F(e[0]))t=T.fromJson(JSON.parse(e[0]),n.timeZone);else if(qe(e[0]))t=T.createFromArcadeFeature(e[0]);else if(e[0]instanceof ne)t=T.createFromGraphicLikeObject(e[0],null,null,n.timeZone);else{if(!(e[0]instanceof _))throw new m(n,f.InvalidParameter,a);{let s=e[0].hasField("geometry")?e[0].field("geometry"):null,l=e[0].hasField("attributes")?e[0].field("attributes"):null;s!==null&&s instanceof _&&(s=T.parseGeometryFromDictionary(s,n.spatialReference)),l!==null&&(l=T.parseAttributesFromDictionary(l)),t=T.createFromGraphicLikeObject(s,l,null,n.timeZone)}}else if(e.length===2){let s=null,l=null;if(e[0]!==null)if(e[0]instanceof ne)s=e[0];else{if(!(s instanceof _))throw new m(n,f.InvalidParameter,a);s=T.parseGeometryFromDictionary(e[0],n.spatialReference)}if(e[1]!==null){if(!(e[1]instanceof _))throw new m(n,f.InvalidParameter,a);l=T.parseAttributesFromDictionary(e[1])}t=T.createFromGraphicLikeObject(s,l,null,n.timeZone)}else{let s=null,l={};if(e[0]!==null)if(e[0]instanceof ne)s=e[0];else{if(!(s instanceof _))throw new m(n,f.InvalidParameter,a);s=T.parseGeometryFromDictionary(e[0],n.spatialReference)}for(let d=1;d<e.length;d+=2){let c=v(e[d]),p=e[d+1];if(!(p==null||F(p)||isNaN(p)||K(p)||G(p)||M(p)||L(p)||H(p)))throw new m(n,f.InvalidParameter,a);if(me(p)||yn(p)===!1)throw new m(n,f.InvalidParameter,a);l[c]=p===E?null:p}t=T.createFromGraphicLikeObject(s,l,null,n.timeZone)}return t._geometry=j(t.geometry(),n.spatialReference),t.immutable=!1,t})},r.dictionary=function(n,a){return i(n,a,(o,u,e)=>{if(e.length===0||e.length===1&&e[0]===null){let l=new _;return l.immutable=!1,l}if(e.length===1&&F(e[0]))try{let l=JSON.parse(e[0]),d=_.convertObjectToArcadeDictionary(l,I(n),!1);return d.immutable=!1,d}catch{throw new m(n,f.InvalidParameter,a)}if(e.length===1&&e[0]instanceof ne)try{let l=e[0].toJSON();l.hasZ=e[0].hasZ===!0,l.hasM=e[0].hasM===!0;let d=_.convertObjectToArcadeDictionary(l,I(n),!1);return d.immutable=!1,d}catch{throw new m(n,f.InvalidParameter,a)}if(e.length===1&&q(e[0]))try{let l=new _;l.immutable=!1,l.setField("geometry",e[0].geometry());let d=new _;d.immutable=!1,l.setField("attributes",d);for(let c of e[0].keys())d.setField(c,e[0].field(c));return l}catch{throw new m(n,f.InvalidParameter,a)}if(e.length===1&&e[0]instanceof _)try{let l=new _;l.immutable=!1;for(let d of e[0].keys())l.setField(d,e[0].field(d));return l}catch{throw new m(n,f.InvalidParameter,a)}if(e.length===2&&e[0]instanceof _&&H(e[1]))try{if(e[1]!==!0){let l=new _;l.immutable=!1;for(let d of e[0].keys())l.setField(d,e[0].field(d));return l}return e[0].deepClone()}catch{throw new m(n,f.InvalidParameter,a)}if(e.length%2!=0)throw new m(n,f.WrongNumberOfParameters,a);let t={};for(let l=0;l<e.length;l+=2){let d=v(e[l]),c=e[l+1];if(!(c==null||F(c)||isNaN(c)||K(c)||G(c)||H(c)||L(c)||M(c)||S(c)||P(c)))throw new m(n,f.InvalidParameter,a);if(me(c))throw new m(n,f.InvalidParameter,a);t[d]=c===E?null:c}let s=new _(t);return s.immutable=!1,s})},r.haskey=function(n,a){return i(n,a,(o,u,e)=>{h(e,2,2,n,a);let t=v(e[1]);if(qe(e[0])||e[0]instanceof _)return e[0].hasField(t);if(e[0]instanceof ne){let s=Ke(e[0],t,null,null,2);return!s||s.keystate!=="notfound"}throw new m(n,f.InvalidParameter,a)})},r.hasvalue=function(n,a){return i(n,a,(o,u,e)=>{if(h(e,2,2,n,a),S(e[1])||P(e[1])){let s=e[1],l=[];if(P(s))l=s.toArray();else{if(!S(s))throw new m(n,f.InvalidParameter,a);l=s}let d=e[0];if(d===null)return!1;for(let c of l)if(q(d)){if(F(c)===!1||!d.hasField(c)||(d=d.field(c),d===null))return!1}else if(d instanceof _){if(F(c)===!1||!d.hasField(c)||(d=d.field(c),d===null))return!1}else if(d instanceof ne){if(F(c)===!1||(d=Ke(d,c,null,null,0),d===null))return!1}else if(S(d)){if(G(c)===!1||(d=d[c],d==null))return!1}else if(!P(d)||G(c)===!1||(d=d.get(c),d==null))return!1;return!0}if(e[0]===null||e[1]===null)return!1;let t=v(e[1]);return q(e[0])||e[0]instanceof _?!!e[0].hasField(t)&&e[0].field(t)!==null:e[0]instanceof ne?Ke(e[0],t,null,null,0)!==null:!1})},r.indexof=function(n,a){return i(n,a,(o,u,e)=>{h(e,2,2,n,a);let t=e[1];if(S(e[0])){for(let s=0;s<e[0].length;s++)if(ge(t,e[0][s]))return s;return-1}if(P(e[0])){let s=e[0].length();for(let l=0;l<s;l++)if(ge(t,e[0].get(l)))return l;return-1}throw new m(n,f.InvalidParameter,a)})},r.angle=function(n,a){return i(n,a,(o,u,e)=>{if(e=Re(e),h(e,2,3,n,a),!(e[0]instanceof z))throw new m(n,f.InvalidParameter,a);if(!(e[1]instanceof z))throw new m(n,f.InvalidParameter,a);if(e.length>2&&!(e[2]instanceof z))throw new m(n,f.InvalidParameter,a);return e.length===2?Rn(e[0],e[1]):Pn(e[0],e[1],e[2])})},r.bearing=function(n,a){return i(n,a,(o,u,e)=>{if(e=Re(e),h(e,2,3,n,a),!(e[0]instanceof z))throw new m(n,f.InvalidParameter,a);if(!(e[1]instanceof z))throw new m(n,f.InvalidParameter,a);if(e.length>2&&!(e[2]instanceof z))throw new m(n,f.InvalidParameter,a);return e.length===2?kn(e[0],e[1]):Fn(e[0],e[1],e[2])})},r.isselfintersecting=function(n,a){return i(n,a,(o,u,e)=>{e=Re(e),h(e,1,1,n,a);let t=e[0];if(t instanceof oe)return t.isSelfIntersecting;if(t instanceof ce)return t=t.paths,$e(t);if(t instanceof se){let s=t.points;for(let l=0;l<s.length;l++)for(let d=0;d<s.length;d++)if(d!==l){let c=!0;for(let p=0;p<s[l].length;p++)if(s[l][p]!==s[d][p]){c=!1;break}if(c===!0)return!0}}return!(!S(t)&&!P(t))&&(t=In(t,n.spatialReference),t!==null&&(t=t.paths),$e(t))})}}var ie=0;function Ke(r,i,n,a,o=1){let u;switch(i=i.toLowerCase()){case"hasz":{let e=r.hasZ;return e!==void 0&&e}case"hasm":{let e=r.hasM;return e!==void 0&&e}case"spatialreference":{let e=r.spatialReference._arcadeCacheId;if(e===void 0){let s=!0;Object.freeze&&Object.isFrozen(r.spatialReference)&&(s=!1),s&&(ie++,r.spatialReference._arcadeCacheId=ie,e=ie)}let t=new _({wkt:r.spatialReference.wkt,wkid:r.spatialReference.wkid});return e!==void 0&&(t._arcadeCacheId="SPREF"+e.toString()),t}}switch(r.type){case"extent":switch(i){case"xmin":case"xmax":case"ymin":case"ymax":case"zmin":case"zmax":case"mmin":case"mmax":{let e=r[i];return e!==void 0?e:null}case"type":return"Extent"}break;case"polygon":switch(i){case"rings":return u=r.cache._arcadeCacheId,u===void 0&&(ie++,u=ie,r.cache._arcadeCacheId=u),new Ve(r.rings,r.spatialReference,r.hasZ===!0,r.hasM===!0,u);case"type":return"Polygon"}break;case"point":switch(i){case"x":case"y":case"z":case"m":return r[i]!==void 0?r[i]:null;case"type":return"Point"}break;case"polyline":switch(i){case"paths":return u=r.cache._arcadeCacheId,u===void 0&&(ie++,u=ie,r.cache._arcadeCacheId=u),new Ve(r.paths,r.spatialReference,r.hasZ===!0,r.hasM===!0,u);case"type":return"Polyline"}break;case"multipoint":switch(i){case"points":return u=r.cache._arcadeCacheId,u===void 0&&(ie++,u=ie,r.cache._arcadeCacheId=u),new Be(r.points,r.spatialReference,r.hasZ===!0,r.hasM===!0,u,1);case"type":return"Multipoint"}}if(o===1)throw new m(n,f.InvalidIdentifier,a);return o===2?{keystate:"notfound"}:null}function Ye(r,i,n){return n===void 0||+n==0?Math[r](i):(i=+i,n=+n,isNaN(i)||typeof n!="number"||n%1!=0?NaN:(i=i.toString().split("e"),+((i=(i=Math[r](+(i[0]+"e"+(i[1]?+i[1]-n:-n)))).toString().split("e"))[0]+"e"+(i[1]?+i[1]+n:n))))}function mr(r,i){function n(a,o,u){let e=g(a);return isNaN(e)?e:isNaN(o)||isNaN(u)||o>u?NaN:e<o?o:e>u?u:e}r.number=function(a,o){return i(a,o,(u,e,t)=>{h(t,1,2,a,o);let s=t[0];if(G(s))return s;if(s===null)return 0;if(K(s)||M(s)||L(s))return s.toNumber();if(H(s))return Number(s);if(S(s))return NaN;if(s===""||s===void 0)return Number(s);if(F(s)){if(t[1]!==void 0){let l=Se(t[1],"\u2030","");return l=Se(l,"\xA4",""),wn(s,{pattern:l})}return Number(s.trim())}return Number(s)})},r.abs=function(a,o){return i(a,o,(u,e,t)=>(h(t,1,1,a,o),Math.abs(g(t[0]))))},r.acos=function(a,o){return i(a,o,(u,e,t)=>(h(t,1,1,a,o),Math.acos(g(t[0]))))},r.asin=function(a,o){return i(a,o,(u,e,t)=>(h(t,1,1,a,o),Math.asin(g(t[0]))))},r.atan=function(a,o){return i(a,o,(u,e,t)=>(h(t,1,1,a,o),Math.atan(g(t[0]))))},r.atan2=function(a,o){return i(a,o,(u,e,t)=>(h(t,2,2,a,o),Math.atan2(g(t[0]),g(t[1]))))},r.ceil=function(a,o){return i(a,o,(u,e,t)=>{if(h(t,1,2,a,o),t.length===2){let s=g(t[1]);return isNaN(s)&&(s=0),Ye("ceil",g(t[0]),-1*s)}return Math.ceil(g(t[0]))})},r.round=function(a,o){return i(a,o,(u,e,t)=>{if(h(t,1,2,a,o),t.length===2){let s=g(t[1]);return isNaN(s)&&(s=0),Ye("round",g(t[0]),-1*s)}return Math.round(g(t[0]))})},r.floor=function(a,o){return i(a,o,(u,e,t)=>{if(h(t,1,2,a,o),t.length===2){let s=g(t[1]);return isNaN(s)&&(s=0),Ye("floor",g(t[0]),-1*s)}return Math.floor(g(t[0]))})},r.cos=function(a,o){return i(a,o,(u,e,t)=>(h(t,1,1,a,o),Math.cos(g(t[0]))))},r.isnan=function(a,o){return i(a,o,(u,e,t)=>(h(t,1,1,a,o),typeof t[0]=="number"&&isNaN(t[0])))},r.exp=function(a,o){return i(a,o,(u,e,t)=>(h(t,1,1,a,o),Math.exp(g(t[0]))))},r.log=function(a,o){return i(a,o,(u,e,t)=>(h(t,1,1,a,o),Math.log(g(t[0]))))},r.pow=function(a,o){return i(a,o,(u,e,t)=>(h(t,2,2,a,o),g(t[0])**g(t[1])))},r.random=function(a,o){return i(a,o,(u,e,t)=>(h(t,0,0,a,o),Math.random()))},r.sin=function(a,o){return i(a,o,(u,e,t)=>(h(t,1,1,a,o),Math.sin(g(t[0]))))},r.sqrt=function(a,o){return i(a,o,(u,e,t)=>(h(t,1,1,a,o),Math.sqrt(g(t[0]))))},r.tan=function(a,o){return i(a,o,(u,e,t)=>(h(t,1,1,a,o),Math.tan(g(t[0]))))},r.isempty=function(a,o){return i(a,o,(u,e,t)=>(h(t,1,1,a,o),t[0]===null||t[0]===""||t[0]===void 0||t[0]===E))},r.boolean=function(a,o){return i(a,o,(u,e,t)=>{h(t,1,1,a,o);let s=t[0];return De(s)})},r.constrain=function(a,o){return i(a,o,(u,e,t)=>{h(t,3,3,a,o);let s=g(t[1]),l=g(t[2]);if(S(t[0])){let d=[];for(let c of t[0])d.push(n(c,s,l));return d}if(P(t[0])){let d=[];for(let c=0;c<t[0].length();c++)d.push(n(t[0].get(c),s,l));return d}return n(t[0],s,l)})}}function ue(r,i,n,a){if(a.length===1){if(S(a[0]))return Ue(r,a[0],-1);if(P(a[0]))return Ue(r,a[0].toArray(),-1)}return Ue(r,a,-1)}function wr(r,i){r.stdev=function(n,a){return i(n,a,(o,u,e)=>ue("stdev",o,u,e))},r.variance=function(n,a){return i(n,a,(o,u,e)=>ue("variance",o,u,e))},r.average=function(n,a){return i(n,a,(o,u,e)=>ue("mean",o,u,e))},r.mean=function(n,a){return i(n,a,(o,u,e)=>ue("mean",o,u,e))},r.sum=function(n,a){return i(n,a,(o,u,e)=>ue("sum",o,u,e))},r.min=function(n,a){return i(n,a,(o,u,e)=>ue("min",o,u,e))},r.max=function(n,a){return i(n,a,(o,u,e)=>ue("max",o,u,e))},r.distinct=function(n,a){return i(n,a,(o,u,e)=>ue("distinct",o,u,e))},r.count=function(n,a){return i(n,a,(o,u,e)=>{if(h(e,1,1,n,a),S(e[0])||F(e[0]))return e[0].length;if(P(e[0]))return e[0].length();throw new m(n,f.InvalidParameter,a)})}}var ln=r=>(i,n,a)=>(a=a||14,+r(i,n).toFixed(a)),at=(r,i)=>r+i;var it=(r,i)=>r*i,st=(r,i)=>r/i,Un=(r,i,n)=>ln(at)(r,i,n);var ve=(r,i,n)=>ln(it)(r,i,n),He=(r,i,n)=>ln(st)(r,i,n),Ge=360,ot=400,ct=2*Math.PI,W=3600,zn=3240,Oe=60,le=60,jn=180*W/Math.PI,Fe=Ge*Oe*le,en=90*W,we=180*W,ut=270*W,Jn="\u1D4D",Ee="\xB0";function Pe(r){if(F(r)===!1)throw new m(null,f.InvalidParameter,null);return r}function an(r,i){let n=10**i;return Math.round(r*n)/n}function lt(r,i){return r%i}function ye(r){let i=parseFloat(r.toString().replace(Math.trunc(r).toString(),"0"))*Math.sign(r);return r<0?{fraction:i,integer:Math.ceil(r)}:{fraction:i,integer:Math.floor(r)}}var k,y,N,sn;function Ae(r,i){switch(r){case k.north:return i==="SHORT"?"N":"North";case k.east:return i==="SHORT"?"E":"East";case k.south:return i==="SHORT"?"S":"South";case k.west:return i==="SHORT"?"W":"West"}}function nn(r,i){return r-Math.floor(r/i)*i}function tn(r){switch(r){case y.truncated_degrees:case y.decimal_degrees:return Ge;case y.radians:return ct;case y.gradians:return ot;case y.seconds:return Fe;case y.fractional_degree_minutes:return Oe;case y.fractional_minute_seconds:return le;default:throw new m(null,f.LogicError,null,{reason:"unsupported evaluations"})}}function Zn(r){switch(r.toUpperCase().trim()){case"NORTH":case"NORTHAZIMUTH":case"NORTH AZIMUTH":return N.north_azimuth;case"POLAR":return N.polar;case"QUADRANT":return N.quadrant;case"SOUTH":case"SOUTHAZIMUTH":case"SOUTH AZIMUTH":return N.south_azimuth}throw new m(null,f.LogicError,null,{reason:"unsupported directionType"})}function qn(r){switch(r.toUpperCase().trim()){case"D":case"DD":case"DECIMALDEGREE":case"DECIMAL DEGREE":case"DEGREE":case"DECIMALDEGREES":case"DECIMAL DEGREES":case"DEGREES":return y.decimal_degrees;case"DMS":case"DEGREESMINUTESSECONDS":case"DEGREES MINUTES SECONDS":return y.degrees_minutes_seconds;case"R":case"RAD":case"RADS":case"RADIAN":case"RADIANS":return y.radians;case"G":case"GON":case"GONS":case"GRAD":case"GRADS":case"GRADIAN":case"GRADIANS":return y.gradians}throw new m(null,f.LogicError,null,{reason:"unsupported units"})}(function(r){r[r.north=0]="north",r[r.east=1]="east",r[r.south=2]="south",r[r.west=3]="west"})(k||(k={})),function(r){r[r.decimal_degrees=1]="decimal_degrees",r[r.seconds=2]="seconds",r[r.degrees_minutes_seconds=3]="degrees_minutes_seconds",r[r.radians=4]="radians",r[r.gradians=5]="gradians",r[r.truncated_degrees=6]="truncated_degrees",r[r.fractional_degree_minutes=7]="fractional_degree_minutes",r[r.fractional_minute_seconds=8]="fractional_minute_seconds"}(y||(y={})),function(r){r[r.north_azimuth=1]="north_azimuth",r[r.polar=2]="polar",r[r.quadrant=3]="quadrant",r[r.south_azimuth=4]="south_azimuth"}(N||(N={})),function(r){r[r.meridian=0]="meridian",r[r.direction=1]="direction"}(sn||(sn={}));var fe=class r{constructor(i,n,a){this.m_degrees=i,this.m_minutes=n,this.m_seconds=a}getField(i){switch(i){case y.decimal_degrees:case y.truncated_degrees:return this.m_degrees;case y.fractional_degree_minutes:return this.m_minutes;case y.seconds:case y.fractional_minute_seconds:return this.m_seconds;default:throw new m(null,f.LogicError,null,{reason:"unexpected evaluation"})}}static secondsToDMS(i){let n=ye(i).fraction,a=ye(i).integer,o=Math.floor(a/W);a-=o*W;let u=Math.floor(a/le);return a-=u*le,new r(o,u,a+n)}static numberToDms(i){let n=ye(i).fraction,a=ye(i).integer,o=ve(ye(100*n).fraction,100),u=ye(100*n).integer;return new r(a,u,o)}format(i,n){let a=an(this.m_seconds,n),o=this.m_minutes,u=this.m_degrees;if(i===y.seconds||i===y.fractional_minute_seconds)le<=a&&(a-=le,++o),Oe<=o&&(o=0,++u),Ge<=u&&(u=0);else if(i===y.fractional_degree_minutes)a=0,o=30<=this.m_seconds?this.m_minutes+1:this.m_minutes,u=this.m_degrees,Oe<=o&&(o=0,++u),Ge<=u&&(u=0);else if(i===y.decimal_degrees||i===y.truncated_degrees){let e=He(this.m_seconds,W),t=He(this.m_minutes,Oe);u=Math.round(this.m_degrees+t+e),o=0,a=0}return new r(u,o,a)}static dmsToSeconds(i,n,a){return i*W+n*le+a}},on=class{constructor(i,n,a){this.meridian=i,this.angle=n,this.direction=a}fetchAzimuth(i){return i===sn.meridian?this.meridian:this.direction}},ee=class r{constructor(i){this._angle=i}static createFromAngleAndDirection(i,n){return new r(new J(r._convertDirectionFormat(i.extractAngularUnits(y.seconds),n,N.north_azimuth)))}getAngle(i){let n=this._angle.extractAngularUnits(y.seconds);switch(i){case N.north_azimuth:case N.south_azimuth:case N.polar:return new J(r._convertDirectionFormat(n,N.north_azimuth,i));case N.quadrant:{let a=r.secondsNorthAzimuthToQuadrant(n);return new J(a.angle)}}}getMeridian(i){let n=this._angle.extractAngularUnits(y.seconds);switch(i){case N.north_azimuth:return k.north;case N.south_azimuth:return k.south;case N.polar:return k.east;case N.quadrant:return r.secondsNorthAzimuthToQuadrant(n).meridian}}getDirection(i){let n=this._angle.extractAngularUnits(y.seconds);switch(i){case N.north_azimuth:return k.east;case N.south_azimuth:return k.west;case N.polar:return k.north;case N.quadrant:return r.secondsNorthAzimuthToQuadrant(n).direction}}static secondsNorthAzimuthToQuadrant(i){let n=i<=en||i>=ut?k.north:k.south,a=n===k.north?Math.min(Fe-i,i):Math.abs(i-we),o=i>we?k.west:k.east;return new on(n,a,o)}static createFromAngleMeridianAndDirection(i,n,a){return new r(new J(r.secondsQuadrantToNorthAzimuth(i.extractAngularUnits(y.seconds),n,a)))}static secondsQuadrantToNorthAzimuth(i,n,a){return n===k.north?a===k.east?i:Fe-i:a===k.east?we-i:we+i}static _convertDirectionFormat(i,n,a){let o=0;switch(n){case N.north_azimuth:o=i;break;case N.polar:o=en-i;break;case N.quadrant:throw new m(null,f.LogicError,null,{reason:"unexpected evaluation"});case N.south_azimuth:o=i+we}let u=0;switch(a){case N.north_azimuth:u=o;break;case N.polar:u=en-o;break;case N.quadrant:throw new m(null,f.LogicError,null,{reason:"unexpected evaluation"});case N.south_azimuth:u=o-we}return u=lt(u,Fe),u<0?Fe+u:u}};function Hn(r,i,n){let a=null;switch(i){case y.decimal_degrees:a=ve(r,W);break;case y.seconds:a=r;break;case y.gradians:a=ve(r,zn);break;case y.radians:a=ve(r,jn);break;default:throw new m(null,f.LogicError,null,{reason:"unexpected evaluation"})}switch(n){case y.decimal_degrees:return He(a,W);case y.seconds:return a;case y.gradians:return He(a,zn);case y.radians:return a/jn;default:throw new m(null,f.LogicError,null,{reason:"unexpected evaluation"})}}var J=class r{constructor(i){this._seconds=i}static createFromAngleAndUnits(i,n){return new r(Hn(i,n,y.seconds))}extractAngularUnits(i){return Hn(this._seconds,y.seconds,Le(i))}static createFromDegreesMinutesSeconds(i,n,a){return new r(Un(Un(ve(i,W),ve(n,le)),a))}};function Le(r){switch(fn(r),r){case y.decimal_degrees:case y.truncated_degrees:case y.degrees_minutes_seconds:return y.decimal_degrees;case y.gradians:return y.gradians;case y.fractional_degree_minutes:return y.fractional_degree_minutes;case y.radians:return y.radians;case y.seconds:case y.fractional_minute_seconds:return y.seconds}}var cn=class r{constructor(i,n,a,o){this.view=i,this.angle=n,this.merdian=a,this.direction=o,this._dms=null,this._formattedDms=null}static createFromStringAndBearing(i,n,a){return new r(i,n.getAngle(a),n.getMeridian(a),n.getDirection(a))}fetchAngle(){return this.angle}fetchMeridian(){return this.merdian}fetchDirection(){return this.direction}fetchView(){return this.view}fetchDms(){return this._dms===null&&this._calculateDms(),this._dms}fetchFormattedDms(){return this._formattedDms===null&&this._calculateDms(),this._formattedDms}_calculateDms(){let i=null,n=y.truncated_degrees,a=0;for(let o=0;o<this.view.length;o++){let u=this.view[o];switch(u){case"m":i=un(this.view,o,u),n=n===y.truncated_degrees?y.fractional_degree_minutes:n,o=i.newpos;continue;case"s":i=un(this.view,o,u),n=y.fractional_minute_seconds,a=a<i.rounding?i.rounding:a,o=i.newpos;continue;default:continue}}this._dms=fe.secondsToDMS(this.angle.extractAngularUnits(y.seconds)),this._formattedDms=fe.secondsToDMS(this.angle.extractAngularUnits(y.seconds)).format(n,a)}};function ft(r,i,n,a,o){let u=null;switch(i){case y.decimal_degrees:case y.radians:case y.gradians:return u=nn(an(r.extractAngularUnits(i),a),tn(i)),u.toFixed(a).padStart(n+a+(a>0?1:0),"0");case y.truncated_degrees:case y.fractional_degree_minutes:return u=nn(o.fetchFormattedDms().getField(i),tn(i)),u.toFixed(a).padStart(n+a+(a>0?1:0),"0");case y.fractional_minute_seconds:return u=nn(an(o.fetchDms().getField(i),a),tn(i)),u.toFixed(a).padStart(n+a+(a>0?1:0),"0");default:throw new m(null,f.LogicError,null,{reason:"unexpected evaluation"})}}function mt(r,i,n){if(n===N.quadrant)throw new m(null,f.LogicError,null,{reason:"conversion error"});if(i===y.degrees_minutes_seconds){let a=fe.numberToDms(r);return ee.createFromAngleAndDirection(J.createFromDegreesMinutesSeconds(a.m_degrees,a.m_minutes,a.m_seconds),n)}return ee.createFromAngleAndDirection(J.createFromAngleAndUnits(r,Le(i)),n)}function dt(r){switch(g(r)){case 1:return{first:k.north,second:k.east};case 2:return{first:k.south,second:k.east};case 3:return{first:k.south,second:k.west};case 4:return{first:k.north,second:k.west}}return null}function Gn(r){switch(r.toUpperCase().trim()){case"N":case"NORTH":return k.north;case"E":case"EAST":return k.east;case"S":case"SOUTH":return k.south;case"W":case"WEST":return k.west}return null}function xe(r){let i=parseFloat(r);if(G(i)){if(isNaN(i))throw new m(null,f.LogicError,null,{reason:"invalid conversion"});return i}throw new m(null,f.LogicError,null,{reason:"invalid conversion"})}function rn(r,i,n){let a=n===N.quadrant,o=null,u=null,e=0,t=0,s=0;if(a){if(r.length<2)throw new m(null,f.LogicError,null,{reason:"conversion error"});s=1;let l=dt(v(r[r.length-1]));if(l?(o=l.first,u=l.second):(e=1,o=Gn(v(r[0])),u=Gn(v(r[r.length-1]))),o===null||u===null)throw new m(null,f.LogicError,null,{reason:"invalid conversion"})}switch(i){case y.decimal_degrees:case y.radians:case y.gradians:if(r.length===0)throw new m(null,f.LogicError,null,{reason:"invalid conversion"});return a?ee.createFromAngleMeridianAndDirection(J.createFromAngleAndUnits(xe(r[e]),Le(i)),o,u):ee.createFromAngleAndDirection(J.createFromAngleAndUnits(xe(r[e]),Le(i)),n);case y.degrees_minutes_seconds:if(t=r.length-s-e,t===3){let l=J.createFromDegreesMinutesSeconds(xe(r[e]),xe(r[e+1]),xe(r[e+2]));return a?ee.createFromAngleMeridianAndDirection(l,o,u):ee.createFromAngleAndDirection(l,n)}if(t===1){let l=xe(r[e]),d=fe.numberToDms(l),c=J.createFromDegreesMinutesSeconds(d.m_degrees,d.m_minutes,d.m_seconds);return a?ee.createFromAngleMeridianAndDirection(c,o,u):ee.createFromAngleAndDirection(c,n)}}throw new m(null,f.LogicError,null,{reason:"invalid conversion"})}function ht(r){let i=new Set([" ","-","/","'",'"',"\\","^",Ee,Jn,"	","\r",`
`,"*"]),n="";for(let a=0;a<r.length;a++){let o=r.charAt(a);i.has(o)?n+="RRSPLITRRSPLITRR":n+=o}return n.split("RRSPLITRRSPLITRR").filter(a=>a!=="")}function pt(r,i,n){if(G(r))return mt(g(r),i,n);if(F(r))return rn(ht(r),i,n);if(S(r))return rn(r,i,n);if(P(r))return rn(r.toArray(),i,n);throw new m(null,f.LogicError,null,{reason:"conversion error"})}function gt(r,i,n){let a=Le(n);if(a&&n!==y.degrees_minutes_seconds)return r.getAngle(i).extractAngularUnits(a);throw new m(null,f.LogicError,null,{reason:"conversion error"})}function wt(r,i,n){let a=r.getAngle(i);if(i===N.quadrant&&n===y.degrees_minutes_seconds){let o=fe.secondsToDMS(a.extractAngularUnits(y.seconds));return[Ae(r.getMeridian(i),"SHORT"),o.m_degrees,o.m_minutes,o.m_seconds,Ae(r.getDirection(i),"SHORT")]}if(n===y.degrees_minutes_seconds){let o=fe.secondsToDMS(a.extractAngularUnits(y.seconds));return[o.m_degrees,o.m_minutes,o.m_seconds]}return i===N.quadrant?[Ae(r.getMeridian(i),"SHORT"),a.extractAngularUnits(n),Ae(r.getDirection(i),"SHORT")]:[a.extractAngularUnits(n)]}function yt(r,i){let n="";switch(r){case y.decimal_degrees:n=i===N.quadrant?"DD.DD"+Ee:"DDD.DD"+Ee;break;case y.degrees_minutes_seconds:n=i===N.quadrant?"dd"+Ee+` mm' ss"`:"ddd"+Ee+` mm' ss.ss"`;break;case y.radians:n="R.RR";break;case y.gradians:n="GGG.GG"+Jn;break;default:throw new m(null,f.LogicError,null,{reason:"conversion error"})}return i===N.quadrant&&(n="p "+n+" b"),n}function un(r,i,n){let a={padding:0,rounding:0,newpos:i},o=!1;for(;i<r.length;){let u=r[i];if(u===n)o?a.rounding++:a.padding++,i++;else{if(u!==".")break;o=!0,i++}}return a.newpos=i-1,a}function xt(r,i,n){let a={escaped:"",newpos:i};for(i++;i<r.length;){let o=r[i];if(i++,o==="]")break;a.escaped+=o}return a.newpos=i-1,a}function At(r,i,n){let a="",o=null,u=null,e=cn.createFromStringAndBearing(i,r,n),t={D:y.decimal_degrees,d:y.truncated_degrees,m:y.fractional_degree_minutes,s:y.fractional_minute_seconds,R:y.radians,G:y.gradians};for(let s=0;s<i.length;s++){let l=i[s];switch(l){case"[":o=xt(i,s),a+=o.escaped,s=o.newpos;continue;case"D":case"d":case"m":case"s":case"R":case"G":o=un(i,s,l),u=r.getAngle(n),a+=ft(u,t[l],o.padding,o.rounding,e),s=o.newpos;continue;case"P":case"p":a+=Ae(e.fetchMeridian(),l==="p"?"SHORT":"LONG");continue;case"B":case"b":a+=Ae(e.fetchDirection(),l==="b"?"SHORT":"LONG");continue;default:a+=l}}return a}function Bn(r,i,n){if(!(i instanceof _))throw new m(null,f.InvalidParameter,null);if(i.hasField("directionType")===!1)throw new m(null,f.LogicError,null,{reason:"missing directionType"});if(i.hasField("angleType")===!1)throw new m(null,f.LogicError,null,{reason:"missing angleType"});let a=Zn(Pe(i.field("directiontype"))),o=pt(r,qn(Pe(i.field("angletype"))),a);if(!(n instanceof _))throw new m(null,f.InvalidParameter,null);if(n.hasField("directionType")===!1)throw new m(null,f.LogicError,null,{reason:"missing directionType"});if(n.hasField("outputType")===!1)throw new m(null,f.LogicError,null,{reason:"missing angleType"});let u=Zn(Pe(n.field("directiontype"))),e=n.hasField("angleType")?qn(Pe(n.field("angletype"))):null,t=Pe(n.field("outputType")).toUpperCase().trim();if(!u||!t)throw new m(null,f.LogicError,null,{reason:"conversion error"});if(!(e||t==="TEXT"&&n.hasField("format")))throw new m(null,f.LogicError,null,{reason:"invalid unit"});switch(t){case"VALUE":return u===N.quadrant||e===y.degrees_minutes_seconds?wt(o,u,e):gt(o,u,e);case"TEXT":{let s="";return n.hasField("format")&&(s=v(n.field("format"))),s!==null&&s!==""||(s=yt(e,u)),At(o,s,u)}default:throw new m(null,f.InvalidParameter,null)}}function Vn(r){let i=[];for(let n=0,a=r.length;n<a;n++){let o=r.charCodeAt(n);o<128?i.push(o):o<2048?i.push(192|o>>6,128|63&o):o<55296||o>=57344?i.push(224|o>>12,128|o>>6&63,128|63&o):(n++,o=65536+((1023&o)<<10|1023&r.charCodeAt(n)),i.push(240|o>>18,128|o>>12&63,128|o>>6&63,128|63&o))}return new Uint8Array(i)}var Je=class{constructor(i){this._seed=i,this._totallen=0,this._bufs=[],this.init()}init(){return this._bufs=[],this._totallen=0,this}updateFloatArray(i){let n=[];for(let a of i)isNaN(a)?n.push("NaN"):a===1/0?n.push("Infinity"):a===-1/0?n.push("-Infinity"):a===0?n.push("0"):n.push(a.toString(16));this.update(Vn(n.join("")))}updateIntArray(i){let n=Int32Array.from(i);this.update(new Uint8Array(n.buffer))}updateUint8Array(i){this.update(Uint8Array.from(i))}updateWithString(i){return this.update(Vn(i))}update(i){return this._bufs.push(i),this._totallen+=i.length,this}digest(){let i=new Uint8Array(this._totallen),n=0;for(let a of this._bufs)i.set(a,n),n+=a.length;return this.init(),this._xxHash32(i,this._seed)}_xxHash32(i,n=0){let a=i,o=n+374761393&4294967295,u=0;if(a.length>=16){let t=[n+2654435761+2246822519&4294967295,n+2246822519&4294967295,n+0&4294967295,n-2654435761&4294967295],s=i,l=s.length-16,d=0;for(u=0;(4294967280&u)<=l;u+=4){let c=u,p=s[c]+(s[c+1]<<8),w=s[c+2]+(s[c+3]<<8),x=p*2246822519+(w*2246822519<<16),b=t[d]+x&4294967295;b=b<<13|b>>>19;let A=65535&b,D=b>>>16;t[d]=A*2654435761+(D*2654435761<<16)&4294967295,d=d+1&3}o=(t[0]<<1|t[0]>>>31)+(t[1]<<7|t[1]>>>25)+(t[2]<<12|t[2]>>>20)+(t[3]<<18|t[3]>>>14)&4294967295}o=o+i.length&4294967295;let e=i.length-4;for(;u<=e;u+=4){let t=u,s=a[t]+(a[t+1]<<8),l=a[t+2]+(a[t+3]<<8);o=o+(s*3266489917+(l*3266489917<<16))&4294967295,o=o<<17|o>>>15,o=(65535&o)*668265263+((o>>>16)*668265263<<16)&4294967295}for(;u<a.length;++u)o+=a[u]*374761393,o=o<<11|o>>>21,o=(65535&o)*2654435761+((o>>>16)*2654435761<<16)&4294967295;return o^=o>>>15,o=((65535&o)*2246822519&4294967295)+((o>>>16)*2246822519<<16),o^=o>>>13,o=((65535&o)*3266489917&4294967295)+((o>>>16)*3266489917<<16),o^=o>>>16,o<0?o+4294967296:o}};function vt(r){return r.loadStatus==="loaded"&&r.user?.sourceJSON?r.user.sourceJSON:null}function It(r,i){return!!r&&mn(r,i?.restUrl||"")}function Wn(r,i){if(!r||!i)return r===i;if(r.x===i.x&&r.y===i.y){if(r.hasZ){if(r.z!==i.z)return!1}else if(i.hasZ)return!1;if(r.hasM){if(r.m!==i.m)return!1}else if(i.hasM)return!1;return!0}return!1}function B(r,i,n){if(r!==null)if(S(r)){if(i.updateUint8Array([61]),n.map.has(r)){let a=n.map.get(r);i.updateIntArray([61237541^a])}else{n.map.set(r,n.currentLength++);for(let a of r)B(a,i,n);n.map.delete(r),n.currentLength--}i.updateUint8Array([199])}else if(P(r)){if(i.updateUint8Array([61]),n.map.has(r)){let a=n.map.get(r);i.updateIntArray([61237541^a])}else{n.map.set(r,n.currentLength++);for(let a of r.toArray())B(a,i,n);n.map.delete(r),n.currentLength--}i.updateUint8Array([199])}else{if(K(r))return i.updateIntArray([r.toNumber()]),void i.updateUint8Array([241]);if(L(r))return i.updateIntArray([r.toNumber()]),void i.updateIntArray([257]);if(M(r))return i.updateIntArray([r.toNumber()]),void i.updateIntArray([263]);if(F(r))return i.updateIntArray([r.length]),i.updateWithString(r),void i.updateUint8Array([41]);if(H(r))i.updateUint8Array([r===!0?1:0,113]);else{if(G(r))return i.updateFloatArray([r]),void i.updateUint8Array([173]);if(r instanceof En)throw new m(n.context,f.UnsupportedHashType,n.node);if(r instanceof ze)throw new m(n.context,f.UnsupportedHashType,n.node);if(!(r instanceof _)){if(q(r))throw new m(n.context,f.UnsupportedHashType,n.node);if(r instanceof z)return i.updateIntArray([3833836621]),i.updateIntArray([0]),i.updateFloatArray([r.x]),i.updateIntArray([1]),i.updateFloatArray([r.y]),r.hasZ&&(i.updateIntArray([2]),i.updateFloatArray([r.z])),r.hasM&&(i.updateIntArray([3]),i.updateFloatArray([r.m])),i.updateIntArray([3765347959]),void B(r.spatialReference.wkid,i,n);if(r instanceof oe){i.updateIntArray([1266616829]);for(let a=0;a<r.rings.length;a++){let o=r.rings[a],u=[],e=null,t=null;for(let s=0;s<o.length;s++){let l=r.getPoint(a,s);if(s===0)e=l;else if(Wn(t,l))continue;t=l,s===o.length-1&&Wn(e,l)||u.push(l)}i.updateIntArray([1397116793,u.length]);for(let s=0;s<u.length;s++){let l=u[s];i.updateIntArray([3962308117,s]),B(l,i,n),i.updateIntArray([2716288009])}i.updateIntArray([2278822459])}return i.updateIntArray([3878477243]),void B(r.spatialReference.wkid,i,n)}if(r instanceof ce){i.updateIntArray([4106883559]);for(let a=0;a<r.paths.length;a++){let o=r.paths[a];i.updateIntArray([1397116793,o.length]);for(let u=0;u<o.length;u++)i.updateIntArray([3962308117,u]),B(r.getPoint(a,u),i,n),i.updateIntArray([2716288009]);i.updateIntArray([2278822459])}return i.updateIntArray([2568784753]),void B(r.spatialReference.wkid,i,n)}if(r instanceof se){i.updateIntArray([588535921,r.points.length]);for(let a=0;a<r.points.length;a++){let o=r.getPoint(a);i.updateIntArray([a]),B(o,i,n)}return i.updateIntArray([1700171621]),void B(r.spatialReference.wkid,i,n)}if(r instanceof be)return i.updateIntArray([3483648373]),i.updateIntArray([0]),i.updateFloatArray([r.xmax]),i.updateIntArray([1]),i.updateFloatArray([r.xmin]),i.updateIntArray([2]),i.updateFloatArray([r.ymax]),i.updateIntArray([3]),i.updateFloatArray([r.ymin]),r.hasZ&&(i.updateIntArray([4]),i.updateFloatArray([r.zmax]),i.updateIntArray([5]),i.updateFloatArray([r.zmin])),r.hasM&&(i.updateIntArray([6]),i.updateFloatArray([r.mmax]),i.updateIntArray([7]),i.updateFloatArray([r.mmin])),i.updateIntArray([3622027469]),void B(r.spatialReference.wkid,i,n);if(r instanceof hn)return i.updateIntArray([14]),r.wkid!==void 0&&r.wkid!==null&&i.updateIntArray([r.wkid]),r.wkt&&i.updateWithString(r.wkt),void(r.wkt2&&i.updateWithString(r.wkt2));throw me(r)?new m(n.context,f.UnsupportedHashType,n.node):xn(r)?new m(n.context,f.UnsupportedHashType,n.node):An(r)?new m(n.context,f.UnsupportedHashType,n.node):r===E?new m(n.context,f.UnsupportedHashType,n.node):new m(n.context,f.UnsupportedHashType,n.node)}if(i.updateUint8Array([223]),n.map.has(r)){let a=n.map.get(r);i.updateIntArray([61237541^a])}else{n.map.set(r,n.currentLength++);for(let a of r.keys())i.updateIntArray([a.length]),i.updateWithString(a),i.updateUint8Array([251]),B(r.field(a),i,n),i.updateUint8Array([239]);n.map.delete(r),n.currentLength--}i.updateUint8Array([73])}}else i.updateUint8Array([0,139])}function Zr(r,i){r.portal=function(n,a){return i(n,a,(o,u,e)=>(h(e,1,1,n,a),new ze(v(e[0]))))},r.typeof=function(n,a){return i(n,a,(o,u,e)=>{h(e,1,1,n,a);let t=Me(e[0]);if(t==="Unrecognized Type")throw new m(n,f.UnrecognizedType,a);return t})},r.trim=function(n,a){return i(n,a,(o,u,e)=>(h(e,1,1,n,a),v(e[0]).trim()))},r.tohex=function(n,a){return i(n,a,(o,u,e)=>{h(e,1,1,n,a);let t=g(e[0]);return isNaN(t)?t:t.toString(16)})},r.upper=function(n,a){return i(n,a,(o,u,e)=>(h(e,1,1,n,a),v(e[0]).toUpperCase()))},r.proper=function(n,a){return i(n,a,(o,u,e)=>{h(e,1,2,n,a);let t=1;e.length===2&&v(e[1]).toLowerCase()==="firstword"&&(t=2);let s=/\s/,l=v(e[0]),d="",c=!0;for(let p=0;p<l.length;p++){let w=l[p];s.test(w)?t===1&&(c=!0):w.toUpperCase()!==w.toLowerCase()&&(c?(w=w.toUpperCase(),c=!1):w=w.toLowerCase()),d+=w}return d})},r.lower=function(n,a){return i(n,a,(o,u,e)=>(h(e,1,1,n,a),v(e[0]).toLowerCase()))},r.guid=function(n,a){return i(n,a,(o,u,e)=>{if(h(e,0,1,n,a),e.length>0)switch(v(e[0]).toLowerCase()){case"digits":return pe().replace("-","").replace("-","").replace("-","").replace("-","");case"digits-hyphen":return pe();case"digits-hyphen-braces":return"{"+pe()+"}";case"digits-hyphen-parentheses":return"("+pe()+")"}return"{"+pe()+"}"})},r.standardizeguid=function(n,a){return i(n,a,(o,u,e)=>{h(e,2,2,n,a);let t=v(e[0]);if(t===""||t===null)return"";let s=/^(\{|\()?(?<partA>[0-9a-z]{8})(\-?)(?<partB>[0-9a-z]{4})(\-?)(?<partC>[0-9a-z]{4})(\-?)(?<partD>[0-9a-z]{4})(\-?)(?<partE>[0-9a-z]{12})(\}|\))?$/gim.exec(t);if(!s)return"";let l=s.groups;switch(t=l.partA+"-"+l.partB+"-"+l.partC+"-"+l.partD+"-"+l.partE,v(e[1]).toLowerCase()){case"digits":return t.replace("-","").replace("-","").replace("-","").replace("-","");case"digits-hyphen":return t;case"digits-hyphen-braces":return"{"+t+"}";case"digits-hyphen-parentheses":return"("+t+")"}return"{"+t+"}"})},r.console=function(n,a){return i(n,a,(o,u,e)=>(e.length===0||(e.length===1?n.console(v(e[0])):n.console(v(e))),E))},r.mid=function(n,a){return i(n,a,(o,u,e)=>{h(e,2,3,n,a);let t=g(e[1]);if(isNaN(t))return"";if(t<0&&(t=0),e.length===2)return v(e[0]).substr(t);let s=g(e[2]);return isNaN(s)?"":(s<0&&(s=0),v(e[0]).substr(t,s))})},r.find=function(n,a){return i(n,a,(o,u,e)=>{h(e,2,3,n,a);let t=0;if(e.length>2){if(t=g(C(e[2],0)),isNaN(t))return-1;t<0&&(t=0)}return v(e[1]).indexOf(v(e[0]),t)})},r.left=function(n,a){return i(n,a,(o,u,e)=>{h(e,2,2,n,a);let t=g(e[1]);return isNaN(t)?"":(t<0&&(t=0),v(e[0]).substr(0,t))})},r.right=function(n,a){return i(n,a,(o,u,e)=>{h(e,2,2,n,a);let t=g(e[1]);return isNaN(t)?"":(t<0&&(t=0),v(e[0]).substr(-1*t,t))})},r.split=function(n,a){return i(n,a,(o,u,e)=>{let t;h(e,2,4,n,a);let s=g(C(e[2],-1)),l=De(C(e[3],!1));if(s===-1||s===null||l===!0?t=v(e[0]).split(v(e[1])):(isNaN(s)&&(s=-1),s<-1&&(s=-1),t=v(e[0]).split(v(e[1]),s)),l===!1)return t;let d=[];for(let c=0;c<t.length&&!(s!==-1&&d.length>=s);c++)t[c]!==""&&t[c]!==void 0&&d.push(t[c]);return d})},r.text=function(n,a){return i(n,a,(o,u,e)=>(h(e,1,2,n,a),Ne(e[0],e[1])))},r.concatenate=function(n,a){return i(n,a,(o,u,e)=>{let t=[];if(e.length<1)return"";if(S(e[0])){let s=C(e[2],"");for(let l=0;l<e[0].length;l++)t[l]=Ne(e[0][l],s);return e.length>1?t.join(e[1]):t.join("")}if(P(e[0])){let s=C(e[2],"");for(let l=0;l<e[0].length();l++)t[l]=Ne(e[0].get(l),s);return e.length>1?t.join(e[1]):t.join("")}for(let s=0;s<e.length;s++)t[s]=Ne(e[s]);return t.join("")})},r.reverse=function(n,a){return i(n,a,(o,u,e)=>{if(h(e,1,1,n,a),S(e[0])){let t=e[0].slice(0);return t.reverse(),t}if(P(e[0])){let t=e[0].toArray().slice(0);return t.reverse(),t}throw new m(n,f.InvalidParameter,a)})},r.replace=function(n,a){return i(n,a,(o,u,e)=>{h(e,3,4,n,a);let t=v(e[0]),s=v(e[1]),l=v(e[2]);return e.length!==4||De(e[3])?Se(t,s,l):t.replace(s,l)})},r.schema=function(n,a){return i(n,a,(o,u,e)=>{if(q(e[0])){let t=Nn(e[0]);return t?_.convertObjectToArcadeDictionary(t,I(n)):null}throw new m(n,f.InvalidParameter,a)})},r.subtypes=function(n,a){return i(n,a,(o,u,e)=>{if(h(e,1,1,n,a),q(e[0])){let t=Te(e[0]);return t?_.convertObjectToArcadeDictionary(t,I(n)):null}throw new m(n,f.InvalidParameter,a)})},r.subtypecode=function(n,a){return i(n,a,(o,u,e)=>{if(h(e,1,1,n,a),q(e[0])){let t=Te(e[0]);if(!t)return null;if(t.subtypeField&&e[0].hasField(t.subtypeField)){let s=e[0].field(t.subtypeField);for(let l of t.subtypes)if(l.code===s)return l.code;return null}return null}throw new m(n,f.InvalidParameter,a)})},r.subtypename=function(n,a){return i(n,a,(o,u,e)=>{if(h(e,1,1,n,a),q(e[0])){let t=Te(e[0]);if(!t)return"";if(t.subtypeField&&e[0].hasField(t.subtypeField)){let s=e[0].field(t.subtypeField);for(let l of t.subtypes)if(l.code===s)return l.name;return""}return""}throw new m(n,f.InvalidParameter,a)})},r.gdbversion=function(n,a){return i(n,a,(o,u,e)=>{if(h(e,1,1,n,a),q(e[0]))return e[0].gdbVersion();throw new m(n,f.InvalidParameter,a)})},r.domain=function(n,a){return i(n,a,(o,u,e)=>{if(h(e,2,3,n,a),q(e[0])){let t=bn(e[0],v(e[1]),e[2]===void 0?void 0:e[2]);return t&&t.domain?t.domain.type==="coded-value"||t.domain.type==="codedValue"?_.convertObjectToArcadeDictionary({type:"codedValue",name:t.domain.name,dataType:We[t.field.type],codedValues:t.domain.codedValues.map(s=>({name:s.name,code:s.code}))},I(n)):_.convertObjectToArcadeDictionary({type:"range",name:t.domain.name,dataType:We[t.field.type],min:t.domain.minValue,max:t.domain.maxValue},I(n)):null}throw new m(n,f.InvalidParameter,a)})},r.domainname=function(n,a){return i(n,a,(o,u,e)=>{if(h(e,2,4,n,a),q(e[0]))return _n(e[0],v(e[1]),e[2],e[3]===void 0?void 0:e[3]);throw new m(n,f.InvalidParameter,a)})},r.domaincode=function(n,a){return i(n,a,(o,u,e)=>{if(h(e,2,4,n,a),q(e[0]))return Sn(e[0],v(e[1]),e[2],e[3]===void 0?void 0:e[3]);throw new m(n,f.InvalidParameter,a)})},r.urlencode=function(n,a){return i(n,a,(o,u,e)=>{if(h(e,1,1,n,a),e[0]===null)return"";if(e[0]instanceof _){let t="";for(let s of e[0].keys()){let l=e[0].field(s);t!==""&&(t+="&"),t+=l===null?encodeURIComponent(s)+"=":encodeURIComponent(s)+"="+encodeURIComponent(l)}return t}return encodeURIComponent(v(e[0]))})},r.hash=function(n,a){return i(n,a,(o,u,e)=>{h(e,1,1,n,a);let t=new Je(0);return B(e[0],t,{context:n,node:a,map:new Map,currentLength:0}),t.digest()})},r.convertdirection=function(n,a){return i(n,a,(o,u,e)=>(h(e,3,3,n,a),Bn(e[0],e[1],e[2])))},r.fromjson=function(n,a){return i(n,a,(o,u,e)=>{if(h(e,1,1,n,a),F(e[0])===!1)throw new m(n,f.InvalidParameter,a);return _.convertJsonToArcade(JSON.parse(v(e[0])),I(n))})},r.expects=function(n,a){return i(n,a,(o,u,e)=>{if(e.length<1)throw new m(n,f.WrongNumberOfParameters,a);return E})},r.tocharcode=function(n,a){return i(n,a,(o,u,e)=>{h(e,1,2,n,a);let t=g(C(e[1],0)),s=v(e[0]);if(s.length===0&&e.length===1)return null;if(s.length<=t||t<0)throw new m(n,f.OutOfBounds,a);return s.charCodeAt(t)})},r.tocodepoint=function(n,a){return i(n,a,(o,u,e)=>{h(e,1,2,n,a);let t=g(C(e[1],0)),s=v(e[0]);if(s.length===0&&e.length===1)return null;if(s.length<=t||t<0)throw new m(n,f.OutOfBounds,a);return s.codePointAt(t)})},r.fromcharcode=function(n,a){return i(n,a,(o,u,e)=>{if(e.length<1)throw new m(n,f.WrongNumberOfParameters,a);let t=e.map(s=>Math.trunc(g(s))).filter(s=>s>=0&&s<=65535);return t.length===0?null:String.fromCharCode.apply(null,t)})},r.fromcodepoint=function(n,a){return i(n,a,(o,u,e)=>{if(e.length<1)throw new m(n,f.WrongNumberOfParameters,a);let t;try{t=e.map(s=>Math.trunc(g(s))).filter(s=>s<=1114111&&s>>>0===s)}catch{return null}return t.length===0?null:String.fromCodePoint.apply(null,t)})},r.getuser=function(n,a){return i(n,a,(o,u,e)=>{h(e,0,2,n,a);let t=C(e[1],"");if(t=t===!0||t===!1?"":v(t),t!==null&&t!=="")return null;if(e.length===0||e[0]instanceof ze){let s=null;if(s=n.services?.portal?n.services.portal:On.getDefault(),e.length>0&&!It(e[0].field("url"),s)||!s)return null;if(t===""){let l=vt(s);if(l){let d=JSON.parse(JSON.stringify(l));for(let c of["lastLogin","created","modified"])d[c]!==void 0&&d[c]!==null&&(d[c]=new Date(d[c]));return _.convertObjectToArcadeDictionary(d,I(n))}}return null}throw new m(n,f.InvalidParameter,a)})},r.getenvironment=function(n,a){return i(n,a,(o,u,e)=>(h(e,0,0,n,a),_.convertObjectToArcadeDictionary(Dn(I(n),n.spatialReference),I(n),!0)))}}export{Ln as a,_t as b,$n as c,Kn as d,St as e,Nt as f,Dt as g,Tn as h,Rt as i,Ct as j,Jt as k,cr as l,Ke as m,mr as n,wr as o,Zr as p};
