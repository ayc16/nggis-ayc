import{A as st,B as it,C as ot,D as nt,E as at,F as me,G as ge,K as ct,L as lt,P as ut,Q as V,R as _e,S as P,a as Ve,b as _,c as Je,d as H,e as Ge,f as fe,g as d,h as We,i as de,j as Ye,k as D,l as u,m as $,n as g,o as Ke,p as Ze,q as Qe,z as rt}from"./chunk-KUJG22IX.js";import{a as he}from"./chunk-OVHPPCBL.js";import{a as ue}from"./chunk-W3WDPWBE.js";import{C as tt,a as p,j as Xe,m as et}from"./chunk-GISCFF3Z.js";import{b as $e}from"./chunk-MLSR6YE6.js";import{a as pe}from"./chunk-CPDJJRWA.js";import{b as B,e as R,f as He,r as N,t as z}from"./chunk-HQMV3KQV.js";import{a as w,g as Be,p as ze}from"./chunk-CRMMDK2Z.js";import{a as j,b as Fe,h as Le,k as je}from"./chunk-EAH6BNBL.js";var ft=new WeakMap;function jt(r,e,t=!1){let s=`\u{1F6D1} DEPRECATED - ${e}`;if(!t)return void r.warn(s);let i=ft.get(r);i||(i=new Set,ft.set(r,i)),i.has(e)||(i.add(e),r.warn(s))}function dt(r,e,t={}){if(w("esri-deprecation-warnings")){let{moduleName:s}=t;ye(r,`Function: ${(s?s+"::":"")+e+"()"}`,t)}}function Sr(r,e,t={}){if(w("esri-deprecation-warnings")){let{moduleName:s}=t;ye(r,`Property: ${(s?s+"::":"")+e}`,t)}}function Er(r,e,t={}){w("esri-deprecation-warnings")&&ye(r,`Multiple argument constructor: ${e}`,j({warnOnce:!0,replacement:`new ${e}({ <your properties here> })`},t))}function ye(r,e,t={}){if(w("esri-deprecation-warnings")){let{replacement:s,version:i,see:o,warnOnce:a}=t,n=e;s&&(n+=`
	\u{1F6E0}\uFE0F Replacement: ${s}`),i&&(n+=`
	\u2699\uFE0F Version: ${i}`),o&&(n+=`
	\u{1F517} See ${o} for more details.`),jt(r,n,a)}}var l;(function(r){r[r.DEFAULTS=0]="DEFAULTS",r[r.COMPUTED=1]="COMPUTED",r[r.SERVICE=2]="SERVICE",r[r.PORTAL_ITEM=3]="PORTAL_ITEM",r[r.WEB_SCENE=4]="WEB_SCENE",r[r.WEB_MAP=5]="WEB_MAP",r[r.LINK_CHART=6]="LINK_CHART",r[r.USER=7]="USER"})(l||(l={}));var Dr=l.USER+1;function J(r){switch(r){case"defaults":return l.DEFAULTS;case"service":return l.SERVICE;case"portal-item":return l.PORTAL_ITEM;case"web-scene":return l.WEB_SCENE;case"web-map":return l.WEB_MAP;case"link-chart":return l.LINK_CHART;case"user":return l.USER;default:return null}}function G(r){switch(r){case l.DEFAULTS:return"defaults";case l.SERVICE:return"service";case l.PORTAL_ITEM:return"portal-item";case l.WEB_SCENE:return"web-scene";case l.WEB_MAP:return"web-map";case l.LINK_CHART:return"link-chart";case l.USER:return"user"}}function ht(r){return G(r)}var M=class{constructor(e,t=30){this.name=e,this._counter=0,this._samples=new Array(t)}record(e){e!=null&&(this._samples[++this._counter%this._samples.length]=e)}get median(){return this._samples.slice().sort((e,t)=>e-t)[Math.floor(this._samples.length/2)]}get average(){return this._samples.reduce((e,t)=>e+t,0)/this._samples.length}get last(){return this._samples[this._counter%this._samples.length]}};var ve=class{constructor(e){this.phases=e,this.paused=!1,this.ticks=-1,this.removed=!1}},Oe=class{constructor(e){this.callback=e,this.isActive=!0}remove(){this.isActive=!1}},we=0,pt=0,U={time:0,deltaTime:0,elapsedFrameTime:0,frameDuration:0},be=["prepare","preRender","render","postRender","update","finish"],Te=[],T=new pe,Se=class{constructor(e){this._task=e}remove(){this._task.removed=!0}pause(){this._task.paused=!0}resume(){this._task.paused=!1}};function Bt(){b!=null&&(cancelAnimationFrame(b),b=requestAnimationFrame(Ee))}var Y={frameTasks:T,willDispatch:!1,clearFrameTasks:zt,dispatch:_t,executeFrameTasks:Ht,reschedule:Bt};function mt(r){let e=new Oe(r);return Te.push(e),Y.willDispatch||(Y.willDispatch=!0,he(_t)),e}function qr(r){let e=new ve(r);return T.push(e),b==null&&(we=performance.now(),b=requestAnimationFrame(Ee)),new Se(e)}var b=null;function zt(r=!1){T.forAll(e=>{e.removed=!0}),r&&gt()}function Ee(){let r=performance.now();b=null,b=T.length>0?requestAnimationFrame(Ee):null,Y.executeFrameTasks(r)}function Ht(r){let e=r-we;we=r;let t=pt>0?pt:1e3/60,s=Math.max(0,e-t);U.time=r,U.frameDuration=t-s;for(let i=0;i<be.length;i++){let o=performance.now(),a=be[i];T.forAll(n=>{n.paused||n.removed||(i===0&&n.ticks++,n.phases[a]&&(U.elapsedFrameTime=performance.now()-r,U.deltaTime=n.ticks===0?0:e,n.phases[a]?.call(n,U)))}),Jt[i].record(performance.now()-o)}gt(),Gt.record(performance.now()-r)}var W=new pe;function gt(){T.forAll(r=>{r.removed&&W.push(r)}),T.removeUnorderedMany(W.data,W.length),W.clear()}function _t(){for(;Te.length;){let r=Te.shift();r.isActive&&r.callback()}Y.willDispatch=!1}function $t(r=1,e){let t=tt(),s=()=>{et(e)?t.reject(Xe()):r===0?t():(--r,he(()=>s()))};return s(),t.promise}function Vt(r){return $t(1,r)}function Fr(){return Le(this,null,function*(){yield Vt(),yield new Promise(r=>requestAnimationFrame(r))})}var Jt=be.map(r=>new M(r)),Gt=new M("total");var k=class{constructor(e){this._accessed=new Set,this._handles=[],this._observerObject=new Ae(e),yt.register(this,new WeakRef(this._observerObject),this)}destroy(){yt.unregister(this._observerObject),this._accessed.clear(),this._observerObject?.destroy(),this.clear()}onObservableAccessed(e){this._accessed.add(e)}onTrackingEnd(){let e=this._handles,t=this._observerObject;this._accessed.forEach(s=>{e.push(s.observe(t))}),this._accessed.clear()}clear(){let e=this._handles;for(let t=0;t<e.length;++t)e[t].remove();e.length=0}},Ae=class{constructor(e){this._notify=e,this._invalidCount=0,this.destroyed=!1}onInvalidated(){this._invalidCount++}onCommitted(){if(this.destroyed)return;let e=this._invalidCount;if(e===1)return this._invalidCount=0,void this._notify();this._invalidCount=e>0?e-1:0}destroy(){this.destroyed=!0,this._notify=Wt}},yt=new FinalizationRegistry(r=>{r.deref()?.destroy()});function Wt(){}function Yt(r){r.length=0}var q=class{constructor(e=50,t=50){this._pool=new D(Array,void 0,Yt,t,e)}acquire(){return this._pool.acquire()}release(e){this._pool.release(e)}prune(){this._pool.prune(0)}static acquire(){return Ne.acquire()}static release(e){return Ne.release(e)}static prune(){Ne.prune()}},Ne=new q(100);var K=class extends D{constructor(){super(...arguments),this._set=new Set}destroy(){super.destroy(),this._set=null}acquire(...e){let t=super.acquire(...e);return this._set.delete(t),t}release(e){e&&!this._set.has(e)&&(super.release(e),this._set.add(e))}_dispose(e){this._set.delete(e),super._dispose(e)}};function Ot(r,e){for(let t of r.entries())if(e(t[0]))return!0;return!1}function vt(r,e){if(!e)return r;for(let t of e)t!=null&&r.add(t);return r}function Jr(r,e){return e!=null&&r.add(e),r}function Kt(r,e){let t=new Set;return vt(t,r),vt(t,e),t}function Zt(r,e){let t=new Set;for(let s of e)r.has(s)&&t.add(s);return t}function Gr(r,e){if(!r||!e)return!1;if(r===e)return!0;for(let t of r)if(!e.has(t))return!1;return!0}function Wr(r,e){if(r==null&&e==null)return!0;if(r==null||e==null||r.size!==e.size)return!1;for(let t of r)if(!e.has(t))return!1;return!0}function Qt(r,e){let t=new Set(r);for(let s of e)t.delete(s);return t}function Yr(r,e){return Qt(Kt(r,e),Zt(r,e))}var Xt=0;function Z(){return++Xt}function wt(r,e){let t=r[r.length-1]==="?"?r.slice(0,-1):r;if(e.getItemAt!=null||Array.isArray(e)){let i=parseInt(t,10);if(!isNaN(i))return Array.isArray(e)?e[i]:e.at(i)}let s=_(e);return Je(s,t)?s.get(t):e[t]}function bt(r,e,t){if(r==null)return r;let s=wt(e[t],r);return!s&&t<e.length-1?void 0:t===e.length-1?s:bt(s,e,t+1)}function S(r,e,t=0){return typeof e!="string"||e.includes(".")?bt(r,Ge(e),t):wt(e,r)}function m(r,e){return S(r,e)}function De(r,e){return S(e,r)!==void 0}var I=!1,Q=[];function ke(r,e){let t=new k(o),s=null,i=!1;function o(){if(!t||i)return;if(I)return void Tt(o);let n=s;t.clear(),I=!0,i=!0,s=g(t,r),i=!1,I=!1,e(s,n),St()}function a(){t&&(t.destroy(),t=null,s=null)}return i=!0,s=g(t,r),i=!1,p(a)}function Ie(r,e){let t=new k(i),s=null;function i(){e(s,a)}function o(){t&&(t.destroy(),t=null),s=null}function a(){return t?(t.clear(),s=g(t,r),s):null}return a(),p(o)}function ss(r){let e=new k(s),t=!1;function s(){e&&!t&&(I?Tt(s):(e.clear(),I=!0,t=!0,g(e,r),t=!1,I=!1,St()))}function i(){e&&(e.destroy(),e=null)}return t=!0,g(e,r),t=!1,p(i)}function Tt(r){Q.includes(r)||Q.unshift(r)}function St(){for(;Q.length;)Q.pop()()}var F;(function(r){r[r.Untracked=0]="Untracked",r[r.Tracked=1]="Tracked"})(F||(F={}));var E=class{constructor(){this.uid=Z(),this.removed=!1,this.type=null,this.oldValue=null,this.callback=null,this.getValue=null,this.target=null,this.path=null,this.equals=null}static acquireUntracked(e,t,s,i,o){return this.pool.acquire(F.Untracked,e,t,s,i,o,R)}static acquireTracked(e,t,s,i){return this.pool.acquire(F.Tracked,e,t,s,null,null,i)}notify(e,t){this.type===F.Untracked?this.callback.call(this.target,e,t,this.path,this.target):this.callback.call(null,e,t,void 0,void 0)}acquire(e,t,s,i,o,a,n){this.uid=Z(),this.removed=!1,this.type=e,this.oldValue=t,this.callback=s,this.getValue=i,this.target=o,this.path=a,this.equals=n}release(){this.target=this.path=this.oldValue=this.callback=this.getValue=null,this.uid=Z(),this.removed=!0}};E.pool=new K(E);var X=new q,y=new Set,ee;function te(r){y.delete(r),y.add(r),ee||(ee=mt(tr))}function er(r){if(r.removed)return;let e=r.oldValue,t=r.getValue();r.equals(e,t)||(r.oldValue=t,r.notify(t,e))}function Et(r){for(let e of y.values())e.target===r&&(e.removed=!0)}function tr(){let r=10;for(;ee&&r--;){ee=null;let e=rr(),t=X.acquire();for(let s of e){let i=s.uid;er(s),i===s.uid&&s.removed&&t.push(s)}for(let s of y)s.removed&&(t.push(s),y.delete(s));for(let s of t)E.pool.release(s);X.release(t),X.release(e),Ce.forEach(s=>s())}}function rr(){let r=X.acquire();r.length=y.size;let e=0;for(let t of y)r[e]=t,++e;return y.clear(),r}var Ce=new Set;function gs(r){return Ce.add(r),p(()=>Ce.delete(r))}function sr(r,e,t){let s=fe(r,e,t,(i,o,a)=>{let n,c,f=Ie(()=>S(i,o),(v,h)=>{i.__accessor__?.lifecycle===d.DESTROYED||n&&n.uid!==c?s.remove():(n||(n=E.acquireUntracked(v,a,h,i,o),c=n.uid),te(n))});return p(()=>{f.remove(),n&&(n.uid!==c||n.removed||(n.removed=!0,te(n)),n=null),s=f=null})});return s}function ir(r,e,t){let s=fe(r,e,t,(i,o,a)=>{let n=!1;return ke(()=>S(i,o),(c,f)=>{i.__accessor__.lifecycle!==d.DESTROYED?n||(n=!0,R(f,c)||a.call(i,c,f,o,i),n=!1):s.remove()})});return s}function At(r,e,t,s=!1){return r.__accessor__&&r.__accessor__.lifecycle!==d.DESTROYED?s?ir(r,e,t):sr(r,e,t):p()}function or(r,e,t){let s,i,o=Ie(r,(a,n)=>{s&&s.uid!==i?o.remove():(s||(s=E.acquireTracked(a,e,n,t),i=s.uid),te(s))});return p(()=>{o.remove(),s&&(s.uid!==i||s.removed||(s.removed=!0,te(s)),s=null),o=null})}function nr(r,e,t){let s=!1;return ke(r,(i,o)=>{s||(s=!0,t(o,i)||e(i,o),s=!1)})}function _s(r,e,t=!1,s=He){return t?nr(r,e,s):or(r,e,s)}function ys(r){return Ot(y,e=>e.oldValue===r)}function C(r,e,t){if(r&&e)if(typeof e=="object")for(let s of Object.getOwnPropertyNames(e))C(r,s,e[s]);else{if(e.includes(".")){let i=e.split("."),o=i.splice(-1,1)[0];return void C(m(r,i),o,t)}let s=r.__accessor__;s!=null&&ar(e,s),r[e]=t}}function ar(r,e){if(w("esri-unknown-property-errors")&&!cr(r,e))throw new z("set:unknown-property",lr(r,e))}function cr(r,e){return e.metadata[r]!=null}function lr(r,e){return"setting unknown property '"+r+"' on instance of "+e.host.declaredClass}function Nt(r={}){return(e,t)=>{if(e===Function.prototype)throw new Error(`Inappropriate use of @property() on a static field: ${e.name}.${t}. Accessor does not support static properties.`);let s=Object.getOwnPropertyDescriptor(e,t),i=de(e,t);s&&(s.get||s.set?(i.get=s.get||i.get,i.set=s.set||i.set):"value"in s&&("value"in r&&N.getLogger("esri.core.accessorSupport.decorators.property").warn(`@property() will redefine the value of "${t}" on "${e.constructor.name}" already defined in the metadata`,r),i.value=r.value=s.value)),r.readOnly!=null&&(i.readOnly=r.readOnly);let o=r.aliasOf;if(o){let c=typeof o=="string"?o:o.source,f=typeof o=="string"?null:o.overridable===!0,v;i.dependsOn=[c],i.get=function(){let h=m(this,c);if(typeof h=="function"){v||(v=c.split(".").slice(0,-1).join("."));let A=m(this,v);A&&(h=h.bind(A))}return h},i.readOnly||(i.set=f?function(h){this._override(t,h)}:function(h){C(this,c,h)})}let a=r.type,n=r.types;i.cast||(a?i.cast=ur(a):n&&(Array.isArray(n)?i.cast=st(ge(n[0])):i.cast=ge(n))),Ye(i,r),r.range&&(i.cast=fr(i.cast,r.range))}}function Is(r,e,t){let s=de(r,t);s.json||(s.json={});let i=s.json;return e!==void 0&&(i.origins||(i.origins={}),i.origins[e]||(i.origins[e]={}),i=i.origins[e]),i}function ur(r){let e=0,t=r;if(ct(r))return lt(r);for(;Array.isArray(t)&&t.length===1&&typeof t[0]!="string"&&typeof t[0]!="number";)t=t[0],e++;let s=t;if(at(s))return e===0?me(s):ot(me(s),e);if(e===1)return it(s);if(e>1)return nt(s,e);let i=r;return i.from?i.from:rt(i)}function fr(r,e){return t=>{let s=+r(t);return e.step!=null&&(s=Math.round(s/e.step)*e.step),e.min!=null&&(s=Math.max(e.min,s)),e.max!=null&&(s=Math.min(e.max,s)),s}}function xs(r){let e=[];return function*(){yield*je(e);for(let t of r)e.push(t),yield t}}function Rs(r,e){for(let t of r)if(t!=null&&e(t))return t}function xe(r){return r!=null&&typeof r[Symbol.iterator]=="function"}var x=class{constructor(){this._groups=new Map}destroy(){this.removeAll()}get size(){let e=0;return this._groups.forEach(t=>{e+=t.length}),e}add(e,t){if(xe(e)){let s=this._getOrCreateGroup(t);for(let i of e)kt(i)&&s.push(i)}else kt(e)&&this._getOrCreateGroup(t).push(e);return this}forEach(e,t){if(typeof e=="function")this._groups.forEach(s=>s.forEach(e));else{let s=this._getGroup(e);s&&t&&s.forEach(t)}}has(e){return this._groups.has(re(e))}remove(e){if(typeof e!="string"&&xe(e)){for(let t of e)this.remove(t);return this}return this.has(e)?(Dt(this._getGroup(e)),this._groups.delete(re(e)),this):this}removeAll(){return this._groups.forEach(Dt),this._groups.clear(),this}removeReference(e){return this._groups.delete(e),this}_getOrCreateGroup(e){if(this.has(e))return this._getGroup(e);let t=[];return this._groups.set(re(e),t),t}_getGroup(e){return this._groups.get(re(e))}};function re(r){return r||"_default_"}function Dt(r){for(let e of r)e instanceof x?e.removeAll():e.remove()}function kt(r){return r!=null&&(!!r.remove||r instanceof x)}var se=class{constructor(e,t){this._observers=e,this._observer=t}remove(){ze(this._observers,this._observer)}};var ie=class{constructor(){this._observers=null,this.destroyed=!1}observe(e){if(this.destroyed||e.destroyed)return dr;this._observers==null&&(this._observers=[]);let t=this._observers,s=!1,i=!1,o=t.length;for(let a=0;a<o;++a){let n=t[a];if(n.destroyed)i=!0;else if(n===e){s=!0;break}}return s||(t.push(e),i&&this._removeDestroyedObservers()),new se(t,e)}_removeDestroyedObservers(){let e=this._observers;if(!e||e.length===0)return;let t=e.length,s=0;for(let i=0;i<t;++i){for(;i+s<t&&e[i+s].destroyed;)++s;if(s>0){if(!(i+s<t))break;e[i]=e[i+s]}}e.length=t-s}destroy(){if(this.destroyed)return;this.destroyed=!0;let e=this._observers;if(e!=null){for(let t of e)t.onCommitted();this._observers=null}}},dr=p();var L=class extends ie{constructor(e,t){super(),this.propertyName=e,this.metadata=t,this._accessed=null,this._handles=null,this.flags=0,this.flags=u.Dirty|(t.nonNullable?u.NonNullable:0)|(t.hasOwnProperty("value")?u.HasDefaultValue:0)|(t.get===void 0?u.DepTrackingInitialized:0)|(t.dependsOn===void 0?u.AutoTracked:0)}destroy(){this.flags&u.Dirty&&this.onCommitted(),super.destroy(),this._accessed=null,this._clearObservationHandles()}getComputed(e){$(this);let t=e.store,s=this.propertyName,i=this.flags,o=t.get(s);if(i&u.Computing||~i&u.Dirty&&t.has(s))return o;this.flags|=u.Computing;let a=e.host,n;i&u.AutoTracked?n=g(this,this.metadata.get,a):(Qe(a,this),n=this.metadata.get.call(a)),t.set(s,n,l.COMPUTED);let c=t.get(s);return c===o?this.flags&=~u.Dirty:Ke(this.commit,this),this.flags&=~u.Computing,c}onObservableAccessed(e){e!==this&&(this._accessed??=new Set,this._accessed.add(e))}onTrackingEnd(){this._clearObservationHandles(),this.flags|=u.DepTrackingInitialized,this._accessed!=null&&(this._handles??=[],this._accessed.forEach(e=>{this._handles.push(e.observe(this))}),this._accessed.clear())}notifyChange(){this.onInvalidated(),this.onCommitted()}invalidate(){this.onInvalidated()}commit(){this.flags&=~u.Dirty,this.onCommitted()}_clearObservationHandles(){let e=this._handles;if(e!==null){for(let t=0;t<e.length;++t)e[t].remove();e.length=0}}onInvalidated(){~this.flags&u.Overridden&&(this.flags|=u.Dirty);let e=this._observers;if(e&&e.length>0)for(let t of e)t.onInvalidated()}onCommitted(){let e=this._observers;if(e&&e.length>0){let t=e.slice();for(let s of t)s.onCommitted()}}};var oe=class r{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){let t=new r;return this._values.forEach((s,i)=>{e&&e.has(i)||t.set(i,B(s))}),t}get(e){return this._values.get(e)}originOf(){return l.USER}keys(){return[...this._values.keys()]}set(e,t){this._values.set(e,t)}delete(e){this._values.delete(e)}has(e){return this._values.has(e)}forEach(e){this._values.forEach(e)}};function ne(r,e,t){return r!==void 0}function It(r,e,t,s){return r!==void 0&&(!(t==null&&r.flags&u.NonNullable)||(s.lifecycle,d.INITIALIZING,!1))}var ae=class{constructor(e){this.host=e,this.propertiesByName=new Map,this.ctorArgs=null,this.lifecycle=d.INITIALIZING,this.store=new oe,this._origin=l.USER;let t=this.host.constructor.__accessorMetadata__;for(let s in t){let i=new L(s,t[s]);this.propertiesByName.set(s,i)}this.metadata=t}initialize(){this.lifecycle=d.CONSTRUCTING}constructed(){this.lifecycle=d.CONSTRUCTED}destroy(){this.lifecycle=d.DESTROYED,this.propertiesByName.forEach(e=>e.destroy())}get initialized(){return this.lifecycle!==d.INITIALIZING}get(e){let t=this.propertiesByName.get(e);if(t.metadata.get)return t.getComputed(this);$(t);let s=this.store;return s.has(e)?s.get(e):t.metadata.value}originOf(e){let t=this.store.originOf(e);if(t===void 0){let s=this.propertiesByName.get(e);if(s!==void 0&&s.flags&u.HasDefaultValue)return"defaults"}return G(t)}has(e){return this.propertiesByName.has(e)&&this.store.has(e)}keys(){return[...this.propertiesByName.keys()]}internalGet(e){let t=this.propertiesByName.get(e);if(ne(t))return this.store.has(e)?this.store.get(e):t.metadata.value}internalSet(e,t){let s=this.propertiesByName.get(e);ne(s)&&this._internalSet(s,t)}getDependsInfo(e,t,s){let i=this.propertiesByName.get(t);if(!ne(i))return"";let o=new Set,a=g({onObservableAccessed:c=>o.add(c),onTrackingEnd:()=>{}},()=>i.metadata.get?.call(e)),n=`${s}${e.declaredClass.split(".").pop()}.${t}: ${a}
`;if(o.size===0)return n;s+="  ";for(let c of o)c instanceof L&&(n+=`${s}${c.propertyName}: undefined
`);return n}setAtOrigin(e,t,s){let i=this.propertiesByName.get(e);if(ne(i))return this._setAtOrigin(i,t,s)}isOverridden(e){let t=this.propertiesByName.get(e);return t!==void 0&&!!(t.flags&u.Overridden)}clearOverride(e){let t=this.propertiesByName.get(e);t&&t.flags&u.Overridden&&(t.flags&=~u.Overridden,t.notifyChange())}override(e,t){let s=this.propertiesByName.get(e);if(!It(s,e,t,this))return;let i=s.metadata.cast;if(i){let o=this._cast(i,t),{valid:a,value:n}=o;if(Re.release(o),!a)return;t=n}s.flags|=u.Overridden,this._internalSet(s,t)}set(e,t){let s=this.propertiesByName.get(e);if(!It(s,e,t,this))return;let i=s.metadata.cast;if(i){let a=this._cast(i,t),{valid:n,value:c}=a;if(Re.release(a),!n)return;t=c}let o=s.metadata.set;o?o.call(this.host,t):this._internalSet(s,t)}setDefaultOrigin(e){this._origin=J(e)}getDefaultOrigin(){return G(this._origin)}notifyChange(e){let t=this.propertiesByName.get(e);t!==void 0&&t.notifyChange()}invalidate(e){let t=this.propertiesByName.get(e);t!==void 0&&t.invalidate()}commit(e){let t=this.propertiesByName.get(e);t!==void 0&&t.commit()}_internalSet(e,t){let s=this.lifecycle!==d.INITIALIZING?this._origin:l.DEFAULTS;this._setAtOrigin(e,t,s)}_setAtOrigin(e,t,s){let i=this.store,o=e.propertyName;i.has(o,s)&&R(t,i.get(o))&&~e.flags&u.Overridden&&s===i.originOf(o)||(e.invalidate(),i.set(o,t,s),e.commit(),Ze(this.host,e))}_cast(e,t){let s=Re.acquire();return s.valid=!0,s.value=t,e&&(s.value=e.call(this.host,t,s)),s}},Pe=class{constructor(){this.value=null,this.valid=!0}acquire(){this.valid=!0}release(){this.value=null}},Re=new D(Pe);var hr;function Me(){return hr}var Ct;(function(r){r[r.Ignore=0]="Ignore",r[r.Destroy=1]="Destroy",r[r.ThrowError=2]="ThrowError"})(Ct||(Ct={}));var xt,Rt;function pr(r){if(r==null)return{value:r};if(Array.isArray(r))return{type:[r[0]],value:null};switch(typeof r){case"object":return r.constructor?.__accessorMetadata__||r instanceof Date?{type:r.constructor,value:r}:r;case"boolean":return{type:Boolean,value:r};case"string":return{type:String,value:r};case"number":return{type:Number,value:r};case"function":return{type:r,value:null};default:return}}var O=Symbol("Accessor-Handles"),Ue=Symbol("Accessor-Initialized"),ce=class r{static createSubclass(e={}){if(Array.isArray(e))throw new Error("Multi-inheritance unsupported since 4.16");let{properties:t,declaredClass:s,constructor:i}=e;delete e.declaredClass,delete e.properties,delete e.constructor;let o=this;class a extends o{constructor(...c){super(...c),this.inherited=null,i&&i.apply(this,c)}}We(a.prototype);for(let n in e){let c=e[n];a.prototype[n]=typeof c=="function"?function(...f){let v=this.inherited,h;this.inherited=function(...A){if(o.prototype[n])return o.prototype[n].apply(this,A)};try{h=c.apply(this,f)}catch(A){throw this.inherited=v,A}return this.inherited=v,h}:e[n]}for(let n in t){let c=pr(t[n]);Nt(c)(a.prototype,n)}return P(s)(a)}constructor(...e){if(this[xt]=null,this[Rt]=!1,this.constructor===r)throw new Error("[accessor] cannot instantiate Accessor. This can be fixed by creating a subclass of Accessor");let t=new ae(this);Object.defineProperty(this,"__accessor__",{enumerable:!1,value:t}),e.length>0&&(t.ctorArgs=this.normalizeCtorArgs?.apply(this,e)??e[0]),Me()?.onInstanceConstruct(this)}postscript(){let e=this.__accessor__,t=e.ctorArgs;e.initialize(),t&&(this.set(t),e.ctorArgs=null),e.constructed(),this.initialize(),this[Ue]=!0}initialize(){}[Ve](){this[O]=$e(this[O])}destroy(){this.destroyed||(Et(this),this.__accessor__.destroy(),Me()?.onInstanceDestroy(this))}[Symbol.dispose](){this.destroy()}get constructed(){return this.__accessor__&&this.__accessor__.initialized||!1}get initialized(){return this[Ue]}get destroyed(){return this.__accessor__?.lifecycle===d.DESTROYED||!1}commitProperty(e){m(this,e)}get(e){return dt(N.getLogger(this),"`Accessor.get` is deprecated in favor of using optional chaining",{version:"4.28",see:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Optional_chaining"}),m(this,e)}hasOwnProperty(e){return this.__accessor__?this.__accessor__.has(e):Object.prototype.hasOwnProperty.call(this,e)}keys(){return this.__accessor__?this.__accessor__.keys():[]}set(e,t){return C(this,e,t),this}watch(e,t,s){return At(this,e,t,s)}addHandles(e,t){if(this.destroyed){let s=Array.isArray(e)?e:[e];for(let i of s)i.remove();return}(this[O]??=new x).add(e,t)}removeHandles(e){this[O]?.remove(e)}removeAllHandles(){this[O]?.removeAll()}removeHandlesReference(e){this[O]?.removeReference(e)}hasHandles(e){return this[O]?.has(e)===!0}_override(e,t){t===void 0?this.__accessor__.clearOverride(e):this.__accessor__.override(e,t)}_clearOverride(e){return this.__accessor__.clearOverride(e)}_overrideIfSome(e,t){t==null?this.__accessor__.clearOverride(e):this.__accessor__.override(e,t)}_isOverridden(e){return this.__accessor__.isOverridden(e)}notifyChange(e){this.__accessor__.notifyChange(e)}_get(e){return this.__accessor__.internalGet(e)}_set(e,t){return this.__accessor__.internalSet(e,t),this}};xt=O,Rt=Ue;function mr(r,e,t,s,i){let o={};return e.write?.writer?.call(r,s,o,t,i),o}function Pt(r,e,t,s,i,o){if(!s?.write)return!1;let a=m(r,t);if(!i&&s.write.overridePolicy){let n=s.write.overridePolicy.call(r,a,t,o??void 0);n!==void 0&&(i=n)}if(i||(i=s.write),!i||i.enabled===!1||i.layerContainerTypes&&o?.layerContainerType&&!i.layerContainerTypes.includes(o.layerContainerType))return!1;if((a===null&&!i.allowNull&&!i.writerEnsuresNonNull||a===void 0)&&i.isRequired){let n=new z("web-document-write:property-required",`Missing value for required property '${t}' on '${r.declaredClass}'`,{propertyName:t,target:r});return n&&o?.messages?o.messages.push(n):n&&!o&&N.getLogger("esri.core.accessorSupport.write").error(n.name,n.message),!1}return!(a===void 0||a===null&&!i.allowNull&&!i.writerEnsuresNonNull||!i.alwaysWriteDefaults&&(!e.store.multipleOriginsSupported||e.store.originOf(t)===l.DEFAULTS)&&gr(r,t,o,s,a)||!i.ignoreOrigin&&o?.origin&&e.store.multipleOriginsSupported&&e.store.originOf(t)<J(o.origin))}function gr(r,e,t,s,i){let o=s.default;if(o===void 0)return!1;if(s.defaultEquals!=null)return s.defaultEquals(i);if(typeof o=="function"){if(Array.isArray(i)){let a=o.call(r,e,t??void 0);return Be(a,i)}return!1}return o===i}function Ci(r,e,t,s){let i=_(r),o=i.metadata,a=_e(o[e],s);return!!a&&Pt(r,i,e,a,t,s)}function Mt(r,e,t){if(r&&typeof r.toJSON=="function"&&(!r.toJSON.isDefaultToJSON||!r.write))return H(e,r.toJSON(t));let s=_(r),i=s.metadata;for(let o in i){let a=_e(i[o],t);if(!Pt(r,s,o,a,void 0,t))continue;let n=m(r,o),c=mr(r,a,a.write&&typeof a.write.target=="string"?a.write.target:o,n,t);Object.keys(c).length>0&&(e=H(e,c),t?.resources?.pendingOperations?.length&&t.resources.pendingOperations.push(Promise.all(t.resources.pendingOperations).then(()=>H(e,c,()=>"replace-arrays"))),t?.writtenProperties&&t.writtenProperties.push({target:r,propName:o,oldOrigin:ht(s.store.originOf(o)),newOrigin:t.origin}))}return e}var le=class r{constructor(){this._values=new Map,this.multipleOriginsSupported=!1}clone(e){let t=new r;return this._values.forEach((s,i)=>{e&&e.has(i)||t.set(i,B(s.value),s.origin)}),t}get(e,t){t=this._normalizeOrigin(t);let s=this._values.get(e);return t==null||s?.origin===t?s?.value:void 0}originOf(e){return this._values.get(e)?.origin??l.USER}keys(e){e=this._normalizeOrigin(e);let t=[...this._values.keys()];return e==null?t:t.filter(s=>this._values.get(s)?.origin===e)}set(e,t,s){if((s=this._normalizeOrigin(s))===l.DEFAULTS){let i=this._values.get(e);if(i?.origin!=null&&i.origin>s)return}this._values.set(e,new qe(t,s))}delete(e,t){(t=this._normalizeOrigin(t))!=null&&this._values.get(e)?.origin!==t||this._values.delete(e)}has(e,t){return(t=this._normalizeOrigin(t))!=null?this._values.get(e)?.origin===t:this._values.has(e)}forEach(e){this._values.forEach(({value:t},s)=>e(t,s))}_normalizeOrigin(e){if(e!=null)return e===l.DEFAULTS?e:l.USER}},qe=class{constructor(e,t){this.value=e,this.origin=t}};function Ut(r,e,t){e.keys().forEach(i=>{t.set(i,e.get(i),l.DEFAULTS)});let s=r.metadata;Object.keys(s).forEach(i=>{r.internalGet(i)&&t.set(i,r.internalGet(i),l.DEFAULTS)})}function _r(r,e,t){if(!r?.read||r.read.enabled===!1||!r.read.source)return!1;let s=r.read.source;if(typeof s=="string"){if(s===e||s.includes(".")&&s.indexOf(e)===0&&De(s,t))return!0}else for(let i of s)if(i===e||i.includes(".")&&i.indexOf(e)===0&&De(i,t))return!0;return!1}function yr(r){return r&&(!r.read||r.read.enabled!==!1&&!r.read.source)}function vr(r,e,t,s,i){let o=V(e[t],i);yr(o)&&(r[t]=!0);for(let a of Object.getOwnPropertyNames(e))o=V(e[a],i),_r(o,t,s)&&(r[a]=!0)}function Or(r,e,t,s){let i=t.metadata,o=ut(i[e],s),a=o?.default;if(a===void 0)return;let n=typeof a=="function"?a.call(r,e,s):a;n!==void 0&&t.set(e,n)}var qt={origin:"service"};function Ft(r,e,t=qt){if(!e||typeof e!="object")return;let s=_(r),i=s.metadata,o={};for(let a of Object.getOwnPropertyNames(e))vr(o,i,a,e,t);s.setDefaultOrigin(t.origin);for(let a of Object.getOwnPropertyNames(o)){let n=V(i[a],t).read,c=n?.source,f;f=c&&typeof c=="string"?S(e,c):e[a],n?.reader&&(f=n.reader.call(r,f,e,t)),f!==void 0&&s.set(a,f)}if(!t||!t.ignoreDefaults){s.setDefaultOrigin("defaults");for(let a of Object.getOwnPropertyNames(i))o[a]||Or(r,a,s,t)}s.setDefaultOrigin("user")}function Bi(r,e,t,s=qt){let i=Fe(j({},s),{messages:[]});t(i),i.messages?.forEach(o=>{o.type!=="warning"||r.loaded?s?.messages&&s.messages.push(o):r.loadWarnings.push(o)})}var wr=r=>{let e=class extends r{constructor(...t){super(...t);let s=_(this),i=s.store,o=new le;s.store=o,Ut(s,i,o)}read(t,s){Ft(this,t,s)}write(t,s){return Mt(this,t??{},s)}toJSON(t){return this.write({},t)}static fromJSON(t,s){return br.call(this,t,s)}};return e=ue([P("esri.core.JSONSupport")],e),e.prototype.toJSON.isDefaultToJSON=!0,e};function br(r,e){if(!r)return null;if(r.declaredClass)throw new Error("JSON object is already hydrated");let t=new this;return t.read(r,e),t}function Qi(r){return r&&typeof r=="object"&&"toJSON"in r&&typeof r.toJSON=="function"}var Lt=class extends wr(ce){};Lt=ue([P("esri.core.JSONSupport")],Lt);export{dt as a,Sr as b,Er as c,ye as d,xs as e,Rs as f,xe as g,x as h,m as i,ie as j,l as k,Dr as l,J as m,G as n,q as o,K as p,M as q,mt as r,qr as s,$t as t,Vt as u,Fr as v,Ot as w,vt as x,Jr as y,Kt as z,Zt as A,Gr as B,Wr as C,Qt as D,Yr as E,Z as F,k as G,ss as H,gs as I,_s as J,ys as K,Nt as L,Is as M,fr as N,ce as O,Ut as P,Ft as Q,Bi as R,Ci as S,Mt as T,wr as U,Qi as V,Lt as W};
