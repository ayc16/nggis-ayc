function d(t,r){return t?r?4:3:r?3:2}function q(t,r,e,n){if(!r?.lengths.length)return null;t.lengths.length&&(t.lengths.length=0),t.coords.length&&(t.coords.length=0);let I=t.coords,o=[],l=e?[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY]:[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY],{lengths:c,coords:s}=r,E=d(e,n),h=0;for(let N of c){let u=O(l,s,h,N,e,n);u&&o.push(u),h+=N*E}if(o.sort((N,u)=>{let g=N[2]-u[2];return g===0&&e&&(g=N[4]-u[4]),g}),o.length){let N=6*o[0][2];I[0]=o[0][0]/N,I[1]=o[0][1]/N,e&&(N=6*o[0][4],I[2]=N!==0?o[0][3]/N:0),(I[0]<l[0]||I[0]>l[1]||I[1]<l[2]||I[1]>l[3]||e&&(I[2]<l[4]||I[2]>l[5]))&&(I.length=0)}if(!I.length){let N=r.lengths[0]?A(s,0,c[0],e,n):null;if(!N)return null;I[0]=N[0],I[1]=N[1],e&&N.length>2&&(I[2]=N[2])}return t}function O(t,r,e,n,I,o){let l=d(I,o),c=e,s=e+l,E=0,h=0,N=0,u=0,g=0;for(let V=0,_=n-1;V<_;V++,c+=l,s+=l){let T=r[c],f=r[c+1],m=r[c+2],i=r[s],b=r[s+1],G=r[s+2],Y=T*b-i*f;u+=Y,E+=(T+i)*Y,h+=(f+b)*Y,I&&(Y=T*G-i*m,N+=(m+G)*Y,g+=Y),T<t[0]&&(t[0]=T),T>t[1]&&(t[1]=T),f<t[2]&&(t[2]=f),f>t[3]&&(t[3]=f),I&&(m<t[4]&&(t[4]=m),m>t[5]&&(t[5]=m))}if(u>0&&(u*=-1),g>0&&(g*=-1),!u)return null;let F=[E,h,.5*u];return I&&(F[3]=N,F[4]=.5*g),F}function A(t,r,e,n,I){let o=d(n,I),l=r,c=r+o,s=0,E=0,h=0,N=0;for(let u=0,g=e-1;u<g;u++,l+=o,c+=o){let F=t[l],V=t[l+1],_=t[l+2],T=t[c],f=t[c+1],m=t[c+2],i=n?S(F,V,_,T,f,m):P(F,V,T,f);if(i)if(s+=i,n){let b=p(F,V,_,T,f,m);E+=i*b[0],h+=i*b[1],N+=i*b[2]}else{let b=a(F,V,T,f);E+=i*b[0],h+=i*b[1]}}return s>0?n?[E/s,h/s,N/s]:[E/s,h/s]:e>0?n?[t[r],t[r+1],t[r+2]]:[t[r],t[r+1]]:null}function P(t,r,e,n){let I=e-t,o=n-r;return Math.sqrt(I*I+o*o)}function S(t,r,e,n,I,o){let l=n-t,c=I-r,s=o-e;return Math.sqrt(l*l+c*c+s*s)}function a(t,r,e,n){return[t+.5*(e-t),r+.5*(n-r)]}function p(t,r,e,n,I,o){return[t+.5*(n-t),r+.5*(I-r),e+.5*(o-e)]}export{q as a};
