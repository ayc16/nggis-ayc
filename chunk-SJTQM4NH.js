import{a as R}from"./chunk-IFFYADB3.js";import{a as z}from"./chunk-PDBA6QOJ.js";import{a as D}from"./chunk-ALWV3RJ2.js";import{a as B}from"./chunk-7C6Z24SS.js";import{a as Q}from"./chunk-M2GLXRA2.js";import{b as X,i as S}from"./chunk-76YVRX2R.js";import{B as y,a as _,c as M,d as E,e as p,l,s as g,t as f,u as N}from"./chunk-OZF6BMOL.js";import{a as o}from"./chunk-GJP6PTKT.js";import{a as O}from"./chunk-OVHPPCBL.js";function ot(t,e,r){let a=f(t,e)/f(t,t);return l(r,t,a)}function b(t,e){return f(t,e)/_(t)}function it(t,e){let r=f(t,e)/(_(t)*_(e));return-S(r)}var ct=o(),ft=o();var m=class t{constructor(e){this._create=e,this._items=new Array,this._itemsPtr=0}get(){return this._itemsPtr===0&&O(()=>this._reset()),this._itemsPtr>=this._items.length&&this._items.push(this._create()),this._items[this._itemsPtr++]}_reset(){let e=2*this._itemsPtr;this._items.length>e&&(this._items.length=e),this._itemsPtr=0}static createVec2f64(){return new t(z)}static createVec3f64(){return new t(o)}static createVec4f64(){return new t(Q)}static createMat3f64(){return new t(B)}static createMat4f64(){return new t(D)}static createQuatf64(){return new t(R)}get test(){}};var _t=m.createVec2f64(),h=m.createVec3f64(),U=m.createVec4f64(),At=m.createMat3f64(),xt=m.createMat4f64(),Ft=m.createQuatf64();function Lt(t){let e=t[0]*t[0]+t[4]*t[4]+t[8]*t[8],r=t[1]*t[1]+t[5]*t[5]+t[9]*t[9],a=t[2]*t[2]+t[6]*t[6]+t[10]*t[10];return Math.sqrt(Math.max(e,r,a))}function Tt(t,e){let r=Math.sqrt(e[0]*e[0]+e[4]*e[4]+e[8]*e[8]),a=Math.sqrt(e[1]*e[1]+e[5]*e[5]+e[9]*e[9]),n=Math.sqrt(e[2]*e[2]+e[6]*e[6]+e[10]*e[10]);return M(t,r,a,n),t}function G(t,e,r){Math.abs(t[0])>Math.abs(t[1])?M(e,0,1,0):M(e,1,0,0),N(r,t,e),N(e,r,t),g(r,r),g(e,e)}var Vt=o(),qt=o(),wt=o(),Ct=o(),St=o();function H(t=x){return[t[0],t[1],t[2],t[3]]}function Jt(t=x[0],e=x[1],r=x[2],a=x[3]){return J(t,e,r,a,U.get())}function W(t,e){return J(e[0],e[1],e[2],e[3],t)}function J(t,e,r,a,n=H()){return n[0]=t,n[1]=e,n[2]=r,n[3]=a,n}function Y(t,e,r){let a=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=Math.abs(a-1)>1e-5&&a>1e-12?1/Math.sqrt(a):1;return r[0]=e[0]*n,r[1]=e[1]*n,r[2]=e[2]*n,r[3]=-(r[0]*t[0]+r[1]*t[1]+r[2]*t[2]),r}function Z(t,e,r,a=H()){let n=r[0]-e[0],i=r[1]-e[1],s=r[2]-e[2],c=t[0]-e[0],F=t[1]-e[1],v=t[2]-e[2],P=i*v-s*F,V=s*c-n*v,q=n*F-i*c,w=P*P+V*V+q*q,C=Math.abs(w-1)>1e-5&&w>1e-12?1/Math.sqrt(w):1;return a[0]=P*C,a[1]=V*C,a[2]=q*C,a[3]=-(a[0]*t[0]+a[1]*t[1]+a[2]*t[2]),a}function K(t,e,r,a=0,n=Math.floor(r*(1/3)),i=Math.floor(r*(2/3))){if(r<3)return!1;e(A,a);let s=n,c=!1;for(;s<r-1&&!c;)e(d,s),s++,c=!y(A,d);if(!c)return!1;for(s=Math.max(s,i),c=!1;s<r&&!c;)e(I,s),s++,p(j,A,d),g(j,j),p(L,d,I),g(L,L),c=!y(A,I)&&!y(d,I)&&Math.abs(f(j,L))<$;return c?(Z(A,d,I,t),!0):(a!==0||n!==1||i!==2)&&K(t,e,r,0,1,2)}function Kt(t,e,r=!0){let a=e.length/3;return K(t,(n,i)=>M(n,e[3*i+0],e[3*i+1],e[3*i+2]),r?a-1:a)}var $=.99619469809,A=o(),d=o(),I=o(),j=o(),L=o();function Wt(t,e,r){return e!==t&&W(t,e),t[3]=-f(t,r),t}function Yt(t,e){return e[0]=-t[0],e[1]=-t[1],e[2]=-t[2],e[3]=-t[3],e}function Zt(t,e,r,a){return N(I,e,t),Y(r,I,a)}function $t(t,e,r,a){return T(t,e,p(h.get(),r,e),et,a)}function te(t,e,r){return e!=null&&T(t,e.origin,e.direction,rt,r)}function ee(t,e,r){return T(t,e.origin,e.vector,u.NONE,r)}function re(t,e,r){return T(t,e.origin,e.vector,u.CLAMP,r)}function ae(t,e){return k(t,e)>=0}function ne(t,e){let r=f(t,e.ray.direction),a=-k(t,e.ray.origin);if(r>-1e-6&&r<1e-6)return a>0;let n=a/r;return r>0?n<e.c1&&(e.c1=n):n>e.c0&&(e.c0=n),e.c0<=e.c1}function se(t,e,r){let a=l(h.get(),t,-t[3]),n=tt(t,p(h.get(),e,a),h.get());return E(r,n,a),r}function oe(t,e,r,a){let n=t,i=h.get(),s=h.get();G(n,i,s);let c=p(h.get(),r,e),F=b(i,c),v=b(s,c),P=b(n,c);return M(a,F,v,P)}function tt(t,e,r){let a=l(h.get(),t,f(t,e));return p(r,e,a),r}function ie(t,e){return Math.abs(k(t,e))}function k(t,e){return f(t,e)+t[3]}function T(t,e,r,a,n){let i=f(t,r);if(i===0)return!1;let s=-(f(t,e)+t[3])/i;return a&u.CLAMP&&(s=X(s,0,1)),!(!(a&u.INFINITE_MIN)&&s<0||!(a&u.INFINITE_MAX)&&s>1)&&(E(n,e,l(n,r,s)),!0)}var x=[0,0,1,0],u;(function(t){t[t.NONE=0]="NONE",t[t.CLAMP=1]="CLAMP",t[t.INFINITE_MIN=4]="INFINITE_MIN",t[t.INFINITE_MAX=8]="INFINITE_MAX"})(u||(u={}));var et=u.INFINITE_MIN|u.INFINITE_MAX,rt=u.INFINITE_MAX;export{ot as a,b,it as c,_t as d,h as e,U as f,xt as g,Ft as h,Lt as i,Tt as j,G as k,H as l,Jt as m,W as n,J as o,Y as p,Z as q,K as r,Kt as s,Wt as t,Yt as u,Zt as v,$t as w,te as x,ee as y,re as z,ae as A,ne as B,se as C,oe as D,ie as E,k as F};
