import{a as k}from"./chunk-SGQDWWIB.js";import{a as Q}from"./chunk-WERKLYA3.js";import{a as M}from"./chunk-XPKJ6EMR.js";import{a as U,f as V,h as Z,o as G,p as L}from"./chunk-6MKTTYAV.js";import{a as C,p as N,q as A,r as B,v as J}from"./chunk-KE4KELLY.js";import{h as E,i as D}from"./chunk-FI6XC3PH.js";import{b as R}from"./chunk-YTC2EJDQ.js";import{a as y}from"./chunk-WXS2B4FF.js";import{d as v}from"./chunk-DS2JVXBM.js";import{b as S}from"./chunk-G3LLBABP.js";import{a,t as T}from"./chunk-UI76XBLJ.js";import{a as F,b as O}from"./chunk-UE2YGKE7.js";import{Z as x,_ as j}from"./chunk-BE76S5KT.js";import{a as b}from"./chunk-FIITBHDP.js";import{F as t,Q as u}from"./chunk-VWEBO6QK.js";import{S as p}from"./chunk-KAAR5ZJN.js";import{a as e}from"./chunk-W3WDPWBE.js";import{b as I,p as w}from"./chunk-X3IDZTNG.js";var m=class extends y(u){constructor(n){super(n),this.creatorField=null,this.creationDateField=null,this.editorField=null,this.editDateField=null,this.realm=null,this.timeZone=null}};e([t()],m.prototype,"creatorField",void 0),e([t()],m.prototype,"creationDateField",void 0),e([t()],m.prototype,"editorField",void 0),e([t()],m.prototype,"editDateField",void 0),e([t()],m.prototype,"realm",void 0),e([t(v("dateFieldsTimeReference",!0))],m.prototype,"timeZone",void 0),m=e([p("esri.layers.support.EditFieldsInfo")],m);var P=m;var d=class extends y(u){constructor(n){super(n)}};e([t({constructOnly:!0,json:{write:!0}})],d.prototype,"name",void 0),e([t({constructOnly:!0,json:{write:!0}})],d.prototype,"fields",void 0),e([t({constructOnly:!0,json:{write:!0}})],d.prototype,"isAscending",void 0),e([t({constructOnly:!0,json:{write:!0}})],d.prototype,"indexType",void 0),e([t({constructOnly:!0,json:{write:!0}})],d.prototype,"isUnique",void 0),e([t({constructOnly:!0,json:{write:!0}})],d.prototype,"description",void 0),d=e([p("esri.layers.support.FeatureIndex")],d);var h=class extends y(u){constructor(n){super(n),this.shapeAreaField=null,this.shapeLengthField=null,this.units=null}};e([t({type:String,json:{read:{source:"shapeAreaFieldName"}}})],h.prototype,"shapeAreaField",void 0),e([t({type:String,json:{read:{source:"shapeLengthFieldName"}}})],h.prototype,"shapeLengthField",void 0),e([t({type:String,json:{read:n=>x.read(n)||j.read(n)}})],h.prototype,"units",void 0),h=e([p("esri.layers.support.GeometryFieldsInfo")],h);var z=h;var _=new b({esriRelCardinalityOneToOne:"one-to-one",esriRelCardinalityOneToMany:"one-to-many",esriRelCardinalityManyToMany:"many-to-many"}),H=new b({esriRelRoleOrigin:"origin",esriRelRoleDestination:"destination"}),l=class extends y(u){constructor(n){super(n),this.cardinality=null,this.composite=null,this.id=null,this.keyField=null,this.keyFieldInRelationshipTable=null,this.name=null,this.relatedTableId=null,this.relationshipTableId=null,this.role=null}};e([t({json:{read:_.read,write:_.write}})],l.prototype,"cardinality",void 0),e([t({json:{read:!0,write:!0}})],l.prototype,"composite",void 0),e([t({json:{read:!0,write:!0}})],l.prototype,"id",void 0),e([t({json:{read:!0,write:!0}})],l.prototype,"keyField",void 0),e([t({json:{read:!0,write:!0}})],l.prototype,"keyFieldInRelationshipTable",void 0),e([t({json:{read:!0,write:!0}})],l.prototype,"name",void 0),e([t({json:{read:!0,write:!0}})],l.prototype,"relatedTableId",void 0),e([t({json:{read:!0,write:!0}})],l.prototype,"relationshipTableId",void 0),e([t({json:{read:H.read,write:H.write}})],l.prototype,"role",void 0),l=e([p("esri.layers.support.Relationship")],l);var W=l;var c=class extends y(u){constructor(n){super(n),this.code=null,this.defaultValues={},this.domains=null,this.name=null}readDomains(n){if(!n)return null;let r={};for(let i of Object.keys(n))r[i]=R(n[i]);return r}writeDomains(n,r){if(!n)return;let i={};for(let o of Object.keys(n))n[o]&&(i[o]=n[o]?.toJSON());r.domains=i}};e([t({type:Number,json:{write:!0}})],c.prototype,"code",void 0),e([t({type:Object,json:{write:!0}})],c.prototype,"defaultValues",void 0),e([t({json:{write:!0}})],c.prototype,"domains",void 0),e([a("domains")],c.prototype,"readDomains",null),e([F("domains")],c.prototype,"writeDomains",null),e([t({type:String,json:{write:!0}})],c.prototype,"name",void 0),c=e([p("esri.layers.support.Subtype")],c);var q=c;var St=n=>{let r=class extends n{constructor(){super(...arguments),this.copyright=null,this.capabilities=null,this.dateFieldsTimeZone=null,this.datesInUnknownTimezone=!1,this.definitionExpression=null,this.displayField=null,this.editFieldsInfo=null,this.editingInfo=null,this.elevationInfo=null,this.floorInfo=null,this.fullExtent=null,this.gdbVersion=null,this.geometryFieldsInfo=null,this.geometryType=null,this.globalIdField=null,this.hasM=void 0,this.hasZ=void 0,this.heightModelInfo=null,this.historicMoment=null,this.indexes=new(S.ofType(d)),this.isTable=!1,this.layerId=void 0,this.maxScale=0,this.minScale=0,this.objectIdField=null,this.preferredTimeZone=null,this.relationships=null,this.returnM=void 0,this.returnZ=void 0,this.serviceDefinitionExpression=null,this.serviceItemId=null,this.sourceJSON=null,this.spatialReference=O.WGS84,this.subtypeField=null,this.subtypes=null,this.trackIdField=null,this.version=void 0}get authenticationTriggerEvent(){if(!this.url)return null;let{capabilities:i}=this;if(i){let{query:s,operations:f,editing:g}=i;if(!s.supportsQueryByOthers||!s.supportsQueryByAnonymous||f.supportsEditing&&!(g.supportsUpdateByOthers&&g.supportsUpdateByAnonymous&&g.supportsDeleteByOthers&&g.supportsDeleteByAnonymous))return"load"}if(this.userHasUpdateItemPrivileges){if(J(this))return"load";if(this.hasUpdateItemRestrictions)return i.operations.supportsQuery?"editing":"load"}if(this.userHasFullEditingPrivileges&&this.hasFullEditingRestrictions)return"editing";let o=this.editFieldsInfo;return(o?.creatorField||o?.editorField)&&i?.operations.supportsEditing?"editing":null}readCapabilitiesFromService(i,o){return k(o,this.url)}readEditingInfo(i,o){let{editingInfo:s}=o;return s?{lastEditDate:s.lastEditDate!=null?new Date(s.lastEditDate):null}:null}get effectiveCapabilities(){let i=this.capabilities;if(!i)return null;let o=I(i),{operations:s,editing:f}=o;return this.sourceJSON?.isMultiServicesView?(this.userHasUpdateItemPrivileges&&(s.supportsQuery=!0),o):this.userHasUpdateItemPrivileges?(s.supportsAdd=s.supportsDelete=s.supportsEditing=s.supportsQuery=s.supportsUpdate=f.supportsDeleteByOthers=f.supportsGeometryUpdate=f.supportsUpdateByOthers=!0,o):(this.userHasFullEditingPrivileges&&s.supportsEditing&&(s.supportsAdd=s.supportsDelete=s.supportsUpdate=f.supportsGeometryUpdate=!0),o)}readGlobalIdFieldFromService(i,o){return N(o)}get hasFullEditingRestrictions(){let i=this.capabilities;if(!i||this.sourceJSON?.isMultiServicesView)return!1;let{operations:o,editing:s}=i;return o.supportsEditing&&!(o.supportsAdd&&o.supportsDelete&&o.supportsUpdate&&s.supportsGeometryUpdate)}get hasUpdateItemRestrictions(){let i=this.capabilities;if(!i)return!1;let{operations:o,editing:s}=i;return this.sourceJSON?.isMultiServicesView?!o.supportsQuery:!(o.supportsAdd&&o.supportsDelete&&o.supportsEditing&&o.supportsQuery&&o.supportsUpdate&&s.supportsDeleteByOthers&&s.supportsGeometryUpdate&&s.supportsUpdateByOthers)}readIsTableFromService(i,o){return o.type==="Table"}readMaxScale(i,o){return o.effectiveMaxScale||i||0}readMinScale(i,o){return o.effectiveMinScale||i||0}readObjectIdFieldFromService(i,o){return A(o)}readServiceDefinitionExpression(i,o){return o.definitionQuery||o.definitionExpression}set url(i){let o=E({layer:this,url:i,nonStandardUrlAllowed:!0,logger:w.getLogger(this)});this._set("url",o.url),o.layerId!=null&&this._set("layerId",o.layerId)}writeUrl(i,o,s,f){D(this,i,null,o,f)}readVersion(i,o){return B(o)}};return e([t({readOnly:!0})],r.prototype,"authenticationTriggerEvent",null),e([t({type:String,json:{origins:{service:{read:{source:"copyrightText"}}}}})],r.prototype,"copyright",void 0),e([t({readOnly:!0,json:{read:!1,origins:{service:{read:{source:["advancedQueryCapabilities","allowGeometryUpdates","allowUpdateWithoutMValues","archivingInfo","capabilities","datesInUnknownTimezone","hasAttachments","hasM","hasZ","maxRecordCount","maxRecordCountFactor","ownershipBasedAccessControlForFeatures","standardMaxRecordCount","supportedQueryFormats","supportsAdvancedQueries","supportsApplyEditsWithGlobalIds","supportsAttachmentsByUploadId","supportsAttachmentsResizing","supportsCalculate","supportsCoordinatesQuantization","supportsExceedsLimitStatistics","supportsFieldDescriptionProperty","supportsQuantizationEditMode","supportsRollbackOnFailureParameter","supportsStatistics","supportsTruncate","supportsValidateSql","tileMaxRecordCount","useStandardizedQueries"]}}}}})],r.prototype,"capabilities",void 0),e([a("service","capabilities")],r.prototype,"readCapabilitiesFromService",null),e([t(v("dateFieldsTimeReference"))],r.prototype,"dateFieldsTimeZone",void 0),e([t({type:Boolean})],r.prototype,"datesInUnknownTimezone",void 0),e([t({type:String,json:{origins:{service:{read:!1,write:!1}},name:"layerDefinition.definitionExpression",write:{enabled:!0,allowNull:!0}}})],r.prototype,"definitionExpression",void 0),e([t({type:String,json:{origins:{service:{read:{source:"displayField"}}}}})],r.prototype,"displayField",void 0),e([t({readOnly:!0,type:P})],r.prototype,"editFieldsInfo",void 0),e([t({readOnly:!0})],r.prototype,"editingInfo",void 0),e([a("editingInfo")],r.prototype,"readEditingInfo",null),e([t({readOnly:!0})],r.prototype,"effectiveCapabilities",null),e([t((()=>{let i=I(Z),o=i.json.origins;return o["web-map"]={read:!1,write:!1},o["portal-item"]={read:!1,write:!1},i})())],r.prototype,"elevationInfo",void 0),e([t({type:Q,json:{name:"layerDefinition.floorInfo",write:!0,origins:{"web-scene":{name:"layerDefinition.floorInfo",write:{enabled:!0,layerContainerTypes:U}}}}})],r.prototype,"floorInfo",void 0),e([t({type:T,json:{origins:{service:{read:{source:"extent"}}}}})],r.prototype,"fullExtent",void 0),e([t()],r.prototype,"gdbVersion",void 0),e([t({readOnly:!0,type:z,json:{read:{source:"geometryProperties"}}})],r.prototype,"geometryFieldsInfo",void 0),e([t({type:["point","polygon","polyline","multipoint","multipatch","mesh"],json:{origins:{service:{read:C.read}}}})],r.prototype,"geometryType",void 0),e([t({type:String})],r.prototype,"globalIdField",void 0),e([a("service","globalIdField",["globalIdField","fields"])],r.prototype,"readGlobalIdFieldFromService",null),e([t({readOnly:!0})],r.prototype,"hasFullEditingRestrictions",null),e([t({type:Boolean,json:{origins:{service:{read:!0}}}})],r.prototype,"hasM",void 0),e([t({readOnly:!0})],r.prototype,"hasUpdateItemRestrictions",null),e([t({type:Boolean,json:{origins:{service:{read:!0}}}})],r.prototype,"hasZ",void 0),e([t({readOnly:!0,type:M})],r.prototype,"heightModelInfo",void 0),e([t({type:Date})],r.prototype,"historicMoment",void 0),e([t({type:S.ofType(d),readOnly:!0})],r.prototype,"indexes",void 0),e([t({readOnly:!0})],r.prototype,"isTable",void 0),e([a("service","isTable",["type"])],r.prototype,"readIsTableFromService",null),e([t({type:Number,json:{origins:{service:{read:{source:"id"}},"portal-item":{read:!1,write:{target:"id"}}},read:!1}})],r.prototype,"layerId",void 0),e([t(L)],r.prototype,"maxScale",void 0),e([a("service","maxScale",["maxScale","effectiveMaxScale"])],r.prototype,"readMaxScale",null),e([t(G)],r.prototype,"minScale",void 0),e([a("service","minScale",["minScale","effectiveMinScale"])],r.prototype,"readMinScale",null),e([t({type:String})],r.prototype,"objectIdField",void 0),e([a("service","objectIdField",["objectIdField","fields"])],r.prototype,"readObjectIdFieldFromService",null),e([t(v("preferredTimeReference"))],r.prototype,"preferredTimeZone",void 0),e([t({type:[W],readOnly:!0})],r.prototype,"relationships",void 0),e([t({type:Boolean})],r.prototype,"returnM",void 0),e([t({type:Boolean})],r.prototype,"returnZ",void 0),e([t({readOnly:!0,json:{write:!1}})],r.prototype,"serverGens",void 0),e([t({readOnly:!0})],r.prototype,"serviceDefinitionExpression",void 0),e([a("service","serviceDefinitionExpression",["definitionQuery","definitionExpression"])],r.prototype,"readServiceDefinitionExpression",null),e([t({type:String,readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],r.prototype,"serviceItemId",void 0),e([t()],r.prototype,"sourceJSON",void 0),e([t({type:O,json:{origins:{service:{read:{source:"extent.spatialReference"}}}}})],r.prototype,"spatialReference",void 0),e([t({type:String,readOnly:!0,json:{origins:{service:{read:!0}}}})],r.prototype,"subtypeField",void 0),e([t({type:[q],readOnly:!0,json:{read:!1,origins:{service:{read:!0}}}})],r.prototype,"subtypes",void 0),e([t({type:String,json:{read:{source:"timeInfo.trackIdField"}}})],r.prototype,"trackIdField",void 0),e([t(V)],r.prototype,"url",null),e([F("url")],r.prototype,"writeUrl",null),e([t({json:{origins:{service:{read:!0}},read:!1}})],r.prototype,"version",void 0),e([a("service","version",["currentVersion","capabilities","drawingInfo","hasAttachments","htmlPopupType","relationships","timeInfo","typeIdField","types"])],r.prototype,"readVersion",null),r=e([p("esri.layers.mixins.FeatureLayerBase")],r),r};export{St as a};
