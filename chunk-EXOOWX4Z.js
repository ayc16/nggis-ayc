import{a as gn,e as bn,h as Y}from"./chunk-RBP2Z7C6.js";import{e as fn}from"./chunk-H3VY6XFU.js";import{a as x}from"./chunk-LNYBTIG7.js";import{A as R,C as un,b as w,e,l as S,m as sn,n as tn,o as on,t as an,v as V,x as en,y as rn,z as cn}from"./chunk-SJTQM4NH.js";import{a as L}from"./chunk-ALWV3RJ2.js";import{d as Q,f as $,p as nn}from"./chunk-EBWCXIFH.js";import{a as y}from"./chunk-BCREO4Q5.js";import{i as K}from"./chunk-76YVRX2R.js";import{B as T,D as J,a as h,b as u,c as N,d as p,e as A,l as f,n as H,p as q,s as F,t as m,w as d}from"./chunk-OZF6BMOL.js";import{a as P,b as M,c as j}from"./chunk-GJP6PTKT.js";import{r as D}from"./chunk-HQMV3KQV.js";var k=()=>D.getLogger("esri.views.3d.support.geometryUtils.boundedPlane"),U=class{constructor(){this.plane=S(),this.origin=P(),this.basis1=P(),this.basis2=P()}},yn=U;function v(n=vn){return{plane:S(n.plane),origin:M(n.origin),basis1:M(n.basis1),basis2:M(n.basis2)}}function Mn(n,t,s){let i=kn.get();return i.origin=n,i.basis1=t,i.basis2=s,i.plane=sn(0,0,0,0),C(i),i}function O(n,t=v()){return pn(n.origin,n.basis1,n.basis2,t)}function jn(n,t){u(t.origin,n.origin),u(t.basis1,n.basis1),u(t.basis2,n.basis2),tn(t.plane,n.plane)}function pn(n,t,s,i=v()){return u(i.origin,n),u(i.basis1,t),u(i.basis2,s),C(i),Rn(i,"fromValues()"),i}function C(n){V(n.basis2,n.basis1,n.origin,n.plane)}function mn(n,t,s){n!==s&&O(n,s);let i=f(e.get(),l(n),t);return p(s.origin,s.origin,i),s.plane[3]-=t,s}function An(n,t,s){return dn(t,s),mn(s,X(n,n.origin),s),s}function dn(n,t=v()){let s=(n[2]-n[0])/2,i=(n[3]-n[1])/2;return N(t.origin,n[0]+s,n[1]+i,0),N(t.basis1,s,0,0),N(t.basis2,0,i,0),on(0,0,1,0,t.plane),t}function G(n,t,s){return!!en(n.plane,t,s)&&wn(n,s)}function Tn(n,t,s){if(G(n,t,s))return s;let i=hn(n,t,e.get());return p(s,t.origin,f(e.get(),t.direction,H(t.origin,i)/h(t.direction))),s}function hn(n,t,s){let i=_.get();Sn(n,t,i,_.get());let o=Number.POSITIVE_INFINITY;for(let a of z){let r=Z(n,a,E.get()),g=e.get();if(rn(i,r,g)){let c=J(e.get(),t.origin,g),b=Math.abs(K(m(t.direction,c)));b<o&&(o=b,u(s,g))}}return o===Number.POSITIVE_INFINITY?In(n,t,s):s}function In(n,t,s){if(G(n,t,s))return s;let i=_.get(),o=_.get();Sn(n,t,i,o);let a=Number.POSITIVE_INFINITY;for(let r of z){let g=Z(n,r,E.get()),c=e.get();if(cn(i,g,c)){let b=fn(t,c);if(!R(o,c))continue;b<a&&(a=b,u(s,c))}}return W(n,t.origin)<a&&Pn(n,t.origin,s),s}function Pn(n,t,s){let i=un(n.plane,t,e.get()),o=Y(ln(n,n.basis1),i,-1,1,e.get()),a=Y(ln(n,n.basis2),i,-1,1,e.get());return A(s,p(e.get(),o,a),n.origin),s}function Nn(n,t,s){let{origin:i,basis1:o,basis2:a}=n,r=A(e.get(),t,i),g=w(o,r),c=w(a,r),b=w(l(n),r);return N(s,g,c,b)}function W(n,t){let s=Nn(n,t,e.get()),{basis1:i,basis2:o}=n,a=h(i),r=h(o),g=Math.max(Math.abs(s[0])-a,0),c=Math.max(Math.abs(s[1])-r,0),b=s[2];return g*g+c*c+b*b}function Vn(n,t){return Math.sqrt(W(n,t))}function xn(n,t){let s=Number.NEGATIVE_INFINITY;for(let i of z){let o=Z(n,i,E.get()),a=bn(o,t);a>s&&(s=a)}return Math.sqrt(s)}function _n(n,t){return R(n.plane,t)&&wn(n,t)}function On(n,t,s,i){return Ln(n,s,i)}function X(n,t){let s=-n.plane[3];return w(l(n),t)-s}function Cn(n,t,s,i){let o=X(n,t),a=f(Yn,l(n),s-o);return p(i,t,a),i}function En(n,t){return T(n.basis1,t.basis1)&&T(n.basis2,t.basis2)&&T(n.origin,t.origin)}function qn(n,t,s){return n!==s&&O(n,s),$(I,t),Q(I,I),d(s.basis1,n.basis1,I),d(s.basis2,n.basis2,I),d(s.plane,n.plane,I),d(s.origin,n.origin,t),an(s.plane,s.plane,s.origin),s}function Fn(n,t,s,i){return n!==i&&O(n,i),nn(B,t,s),d(i.basis1,n.basis1,B),d(i.basis2,n.basis2,B),C(i),i}function l(n){return n.plane}function Ln(n,t,s){switch(t){case y.X:u(s,n.basis1),F(s,s);break;case y.Y:u(s,n.basis2),F(s,s);break;case y.Z:u(s,l(n))}return s}function wn(n,t){let s=A(e.get(),t,n.origin),i=q(n.basis1),o=q(n.basis2),a=m(n.basis1,s),r=m(n.basis2,s);return-a-i<0&&a-i<0&&-r-o<0&&r-o<0}function ln(n,t){let s=E.get();return u(s.origin,n.origin),u(s.vector,t),s}function Z(n,t,s){let{basis1:i,basis2:o,origin:a}=n,r=f(e.get(),i,t.origin[0]),g=f(e.get(),o,t.origin[1]);p(s.origin,r,g),p(s.origin,s.origin,a);let c=f(e.get(),i,t.direction[0]),b=f(e.get(),o,t.direction[1]);return f(s.vector,p(c,c,b),2),s}function Rn(n,t){Math.abs(m(n.basis1,n.basis2)/(h(n.basis1)*h(n.basis2)))>1e-6&&k().warn(t,"Provided basis vectors are not perpendicular"),Math.abs(m(n.basis1,l(n)))>1e-6&&k().warn(t,"Basis vectors and plane normal are not perpendicular"),Math.abs(-m(l(n),n.origin)-n.plane[3])>1e-6&&k().warn(t,"Plane offset is not consistent with plane origin")}function Sn(n,t,s,i){let o=l(n);V(o,t.direction,t.origin,s),V(s,o,t.origin,i)}var vn={plane:S(),origin:j(0,0,0),basis1:j(1,0,0),basis2:j(0,1,0)},_=new x(S),E=new x(gn),Yn=P(),kn=new x(()=>v()),z=[{origin:[-1,-1],direction:[1,0]},{origin:[1,-1],direction:[0,1]},{origin:[1,1],direction:[-1,0]},{origin:[-1,1],direction:[0,-1]}],I=L(),B=L(),ts=Object.freeze(Object.defineProperty({__proto__:null,BoundedPlaneClass:yn,altitudeAt:X,axisAt:On,closestPoint:In,closestPointOnSilhouette:hn,copy:O,copyWithoutVerify:jn,create:v,distance:Vn,distance2:W,distanceToSilhouette:xn,elevate:mn,equals:En,extrusionContainsPoint:_n,fromAABoundingRect:dn,fromValues:pn,intersectRay:G,intersectRayClosestSilhouette:Tn,normal:l,projectPoint:Pn,projectPointLocal:Nn,rotate:Fn,setAltitudeAt:Cn,setExtent:An,transform:qn,up:vn,updateUnboundedPlane:C,wrap:Mn},Symbol.toStringTag,{value:"Module"}));export{v as a,O as b,C as c,dn as d,Vn as e};
