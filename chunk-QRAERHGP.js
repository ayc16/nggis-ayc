import{a as kt}from"./chunk-Z5N4P45E.js";import{c as zt,e as K,f as $,g as C,h as Mt,i as Tt,j as Pt}from"./chunk-AC7AQWXQ.js";import{c as wt,d as bt}from"./chunk-XDMNA7OV.js";import{a as m,b as St}from"./chunk-2EA2KAER.js";import{a as jt,b as At}from"./chunk-WXS2B4FF.js";import{b as W,f as J,g as Q,q as Y}from"./chunk-XFK3CDZ5.js";import{a as xt,b as p,c as Rt,d as Z,e as P,h as U,i as vt,j as X,k as Nt,l as Gt,n as I,p as H}from"./chunk-J57HR4DB.js";import{a as ht}from"./chunk-IFPBW5UQ.js";import{f as L}from"./chunk-QBQKFGOZ.js";import{b as dt,f as gt}from"./chunk-6FWNINU2.js";import{c as yt}from"./chunk-RSDQHAJX.js";import{b as st}from"./chunk-G3LLBABP.js";import{a as ft,b as pt,j,t as D}from"./chunk-UI76XBLJ.js";import{a as ct,b as mt}from"./chunk-UE2YGKE7.js";import{B,U as ut,n as _,o as lt}from"./chunk-BE76S5KT.js";import{a as T}from"./chunk-D2ITYHSM.js";import{F as y,Q as V}from"./chunk-VWEBO6QK.js";import{S as M,x as R}from"./chunk-KAAR5ZJN.js";import{a as u}from"./chunk-W3WDPWBE.js";import{h as O}from"./chunk-EAH6BNBL.js";var A=class extends At{constructor(t){super(t),this.row=0,this.column=0,this.rows=1,this.columns=1}equals(t){return t!=null&&this.row===t.row&&this.rows===t.rows&&this.column===t.column&&this.columns===t.columns}};u([y({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],A.prototype,"row",void 0),u([y({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],A.prototype,"column",void 0),u([y({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],A.prototype,"rows",void 0),u([y({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],A.prototype,"columns",void 0),A=u([M("esri.CameraLayout")],A);var tt=A;var w=class extends jt(V){constructor(...t){super(...t),this.position=new j([0,0,0]),this.heading=0,this.tilt=0,this.fov=55,this.layout=new tt}normalizeCtorArgs(t,e,r,o){if(t&&typeof t=="object"&&("x"in t||Array.isArray(t))){let n={position:t};return e!=null&&(n.heading=e),r!=null&&(n.tilt=r),o!=null&&(n.fov=o),n}return t}writePosition(t,e,r,o){let n=t.clone();n.x=R(t.x||0),n.y=R(t.y||0),n.z=t.hasZ?R(t.z||0):t.z,e[r]=n.write({},o)}readPosition(t,e){let r=new j;return r.read(t,e),r.x=R(r.x||0),r.y=R(r.y||0),r.z=r.hasZ?R(r.z||0):r.z,r}equals(t){return t!=null&&this.tilt===t.tilt&&this.heading===t.heading&&this.fov===t.fov&&this.position.equals(t.position)&&this.layout.equals(t.layout)}};u([y({type:j,json:{write:{isRequired:!0}}})],w.prototype,"position",void 0),u([ct("position")],w.prototype,"writePosition",null),u([ft("position")],w.prototype,"readPosition",null),u([y({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),T(t=>kt.normalize(R(t)))],w.prototype,"heading",void 0),u([y({type:Number,nonNullable:!0,json:{write:{isRequired:!0}}}),T(t=>dt(R(t),-180,180))],w.prototype,"tilt",void 0),u([y({type:Number,nonNullable:!0,json:{read:!1,write:!1}})],w.prototype,"fov",void 0),u([y({type:tt,nonNullable:!0,json:{read:!1,write:!1}})],w.prototype,"layout",void 0),w=u([M("esri.Camera")],w);var qt=w;var rt,G=rt=class extends V{constructor(t){super(t),this.rotation=0,this.scale=0,this.targetGeometry=null,this.camera=null}castRotation(t){return(t%=360)<0&&(t+=360),t}clone(){return new rt({rotation:this.rotation,scale:this.scale,targetGeometry:this.targetGeometry!=null?this.targetGeometry.clone():null,camera:this.camera!=null?this.camera.clone():null})}};function et(){return{enabled:!this.camera}}u([y({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:et}}}}})],G.prototype,"rotation",void 0),u([T("rotation")],G.prototype,"castRotation",null),u([y({type:Number,json:{write:!0,origins:{"web-map":{default:0,write:!0},"web-scene":{write:{overridePolicy:et}}}}})],G.prototype,"scale",void 0),u([y({types:ht,json:{read:L,write:!0,origins:{"web-scene":{read:L,write:{overridePolicy:et}}}}})],G.prototype,"targetGeometry",void 0),u([y({type:qt,json:{write:!0}})],G.prototype,"camera",void 0),G=rt=u([M("esri.Viewpoint")],G);var F=G;function z(){return[1,0,0,1,0,0]}function Lt(t){return[t[0],t[1],t[2],t[3],t[4],t[5]]}function Wt(t,e,r,o,n,a){return[t,e,r,o,n,a]}function Jt(t,e){return new Float64Array(t,e,6)}var Qt=z(),Le=Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:Qt,clone:Lt,create:z,createView:Jt,fromValues:Wt},Symbol.toStringTag,{value:"Module"}));var Vt=96,It=39.37,Yt=180/Math.PI;function Ct(t){return t.wkid?t:t.spatialReference||mt.WGS84}function nt(t,e){return e.type?p(t,e.x,e.y):xt(t,e)}function Ft(t){return ut(t)}function E(t,e,r=0){let o=t.width,n=t.height;if(r!==0){let c=gt(r),l=Math.abs(Math.cos(c)),s=Math.abs(Math.sin(c));o=t.width*l+t.height*s,n=t.width*s+t.height*l}let a=Math.max(1,e[0]),i=Math.max(1,e[1]);return Math.max(o/a,n/i)*$t(t.spatialReference)}function k(t,e,r,o){return O(this,null,function*(){let n,a;if(!t||Array.isArray(t)&&!t.length)return null;if(st.isCollection(t)&&(t=t.toArray()),Array.isArray(t)&&t.length&&typeof t[0]=="object"){let c=t.every(g=>"attributes"in g),l=t.some(g=>!g.geometry),s=t;if(c&&l&&e&&e.allLayerViews){let g=new Map;for(let f of t){let d=f.layer,x=g.get(d)||[],N=f.attributes[d.objectIdField];N!=null&&x.push(N),g.set(d,x)}let v=[];g.forEach((f,d)=>{let x=e.allLayerViews.find(N=>N.layer.id===d.id);if(x&&"queryFeatures"in x){let N=d.createQuery();N.objectIds=f,N.returnGeometry=!0,v.push(x.queryFeatures(N))}});let b=yield Promise.all(v),h=[];for(let f of b)if(f&&f.features&&f.features.length)for(let d of f.features)d.geometry!=null&&h.push(d.geometry);s=h}for(let g of s)o=yield k(g,e,r,o);return o}if(Array.isArray(t)&&t.length===2&&typeof t[0]=="number"&&typeof t[1]=="number")n=new j(t);else if(t instanceof pt)n=t;else if("geometry"in t){if(t.geometry)n=t.geometry;else if(t.layer){let c=t.layer,l=e.allLayerViews.find(s=>s.layer.id===c.id);if(l&&"queryFeatures"in l){let s=c.createQuery();s.objectIds=[t.attributes[c.objectIdField]],s.returnGeometry=!0,n=(yield l.queryFeatures(s))?.features?.[0]?.geometry}}}if(n==null)return null;switch(n.type){case"point":a=new D({xmin:n.x,ymin:n.y,xmax:n.x,ymax:n.y,spatialReference:n.spatialReference});break;case"extent":case"multipoint":case"polygon":case"polyline":a=wt(n);break;default:a=n.extent}if(!a)return null;W()||Y(a.spatialReference,r)||(yield J());let i=Q(a,r);return i?o=o?o.union(i):i:null})}function Zt(t){if(t&&(!Array.isArray(t)||typeof t[0]!="number")&&(typeof t=="object"||Array.isArray(t)&&typeof t[0]=="object")){if("layer"in t&&t.layer?.minScale!=null&&t.layer.maxScale!=null){let e=t.layer;return{min:e.minScale,max:e.maxScale}}if(Array.isArray(t)&&t.length&&t.every(e=>"layer"in e)){let e=0,r=0;for(let o of t){let n=o.layer;n?.minScale&&n.maxScale&&(e=n.minScale<e?n.minScale:e,r=n.maxScale>r?n.maxScale:r)}return e&&r?{min:e,max:r}:null}}}function ot(t,e){return _(Ct(t),e)?t:Q(t,e)}function sr(t,e){return O(this,null,function*(){if(!t||!e)return new F({targetGeometry:new j,scale:0,rotation:0});let r=e.spatialReference,{constraints:o,padding:n,viewpoint:a,size:i}=e,c=[n?i[0]-n.left-n.right:i[0],n?i[1]-n.top-n.bottom:i[1]],l=null;t instanceof F?l=t:t.viewpoint?l=t.viewpoint:t.target&&t.target.declaredClass==="esri.Viewpoint"&&(l=t.target);let s=null;l?.targetGeometry?s=l.targetGeometry:t instanceof D?s=t:(t||t&&("center"in t||"extent"in t||"target"in t))&&(s=(yield k(t.center,e,r))||(yield k(t.extent,e,r))||(yield k(t.target,e,r))||(yield k(t,e,r))),!s&&a?.targetGeometry?s=a.targetGeometry:!s&&e.extent&&(s=e.extent),r||(r=Ct(e.spatialReference||e.extent||s)),W()||_(s.spatialReference,r)||Y(s.spatialReference,r)||(yield J());let g=ot(s,r),v="center"in g?g.center:g;e.pickClosestTarget!==!1&&v.type==="point"&&a.targetGeometry?.type==="point"&&(v.x=bt(v.x,a.targetGeometry.x,v.spatialReference));let b=0;l?b=l.rotation:t.hasOwnProperty("rotation")?b=t.rotation:a&&(b=a.rotation);let h=0;if(l?.targetGeometry!=null&&l.targetGeometry.type==="point")h=l.scale;else if("scale"in t&&t.scale)h=t.scale;else if("zoom"in t&&t.zoom!==-1&&o&&o.effectiveLODs)h=o.zoomToScale(t.zoom);else if(Array.isArray(s)||s.type==="point"||s.type==="extent"&&s.width===0&&s.height===0){let x=ot(e.extent,r);h=x!=null?E(x,c,b):e.extent?E(e.extent,c,b):a.scale}else h=E(ot(s.extent,r),c,b);let f=Zt(t.target??t);f&&(f.min&&f.min<h?h=f.min:f.max&&f.max>h&&(h=f.max));let d=new F({targetGeometry:v,scale:h,rotation:b});return o&&(d=o.fit(d),o.constrainByGeometry(d),o.rotationEnabled||(d.rotation=a.rotation)),d})}function S(t,e){let r=t.targetGeometry,o=e.targetGeometry;return r.x=o.x,r.y=o.y,r.spatialReference=o.spatialReference,t.scale=e.scale,t.rotation=e.rotation,t}function Ut(t,e,r){return r?p(t,.5*(e[0]-r.right+r.left),.5*(e[1]-r.bottom+r.top)):P(t,e,.5)}var cr=function(){let t=m();return function(e,r,o){let n=r.targetGeometry;nt(t,n);let a=.5*q(r);return e.xmin=t[0]-a*o[0],e.ymin=t[1]-a*o[1],e.xmax=t[0]+a*o[0],e.ymax=t[1]+a*o[1],e.spatialReference=n.spatialReference,e}}();function lr(t,e,r,o,n){return re(t,e,r.center),t.scale=E(r,o),n?.constraints?.constrain(t),t}function Xt(t,e,r,o){return _t(t,e,r,o),zt(t,t)}var Et=function(){let t=m();return function(e,r,o){return H(e,te(e,r),Ut(t,r,o))}}(),Ht=function(){let t=z(),e=m();return function(r,o,n,a){let i=q(o),c=at(o);return p(e,i,i),Tt(t,e),K(t,t,c),C(t,t,Et(e,n,a)),C(t,t,[0,a.top-a.bottom]),p(r,t[4],t[5])}}();function q(t){return t.scale*Kt(t.targetGeometry)}function Kt(t){return t!=null&&B(t.spatialReference)?1/(Ft(t.spatialReference)*It*Vt):1}function at(t){return yt(t.rotation)||0}function $t(t){return B(t)?Ft(t)*It*Vt:1}function te(t,e){return P(t,e,.5)}var Ot=function(){let t=m(),e=m(),r=m();return function(o,n,a,i,c,l){return vt(t,n),P(e,a,.5*l),p(r,1/i*l,-1/i*l),Pt(o,e),c&&K(o,o,c),$(o,o,r),C(o,o,t),o}}(),_t=function(){let t=m();return function(e,r,o,n){let a=q(r),i=at(r);return nt(t,r.targetGeometry),Ot(e,t,o,a,i,n)}}(),ur=function(){let t=m();return function(e,r,o,n){let a=q(r);return nt(t,r.targetGeometry),Ot(e,t,o,a,0,n)}}();function ee(t){let e=lt(t);return e?e.valid[1]-e.valid[0]:0}function mr(t,e){return Math.round(ee(t)/e)}var fr=function(){let t=m(),e=m(),r=[0,0,0];return function(o,n,a){Z(t,o,n),X(t,t),Z(e,o,a),X(e,e),Gt(r,t,e);let i=Math.acos(Nt(t,e)/(U(t)*U(e)))*Yt;return r[2]<0&&(i=-i),isNaN(i)&&(i=0),i}}(),pr=function(){let t=m();return function(e,r,o,n){let a=e.targetGeometry;return S(e,r),Ht(t,r,o,n),a.x+=t[0],a.y+=t[1],e}}(),re=function(t,e,r){S(t,e);let o=t.targetGeometry;return o.x=r.x,o.y=r.y,o.spatialReference=r.spatialReference,t},yr=function(){let t=m();return function(e,r,o,n,a){a||(a="center"),H(t,o,n),P(t,t,.5);let i=t[0],c=t[1];switch(a){case"center":p(t,0,0);break;case"left":p(t,-i,0);break;case"top":p(t,0,c);break;case"right":p(t,i,0);break;case"bottom":p(t,0,-c);break;case"top-left":p(t,-i,c);break;case"bottom-left":p(t,-i,-c);break;case"top-right":p(t,i,c);break;case"bottom-right":p(t,i,-c)}return it(e,r,t),e}}();function dr(t,e,r){return S(t,e),t.rotation+=r,t}function gr(t,e,r){return S(t,e),t.rotation=r,t}var oe=function(){let t=m();return function(e,r,o,n,a){return S(e,r),isNaN(o)||o===0||(Bt(t,n,r,a),e.scale=r.scale*o,Dt(t,t,e,a),it(e,e,p(t,t[0]-n[0],n[1]-t[1]))),e}}();function hr(t,e,r){return S(t,e),t.scale=r,t}var ne=function(){let t=m();return function(e,r,o,n,a,i){return S(e,r),isNaN(o)||o===0||(Bt(t,a,r,i),e.scale=r.scale*o,e.rotation+=n,Dt(t,t,e,i),it(e,e,p(t,t[0]-a[0],a[1]-t[1]))),e}}(),wr=function(){let t=m(),e=m();return function(r,o,n,a,i,c,l){return Et(e,c,l),Rt(t,i,e),a?ne(r,o,n,a,t,c):oe(r,o,n,t,c)}}(),Bt=function(){let t=z();return function(e,r,o,n){return I(e,r,Xt(t,o,n,1))}}(),Dt=function(){let t=z();return function(e,r,o,n){return I(e,r,_t(t,o,n,1))}}(),it=function(){let t=m(),e=z();return function(r,o,n){S(r,o);let a=q(o),i=r.targetGeometry;return Mt(e,at(o)),$(e,e,St(a,a)),I(t,n,e),i.x+=t[0],i.y+=t[1],r}}();export{F as a,z as b,E as c,sr as d,S as e,Ut as f,cr as g,lr as h,Et as i,q as j,Ot as k,_t as l,ur as m,ee as n,mr as o,fr as p,pr as q,re as r,yr as s,dr as t,gr as u,hr as v,ne as w,wr as x,it as y};
