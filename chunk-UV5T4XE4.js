import{a as wt,b as N,c as Pt,e as zt,f as Rt,g as v,h as Dt,i as Tt,j as _t,k as Ot,l as Z,n as Ct}from"./chunk-33NX2DRK.js";import{a as Lt}from"./chunk-MVDBB2SU.js";import{a as vt}from"./chunk-TXV2XM7Y.js";import{a as ct}from"./chunk-UZSTUBKI.js";import{a as pt}from"./chunk-HPYRFOMM.js";import{b as It,c as Vt,d as Ut}from"./chunk-XFFRGEY6.js";import{b,f as Y,g as G,i as j,j as At,o as Mt,p as St}from"./chunk-4DOINYTW.js";import{s as Ft}from"./chunk-GLDWQ77T.js";import{b as xt,j as bt}from"./chunk-R4SFVOZO.js";import{a as y,b as z,c as A,d as F,e as I,f as yt,j as R,k as kt,l as D}from"./chunk-O73QQ7Z7.js";import{I as gt}from"./chunk-KYPWFZ3A.js";import{a as ht}from"./chunk-32VQE3PR.js";import{D as dt,m as mt,q as ft}from"./chunk-SJTQM4NH.js";import{b as X}from"./chunk-47MSGR2H.js";import{a as $}from"./chunk-V2KSICSA.js";import{l as P}from"./chunk-76YVRX2R.js";import{C as H,c as q,l as nt,m as st,p as lt,q as ut}from"./chunk-OZF6BMOL.js";import{a as x,b as it,f as rt,i as E}from"./chunk-GJP6PTKT.js";import{e as C}from"./chunk-JOSG37QF.js";import{f as w,k as at}from"./chunk-2KZICFRS.js";import{fa as et,ga as ot,t as tt}from"./chunk-4JWMB5SM.js";import{L as u,O as J}from"./chunk-AUTL5LCV.js";import{S as k}from"./chunk-KUJG22IX.js";import{a as n}from"./chunk-W3WDPWBE.js";import{a as K,c as U}from"./chunk-GISCFF3Z.js";import{a as d,h as O}from"./chunk-EAH6BNBL.js";function Ue(t,o){let e=X(o.vertexSpace),{scale:a,orientation:i}=t,{transform:l}=o,r=Jt(l);e&&r!=null?(i.actual=F(r,"degrees","arithmetic"),i.visible=!0):(i.actual=null,i.visible=!1),e?(a.actual=y(qt(l)),a.visible=!0):(a.actual=null,a.visible=!1)}function we(t,o,e){if(!o||!X(o.vertexSpace))return;let a=o.transform??=new pt,{rotationAngle:i,rotationAxis:l}=a,r=At(t.orientation.actual),h=Et(l);if(r!=null&&h!=null&&r!==i){e?.onRotateStart?.(i);let g=r*h;a.rotationAngle=g,e?.onRotate?.(g),e?.onRotateStop?.(g)}let m=t.scale.actual?.value,c=qt(a);if(m!=null&&m!==c){let{scale:g}=a,f;if(e?.onScaleStart?.(g[0],g[1],g[2]),c===0)f=it(rt);else{let _=m/c;f=nt(x(),g,_)}a.scale=f,e?.onScale?.(f[0],f[1],f[2]),e?.onScaleStop?.(f[0],f[1],f[2])}}function Pe(t,o){let{x:e,y:a,z:i}=o,{x:l,y:r,z:h}=Kt(t,o.spatialReference);return{dx:l==null||P(l,e)?0:l-e,dy:r==null||P(r,a)?0:r-a,dz:h==null||i==null||P(h,i)?0:h-i}}function Kt(t,o){let e,a,i;if(t.geographic){e=j(t.longitude.actual),a=j(t.latitude.actual),tt(o)&&(e!=null&&a!=null?[e,a]=w(e,a,B):e!=null?e=w(e,0,B)[0]:a!=null&&(a=w(0,a,B)[1]));let l=t.elevation.actual,r=et(o);i=r!=null&&l!=null?yt(l,r):void 0}else e=t.x.actual?.value,a=t.y.actual?.value,i=t.elevation.actual?.value;return{x:e,y:a,z:i}}var B=[0,0];function Jt(t){if(!t)return 0;let o=Et(t.rotationAxis);return o!=null?o*t.rotationAngle:null}function Et(t){return H(t,E)?1:H(t,$t)?-1:null}var $t=ut(x(),E);function qt(t){return t?Math.max(...t.scale):1}function ze(t,o){return!(t.type!=="key-down"||t.key!==bt.enterInputMode||!o||!te(o.info))&&(o.enterInputMode(),t.stopPropagation(),!0)}function te(t){let o=t?.sketchOptions;if(!o)return!1;let{inputEnabled:e,visibleElements:a}=o.tooltips;return e&&t.editableFields.some(({name:i})=>i==="x"||i==="y"?a.coordinates:a[i])===!0}function Re(t){let o=null;return U([t.on("paste",e=>O(this,null,function*(){o?.abort(),o=C(()=>O(this,null,function*(){wt()||(yield N()),ee(e,t.info)}))})),C(()=>N()),K(()=>o?.abort())])}function ee(t,o){if(!o||!("geographic"in o))return;let e=t.clipboardData?.getData("text");if(e)if(o.geographic){let a=Tt(e);a&&(o.longitude.applyValue(a.longitude),o.latitude.applyValue(a.latitude),t.stopPropagation(),t.preventDefault())}else{let a=Dt(e);a&&(o.x.applyValue(a.x),o.y.applyValue(a.y),t.stopPropagation(),t.preventDefault())}}var Ht=class{draw(o,e){let a=oe(o),i=this.sortUniqueHints(a),l=[];for(let r of i)r instanceof Ut&&l.push(this.visualizeIntersectionPoint(r,e)),r instanceof Ft&&l.push(this.visualizeLine(r,e)),r instanceof Vt&&l.push(this.visualizeParallelSign(r,e)),r instanceof It&&l.push(this.visualizeRightAngleQuad(r,e)),r instanceof Lt&&l.push(this.visualizePoint(r,e));return U(l)}sortUniqueHints(o){return o}};function oe(t){let o=[];for(let e of t){let a=!0;for(let i of o)if(e.equals(i)){a=!1;break}a&&o.push(e)}return o}function Xt(t,o=L()){return Gt(t,o)}function Yt(t,o=L()){return Gt(t,o,!1)}function Gt(t,o,e=t.hasZ){let a=Ct(t.spatialReference),i=ot(a);if(i==null)return null;let l=(h,m)=>!(m.length<2)&&(q(h,m[0],m[1],e&&m[2]||0),!0),r=0;for(let h of t.rings){let m=h.length;if(m<3)continue;let{positionsWorldCoords:c}=o;for(;c.length<m;)c.push(x());let g=ae,f=q(ie,0,0,0),_=1/m;for(let p=0;p<m;p++){if(!l(g,h[p])||!ht(g,t.spatialReference,c[p],a))return null;st(f,f,c[p],_)}let Q=ft(c[0],c[1],f,mt());if(lt(Q)===0)continue;for(let p=0;p<m;p++)dt(Q,f,c[p],c[p]);let V=re(c);for(let p=0;p<V.length;p+=3)r+=vt(c[V[p]],c[V[p+1]],c[V[p+2]])}return A(r,i)}var ae=x(),ie=x();function L(){return{positionsWorldCoords:[]}}function re(t){return ct(ne(t),[],2)}function ne(t){let o=new Float64Array(2*t.length);for(let e=0;e<t.length;++e){let a=t[e],i=2*e;o[i]=a[0],o[i+1]=a[1]}return o}function jt(t){let{spatialReference:o}=t;return St(o,se,le,t)}function se(t){return A(Math.abs(xt([t],"square-meters")[0]),"square-meters")}function le(t){try{return A(Math.abs(gt(t,"square-meters")),"square-meters")}catch{return null}}function ue(t,o,e=L()){if(o==="on-the-ground"){let a=jt(t);return a??Yt(t,e)}return Xt(t,e)}function so(t,o=L()){return ue(t,"on-the-ground",o)}var s=class extends J{constructor(t){super(t),this.actual=null,this.lockable=!0,this.id=$(),this.inputValue=null,this.readOnly=!1,this.suffix=null,this.visible=!0,this.invalid=!1,this.unlockOnVertexPlacement=!0}get committed(){return this.lockable?this._get("committed"):null}set committed(t){this.lockable&&this._set("committed",t)}get dirty(){return this.inputValue!=null}get locked(){return this.lockable&&this.committed!=null}onInput(t){this.inputValue=t}onCommit(t,o,e){this.lockable?this._onCommitLockable(t,e):this._onCommitNonLockable(e),this.invalid&&t==="commit-and-exit"||e.onCommit(o,t)}_onCommitLockable(t,o){let{inputValue:e,locked:a}=this;a&&T(e)?this.unlock():(t==="commit-and-exit"&&!a||e!=null)&&this._parseInputAndLock(o)}_onCommitNonLockable(t){let{inputValue:o}=this;T(o)?this.setActual(null):o!=null&&this._parseInputAndSetActual(t)}applyValue(t){this.lockable?this.lock(t):this.setActual(t)}clearInputValue(){this.inputValue=null,this.invalid=!1}setActual(t){this.actual=t,this.clearInputValue()}lock(t){this.lockable&&(this.committed=t??this.actual,this.clearInputValue())}unlock(){this.lockable&&(this.committed=null,this.clearInputValue())}toggleLock(t){this.lockable&&(this.locked?this.unlock():this._parseInputAndLock(t))}getSuffix(t){let{suffix:o}=this;return typeof o=="function"?o(t):o}getFormattedValue(t){let{actual:o,committed:e,format:a}=this;return e!=null?a(e,t):o!=null?a(o,t):null}getRawDisplayValue(t){let{actual:o,committed:e,inputValue:a}=this;return a??(this.lockable&&e!=null?this.formatForInputMode(e,t):o!=null?this.formatForInputMode(o,t):null)}_parseInputAndSetActual(t){let{inputValue:o}=this;if(o==null||T(o))return this.setActual(null);let e=this.parse(o,t);e!=null?this.setActual(e):this.invalid=!0}_parseInputAndLock(t){let{inputValue:o,actual:e}=this;if(T(o))return this.unlock();if(o==null)return this.lock(e);let a=this.parse(o,t);a!=null?this.lock(a):this.invalid=!0}};function T(t){return t!=null&&t.trim()===""}n([u()],s.prototype,"actual",void 0),n([u()],s.prototype,"committed",null),n([u()],s.prototype,"dirty",null),n([u()],s.prototype,"format",void 0),n([u()],s.prototype,"formatForInputMode",void 0),n([u()],s.prototype,"lockable",void 0),n([u()],s.prototype,"locked",null),n([u()],s.prototype,"id",void 0),n([u()],s.prototype,"inputValue",void 0),n([u()],s.prototype,"name",void 0),n([u()],s.prototype,"parse",void 0),n([u()],s.prototype,"readOnly",void 0),n([u()],s.prototype,"suffix",void 0),n([u()],s.prototype,"title",void 0),n([u()],s.prototype,"visible",void 0),n([u()],s.prototype,"invalid",void 0),n([u()],s.prototype,"unlockOnVertexPlacement",void 0),s=n([k("esri.views.interactive.tooltip.fields.TooltipField")],s);var M=class extends s{constructor(t){super(t),this.showAsZ=!1}normalizeCtorArgs(t){let o=e=>e.inputUnitInfos.verticalLength.unit;return d({name:"elevation",actual:R,parse:v((e,a)=>z(e,o(a))),format:(e,a)=>a.formatters.verticalLength(e),formatForInputMode:(e,a)=>a.formatters.scalar(I(e,o(a))),suffix:e=>e.inputUnitInfos.verticalLength.abbreviation,title:e=>e.messages.sketch[this.showAsZ?"z":"elevation"],unlockOnVertexPlacement:!1},t)}};n([u()],M.prototype,"showAsZ",void 0),M=n([k("esri.views.interactive.tooltip.fields.TooltipFieldElevation")],M);var S=class extends s{constructor(t){super(t),this.precision=1}normalizeCtorArgs(t){let o=e=>e.inputUnitInfos.orientation.unit;return d({name:"orientation",actual:null,parse:v((e,a)=>F(e,o(a),"geographic")),format:e=>{let a=G(e);return Pt(a,"geographic",this.precision)},formatForInputMode:(e,a)=>{let i=G(e);return a.formatters.scalar(i)},suffix:e=>e.inputUnitInfos.orientation.abbreviation,title:e=>e.messages.sketch.orientation},t)}};n([u()],S.prototype,"precision",void 0),S=n([k("esri.views.interactive.tooltip.fields.TooltipFieldOrientation")],S);function Jo(t){let o=a=>a.inputUnitInfos.direction.unit,e=a=>a.sketchOptions.values.effectiveDirectionMode;return new s(d({name:"direction",actual:D,parse:v((a,i)=>F(a,o(i),"geographic")),format:(a,i)=>{let l=e(i),r=Y(a,l);switch(l){case b.Absolute:return i.formatters.direction(r);case b.Relative:return i.formatters.directionRelative(r);case b.RelativeBilateral:return i.formatters.directionRelativeBilateral(r)}},formatForInputMode:(a,i)=>{let l=Y(a,e(i));return i.formatters.scalar(I(l,o(i)))},suffix:a=>a.inputUnitInfos.direction.abbreviation,title:a=>{let i=e(a),{absolute:l,relative:r}=a.messages.sketch.direction;switch(i){case b.Absolute:return l;case b.Relative:case b.RelativeBilateral:return r}}},t))}function ce(t){let o=e=>e.inputUnitInfos.length.unit;return new s(d({name:"distance",actual:R,parse:v((e,a)=>z(Math.max(e,0),o(a))),format:(e,a)=>a.formatters.length(e),formatForInputMode:(e,a)=>a.formatters.scalar(I(e,o(a))),suffix:e=>e.inputUnitInfos.length.abbreviation,title:e=>e.messages.sketch.distance},t))}function $o(){return ce({format:(t,o)=>o.formatters.totalLength(t),title:t=>t.messages.sketch.totalLength,readOnly:!0})}function Nt(t){return new M(t)}function ta(t){return new S(t)}function ea(t){return W("scale",d({name:"scale",actual:null,parse:v(o=>y(Math.abs(o)))},t))}function oa(t){let o=e=>e.inputUnitInfos.area.unit;return new s(d({name:"area",actual:kt,parse:v((e,a)=>A(e,o(a))),format:(e,a)=>a.formatters.area(e),formatForInputMode:(e,a)=>a.formatters.scalar(I(e,o(a))),suffix:e=>e.inputUnitInfos.area.abbreviation,title:e=>e.messages.sketch.area,readOnly:!0},t))}function Zt(t){return new s(d({name:"x",actual:D,parse:_t,format:(o,e)=>e.formatters.longitudeDecimalDegrees(o),formatForInputMode:o=>zt(o),suffix:o=>o.inputUnitInfos.longitudeLatitude.abbreviation,title:o=>o.messages.sketch.longitude},t))}function Bt(t){return new s(d({name:"y",actual:D,parse:Ot,format:(o,e)=>e.formatters.latitudeDecimalDegrees(o),formatForInputMode:o=>Rt(o),suffix:o=>o.inputUnitInfos.longitudeLatitude.abbreviation,title:o=>o.messages.sketch.latitude},t))}function Wt(t){return W("x",d({name:"x"},t))}function Qt(t){return W("y",d({name:"y"},t))}function W(t,o){return new s(d({actual:y(0),parse:v(e=>y(e)),format:(e,a)=>a.formatters.scalar(e),formatForInputMode:(e,a)=>a.formatters.scalar(e),title:e=>e.messages.sketch[t]},o))}var ga=t=>{let o=class extends t{constructor(){super(...arguments),this.longitude=Zt(),this.latitude=Bt(),this.x=Wt(),this.y=Qt(),this.elevation=Nt(),this.geographic=!1}get effectiveX(){return this.geographic?this.longitude:this.x}get effectiveY(){return this.geographic?this.latitude:this.y}get key(){return{longitude:this.longitude.actual,latitude:this.latitude.actual,x:this.x.actual,y:this.y.actual,elevation:this.elevation.actual,geographic:this.geographic}}setLocationFromPoint(e,a=e?.spatialReference){if(this.geographic=!!a&&Mt(a),e==null)return this._setActualLonLat(null,null),void this._setActualXY(null,null);if(this.geographic){let i=at(e,pe);this._setActualLonLat(Z(i?.[0]),Z(i?.[1]))}else this._setActualXY(y(e.x),y(e.y))}_setActualLonLat(e,a){this.longitude.actual=e,this.latitude.actual=a}_setActualXY(e,a){this.x.actual=e,this.y.actual=a}};return n([u()],o.prototype,"geographic",void 0),n([u()],o.prototype,"effectiveX",null),n([u()],o.prototype,"effectiveY",null),n([u()],o.prototype,"key",null),o=n([k("esri.views.interactive.tooltip.infos.TooltipInfoWithCoordinates")],o),o},pe=[0,0];export{Ht as a,Ue as b,we as c,Pe as d,ze as e,Re as f,ee as g,Jo as h,ce as i,$o as j,ta as k,ea as l,oa as m,ga as n,so as o};
