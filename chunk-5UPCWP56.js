import{a as c}from"./chunk-B4WKB6RS.js";import{b as i,p as s,r as a}from"./chunk-X3IDZTNG.js";var l=()=>s.getLogger("esri.layers.support.labelingInfo"),m=/\[([^\[\]]+)\]/gi;function G(e,t,o){return e?e.map(r=>{let n=new c;if(n.read(r,o),n.labelExpression){let f=t.fields||t.layerDefinition?.fields||this.fields;n.labelExpression=n.labelExpression.replaceAll(m,(g,u)=>`[${p(u,f)}]`)}return n}):null}function p(e,t){if(!t)return e;let o=e.toLowerCase();for(let r=0;r<t.length;r++){let n=t[r].name;if(n.toLowerCase()===o)return n}return e}var b={esriGeometryPoint:["above-right","above-center","above-left","center-center","center-left","center-right","below-center","below-left","below-right"],esriGeometryPolygon:["always-horizontal"],esriGeometryPolyline:["center-along"],esriGeometryMultipoint:null,esriGeometryEnvelope:null};function L(e,t){let o=i(e);return o.some(r=>y(r,t))?[]:o}function y(e,t){let o=e.labelPlacement,r=b[t];if(!e.symbol)return l().warn("No ILabelClass symbol specified."),!0;if(!r)return l().error(new a("labeling:unsupported-geometry-type",`Unable to create labels for layer, geometry type '${t}' is not supported`)),!0;if(!r.includes(o)){let n=r[0];o&&l().warn(`Found invalid label placement type ${o} for ${t}. Defaulting to ${n}`),e.labelPlacement=n}return!1}export{G as a,L as b};
