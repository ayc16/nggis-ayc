import{D as A}from"./chunk-VWEBO6QK.js";import{a as d,b as p,d as y,e as v,g as m,j as w,m as h}from"./chunk-WKT5W7KT.js";import{d as l}from"./chunk-MLSR6YE6.js";function C(n,o,r={}){return f(n,o,r,b)}function B(n,o,r={}){return f(n,o,r,M)}function f(n,o,r={},s){let t=null,a=r.once?(e,i)=>{s(e)&&(l(t),o(e,i))}:(e,i)=>{s(e)&&o(e,i)};if(t=A(n,a,r.sync,r.equals),r.initial){let e=n();a(e,e)}return t}function D(n,o,r,s={}){let t=null,a=null,e=null;function i(){t&&a&&(a.remove(),s.onListenerRemove?.(t),t=null,a=null)}function u(c){s.once&&s.once&&l(e),r(c)}let g=C(n,(c,x)=>{i(),y(c)&&(t=c,a=v(c,o,u),s.onListenerAdd?.(c))},{sync:s.sync,initial:!0});return e=d(()=>{g.remove(),i()}),e}function F(n,o){return L(n,M,o)}function L(n,o,r){if(w(r))return Promise.reject(m());let s=n();if(o?.(s))return Promise.resolve(s);let t=null;function a(){t=l(t)}return new Promise((e,i)=>{t=p([h(r,()=>{a(),i(m())}),f(n,u=>{a(),e(u)},{sync:!1,once:!0},o??b)])})}function b(n){return!0}function M(n){return!!n}var J={sync:!0},K={initial:!0},N={sync:!0,initial:!0};export{C as a,B as b,D as c,F as d,J as e,K as f,N as g};
