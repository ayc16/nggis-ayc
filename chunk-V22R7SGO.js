import{a as ge}from"./chunk-3LFY57U4.js";import{a as fe,b as me,c as de,d as pe,e as be,f as ye,g as O,i as he}from"./chunk-3EFAHNOE.js";import{a as ce}from"./chunk-PPZ64WFD.js";import{a as ue}from"./chunk-B37CRPC4.js";import{b as re,d as E,k as T,l as B,m as ie,n as se,o as D,p as ne}from"./chunk-REV6BOW7.js";import{a as le}from"./chunk-QPOMWSFR.js";import{g as c}from"./chunk-Q7HARYVW.js";import{e as V,f as ee,j as te}from"./chunk-3NRQ53KE.js";import{c as oe}from"./chunk-Q3WN5PJ6.js";import{b as ae}from"./chunk-6FWNINU2.js";import{h as Q}from"./chunk-DS2JVXBM.js";import{F as A}from"./chunk-VWEBO6QK.js";import{S as Z,u as K}from"./chunk-KAAR5ZJN.js";import{a as z}from"./chunk-W3WDPWBE.js";import{a as J}from"./chunk-MLSR6YE6.js";import{d as N}from"./chunk-IQJU4QT3.js";import{a as _,b as M,d as j,h as R}from"./chunk-EAH6BNBL.js";var we={anchor:"esri-widget__anchor",anchorDisabled:"esri-widget__anchor--disabled",button:"esri-button",buttonDisabled:"esri-button--disabled",buttonHalf:"esri-button--half",buttonSecondary:"esri-button--secondary",buttonSmall:"esri-button--small",buttonTertiary:"esri-button--tertiary",buttonThird:"esri-button--third",disabled:"esri-disabled",disabledElement:"esri-disabled-element",empty:"esri-widget__content--empty",emptyIllustration:"esri-widget__content-illustration--empty",heading:"esri-widget__heading",hidden:"esri-hidden",input:"esri-input",interactive:"esri-interactive",loader:"esri-widget__loader",loaderAnimation:"esri-widget__loader-animation",loaderText:"esri-widget__loader-text",menu:"esri-menu",menuHeader:"esri-menu__header",menuItem:"esri-menu__list-item",menuItemActive:"esri-menu__list-item--active",menuItemFocus:"esri-menu__list-item--focus",menuList:"esri-menu__list",noBookmarksIcon:"esri-widget__no-bookmark-icon",panel:"esri-widget--panel",panelHeightOnly:"esri-widget--panel-height-only",primaryTick:"primary-tick",primaryTickAmPm:"primary-tick__ampm",primaryTickLabel:"primary-tick__label",rotating:"esri-rotating",secondaryTick:"secondary-tick",select:"esri-select",table:"esri-widget__table",widget:"esri-widget",widgetButton:"esri-widget--button",widgetButtonActive:"esri-widget--button-active",widgetDisabled:"esri-widget--disabled"};function Ze(l,o){var r=l,{level:t,class:e}=r,a=j(r,["level","class"]);let i=ve(t);return c(`h${i}`,M(_({},a),{"aria-level":String(i),class:V(we.heading,e),role:"heading"}),o)}function ve(t){return ae(Math.ceil(t),1,6)}function Qe(t,e=1){return ve(t+e)}var ke="esri-relationship-ramp",q=`${ke}--diamond`,C=`${ke}--square`,Ee="http://www.w3.org/2000/svg",f={diamondContainer:`${q}__container`,diamondLeftCol:`${q}__left-column`,diamondRightCol:`${q}__right-column`,diamondMidCol:`${q}__middle-column`,diamondMidColLabel:`${q}__middle-column--label`,diamondMidColRamp:`${q}__middle-column--ramp`,squareTable:`${C}__table`,squareTableRow:`${C}__table-row`,squareTableCell:`${C}__table-cell`,squareTableLabel:`${C}__table-label`,squareTableLabelLeftBottom:`${C}__table-label--left-bottom`,squareTableLabelRightBottom:`${C}__table-label--right-bottom`,squareTableLabelLeftTop:`${C}__table-label--left-top`,squareTableLabelRightTop:`${C}__table-label--right-top`};function $e(t,e,a={}){let{focus:o,labels:l}=t,r=!!o,i=Ie(t,e,a),u={justifyContent:"center"},p=ee();return r?c("div",{class:f.diamondContainer,styles:u},c("div",{class:f.diamondLeftCol},p?l.right:l.left),c("div",{class:f.diamondMidCol},c("div",{class:f.diamondMidColLabel},l.top),i,c("div",{class:f.diamondMidColLabel},l.bottom)),c("div",{class:f.diamondRightCol},p?l.left:l.right)):c("div",{class:f.squareTable},c("div",{class:f.squareTableRow},c("div",{class:V(f.squareTableCell,f.squareTableLabel,f.squareTableLabelRightBottom)},p?l.top:l.left),c("div",{class:f.squareTableCell}),c("div",{class:V(f.squareTableCell,f.squareTableLabel,f.squareTableLabelLeftBottom)},p?l.left:l.top)),c("div",{class:f.squareTableRow},c("div",{class:f.squareTableCell}),i,c("div",{class:f.squareTableCell})),c("div",{class:f.squareTableRow},c("div",{class:V(f.squareTableCell,f.squareTableLabel,f.squareTableLabelRightTop)},p?l.right:l.bottom),c("div",{class:f.squareTableCell}),c("div",{class:V(f.squareTableCell,f.squareTableLabel,f.squareTableLabelLeftTop)},p?l.bottom:l.right)))}function Le(t,e,a){let o=`${a}_arrowStart`,l=`${a}_arrowEnd`,r=t==="left",i={markerStart:null,markerEnd:null};switch(e){case"HL":r?i.markerStart=`url(#${l})`:i.markerEnd=`url(#${o})`;break;case"LL":i.markerStart=`url(#${l})`;break;case"LH":r?i.markerEnd=`url(#${o})`:i.markerStart=`url(#${l})`;break;default:i.markerEnd=`url(#${o})`}return i}function Ie(t,e,a={}){let{focus:o,numClasses:l,colors:r,rotation:i}=t,{opacity:u,effectList:p,ariaLabel:h}=a,m=a.size??60,d=!!o,n=Math.sqrt(m**2+m**2)+(d?0:5),y=[],s=[],g=[],w=(m||75)/l;for(let $=0;$<l;$++){let Re=$*w;for(let I=0;I<l;I++){let qe=I*w,U=me(r[$][I]),Fe=de(null),G={type:"rect",x:qe,y:Re,width:w,height:w},X=pe(U);X&&y.push(X);let Y=fe(G,U.fill,Fe,null);Y&&s.push(Y),g.push(be(G))}}let k=10,v=15,b=15,S=10,x=null;d||(x="margin: -15px -15px -18px -15px");let H=Le("left",o,e),P=Le("right",o,e),W=ye(g),Ve=O(W,n,n,0,!1,i,!1),He=O(W,n,n,0,!1,d?-45:null,!1),Me={filter:D(p)??void 0,opacity:u==null?"":`${u}`};return c("div",{class:d?f.diamondMidColRamp:f.squareTableCell,styles:Me},c("svg",{"aria-labelledBy":h,focusable:!1,height:n,role:"image",style:x,width:n,xmlns:Ee},c("defs",null,c("marker",{id:`${e}_arrowStart`,markerHeight:"10",markerUnits:"strokeWidth",markerWidth:"10",orient:"auto",refX:"5",refY:"5"},c("polyline",{fill:"none",points:"0,0 5,5 0,10",stroke:"#555555","stroke-width":"1"})),c("marker",{id:`${e}_arrowEnd`,markerHeight:"10",markerUnits:"strokeWidth",markerWidth:"10",orient:"auto",refX:"0",refY:"5"},c("polyline",{fill:"none",points:"5,0 0,5 5,10",stroke:"#555555","stroke-width":"1"})),y),c("g",{transform:Ve},s),c("g",{transform:He},c("line",{fill:"none","marker-end":H.markerEnd,"marker-start":H.markerStart,stroke:"#555555","stroke-width":"1",x1:-k,x2:-k,y1:m-v,y2:v}),c("line",{fill:"none","marker-end":P.markerEnd,"marker-start":P.markerStart,stroke:"#555555","stroke-width":"1",x1:b,x2:m-b,y1:m+S,y2:m+S}))))}var Se={HH:315,HL:45,LL:135,LH:225},ze={2:[["HL","HH"],["LL","LH"]],3:[["HL","HM","HH"],["ML","MM","MH"],["LL","LM","LH"]],4:[["HL","HM1","HM2","HH"],["M2L","M2M1","M2M2","M2H"],["M1L","M1M1","M1M2","M1H"],["LL","LM1","LM2","LH"]]};function Be(t){if(!t)return;let{type:e}=t;if(e.includes("3d"))return ge(t.symbolLayers.at(0));if(e==="simple-line"){let a=E(t);return a&&a.color}if(t.type==="simple-marker"&&(t.style==="x"||t.style==="cross")){let a=E(t);return a&&a.color}return re(t)}function De(t,e){let a=e.HH.label,o=e.LL.label,l=e.HL.label,r=e.LH.label;switch(t){case"HH":default:return{top:a,bottom:o,left:l,right:r};case"HL":return{top:l,bottom:r,left:o,right:a};case"LL":return{top:o,bottom:a,left:r,right:l};case"LH":return{top:r,bottom:l,left:a,right:o}}}function Ae(t){let{focus:e,infos:a,numClasses:o}=t,l=ze[o],r={};a.forEach(u=>{r[u.value]={label:u.label,fill:Be(u.symbol)}});let i=[];for(let u=0;u<o;u++){let p=[];for(let h=0;h<o;h++){let m=r[l[u][h]];p.push(m.fill)}i.push(p)}return{type:"relationship-ramp",numClasses:o,focus:e,colors:i,labels:De(e,r),rotation:Oe(e)}}function Oe(t){let e=Se[t];return t&&e==null&&(e=Se.HH),e||0}var F=null,xe=[255,255,255];function Te(t,e){return Math.floor(Math.random()*(e-t+1)+t)}function kt(t,e,a){let{backgroundColor:o,outline:l,dotSize:r}=t,i=a?.swatchSize||ce.size,u=.8,p=Math.round(i*i/Math.max(r,.5)**2*u),h=window.devicePixelRatio,m=document.createElement("canvas"),d=i*h;m.width=d,m.height=d,m.style.width=m.width/h+"px",m.style.height=m.height/h+"px";let n=m.getContext("2d");if(o&&(n.fillStyle=o.toCss(!0),n.fillRect(0,0,d,d),n.fill()),n.fillStyle=e?.toCss(!0)??"",F&&F.length/2===p)for(let s=0;s<2*p;s+=2){let g=F[s],w=F[s+1];n.fillRect(g,w,r*h,r*h),n.fill()}else{F=[];for(let s=0;s<2*p;s+=2){let g=Te(0,d),w=Te(0,d);F.push(g,w),n.fillRect(g,w,r*h,r*h),n.fill()}}l&&(l.color&&(n.strokeStyle=l.color.toCss(!0)),n.lineWidth=l.width,n.strokeRect(0,0,d,d));let y=new Image(i,i);return y.src=m.toDataURL(),y.ariaLabel=a?.ariaLabel??null,y.alt=a?.ariaLabel??"",y}function St(t,e={}){let a=e.radius||40,o=2*Math.PI*a,l=t.length,r=o/l,i=[],u=E(e.outline);u?.width!=null&&(u.width*=2),(u||e.backgroundColor)&&i.push({shape:{type:"circle",cx:a,cy:a,r:a},fill:e.backgroundColor,stroke:u,offset:[0,0]});let p=e.values,h=p&&p.length===l&&p.reduce((s,g)=>s+g,0)===100,m=[0];for(let s=0;s<l;s++){let g=null;h&&(g=p[s]*o/100,m.push(g+m[s])),i.push({shape:{type:"circle",cx:a,cy:a,r:a/2},fill:[0,0,0,0],stroke:{width:a,dashArray:`${(g??r)/2} ${o}`,dashoffset:"-"+(h?m[s]/2:s*(r/2)),color:t[s]},offset:[0,0]})}let d=null,n=2*a+(u?.width||0),y=e.holePercentage;if(y){u&&i.push({shape:{type:"circle",cx:a,cy:a,r:a*y},fill:null,stroke:u,offset:[0,0]});let s=n/2;d=[[{shape:{type:"circle",cx:s,cy:s,r:s},fill:xe,stroke:u?M(_({},u),{color:xe}):null,offset:[0,0]},{shape:{type:"circle",cx:s,cy:s,r:a*y},fill:[0,0,0],stroke:null,offset:[0,0]}]]}return he([i],[n,n],{effectView:e.effectList,ignoreStrokeWidth:!0,masking:d,rotation:-90,ariaLabel:e.ariaLabel})}function xt(t,e={}){let l=e.align==="horizontal",r=l?75:24,i=l?24:75,u=e.width??r,p=e.height??i,h=e.gradient??!0,m=window.devicePixelRatio,d=u*m,n=p*m,y=document.createElement("canvas");y.width=d,y.height=n,y.ariaLabel=e.ariaLabel??null,y.style.width=`${u}px`,y.style.height=`${p}px`;let s=y.getContext("2d"),g=l?d:0,w=l?0:n;if(h){let v=s.createLinearGradient(0,0,g,w),b=t.length,S=b===1?0:1/(b-1);t.forEach((x,H)=>v.addColorStop(H*S,x.toString())),s.fillStyle=v,s.fillRect(0,0,d,n)}else{let v=l?d/t.length:d,b=l?n:n/t.length,S=0,x=0;for(let H of t)s.fillStyle=H.toString(),s.fillRect(S,x,v,b),S=l?S+v:0,x=l?0:x+b}let k=document.createElement("div");return k.style.width=`${u}px`,k.style.height=`${p}px`,Pe(k,e?.effectList),k.appendChild(y),k}function Pe(t,e){if(!e)return;t.style.filter=D(e);let a=e.effects;if(a){for(let o of a)if(o?.type==="drop-shadow"){o.offsetX<0?t.style.marginLeft=`${Math.abs(o.offsetX)}px`:t.style.marginRight=`${o.offsetX}px`;break}}}function We(t,e){return R(this,null,function*(){switch(t.type){case"web-style":{let{previewWebStyleSymbol:a}=yield import("./chunk-P6KFJPOE.js");return a(t,We,e)}case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":{let{previewSymbol3D:a}=yield import("./chunk-3563YAGT.js");return a(t,e)}case"simple-marker":case"simple-line":case"simple-fill":case"picture-marker":case"picture-fill":case"text":{let{previewSymbol2D:a}=yield import("./chunk-ESVDKLES.js");return a(t,e)}case"cim":{let{previewCIMSymbol:a}=yield import("./chunk-KK25FOQM.js");return a(t,e)}default:return}})}function Ce(t){return t&&"opacity"in t?t.opacity*Ce(t.parent):1}function Tt(t,e){return R(this,null,function*(){if(!t)return;let a=t.sourceLayer,o=(e!=null&&e.useSourceLayer?a:t.layer)??a,l=Ce(o);if(t.symbol!=null&&(e==null||e.ignoreGraphicSymbol!==!0)){let b=t.symbol.type==="web-style"?yield ne(t.symbol,M(_({},e),{cache:e!=null?e.webStyleCache:null})):t.symbol.clone();return B(b,null,l),b}let r=e?.renderer??Ue(o),i=r&&"getSymbolAsync"in r?yield r.getSymbolAsync(t,e):null;if(!i)return;if(i=i.type==="web-style"?yield i.fetchSymbol(M(_({},e),{cache:e!=null?e.webStyleCache:null})):i.clone(),!r||!("visualVariables"in r)||!r.visualVariables?.length)return B(i,null,l),i;if("arcadeRequiredForVisualVariables"in r&&r.arcadeRequiredForVisualVariables&&e?.arcade==null){let b=_({},e);b.arcade=yield oe(),e=b}let{getColor:u,getOpacity:p,getAllSizes:h,getRotationAngle:m}=yield import("./chunk-YWI5QKEK.js"),d=[],n=[],y=[],s=[];for(let b of r.visualVariables)switch(b.type){case"color":d.push(b);break;case"opacity":n.push(b);break;case"rotation":s.push(b);break;case"size":b.target||y.push(b)}let g=!!d.length&&d[d.length-1],w=g?u(g,t,e):null,k=!!n.length&&n[n.length-1],v=k?p(k,t,e):null;if(l!=null&&(v=v!=null?v*l:l),B(i,w,v),y.length){let b=h(y,t,e);yield ie(i,b)}for(let b of s)se(i,m(b,t,e),b.axis);return i})}function Ue(t){if(t)return"renderer"in t?t.renderer:void 0}var $t=t=>{let e=class extends t{constructor(...a){super(...a),this.goToOverride=null,this.view=null}callGoTo(a){let{view:o}=this;return J(o),this.goToOverride?this.goToOverride(o,a):o.goTo(a.target,a.options)}};return z([A()],e.prototype,"goToOverride",void 0),z([A()],e.prototype,"view",void 0),e=z([Z("esri.widgets.support.GoTo")],e),e};function Dt(){return function(t,e){if(!t[e])throw new TypeError(`Cannot auto bind undefined function '${String(e)}'`);return{value:Xe(t[e])}}}function Ge(t){let e=t?.type;return t instanceof KeyboardEvent||e==="keyup"||e==="keydown"||e==="keypress"}function Xe(t){return function(e,...a){Ge(e)?te(e.key)&&(e.preventDefault(),e.stopPropagation(),e.target.click()):t.call(this,e,...a)}}function _e(t){if(!t.colorStops)return[];let e=[...t.colorStops].filter(o=>o.color?.a>0),a=e.length-1;if(e&&e[0]){let o=e[a];o&&o.ratio!==1&&(e.push(new le({ratio:1,color:o.color})),a++)}return e.map((o,l)=>{let r="";return l===0?r=t.legendOptions?.minLabel||"low":l===a&&(r=t.legendOptions?.maxLabel||"high"),{color:o.color,label:r,ratio:o.ratio}}).reverse()}var ua=Q("short-date");function L(t,e,a){return R(this,null,function*(){K(t,e,()=>[]).push(...a)})}function ca(t){return R(this,null,function*(){let e=new Map;if(!t)return e;if("visualVariables"in t&&t.visualVariables){let a=t.visualVariables.filter(o=>o.type==="color");for(let o of a){let l=((yield ue(o))??[]).map(r=>r.color);yield L(e,o.field||o.valueExpression,l)}}if(t.type==="heatmap"){let a=_e(t).map(o=>o.color);yield L(e,t.field||t.valueExpression,a)}else if(t.type==="pie-chart"){for(let a of t.attributes)yield L(e,a.field||a.valueExpression,[a.color]);yield L(e,"default",[t?.othersCategory?.color,T(t.backgroundFillSymbol,null)])}else if(t.type==="dot-density"){for(let a of t.attributes)yield L(e,a.field||a.valueExpression,[a.color]);yield L(e,"default",[t.backgroundColor])}else if(t.type==="unique-value")if(t.authoringInfo?.type==="predominance")for(let a of t.uniqueValueInfos??[])yield L(e,a.value.toString(),[T(a.symbol,null)]);else{let a=(t.uniqueValueInfos??[]).map(u=>T(u.symbol,null)),{field:o,field2:l,field3:r,valueExpression:i}=t;(o||i)&&(yield L(e,o||i,a)),l&&(yield L(e,l,a)),r&&(yield L(e,r,a))}else if(t.type==="class-breaks"){let a=t.classBreakInfos.map(r=>T(r.symbol,null)),{field:o,valueExpression:l}=t;yield L(e,o??l,a)}else t.type==="simple"&&(yield L(e,"default",[T(t.symbol,null)]));return"defaultSymbol"in t&&t.defaultSymbol&&(yield L(e,"default",[T(t.defaultSymbol,null)])),e.forEach((a,o)=>{let l=N(a.filter(Boolean),(r,i)=>JSON.stringify(r)===JSON.stringify(i));e.set(o,l)}),e})}export{we as a,Ze as b,Qe as c,Dt as d,_e as e,ca as f,$e as g,Ae as h,Oe as i,kt as j,St as k,xt as l,We as m,Tt as n,$t as o};
