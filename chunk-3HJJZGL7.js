import{a as be,b as Te,c as we,d as Ce,e as ke,f as Me,g as De,h as Ee,i as Se,j as Le,k as Fe,l as Re,m as Ae,n as Ve,o as Ie}from"./chunk-KEUU4ZK6.js";import{a as ge,b as _e}from"./chunk-LWKMZQFJ.js";import{d as K}from"./chunk-77GHZE77.js";import{a as Pt,i as Pe,m as Oe,n as Ue,o as He}from"./chunk-VORAPKV5.js";import{a as $e}from"./chunk-4OC4J3KU.js";import{k as P}from"./chunk-7SVLZCA4.js";import{a as ze}from"./chunk-JC4ZKBNS.js";import{a as X,b as I,d as ye,e as z}from"./chunk-GAF32LQP.js";import{a as zt,d as xe}from"./chunk-DJEFBPF6.js";import{a as W}from"./chunk-4QS7PGAF.js";import{e as V,f as w,g as $}from"./chunk-AUSMAEKP.js";import{g as n,h as u}from"./chunk-WVCJLLRA.js";import{c as ee}from"./chunk-MDSLION2.js";import{e as Qt,f as te}from"./chunk-OVOWBDBP.js";import{a as A,h as Z}from"./chunk-4XUOIGFO.js";import{c as ve,n as Y}from"./chunk-OZF6BMOL.js";import{a as D}from"./chunk-GJP6PTKT.js";import{b as R,c as S}from"./chunk-HMKFQDR7.js";import{a as Jt}from"./chunk-GBTN5LIS.js";import{l as he}from"./chunk-SA4OMQAD.js";import{b as It}from"./chunk-24BLFS5R.js";import{K as pe,S as me,T as ue,U as de,a as oe,b as ie,d as ne,e as Rt,g as re,ha as Vt,ia as fe,l as At,p as se,q as ae,s as le,t as ce}from"./chunk-JDDD6VJ4.js";import{L as c,O as jt,u as qt,v as B}from"./chunk-AUTL5LCV.js";import{S as l}from"./chunk-KUJG22IX.js";import{a as r}from"./chunk-W3WDPWBE.js";import{h as Wt,k as Xt,o as Ft,x as Kt}from"./chunk-GISCFF3Z.js";import{b as Lt}from"./chunk-MLSR6YE6.js";import{t as N}from"./chunk-HQMV3KQV.js";import{a as St,h as T}from"./chunk-EAH6BNBL.js";function $t(t){return se(t)?ae(t)||ce(t)||le(t)||pe(t)?ge:t:_e(t)}var C;function Ge(t){return bo(t,C.Horizontal)}function bo(t,e){let{hasZ:o,spatialReference:i}=t,s=$t(i),m=0,d=Vt(s);if(d==null)return null;let M=e===C.Direct?wo:J;for(let H of t.paths){if(H.length<2)continue;let yo=H.length-1;for(let G=0;G<yo;++G){let Dt=H[G];_[0]=Dt[0],_[1]=Dt[1],_[2]=o?Dt[2]:0;let Et=H[G+1];x[0]=Et[0],x[1]=Et[1],x[2]=o?Et[2]:0;let Yt=M(_,x,i);if(Yt==null)return null;m+=Yt.value}}return I(m,d)}function Ne(t,e){let{spatialReference:o}=t;return At(o,e.spatialReference)?(_[0]=t.x,_[1]=t.y,_[2]=t.hasZ?t.z:0,x[0]=e.x,x[1]=e.y,x[2]=e.hasZ?e.z:0,J(_,x,o)):null}function li(t,e){let{spatialReference:o}=t;return At(o,e.spatialReference)?(_[0]=t.x,_[1]=t.y,_[2]=t.hasZ?t.z:0,x[0]=e.x,x[1]=e.y,x[2]=e.hasZ?e.z:0,Co(_,x,o)):null}function ci(t){return t!=null?To(t.hasZ?t.z:0,t.spatialReference):null}function To(t,e){let o=fe(e);return o!=null?I(t??0,o):null}function wo(t,e,o){let i=Ut(t,e,o,C.Direct);return i!=null?I(i.direct,i.unit):null}function J(t,e,o){let i=Ut(t,e,o,C.Horizontal);return i!=null?I(i.horizontal,i.unit):null}function Co(t,e,o){let i=Ut(t,e,o,C.Vertical);return i!=null?I(i.verticalSigned,i.unit):null}function Ut(t,e,o,i){let s=$t(o),m=Vt(s);if(m==null)return null;let d=e[2]-t[2];if(i===C.Vertical)return{verticalSigned:d,unit:m};if(!W(t,o,Ot,s)||!W(e,o,q,s))return null;if(i===C.Direct)return{direct:Y(q,Ot),unit:m};if(ve(j,t[0],t[1],e[2]),!W(j,o,j,s))return null;let M=Y(j,q);return i===C.Horizontal?{horizontal:M,unit:m}:{direct:Y(q,Ot),horizontal:M,vertical:Math.abs(d),unit:m}}(function(t){t[t.Direct=0]="Direct",t[t.Horizontal=1]="Horizontal",t[t.Vertical=2]="Vertical"})(C||(C={}));var _=D(),x=D(),Ot=D(),q=D(),j=D();function fi(t){return Oe(t)??Ge(t)}function hi(t,e){return Ue(t,e)??Ne(t,e)}function vi(t,e,o){return O[0]=t[0],O[1]=t[1],O[2]=t.length===3?t[2]:0,U[0]=e[0],U[1]=e[1],U[2]=e.length===3?e[2]:0,He(O,U,o)??J(O,U,o)}var O=D(),U=D();var f="esri-tooltip",Be=`${f}-content`,Ze=`${f}-content--input`,Ye=`${f}-content__header`,We=`${f}-content__header__spacer`,Ht=`${f}-content__header__actions`,Q=`${f}-draw-header-actions`,Xe=`${f}-table`,Ke=`${f}-help-message`,qe=`${f}-help-message__text`,je=`${f}-help-message__icon`;var tt=`${f}-field`,et={base:tt,inputMode:`${tt}--input`,title:`${tt}__title`,value:`${tt}__value`},p=class extends w{constructor(){super(...arguments),this.hidden=!1,this.mode="feedback"}render(){return n("div",{class:this.classes({[et.base]:!0,[et.inputMode]:this.mode==="input"})},n("div",{class:et.title},this.title),n("div",{class:et.value},this.value))}};r([c()],p.prototype,"hidden",void 0),r([c()],p.prototype,"mode",void 0),r([c()],p.prototype,"title",void 0),r([c()],p.prototype,"value",void 0),p=r([l("esri.views.interactive.tooltip.components.TooltipField")],p);var ko={base:`${f}-value-by-value`},y=class extends w{constructor(){super(...arguments),this.divider="\xD7"}render(){return n("div",{class:ko.base},n("span",null,this.left),n("span",null,this.divider),n("span",null,this.right))}};r([c()],y.prototype,"left",void 0),r([c()],y.prototype,"divider",void 0),r([c()],y.prototype,"right",void 0),y=r([l("esri.views.interactive.tooltip.components.ValueByValue")],y);function Gt(t,e,o,i=2,s="abbr"){return Te(t,z(e,o).value,o,i,s)}function Je(t,e,o,i=2,s="abbr"){return we(t,z(e,o).value,o,i,s)}function Mo(t,e,o=2,i="abbr"){return Ce(t,e.value,e.unit,o,i)}function Do(t,e,o=2,i="abbr"){return ke(t,e.value,e.unit,o,i)}function Eo(t,e,o=2,i="abbr"){return Me(t,e.value,e.unit,o,i)}function So(t,e,o=2,i="abbr"){return De(t,e.value,e.unit,o,i)}function Lo(t,e,o=2,i="abbr"){return Re(t,e.value,e.unit,o,i)}function Fo(t,e,o=2,i="abbr"){return Ee(t,e.value,e.unit,o,i)}function Ro(t,e,o=2,i="abbr"){return Se(t,e.value,e.unit,o,i)}function Ao(t,e,o=2,i="abbr"){return Le(t,e.value,e.unit,o,i)}function Vo(t,e,o=2,i="abbr"){return Fe(t,e.value,e.unit,o,i)}function Io(t,e,o=2,i="abbr"){return Ae(t,e.value,e.unit,o,i)}function L(t,e,o,i=xe,s=!0){return Ve(t.value,t.unit,t.rotationType,e,o,i,s)}function Qe(t,e,o){return Ie(t.value,t.unit,t.rotationType,e,o)}function Nt(t,e,o,i,s="abbr"){switch(i=i??2,o){case"imperial":return Fo(t,e,i,s);case"metric":return Mo(t,e,i,s);default:return Gt(t,e,o,i,s)}}function to(t,e,o,i=2,s="abbr"){switch(o){case"imperial":return Ro(t,e,i,s);case"metric":return Do(t,e,i,s);default:return Je(t,e,o,i,s)}}function eo(t,e,o,i=2,s="abbr"){switch(o){case"imperial":return Ao(t,e,i,s);case"metric":return Eo(t,e,i,s);default:return Gt(t,e,o,i,s)}}function oo(t,e,o,i=2,s="abbr"){switch(o){case"imperial":return Vo(t,e,i,s);case"metric":return So(t,e,i,s);default:return Je(t,e,o,i,s)}}function io(t,e,o,i=2,s="abbr"){switch(o){case"imperial":return Io(t,e,i,s);case"metric":return Lo(t,e,i,s);default:return Gt(t,e,o,i,s)}}function ot(){return oe()}function nn(){return ie()}function it(t,e){let o=[];t=(t=(t=t.replaceAll(/[\u00B0\u00BA]/g,"^")).replaceAll("\u2032","'")).replaceAll("\u2033",'"');let i=zo(e);return re.dmsToGeog(i,1,[t],o)?new he(o[0][0],o[0][1],e||It.WGS84):null}function no(t){return t&&ot()?S(t)??it(`0\xB0 0' 0" N | ${t}`)?.longitude??null:null}function ro(t){return t&&ot()?S(t)??it(`${t} | 00\xB0 00' 00" E`)?.latitude??null:null}function zo(t){let e=null;if(t||(t=It.WGS84),t.wkid){if(e=Rt.geogcs(t.wkid),!e)throw new N("coordinate-formatter:invalid-spatial-reference","wkid is not valid")}else{if(!t.wkt2&&!t.wkt)throw new N("coordinate-formatter:invalid-spatial-reference","wkid and wkt are missing");if(e=Rt.fromString(ne.PE_TYPE_GEOGCS,t.wkt2||t.wkt),!e)throw new N("coordinate-formatter:invalid-spatial-reference","wkt is not valid")}return e}var rt=1,ao=6;function lo(t,e){return{angleRelative:Po,direction:$o,directionRelative:Oo,directionRelativeBilateral:Uo,latitudeDecimalDegrees:Go,longitudeDecimalDegrees:Ho,area:(o,i)=>io(t,o,i??e.area),length:(o,i,s)=>Nt(t,o,i??e.length,s),lengthRelative:(o,i)=>to(t,o,i??e.length),totalLength:(o,i)=>Nt(t,o,i??e.length),verticalLength:(o,i)=>eo(t,o,i??e.length),verticalLengthRelative:(o,i)=>oo(t,o,i??e.verticalLength),percentage:No,scalar:mo,scale:Bo}}function Po(t){return R(t,St({signDisplay:"exceptZero"},Bt(rt)))}function $o(t){return L(t,t.rotationType,rt)}function Oo(t){let e=Pe(t);return R(e,St({style:"unit",unitDisplay:"narrow",unit:"degree",signDisplay:e>0?"never":"exceptZero"},Bt(rt)))}function Uo(t){return L(t,t.rotationType,rt)}function Ho(t){return co(t,fo)}function Go(t){return co(t,ho)}function un(t){return po(t,fo)}function dn(t){return po(t,ho)}function co(t,e){return L(z(t,"degrees"),"geographic",ao,e,!1)}function po(t,e){let i=e.normalize(z(t,"degrees").value,void 0,!1);return mo(X(i),ao)}function No(t){return R(t.value,{style:"percent"})}function Bo(t){return R(t,{style:"percent",maximumFractionDigits:0})}function mo(t,e){return R(t.value,Bt(e))}function Bt(t){return{minimumFractionDigits:t,maximumFractionDigits:t}}function fn(t){return(e,o)=>{let i=S(e);return i!=null?t(i,o):null}}var Zo=t=>{let e=`[-+]?[0-9${t.thousands}]+`;return t.decimal!==""&&(e+=`${t.decimal}[0-9]+`),new RegExp(`^(${e}\\s*)${t.separator}(\\s*${e})$`,"i")},Yo="\u202F",uo=[];for(let t of[",","\\|","\\s+"])for(let e of["\\.",",",""])for(let o of["",",","\\.",Yo,"\\s+"])t!==e&&t!==o&&e!==o&&uo.push({separator:t,decimal:e,thousands:o,pattern:Zo({decimal:e,thousands:o,separator:t})});function hn(t){for(let{decimal:e,thousands:o,pattern:i}of uo){i.lastIndex=0;let s=t.match(i);if(!s)continue;let m=S(so(s[1],e,o)),d=S(so(s[2],e,o));if(m!=null&&d!=null)return{x:X(m),y:X(d)}}return null}function so(t,e,o){let i=t.replaceAll(/[\s+]/g,"");return o!==""&&(i=i.replaceAll(o,"")),e!==""&&(i=i.replaceAll(e,".")),i}function vn(t){if(!t||S(t)!=null||!ot())return null;let e=it(t),o=nt(e?.latitude),i=nt(e?.longitude);return i!=null&&o!=null?{latitude:o,longitude:i}:null}function gn(t){return nt(no(t))}function _n(t){return nt(ro(t))}function nt(t){return t!=null?ye(t,"degrees","geographic"):null}var fo=new zt(-180,180),ho=new zt(-90,90);var a=class extends w{constructor(){super(...arguments),this._focusAbortController=new AbortController,this._transition=null,this._mode="feedback",this._getFormatters=$e(lo),this._onDiscard=()=>{this.info.clearInputValues(),this.exitInputMode()},this._onCommit=(t,e)=>{if(e==="commit-and-exit")return void this.exitInputMode();if(e==="commit-on-blur")return;let o=this._getFocusableElements(),i=o.length,s=o.indexOf(t);if(s===-1)return void this.exitInputMode();let m=((s+(e==="commit-and-next"?1:-1))%i+i)%i;st(o.at(m))},this._handleTab=t=>{if(t.code!==P.next)return;let e=this._getFocusableElements(),o=e.at(0),i=e.at(-1);o&&i&&(t.shiftKey?document.activeElement===o&&(t.preventDefault(),st(i)):document.activeElement===i&&(t.preventDefault(),st(o)))}}get mode(){return this._mode}get _displayUnits(){let t=Pt(this.tooltip.view);return{length:t,verticalLength:t,area:t,angle:"degrees"}}get _inputUnitInfos(){let t=this._messagesUnits,e=M=>({unit:M,abbreviation:be(t,M,"abbr")}),o=Pt(this.tooltip.view),i=e(me(o)),s=e(ue(o)),m=e(de(o)),d=e("degrees");return{length:i,lengthRelative:i,verticalLength:s,verticalLengthRelative:s,area:m,direction:d,orientation:d,rotation:d,longitudeLatitude:d}}get _formatters(){return this._getFormatters(this._messagesUnits,this._displayUnits)}get fieldContext(){return{formatters:this._formatters,inputUnitInfos:this._inputUnitInfos,messages:this._messagesTooltip,sketchOptions:this.info.sketchOptions,onCommit:this._onCommit,onDiscard:this._onDiscard}}render(){let{visibleElements:t}=this.info.sketchOptions.tooltips,e=this._renderedContent,o=this._renderedActions,i=this._renderedHelpMessage,s=e.length>0,m=s||!!i,d=this.mode==="input";return n("div",{class:Qt(Be,d&&Ze),onkeydown:this._handleTab},d&&m&&t.header?n("div",{class:Ye,key:"header"},n("calcite-button",{appearance:"transparent","data-testid":"tooltip-back-button",iconFlipRtl:"both",iconStart:"chevron-left",key:"discard-button",kind:"neutral",onclick:this._onDiscard,scale:"s",tabIndex:-1}),o.length>0?n(u,null,n("div",{class:We,key:"spacer"}),n("div",{class:Ht,key:"actions"},o)):null):null,s?n("div",{class:Xe,key:"content"},...e):null,i)}_renderActions(){return null}loadDependencies(){return V({button:()=>import("./chunk-J63POI2Y.js"),icon:()=>import("./chunk-4HUBSTEF.js"),input:()=>import("./chunk-6R2Z5WOF.js")})}enterInputMode(t){return T(this,null,function*(){try{yield this._transitionTo("input"),yield this._focusField(t)}catch(e){Ft(e)}})}exitInputMode(){return T(this,arguments,function*({focusOnView:t=!0}={}){try{let{container:e,info:o}=this;o.clearInputValues();let i=t?e?.closest(".esri-view")?.querySelector(".esri-view-surface"):null;yield this._transitionTo("feedback"),i instanceof HTMLElement&&i.focus()}catch(e){Ft(e)}})}get _renderedContent(){return vo(this._renderContent())}get _renderedActions(){return vo(this._renderActions())}get _renderedHelpMessage(){let{sketchOptions:t,visibleElements:e}=this.info;if(!e.helpMessage)return null;let o=t.tooltips.helpMessage??this._defaultHelpMessage;if(!o)return null;let i=t.tooltips.helpMessageIcon??"information";return n("div",{class:Ke,key:"help-message"},i?n("calcite-icon",{class:je,icon:i,scale:"s"}):null,n("div",{class:qe},o))}get _defaultHelpMessage(){let{helpMessage:t,viewType:e}=this.info;if(t==null)return null;let o=e==="3d"?"helpMessages3d":"helpMessages2d";return this._messagesTooltip?.sketch?.[o]?.[t]}_focusField(t){return T(this,null,function*(){this._focusAbortController?.abort(),this._focusAbortController=new AbortController;let{signal:e}=this._focusAbortController;yield this._waitForInputs(),Xt(e);let o=this._getFocusableInputs(),i=t?o.find(s=>s.getAttribute("data-field-name")===t):o.at(0);yield st(i)})}_transitionTo(t){return T(this,null,function*(){if(this._mode===t)return;let e=()=>{this._mode=t};if(!this.domNode?.firstChild||!document.startViewTransition||ze())return void e();this.autoRenderingEnabled=!1,this._transition?.skipTransition();let o=this._transition=document.startViewTransition(()=>{if(!this.destroyed)return this.autoRenderingEnabled=!0,e(),this.renderNow(),qt()});try{yield this._transition.finished}finally{o===this._transition&&(this._transition=null)}})}_waitForInputs(){return T(this,null,function*(){let t=()=>Array.from(this.domNode?.querySelectorAll("calcite-input")??[]);for(;t().length===0;)yield Kt(Wo);yield B()})}_getFocusableInputs(){return Array.from(this.domNode?.querySelectorAll("calcite-input:not([read-only]):not([disabled])")??[])}_getFocusableElements(){let t=this.domNode?.querySelector(`.${Q}`);return[...Array.from(t?.querySelectorAll(`.${Ht} calcite-button:not([disabled])`)??[]),...this._getFocusableInputs()]}};function st(t){return T(this,null,function*(){yield t?.setFocus()})}function vo(t){return(Array.isArray(t)?t:[t]).flat(10).filter(e=>!!e)}r([$("esri/core/t9n/Units"),c()],a.prototype,"_messagesUnits",void 0),r([$("esri/views/interactive/tooltip/t9n/Tooltip"),c()],a.prototype,"_messagesTooltip",void 0),r([c()],a.prototype,"info",void 0),r([c()],a.prototype,"tooltip",void 0),r([c()],a.prototype,"_mode",void 0),r([c()],a.prototype,"mode",null),r([c()],a.prototype,"_displayUnits",null),r([c()],a.prototype,"_inputUnitInfos",null),r([c()],a.prototype,"_formatters",null),r([c()],a.prototype,"fieldContext",null),r([c()],a.prototype,"_renderedContent",null),r([c()],a.prototype,"_renderedActions",null),r([c()],a.prototype,"_renderedHelpMessage",null),r([c()],a.prototype,"_defaultHelpMessage",null),a=r([l("esri.views.interactive.tooltip.content.TooltipContent")],a);var Wo=20;var at=class extends a{_renderContent(){let{area:t,radius:e,xSize:o,ySize:i,visibleElements:s}=this.info,m=this._messagesTooltip.sketch,d=this._formatters;return n(u,null,s.radius&&e!=null?n(p,{title:m.radius,value:d.length(e)}):null,s.size&&o!=null&&i!=null?n(p,{title:m.size,value:n(y,{left:d.length(o),right:d.length(i)})}):null,s.area?n(p,{title:m.area,value:d.area(t)}):null)}};at=r([l("esri.views.interactive.tooltip.content.TooltipContentDrawCircle")],at);var g=`${f}-editable-field`,v={base:g,inputMode:`${g}--input`,feedbackMode:`${g}--feedback`,readOnly:`${g}--read-only`,locked:`${g}--locked`,title:`${g}__title`,value:`${g}__value`,valueContent:`${g}__value__content`,valueContentReadOnly:`${g}__value__content--read-only`,lockIcon:`${g}__lock-icon`,input:`${g}__input`,inputSuffix:`${g}__input-suffix`,button:`${g}__button`},Zt={lock:"lock",unlock:"unlock"},b=class extends w{constructor(){super(...arguments),this._input=null,this._onKeyDown=t=>{t.key===P.discard&&this.mode==="input"&&this._input&&this.context.onDiscard(this._input)},this._onInputKeyDown=t=>{let e=this._input;if(e)switch(t.key){case P.commit:return this.field.onCommit("commit-and-exit",e,this.context);case P.next:{t.preventDefault(),t.stopPropagation();let o=t.shiftKey?"commit-and-previous":"commit-and-next";return this.field.onCommit(o,e,this.context)}}},this._onInput=t=>{this.field.onInput(t.target.value)},this._onInputBlur=()=>{let t=this._input;t&&this.field.onCommit("commit-on-blur",t,this.context)},this._selectText=()=>{let t=()=>{this._input===document.activeElement&&this._input?.selectText()};t(),B().then(t)}}initialize(){this.addHandles(A(()=>this._rawDisplayValue,()=>{let{committed:t,inputValue:e}=this.field;t||e||this._input!==document.activeElement||this._selectText()}))}loadDependencies(){return V({button:()=>import("./chunk-J63POI2Y.js"),icon:()=>import("./chunk-4HUBSTEF.js"),input:()=>import("./chunk-6R2Z5WOF.js")})}render(){let{field:t,mode:e}=this,o=e==="input",{locked:i,readOnly:s}=t;return n("div",{class:this.classes({[v.base]:!0,[v.feedbackMode]:e==="feedback",[v.inputMode]:e==="input",[v.locked]:i,[v.readOnly]:s})},n("div",{class:v.title,key:"title"},this._title),n("div",{class:v.value,key:"value",onkeydown:this._onKeyDown},o?this._renderValueInputMode():this._renderValueFeedbackMode()))}get _formattedValue(){return this.field.getFormattedValue(this.context)||go}get _rawDisplayValue(){return this.field.getRawDisplayValue(this.context)}get _suffix(){return this.field.getSuffix(this.context)}get _title(){let{title:t}=this.field;return typeof t=="string"?t:t(this.context)}_renderValueFeedbackMode(){return n(u,null,n("div",{class:v.valueContent,key:"value-feedback"},this._formattedValue),this.field.locked&&this.mode!=="input"?n("calcite-icon",{class:v.lockIcon,icon:Zt.lock,key:"icon",scale:"s"}):null)}_renderValueInputMode(){return this.field.readOnly?this._renderValueReadOnly():this._renderValueWritable()}_renderValueReadOnly(){return n("div",{class:this.classes(v.valueContent,v.valueContentReadOnly),key:"value-read-only"},this._formattedValue)}_renderValueWritable(){let{field:t}=this,{name:e,invalid:o,locked:i}=t,s=this.context?.messages.sketch??{},m=i?s.unlockConstraint:s.lockConstraint;return n(u,null,n("calcite-input",{afterCreate:d=>{this._input=d},class:v.input,"data-field-name":e,"data-testid":`tooltip-field-${e}`,onblur:this._onInputBlur,onfocus:this._selectText,onkeydown:this._onInputKeyDown,scale:"s",status:o?"invalid":"idle",type:"text",value:this._rawDisplayValue??go,onCalciteInputInput:this._onInput}),n("div",{class:v.inputSuffix,key:"suffix"},this._suffix),t.lockable?n("calcite-button",{alignment:"center",appearance:"transparent",class:v.button,"data-testid":`tooltip-field-${e}-lock`,iconStart:i?Zt.lock:Zt.unlock,key:"lock",kind:"neutral",label:m,onclick:()=>{t.toggleLock(this.context)},scale:"s",tabIndex:-1,title:m}):n("div",{key:"lock-empty"}))}};r([c()],b.prototype,"field",void 0),r([c()],b.prototype,"context",void 0),r([c()],b.prototype,"mode",void 0),r([c()],b.prototype,"_input",void 0),r([c()],b.prototype,"_formattedValue",null),r([c()],b.prototype,"_rawDisplayValue",null),r([c()],b.prototype,"_suffix",null),r([c()],b.prototype,"_title",null),b=r([l("esri.views.interactive.tooltip.components.TooltipEditableField")],b);var go="\u2014";function h(t){let e=t.fields.filter(o=>o?.visible===!0);return e.length===0?null:n(u,null,e.map(o=>n(b,{context:t.context,field:o,key:o.id,mode:t.mode})))}var lt=class extends a{_renderContent(){let{fieldContext:t,info:e,mode:o}=this,{visibleElements:i}=e;return n(h,{context:t,fields:[i.coordinates?e.effectiveX:void 0,i.coordinates?e.effectiveY:void 0,i.elevation?e.elevation:void 0,i.orientation?e.orientation:void 0,i.scale?e.scale:void 0],mode:o})}};lt=r([l("esri.views.interactive.tooltip.content.TooltipContentDrawMesh")],lt);var ct=class extends a{_renderContent(){let{fieldContext:t,info:e,mode:o}=this,{elevation:i,visibleElements:s}=e;return n(h,{context:t,fields:[s.coordinates?e.effectiveX:void 0,s.coordinates?e.effectiveY:void 0,s.elevation?i:void 0],mode:o})}};ct=r([l("esri.views.interactive.tooltip.content.TooltipContentDrawPoint")],ct);var E=class extends w{constructor(t){super(t),this.visibleElements={}}render(){return n("div",{class:Q},this._isElementVisible("direction")?n(Xo,{messages:this.messages,sketchOptions:this.sketchOptions}):null)}loadDependencies(){return V({button:()=>import("./chunk-J63POI2Y.js"),dropdown:()=>import("./chunk-L3QQFSYW.js"),"dropdown-item":()=>import("./chunk-CEVC2EA7.js"),"dropdown-group":()=>import("./chunk-HOR5N7VU.js")})}_isElementVisible(t){return this.visibleElements?.[t]??this.sketchOptions.tooltips.visibleElements[t]}};function Xo(t){let{directionMode:e}=t.sketchOptions.values,o=t.messages?.sketch,i=o?.directionModeSelect?.title,s="absolute",m="relative";return n("calcite-dropdown",{key:"direction-mode",placement:"bottom-end",scale:"s",widthScale:"s",onCalciteDropdownSelect:d=>{let M=d.target.selectedItems?.[0]?.getAttribute("data-mode");t.sketchOptions.values.directionMode=M??"absolute"}},n("calcite-button",{alignment:"end",appearance:"transparent",iconStart:K[e],kind:"neutral",label:i,scale:"s",slot:"trigger",title:i}),n("calcite-dropdown-group",{selectionMode:"single"},n("calcite-dropdown-item",{"data-mode":m,"data-testid":"tooltip-direction-mode-relative",iconStart:K.relative,key:"relative",selected:e===m},o?.directionModeSelect?.relative),n("calcite-dropdown-item",{"data-mode":s,"data-testid":"tooltip-direction-mode-absolute",iconStart:K.absolute,key:"absolute",selected:e===s},o?.directionModeSelect?.absolute)))}r([$("esri/views/interactive/tooltip/t9n/Tooltip"),c()],E.prototype,"messages",void 0),r([c()],E.prototype,"sketchOptions",void 0),r([c()],E.prototype,"visibleElements",void 0),E=r([l("esri.views.interactive.tooltip.components.DrawHeaderActions")],E);var pt=class extends a{_renderContent(){let{fieldContext:t,info:e,mode:o}=this,{xyMode:i,visibleElements:s}=e;return n(h,{context:t,fields:[...i==="direction-distance"?[s.direction?e.direction:void 0,s.distance?e.distance:void 0]:[s.coordinates?e.effectiveX:void 0,s.coordinates?e.effectiveY:void 0],s.elevation?e.elevation:void 0,s.area?e.area:void 0],mode:o})}_renderActions(){let{xyMode:t,sketchOptions:e}=this.info;return n(E,{sketchOptions:e,visibleElements:{direction:t==="direction-distance"}})}};pt=r([l("esri.views.interactive.tooltip.content.TooltipContentDrawPolygon")],pt);var mt=class extends a{_renderContent(){let{fieldContext:t,info:e,mode:o}=this,{xyMode:i,visibleElements:s}=e;return n(h,{context:t,fields:[...i==="direction-distance"?[s.direction?e.direction:void 0,s.distance?e.distance:void 0]:[s.coordinates?e.effectiveX:void 0,s.coordinates?e.effectiveY:void 0],s.elevation?e.elevation:void 0,s.totalLength?e.totalLength:void 0],mode:o})}_renderActions(){let{xyMode:t,sketchOptions:e}=this.info;return n(E,{sketchOptions:e,visibleElements:{direction:t==="direction-distance"}})}};mt=r([l("esri.views.interactive.tooltip.content.TooltipContentDrawPolyline")],mt);var ut=class extends a{_renderContent(){let{area:t,xSize:e,ySize:o,visibleElements:i}=this.info,s=this._messagesTooltip.sketch,m=this._formatters;return n(u,null,i.size&&e!=null&&o!=null?n(p,{title:s.size,value:n(y,{left:m.length(e),right:m.length(o)})}):null,i.area?n(p,{title:s.area,value:m.area(t)}):null)}};ut=r([l("esri.views.interactive.tooltip.content.TooltipContentDrawRectangle")],ut);var dt=class extends a{_renderContent(){let{angle:t,visibleElements:e}=this.info,o=this._messagesTooltip.sketch;return n(u,null,e.rotation?n(p,{title:o.rotation,value:this._formatters.angleRelative(t)}):null)}};dt=r([l("esri.views.interactive.tooltip.content.TooltipContentExtentRotate")],dt);var ft=class extends a{_renderContent(){let t=this.info,{visibleElements:e}=t,o=this._messagesTooltip.sketch,i=this._formatters;return n(u,null,e.size?n(p,{title:o.size,value:n(y,{left:i.length(t.xSize),right:i.length(t.ySize)})}):null,e.scale?n(p,{title:o.scale,value:n(y,{left:i.scale(t.xScale),right:i.scale(t.yScale)})}):null)}};ft=r([l("esri.views.interactive.tooltip.content.TooltipContentExtentScale")],ft);var ht=class extends a{_renderContent(){let{fieldContext:t,info:e,mode:o}=this,{visibleElements:i}=e;return n(h,{context:t,fields:[i.coordinates?e.effectiveX:void 0,i.coordinates?e.effectiveY:void 0,i.elevation?e.elevation:void 0],mode:o})}};ht=r([l("esri.views.interactive.tooltip.content.TooltipContentMovePoint")],ht);var vt=class extends a{_renderContent(){let{area:t,distance:e,totalLength:o,visibleElements:i}=this.info,s=this._messagesTooltip.sketch,m=this._formatters;return n(u,null,i.distance?n(p,{title:s.distance,value:m.lengthRelative(e)}):null,i.area&&t!=null?n(p,{title:s.area,value:m.area(t)}):null,i.totalLength&&o!=null?n(p,{title:s.totalLength,value:m.length(o)}):null)}};vt=r([l("esri.views.interactive.tooltip.content.TooltipContentReshapeEdgeOffset")],vt);var gt=class extends a{_renderContent(){let{fieldContext:t,info:e,mode:o}=this,{visibleElements:i}=e;return n(h,{context:t,fields:[i.coordinates?e.effectiveX:void 0,i.coordinates?e.effectiveY:void 0,i.elevation?e.elevation:void 0,i.area&&e.geometryType==="polygon"?e.area:null,i.totalLength&&e.geometryType==="polyline"?e.totalLength:null],mode:o})}};gt=r([l("esri.views.interactive.tooltip.content.TooltipContentSelectedVertex")],gt);var _t=class extends a{_renderContent(){let{info:t}=this,{visibleElements:e}=t,o=this._messagesTooltip.sketch,i=this._formatters;return n(u,null,e.orientation&&t.orientation!=null?n(p,{key:"orientation",title:o.orientation,value:L(t.orientation,t.rotationType,t.orientationPrecision)}):null,e.size&&t.size!=null?n(p,{key:"size",title:o.size,value:i.length(t.size,t.sizeUnit,t.sizePrecision)}):null)}};_t=r([l("esri.views.interactive.tooltip.content.TooltipContentTransformAbsolute")],_t);var xt=class extends a{_renderContent(){let{fieldContext:t,info:e,mode:o}=this,{visibleElements:i}=e;return n(h,{context:t,fields:[i.coordinates?e.effectiveX:void 0,i.coordinates?e.effectiveY:void 0,i.elevation?e.elevation:void 0,i.orientation?e.orientation:void 0,i.scale?e.scale:void 0],mode:o})}};xt=r([l("esri.views.interactive.tooltip.content.TooltipContentTransformMesh")],xt);var yt=class extends a{_renderContent(){let{fieldContext:t,info:e,mode:o}=this,{visibleElements:i}=e;return n(h,{context:t,fields:[i.coordinates?e.effectiveX:void 0,i.coordinates?e.effectiveY:void 0,i.elevation?e.elevation:void 0],mode:o})}};yt=r([l("esri.views.interactive.tooltip.content.TooltipContentTransformPoint")],yt);var bt=class extends a{_renderContent(){let{info:t}=this,{visibleElements:e}=t,o=this._messagesTooltip.sketch;return n(u,null,e.rotation&&t.rotation!=null?n(p,{key:"rotation",title:o.rotation,value:Qe(t.rotation,t.rotationType,t.rotationPrecision)}):null,e.orientation&&t.orientation!=null?n(p,{key:"orientation",title:o.orientation,value:L(t.orientation,t.rotationType,t.orientationPrecision)}):null)}};bt=r([l("esri.views.interactive.tooltip.content.TooltipContentTransformRotate")],bt);var Tt=class extends a{_renderContent(){let{info:t}=this,{visibleElements:e}=t,o=this._messagesTooltip.sketch,i=this._formatters;return n(u,null,e.scale&&t.scale!=null?n(p,{key:"scale",title:o.scale,value:i.percentage(t.scale)}):null,e.size&&t.size!=null?n(p,{key:"size",title:o.size,value:i.length(t.size,t.sizeUnit,t.sizePrecision)}):null)}};Tt=r([l("esri.views.interactive.tooltip.content.TooltipContentTransformScale")],Tt);var wt=class extends a{_renderContent(){let{info:t}=this,{visibleElements:e}=t,o=this._messagesTooltip.sketch,i=this._formatters;return n(u,null,e.distance?n(p,{title:o.distance,value:i.length(t.distance)}):null)}};wt=r([l("esri.views.interactive.tooltip.content.TooltipContentTranslate")],wt);var Ct=class extends a{_renderContent(){let{distance:t,elevation:e,area:o,totalLength:i,visibleElements:s}=this.info,m=this._messagesTooltip.sketch,d=this._formatters;return n(u,null,s.distance?n(p,{title:m.distance,value:d.length(t)}):null,s.elevation&&e?.actual!=null?n(p,{title:m.elevation,value:d.verticalLength(e.actual)}):null,s.area&&o!=null?n(p,{title:m.area,value:d.area(o)}):null,s.totalLength&&i!=null?n(p,{title:m.totalLength,value:d.length(i)}):null)}};Ct=r([l("esri.views.interactive.tooltip.content.TooltipContentTranslateVertex")],Ct);var kt=class extends a{_renderContent(){let{info:t}=this,{visibleElements:e}=t,o=this._messagesTooltip.sketch,i=this._formatters;return n(u,null,e.distance?n(p,{title:o.distance,value:i.length(t.distance)}):null)}};kt=r([l("esri.views.interactive.tooltip.content.TooltipContentTranslateXY")],kt);var Mt=class extends a{_renderContent(){let{info:t}=this,{visibleElements:e}=t,o=this._messagesTooltip.sketch;return n(u,null,e.distance?n(p,{title:o.distance,value:this._formatters.verticalLengthRelative(t.distance)}):null)}};Mt=r([l("esri.views.interactive.tooltip.content.TooltipContentTranslateZ")],Mt);function _o(t,e){if(e==null)return null;let o=document.createElement("div");switch(e.type){case"draw-point":return new ct({tooltip:t,info:e,container:o});case"draw-polygon":return new pt({tooltip:t,info:e,container:o});case"draw-polyline":return new mt({tooltip:t,info:e,container:o});case"draw-mesh":return new lt({tooltip:t,info:e,container:o});case"draw-rectangle":return new ut({tooltip:t,info:e,container:o});case"draw-circle":return new at({tooltip:t,info:e,container:o});case"extent-rotate":return new dt({tooltip:t,info:e,container:o});case"extent-scale":return new ft({tooltip:t,info:e,container:o});case"move-point":return new ht({tooltip:t,info:e,container:o});case"selected-vertex":return new gt({tooltip:t,info:e,container:o});case"transform-absolute":return new _t({tooltip:t,info:e,container:o});case"transform-point":return new yt({tooltip:t,info:e,container:o});case"transform-mesh":return new xt({tooltip:t,info:e,container:o});case"transform-rotate":return new bt({tooltip:t,info:e,container:o});case"transform-scale":return new Tt({tooltip:t,info:e,container:o});case"translate":return new wt({tooltip:t,info:e,container:o});case"translate-vertex":return new Ct({tooltip:t,info:e,container:o});case"translate-z":return new Mt({tooltip:t,info:e,container:o});case"translate-xy":return new kt({tooltip:t,info:e,container:o});case"reshape-edge-offset":return new vt({tooltip:t,info:e,container:o})}}var Ko={base:`${f}`},k=class extends Jt.EventedAccessor{constructor(t){super(t),this.info=null,this.position=null,this.content=null,this.contentContainer=(()=>{let e=document.createElement("div");return e.classList.add(Ko.base),ee(e),e})()}initialize(){let{contentContainer:t}=this;this.addHandles([A(()=>this.view.overlay?.surface,e=>{t.remove(),e?.appendChild(t)},Z),A(()=>this.info,(e,o)=>{if(this.content!=null&&e!=null&&o!=null&&e.type===o.type)this.content.info=e;else{this.content=Lt(this.content);let i=_o(this,e);i&&(this.content=i,i.container&&t.appendChild(i.container),this.exitInputMode())}},Z),A(()=>({container:this.contentContainer,content:this.content,screenPoint:this._screenPoint,positionMode:this.positionMode,position:this.position}),qo,Z),Wt(this.contentContainer,"paste",e=>{this.emit("paste",e)})])}destroy(){this.info=null,this.content=Lt(this.content),this.contentContainer.remove()}get positionMode(){return this.content?.mode==="input"?"fixed":"follow-cursor"}get mode(){return this.content?.mode??"feedback"}get _screenPoint(){let{inputManager:t}=this.view;return t?.multiTouchActive?null:t?.latestPointerLocation}get visible(){return this.contentContainer?.style.display!=="none"}clear(){this.info=null}enterInputMode(t){return T(this,null,function*(){yield this.content?.enterInputMode(t)})}exitInputMode(t){return T(this,null,function*(){yield this.content?.exitInputMode(t)})}};function qo(t){if(t.positionMode==="fixed"&&!t.position)return;let{style:e}=t.container,o=t.position??t.screenPoint;if(o!=null&&t.content!=null){e.display="block";let i=te(t.container),s=`translate(${Math.round(o.x)+xo[0]*(i?-1:1)}px, ${Math.round(o.y)+xo[1]}px)`;e.transform=i?`translate(-100%, 0) ${s}`:s}else e.display="none"}r([c({nonNullable:!0})],k.prototype,"view",void 0),r([c()],k.prototype,"info",void 0),r([c()],k.prototype,"positionMode",null),r([c()],k.prototype,"position",void 0),r([c()],k.prototype,"content",void 0),r([c()],k.prototype,"mode",null),r([c()],k.prototype,"contentContainer",void 0),r([c()],k.prototype,"_screenPoint",null),k=r([l("esri.views.interactive.tooltip.Tooltip")],k);var xo=[20,20];var F=class extends jt{constructor(t){super(t),this.helpMessage=void 0,this.viewType=void 0}get visibleElements(){return this.sketchOptions.tooltips.visibleElements}get allFields(){return[]}get editableFields(){return this.allFields.filter(t=>t.visible&&!t.readOnly)}clearInputValues(){this.allFields.forEach(t=>t.clearInputValue())}};r([c()],F.prototype,"sketchOptions",void 0),r([c()],F.prototype,"visibleElements",null),r([c()],F.prototype,"helpMessage",void 0),r([c()],F.prototype,"viewType",void 0),r([c()],F.prototype,"allFields",null),r([c()],F.prototype,"editableFields",null),F=r([l("esri.views.interactive.tooltip.infos.SketchTooltipInfo")],F);export{ot as a,nn as b,L as c,Nt as d,un as e,dn as f,fn as g,hn as h,vn as i,gn as j,_n as k,nt as l,F as m,$t as n,li as o,ci as p,To as q,Co as r,fi as s,hi as t,vi as u,k as v};
