import{d}from"./chunk-R4TNLPIN.js";import{J as u,M as o,g as i,s as v}from"./chunk-CTGIUUCS.js";var f={mapserver:"MapServer",imageserver:"ImageServer",featureserver:"FeatureServer",sceneserver:"SceneServer",streamserver:"StreamServer",vectortileserver:"VectorTileServer","3dtilesserver":"3DTilesServer"},m=Object.values(f),p=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/rest\\/services\\/(.+?)\\/(${m.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),h=new RegExp(`^((?:https?:)?\\/\\/\\S+?\\/([^\\/\\n]+)\\/(${m.join("|")}))(?:\\/(?:layers\\/)?(\\d+))?`,"i"),w=/(.*?)\/(?:layers\/)?(\d+)\/?$/i;function C(e){return!!p.test(e)}function S(e){if(e==null)return null;let r=i(e),s=r?.path.match(p)||r?.path.match(h);if(!s)return null;let[,t,l,n,a]=s,c=l.indexOf("/");return{title:y(c!==-1?l.slice(c+1):l),serverType:f[n.toLowerCase()],sublayer:a!=null&&a!==""?parseInt(a,10):null,url:{path:t}}}function g(e){let r=i(e).path.match(w);return r?{serviceUrl:r[1],sublayerId:Number(r[2])}:null}function y(e){return(e=e.replaceAll(/\s*[/_]+\s*/g," "))[0].toUpperCase()+e.slice(1)}function A(e,r){let s=[];if(e){let t=S(e);t!=null&&t.title&&s.push(t.title)}if(r){let t=y(r);s.push(t)}if(s.length===2){if(s[0].toLowerCase().includes(s[1].toLowerCase()))return s[0];if(s[1].toLowerCase().includes(s[0].toLowerCase()))return s[1]}return s.join(" - ")}function T(e){if(!e)return!1;let r=".arcgis.com/",s="//services",t="//tiles",l="//features",n=(e=e.toLowerCase()).includes(r),a=e.includes(s)||e.includes(t)||e.includes(l);return n&&a}function j(e,r){return e&&u(o(e,r))}function O(e){let{url:r}=e;if(!r)return{url:r};r=o(r,e.logger);let s=i(r),t=S(s.path),l;if(t!=null)t.sublayer!=null&&e.layer.layerId==null&&(l=t.sublayer),r=t.url.path;else if(e.nonStandardUrlAllowed){let n=g(s.path);n!=null&&(r=n.serviceUrl,l=n.sublayerId)}return{url:u(r),layerId:l}}function x(e,r,s,t,l){d(r,t,"url",l),t.url&&e.layerId!=null&&(t.url=v(t.url,s,e.layerId.toString()))}function N(e){if(!e)return!1;let r=e.toLowerCase(),s=r.includes("/services/"),t=r.includes("/mapserver/wmsserver"),l=r.includes("/imageserver/wmsserver"),n=r.includes("/wmsserver");return s&&(t||l||n)}export{C as a,S as b,g as c,y as d,A as e,T as f,j as g,O as h,x as i,N as j};
