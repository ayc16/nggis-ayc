import{K as u,P as h,U as o,e as g,o as v,p,q as f,r as U,t as l,v as x}from"./chunk-CTGIUUCS.js";function O(t,r){let s=r?.url?.path;if(t&&s&&(t=p(t,s,{preserveProtocolRelative:!0}),r.portalItem&&r.readResourcePaths)){let e=f(t,r.portalItem.itemUrl);e!=null&&D.test(e)&&r.readResourcePaths.push(r.portalItem.resourceFromPath(e).path)}return(t=d(t,r?.portal))&&m.test(t)?P(t):t}function R(t,r,s=n.YES){if((t=t&&m.test(t)?w(t):t)==null)return t;!l(t)&&r?.blockedRelativeUrls&&r.blockedRelativeUrls.push(t);let e=p(t);if(r){let a=r.verifyItemRelativeUrls?.rootPath||r.url?.path;if(a){let c=d(a,r.portal),i=d(e,r.portal);e=f(i,c,c),e!=null&&e!==i&&e!==t&&r.verifyItemRelativeUrls&&r.verifyItemRelativeUrls.writtenUrls.push(e)}}return e=I(e,r?.portal),l(e)&&(e=U(e)),r?.resources&&r?.portalItem&&!l(e)&&!x(e)&&s===n.YES&&r.resources.toKeep.push({resource:r.portalItem.resourceFromPath(e),compress:!1}),e}function S(t,r,s){return O(t,s)}function b(t,r,s,e){let a=R(t,e);a!==void 0&&(r[s]=a)}var m=/\/items\/([^\/]+)\/resources\/(.*)/,D=/^\.\/resources\//;function A(t){return(t?.match(m)??null)?.[1]??null}function K(t){let r=t?.match(m)??null;if(r==null)return null;let s=r[2],e=s.lastIndexOf("/");if(e===-1){let{path:i,extension:y}=h(s);return{prefix:null,filename:i,extension:y}}let{path:a,extension:c}=h(s.slice(e+1));return{prefix:s.slice(0,e),filename:a,extension:c}}function I(t,r){return r&&!r.isPortal&&r.urlKey&&r.customBaseUrl?u(t,`${r.urlKey}.${r.customBaseUrl}`,r.portalHostname):t}function d(t,r){if(!r||r.isPortal||!r.urlKey||!r.customBaseUrl)return t;let s=`${r.urlKey}.${r.customBaseUrl}`,e=g();return v(e,`${e.scheme}://${s}`)?u(t,r.portalHostname,s):u(t,s,r.portalHostname)}function P(t){if(!t)return t||null;let r=t;return r&&o&&!o.findCredential(r)&&(r=o._normalizeAGOLorgDomain(r),r=r.replace(/^https?:\/\/www\.arcgis\.com/,"https://cdn.arcgis.com"),r=r.replace(/^https?:\/\/devext\.arcgis\.com/,"https://cdndev.arcgis.com"),r=r.replace(/^https?:\/\/qaext\.arcgis\.com/,"https://cdnqa.arcgis.com")),r}function w(t){if(!t)return t||null;let r=t;return r=r.replace(/^https?:\/\/cdn\.arcgis\.com/,"https://www.arcgis.com"),r=r.replace(/^https?:\/\/cdndev\.arcgis\.com/,"https://devext.arcgis.com"),r=r.replace(/^https?:\/\/cdnqa\.arcgis\.com/,"https://qaext.arcgis.com"),r&&o&&!o.findCredential(r)&&(r=o._normalizeAGOLorgDomain(r)),r}var n;(function(t){t[t.YES=0]="YES",t[t.NO=1]="NO"})(n||(n={}));var $=Object.freeze(Object.defineProperty({__proto__:null,get MarkKeep(){return n},ensureMainOnlineDomain:I,fromCDNUrl:w,fromJSON:O,itemIdFromResourceUrl:A,prefixAndFilenameFromResourceUrl:K,read:S,toCDNUrl:P,toJSON:R,write:b},Symbol.toStringTag,{value:"Module"}));export{O as a,R as b,S as c,b as d,A as e,K as f,I as g,P as h,n as i,$ as j};
