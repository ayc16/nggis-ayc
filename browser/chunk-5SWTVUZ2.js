import{a as c}from"./chunk-IGM7PT7Z.js";import{o as h}from"./chunk-6MTY3OXX.js";import"./chunk-CGZE4C6W.js";import"./chunk-CLDJAOGN.js";import"./chunk-YIRBKWRK.js";import"./chunk-IFFYADB3.js";import"./chunk-BVW6ULEA.js";import"./chunk-7C6Z24SS.js";import{b as p}from"./chunk-C4XQ3IUU.js";import"./chunk-T2INZTCD.js";import"./chunk-H34WFTDW.js";import"./chunk-AWOMJTYJ.js";import"./chunk-U6WVZEYH.js";import"./chunk-V5AJXD2Y.js";import"./chunk-WXS2B4FF.js";import"./chunk-XFK3CDZ5.js";import"./chunk-4XBATNKX.js";import"./chunk-3IJY37BG.js";import"./chunk-J57HR4DB.js";import"./chunk-K5NHJTKR.js";import"./chunk-XKXYUJUA.js";import"./chunk-F7PIPM6E.js";import"./chunk-FR6Q4MSQ.js";import"./chunk-C6JT6KYF.js";import"./chunk-BCREO4Q5.js";import"./chunk-Z5Q76SB7.js";import"./chunk-E5R4OI7X.js";import"./chunk-6FWNINU2.js";import"./chunk-ES7AH7WX.js";import"./chunk-RSDQHAJX.js";import"./chunk-RJHITHLB.js";import"./chunk-UI76XBLJ.js";import"./chunk-UE2YGKE7.js";import"./chunk-BE76S5KT.js";import"./chunk-D2ITYHSM.js";import"./chunk-FIITBHDP.js";import"./chunk-VSVNPPHQ.js";import"./chunk-CTGIUUCS.js";import"./chunk-VWEBO6QK.js";import"./chunk-KAAR5ZJN.js";import"./chunk-W3WDPWBE.js";import"./chunk-WKT5W7KT.js";import"./chunk-MLSR6YE6.js";import"./chunk-JPDAKIWT.js";import"./chunk-VU5W7W6Y.js";import"./chunk-X3IDZTNG.js";import{a as m}from"./chunk-IQJU4QT3.js";import{h as l}from"./chunk-EAH6BNBL.js";var u=class{createIndex(t,r){return l(this,null,function*(){let o=new Array;if(!t.vertexAttributes?.position)return new c;let a=this._createMeshData(t),n=r!=null?yield r.invoke("createIndexThread",a,{transferList:o}):this.createIndexThread(a).result;return this._createPooledRBush().fromJSON(n)})}createIndexThread(t){let r=new Float64Array(t.position),o=this._createPooledRBush();return t.components?this._createIndexComponentsThread(o,r,t.components.map(a=>new Uint32Array(a))):this._createIndexAllThread(o,r)}_createIndexAllThread(t,r){let o=new Array(r.length/9),a=0;for(let n=0;n<r.length;n+=9)o[a++]=f(r,n,n+3,n+6);return t.load(o),{result:t.toJSON()}}_createIndexComponentsThread(t,r,o){let a=0;for(let s of o)a+=s.length/3;let n=new Array(a),d=0;for(let s of o)for(let i=0;i<s.length;i+=3)n[d++]=f(r,3*s[i],3*s[i+1],3*s[i+2]);return t.load(n),{result:t.toJSON()}}_createMeshData(t){let r=(p(t.vertexSpace)?h({position:t.vertexAttributes.position,normal:null,tangent:null},t.vertexSpace,t.transform,t.spatialReference).position:t.vertexAttributes.position).buffer;return!t.components||t.components.some(o=>!o.faces)?{position:r}:{position:r,components:t.components.map(o=>o.faces)}}_createPooledRBush(){return new c(9,m("esri-csp-restrictions")?t=>t:[".minX",".minY",".maxX",".maxY"])}};function f(e,t,r,o){return{minX:Math.min(e[t],e[r],e[o]),maxX:Math.max(e[t],e[r],e[o]),minY:Math.min(e[t+1],e[r+1],e[o+1]),maxY:Math.max(e[t+1],e[r+1],e[o+1]),p0:[e[t],e[t+1],e[t+2]],p1:[e[r],e[r+1],e[r+2]],p2:[e[o],e[o+1],e[o+2]]}}export{u as default};
