import{b as _,c as v}from"./chunk-VZSQNMU3.js";import"./chunk-VOLKMATP.js";import"./chunk-TEXQFKMJ.js";import"./chunk-57GB3TOJ.js";import"./chunk-WD4CT5CX.js";import"./chunk-XSMN6VN6.js";import"./chunk-FOPE5Y6E.js";import"./chunk-XVXRQZ3E.js";import"./chunk-OX7MQO37.js";import"./chunk-ZB2MLS4M.js";import"./chunk-N7KNO35F.js";import"./chunk-MFP2OFDR.js";import"./chunk-ADXKVFX6.js";import{a as w,b as g}from"./chunk-GNCG2SQP.js";import"./chunk-5JXPUH2D.js";import"./chunk-J4PQZSQE.js";import{b as V}from"./chunk-UMB6LRQI.js";import"./chunk-AQ74ANSJ.js";import"./chunk-SAOUSUZE.js";import"./chunk-IFPBW5UQ.js";import"./chunk-RHHHYJSZ.js";import"./chunk-QBQKFGOZ.js";import"./chunk-K5NHJTKR.js";import"./chunk-F7PIPM6E.js";import"./chunk-FR6Q4MSQ.js";import"./chunk-C6JT6KYF.js";import"./chunk-BCREO4Q5.js";import"./chunk-6FWNINU2.js";import"./chunk-ES7AH7WX.js";import"./chunk-RSDQHAJX.js";import{b as f}from"./chunk-G3LLBABP.js";import"./chunk-T4B3RN6B.js";import"./chunk-MXADXAOS.js";import"./chunk-RJHITHLB.js";import"./chunk-5HLV7XP5.js";import"./chunk-UI76XBLJ.js";import"./chunk-UE2YGKE7.js";import"./chunk-BE76S5KT.js";import"./chunk-D2ITYHSM.js";import"./chunk-FIITBHDP.js";import"./chunk-VSVNPPHQ.js";import"./chunk-CTGIUUCS.js";import"./chunk-VWEBO6QK.js";import{S as y}from"./chunk-KAAR5ZJN.js";import{a as p}from"./chunk-W3WDPWBE.js";import{y as c}from"./chunk-WKT5W7KT.js";import"./chunk-MLSR6YE6.js";import"./chunk-JPDAKIWT.js";import"./chunk-VU5W7W6Y.js";import{p as u}from"./chunk-X3IDZTNG.js";import"./chunk-IQJU4QT3.js";import{h as m}from"./chunk-EAH6BNBL.js";var a=Symbol(),l=class extends _(v){constructor(){super(...arguments),this.layerViews=new f,this._debouncedUpdate=c(()=>m(this,null,function*(){let{layer:e,parent:{footprintLayerView:r}}=this,i=[];if(r){let s=this._createQuery(),{features:n}=yield r.queryFeatures(s);this.suspended||(i=n.map(o=>e.acquireLayer(o)))}this.removeHandles(a),this.addHandles(i,a)}))}attach(){this.addAttachHandles([this._updatingHandles.addOnCollectionChange(()=>this.layerViews,()=>this._updateStageChildren(),{initial:!0}),g(()=>this.parent.footprintLayerView?.dataUpdating===!1,()=>this._updateLayers()),w(()=>[this.layer.maximumVisibleSublayers,this.suspended,this.parent.footprintLayerView?.filter],()=>this._updateLayers())])}detach(){this.container.removeAllChildren(),this.removeHandles(a)}update(e){}moveStart(){}viewChange(){}moveEnd(){}isUpdating(){return this.layerViews.some(e=>e.updating)}_updateStageChildren(){this.container.removeAllChildren(),this.layerViews.forEach((e,r)=>this.container.addChildAt(e.container,r))}_updateLayers(){this.suspended?this.removeHandles(a):this._updatingHandles.addPromise(this._debouncedUpdate().catch(e=>{u.getLogger(this).error(e)}))}_createQuery(){let{parent:{footprintLayerView:e},layer:{maximumVisibleSublayers:r,parent:{itemTypeField:i,itemSourceField:s,objectIdField:n,orderBy:o}}}=this,C=`${i} <> 'Scene Service'`,t=e.createQuery();t.returnGeometry=!1,t.num=r,t.outFields=[n,s],t.where=V(t.where,C);let d=o?.find(h=>h.field&&!h.valueExpression);return d?.field&&(t.orderByFields=[`${d.field} ${d.order==="descending"?"DESC":"ASC"}`]),t}};l=p([y("esri.views.2d.layers.CatalogDynamicGroupLayerView2D")],l);var $=l;export{$ as default};
