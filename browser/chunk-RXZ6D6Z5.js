import{v as o,y as s}from"./chunk-CTGIUUCS.js";import{r as i}from"./chunk-X3IDZTNG.js";import{h as r}from"./chunk-EAH6BNBL.js";function d(a){let t=g(a);return t!=null?t.toDataURL():""}function l(a){return r(this,null,function*(){let t=g(a);if(t==null)throw new i("imageToArrayBuffer","Unsupported image type");let e=yield c(a),n=yield new Promise(m=>t.toBlob(m,e));if(!n)throw new i("imageToArrayBuffer","Failed to encode image");return{data:yield n.arrayBuffer(),type:e}})}function c(a){return r(this,null,function*(){if(!(a instanceof HTMLImageElement))return"image/png";let t=a.src;if(o(t)){let e=s(t);return e?.mediaType==="image/jpeg"?e.mediaType:"image/png"}return/\.png$/i.test(t)?"image/png":/\.(jpg|jpeg)$/i.test(t)?"image/jpeg":"image/png"})}function g(a){if(a instanceof HTMLCanvasElement)return a;if(a instanceof HTMLVideoElement)return null;let t=document.createElement("canvas");t.width=a.width,t.height=a.height;let e=t.getContext("2d");return a instanceof HTMLImageElement?e.drawImage(a,0,0,a.width,a.height):a instanceof ImageData&&e.putImageData(a,0,0),t}function h(a){let t=[],e=new Uint8Array(a);for(let n=0;n<e.length;n++)t.push(String.fromCharCode(e[n]));return"data:application/octet-stream;base64,"+btoa(t.join(""))}function y(a){if(a.byteLength<8)return!1;let t=new Uint8Array(a);return t[0]===137&&t[1]===80&&t[2]===78&&t[3]===71&&t[4]===13&&t[5]===10&&t[6]===26&&t[7]===10}export{d as a,l as b,h as c,y as d};
