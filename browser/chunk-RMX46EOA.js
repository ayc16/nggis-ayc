import{a as k,c as ae,d as ce,e as de,f as L}from"./chunk-Q7HARYVW.js";import{a as te,b as re,c as oe,d as C,e as ie}from"./chunk-3NRQ53KE.js";import{a as Z}from"./chunk-V2KSICSA.js";import{a as I,b as X,g as Y}from"./chunk-GNCG2SQP.js";import{b as J}from"./chunk-MZFPLWMN.js";import{a as G}from"./chunk-T4B3RN6B.js";import{a as Q}from"./chunk-5HLV7XP5.js";import{c as q}from"./chunk-3RDV3O6N.js";import{a as ee}from"./chunk-D2ITYHSM.js";import{a as K}from"./chunk-VSVNPPHQ.js";import{p as W}from"./chunk-CTGIUUCS.js";import{A as $,F as m,a as H}from"./chunk-VWEBO6QK.js";import{S as V,n as M}from"./chunk-KAAR5ZJN.js";import{a as h}from"./chunk-W3WDPWBE.js";import{d as O,e as D,l as N,y as U}from"./chunk-WKT5W7KT.js";import{b as A}from"./chunk-MLSR6YE6.js";import{b as B,p as x}from"./chunk-X3IDZTNG.js";import{a as ne,b as se}from"./chunk-MDAB6L5Y.js";import{b as R,c as z}from"./chunk-FMFGIQYB.js";import{a as y,h as P}from"./chunk-EAH6BNBL.js";function le(e){return typeof e=="string"?document.getElementById(e):e??null}function He(e){for(;e.hasChildNodes();)e.removeChild(e.firstChild)}function Me(e,t){let r=t.parentNode;r&&r.insertBefore(e,t)}function Oe(e,t){for(;;){let r=e.firstChild;if(!r)break;t.appendChild(r)}}var De=typeof Element.prototype.closest=="function"?(e,t)=>e.closest(t):(e,t)=>{let r=e;do{if(r.matches(t))return r;r=r.parentElement}while(r!==null&&r.nodeType===1);return null};var pe={handleInterceptedEvent:(e,t,r,n)=>(e.scheduleRender(),t.properties[`on${n.type}`].apply(t.properties.bind||r,[n]))};var Ee={namespace:void 0,performanceLogger:()=>{},eventHandlerInterceptor:void 0,styleApplyer:(e,t,r)=>{t.charAt(0)==="-"?e.style.setProperty(t,r):e.style[t]=r}},he=e=>y(y({},Ee),e);var xe=(e,t)=>{let r=[];for(;e&&e!==t;)r.push(e),e=e.parentNode;return r},Ae=(e,t)=>e.find(t),me=(e,t,r=!1)=>{let n=e;return t.forEach((c,s)=>{let o=n?.children?Ae(n.children,i=>i.domNode===c):void 0;r&&!o&&s!==t.length-1||(n=o)}),n},ue=e=>{let t,r=y(y({},pe),e),n=he(r),c=n.performanceLogger,s,o=!0,i=!1,d=[],f=[],u=(p,a,T)=>{let v;n.eventHandlerInterceptor=(Te,je,Fe,Be)=>function(w){let _;c("domEvent",w);let E=xe(w.currentTarget,v.domNode),Pe=E.some(b=>customElements.get(b?.tagName?.toLowerCase()));if(w.eventPhase===Event.CAPTURING_PHASE||!Pe)E.reverse(),_=me(v.getLastRender(),E);else{let b=w.composedPath(),Ce=b.slice(b.indexOf(w.currentTarget),b.indexOf(v.domNode)).reverse();_=me(v.getLastRender(),Ce,!0)}let F;return _&&(F=r.handleInterceptedEvent(t,_,this,w)),c("domEventProcessed",w),F},r.postProcessProjectionOptions?.(n);let j=T();v=p(a,j,n),n.eventHandlerInterceptor=void 0,d.push(v),f.push(T),r.afterFirstVNodeRendered&&r.afterFirstVNodeRendered(v,j)},g=()=>{if(s=void 0,o){o=!1,c("renderStart",void 0);for(let p=0;p<d.length;p++){let a=f[p]();c("rendered",void 0),d[p].update(a),c("patched",void 0)}c("renderDone",void 0),o=!0}};return r.modifyDoRenderImplementation&&(g=r.modifyDoRenderImplementation(g,d,f)),t={renderNow:g,scheduleRender:()=>{s||i||(s=requestAnimationFrame(g))},stop:()=>{s&&(cancelAnimationFrame(s),s=void 0),i=!0},resume:()=>{i=!1,o=!0,t.scheduleRender()},append:(p,a)=>{u(k.append,p,a)},insertBefore:(p,a)=>{u(k.insertBefore,p,a)},merge:(p,a)=>{u(k.merge,p,a)},replace:(p,a)=>{u(k.replace,p,a)},detach:p=>{for(let a=0;a<f.length;a++)if(f[a]===p)return f.splice(a,1),d.splice(a,1)[0];throw new Error("renderFunction was not found")}},t};function fe(){let{classList:e}=document.body,t=window.matchMedia("(prefers-color-scheme: dark)").matches,r=()=>e.contains(se)||e.contains(ne)&&t?"dark":"light",n=o=>document.body.dispatchEvent(new CustomEvent("calciteModeChange",{bubbles:!0,detail:{mode:o}})),c=o=>{s!==o&&n(o),s=o},s=r();n(s),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",o=>c(o.matches?"dark":"light")),new MutationObserver(()=>c(r())).observe(document.body,{attributes:!0,attributeFilter:["class"]})}function Ne(){typeof window<"u"&&typeof location<"u"&&typeof document<"u"&&window.location===location&&window.document===document&&(document.readyState==="interactive"?fe():document.addEventListener("DOMContentLoaded",()=>fe(),{once:!0}))}var Ie=Ne;Ie();var ge;function ye(){try{R(".")}catch{z(W(K(ge)))}}function at(e){let t=[];for(let r of Object.keys(e))customElements.get(`calcite-${r}`)||t.push(e[r]?.());return t.length>0?Promise.all(t):null}ge="components/assets";var ve={arrowDown:"esri-icon-arrow-down",arrowUp:"esri-icon-arrow-up",basemap:"esri-icon-basemap",bookmark:"esri-icon-bookmark",calendar:"esri-icon-calendar",checkMark:"esri-icon-check-mark",checkboxUnchecked:"esri-icon-checkbox-unchecked",close:"esri-icon-close",collapse:"esri-icon-collapse",defaultAction:"esri-icon-default-action",description:"esri-icon-description",directions:"esri-icon-directions",dockBottom:"esri-icon-dock-bottom",dockLeft:"esri-icon-dock-left",dockRight:"esri-icon-dock-right",down:"esri-icon-down",downArrow:"esri-icon-down-arrow",download:"esri-icon-download",dragHorizontal:"esri-icon-drag-horizontal",dragVertical:"esri-icon-drag-vertical",duplicate:"esri-icon-duplicate",edit:"esri-icon-edit",elevationProfile:"esri-icon-elevation-profile",environmentSettings:"esri-icon-environment-settings",erase:"esri-icon-erase",error:"esri-icon-error",expand:"esri-icon-expand",fontFallbackText:"esri-icon-font-fallback-text",forward:"esri-icon-forward",gear:"esri-icon-gear",handleHorizontal:"esri-icon-handle-horizontal",handleVertical:"esri-icon-handle-vertical",home:"esri-icon-home",icon:"esri-icon",launchLinkExternal:"esri-icon-launch-link-external",layerList:"esri-icon-layer-list",layers:"esri-icon-layers",left:"esri-icon-left",leftArrows:"esri-icon-left-arrow",leftTriangleArrow:"esri-icon-left-triangle-arrow",lineOfSight:"esri-icon-line-of-sight",link:"esri-icon-link",linkExternal:"esri-icon-link-external",linkHorizontal:"esri-icon-link-horizontal",loadingIndicator:"esri-icon-loading-indicator",locate:"esri-icon-locate",locateCircled:"esri-icon-locate-circled",locked:"esri-icon-locked",mapPin:"esri-icon-map-pin",maximize:"esri-icon-maximize",measure:"esri-icon-measure",measureArea:"esri-icon-measure-area",measureBuildingHeightShadow:"esri-icon-measure-building-height-shadow",measureLine:"esri-icon-measure-line",menu:"esri-icon-menu",minimize:"esri-icon-minimize",minus:"esri-icon-minus",nonVisible:"esri-icon-non-visible",northNavigation:"esri-icon-north-navigation",noticeTriangle:"esri-icon-notice-triangle",organization:"esri-icon-organization",pan:"esri-icon-pan",pan2:"esri-icon-pan2",partlyCloudy:"esri-icon-partly-cloudy",pause:"esri-icon-pause",play:"esri-icon-play",playCircled:"esri-icon-play-circled",plus:"esri-icon-plus",polyline:"esri-icon-polyline",printer:"esri-icon-printer",radioChecked:"esri-icon-radio-checked",radioUnchecked:"esri-icon-radio-unchecked",refresh:"esri-icon-refresh",reverse:"esri-icon-reverse",right:"esri-icon-right",rightArrow:"esri-icon-right-arrow",rightTriangleArrow:"esri-icon-right-triangle-arrow",rotate:"esri-icon-rotate",save:"esri-icon-save",search:"esri-icon-search",settings2:"esri-icon-settings2",slice:"esri-icon-slice",swap:"esri-icon-swap",table:"esri-icon-table",timeClock:"esri-icon-time-clock",tracking:"esri-icon-tracking",trash:"esri-icon-trash",unlockedLinkHorizontal:"esri-icon-unlocked-link-horizontal",up:"esri-icon-up",upArrow:"esri-icon-up-arrow",upDownArrows:"esri-icon-up-down-arrows",urbanModel:"esri-icon-urban-model",vertexGps:"esri-icon-vertex-gps",visible:"esri-icon-visible",zoomInFixed:"esri-icon-zoom-in-fixed",zoomInMagnifyingGlass:"esri-icon-zoom-in-magnifying-glass",zoomOutFixed:"esri-icon-zoom-out-fixed",zoomToObject:"esri-icon-zoom-to-object"};var we=new Set;function be(e){we.add(e),e.finally(()=>we.delete(e))}var ke,Re="esri.widgets.Widget",ze=0,Le={widgetIcon:ve.checkboxUnchecked};function _e(e,t){for(let r in t)e[r]!=null&&(typeof e[r]=="object"&&typeof t[r]=="object"?_e(e[r],t?.[r]):e[r]=t[r]);return e}var Se=ue({postProcessProjectionOptions(e){let t=e.eventHandlerInterceptor,r=/capture$/i;e.eventHandlerInterceptor=(n,c,s,o)=>{let i=t?.(n,c,s,o),d=r.test(n);if(!((n=n.replace(r,"")).toLowerCase()in s)||d){let f=n[2].toLowerCase()+n.slice(3),u=a=>i?.call(s,a);s.addEventListener(f,u,d);let g=()=>s.removeEventListener(f,u,d),p=o.afterRemoved;o.afterRemoved=a=>{p?.(a),g()}}return i}},handleInterceptedEvent(e,t,r,n){let{eventPhase:c,type:s}=n,o=c===Event.CAPTURING_PHASE,i=`on${s}${o?"capture":""}`,d=t.properties;(d&&i in d||(i=`on${s[0].toUpperCase()}${s.slice(1)}${o?"Capture":""}`,d&&i in d))&&(te(),e.scheduleRender(),d[i].call(d.bind||r,n))}}),S=!1,l=class extends Q(G.EventedAccessor){constructor(e,t){super(e,t),this._attached=!1,this._projector=Se,this._readyForTrueRender=!1,this.iconClass=Le.widgetIcon,this.icon=null,this.key=this,this.autoRenderingEnabled=!0,this._loadLocale=U(()=>P(this,null,function*(){if(this._messageBundleProps?.length){let o=yield Promise.allSettled(this._messageBundleProps.map(f=>P(this,[f],function*({bundlePath:i,propertyName:d}){if(this.destroyed)return;let u=yield J(i);this.uiStrings&&Object.keys(this.uiStrings)&&(u=_e(B(u),this.uiStrings)),this[d]=u})));if(this.destroyed)return;for(let i of o)i.status==="rejected"&&x.getLogger(this).error("widget-intl:locale-error",this.declaredClass,i.reason)}yield this.loadLocale()})),ye();let r="esri-widget-uid-"+Z(),n=this.render.bind(this);this._trackingTarget=new $(()=>{this.autoRenderingEnabled&&this.scheduleRender()});let c=()=>{if(!this._readyForTrueRender||this.destroyed)return null;let o=n(),i=o.properties;i||(o.properties=i={});let{key:d}=i;if(d||(i.key=r),L(o.vnodeSelector)){if(!this.visible)return{vnodeSelector:"div",properties:{key:`${r}-hidden`,class:"",styles:{display:"none"}},domNode:null,children:void 0,text:void 0}}else this.visible?i.styles||(i.styles={}):(i.class="",i.styles={display:"none"}),i.styles.display||(i.styles.display="");let f=0;return o.children?.forEach(u=>{if(L(u.vnodeSelector))return;let{properties:g}=u;g||(u.properties=g={}),g.key||(g.key=`${this.id}--${f++}`)}),de(this,o)};this.render=()=>{if(S)return c();let o=re(this)??null;if(o)return o;this._trackingTarget.clear(),S=!0;try{o=M(this._trackingTarget,c)}catch(i){throw console.error(i),i}finally{S=!1}return o&&oe(this,o),o};let s=this.beforeFirstRender();s?this._resourcesFetch=s.then(()=>{this._readyForTrueRender=!0,this._postInitialize()}):(this._resourcesFetch=Promise.resolve().then(()=>{this._postInitialize()}),this._readyForTrueRender=!0),this.addResolvingPromise(this._resourcesFetch),be(this._resourcesFetch)}normalizeCtorArgs(e,t){let r=y({},e);return t&&(r.container=t),r}postInitialize(){}beforeFirstRender(){let e=this.loadDependencies();return this._messageBundleProps?.length||e?Promise.all([e,this._loadLocale()]).then(()=>{}).catch(N):null}loadDependencies(){return null}loadLocale(){return null}destroy(){this.destroyed||(A(this._trackingTarget),A(this.viewModel),this._detach(this.container),this._set("container",null),this._emitter.clear(),this.render=()=>null,this._projector=null,C(this))}set container(e){this._get("container")||this._set("container",e)}castContainer(e){return le(e)}get domNode(){return this.container}set domNode(e){this.container=e}get id(){return this._get("id")||this.container?.id||Date.now().toString(16)+"-widget-"+ze++}set id(e){e&&this._set("id",e)}get label(){return this.declaredClass.split(".").pop()}set label(e){this._overrideIfSome("label",e)}get renderable(){return this._resourcesFetch}get visible(){return this._get("visible")}set visible(e){this._set("visible",e)}get[(ke=ae,ce)](){return{projector:this._projector}}render(){throw new Error("not implemented")}scheduleRender(){this.destroyed||(C(this),this._projector.scheduleRender())}own(e){H(x.getLogger(this),"`Widget.own()` is deprecated in favor of 'Widget.addHandles()'",{replacement:"Widget.addHandles()",version:"4.28"}),this.addHandles(e)}classes(...e){return ie.apply(this,e)}renderNow(){C(this),this._projector.renderNow()}_postInitialize(){if(this.destroyed)return;this.scheduleRender(),this._delegatedEventNames?.length&&this.addHandles(I(()=>this.viewModel,(t,r)=>{r&&this.removeHandles("delegated-events"),t&&O(t)&&this.addHandles(this._delegatedEventNames.map(n=>D(t,n,c=>{this.emit(n,c)})),"delegated-events")},Y)),this.postInitialize();let e=()=>P(this,null,function*(){yield this._loadLocale().catch(N),this.scheduleRender()});this.addHandles([q(e),I(()=>this.uiStrings,e),X(()=>this.container,t=>{this.destroyed||this._attach(t)},{initial:!0,once:!0})])}_attach(e){e&&(this._projector.merge(e,this.render),this._attached=!0)}_detach(e){this._attached&&(this._projector.detach(this.render),this._attached=!1),e?.parentNode?.removeChild(e)}};l[ke]=!0,h([m()],l.prototype,"_readyForTrueRender",void 0),h([m({value:null})],l.prototype,"container",null),h([ee("container")],l.prototype,"castContainer",null),h([m()],l.prototype,"iconClass",void 0),h([m()],l.prototype,"icon",void 0),h([m()],l.prototype,"id",null),h([m()],l.prototype,"label",null),h([m()],l.prototype,"renderable",null),h([m()],l.prototype,"uiStrings",void 0),h([m()],l.prototype,"viewModel",void 0),h([m({value:!0})],l.prototype,"visible",null),h([m()],l.prototype,"key",void 0),h([m()],l.prototype,"children",void 0),h([m()],l.prototype,"afterCreate",void 0),h([m()],l.prototype,"afterUpdate",void 0),h([m()],l.prototype,"afterRemoved",void 0),l=h([V(Re)],l);var Ot=l;function Vt(e){return(t,r)=>{t.hasOwnProperty("_messageBundleProps")||(t._messageBundleProps=t._messageBundleProps?t._messageBundleProps.slice():[]),t._messageBundleProps.push({bundlePath:e,propertyName:r})}}export{le as a,He as b,Me as c,Oe as d,at as e,ve as f,Ot as g,Vt as h};
