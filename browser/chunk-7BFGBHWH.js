import{f as S}from"./chunk-R5S5CHNL.js";import{h as W}from"./chunk-UDAVCKBV.js";import{a as C}from"./chunk-Z33JZO3Q.js";import{o as A}from"./chunk-F7PIPM6E.js";import{g as Y}from"./chunk-6FWNINU2.js";import{t as v}from"./chunk-UI76XBLJ.js";import{b as y}from"./chunk-UE2YGKE7.js";import{a as X}from"./chunk-BE76S5KT.js";var R=new Float64Array(2),T=new Float64Array(2);var j="0123456789bcdefghjkmnpqrstuvwxyz",k=64;function Q(n,t,e,s){let o=[n.xmin,n.ymin,n.xmax,n.ymax],a=A.fromExtent(v.fromBounds(o,s)),c=S(a,s,y.WGS84,{densificationStep:t*k});if(!c)return null;let r=W(new C,c,!1,!1),i=r.coords.filter((B,m)=>!(m%2)),f=r.coords.filter((B,m)=>m%2),x=Math.min(...i),g=Math.min(...f),u=Math.max(...i),l=Math.max(...f),h=b(x,g,e,y.WGS84),M=b(u,l,e,y.WGS84);return h&&M?{bounds:o,geohashBounds:{xLL:h[0],yLL:h[1],xTR:M[0],yTR:M[1]},level:e}:null}function b(n,t,e,s){if(s.isWebMercator){let c=Y(n/X.radius),r=c-360*Math.floor((c+180)/360),i=[0,0];return L(i,0,Y(Math.PI/2-2*Math.atan(Math.exp(-t/X.radius))),r,e),i}let o=S({x:n,y:t},s,y.WGS84);if(!o)return null;let a=[0,0];return L(a,0,o.y,o.x,e),a}function P(n){return j[n]}function F(n){return(n[0]+n[1])/2}function w(n,t,e){return n[0]=t,n[1]=e,n}function z(n,t){let e=F(n),s=t,o=!t;n[0]=o*n[0]+s*e,n[1]=o*e+s*n[1]}function d(n,t){let e=t>F(n);return z(n,e),e}function U(n,t){let e=-90,s=90,o=-180,a=180;for(let c=0;c<t;c++){let r=Math.ceil((c+1)/2),i=Math.floor((c+1)/2),f=1-c%2,x=30-(3*r+2*i),g=30-(2*r+3*i),u=3*f+2*(1-f),l=2*f+3*(1-f),h=3*f+7*(1-f)<<g,M=(7*f+3*(1-f)<<x&n.geohashX)>>x,B=(h&n.geohashY)>>g;for(let m=u-1;m>=0;m--){let G=(o+a)/2,p=M&1<<m?1:0;o=(1-p)*o+p*G,a=(1-p)*G+p*a}for(let m=l-1;m>=0;m--){let G=(e+s)/2,p=B&1<<m?1:0;e=(1-p)*e+p*G,s=(1-p)*G+p*s}}return[o,e,a,s]}function L(n,t,e,s,o){o%2&&(o+=1);let a=0,c=0,r=-90,i=90,f=-180,x=180;for(let g=0;g<o/2;g++){for(let u=0;u<5;u++){let l=(f+x)/2,h=s>l?1:0;a|=h<<29-(u+5*g),f=(1-h)*f+h*l,x=(1-h)*l+h*x}for(let u=0;u<5;u++){let l=(r+i)/2,h=e>l?1:0;c|=h<<29-(u+5*g),r=(1-h)*r+h*l,i=(1-h)*l+h*i}}n[2*t]=a,n[2*t+1]=c}function V(n,t,e){let s="",o=w(R,-90,90),a=w(T,-180,180);for(let c=0;c<e;c++){let r=0;c%2?(r|=d(o,n)<<4,r|=d(a,t)<<3,r|=d(o,n)<<2,r|=d(a,t)<<1,r|=d(o,n)<<0):(r|=d(a,t)<<4,r|=d(o,n)<<3,r|=d(a,t)<<2,r|=d(o,n)<<1,r|=d(a,t)<<0),s+=P(r)}return s}export{Q as a,b,U as c,V as d};
