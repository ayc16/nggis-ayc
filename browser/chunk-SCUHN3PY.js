import{a as i}from"./chunk-LCUC2WGG.js";import{d as l,h as y}from"./chunk-EAH6BNBL.js";function w(e,S){return y(this,null,function*(){let o=S||{},{loadContext:t}=o,a=l(o,["loadContext"]),r=t?yield t.fetchServiceMetadata(e,a):yield i(e,a);u(r),f(r);let c={serviceJSON:r};if((r.currentVersion??0)<10.5)return c;let s=`${e}/layers`,n=t?yield t.fetchServiceMetadata(s,a):yield i(s,a);return u(n),f(n),c.layersJSON={layers:n.layers,tables:n.tables},c})}function b(e){return e.type==="Feature Layer"||e.type==="Oriented Imagery Layer"}function p(e){return e.type==="Table"}function f(e){e.layers=e.layers?.filter(b),e.tables=e.tables?.filter(p)}function h(e){e.type||="Feature Layer"}function v(e){e.type||="Table"}function u(e){e.layers?.forEach(h),e.tables?.forEach(v)}export{w as a};
