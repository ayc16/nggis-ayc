var I=[["(",")"],[")","("],["<",">"],[">","<"],["[","]"],["]","["],["{","}"],["}","{"],["\xAB","\xBB"],["\xBB","\xAB"],["\u2039","\u203A"],["\u203A","\u2039"],["\u207D","\u207E"],["\u207E","\u207D"],["\u208D","\u208E"],["\u208E","\u208D"],["\u2264","\u2265"],["\u2265","\u2264"],["\u2329","\u232A"],["\u232A","\u2329"],["\uFE59","\uFE5A"],["\uFE5A","\uFE59"],["\uFE5B","\uFE5C"],["\uFE5C","\uFE5B"],["\uFE5D","\uFE5E"],["\uFE5E","\uFE5D"],["\uFE64","\uFE65"],["\uFE65","\uFE64"]],v=["\u0622","\u0623","\u0625","\u0627"],Z=["\uFEF5","\uFEF7","\uFEF9","\uFEFB"],$=["\uFEF6","\uFEF8","\uFEFA","\uFEFC"],O=["\u0627","\u0628","\u062A","\u062B","\u062C","\u062D","\u062E","\u062F","\u0630","\u0631","\u0632","\u0633","\u0634","\u0635","\u0636","\u0637","\u0638","\u0639","\u063A","\u0641","\u0642","\u0643","\u0644","\u0645","\u0646","\u0647","\u0648","\u064A","\u0625","\u0623","\u0622","\u0629","\u0649","\u0644","\u0645","\u0646","\u0647","\u0648","\u064A","\u0625","\u0623","\u0622","\u0629","\u0649","\u06CC","\u0626","\u0624"],G=["\uFE8D","\uFE8F","\uFE95","\uFE99","\uFE9D","\uFEA1","\uFEA5","\uFEA9","\uFEAB","\uFEAD","\uFEAF","\uFEB1","\uFEB5","\uFEB9","\uFEBD","\uFEC1","\uFEC5","\uFEC9","\uFECD","\uFED1","\uFED5","\uFED9","\uFEDD","\uFEE1","\uFEE5","\uFEE9","\uFEED","\uFEF1","\uFE87","\uFE83","\uFE81","\uFE93","\uFEEF","\uFBFC","\uFE89","\uFE85","\uFE70","\uFE72","\uFE74","\uFE76","\uFE78","\uFE7A","\uFE7C","\uFE7E","\uFE80","\uFE89","\uFE85"],H=["\uFE8E","\uFE90","\uFE96","\uFE9A","\uFE9E","\uFEA2","\uFEA6","\uFEAA","\uFEAC","\uFEAE","\uFEB0","\uFEB2","\uFEB6","\uFEBA","\uFEBE","\uFEC2","\uFEC6","\uFECA","\uFECE","\uFED2","\uFED6","\uFEDA","\uFEDE","\uFEE2","\uFEE6","\uFEEA","\uFEEE","\uFEF2","\uFE88","\uFE84","\uFE82","\uFE94","\uFEF0","\uFBFD","\uFE8A","\uFE86","\uFE70","\uFE72","\uFE74","\uFE76","\uFE78","\uFE7A","\uFE7C","\uFE7E","\uFE80","\uFE8A","\uFE86"],J=["\uFE8E","\uFE92","\uFE98","\uFE9C","\uFEA0","\uFEA4","\uFEA8","\uFEAA","\uFEAC","\uFEAE","\uFEB0","\uFEB4","\uFEB8","\uFEBC","\uFEC0","\uFEC4","\uFEC8","\uFECC","\uFED0","\uFED4","\uFED8","\uFEDC","\uFEE0","\uFEE4","\uFEE8","\uFEEC","\uFEEE","\uFEF4","\uFE88","\uFE84","\uFE82","\uFE94","\uFEF0","\uFBFF","\uFE8C","\uFE86","\uFE71","\uFE72","\uFE74","\uFE77","\uFE79","\uFE7B","\uFE7D","\uFE7F","\uFE80","\uFE8C","\uFE86"],K=["\uFE8D","\uFE91","\uFE97","\uFE9B","\uFE9F","\uFEA3","\uFEA7","\uFEA9","\uFEAB","\uFEAD","\uFEAF","\uFEB3","\uFEB7","\uFEBB","\uFEBF","\uFEC3","\uFEC7","\uFECB","\uFECF","\uFED3","\uFED7","\uFEDB","\uFEDF","\uFEE3","\uFEE7","\uFEEB","\uFEED","\uFEF3","\uFE87","\uFE83","\uFE81","\uFE93","\uFEEF","\uFBFE","\uFE8B","\uFE85","\uFE70","\uFE72","\uFE74","\uFE76","\uFE78","\uFE7A","\uFE7C","\uFE7E","\uFE80","\uFE8B","\uFE85"],W=["\u0621","\u0622","\u0623","\u0624","\u0625","\u0627","\u0629","\u062F","\u0630","\u0631","\u0632","\u0648","\u0649"],Q=["\u064B","\u064B","\u064C","\u061F","\u064D","\u061F","\u064E","\u064E","\u064F","\u064F","\u0650","\u0650","\u0651","\u0651","\u0652","\u0652","\u0621","\u0622","\u0622","\u0623","\u0623","\u0624","\u0624","\u0625","\u0625","\u0626","\u0626","\u0626","\u0626","\u0627","\u0627","\u0628","\u0628","\u0628","\u0628","\u0629","\u0629","\u062A","\u062A","\u062A","\u062A","\u062B","\u062B","\u062B","\u062B","\u062C","\u062C","\u062C","\u062C","\u062D","\u062D","\u062D","\u062D","\u062E","\u062E","\u062E","\u062E","\u062F","\u062F","\u0630","\u0630","\u0631","\u0631","\u0632","\u0632","\u0633","\u0633","\u0633","\u0633","\u0634","\u0634","\u0634","\u0634","\u0635","\u0635","\u0635","\u0635","\u0636","\u0636","\u0636","\u0636","\u0637","\u0637","\u0637","\u0637","\u0638","\u0638","\u0638","\u0638","\u0639","\u0639","\u0639","\u0639","\u063A","\u063A","\u063A","\u063A","\u0641","\u0641","\u0641","\u0641","\u0642","\u0642","\u0642","\u0642","\u0643","\u0643","\u0643","\u0643","\u0644","\u0644","\u0644","\u0644","\u0645","\u0645","\u0645","\u0645","\u0646","\u0646","\u0646","\u0646","\u0647","\u0647","\u0647","\u0647","\u0648","\u0648","\u0649","\u0649","\u064A","\u064A","\u064A","\u064A","\uFEF5","\uFEF6","\uFEF7","\uFEF8","\uFEF9","\uFEFA","\uFEFB","\uFEFC","\u061F","\u061F","\u061F"],Y=["\u0621","\u0641"],X=["\u063A","\u064A"],tt=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],at=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],r=0,o=1,T=2,d=3,t=4,_=5,V=6,a=7,F=8,B=9,R=10,h=11,s=12,ht=13,bt=14,At=15,Lt=16,mt=17,c=18,rt=["UBAT_L","UBAT_R","UBAT_EN","UBAT_AN","UBAT_ON","UBAT_B","UBAT_S","UBAT_AL","UBAT_WS","UBAT_CS","UBAT_ES","UBAT_ET","UBAT_NSM","UBAT_LRE","UBAT_RLE","UBAT_PDF","UBAT_LRO","UBAT_RLO","UBAT_BN"],U=100,st=[U+0,r,r,r,r,U+1,U+2,U+3,o,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,U+4,t,t,t,r,t,r,t,r,t,t,t,r,r,t,t,r,r,r,r,r,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,r,r,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,r,r,r,r,r,r,r,r,r,r,r,r,r,r,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,r,r,t,t,r,r,t,t,r,r,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,r,r,r,U+5,a,a,U+6,U+7],et=[[c,c,c,c,c,c,c,c,c,V,_,V,F,_,c,c,c,c,c,c,c,c,c,c,c,c,c,c,_,_,_,V,F,t,t,h,h,h,t,t,t,t,t,R,B,R,B,B,T,T,T,T,T,T,T,T,T,T,B,t,t,t,t,t,t,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,t,t,t,t,t,t,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,t,t,t,t,c,c,c,c,c,c,_,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,c,B,t,h,h,h,h,t,t,t,t,r,t,t,c,t,t,h,h,T,T,t,r,t,t,t,T,r,t,t,t,t,t,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,t,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,t,r,r,r,r,r,r,r,r],[r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,t,t,t,t,t,t,t,t,t,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,t,t,r,r,r,r,r,r,r,t,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,t,r,t,t,t,t,t,t,t,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,o,s,o,s,s,o,s,s,o,s,t,t,t,t,t,t,t,t,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,t,t,t,t,t,o,o,o,o,o,t,t,t,t,t,t,t,t,t,t,t],[d,d,d,d,t,t,t,t,a,h,h,a,B,a,t,t,s,s,s,s,s,s,s,s,s,s,s,a,t,t,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,d,d,d,d,d,d,d,d,d,d,h,d,d,a,a,a,s,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,s,s,s,s,s,s,s,d,t,s,s,s,s,s,s,a,a,s,s,t,s,s,s,s,a,a,T,T,T,T,T,T,T,T,T,T,a,a,a,a,a,a],[a,a,a,a,a,a,a,a,a,a,a,a,a,a,t,a,a,s,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,t,t,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,s,s,s,s,s,s,s,s,s,s,s,a,t,t,t,t,t,t,t,t,t,t,t,t,t,t,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,o,s,s,s,s,s,s,s,s,s,o,o,t,t,t,t,o,t,t,t,t,t],[F,F,F,F,F,F,F,F,F,F,F,c,c,c,r,o,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,F,_,ht,bt,At,Lt,mt,B,h,h,h,h,h,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,B,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,F,c,c,c,c,c,t,t,t,t,t,c,c,c,c,c,c,T,r,t,t,T,T,T,T,T,T,R,R,t,t,t,r,T,T,T,T,T,T,T,T,T,T,R,R,t,t,t,t,r,r,r,r,r,r,r,r,r,r,r,r,r,t,t,t,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,h,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t],[r,r,r,r,r,r,r,t,t,t,t,t,t,t,t,t,t,t,t,r,r,r,r,r,t,t,t,t,t,o,s,o,o,o,o,o,o,o,o,o,o,R,o,o,o,o,o,o,o,o,o,o,o,o,o,t,o,o,o,o,o,t,o,t,o,o,t,o,o,t,o,o,o,o,o,o,o,o,o,o,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a],[s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,s,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,s,s,s,s,s,s,s,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,B,t,B,t,t,B,t,t,t,t,t,t,t,t,t,h,t,t,R,R,t,t,t,t,t,h,h,t,t,t,t,t,a,a,a,a,a,t,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,a,t,t,c],[t,t,t,h,h,h,t,t,t,t,t,R,B,R,B,B,T,T,T,T,T,T,T,T,T,T,B,t,t,t,t,t,t,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,t,t,t,t,t,t,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,t,t,t,t,t,t,t,t,t,t,t,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,r,t,t,t,r,r,r,r,r,r,t,t,r,r,r,r,r,r,t,t,r,r,r,r,r,r,t,t,r,r,r,t,t,t,h,h,t,t,t,h,h,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t,t]];var nt=class{constructor(){this.inputFormat="ILYNN",this.outputFormat="VLNNN",this.sourceToTarget=[],this.targetToSource=[],this.levels=[]}bidiTransform(e,i,u){if(this.sourceToTarget=[],this.targetToSource=[],!e)return"";if(Ot(this.sourceToTarget,this.targetToSource,e.length),!this.checkParameters(i,u))return e;i=this.inputFormat,u=this.outputFormat;let l=e,f=yt,A=ut(i.charAt(1)),b=ut(u.charAt(1)),L=(i.charAt(0)==="I"?"L":i.charAt(0))+A,m=(u.charAt(0)==="I"?"L":u.charAt(0))+b,g=i.charAt(2)+u.charAt(2);f.defInFormat=L,f.defOutFormat=m,f.defSwap=g;let N=x(e,L,m,g,f),w=!1;return u.charAt(1)==="R"?w=!0:u.charAt(1)!=="C"&&u.charAt(1)!=="D"||(w=this.checkContextual(N)==="rtl"),this.sourceToTarget=p,this.targetToSource=xt(this.sourceToTarget),D=this.targetToSource,l=i.charAt(3)===u.charAt(3)?N:u.charAt(3)==="S"?gt(w,N,!0):pt(N,w,!0),this.sourceToTarget=p,this.targetToSource=D,this.levels=M,l}_inputFormatSetter(e){if(!lt.test(e))throw new Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.inputFormat=e}_outputFormatSetter(e){if(!lt.test(e))throw new Error("dojox/string/BidiEngine: the bidi layout string is wrong!");this.outputFormat=e}checkParameters(e,i){return e?this._inputFormatSetter(e):e=this.inputFormat,i?this._outputFormatSetter(i):i=this.outputFormat,e!==i}checkContextual(e){let i=k(e);if(i!=="ltr"&&i!=="rtl"){try{i=document.dir.toLowerCase()}catch{}i!=="ltr"&&i!=="rtl"&&(i="ltr")}return i}hasBidiChar(e){return Dt.test(e)}};function x(n,e,i,u,l){let f=dt(n,{inFormat:e,outFormat:i,swap:u},l);if(f.inFormat===f.outFormat)return n;e=f.inFormat,i=f.outFormat,u=f.swap;let A=e.substring(0,1),b=e.substring(1,4),L=i.substring(0,1),m=i.substring(1,4);if(l.inFormat=e,l.outFormat=i,l.swap=u,A==="L"&&i==="VLTR"){if(b==="LTR")return l.dir=C,S(n,l);if(b==="RTL")return l.dir=y,S(n,l)}if(A==="V"&&L==="V")return l.dir=b==="RTL"?y:C,z(n,l);if(A==="L"&&i==="VRTL")return b==="LTR"?(l.dir=C,n=S(n,l)):(l.dir=y,n=S(n,l)),z(n);if(e==="VLTR"&&i==="LLTR")return l.dir=C,S(n,l);if(A==="V"&&L==="L"&&b!==m)return n=z(n),b==="RTL"?x(n,"LLTR","VLTR",u,l):x(n,"LRTL","VRTL",u,l);if(e==="VRTL"&&i==="LRTL")return x(n,"LRTL","VRTL",u,l);if(A==="L"&&L==="L"){let g=l.swap;return l.swap=g.substr(0,1)+"N",b==="RTL"?(l.dir=y,n=S(n,l),l.swap="N"+g.substr(1,2),l.dir=C,n=S(n,l)):(l.dir=C,n=S(n,l),l.swap="N"+g.substr(1,2),n=x(n,"VLTR","LRTL",l.swap,l)),n}return n}function dt(n,e,i){if(e.inFormat===void 0&&(e.inFormat=i.defInFormat),e.outFormat===void 0&&(e.outFormat=i.defOutFormat),e.swap===void 0&&(e.swap=i.defSwap),e.inFormat===e.outFormat)return e;let u=e.inFormat.substring(0,1),l=e.outFormat.substring(0,1),f,A=e.inFormat.substring(1,4),b=e.outFormat.substring(1,4);return A.charAt(0)==="C"&&(f=k(n),A=f==="ltr"||f==="rtl"?f.toUpperCase():e.inFormat.charAt(2)==="L"?"LTR":"RTL",e.inFormat=u+A),b.charAt(0)==="C"&&(f=k(n),f==="rtl"?b="RTL":f==="ltr"?(f=Bt(n),b=f.toUpperCase()):b=e.outFormat.charAt(2)==="L"?"LTR":"RTL",e.outFormat=l+b),e}function gt(n,e,i){if(e.length===0)return"";n===void 0&&(n=!0),i===void 0&&(i=!0);let u=(e=String(e)).split(""),l=0,f=1,A=u.length;n||(l=u.length-1,f=-1,A=1);let b=Ft(u,l,f,A,i),L="";for(let m=0;m<u.length;m++)i&&St(b,b.length,m)>-1?(Tt(D,m,!n,-1),p.splice(m,1)):L+=u[m];return L}function Ft(n,e,i,u,l){let f=0,A=[],b=0;for(let L=e;L*i<u;L+=i)if(ct(n[L])||j(n[L])){if(n[L]==="\u0644"&&Nt(n,L+i,i,u)){n[L]=It(n[L+i],f===0?Z:$),L+=i,Vt(n,L,i,u),l&&(A[b]=L,b++),f=0;continue}let m=n[L];f===1?n[L]=it(n,L+i,i,u)?Ct(n[L]):q(n[L],H):it(n,L+i,i,u)===!0?n[L]=q(n[L],K):n[L]=q(n[L],G),j(m)||(f=1),vt(m)===!0&&(f=0)}else f=0;return A}function k(n){let e=/[A-Za-z\u05d0-\u065f\u066a-\u06ef\u06fa-\u07ff\ufb1d-\ufdff\ufe70-\ufefc]/.exec(n);return e?e[0]<="z"?"ltr":"rtl":""}function Bt(n){let e=n.split("");return e.reverse(),k(e.join(""))}function pt(n,e,i){if(n.length===0)return"";i===void 0&&(i=!0),e===void 0&&(e=!0);let u="",l=(n=String(n)).split("");for(let f=0;f<n.length;f++){let A=!1;if(l[f]>="\uFE70"&&l[f]<"\uFEFF"){let b=n.charCodeAt(f);l[f]>="\uFEF5"&&l[f]<="\uFEFC"?(e?(f>0&&i&&l[f-1]===" "?u=u.substring(0,u.length-1)+"\u0644":(u+="\u0644",A=!0),u+=v[(b-65269)/2]):(u+=v[(b-65269)/2],u+="\u0644",f+1<n.length&&i&&l[f+1]===" "?f++:A=!0),A&&(Tt(D,f,!0,1),p.splice(f,0,p[f]))):u+=Q[b-65136]}else u+=l[f]}return u}function S(n,e){let i=n.split(""),u=[];return ft(i,u,e),Ut(i,u,e),ot(2,i,u,e),ot(1,i,u,e),M=u,i.join("")}function ft(n,e,i){let u=n.length,l=i.dir?at:tt,f=0,A=-1,b=[],L=[];i.hiLevel=i.dir,i.lastArabic=!1,i.hasUbatAl=!1,i.hasUbatB=!1,i.hasUbatS=!1;for(let m=0;m<u;m++)b[m]=_t(n[m]);for(let m=0;m<u;m++){let g=f,N=wt(n,b,L,m,i);L[m]=N,f=l[g][N];let w=240&f;f&=15;let P=l[f][jt];if(e[m]=P,w>0)if(w===16){for(let E=A;E<m;E++)e[E]=1;A=-1}else A=-1;if(l[f][kt])A===-1&&(A=m);else if(A>-1){for(let E=A;E<m;E++)e[E]=P;A=-1}b[m]===_&&(e[m]=0),i.hiLevel|=P}i.hasUbatS&&Rt(b,e,u,i)}function Rt(n,e,i,u){for(let l=0;l<i;l++)if(n[l]===V){e[l]=u.dir;for(let f=l-1;f>=0&&n[f]===F;f--)e[f]=u.dir}}function Ut(n,e,i){if(i.hiLevel!==0&&i.swap.substr(0,1)!==i.swap.substr(1,2))for(let u=0;u<n.length;u++)e[u]===1&&(n[u]=Et(n[u]))}function _t(n){let e=n.charCodeAt(0),i=st[e>>8];return i<U?i:et[i-U][255&e]}function z(n,e){let i=n.split("");if(e){let u=[];ft(i,u,e),M=u}return i.reverse(),p.reverse(),i.join("")}function St(n,e,i){for(let u=0;u<e;u++)if(n[u]===i)return u;return-1}function ct(n){for(let e=0;e<Y.length;e++)if(n>=Y[e]&&n<=X[e])return!0;return!1}function it(n,e,i,u){for(;e*i<u&&j(n[e]);)e+=i;return!!(e*i<u&&ct(n[e]))}function Nt(n,e,i,u){for(;e*i<u&&j(n[e]);)e+=i;let l=" ";if(!(e*i<u))return!1;l=n[e];for(let f=0;f<v.length;f++)if(v[f]===l)return!0;return!1}function ot(n,e,i,u){if(u.hiLevel<n)return;if(n===1&&u.dir===y&&!u.hasUbatB)return e.reverse(),void p.reverse();let l=e.length,f,A,b,L,m,g=0;for(;g<l;){if(i[g]>=n){for(f=g+1;f<l&&i[f]>=n;)f++;for(A=g,b=f-1;A<b;A++,b--)L=e[A],e[A]=e[b],e[b]=L,m=p[A],p[A]=p[b],p[b]=m;g=f}g++}}function wt(n,e,i,u,l){let f=e[u];return{UBAT_L:()=>(l.lastArabic=!1,r),UBAT_R:()=>(l.lastArabic=!1,o),UBAT_ON:()=>t,UBAT_AN:()=>d,UBAT_EN:()=>l.lastArabic?d:T,UBAT_AL:()=>(l.lastArabic=!0,l.hasUbatAl=!0,o),UBAT_WS:()=>t,UBAT_CS:()=>{let A,b;return u<1||u+1>=e.length||(A=i[u-1])!==T&&A!==d||(b=e[u+1])!==T&&b!==d?t:(l.lastArabic&&(b=d),b===A?b:t)},UBAT_ES:()=>(u>0?i[u-1]:_)===T&&u+1<e.length&&e[u+1]===T?T:t,UBAT_ET:()=>{if(u>0&&i[u-1]===T)return T;if(l.lastArabic)return t;let A=u+1,b=e.length;for(;A<b&&e[A]===h;)A++;return A<b&&e[A]===T?T:t},UBAT_NSM:()=>{if(l.inFormat==="VLTR"){let A=e.length,b=u+1;for(;b<A&&e[b]===s;)b++;if(b<A){let L=n[u].charCodeAt(0),m=L>=1425&&L<=2303||L===64286,g=e[b];if(m&&(g===o||g===a))return o}}return u<1||e[u-1]===_?t:i[u-1]},UBAT_B:()=>(l.lastArabic=!0,l.hasUbatB=!0,l.dir),UBAT_S:()=>(l.hasUbatS=!0,t),UBAT_LRE:()=>(l.lastArabic=!1,t),UBAT_RLE:()=>(l.lastArabic=!1,t),UBAT_LRO:()=>(l.lastArabic=!1,t),UBAT_RLO:()=>(l.lastArabic=!1,t),UBAT_PDF:()=>(l.lastArabic=!1,t),UBAT_BN:()=>t}[rt[f]]()}function Et(n){let e,i=0,u=I.length-1;for(;i<=u;)if(e=Math.floor((i+u)/2),n<I[e][0])u=e-1;else{if(!(n>I[e][0]))return I[e][1];i=e+1}return n}function vt(n){for(let e=0;e<W.length;e++)if(W[e]===n)return!0;return!1}function Ct(n){for(let e=0;e<O.length;e++)if(n===O[e])return J[e];return n}function q(n,e){for(let i=0;i<O.length;i++)if(n===O[i])return e[i];return n}function j(n){return n>="\u064B"&&n<="\u0655"}function ut(n){return n==="L"?"LTR":n==="R"?"RTL":n==="C"?"CLR":n==="D"?"CRL":""}function Vt(n,e,i,u){for(;e*i<u&&j(n[e]);)e+=i;return e*i<u&&(n[e]=" ",!0)}function It(n,e){for(let i=0;i<v.length;i++)if(n===v[i])return e[i];return n}function Ot(n,e,i){p=[],M=[];for(let u=0;u<i;u++)n[u]=u,e[u]=u,p[u]=u}function xt(n){let e=new Array(n.length);for(let i=0;i<n.length;i++)e[n[i]]=i;return e}function Tt(n,e,i,u){for(let l=0;l<n.length;l++)(n[l]>e||!i&&n[l]===e)&&(n[l]+=u)}var p=[],D=[],M=[],yt={dir:0,defInFormat:"LLTR",defoutFormat:"VLTR",defSwap:"YN",inFormat:"LLTR",outFormat:"VLTR",swap:"YN",hiLevel:0,lastArabic:!1,hasUbatAl:!1,hasBlockSep:!1,hasSegSep:!1,defOutFormat:""},jt=5,kt=6,C=0,y=1,lt=/^[(I|V)][(L|R|C|D)][(Y|N)][(S|N)][N]$/,Dt=/[\u0591-\u06ff\ufb1d-\ufefc]/;export{nt as a};
