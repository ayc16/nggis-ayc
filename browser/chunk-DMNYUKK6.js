import{h as g,i as C,j as D,k as x,l as h,m as a,n as L,o as p,q as y,t as I}from"./chunk-53X2B37Z.js";import{i as u,k as c,m as d,n as w}from"./chunk-DHY7QZ2H.js";import{e as b}from"./chunk-ZV7ILGPO.js";import{r as m}from"./chunk-X3IDZTNG.js";var f={retainId:!1,ignoreDrivers:!1,hasLabelingContext:!0};function M(e,n=f){if(!e)return{symbol:null};let{retainId:s=f.retainId,ignoreDrivers:r=f.ignoreDrivers,hasLabelingContext:t=f.hasLabelingContext,retainCIM:l=f.retainCIM}=n,o=null;if(y(e)||e instanceof p)o=e.clone();else if(e.type==="cim"){let i=e.data?.symbol?.type;if(i!=="CIMPointSymbol")return{error:new m("symbol-conversion:unsupported-cim-symbol",`CIM symbol of type '${i||"unknown"}' is unsupported in 3D`,{symbol:e})};o=l?e.clone():a.fromCIMSymbol(e)}else if(e instanceof u)o=D.fromSimpleLineSymbol(e);else if(e instanceof d)o=a.fromSimpleMarkerSymbol(e);else if(e instanceof h)o=a.fromPictureMarkerSymbol(e);else if(e instanceof c)o=n.geometryType&&n.geometryType==="mesh"?x.fromSimpleFillSymbol(e):L.fromSimpleFillSymbol(e);else{if(!(e instanceof w))return{error:new m("symbol-conversion:unsupported-2d-symbol",`2D symbol of type '${e.type||e.declaredClass}' is unsupported in 3D`,{symbol:e})};o=t?C.fromTextSymbol(e):a.fromTextSymbol(e)}return s&&o&&o.type!=="cim"&&(o.id=e.id),r&&y(o)&&o.symbolLayers.forEach(i=>i.ignoreDrivers=!0),{symbol:o}}function Q(e,n,s,r){let t=k(e,{},{context:r,isLabelSymbol:!1});t!=null&&(n[s]=t)}function R(e,n,s,r){let t=k(e,{},{context:r,isLabelSymbol:!0});t!=null&&(n[s]=t)}function v(e){return e instanceof g||e instanceof p}function k(e,n,s){if(e==null)return null;let{context:r,isLabelSymbol:t}=s,l=r?.origin,o=r?.messages;if(l==="web-scene"&&!v(e)){let i=M(e,{retainCIM:!0,hasLabelingContext:t});return i.symbol!=null?i.symbol.write(n,r):(o?.push(new m("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in scenes. Use 3D symbology instead when working with WebScene and SceneView`,{symbol:e,context:r,error:i.error})),null)}return(l==="web-map"||l==="portal-item"&&!b(r?.layer))&&v(e)?(o?.push(new m("symbol:unsupported",`Symbols of type '${e.declaredClass}' are not supported in web maps and portal items. Use 2D symbology and CIMSymbol instead when working with MapView`,{symbol:e,context:r})),null):e.write(n,r)}function X(e,n){return I(e,null,n)}export{Q as a,R as b,X as c};
