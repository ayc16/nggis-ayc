import{c as w,d as F}from"./chunk-GEV3XR4C.js";import{a as p}from"./chunk-D2ITYHSM.js";import{F as a,Q as d}from"./chunk-VWEBO6QK.js";import{S as f,z as A}from"./chunk-KAAR5ZJN.js";import{a as r}from"./chunk-W3WDPWBE.js";import{b as s,p as l}from"./chunk-X3IDZTNG.js";var v,n=v=class extends d{constructor(t){super(t),this.color=null,this.position=new Float64Array(0),this.uv=null,this.normal=null,this.tangent=null}castColor(t){return u(t,Uint8Array,[Uint8ClampedArray],{loggerTag:".color=",stride:4},l.getLogger(this))}castPosition(t){return t&&t instanceof Float32Array&&l.getLogger(this).warn(".position=","Setting position attribute from a Float32Array may cause precision problems. Consider storing data in a Float64Array or a regular number array"),u(t,Float64Array,[Float32Array],{loggerTag:".position=",stride:3},l.getLogger(this))}castUv(t){return u(t,Float32Array,[Float64Array],{loggerTag:".uv=",stride:2},l.getLogger(this))}castNormal(t){return u(t,Float32Array,[Float64Array],{loggerTag:".normal=",stride:3},l.getLogger(this))}castTangent(t){return u(t,Float32Array,[Float64Array],{loggerTag:".tangent=",stride:4},l.getLogger(this))}clone(){let t={position:s(this.position),uv:s(this.uv),normal:s(this.normal),tangent:s(this.tangent),color:s(this.color)};return new v(t)}clonePositional(){let t={position:s(this.position),normal:s(this.normal),tangent:s(this.tangent),uv:this.uv,color:this.color};return new v(t)}get memoryUsage(){let t=0;return t+=this.position.byteLength,this.uv!=null&&(t+=this.uv.byteLength),this.normal!=null&&(t+=this.normal.byteLength),this.tangent!=null&&(t+=this.tangent.byteLength),this.color!=null&&(t+=this.color.byteLength),t}};function b(t,o,e,g){let{loggerTag:m,stride:c}=o;return t.length%c!=0?(g.error(m,`Invalid array length, expected a multiple of ${c}`),new e([])):t}function u(t,o,e,g,m){if(!t)return t;if(t instanceof o)return b(t,g,o,m);for(let c of e)if(t instanceof c)return b(new o(t),g,o,m);if(Array.isArray(t))return b(new o(t),g,o,m);{let c=e.map(L=>`'${L.name}'`);return m.error(`Failed to set property, expected one of ${c}, but got ${t.constructor.name}`),new o([])}}function h(t,o,e){o[e]=S(t)}function S(t){let o=new Array(t.length);for(let e=0;e<t.length;e++)o[e]=t[e];return o}r([a({json:{write:h}})],n.prototype,"color",void 0),r([p("color")],n.prototype,"castColor",null),r([a({nonNullable:!0,json:{write:h}})],n.prototype,"position",void 0),r([p("position")],n.prototype,"castPosition",null),r([a({json:{write:h}})],n.prototype,"uv",void 0),r([p("uv")],n.prototype,"castUv",null),r([a({json:{write:h}})],n.prototype,"normal",void 0),r([p("normal")],n.prototype,"castNormal",null),r([a({json:{write:h}})],n.prototype,"tangent",void 0),r([p("tangent")],n.prototype,"castTangent",null),n=v=r([f("esri.geometry.support.MeshVertexAttributes")],n);var y,i=y=class extends d{static from(t){return A(y,t)}constructor(t){super(t),this.faces=null,this.material=null,this.name=void 0,this.shading="source",this.trustSourceNormals=!1}castFaces(t){return u(t,Uint32Array,[Uint16Array],{loggerTag:".faces=",stride:3},l.getLogger(this))}castMaterial(t){return A(t&&typeof t=="object"&&("metallic"in t||"roughness"in t||"metallicRoughnessTexture"in t)?F:w,t)}clone(){return new y({faces:s(this.faces),shading:this.shading,material:s(this.material),trustSourceNormals:this.trustSourceNormals,name:this.name})}cloneWithDeduplication(t,o){let e={faces:s(this.faces),shading:this.shading,material:this.material?this.material.cloneWithDeduplication(t,o):null,trustSourceNormals:this.trustSourceNormals,name:this.name};return new y(e)}get memoryUsage(){let t=0;return this.faces!=null&&(t+=this.faces.byteLength),this.material!=null&&(t+=this.material.memoryUsage),t}};r([a({json:{write:!0}})],i.prototype,"faces",void 0),r([p("faces")],i.prototype,"castFaces",null),r([a({type:w,json:{write:!0}})],i.prototype,"material",void 0),r([p("material")],i.prototype,"castMaterial",null),r([a()],i.prototype,"name",void 0),r([a({type:String,json:{write:!0}})],i.prototype,"shading",void 0),r([a({type:Boolean})],i.prototype,"trustSourceNormals",void 0),i=y=r([f("esri.geometry.support.MeshComponent")],i);var z=i;export{n as a,z as b};
