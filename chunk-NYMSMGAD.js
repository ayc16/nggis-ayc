import{a as pe}from"./chunk-UU227UU4.js";import{a as ne,b as se,c as ue,d as ce,e as fe,f as me,g as D,i as de}from"./chunk-6Z72A4BT.js";import{a as oe}from"./chunk-4XUK6P2F.js";import{a as re}from"./chunk-4QG4QYDG.js";import{a as te,c as E,j as C,k as z,l as ae,m as le,n as B,p as ie}from"./chunk-ERLUQYBV.js";import{a as Q}from"./chunk-SBPPDDZ3.js";import{g as c}from"./chunk-WVCJLLRA.js";import{e as V,f as J,j as K}from"./chunk-OVOWBDBP.js";import{a as ee}from"./chunk-HTWD7KCG.js";import{b as Z}from"./chunk-76YVRX2R.js";import{h as N}from"./chunk-XIMCHX2H.js";import{t as G}from"./chunk-KUJG22IX.js";import{f as j}from"./chunk-CRMMDK2Z.js";import{a as T,b as M,d as Y,h as R}from"./chunk-EAH6BNBL.js";var be={anchor:"esri-widget__anchor",anchorDisabled:"esri-widget__anchor--disabled",button:"esri-button",buttonDisabled:"esri-button--disabled",buttonHalf:"esri-button--half",buttonSecondary:"esri-button--secondary",buttonSmall:"esri-button--small",buttonTertiary:"esri-button--tertiary",buttonThird:"esri-button--third",disabled:"esri-disabled",empty:"esri-widget__content--empty",emptyIllustration:"esri-widget__content-illustration--empty",heading:"esri-widget__heading",hidden:"esri-hidden",input:"esri-input",interactive:"esri-interactive",loader:"esri-widget__loader",loaderAnimation:"esri-widget__loader-animation",loaderText:"esri-widget__loader-text",menu:"esri-menu",menuHeader:"esri-menu__header",menuItem:"esri-menu__list-item",menuItemActive:"esri-menu__list-item--active",menuItemFocus:"esri-menu__list-item--focus",menuList:"esri-menu__list",panel:"esri-widget--panel",panelHeightOnly:"esri-widget--panel-height-only",primaryTick:"primary-tick",primaryTickAmPm:"primary-tick__ampm",primaryTickLabel:"primary-tick__label",rotating:"esri-rotating",secondaryTick:"secondary-tick",select:"esri-select",table:"esri-widget__table",widget:"esri-widget",widgetButton:"esri-widget--button",widgetButtonActive:"esri-widget--button-active",widgetDisabled:"esri-widget--disabled"};function Ge(l,i){var r=l,{level:e,class:t}=r,a=Y(r,["level","class"]);let o=ye(e);return c(`h${o}`,M(T({},a),{"aria-level":String(o),class:V(be.heading,t),role:"heading"}),i)}function ye(e){return Z(Math.ceil(e),1,6)}function Ne(e,t=1){return ye(e+t)}function Qe(){return function(e,t){if(!e[t])throw new TypeError(`Cannot auto bind undefined function '${String(t)}'`);return{value:Re(e[t])}}}function Me(e){let t=e?.type;return e instanceof KeyboardEvent||t==="keyup"||t==="keydown"||t==="keypress"}function Re(e){return function(t,...a){Me(t)?K(t.key)&&(t.preventDefault(),t.stopPropagation(),t.target.click()):e.call(this,t,...a)}}var ge="esri-relationship-ramp",q=`${ge}--diamond`,_=`${ge}--square`,qe="http://www.w3.org/2000/svg",f={diamondContainer:`${q}__container`,diamondLeftCol:`${q}__left-column`,diamondRightCol:`${q}__right-column`,diamondMidCol:`${q}__middle-column`,diamondMidColLabel:`${q}__middle-column--label`,diamondMidColRamp:`${q}__middle-column--ramp`,squareTable:`${_}__table`,squareTableRow:`${_}__table-row`,squareTableCell:`${_}__table-cell`,squareTableLabel:`${_}__table-label`,squareTableLabelLeftBottom:`${_}__table-label--left-bottom`,squareTableLabelRightBottom:`${_}__table-label--right-bottom`,squareTableLabelLeftTop:`${_}__table-label--left-top`,squareTableLabelRightTop:`${_}__table-label--right-top`};function Fe(e,t,a={}){let{focus:i,labels:l}=e,r=!!i,o=Ee(e,t,a),u={justifyContent:"center"},p=J();return r?c("div",{class:f.diamondContainer,styles:u},c("div",{class:f.diamondLeftCol},p?l.right:l.left),c("div",{class:f.diamondMidCol},c("div",{class:f.diamondMidColLabel},l.top),o,c("div",{class:f.diamondMidColLabel},l.bottom)),c("div",{class:f.diamondRightCol},p?l.left:l.right)):c("div",{class:f.squareTable},c("div",{class:f.squareTableRow},c("div",{class:V(f.squareTableCell,f.squareTableLabel,f.squareTableLabelRightBottom)},p?l.top:l.left),c("div",{class:f.squareTableCell}),c("div",{class:V(f.squareTableCell,f.squareTableLabel,f.squareTableLabelLeftBottom)},p?l.left:l.top)),c("div",{class:f.squareTableRow},c("div",{class:f.squareTableCell}),o,c("div",{class:f.squareTableCell})),c("div",{class:f.squareTableRow},c("div",{class:V(f.squareTableCell,f.squareTableLabel,f.squareTableLabelRightTop)},p?l.right:l.bottom),c("div",{class:f.squareTableCell}),c("div",{class:V(f.squareTableCell,f.squareTableLabel,f.squareTableLabelLeftTop)},p?l.bottom:l.right)))}function he(e,t,a){let i=`${a}_arrowStart`,l=`${a}_arrowEnd`,r=e==="left",o={markerStart:null,markerEnd:null};switch(t){case"HL":r?o.markerStart=`url(#${l})`:o.markerEnd=`url(#${i})`;break;case"LL":o.markerStart=`url(#${l})`;break;case"LH":r?o.markerEnd=`url(#${i})`:o.markerStart=`url(#${l})`;break;default:o.markerEnd=`url(#${i})`}return o}function Ee(e,t,a={}){let{focus:i,numClasses:l,colors:r,rotation:o}=e,{opacity:u,effectList:p,ariaLabel:h}=a,m=a.size??60,d=!!i,s=Math.sqrt(m**2+m**2)+(d?0:5),y=[],n=[],g=[],w=(m||75)/l;for(let $=0;$<l;$++){let Te=$*w;for(let I=0;I<l;I++){let Ve=I*w,P=se(r[$][I]),He=ue(null),W={type:"rect",x:Ve,y:Te,width:w,height:w},U=ce(P);U&&y.push(U);let X=ne(W,P.fill,He,null);X&&n.push(X),g.push(fe(W))}}let k=10,v=15,b=15,S=10,x=null;d||(x="margin: -15px -15px -18px -15px");let H=he("left",i,t),A=he("right",i,t),O=me(g),xe=D(O,s,s,0,!1,o,!1),Ce=D(O,s,s,0,!1,d?-45:null,!1),_e={filter:B(p)??void 0,opacity:u==null?"":`${u}`};return c("div",{class:d?f.diamondMidColRamp:f.squareTableCell,styles:_e},c("svg",{"aria-label":h,focusable:!1,height:s,role:"image",style:x,width:s,xmlns:qe},c("defs",null,c("marker",{id:`${t}_arrowStart`,markerHeight:"10",markerUnits:"strokeWidth",markerWidth:"10",orient:"auto",refX:"5",refY:"5"},c("polyline",{fill:"none",points:"0,0 5,5 0,10",stroke:"#555555","stroke-width":"1"})),c("marker",{id:`${t}_arrowEnd`,markerHeight:"10",markerUnits:"strokeWidth",markerWidth:"10",orient:"auto",refX:"0",refY:"5"},c("polyline",{fill:"none",points:"5,0 0,5 5,10",stroke:"#555555","stroke-width":"1"})),y),c("g",{transform:xe},n),c("g",{transform:Ce},c("line",{fill:"none","marker-end":H.markerEnd,"marker-start":H.markerStart,stroke:"#555555","stroke-width":"1",x1:-k,x2:-k,y1:m-v,y2:v}),c("line",{fill:"none","marker-end":A.markerEnd,"marker-start":A.markerStart,stroke:"#555555","stroke-width":"1",x1:b,x2:m-b,y1:m+S,y2:m+S}))))}function we(e){if(!e.colorStops)return[];let t=[...e.colorStops].filter(i=>i.color?.a>0),a=t.length-1;if(t&&t[0]){let i=t[a];i&&i.ratio!==1&&(t.push(new Q({ratio:1,color:i.color})),a++)}return t.map((i,l)=>{let r="";return l===0?r=e.legendOptions?.minLabel||"low":l===a&&(r=e.legendOptions?.maxLabel||"high"),{color:i.color,label:r,ratio:i.ratio}}).reverse()}var ve={HH:315,HL:45,LL:135,LH:225},$e={2:[["HL","HH"],["LL","LH"]],3:[["HL","HM","HH"],["ML","MM","MH"],["LL","LM","LH"]],4:[["HL","HM1","HM2","HH"],["M2L","M2M1","M2M2","M2H"],["M1L","M1M1","M1M2","M1H"],["LL","LM1","LM2","LH"]]};function Ie(e){if(!e)return;let{type:t}=e;if(t.includes("3d"))return pe(e.symbolLayers.at(0));if(t==="simple-line"){let a=E(e);return a&&a.color}if(e.type==="simple-marker"&&(e.style==="x"||e.style==="cross")){let a=E(e);return a&&a.color}return te(e)}function ze(e,t){let a=t.HH.label,i=t.LL.label,l=t.HL.label,r=t.LH.label;switch(e){case"HH":default:return{top:a,bottom:i,left:l,right:r};case"HL":return{top:l,bottom:r,left:i,right:a};case"LL":return{top:i,bottom:a,left:r,right:l};case"LH":return{top:r,bottom:l,left:a,right:i}}}function Be(e){let{focus:t,infos:a,numClasses:i}=e,l=$e[i],r={};a.forEach(u=>{r[u.value]={label:u.label,fill:Ie(u.symbol)}});let o=[];for(let u=0;u<i;u++){let p=[];for(let h=0;h<i;h++){let m=r[l[u][h]];p.push(m.fill)}o.push(p)}return{type:"relationship-ramp",numClasses:i,focus:t,colors:o,labels:ze(t,r),rotation:De(t)}}function De(e){let t=ve[e];return e&&t==null&&(t=ve.HH),t||0}var F=null,Le=[255,255,255];function ke(e,t){return Math.floor(Math.random()*(t-e+1)+e)}function St(e,t,a){let{backgroundColor:i,outline:l,dotSize:r}=e,o=a?.swatchSize||oe.size,u=.8,p=Math.round(o*o/Math.max(r,.5)**2*u),h=window.devicePixelRatio,m=document.createElement("canvas"),d=o*h;m.width=d,m.height=d,m.style.width=m.width/h+"px",m.style.height=m.height/h+"px";let s=m.getContext("2d");if(i&&(s.fillStyle=i.toCss(!0),s.fillRect(0,0,d,d),s.fill()),s.fillStyle=t?.toCss(!0)??"",F&&F.length/2===p)for(let n=0;n<2*p;n+=2){let g=F[n],w=F[n+1];s.fillRect(g,w,r*h,r*h),s.fill()}else{F=[];for(let n=0;n<2*p;n+=2){let g=ke(0,d),w=ke(0,d);F.push(g,w),s.fillRect(g,w,r*h,r*h),s.fill()}}l&&(l.color&&(s.strokeStyle=l.color.toCss(!0)),s.lineWidth=l.width,s.strokeRect(0,0,d,d));let y=new Image(o,o);return y.src=m.toDataURL(),y.ariaLabel=a?.ariaLabel??null,y.alt=a?.ariaLabel??"",y}function xt(e,t={}){let a=t.radius||40,i=2*Math.PI*a,l=e.length,r=i/l,o=[],u=E(t.outline);u?.width!=null&&(u.width*=2),(u||t.backgroundColor)&&o.push({shape:{type:"circle",cx:a,cy:a,r:a},fill:t.backgroundColor,stroke:u,offset:[0,0]});let p=t.values,h=p&&p.length===l&&p.reduce((n,g)=>n+g,0)===100,m=[0];for(let n=0;n<l;n++){let g=null;h&&(g=p[n]*i/100,m.push(g+m[n])),o.push({shape:{type:"circle",cx:a,cy:a,r:a/2},fill:[0,0,0,0],stroke:{width:a,dashArray:`${(g??r)/2} ${i}`,dashoffset:"-"+(h?m[n]/2:n*(r/2)),color:e[n]},offset:[0,0]})}let d=null,s=2*a+(u?.width||0),y=t.holePercentage;if(y){u&&o.push({shape:{type:"circle",cx:a,cy:a,r:a*y},fill:null,stroke:u,offset:[0,0]});let n=s/2;d=[[{shape:{type:"circle",cx:n,cy:n,r:n},fill:Le,stroke:u?M(T({},u),{color:Le}):null,offset:[0,0]},{shape:{type:"circle",cx:n,cy:n,r:a*y},fill:[0,0,0],stroke:null,offset:[0,0]}]]}return de([o],[s,s],{effectView:t.effectList,ignoreStrokeWidth:!0,masking:d,rotation:-90,ariaLabel:t.ariaLabel})}function Ct(e,t={}){let l=t.align==="horizontal",r=l?75:24,o=l?24:75,u=t.width??r,p=t.height??o,h=t.gradient??!0,m=window.devicePixelRatio,d=u*m,s=p*m,y=document.createElement("canvas");y.width=d,y.height=s,y.ariaLabel=t.ariaLabel??null,y.style.width=`${u}px`,y.style.height=`${p}px`;let n=y.getContext("2d"),g=l?d:0,w=l?0:s;if(h){let v=n.createLinearGradient(0,0,g,w),b=e.length,S=b===1?0:1/(b-1);e.forEach((x,H)=>v.addColorStop(H*S,x.toString())),n.fillStyle=v,n.fillRect(0,0,d,s)}else{let v=l?d/e.length:d,b=l?s:s/e.length,S=0,x=0;for(let H of e)n.fillStyle=H.toString(),n.fillRect(S,x,v,b),S=l?S+v:0,x=l?0:x+b}let k=document.createElement("div");return k.style.width=`${u}px`,k.style.height=`${p}px`,Ae(k,t?.effectList),k.appendChild(y),k}function Ae(e,t){if(!t)return;e.style.filter=B(t);let a=t.effects;if(a){for(let i of a)if(i?.type==="drop-shadow"){i.offsetX<0?e.style.marginLeft=`${Math.abs(i.offsetX)}px`:e.style.marginRight=`${i.offsetX}px`;break}}}function Oe(e,t){return R(this,null,function*(){switch(e.type){case"web-style":{let{previewWebStyleSymbol:a}=yield import("./chunk-66KV34IX.js");return a(e,Oe,t)}case"label-3d":case"line-3d":case"mesh-3d":case"point-3d":case"polygon-3d":{let{previewSymbol3D:a}=yield import("./chunk-AFYOKIMW.js");return a(e,t)}case"simple-marker":case"simple-line":case"simple-fill":case"picture-marker":case"picture-fill":case"text":{let{previewSymbol2D:a}=yield import("./chunk-CFC2LBCP.js");return a(e,t)}case"cim":{let{previewCIMSymbol:a}=yield import("./chunk-LIRHDAJH.js");return a(e,t)}default:return}})}function Se(e){return e&&"opacity"in e?e.opacity*Se(e.parent):1}function _t(e,t){return R(this,null,function*(){if(!e)return;let a=e.sourceLayer,i=(t!=null&&t.useSourceLayer?a:e.layer)??a,l=Se(i);if(e.symbol!=null&&(t==null||t.ignoreGraphicSymbol!==!0)){let b=e.symbol.type==="web-style"?yield ie(e.symbol,M(T({},t),{cache:t!=null?t.webStyleCache:null})):e.symbol.clone();return z(b,null,l),b}let r=t?.renderer??Pe(i),o=r&&"getSymbolAsync"in r?yield r.getSymbolAsync(e,t):null;if(!o)return;if(o=o.type==="web-style"?yield o.fetchSymbol(M(T({},t),{cache:t!=null?t.webStyleCache:null})):o.clone(),!r||!("visualVariables"in r)||!r.visualVariables?.length)return z(o,null,l),o;if("arcadeRequiredForVisualVariables"in r&&r.arcadeRequiredForVisualVariables&&t?.arcade==null){let b=T({},t);b.arcade=yield ee(),t=b}let{getColor:u,getOpacity:p,getAllSizes:h,getRotationAngle:m}=yield import("./chunk-X3BOCWXR.js"),d=[],s=[],y=[],n=[];for(let b of r.visualVariables)switch(b.type){case"color":d.push(b);break;case"opacity":s.push(b);break;case"rotation":n.push(b);break;case"size":b.target||y.push(b)}let g=!!d.length&&d[d.length-1],w=g?u(g,e,t):null,k=!!s.length&&s[s.length-1],v=k?p(k,e,t):null;if(l!=null&&(v=v!=null?v*l:l),z(o,w,v),y.length){let b=h(y,e,t);yield ae(o,b)}for(let b of n)le(o,m(b,e,t),b.axis);return o})}function Pe(e){if(e)return"renderer"in e?e.renderer:void 0}var Nt=N("short-date");function L(e,t,a){return R(this,null,function*(){G(e,t,()=>[]).push(...a)})}function Jt(e){return R(this,null,function*(){let t=new Map;if(!e)return t;if("visualVariables"in e&&e.visualVariables){let a=e.visualVariables.filter(i=>i.type==="color");for(let i of a){let l=((yield re(i))??[]).map(r=>r.color);yield L(t,i.field||i.valueExpression,l)}}if(e.type==="heatmap"){let a=we(e).map(i=>i.color);yield L(t,e.field||e.valueExpression,a)}else if(e.type==="pie-chart"){for(let a of e.attributes)yield L(t,a.field||a.valueExpression,[a.color]);yield L(t,"default",[e?.othersCategory?.color,C(e.backgroundFillSymbol,null)])}else if(e.type==="dot-density"){for(let a of e.attributes)yield L(t,a.field||a.valueExpression,[a.color]);yield L(t,"default",[e.backgroundColor])}else if(e.type==="unique-value")if(e.authoringInfo?.type==="predominance")for(let a of e.uniqueValueInfos??[])yield L(t,a.value.toString(),[C(a.symbol,null)]);else{let a=(e.uniqueValueInfos??[]).map(u=>C(u.symbol,null)),{field:i,field2:l,field3:r,valueExpression:o}=e;(i||o)&&(yield L(t,i||o,a)),l&&(yield L(t,l,a)),r&&(yield L(t,r,a))}else if(e.type==="class-breaks"){let a=e.classBreakInfos.map(r=>C(r.symbol,null)),{field:i,valueExpression:l}=e;yield L(t,i??l,a)}else e.type==="simple"&&(yield L(t,"default",[C(e.symbol,null)]));return"defaultSymbol"in e&&e.defaultSymbol&&(yield L(t,"default",[C(e.defaultSymbol,null)])),t.forEach((a,i)=>{let l=j(a.filter(Boolean),(r,o)=>JSON.stringify(r)===JSON.stringify(o));t.set(i,l)}),t})}export{be as a,Ge as b,Ne as c,Qe as d,we as e,Jt as f,Fe as g,Be as h,De as i,St as j,xt as k,Ct as l,Oe as m,_t as n};
