import{b as Jy,c as Xy}from"./chunk-U4GCKRER.js";import{a as bp,b as wp}from"./chunk-QW25UBG2.js";import{b as vp,c as vt,d as x0,f as We}from"./chunk-7H5UBCJY.js";import{a as G0}from"./chunk-QODWUC62.js";import{a as fi,b as Qy,c as Sc,d as Cc}from"./chunk-ZZUOGAMH.js";import{C as Y0,G as Tp,a as Ea,d as j0,i as z0,j as U0,k as $0,l as W0,n as q0}from"./chunk-4OBRNGC3.js";import"./chunk-YRIBUHP4.js";import{a as gi,b as Fc,c as H0,d as B0}from"./chunk-XFFRGEY6.js";import{a as T0,d as ss,h as Ec,k as xc,l as I0,m as O0,n as as,s as Rc,t as Z0}from"./chunk-DF75A5VT.js";import{a as E0}from"./chunk-W2TN5YTP.js";import"./chunk-NX3OMSNN.js";import{a as Ac}from"./chunk-PRWNPZ5M.js";import"./chunk-4OC4J3KU.js";import{a as gn,b as V0,c as Pc}from"./chunk-AUUWEG54.js";import{a as P0,b as F0,d as R0,f as Oc,g as kc,m as Ei,n as L0,o as cs,p as xi,r as ds,t as N0,u as Cp}from"./chunk-BY64D2AL.js";import{c as ls,e as Qt,g as Ge,h as xa,j as Sp,l as rt,m as Ic,n as k0,q as A0,s as Ii}from"./chunk-GLDWQ77T.js";import{a as M0,c as D0,h as Ce}from"./chunk-R4SFVOZO.js";import{a as S0,b as C0}from"./chunk-XSUSQPBO.js";import"./chunk-QAJCY744.js";import{a as yp}from"./chunk-BKLTKOZS.js";import{a as Zy,b as mp,d as Ky}from"./chunk-BZFJVAQS.js";import"./chunk-BWK3LBHF.js";import{d as vc,f as bc,n as wc}from"./chunk-O73QQ7Z7.js";import{a as Ae,d as qy}from"./chunk-NYMSMGAD.js";import{b as Yy,e as rs}from"./chunk-S3DH7XZE.js";import{a as _p,b as _0,c as y0,d as v0,e as b0}from"./chunk-4VSZITBC.js";import{b as le,c as Wy,d as ve}from"./chunk-YKUB35EI.js";import"./chunk-ZJHI7U3R.js";import{a as mi,b as Mc,c as t0,d as Di,f as i0,g as n0,i as o0,j as r0,k as s0,l as a0,m as l0,n as c0,o as d0,p as u0,q as p0,r as fp,s as h0,u as m0,v as gp,w as f0,y as g0}from"./chunk-BBLGBTII.js";import{a as Tc,c as e0}from"./chunk-WBPLJNRU.js";import{b as w0}from"./chunk-5WNCZP4I.js";import{a as Dc}from"./chunk-4KGZTO2H.js";import"./chunk-2774JW3N.js";import"./chunk-UU227UU4.js";import"./chunk-6Z72A4BT.js";import"./chunk-4XUK6P2F.js";import"./chunk-YJQ2EKRV.js";import"./chunk-4QG4QYDG.js";import"./chunk-SJ4LUEWE.js";import{a as Uy}from"./chunk-R4ZRZJFL.js";import"./chunk-L657QK52.js";import"./chunk-SN7HPKXM.js";import{a as jy}from"./chunk-4Y7EKSO4.js";import"./chunk-G7VUHKGP.js";import"./chunk-X7ZCOG35.js";import{a as yc}from"./chunk-KKUKUFSJ.js";import{a as zy,b as pp,c as hp}from"./chunk-IFEIKHYM.js";import"./chunk-ERLUQYBV.js";import"./chunk-B6VNGUER.js";import{a as Hy,b as _c,c as By,d as Gy,e as up}from"./chunk-745FOGAT.js";import"./chunk-4ZBUTOIE.js";import{e as Ry,g as Ly,j as Ny,w as Re}from"./chunk-VIK3ZB6O.js";import{a as Yo}from"./chunk-7JGBMAQ4.js";import{b as gc,c as Vy}from"./chunk-DJEFBPF6.js";import{b as Oy,c as ky}from"./chunk-IGLWZTM3.js";import{t as Py}from"./chunk-YOFACOAF.js";import"./chunk-KYPWFZ3A.js";import{a as cp}from"./chunk-OK3BCND7.js";import"./chunk-SIZP7O5S.js";import{a as py,b as hy}from"./chunk-NVMXAMZ7.js";import{a as Sy}from"./chunk-MJN6ZDZD.js";import{a as ap}from"./chunk-E3472BDJ.js";import{a as vy}from"./chunk-4D3QHJI2.js";import{c as fy,e as gy,g as _y,j as yy}from"./chunk-E2J2V7JN.js";import{a as uy}from"./chunk-AGT7IE2H.js";import{b as op}from"./chunk-37H4LYIE.js";import"./chunk-D6Q6GMSU.js";import{a as my}from"./chunk-IXG346EU.js";import"./chunk-HUYHDVA2.js";import"./chunk-YUIUJIOR.js";import"./chunk-32VQE3PR.js";import"./chunk-NIYDRLW4.js";import{a as dp}from"./chunk-XHOTVM3O.js";import"./chunk-H3VY6XFU.js";import"./chunk-LNYBTIG7.js";import{a as fn}from"./chunk-KVAS5XP2.js";import"./chunk-PFEM3IEB.js";import"./chunk-CLVC2DXO.js";import"./chunk-RZU6EEB3.js";import"./chunk-WDTJILD4.js";import"./chunk-MXOJVM63.js";import"./chunk-ITQMD4YG.js";import"./chunk-O7F4RFE3.js";import"./chunk-UZW3KXUC.js";import"./chunk-X5QA6TFZ.js";import"./chunk-NWQX3K3R.js";import{a as S_}from"./chunk-Z72HW5OL.js";import"./chunk-4S7NY4TS.js";import"./chunk-B3L6VE5T.js";import"./chunk-FKIHG4NK.js";import"./chunk-UC7SIIH5.js";import"./chunk-32334K7D.js";import{a as Da}from"./chunk-AA7PSQ6G.js";import"./chunk-67J6HXBQ.js";import"./chunk-DTDFZYW6.js";import{a as lp}from"./chunk-Q63RILEF.js";import"./chunk-SBPPDDZ3.js";import"./chunk-JPYM7Q24.js";import"./chunk-FBVOH3OS.js";import"./chunk-5GFUMN7C.js";import"./chunk-XUNM6EI4.js";import"./chunk-OUDBADB4.js";import"./chunk-H5BQFJQG.js";import"./chunk-Q7VRKCBR.js";import"./chunk-3HFKIIGP.js";import"./chunk-SFX6QP6J.js";import"./chunk-BRJSO7CG.js";import"./chunk-AATZFFI5.js";import"./chunk-YNG4NJVY.js";import"./chunk-X5P2L6PB.js";import"./chunk-UOPCQUXQ.js";import"./chunk-IGVG5UOD.js";import"./chunk-4DJGLT2U.js";import{a as Ay}from"./chunk-YFH7K2PU.js";import"./chunk-BXHQ44WX.js";import"./chunk-EWHTP5EW.js";import"./chunk-HGQCMOZX.js";import"./chunk-3JBDNTAW.js";import"./chunk-VEC2OYBS.js";import"./chunk-LXSTCQTB.js";import"./chunk-MKKOKBLZ.js";import"./chunk-KLNZTVX6.js";import"./chunk-RKDCBEHW.js";import"./chunk-SVWANQOF.js";import"./chunk-F5LV7FRT.js";import"./chunk-X2KAPCU7.js";import"./chunk-JD3KGBGX.js";import"./chunk-DCH44U3G.js";import"./chunk-VXW5JMKD.js";import"./chunk-QCG2T55M.js";import"./chunk-NJ5QXHI6.js";import"./chunk-SJTQM4NH.js";import"./chunk-LJK37ZQL.js";import"./chunk-NYOCZ43I.js";import"./chunk-IFFYADB3.js";import"./chunk-RQ6MK374.js";import"./chunk-PT2SD4EO.js";import"./chunk-LHY2TOIB.js";import"./chunk-Y3NWBZAI.js";import"./chunk-4DZRVMTV.js";import"./chunk-227GSM7M.js";import"./chunk-BOCGOENW.js";import"./chunk-LOEAA5XF.js";import"./chunk-Q6RNQVC2.js";import"./chunk-4UCDYKMS.js";import{a as Iy}from"./chunk-UXJVKRGT.js";import{k as fc,l as Cy,m as Ty}from"./chunk-O4XV2BGZ.js";import{a as cc,b as is}from"./chunk-IY6MAS3P.js";import{B as Ma,e as Ey,u as xy}from"./chunk-JJANIEGN.js";import"./chunk-WR6DOBQL.js";import{a as My,b as Dy}from"./chunk-UWZJQ7YC.js";import{i as by,k as wy,m as rp,n as sp}from"./chunk-HKSYSHBE.js";import{a as mn}from"./chunk-UJ6V7JUK.js";import"./chunk-GK2MPWKO.js";import"./chunk-4AU42ZT7.js";import"./chunk-UAZOXZEX.js";import"./chunk-2M366ZBT.js";import"./chunk-47MSGR2H.js";import"./chunk-BW3UVZYU.js";import{a as hn}from"./chunk-47Q3ZDMA.js";import{a as U_,b as $_}from"./chunk-JFNDBYTB.js";import"./chunk-V2JYXY4D.js";import"./chunk-MFEUIQGF.js";import"./chunk-L6VKPRBR.js";import{d as np}from"./chunk-I7FAWQNR.js";import"./chunk-Z7UBSIU3.js";import{a as V_}from"./chunk-E2G5DGVE.js";import"./chunk-CP4KE5S6.js";import"./chunk-4X6XTGI2.js";import"./chunk-OJFSOL62.js";import{a as ry}from"./chunk-VXJKEPDS.js";import"./chunk-KQMHXU66.js";import{a as dy}from"./chunk-I3S324BU.js";import"./chunk-VOTZUGKK.js";import"./chunk-JLQZQQTG.js";import"./chunk-6KRFVLII.js";import"./chunk-OJB2TSJ7.js";import"./chunk-MCO7DSFO.js";import"./chunk-LUPAMFKK.js";import"./chunk-7JD62GP7.js";import"./chunk-CJYUOBHK.js";import"./chunk-GFBD2RSG.js";import{a as J_,d as X_}from"./chunk-NSEXRUGB.js";import"./chunk-Y7WGW4ZH.js";import"./chunk-UCXZVNQG.js";import"./chunk-QJKOK75M.js";import"./chunk-U6WVZEYH.js";import"./chunk-KRMYHUR3.js";import"./chunk-TX7DVQYF.js";import{a as Mi}from"./chunk-PDBA6QOJ.js";import{b as sy,c as ay,g as ly,h as ip,i as cy}from"./chunk-CF52RSJZ.js";import"./chunk-ALWV3RJ2.js";import"./chunk-7C6Z24SS.js";import{c as pc,e as K_,g as hc,h as Ki,r as mc,t as Q_}from"./chunk-IISBSAYJ.js";import"./chunk-2TKJWM7A.js";import"./chunk-PRVSRJH5.js";import"./chunk-QWLQUMDY.js";import{a as os,b as ey,d as Ta,h as ty,i as fo,j as qo,l as iy,o as ny,q as oy,s as Zo}from"./chunk-2ETHV3H2.js";import{a as Jl,b as Xl,c as Zu,d as Yu,e as Rt,f as ot,g as ut}from"./chunk-4TPQ6F4N.js";import{b as Ku,g as M,h as l_}from"./chunk-WVCJLLRA.js";import{c as c_}from"./chunk-MDSLION2.js";import{f as ba,k as a_}from"./chunk-OVOWBDBP.js";import"./chunk-V2KSICSA.js";import{a as I,b as pi,c as Zi,d as Rn,e as s_,f as Kt,g as ie,h as ke}from"./chunk-4XUOIGFO.js";import"./chunk-5HCLBNUR.js";import"./chunk-ALVXTOCH.js";import{a as q_,b as Z_,c as Y_}from"./chunk-DKZJLDQQ.js";import{b as $y}from"./chunk-4QL3AY7F.js";import"./chunk-AMICFNC3.js";import{a as d_}from"./chunk-SPDSGGOE.js";import"./chunk-2OKSPLJT.js";import"./chunk-7LEG2VDW.js";import"./chunk-R2HWUZ3L.js";import{a as ec}from"./chunk-G24ZJINL.js";import{l as Fy}from"./chunk-FOMIQQJB.js";import{b as tp}from"./chunk-ORM3VHG6.js";import"./chunk-HTWD7KCG.js";import{d as me}from"./chunk-AM3VOA32.js";import"./chunk-SAOUSUZE.js";import"./chunk-FVDACA4R.js";import{a as ns,b as H_,c as B_,d as dc,e as uc,f as Wo,g as mo,j as G_,n as j_,o as z_}from"./chunk-UIR6P2R4.js";import"./chunk-DFTBSFIN.js";import"./chunk-4HISZWR4.js";import"./chunk-SJW4NR3T.js";import{a as W_}from"./chunk-TQAPQODA.js";import"./chunk-M2GLXRA2.js";import"./chunk-EBWCXIFH.js";import{p as lc,q as N_}from"./chunk-M76YZBV5.js";import{a as Ju,c as C_,i as T_}from"./chunk-HXQMOXFX.js";import{a as $o,h as R_,j as sc,k as ac,s as L_,v as ep}from"./chunk-BKKKVIAS.js";import"./chunk-BCREO4Q5.js";import"./chunk-ZVHU7VE3.js";import{b as Xu,d as Ca,f as rc,g as F_}from"./chunk-76YVRX2R.js";import{B as Sa,b as E_,c as x_,d as I_,e as oc,l as O_,m as k_,o as A_,v as P_}from"./chunk-OZF6BMOL.js";import{a as Yi,b as M_}from"./chunk-GJP6PTKT.js";import{a as ts,c as D_}from"./chunk-RSDQHAJX.js";import{b as t_,d as i_}from"./chunk-W47PGZ3Y.js";import"./chunk-2OT2C2UU.js";import{a as qu,b as e_}from"./chunk-XIMCHX2H.js";import{b as W}from"./chunk-SF6Z2K5H.js";import{a as Be}from"./chunk-GBTN5LIS.js";import{c as r_,e as ho}from"./chunk-JOSG37QF.js";import"./chunk-SLMQFZE3.js";import"./chunk-BN2F4ATU.js";import"./chunk-DJULDHPW.js";import{a as wa}from"./chunk-NDG5FXLR.js";import"./chunk-V477EWXM.js";import{a as n_,b as o_}from"./chunk-5ODCEDHC.js";import"./chunk-BENVXA3L.js";import{e as __,h as y_,i as v_,j as b_,l as Fe,m as nc,o as w_,v as pn}from"./chunk-2KZICFRS.js";import{a as u_,b as es}from"./chunk-D2RUV6O4.js";import{A as h_,I as m_,O as Uo,_ as f_,a as p_,aa as ic,ba as g_,l as Xr,m as tc}from"./chunk-4JWMB5SM.js";import"./chunk-VOYK3LZF.js";import{a as Jg,c as Xg}from"./chunk-HOJTYTYD.js";import{a as hi}from"./chunk-XNEAL2YW.js";import"./chunk-J7M5V2SQ.js";import"./chunk-HRFJUMCP.js";import{aa as Qu}from"./chunk-375OYO4P.js";import{E as Wg,F as qg,L as d,O as k,U as Qg,W as Jr,b as qr,d as zu,f as Ng,g as Uu,h as Yl,i as Fn,o as va,r as $g,s as qi}from"./chunk-AUTL5LCV.js";import{H as $u,M as Wu,S as b,r as po,t as Zg,y as Yg,z as Kg}from"./chunk-KUJG22IX.js";import"./chunk-OVHPPCBL.js";import{a as c}from"./chunk-W3WDPWBE.js";import{B as zg,C as zo,a as Yt,c as Zr,e as Vg,f as un,h as Hg,j as Yr,k as nt,m as Kl,p as Kr,r as uo,s as Qr,t as Wi,v as Ql,x as Bg,y as Gg,z as jg}from"./chunk-GISCFF3Z.js";import{b as re,d as Me,e as Pn}from"./chunk-MLSR6YE6.js";import{a as Ug}from"./chunk-SNFOAZZQ.js";import"./chunk-CPDJJRWA.js";import"./chunk-DKS57BVI.js";import"./chunk-VU5W7W6Y.js";import{$ as ue,$a as vg,$b as ao,A as Or,Aa as Pr,Ab as Tg,Ac as co,B as aa,Ba as ag,Bb as Mg,Bc as $r,C as Kf,Ca as lg,Cb as Pt,Cc as Wr,D as xu,Da as cg,Db as Ft,E as no,Ea as dg,Eb as pe,F as Qf,Fa as ug,Fb as he,G as Jf,Ga as pg,Gb as He,H as la,Ha as hg,Hb as L,I as oo,Ia as An,Ib as de,J as Iu,Ja as ha,Jb as yt,K as Xf,Ka as mg,Kb as Dg,L as eg,La as ma,Lb as Ye,M as ca,Ma as g,Mb as Ke,N as ji,Na as H,Nb as Qe,O as tt,Oa as Fu,Ob as Ci,P as it,Pa as Oe,Pb as ae,Q as Bl,Qa as fg,Qb as dn,R as we,Ra as gg,Rb as Br,S as ci,Sa as zl,Sb as Nu,T as U,Ta as Fr,Tb as Eg,U as Ht,Ua as _g,Ub as Gr,V as tg,Va as ct,Vb as Vu,W as Ie,Wa as Ul,Wb as Hu,X as Ou,Xa as Rr,Xb as ui,Y as Se,Ya as so,Yb as $l,Z as F,Za as fa,Zb as Wl,_ as da,_a as yg,_b as xg,a as On,aa as ee,ab as bg,ac as Bu,b as Gf,ba as Bt,bb as G,bc as Ig,c as Tu,ca as ye,cb as At,cc as Gt,d as Mu,da as Gl,db as C,dc as Og,e as Du,ea as ro,eb as wi,ec as Ue,f as xe,fa as ig,fb as _t,fc as ga,g as Ne,ga as ua,gb as Si,gc as jr,h as jf,ha as Go,hb as Ru,hc as kg,i as zf,ia as ng,ib as Ve,ic as Ag,j as kn,ja as Zt,jb as wg,jc as Je,k as ai,ka as A,kb as jo,kc as ql,l as J,la as P,lb as zi,lc as Pg,m as sa,ma as di,mb as Ui,mc as Fg,n as Uf,na as pa,nb as _,nc as Ti,o as $f,oa as cn,ob as y,oc as lo,p as se,pa as ku,pb as V,pc as $i,q as Hl,qa as jl,qb as Lr,qc as zr,r as li,ra as ze,rb as Nr,rc as Te,s as Wf,sa as $,sb as Lu,sc as Rg,t as Eu,ta as og,tb as oe,tc as Gu,u as qf,ua as Au,ub as Sg,uc as Lg,v as qt,va as rg,vb as Cg,w as Ir,wa as kr,wb as x,x as Tt,xa as sg,xb as T,xc as Zl,y as Zf,ya as Pu,yb as Vr,yc as Ur,z as Yf,za as Ar,zb as Hr}from"./chunk-3F26ENCW.js";import{b as ya,k as ju,r as q,t as ne}from"./chunk-HQMV3KQV.js";import{a as $e,i as _a,q as dt}from"./chunk-CRMMDK2Z.js";import"./chunk-MDAB6L5Y.js";import"./chunk-FMFGIQYB.js";import{a as v,b as B,d as Bf,e as $S,f as WS,h as D}from"./chunk-EAH6BNBL.js";var b1=$S((Um,$m)=>{"use strict";(function(e,t){typeof define=="function"&&define.amd?define([],t):typeof Um<"u"?t():(t(),e.FileSaver={})})(Um,function(){"use strict";function e(a,l){return typeof l>"u"?l={autoBom:!1}:typeof l!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),l={autoBom:!l}),l.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob(["\uFEFF",a],{type:a.type}):a}function t(a,l,u){var p=new XMLHttpRequest;p.open("GET",a),p.responseType="blob",p.onload=function(){s(p.response,l,u)},p.onerror=function(){console.error("could not download file")},p.send()}function n(a){var l=new XMLHttpRequest;l.open("HEAD",a,!1);try{l.send()}catch{}return 200<=l.status&&299>=l.status}function i(a){try{a.dispatchEvent(new MouseEvent("click"))}catch{var l=document.createEvent("MouseEvents");l.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),a.dispatchEvent(l)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:void 0,r=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!r?function(a,l,u){var p=o.URL||o.webkitURL,h=document.createElement("a");l=l||a.name||"download",h.download=l,h.rel="noopener",typeof a=="string"?(h.href=a,h.origin===location.origin?i(h):n(h.href)?t(a,l,u):i(h,h.target="_blank")):(h.href=p.createObjectURL(a),setTimeout(function(){p.revokeObjectURL(h.href)},4e4),setTimeout(function(){i(h)},0))}:"msSaveOrOpenBlob"in navigator?function(a,l,u){if(l=l||a.name||"download",typeof a!="string")navigator.msSaveOrOpenBlob(e(a,u),l);else if(n(a))t(a,l,u);else{var p=document.createElement("a");p.href=a,p.target="_blank",setTimeout(function(){i(p)})}}:function(a,l,u,p){if(p=p||open("","_blank"),p&&(p.document.title=p.document.body.innerText="downloading..."),typeof a=="string")return t(a,l,u);var h=a.type==="application/octet-stream",m=/constructor/i.test(o.HTMLElement)||o.safari,f=/CriOS\/[\d]+/.test(navigator.userAgent);if((f||h&&m||r)&&typeof FileReader<"u"){var w=new FileReader;w.onloadend=function(){var R=w.result;R=f?R:R.replace(/^data:[^;]*;/,"data:attachment/file;"),p?p.location.href=R:location=R,p=null},w.readAsDataURL(a)}else{var O=o.URL||o.webkitURL,N=O.createObjectURL(a);p?p.location=N:location.href=N,p=null,setTimeout(function(){O.revokeObjectURL(N)},4e4)}});o.saveAs=s.saveAs=s,typeof $m<"u"&&($m.exports=s)})});var Ep=class extends Ag{constructor(){super(...arguments),this.supportsDOMEvents=!0}},xp=class e extends Ep{static makeCurrent(){kg(new e)}onAndCancel(t,n,i){return t.addEventListener(n,i),()=>{t.removeEventListener(n,i)}}dispatchEvent(t,n){t.dispatchEvent(n)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,n){return n=n||this.getDefaultDocument(),n.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,n){return n==="window"?window:n==="document"?t:n==="body"?t.body:null}getBaseHref(t){let n=YS();return n==null?null:KS(n)}resetBaseElement(){Ia=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Fg(document.cookie,t)}},Ia=null;function YS(){return Ia=Ia||document.querySelector("base"),Ia?Ia.getAttribute("href"):null}function KS(e){return new URL(e,document.baseURI).pathname}var QS=(()=>{let t=class t{build(){return new XMLHttpRequest}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=U({token:t,factory:t.\u0275fac});let e=t;return e})(),Ip=new Ie(""),X0=(()=>{let t=class t{constructor(i,o){this._zone=o,this._eventNameToPlugin=new Map,i.forEach(r=>{r.manager=this}),this._plugins=i.slice().reverse()}addEventListener(i,o,r){return this._findPluginFor(o).addEventListener(i,o,r)}getZone(){return this._zone}_findPluginFor(i){let o=this._eventNameToPlugin.get(i);if(o)return o;if(o=this._plugins.find(s=>s.supports(i)),!o)throw new we(5101,!1);return this._eventNameToPlugin.set(i,o),o}};t.\u0275fac=function(o){return new(o||t)(Se(Ip),Se(ct))},t.\u0275prov=U({token:t,factory:t.\u0275fac});let e=t;return e})(),Lc=class{constructor(t){this._doc=t}},Mp="ng-app-id",ev=(()=>{let t=class t{constructor(i,o,r,s={}){this.doc=i,this.appId=o,this.nonce=r,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Gu(s),this.resetHostNodes()}addStyles(i){for(let o of i)this.changeUsageCount(o,1)===1&&this.onStyleAdded(o)}removeStyles(i){for(let o of i)this.changeUsageCount(o,-1)<=0&&this.onStyleRemoved(o)}ngOnDestroy(){let i=this.styleNodesInDOM;i&&(i.forEach(o=>o.remove()),i.clear());for(let o of this.getAllStyles())this.onStyleRemoved(o);this.resetHostNodes()}addHost(i){this.hostNodes.add(i);for(let o of this.getAllStyles())this.addStyleToHost(i,o)}removeHost(i){this.hostNodes.delete(i)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(i){for(let o of this.hostNodes)this.addStyleToHost(o,i)}onStyleRemoved(i){let o=this.styleRef;o.get(i)?.elements?.forEach(r=>r.remove()),o.delete(i)}collectServerRenderedStyles(){let i=this.doc.head?.querySelectorAll(`style[${Mp}="${this.appId}"]`);if(i?.length){let o=new Map;return i.forEach(r=>{r.textContent!=null&&o.set(r.textContent,r)}),o}return null}changeUsageCount(i,o){let r=this.styleRef;if(r.has(i)){let s=r.get(i);return s.usage+=o,s.usage}return r.set(i,{usage:o,elements:[]}),o}getStyleElement(i,o){let r=this.styleNodesInDOM,s=r?.get(o);if(s?.parentNode===i)return r.delete(o),s.removeAttribute(Mp),s;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=o,this.platformIsServer&&a.setAttribute(Mp,this.appId),i.appendChild(a),a}}addStyleToHost(i,o){let r=this.getStyleElement(i,o),s=this.styleRef,a=s.get(o)?.elements;a?a.push(r):s.set(o,{elements:[r],usage:1})}resetHostNodes(){let i=this.hostNodes;i.clear(),i.add(this.doc.head)}};t.\u0275fac=function(o){return new(o||t)(Se(Je),Se(Au),Se(Pu,8),Se(kr))},t.\u0275prov=U({token:t,factory:t.\u0275fac});let e=t;return e})(),Dp={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},kp=/%COMP%/g,tv="%COMP%",JS=`_nghost-${tv}`,XS=`_ngcontent-${tv}`,eC=!0,tC=new Ie("",{providedIn:"root",factory:()=>eC});function iC(e){return XS.replace(kp,e)}function nC(e){return JS.replace(kp,e)}function iv(e,t){return t.map(n=>n.replace(kp,e))}var Nc=(()=>{let t=class t{constructor(i,o,r,s,a,l,u,p=null){this.eventManager=i,this.sharedStylesHost=o,this.appId=r,this.removeStylesOnCompDestroy=s,this.doc=a,this.platformId=l,this.ngZone=u,this.nonce=p,this.rendererByCompId=new Map,this.platformIsServer=Gu(l),this.defaultRenderer=new Oa(i,a,u,this.platformIsServer)}createRenderer(i,o){if(!i||!o)return this.defaultRenderer;this.platformIsServer&&o.encapsulation===da.ShadowDom&&(o=B(v({},o),{encapsulation:da.Emulated}));let r=this.getOrCreateRenderer(i,o);return r instanceof Vc?r.applyToHost(i):r instanceof ka&&r.applyStyles(),r}getOrCreateRenderer(i,o){let r=this.rendererByCompId,s=r.get(o.id);if(!s){let a=this.doc,l=this.ngZone,u=this.eventManager,p=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(o.encapsulation){case da.Emulated:s=new Vc(u,p,o,this.appId,h,a,l,m);break;case da.ShadowDom:return new Op(u,p,i,o,a,l,this.nonce,m);default:s=new ka(u,p,o,h,a,l,m);break}r.set(o.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}};t.\u0275fac=function(o){return new(o||t)(Se(X0),Se(ev),Se(Au),Se(tC),Se(Je),Se(kr),Se(ct),Se(Pu))},t.\u0275prov=U({token:t,factory:t.\u0275fac});let e=t;return e})(),Oa=class{constructor(t,n,i,o){this.eventManager=t,this.doc=n,this.ngZone=i,this.platformIsServer=o,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,n){return n?this.doc.createElementNS(Dp[n]||n,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,n){(K0(t)?t.content:t).appendChild(n)}insertBefore(t,n,i){t&&(K0(t)?t.content:t).insertBefore(n,i)}removeChild(t,n){t&&t.removeChild(n)}selectRootElement(t,n){let i=typeof t=="string"?this.doc.querySelector(t):t;if(!i)throw new we(-5104,!1);return n||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,n,i,o){if(o){n=o+":"+n;let r=Dp[o];r?t.setAttributeNS(r,n,i):t.setAttribute(n,i)}else t.setAttribute(n,i)}removeAttribute(t,n,i){if(i){let o=Dp[i];o?t.removeAttributeNS(o,n):t.removeAttribute(`${i}:${n}`)}else t.removeAttribute(n)}addClass(t,n){t.classList.add(n)}removeClass(t,n){t.classList.remove(n)}setStyle(t,n,i,o){o&(ma.DashCase|ma.Important)?t.style.setProperty(n,i,o&ma.Important?"important":""):t.style[n]=i}removeStyle(t,n,i){i&ma.DashCase?t.style.removeProperty(n):t.style[n]=""}setProperty(t,n,i){t!=null&&(t[n]=i)}setValue(t,n){t.nodeValue=n}listen(t,n,i){if(typeof t=="string"&&(t=jr().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${n}`);return this.eventManager.addEventListener(t,n,this.decoratePreventDefault(i))}decoratePreventDefault(t){return n=>{if(n==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(n)):t(n))===!1&&n.preventDefault()}}};function K0(e){return e.tagName==="TEMPLATE"&&e.content!==void 0}var Op=class extends Oa{constructor(t,n,i,o,r,s,a,l){super(t,r,s,l),this.sharedStylesHost=n,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=iv(o.id,o.styles);for(let p of u){let h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=p,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,n){return super.appendChild(this.nodeOrShadowRoot(t),n)}insertBefore(t,n,i){return super.insertBefore(this.nodeOrShadowRoot(t),n,i)}removeChild(t,n){return super.removeChild(this.nodeOrShadowRoot(t),n)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ka=class extends Oa{constructor(t,n,i,o,r,s,a,l){super(t,r,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=o,this.styles=l?iv(l,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Vc=class extends ka{constructor(t,n,i,o,r,s,a,l){let u=o+"-"+i.id;super(t,n,i,r,s,a,l,u),this.contentAttr=iC(u),this.hostAttr=nC(u)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,n){let i=super.createElement(t,n);return super.setAttribute(i,this.contentAttr,""),i}},oC=(()=>{let t=class t extends Lc{constructor(i){super(i)}supports(i){return!0}addEventListener(i,o,r){return i.addEventListener(o,r,!1),()=>this.removeEventListener(i,o,r)}removeEventListener(i,o,r){return i.removeEventListener(o,r)}};t.\u0275fac=function(o){return new(o||t)(Se(Je))},t.\u0275prov=U({token:t,factory:t.\u0275fac});let e=t;return e})(),Q0=["alt","control","meta","shift"],rC={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},sC={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey},aC=(()=>{let t=class t extends Lc{constructor(i){super(i)}supports(i){return t.parseEventName(i)!=null}addEventListener(i,o,r){let s=t.parseEventName(o),a=t.eventCallback(s.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>jr().onAndCancel(i,s.domEventName,a))}static parseEventName(i){let o=i.toLowerCase().split("."),r=o.shift();if(o.length===0||!(r==="keydown"||r==="keyup"))return null;let s=t._normalizeKey(o.pop()),a="",l=o.indexOf("code");if(l>-1&&(o.splice(l,1),a="code."),Q0.forEach(p=>{let h=o.indexOf(p);h>-1&&(o.splice(h,1),a+=p+".")}),a+=s,o.length!=0||s.length===0)return null;let u={};return u.domEventName=r,u.fullKey=a,u}static matchEventFullKeyCode(i,o){let r=rC[i.key]||i.key,s="";return o.indexOf("code.")>-1&&(r=i.code,s="code."),r==null||!r?!1:(r=r.toLowerCase(),r===" "?r="space":r==="."&&(r="dot"),Q0.forEach(a=>{if(a!==r){let l=sC[a];l(i)&&(s+=a+".")}}),s+=r,s===o)}static eventCallback(i,o,r){return s=>{t.matchEventFullKeyCode(s,i)&&r.runGuarded(()=>o(s))}}static _normalizeKey(i){return i==="esc"?"escape":i}};t.\u0275fac=function(o){return new(o||t)(Se(Je))},t.\u0275prov=U({token:t,factory:t.\u0275fac});let e=t;return e})();function nv(e,t){return Og(v({rootComponent:e},lC(t)))}function lC(e){return{appProviders:[...hC,...e?.providers??[]],platformProviders:pC}}function cC(){xp.makeCurrent()}function dC(){return new ku}function uC(){return og(document),document}var pC=[{provide:kr,useValue:Rg},{provide:rg,useValue:cC,multi:!0},{provide:Je,useFactory:uC,deps:[]}];var hC=[{provide:ig,useValue:"root"},{provide:ku,useFactory:dC,deps:[]},{provide:Ip,useClass:oC,multi:!0,deps:[Je,ct,kr]},{provide:Ip,useClass:aC,multi:!0,deps:[Je]},Nc,ev,X0,{provide:zl,useExisting:Nc},{provide:Lg,useClass:QS,deps:[]},[]];var ov=(()=>{let t=class t{constructor(i){this._doc=i}getTitle(){return this._doc.title}setTitle(i){this._doc.title=i||""}};t.\u0275fac=function(o){return new(o||t)(Se(Je))},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var Aa=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=U({token:t,factory:function(o){let r=null;return o?r=new(o||t):r=Se(mC),r},providedIn:"root"});let e=t;return e})(),mC=(()=>{let t=class t extends Aa{constructor(i){super(),this._doc=i}sanitize(i,o){if(o==null)return null;switch(i){case An.NONE:return o;case An.HTML:return Pr(o,"HTML")?Ar(o):hg(this._doc,String(o)).toString();case An.STYLE:return Pr(o,"Style")?Ar(o):o;case An.SCRIPT:if(Pr(o,"Script"))return Ar(o);throw new we(5200,!1);case An.URL:return Pr(o,"URL")?Ar(o):pg(String(o));case An.RESOURCE_URL:if(Pr(o,"ResourceURL"))return Ar(o);throw new we(5201,!1);default:throw new we(5202,!1)}}bypassSecurityTrustHtml(i){return ag(i)}bypassSecurityTrustStyle(i){return lg(i)}bypassSecurityTrustScript(i){return cg(i)}bypassSecurityTrustUrl(i){return dg(i)}bypassSecurityTrustResourceUrl(i){return ug(i)}};t.\u0275fac=function(o){return new(o||t)(Se(Je))},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var te="primary",qa=Symbol("RouteTitle"),Np=class{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n[0]:n}return null}getAll(t){if(this.has(t)){let n=this.params[t];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function fs(e){return new Np(e)}function fC(e,t,n){let i=n.path.split("/");if(i.length>e.length||n.pathMatch==="full"&&(t.hasChildren()||i.length<e.length))return null;let o={};for(let r=0;r<i.length;r++){let s=i[r],a=e[r];if(s.startsWith(":"))o[s.substring(1)]=a;else if(s!==a.path)return null}return{consumed:e.slice(0,i.length),posParams:o}}function gC(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!_n(e[n],t[n]))return!1;return!0}function _n(e,t){let n=e?Vp(e):void 0,i=t?Vp(t):void 0;if(!n||!i||n.length!=i.length)return!1;let o;for(let r=0;r<n.length;r++)if(o=n[r],!dv(e[o],t[o]))return!1;return!0}function Vp(e){return[...Object.keys(e),...Object.getOwnPropertySymbols(e)]}function dv(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;let n=[...e].sort(),i=[...t].sort();return n.every((o,r)=>i[r]===o)}else return e===t}function uv(e){return e.length>0?e[e.length-1]:null}function yo(e){return Uf(e)?e:Wl(e)?ai(Promise.resolve(e)):J(e)}var _C={exact:hv,subset:mv},pv={exact:yC,subset:vC,ignored:()=>!0};function rv(e,t,n){return _C[n.paths](e.root,t.root,n.matrixParams)&&pv[n.queryParams](e.queryParams,t.queryParams)&&!(n.fragment==="exact"&&e.fragment!==t.fragment)}function yC(e,t){return _n(e,t)}function hv(e,t,n){if(!Qo(e.segments,t.segments)||!Gc(e.segments,t.segments,n)||e.numberOfChildren!==t.numberOfChildren)return!1;for(let i in t.children)if(!e.children[i]||!hv(e.children[i],t.children[i],n))return!1;return!0}function vC(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>dv(e[n],t[n]))}function mv(e,t,n){return fv(e,t,t.segments,n)}function fv(e,t,n,i){if(e.segments.length>n.length){let o=e.segments.slice(0,n.length);return!(!Qo(o,n)||t.hasChildren()||!Gc(o,n,i))}else if(e.segments.length===n.length){if(!Qo(e.segments,n)||!Gc(e.segments,n,i))return!1;for(let o in t.children)if(!e.children[o]||!mv(e.children[o],t.children[o],i))return!1;return!0}else{let o=n.slice(0,e.segments.length),r=n.slice(e.segments.length);return!Qo(e.segments,o)||!Gc(e.segments,o,i)||!e.children[te]?!1:fv(e.children[te],t,r,i)}}function Gc(e,t,n){return t.every((i,o)=>pv[n](e[o].parameters,i.parameters))}var go=class{constructor(t=new fe([],{}),n={},i=null){this.root=t,this.queryParams=n,this.fragment=i}get queryParamMap(){return this._queryParamMap??=fs(this.queryParams),this._queryParamMap}toString(){return SC.serialize(this)}},fe=class{constructor(t,n){this.segments=t,this.children=n,this.parent=null,Object.values(n).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return jc(this)}},Ko=class{constructor(t,n){this.path=t,this.parameters=n}get parameterMap(){return this._parameterMap??=fs(this.parameters),this._parameterMap}toString(){return _v(this)}};function bC(e,t){return Qo(e,t)&&e.every((n,i)=>_n(n.parameters,t[i].parameters))}function Qo(e,t){return e.length!==t.length?!1:e.every((n,i)=>n.path===t[i].path)}function wC(e,t){let n=[];return Object.entries(e.children).forEach(([i,o])=>{i===te&&(n=n.concat(t(o,i)))}),Object.entries(e.children).forEach(([i,o])=>{i!==te&&(n=n.concat(t(o,i)))}),n}var dh=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=U({token:t,factory:()=>new Uc,providedIn:"root"});let e=t;return e})(),Uc=class{parse(t){let n=new Bp(t);return new go(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(t){let n=`/${Pa(t.root,!0)}`,i=MC(t.queryParams),o=typeof t.fragment=="string"?`#${CC(t.fragment)}`:"";return`${n}${i}${o}`}},SC=new Uc;function jc(e){return e.segments.map(t=>_v(t)).join("/")}function Pa(e,t){if(!e.hasChildren())return jc(e);if(t){let n=e.children[te]?Pa(e.children[te],!1):"",i=[];return Object.entries(e.children).forEach(([o,r])=>{o!==te&&i.push(`${o}:${Pa(r,!1)}`)}),i.length>0?`${n}(${i.join("//")})`:n}else{let n=wC(e,(i,o)=>o===te?[Pa(e.children[te],!1)]:[`${o}:${Pa(i,!1)}`]);return Object.keys(e.children).length===1&&e.children[te]!=null?`${jc(e)}/${n[0]}`:`${jc(e)}/(${n.join("//")})`}}function gv(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Hc(e){return gv(e).replace(/%3B/gi,";")}function CC(e){return encodeURI(e)}function Hp(e){return gv(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function zc(e){return decodeURIComponent(e)}function sv(e){return zc(e.replace(/\+/g,"%20"))}function _v(e){return`${Hp(e.path)}${TC(e.parameters)}`}function TC(e){return Object.entries(e).map(([t,n])=>`;${Hp(t)}=${Hp(n)}`).join("")}function MC(e){let t=Object.entries(e).map(([n,i])=>Array.isArray(i)?i.map(o=>`${Hc(n)}=${Hc(o)}`).join("&"):`${Hc(n)}=${Hc(i)}`).filter(n=>n);return t.length?`?${t.join("&")}`:""}var DC=/^[^\/()?;#]+/;function Pp(e){let t=e.match(DC);return t?t[0]:""}var EC=/^[^\/()?;=#]+/;function xC(e){let t=e.match(EC);return t?t[0]:""}var IC=/^[^=?&#]+/;function OC(e){let t=e.match(IC);return t?t[0]:""}var kC=/^[^&#]+/;function AC(e){let t=e.match(kC);return t?t[0]:""}var Bp=class{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new fe([],{}):new fe([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(n).length>0)&&(i[te]=new fe(t,n)),i}parseSegment(){let t=Pp(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new we(4009,!1);return this.capture(t),new Ko(zc(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let n=xC(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let o=Pp(this.remaining);o&&(i=o,this.capture(i))}t[zc(n)]=zc(i)}parseQueryParam(t){let n=OC(this.remaining);if(!n)return;this.capture(n);let i="";if(this.consumeOptional("=")){let s=AC(this.remaining);s&&(i=s,this.capture(i))}let o=sv(n),r=sv(i);if(t.hasOwnProperty(o)){let s=t[o];Array.isArray(s)||(s=[s],t[o]=s),s.push(r)}else t[o]=r}parseParens(t){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=Pp(this.remaining),o=this.remaining[i.length];if(o!=="/"&&o!==")"&&o!==";")throw new we(4010,!1);let r;i.indexOf(":")>-1?(r=i.slice(0,i.indexOf(":")),this.capture(r),this.capture(":")):t&&(r=te);let s=this.parseChildren();n[r]=Object.keys(s).length===1?s[te]:new fe([],s),this.consumeOptional("//")}return n}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new we(4011,!1)}};function yv(e){return e.segments.length>0?new fe([],{[te]:e}):e}function vv(e){let t={};for(let[i,o]of Object.entries(e.children)){let r=vv(o);if(i===te&&r.segments.length===0&&r.hasChildren())for(let[s,a]of Object.entries(r.children))t[s]=a;else(r.segments.length>0||r.hasChildren())&&(t[i]=r)}let n=new fe(e.segments,t);return PC(n)}function PC(e){if(e.numberOfChildren===1&&e.children[te]){let t=e.children[te];return new fe(e.segments.concat(t.segments),t.children)}return e}function gs(e){return e instanceof go}function FC(e,t,n=null,i=null){let o=bv(e);return wv(o,t,n,i)}function bv(e){let t;function n(r){let s={};for(let l of r.children){let u=n(l);s[l.outlet]=u}let a=new fe(r.url,s);return r===e&&(t=a),a}let i=n(e.root),o=yv(i);return t??o}function wv(e,t,n,i){let o=e;for(;o.parent;)o=o.parent;if(t.length===0)return Fp(o,o,o,n,i);let r=RC(t);if(r.toRoot())return Fp(o,o,new fe([],{}),n,i);let s=LC(r,o,e),a=s.processChildren?La(s.segmentGroup,s.index,r.commands):Cv(s.segmentGroup,s.index,r.commands);return Fp(o,s.segmentGroup,a,n,i)}function $c(e){return typeof e=="object"&&e!=null&&!e.outlets&&!e.segmentPath}function Ha(e){return typeof e=="object"&&e!=null&&e.outlets}function Fp(e,t,n,i,o){let r={};i&&Object.entries(i).forEach(([l,u])=>{r[l]=Array.isArray(u)?u.map(p=>`${p}`):`${u}`});let s;e===t?s=n:s=Sv(e,t,n);let a=yv(vv(s));return new go(a,r,o)}function Sv(e,t,n){let i={};return Object.entries(e.children).forEach(([o,r])=>{r===t?i[o]=n:i[o]=Sv(r,t,n)}),new fe(e.segments,i)}var Wc=class{constructor(t,n,i){if(this.isAbsolute=t,this.numberOfDoubleDots=n,this.commands=i,t&&i.length>0&&$c(i[0]))throw new we(4003,!1);let o=i.find(Ha);if(o&&o!==uv(i))throw new we(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function RC(e){if(typeof e[0]=="string"&&e.length===1&&e[0]==="/")return new Wc(!0,0,e);let t=0,n=!1,i=e.reduce((o,r,s)=>{if(typeof r=="object"&&r!=null){if(r.outlets){let a={};return Object.entries(r.outlets).forEach(([l,u])=>{a[l]=typeof u=="string"?u.split("/"):u}),[...o,{outlets:a}]}if(r.segmentPath)return[...o,r.segmentPath]}return typeof r!="string"?[...o,r]:s===0?(r.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?n=!0:a===".."?t++:a!=""&&o.push(a))}),o):[...o,r]},[]);return new Wc(n,t,i)}var hs=class{constructor(t,n,i){this.segmentGroup=t,this.processChildren=n,this.index=i}};function LC(e,t,n){if(e.isAbsolute)return new hs(t,!0,0);if(!n)return new hs(t,!1,NaN);if(n.parent===null)return new hs(n,!0,0);let i=$c(e.commands[0])?0:1,o=n.segments.length-1+i;return NC(n,o,e.numberOfDoubleDots)}function NC(e,t,n){let i=e,o=t,r=n;for(;r>o;){if(r-=o,i=i.parent,!i)throw new we(4005,!1);o=i.segments.length}return new hs(i,!1,o-r)}function VC(e){return Ha(e[0])?e[0].outlets:{[te]:e}}function Cv(e,t,n){if(e??=new fe([],{}),e.segments.length===0&&e.hasChildren())return La(e,t,n);let i=HC(e,t,n),o=n.slice(i.commandIndex);if(i.match&&i.pathIndex<e.segments.length){let r=new fe(e.segments.slice(0,i.pathIndex),{});return r.children[te]=new fe(e.segments.slice(i.pathIndex),e.children),La(r,0,o)}else return i.match&&o.length===0?new fe(e.segments,{}):i.match&&!e.hasChildren()?Gp(e,t,n):i.match?La(e,0,o):Gp(e,t,n)}function La(e,t,n){if(n.length===0)return new fe(e.segments,{});{let i=VC(n),o={};if(Object.keys(i).some(r=>r!==te)&&e.children[te]&&e.numberOfChildren===1&&e.children[te].segments.length===0){let r=La(e.children[te],t,n);return new fe(e.segments,r.children)}return Object.entries(i).forEach(([r,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(o[r]=Cv(e.children[r],t,s))}),Object.entries(e.children).forEach(([r,s])=>{i[r]===void 0&&(o[r]=s)}),new fe(e.segments,o)}}function HC(e,t,n){let i=0,o=t,r={match:!1,pathIndex:0,commandIndex:0};for(;o<e.segments.length;){if(i>=n.length)return r;let s=e.segments[o],a=n[i];if(Ha(a))break;let l=`${a}`,u=i<n.length-1?n[i+1]:null;if(o>0&&l===void 0)break;if(l&&u&&typeof u=="object"&&u.outlets===void 0){if(!lv(l,u,s))return r;i+=2}else{if(!lv(l,{},s))return r;i++}o++}return{match:!0,pathIndex:o,commandIndex:i}}function Gp(e,t,n){let i=e.segments.slice(0,t),o=0;for(;o<n.length;){let r=n[o];if(Ha(r)){let l=BC(r.outlets);return new fe(i,l)}if(o===0&&$c(n[0])){let l=e.segments[t];i.push(new Ko(l.path,av(n[0]))),o++;continue}let s=Ha(r)?r.outlets[te]:`${r}`,a=o<n.length-1?n[o+1]:null;s&&a&&$c(a)?(i.push(new Ko(s,av(a))),o+=2):(i.push(new Ko(s,{})),o++)}return new fe(i,{})}function BC(e){let t={};return Object.entries(e).forEach(([n,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(t[n]=Gp(new fe([],{}),0,i))}),t}function av(e){let t={};return Object.entries(e).forEach(([n,i])=>t[n]=`${i}`),t}function lv(e,t,n){return e==n.path&&_n(t,n.parameters)}var Na="imperative",Mt=function(e){return e[e.NavigationStart=0]="NavigationStart",e[e.NavigationEnd=1]="NavigationEnd",e[e.NavigationCancel=2]="NavigationCancel",e[e.NavigationError=3]="NavigationError",e[e.RoutesRecognized=4]="RoutesRecognized",e[e.ResolveStart=5]="ResolveStart",e[e.ResolveEnd=6]="ResolveEnd",e[e.GuardsCheckStart=7]="GuardsCheckStart",e[e.GuardsCheckEnd=8]="GuardsCheckEnd",e[e.RouteConfigLoadStart=9]="RouteConfigLoadStart",e[e.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",e[e.ChildActivationStart=11]="ChildActivationStart",e[e.ChildActivationEnd=12]="ChildActivationEnd",e[e.ActivationStart=13]="ActivationStart",e[e.ActivationEnd=14]="ActivationEnd",e[e.Scroll=15]="Scroll",e[e.NavigationSkipped=16]="NavigationSkipped",e}(Mt||{}),Oi=class{constructor(t,n){this.id=t,this.url=n}},Ba=class extends Oi{constructor(t,n,i="imperative",o=null){super(t,n),this.type=Mt.NavigationStart,this.navigationTrigger=i,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Jo=class extends Oi{constructor(t,n,i){super(t,n),this.urlAfterRedirects=i,this.type=Mt.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},yi=function(e){return e[e.Redirect=0]="Redirect",e[e.SupersededByNewNavigation=1]="SupersededByNewNavigation",e[e.NoDataFromResolver=2]="NoDataFromResolver",e[e.GuardRejected=3]="GuardRejected",e}(yi||{}),jp=function(e){return e[e.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",e[e.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",e}(jp||{}),_o=class extends Oi{constructor(t,n,i,o){super(t,n),this.reason=i,this.code=o,this.type=Mt.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Xo=class extends Oi{constructor(t,n,i,o){super(t,n),this.reason=i,this.code=o,this.type=Mt.NavigationSkipped}},Ga=class extends Oi{constructor(t,n,i,o){super(t,n),this.error=i,this.target=o,this.type=Mt.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},qc=class extends Oi{constructor(t,n,i,o){super(t,n),this.urlAfterRedirects=i,this.state=o,this.type=Mt.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},zp=class extends Oi{constructor(t,n,i,o){super(t,n),this.urlAfterRedirects=i,this.state=o,this.type=Mt.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Up=class extends Oi{constructor(t,n,i,o,r){super(t,n),this.urlAfterRedirects=i,this.state=o,this.shouldActivate=r,this.type=Mt.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},$p=class extends Oi{constructor(t,n,i,o){super(t,n),this.urlAfterRedirects=i,this.state=o,this.type=Mt.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Wp=class extends Oi{constructor(t,n,i,o){super(t,n),this.urlAfterRedirects=i,this.state=o,this.type=Mt.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},qp=class{constructor(t){this.route=t,this.type=Mt.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Zp=class{constructor(t){this.route=t,this.type=Mt.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Yp=class{constructor(t){this.snapshot=t,this.type=Mt.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Kp=class{constructor(t){this.snapshot=t,this.type=Mt.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Qp=class{constructor(t){this.snapshot=t,this.type=Mt.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Jp=class{constructor(t){this.snapshot=t,this.type=Mt.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var ja=class{},za=class{constructor(t){this.url=t}};var Xp=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Xc,this.attachRef=null}},Xc=(()=>{let t=class t{constructor(){this.contexts=new Map}onChildOutletCreated(i,o){let r=this.getOrCreateContext(i);r.outlet=o,this.contexts.set(i,r)}onChildOutletDestroyed(i){let o=this.getContext(i);o&&(o.outlet=null,o.attachRef=null)}onOutletDeactivated(){let i=this.contexts;return this.contexts=new Map,i}onOutletReAttached(i){this.contexts=i}getOrCreateContext(i){let o=this.getContext(i);return o||(o=new Xp,this.contexts.set(i,o)),o}getContext(i){return this.contexts.get(i)||null}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),Zc=class{constructor(t){this._root=t}get root(){return this._root.value}parent(t){let n=this.pathFromRoot(t);return n.length>1?n[n.length-2]:null}children(t){let n=eh(t,this._root);return n?n.children.map(i=>i.value):[]}firstChild(t){let n=eh(t,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(t){let n=th(t,this._root);return n.length<2?[]:n[n.length-2].children.map(o=>o.value).filter(o=>o!==t)}pathFromRoot(t){return th(t,this._root).map(n=>n.value)}};function eh(e,t){if(e===t.value)return t;for(let n of t.children){let i=eh(e,n);if(i)return i}return null}function th(e,t){if(e===t.value)return[t];for(let n of t.children){let i=th(e,n);if(i.length)return i.unshift(t),i}return[]}var _i=class{constructor(t,n){this.value=t,this.children=n}toString(){return`TreeNode(${this.value})`}};function ps(e){let t={};return e&&e.children.forEach(n=>t[n.value.outlet]=n),t}var Yc=class extends Zc{constructor(t,n){super(t),this.snapshot=n,ph(this,t)}toString(){return this.snapshot.toString()}};function Tv(e){let t=GC(e),n=new Ne([new Ko("",{})]),i=new Ne({}),o=new Ne({}),r=new Ne({}),s=new Ne(""),a=new _s(n,i,r,s,o,te,e,t.root);return a.snapshot=t.root,new Yc(new _i(a,[]),t)}function GC(e){let t={},n={},i={},o="",r=new Ua([],t,i,o,n,te,e,null,{});return new Kc("",new _i(r,[]))}var _s=class{constructor(t,n,i,o,r,s,a,l){this.urlSubject=t,this.paramsSubject=n,this.queryParamsSubject=i,this.fragmentSubject=o,this.dataSubject=r,this.outlet=s,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(se(u=>u[qa]))??J(void 0),this.url=t,this.params=n,this.queryParams=i,this.fragment=o,this.data=r}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(se(t=>fs(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(se(t=>fs(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function uh(e,t,n="emptyOnly"){let i,{routeConfig:o}=e;return t!==null&&(n==="always"||o?.path===""||!t.component&&!t.routeConfig?.loadComponent)?i={params:v(v({},t.params),e.params),data:v(v({},t.data),e.data),resolve:v(v(v(v({},e.data),t.data),o?.data),e._resolvedData)}:i={params:v({},e.params),data:v({},e.data),resolve:v(v({},e.data),e._resolvedData??{})},o&&Dv(o)&&(i.resolve[qa]=o.title),i}var Ua=class{get title(){return this.data?.[qa]}constructor(t,n,i,o,r,s,a,l,u){this.url=t,this.params=n,this.queryParams=i,this.fragment=o,this.data=r,this.outlet=s,this.component=a,this.routeConfig=l,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=fs(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=fs(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(i=>i.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${n}')`}},Kc=class extends Zc{constructor(t,n){super(n),this.url=t,ph(this,n)}toString(){return Mv(this._root)}};function ph(e,t){t.value._routerState=e,t.children.forEach(n=>ph(e,n))}function Mv(e){let t=e.children.length>0?` { ${e.children.map(Mv).join(", ")} } `:"";return`${e.value}${t}`}function Rp(e){if(e.snapshot){let t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,_n(t.queryParams,n.queryParams)||e.queryParamsSubject.next(n.queryParams),t.fragment!==n.fragment&&e.fragmentSubject.next(n.fragment),_n(t.params,n.params)||e.paramsSubject.next(n.params),gC(t.url,n.url)||e.urlSubject.next(n.url),_n(t.data,n.data)||e.dataSubject.next(n.data)}else e.snapshot=e._futureSnapshot,e.dataSubject.next(e._futureSnapshot.data)}function ih(e,t){let n=_n(e.params,t.params)&&bC(e.url,t.url),i=!e.parent!=!t.parent;return n&&!i&&(!e.parent||ih(e.parent,t.parent))}function Dv(e){return typeof e.title=="string"||e.title===null}var jC=(()=>{let t=class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=te,this.activateEvents=new $,this.deactivateEvents=new $,this.attachEvents=new $,this.detachEvents=new $,this.parentContexts=F(Xc),this.location=F(Ul),this.changeDetector=F(Gt),this.environmentInjector=F(ua),this.inputBinder=F(hh,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(i){if(i.name){let{firstChange:o,previousValue:r}=i.name;if(o)return;this.isTrackedInParentContexts(r)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(r)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(i){return this.parentContexts.getContext(i)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let i=this.parentContexts.getContext(this.name);i?.route&&(i.attachRef?this.attach(i.attachRef,i.route):this.activateWith(i.route,i.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new we(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new we(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new we(4012,!1);this.location.detach();let i=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(i.instance),i}attach(i,o){this.activated=i,this._activatedRoute=o,this.location.insert(i.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(i.instance)}deactivate(){if(this.activated){let i=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(i)}}activateWith(i,o){if(this.isActivated)throw new we(4013,!1);this._activatedRoute=i;let r=this.location,a=i.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,u=new nh(i,l,r.injector);this.activated=r.createComponent(a,{index:r.length,injector:u,environmentInjector:o??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};t.\u0275fac=function(o){return new(o||t)},t.\u0275dir=ye({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Zt]});let e=t;return e})(),nh=class e{__ngOutletInjector(t){return new e(this.route,this.childContexts,t)}constructor(t,n,i){this.route=t,this.childContexts=n,this.parent=i}get(t,n){return t===_s?this.route:t===Xc?this.childContexts:this.parent.get(t,n)}},hh=new Ie("");function zC(e,t,n){let i=$a(e,t._root,n?n._root:void 0);return new Yc(i,t)}function $a(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){let i=n.value;i._futureSnapshot=t.value;let o=UC(e,t,n);return new _i(i,o)}else{if(e.shouldAttach(t.value)){let r=e.retrieve(t.value);if(r!==null){let s=r.route;return s.value._futureSnapshot=t.value,s.children=t.children.map(a=>$a(e,a)),s}}let i=$C(t.value),o=t.children.map(r=>$a(e,r));return new _i(i,o)}}function UC(e,t,n){return t.children.map(i=>{for(let o of n.children)if(e.shouldReuseRoute(i.value,o.value.snapshot))return $a(e,i,o);return $a(e,i)})}function $C(e){return new _s(new Ne(e.url),new Ne(e.params),new Ne(e.queryParams),new Ne(e.fragment),new Ne(e.data),e.outlet,e.component,e)}var Ev="ngNavigationCancelingError";function xv(e,t){let{redirectTo:n,navigationBehaviorOptions:i}=gs(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,o=Iv(!1,yi.Redirect);return o.url=n,o.navigationBehaviorOptions=i,o}function Iv(e,t){let n=new Error(`NavigationCancelingError: ${e||""}`);return n[Ev]=!0,n.cancellationCode=t,n}function WC(e){return Ov(e)&&gs(e.url)}function Ov(e){return!!e&&e[Ev]}var qC=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=ee({type:t,selectors:[["ng-component"]],standalone:!0,features:[ae],decls:1,vars:0,template:function(o,r){o&1&&V(0,"router-outlet")},dependencies:[jC],encapsulation:2});let e=t;return e})();function ZC(e,t){return e.providers&&!e._injector&&(e._injector=vg(e.providers,t,`Route: ${e.path}`)),e._injector??t}function mh(e){let t=e.children&&e.children.map(mh),n=t?B(v({},e),{children:t}):v({},e);return!n.component&&!n.loadComponent&&(t||n.loadChildren)&&n.outlet&&n.outlet!==te&&(n.component=qC),n}function yn(e){return e.outlet||te}function YC(e,t){let n=e.filter(i=>yn(i)===t);return n.push(...e.filter(i=>yn(i)!==t)),n}function Za(e){if(!e)return null;if(e.routeConfig?._injector)return e.routeConfig._injector;for(let t=e.parent;t;t=t.parent){let n=t.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var KC=(e,t,n,i)=>se(o=>(new oh(t,o.targetRouterState,o.currentRouterState,n,i).activate(e),o)),oh=class{constructor(t,n,i,o,r){this.routeReuseStrategy=t,this.futureState=n,this.currState=i,this.forwardEvent=o,this.inputBindingEnabled=r}activate(t){let n=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,i,t),Rp(this.futureState.root),this.activateChildRoutes(n,i,t)}deactivateChildRoutes(t,n,i){let o=ps(n);t.children.forEach(r=>{let s=r.value.outlet;this.deactivateRoutes(r,o[s],i),delete o[s]}),Object.values(o).forEach(r=>{this.deactivateRouteAndItsChildren(r,i)})}deactivateRoutes(t,n,i){let o=t.value,r=n?n.value:null;if(o===r)if(o.component){let s=i.getContext(o.outlet);s&&this.deactivateChildRoutes(t,n,s.children)}else this.deactivateChildRoutes(t,n,i);else r&&this.deactivateRouteAndItsChildren(n,i)}deactivateRouteAndItsChildren(t,n){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,n):this.deactivateRouteAndOutlet(t,n)}detachAndStoreRouteSubtree(t,n){let i=n.getContext(t.value.outlet),o=i&&t.value.component?i.children:n,r=ps(t);for(let s of Object.values(r))this.deactivateRouteAndItsChildren(s,o);if(i&&i.outlet){let s=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:s,route:t,contexts:a})}}deactivateRouteAndOutlet(t,n){let i=n.getContext(t.value.outlet),o=i&&t.value.component?i.children:n,r=ps(t);for(let s of Object.values(r))this.deactivateRouteAndItsChildren(s,o);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(t,n,i){let o=ps(n);t.children.forEach(r=>{this.activateRoutes(r,o[r.value.outlet],i),this.forwardEvent(new Jp(r.value.snapshot))}),t.children.length&&this.forwardEvent(new Kp(t.value.snapshot))}activateRoutes(t,n,i){let o=t.value,r=n?n.value:null;if(Rp(o),o===r)if(o.component){let s=i.getOrCreateContext(o.outlet);this.activateChildRoutes(t,n,s.children)}else this.activateChildRoutes(t,n,i);else if(o.component){let s=i.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){let a=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Rp(a.route.value),this.activateChildRoutes(t,null,s.children)}else{let a=Za(o.snapshot);s.attachRef=null,s.route=o,s.injector=a,s.outlet&&s.outlet.activateWith(o,s.injector),this.activateChildRoutes(t,null,s.children)}}else this.activateChildRoutes(t,null,i)}},Qc=class{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},ms=class{constructor(t,n){this.component=t,this.route=n}};function QC(e,t,n){let i=e._root,o=t?t._root:null;return Fa(i,o,n,[i.value])}function JC(e){let t=e.routeConfig?e.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:e,guards:t}}function vs(e,t){let n=Symbol(),i=t.get(e,n);return i===n?typeof e=="function"&&!tg(e)?e:t.get(e):i}function Fa(e,t,n,i,o={canDeactivateChecks:[],canActivateChecks:[]}){let r=ps(t);return e.children.forEach(s=>{XC(s,r[s.value.outlet],n,i.concat([s.value]),o),delete r[s.value.outlet]}),Object.entries(r).forEach(([s,a])=>Va(a,n.getContext(s),o)),o}function XC(e,t,n,i,o={canDeactivateChecks:[],canActivateChecks:[]}){let r=e.value,s=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(s&&r.routeConfig===s.routeConfig){let l=eT(s,r,r.routeConfig.runGuardsAndResolvers);l?o.canActivateChecks.push(new Qc(i)):(r.data=s.data,r._resolvedData=s._resolvedData),r.component?Fa(e,t,a?a.children:null,i,o):Fa(e,t,n,i,o),l&&a&&a.outlet&&a.outlet.isActivated&&o.canDeactivateChecks.push(new ms(a.outlet.component,s))}else s&&Va(t,a,o),o.canActivateChecks.push(new Qc(i)),r.component?Fa(e,null,a?a.children:null,i,o):Fa(e,null,n,i,o);return o}function eT(e,t,n){if(typeof n=="function")return n(e,t);switch(n){case"pathParamsChange":return!Qo(e.url,t.url);case"pathParamsOrQueryParamsChange":return!Qo(e.url,t.url)||!_n(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ih(e,t)||!_n(e.queryParams,t.queryParams);case"paramsChange":default:return!ih(e,t)}}function Va(e,t,n){let i=ps(e),o=e.value;Object.entries(i).forEach(([r,s])=>{o.component?t?Va(s,t.children.getContext(r),n):Va(s,null,n):Va(s,t,n)}),o.component?t&&t.outlet&&t.outlet.isActivated?n.canDeactivateChecks.push(new ms(t.outlet.component,o)):n.canDeactivateChecks.push(new ms(null,o)):n.canDeactivateChecks.push(new ms(null,o))}function Ya(e){return typeof e=="function"}function tT(e){return typeof e=="boolean"}function iT(e){return e&&Ya(e.canLoad)}function nT(e){return e&&Ya(e.canActivate)}function oT(e){return e&&Ya(e.canActivateChild)}function rT(e){return e&&Ya(e.canDeactivate)}function sT(e){return e&&Ya(e.canMatch)}function kv(e){return e instanceof $f||e?.name==="EmptyError"}var Bc=Symbol("INITIAL_VALUE");function ys(){return ji(e=>Hl(e.map(t=>t.pipe(no(1),ca(Bc)))).pipe(se(t=>{for(let n of t)if(n!==!0){if(n===Bc)return Bc;if(n===!1||n instanceof go)return n}return!0}),Tt(t=>t!==Bc),no(1)))}function aT(e,t){return li(n=>{let{targetSnapshot:i,currentSnapshot:o,guards:{canActivateChecks:r,canDeactivateChecks:s}}=n;return s.length===0&&r.length===0?J(B(v({},n),{guardsResult:!0})):lT(s,i,o,e).pipe(li(a=>a&&tT(a)?cT(i,r,e,t):J(a)),se(a=>B(v({},n),{guardsResult:a})))})}function lT(e,t,n,i){return ai(e).pipe(li(o=>mT(o.component,o.route,n,t,i)),oo(o=>o!==!0,!0))}function cT(e,t,n,i){return ai(t).pipe(aa(o=>Wf(uT(o.route.parent,i),dT(o.route,i),hT(e,o.path,n),pT(e,o.route,n))),oo(o=>o!==!0,!0))}function dT(e,t){return e!==null&&t&&t(new Qp(e)),J(!0)}function uT(e,t){return e!==null&&t&&t(new Yp(e)),J(!0)}function pT(e,t,n){let i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||i.length===0)return J(!0);let o=i.map(r=>Eu(()=>{let s=Za(t)??n,a=vs(r,s),l=nT(a)?a.canActivate(t,e):Go(s,()=>a(t,e));return yo(l).pipe(oo())}));return J(o).pipe(ys())}function hT(e,t,n){let i=t[t.length-1],r=t.slice(0,t.length-1).reverse().map(s=>JC(s)).filter(s=>s!==null).map(s=>Eu(()=>{let a=s.guards.map(l=>{let u=Za(s.node)??n,p=vs(l,u),h=oT(p)?p.canActivateChild(i,e):Go(u,()=>p(i,e));return yo(h).pipe(oo())});return J(a).pipe(ys())}));return J(r).pipe(ys())}function mT(e,t,n,i,o){let r=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!r||r.length===0)return J(!0);let s=r.map(a=>{let l=Za(t)??o,u=vs(a,l),p=rT(u)?u.canDeactivate(e,t,n,i):Go(l,()=>u(e,t,n,i));return yo(p).pipe(oo())});return J(s).pipe(ys())}function fT(e,t,n,i){let o=t.canLoad;if(o===void 0||o.length===0)return J(!0);let r=o.map(s=>{let a=vs(s,e),l=iT(a)?a.canLoad(t,n):Go(e,()=>a(t,n));return yo(l)});return J(r).pipe(ys(),Av(i))}function Av(e){return Gf(it(t=>{if(gs(t))throw xv(e,t)}),se(t=>t===!0))}function gT(e,t,n,i){let o=t.canMatch;if(!o||o.length===0)return J(!0);let r=o.map(s=>{let a=vs(s,e),l=sT(a)?a.canMatch(t,n):Go(e,()=>a(t,n));return yo(l)});return J(r).pipe(ys(),Av(i))}var Wa=class{constructor(t){this.segmentGroup=t||null}},Jc=class extends Error{constructor(t){super(),this.urlTree=t}};function us(e){return sa(new Wa(e))}function _T(e){return sa(new we(4e3,!1))}function yT(e){return sa(Iv(!1,yi.GuardRejected))}var rh=class{constructor(t,n){this.urlSerializer=t,this.urlTree=n}lineralizeSegments(t,n){let i=[],o=n.root;for(;;){if(i=i.concat(o.segments),o.numberOfChildren===0)return J(i);if(o.numberOfChildren>1||!o.children[te])return _T(t.redirectTo);o=o.children[te]}}applyRedirectCommands(t,n,i){let o=this.applyRedirectCreateUrlTree(n,this.urlSerializer.parse(n),t,i);if(n.startsWith("/"))throw new Jc(o);return o}applyRedirectCreateUrlTree(t,n,i,o){let r=this.createSegmentGroup(t,n.root,i,o);return new go(r,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(t,n){let i={};return Object.entries(t).forEach(([o,r])=>{if(typeof r=="string"&&r.startsWith(":")){let a=r.substring(1);i[o]=n[a]}else i[o]=r}),i}createSegmentGroup(t,n,i,o){let r=this.createSegments(t,n.segments,i,o),s={};return Object.entries(n.children).forEach(([a,l])=>{s[a]=this.createSegmentGroup(t,l,i,o)}),new fe(r,s)}createSegments(t,n,i,o){return n.map(r=>r.path.startsWith(":")?this.findPosParam(t,r,o):this.findOrReturn(r,i))}findPosParam(t,n,i){let o=i[n.path.substring(1)];if(!o)throw new we(4001,!1);return o}findOrReturn(t,n){let i=0;for(let o of n){if(o.path===t.path)return n.splice(i),o;i++}return t}},sh={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function vT(e,t,n,i,o){let r=fh(e,t,n);return r.matched?(i=ZC(t,i),gT(i,t,n,o).pipe(se(s=>s===!0?r:v({},sh)))):J(r)}function fh(e,t,n){if(t.path==="**")return bT(n);if(t.path==="")return t.pathMatch==="full"&&(e.hasChildren()||n.length>0)?v({},sh):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let o=(t.matcher||fC)(n,e,t);if(!o)return v({},sh);let r={};Object.entries(o.posParams??{}).forEach(([a,l])=>{r[a]=l.path});let s=o.consumed.length>0?v(v({},r),o.consumed[o.consumed.length-1].parameters):r;return{matched:!0,consumedSegments:o.consumed,remainingSegments:n.slice(o.consumed.length),parameters:s,positionalParamSegments:o.posParams??{}}}function bT(e){return{matched:!0,parameters:e.length>0?uv(e).parameters:{},consumedSegments:e,remainingSegments:[],positionalParamSegments:{}}}function cv(e,t,n,i){return n.length>0&&CT(e,n,i)?{segmentGroup:new fe(t,ST(i,new fe(n,e.children))),slicedSegments:[]}:n.length===0&&TT(e,n,i)?{segmentGroup:new fe(e.segments,wT(e,n,i,e.children)),slicedSegments:n}:{segmentGroup:new fe(e.segments,e.children),slicedSegments:n}}function wT(e,t,n,i){let o={};for(let r of n)if(ed(e,t,r)&&!i[yn(r)]){let s=new fe([],{});o[yn(r)]=s}return v(v({},i),o)}function ST(e,t){let n={};n[te]=t;for(let i of e)if(i.path===""&&yn(i)!==te){let o=new fe([],{});n[yn(i)]=o}return n}function CT(e,t,n){return n.some(i=>ed(e,t,i)&&yn(i)!==te)}function TT(e,t,n){return n.some(i=>ed(e,t,i))}function ed(e,t,n){return(e.hasChildren()||t.length>0)&&n.pathMatch==="full"?!1:n.path===""}function MT(e,t,n,i){return yn(e)!==i&&(i===te||!ed(t,n,e))?!1:fh(t,e,n).matched}function DT(e,t,n){return t.length===0&&!e.children[n]}var ah=class{};function ET(e,t,n,i,o,r,s="emptyOnly"){return new lh(e,t,n,i,o,s,r).recognize()}var xT=31,lh=class{constructor(t,n,i,o,r,s,a){this.injector=t,this.configLoader=n,this.rootComponentType=i,this.config=o,this.urlTree=r,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.applyRedirects=new rh(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(t){return new we(4002,`'${t.segmentGroup}'`)}recognize(){let t=cv(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(se(n=>{let i=new Ua([],Object.freeze({}),Object.freeze(v({},this.urlTree.queryParams)),this.urlTree.fragment,{},te,this.rootComponentType,null,{}),o=new _i(i,n),r=new Kc("",o),s=FC(i,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,r.url=this.urlSerializer.serialize(s),this.inheritParamsAndData(r._root,null),{state:r,tree:s}}))}match(t){return this.processSegmentGroup(this.injector,this.config,t,te).pipe(Or(i=>{if(i instanceof Jc)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof Wa?this.noMatchError(i):i}))}inheritParamsAndData(t,n){let i=t.value,o=uh(i,n,this.paramsInheritanceStrategy);i.params=Object.freeze(o.params),i.data=Object.freeze(o.data),t.children.forEach(r=>this.inheritParamsAndData(r,i))}processSegmentGroup(t,n,i,o){return i.segments.length===0&&i.hasChildren()?this.processChildren(t,n,i):this.processSegment(t,n,i,i.segments,o,!0).pipe(se(r=>r instanceof _i?[r]:[]))}processChildren(t,n,i){let o=[];for(let r of Object.keys(i.children))r==="primary"?o.unshift(r):o.push(r);return ai(o).pipe(aa(r=>{let s=i.children[r],a=YC(n,r);return this.processSegmentGroup(t,a,s,r)}),eg((r,s)=>(r.push(...s),r)),xu(null),Xf(),li(r=>{if(r===null)return us(i);let s=Pv(r);return IT(s),J(s)}))}processSegment(t,n,i,o,r,s){return ai(n).pipe(aa(a=>this.processSegmentAgainstRoute(a._injector??t,n,a,i,o,r,s).pipe(Or(l=>{if(l instanceof Wa)return J(null);throw l}))),oo(a=>!!a),Or(a=>{if(kv(a))return DT(i,o,r)?J(new ah):us(i);throw a}))}processSegmentAgainstRoute(t,n,i,o,r,s,a){return MT(i,o,r,s)?i.redirectTo===void 0?this.matchSegmentAgainstRoute(t,o,i,r,s):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,o,n,i,r,s):us(o):us(o)}expandSegmentAgainstRouteUsingRedirect(t,n,i,o,r,s){let{matched:a,consumedSegments:l,positionalParamSegments:u,remainingSegments:p}=fh(n,o,r);if(!a)return us(n);o.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>xT&&(this.allowRedirects=!1));let h=this.applyRedirects.applyRedirectCommands(l,o.redirectTo,u);return this.applyRedirects.lineralizeSegments(o,h).pipe(li(m=>this.processSegment(t,i,n,m.concat(p),s,!1)))}matchSegmentAgainstRoute(t,n,i,o,r){let s=vT(n,i,o,t,this.urlSerializer);return i.path==="**"&&(n.children={}),s.pipe(ji(a=>a.matched?(t=i._injector??t,this.getChildConfig(t,i,o).pipe(ji(({routes:l})=>{let u=i._loadedInjector??t,{consumedSegments:p,remainingSegments:h,parameters:m}=a,f=new Ua(p,m,Object.freeze(v({},this.urlTree.queryParams)),this.urlTree.fragment,kT(i),yn(i),i.component??i._loadedComponent??null,i,AT(i)),{segmentGroup:w,slicedSegments:O}=cv(n,p,h,l);if(O.length===0&&w.hasChildren())return this.processChildren(u,l,w).pipe(se(R=>R===null?null:new _i(f,R)));if(l.length===0&&O.length===0)return J(new _i(f,[]));let N=yn(i)===r;return this.processSegment(u,l,w,O,N?te:r,!0).pipe(se(R=>new _i(f,R instanceof _i?[R]:[])))}))):us(n)))}getChildConfig(t,n,i){return n.children?J({routes:n.children,injector:t}):n.loadChildren?n._loadedRoutes!==void 0?J({routes:n._loadedRoutes,injector:n._loadedInjector}):fT(t,n,i,this.urlSerializer).pipe(li(o=>o?this.configLoader.loadChildren(t,n).pipe(it(r=>{n._loadedRoutes=r.routes,n._loadedInjector=r.injector})):yT(n))):J({routes:[],injector:t})}};function IT(e){e.sort((t,n)=>t.value.outlet===te?-1:n.value.outlet===te?1:t.value.outlet.localeCompare(n.value.outlet))}function OT(e){let t=e.value.routeConfig;return t&&t.path===""}function Pv(e){let t=[],n=new Set;for(let i of e){if(!OT(i)){t.push(i);continue}let o=t.find(r=>i.value.routeConfig===r.value.routeConfig);o!==void 0?(o.children.push(...i.children),n.add(o)):t.push(i)}for(let i of n){let o=Pv(i.children);t.push(new _i(i.value,o))}return t.filter(i=>!n.has(i))}function kT(e){return e.data||{}}function AT(e){return e.resolve||{}}function PT(e,t,n,i,o,r){return li(s=>ET(e,t,n,i,s.extractedUrl,o,r).pipe(se(({state:a,tree:l})=>B(v({},s),{targetSnapshot:a,urlAfterRedirects:l}))))}function FT(e,t){return li(n=>{let{targetSnapshot:i,guards:{canActivateChecks:o}}=n;if(!o.length)return J(n);let r=new Set(o.map(l=>l.route)),s=new Set;for(let l of r)if(!s.has(l))for(let u of Fv(l))s.add(u);let a=0;return ai(s).pipe(aa(l=>r.has(l)?RT(l,i,e,t):(l.data=uh(l,l.parent,e).resolve,J(void 0))),it(()=>a++),Iu(1),li(l=>a===s.size?J(n):kn))})}function Fv(e){let t=e.children.map(n=>Fv(n)).flat();return[e,...t]}function RT(e,t,n,i){let o=e.routeConfig,r=e._resolve;return o?.title!==void 0&&!Dv(o)&&(r[qa]=o.title),LT(r,e,t,i).pipe(se(s=>(e._resolvedData=s,e.data=uh(e,e.parent,n).resolve,null)))}function LT(e,t,n,i){let o=Vp(e);if(o.length===0)return J({});let r={};return ai(o).pipe(li(s=>NT(e[s],t,n,i).pipe(oo(),it(a=>{r[s]=a}))),Iu(1),Qf(r),Or(s=>kv(s)?kn:sa(s)))}function NT(e,t,n,i){let o=Za(t)??i,r=vs(e,o),s=r.resolve?r.resolve(t,n):Go(o,()=>r(t,n));return yo(s)}function Lp(e){return ji(t=>{let n=e(t);return n?ai(n).pipe(se(()=>t)):J(t)})}var Rv=(()=>{let t=class t{buildTitle(i){let o,r=i.root;for(;r!==void 0;)o=this.getResolvedTitleForRoute(r)??o,r=r.children.find(s=>s.outlet===te);return o}getResolvedTitleForRoute(i){return i.data[qa]}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=U({token:t,factory:()=>F(VT),providedIn:"root"});let e=t;return e})(),VT=(()=>{let t=class t extends Rv{constructor(i){super(),this.title=i}updateTitle(i){let o=this.buildTitle(i);o!==void 0&&this.title.setTitle(o)}};t.\u0275fac=function(o){return new(o||t)(Se(ov))},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),gh=new Ie("",{providedIn:"root",factory:()=>({})}),_h=new Ie(""),HT=(()=>{let t=class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=F(Bu)}loadComponent(i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return J(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let o=yo(i.loadComponent()).pipe(se(Lv),it(s=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=s}),la(()=>{this.componentLoaders.delete(i)})),r=new Du(o,()=>new xe).pipe(Mu());return this.componentLoaders.set(i,r),r}loadChildren(i,o){if(this.childrenLoaders.get(o))return this.childrenLoaders.get(o);if(o._loadedRoutes)return J({routes:o._loadedRoutes,injector:o._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(o);let s=BT(o,this.compiler,i,this.onLoadEndListener).pipe(la(()=>{this.childrenLoaders.delete(o)})),a=new Du(s,()=>new xe).pipe(Mu());return this.childrenLoaders.set(o,a),a}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function BT(e,t,n,i){return yo(e.loadChildren()).pipe(se(Lv),li(o=>o instanceof yg||Array.isArray(o)?J(o):ai(t.compileModuleAsync(o))),se(o=>{i&&i(e);let r,s,a=!1;return Array.isArray(o)?(s=o,a=!0):(r=o.create(n).injector,s=r.get(_h,[],{optional:!0,self:!0}).flat()),{routes:s.map(mh),injector:r}}))}function GT(e){return e&&typeof e=="object"&&"default"in e}function Lv(e){return GT(e)?e.default:e}var yh=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=U({token:t,factory:()=>F(jT),providedIn:"root"});let e=t;return e})(),jT=(()=>{let t=class t{shouldProcessUrl(i){return!0}extract(i){return i}merge(i,o){return i}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),zT=new Ie("");var UT=(()=>{let t=class t{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new xe,this.transitionAbortSubject=new xe,this.configLoader=F(HT),this.environmentInjector=F(ua),this.urlSerializer=F(dh),this.rootContexts=F(Xc),this.location=F(ql),this.inputBindingEnabled=F(hh,{optional:!0})!==null,this.titleStrategy=F(Rv),this.options=F(gh,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=F(yh),this.createViewTransition=F(zT,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>J(void 0),this.rootComponentType=null;let i=r=>this.events.next(new qp(r)),o=r=>this.events.next(new Zp(r));this.configLoader.onLoadEndListener=o,this.configLoader.onLoadStartListener=i}complete(){this.transitions?.complete()}handleNavigationRequest(i){let o=++this.navigationId;this.transitions?.next(B(v(v({},this.transitions.value),i),{id:o}))}setupNavigations(i,o,r){return this.transitions=new Ne({id:0,currentUrlTree:o,currentRawUrl:o,extractedUrl:this.urlHandlingStrategy.extract(o),urlAfterRedirects:this.urlHandlingStrategy.extract(o),rawUrl:o,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Na,restoredState:null,currentSnapshot:r.snapshot,targetSnapshot:null,currentRouterState:r,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Tt(s=>s.id!==0),se(s=>B(v({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),ji(s=>{let a=!1,l=!1;return J(s).pipe(ji(u=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",yi.SupersededByNewNavigation),kn;this.currentTransition=s,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?B(v({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let p=!i.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=u.extras.onSameUrlNavigation??i.onSameUrlNavigation;if(!p&&h!=="reload"){let m="";return this.events.next(new Xo(u.id,this.urlSerializer.serialize(u.rawUrl),m,jp.IgnoredSameUrlNavigation)),u.resolve(null),kn}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return J(u).pipe(ji(m=>{let f=this.transitions?.getValue();return this.events.next(new Ba(m.id,this.urlSerializer.serialize(m.extractedUrl),m.source,m.restoredState)),f!==this.transitions?.getValue()?kn:Promise.resolve(m)}),PT(this.environmentInjector,this.configLoader,this.rootComponentType,i.config,this.urlSerializer,this.paramsInheritanceStrategy),it(m=>{s.targetSnapshot=m.targetSnapshot,s.urlAfterRedirects=m.urlAfterRedirects,this.currentNavigation=B(v({},this.currentNavigation),{finalUrl:m.urlAfterRedirects});let f=new qc(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(f)}));if(p&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:m,extractedUrl:f,source:w,restoredState:O,extras:N}=u,R=new Ba(m,this.urlSerializer.serialize(f),w,O);this.events.next(R);let K=Tv(this.rootComponentType).snapshot;return this.currentTransition=s=B(v({},u),{targetSnapshot:K,urlAfterRedirects:f,extras:B(v({},N),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,J(s)}else{let m="";return this.events.next(new Xo(u.id,this.urlSerializer.serialize(u.extractedUrl),m,jp.IgnoredByUrlHandlingStrategy)),u.resolve(null),kn}}),it(u=>{let p=new zp(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(p)}),se(u=>(this.currentTransition=s=B(v({},u),{guards:QC(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),s)),aT(this.environmentInjector,u=>this.events.next(u)),it(u=>{if(s.guardsResult=u.guardsResult,gs(u.guardsResult))throw xv(this.urlSerializer,u.guardsResult);let p=new Up(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(p)}),Tt(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",yi.GuardRejected),!1)),Lp(u=>{if(u.guards.canActivateChecks.length)return J(u).pipe(it(p=>{let h=new $p(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(h)}),ji(p=>{let h=!1;return J(p).pipe(FT(this.paramsInheritanceStrategy,this.environmentInjector),it({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(p,"",yi.NoDataFromResolver)}}))}),it(p=>{let h=new Wp(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(h)}))}),Lp(u=>{let p=h=>{let m=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(h.routeConfig).pipe(it(f=>{h.component=f}),se(()=>{})));for(let f of h.children)m.push(...p(f));return m};return Hl(p(u.targetSnapshot.root)).pipe(xu(null),no(1))}),Lp(()=>this.afterPreactivation()),ji(()=>{let{currentSnapshot:u,targetSnapshot:p}=s,h=this.createViewTransition?.(this.environmentInjector,u.root,p.root);return h?ai(h).pipe(se(()=>s)):J(s)}),se(u=>{let p=zC(i.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=s=B(v({},u),{targetRouterState:p}),this.currentNavigation.targetRouterState=p,s}),it(()=>{this.events.next(new ja)}),KC(this.rootContexts,i.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),no(1),it({next:u=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Jo(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{a=!0}}),tt(this.transitionAbortSubject.pipe(it(u=>{throw u}))),la(()=>{!a&&!l&&this.cancelNavigationTransition(s,"",yi.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),Or(u=>{if(l=!0,Ov(u))this.events.next(new _o(s.id,this.urlSerializer.serialize(s.extractedUrl),u.message,u.cancellationCode)),WC(u)?this.events.next(new za(u.url)):s.resolve(!1);else{this.events.next(new Ga(s.id,this.urlSerializer.serialize(s.extractedUrl),u,s.targetSnapshot??void 0));try{s.resolve(i.errorHandler(u))}catch(p){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(p)}}return kn}))}))}cancelNavigationTransition(i,o,r){let s=new _o(i.id,this.urlSerializer.serialize(i.extractedUrl),o,r);this.events.next(s),i.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function $T(e){return e!==Na}var WT=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=U({token:t,factory:()=>F(qT),providedIn:"root"});let e=t;return e})(),ch=class{shouldDetach(t){return!1}store(t,n){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,n){return t.routeConfig===n.routeConfig}},qT=(()=>{let t=class t extends ch{};t.\u0275fac=(()=>{let i;return function(r){return(i||(i=di(t)))(r||t)}})(),t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),Nv=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=U({token:t,factory:()=>F(ZT),providedIn:"root"});let e=t;return e})(),ZT=(()=>{let t=class t extends Nv{constructor(){super(...arguments),this.location=F(ql),this.urlSerializer=F(dh),this.options=F(gh,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=F(yh),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new go,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Tv(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(i){return this.location.subscribe(o=>{o.type==="popstate"&&i(o.url,o.state)})}handleRouterEvent(i,o){if(i instanceof Ba)this.stateMemento=this.createStateMemento();else if(i instanceof Xo)this.rawUrlTree=o.initialUrl;else if(i instanceof qc){if(this.urlUpdateStrategy==="eager"&&!o.extras.skipLocationChange){let r=this.urlHandlingStrategy.merge(o.finalUrl,o.initialUrl);this.setBrowserUrl(r,o)}}else i instanceof ja?(this.currentUrlTree=o.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(o.finalUrl,o.initialUrl),this.routerState=o.targetRouterState,this.urlUpdateStrategy==="deferred"&&(o.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,o))):i instanceof _o&&(i.code===yi.GuardRejected||i.code===yi.NoDataFromResolver)?this.restoreHistory(o):i instanceof Ga?this.restoreHistory(o,!0):i instanceof Jo&&(this.lastSuccessfulId=i.id,this.currentPageId=this.browserPageId)}setBrowserUrl(i,o){let r=this.urlSerializer.serialize(i);if(this.location.isCurrentPathEqualTo(r)||o.extras.replaceUrl){let s=this.browserPageId,a=v(v({},o.extras.state),this.generateNgRouterState(o.id,s));this.location.replaceState(r,"",a)}else{let s=v(v({},o.extras.state),this.generateNgRouterState(o.id,this.browserPageId+1));this.location.go(r,"",s)}}restoreHistory(i,o=!1){if(this.canceledNavigationResolution==="computed"){let r=this.browserPageId,s=this.currentPageId-r;s!==0?this.location.historyGo(s):this.currentUrlTree===i.finalUrl&&s===0&&(this.resetState(i),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(o&&this.resetState(i),this.resetUrlToCurrentUrlTree())}resetState(i){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,i.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(i,o){return this.canceledNavigationResolution==="computed"?{navigationId:i,\u0275routerPageId:o}:{navigationId:i}}};t.\u0275fac=(()=>{let i;return function(r){return(i||(i=di(t)))(r||t)}})(),t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),Ra=function(e){return e[e.COMPLETE=0]="COMPLETE",e[e.FAILED=1]="FAILED",e[e.REDIRECTING=2]="REDIRECTING",e}(Ra||{});function YT(e,t){e.events.pipe(Tt(n=>n instanceof Jo||n instanceof _o||n instanceof Ga||n instanceof Xo),se(n=>n instanceof Jo||n instanceof Xo?Ra.COMPLETE:(n instanceof _o?n.code===yi.Redirect||n.code===yi.SupersededByNewNavigation:!1)?Ra.REDIRECTING:Ra.FAILED),Tt(n=>n!==Ra.REDIRECTING),no(1)).subscribe(()=>{t()})}function KT(e){throw e}var QT={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},JT={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Vv=(()=>{let t=class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=F($l),this.stateManager=F(Nv),this.options=F(gh,{optional:!0})||{},this.pendingTasks=F(bg),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=F(UT),this.urlSerializer=F(dh),this.location=F(ql),this.urlHandlingStrategy=F(yh),this._events=new xe,this.errorHandler=this.options.errorHandler||KT,this.navigated=!1,this.routeReuseStrategy=F(WT),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=F(_h,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!F(hh,{optional:!0}),this.eventsSubscription=new On,this.isNgZoneEnabled=F(ct)instanceof ct&&ct.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:i=>{this.console.warn(i)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let i=this.navigationTransitions.events.subscribe(o=>{try{let r=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(r!==null&&s!==null){if(this.stateManager.handleRouterEvent(o,s),o instanceof _o&&o.code!==yi.Redirect&&o.code!==yi.SupersededByNewNavigation)this.navigated=!0;else if(o instanceof Jo)this.navigated=!0;else if(o instanceof za){let a=this.urlHandlingStrategy.merge(o.url,r.currentRawUrl),l={info:r.extras.info,skipLocationChange:r.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||$T(r.source)};this.scheduleNavigation(a,Na,null,l,{resolve:r.resolve,reject:r.reject,promise:r.promise})}}eM(o)&&this._events.next(o)}catch(r){this.navigationTransitions.transitionAbortSubject.next(r)}});this.eventsSubscription.add(i)}resetRootComponentType(i){this.routerState.root.component=i,this.navigationTransitions.rootComponentType=i}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Na,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((i,o)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(i,"popstate",o)},0)})}navigateToSyncWithBrowser(i,o,r){let s={replaceUrl:!0},a=r?.navigationId?r:null;if(r){let u=v({},r);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(s.state=u)}let l=this.parseUrl(i);this.scheduleNavigation(l,o,a,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(i){this.config=i.map(mh),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(i,o={}){let{relativeTo:r,queryParams:s,fragment:a,queryParamsHandling:l,preserveFragment:u}=o,p=u?this.currentUrlTree.fragment:a,h=null;switch(l){case"merge":h=v(v({},this.currentUrlTree.queryParams),s);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=s||null}h!==null&&(h=this.removeEmptyProps(h));let m;try{let f=r?r.snapshot:this.routerState.snapshot.root;m=bv(f)}catch{(typeof i[0]!="string"||!i[0].startsWith("/"))&&(i=[]),m=this.currentUrlTree.root}return wv(m,i,h,p??null)}navigateByUrl(i,o={skipLocationChange:!1}){let r=gs(i)?i:this.parseUrl(i),s=this.urlHandlingStrategy.merge(r,this.rawUrlTree);return this.scheduleNavigation(s,Na,null,o)}navigate(i,o={skipLocationChange:!1}){return XT(i),this.navigateByUrl(this.createUrlTree(i,o),o)}serializeUrl(i){return this.urlSerializer.serialize(i)}parseUrl(i){try{return this.urlSerializer.parse(i)}catch{return this.urlSerializer.parse("/")}}isActive(i,o){let r;if(o===!0?r=v({},QT):o===!1?r=v({},JT):r=o,gs(i))return rv(this.currentUrlTree,i,r);let s=this.parseUrl(i);return rv(this.currentUrlTree,s,r)}removeEmptyProps(i){return Object.entries(i).reduce((o,[r,s])=>(s!=null&&(o[r]=s),o),{})}scheduleNavigation(i,o,r,s,a){if(this.disposed)return Promise.resolve(!1);let l,u,p;a?(l=a.resolve,u=a.reject,p=a.promise):p=new Promise((m,f)=>{l=m,u=f});let h=this.pendingTasks.add();return YT(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:o,restoredState:r,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:i,extras:s,resolve:l,reject:u,promise:p,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),p.catch(m=>Promise.reject(m))}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function XT(e){for(let t=0;t<e.length;t++)if(e[t]==null)throw new we(4008,!1)}function eM(e){return!(e instanceof ja)&&!(e instanceof za)}var tM=new Ie("");function Hv(e,...t){return ro([{provide:_h,multi:!0,useValue:e},[],{provide:_s,useFactory:iM,deps:[Vv]},{provide:xg,multi:!0,useFactory:nM},t.map(n=>n.\u0275providers)])}function iM(e){return e.routerState.root}function nM(){let e=F(cn);return t=>{let n=e.get(ao);if(t!==n.components[0])return;let i=e.get(Vv),o=e.get(oM);e.get(rM)===1&&i.initialNavigation(),e.get(sM,null,Ou.Optional)?.setUpPreloading(),e.get(tM,null,Ou.Optional)?.init(),i.resetRootComponentType(n.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}var oM=new Ie("",{factory:()=>new xe}),rM=new Ie("",{providedIn:"root",factory:()=>1});var sM=new Ie("");var Bv=[];var aM="@",lM=(()=>{let t=class t{constructor(i,o,r,s,a){this.doc=i,this.delegate=o,this.zone=r,this.animationType=s,this.moduleImpl=a,this._rendererFactoryPromise=null,this.scheduler=F(fg,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){return(this.moduleImpl??import("./chunk-H53KDFSS.js")).catch(o=>{throw new we(5300,!1)}).then(({\u0275createEngine:o,\u0275AnimationRendererFactory:r})=>{this._engine=o(this.animationType,this.doc,this.scheduler);let s=new r(this.delegate,this._engine,this.zone);return this.delegate=s,s})}createRenderer(i,o){let r=this.delegate.createRenderer(i,o);if(r.\u0275type===0)return r;typeof r.throwOnSyntheticProps=="boolean"&&(r.throwOnSyntheticProps=!1);let s=new vh(r);return o?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(a=>{let l=a.createRenderer(i,o);s.use(l)}).catch(a=>{s.use(r)}),s}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}};t.\u0275fac=function(o){Fu()},t.\u0275prov=U({token:t,factory:t.\u0275fac});let e=t;return e})(),vh=class{constructor(t){this.delegate=t,this.replay=[],this.\u0275type=1}use(t){if(this.delegate=t,this.replay!==null){for(let n of this.replay)n(t);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(t,n){return this.delegate.createElement(t,n)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}get destroyNode(){return this.delegate.destroyNode}appendChild(t,n){this.delegate.appendChild(t,n)}insertBefore(t,n,i,o){this.delegate.insertBefore(t,n,i,o)}removeChild(t,n,i){this.delegate.removeChild(t,n,i)}selectRootElement(t,n){return this.delegate.selectRootElement(t,n)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,n,i,o){this.delegate.setAttribute(t,n,i,o)}removeAttribute(t,n,i){this.delegate.removeAttribute(t,n,i)}addClass(t,n){this.delegate.addClass(t,n)}removeClass(t,n){this.delegate.removeClass(t,n)}setStyle(t,n,i,o){this.delegate.setStyle(t,n,i,o)}removeStyle(t,n,i){this.delegate.removeStyle(t,n,i)}setProperty(t,n,i){this.shouldReplay(n)&&this.replay.push(o=>o.setProperty(t,n,i)),this.delegate.setProperty(t,n,i)}setValue(t,n){this.delegate.setValue(t,n)}listen(t,n,i){return this.shouldReplay(n)&&this.replay.push(o=>o.listen(t,n,i)),this.delegate.listen(t,n,i)}shouldReplay(t){return this.replay!==null&&t.startsWith(aM)}};function Gv(e="animations"){return _g("NgAsyncAnimations"),ro([{provide:zl,useFactory:(t,n,i)=>new lM(t,n,i,e),deps:[Je,Nc,ct]},{provide:sg,useValue:e==="noop"?"NoopAnimations":"BrowserAnimations"}])}var jv=["toast-component",""];function cM(e,t){if(e&1){let n=oe();_(0,"button",5),x("click",function(){A(n);let o=T();return P(o.remove())}),_(1,"span",6),L(2,"\xD7"),y()()}}function dM(e,t){if(e&1&&(Lr(0),L(1),Nr()),e&2){let n=T(2);g(),yt("[",n.duplicatesCount+1,"]")}}function uM(e,t){if(e&1&&(_(0,"div"),L(1),G(2,dM,2,1,"ng-container",4),y()),e&2){let n=T();Si(n.options.titleClass),At("aria-label",n.title),g(),yt(" ",n.title," "),g(),C("ngIf",n.duplicatesCount)}}function pM(e,t){if(e&1&&V(0,"div",7),e&2){let n=T();Si(n.options.messageClass),C("innerHTML",n.message,ha)}}function hM(e,t){if(e&1&&(_(0,"div",8),L(1),y()),e&2){let n=T();Si(n.options.messageClass),At("aria-label",n.message),g(),yt(" ",n.message," ")}}function mM(e,t){if(e&1&&(_(0,"div"),V(1,"div",9),y()),e&2){let n=T();g(),wi("width",n.width()+"%")}}function fM(e,t){if(e&1){let n=oe();_(0,"button",5),x("click",function(){A(n);let o=T();return P(o.remove())}),_(1,"span",6),L(2,"\xD7"),y()()}}function gM(e,t){if(e&1&&(Lr(0),L(1),Nr()),e&2){let n=T(2);g(),yt("[",n.duplicatesCount+1,"]")}}function _M(e,t){if(e&1&&(_(0,"div"),L(1),G(2,gM,2,1,"ng-container",4),y()),e&2){let n=T();Si(n.options.titleClass),At("aria-label",n.title),g(),yt(" ",n.title," "),g(),C("ngIf",n.duplicatesCount)}}function yM(e,t){if(e&1&&V(0,"div",7),e&2){let n=T();Si(n.options.messageClass),C("innerHTML",n.message,ha)}}function vM(e,t){if(e&1&&(_(0,"div",8),L(1),y()),e&2){let n=T();Si(n.options.messageClass),At("aria-label",n.message),g(),yt(" ",n.message," ")}}function bM(e,t){if(e&1&&(_(0,"div"),V(1,"div",9),y()),e&2){let n=T();g(),wi("width",n.width()+"%")}}var bh=class{_attachedHost;component;viewContainerRef;injector;constructor(t,n){this.component=t,this.injector=n}attach(t,n){return this._attachedHost=t,t.attach(this,n)}detach(){let t=this._attachedHost;if(t)return this._attachedHost=void 0,t.detach()}get isAttached(){return this._attachedHost!=null}setAttachedHost(t){this._attachedHost=t}},wh=class{_attachedPortal;_disposeFn;attach(t,n){return this._attachedPortal=t,this.attachComponentPortal(t,n)}detach(){this._attachedPortal&&this._attachedPortal.setAttachedHost(),this._attachedPortal=void 0,this._disposeFn&&(this._disposeFn(),this._disposeFn=void 0)}setDisposeFn(t){this._disposeFn=t}},Sh=class{_overlayRef;componentInstance;duplicatesCount=0;_afterClosed=new xe;_activate=new xe;_manualClose=new xe;_resetTimeout=new xe;_countDuplicate=new xe;constructor(t){this._overlayRef=t}manualClose(){this._manualClose.next(),this._manualClose.complete()}manualClosed(){return this._manualClose.asObservable()}timeoutReset(){return this._resetTimeout.asObservable()}countDuplicate(){return this._countDuplicate.asObservable()}close(){this._overlayRef.detach(),this._afterClosed.next(),this._manualClose.next(),this._afterClosed.complete(),this._manualClose.complete(),this._activate.complete(),this._resetTimeout.complete(),this._countDuplicate.complete()}afterClosed(){return this._afterClosed.asObservable()}isInactive(){return this._activate.isStopped}activate(){this._activate.next(),this._activate.complete()}afterActivate(){return this._activate.asObservable()}onDuplicate(t,n){t&&this._resetTimeout.next(),n&&this._countDuplicate.next(++this.duplicatesCount)}},bs=class{toastId;config;message;title;toastType;toastRef;_onTap=new xe;_onAction=new xe;constructor(t,n,i,o,r,s){this.toastId=t,this.config=n,this.message=i,this.title=o,this.toastType=r,this.toastRef=s,this.toastRef.afterClosed().subscribe(()=>{this._onAction.complete(),this._onTap.complete()})}triggerTap(){this._onTap.next(),this.config.tapToDismiss&&this._onTap.complete()}onTap(){return this._onTap.asObservable()}triggerAction(t){this._onAction.next(t)}onAction(){return this._onAction.asObservable()}},zv={maxOpened:0,autoDismiss:!1,newestOnTop:!0,preventDuplicates:!1,countDuplicates:!1,resetTimeoutOnDuplicate:!1,includeTitleDuplicates:!1,iconClasses:{error:"toast-error",info:"toast-info",success:"toast-success",warning:"toast-warning"},closeButton:!1,disableTimeOut:!1,timeOut:5e3,extendedTimeOut:1e3,enableHtml:!1,progressBar:!1,toastClass:"ngx-toastr",positionClass:"toast-top-right",titleClass:"toast-title",messageClass:"toast-message",easing:"ease-in",easeTime:300,tapToDismiss:!0,onActivateTick:!1,progressAnimation:"decreasing"},Uv=new Ie("ToastConfig"),Ch=class extends wh{_hostDomElement;_componentFactoryResolver;_appRef;constructor(t,n,i){super(),this._hostDomElement=t,this._componentFactoryResolver=n,this._appRef=i}attachComponentPortal(t,n){let i=this._componentFactoryResolver.resolveComponentFactory(t.component),o;return o=i.create(t.injector),this._appRef.attachView(o.hostView),this.setDisposeFn(()=>{this._appRef.detachView(o.hostView),o.destroy()}),n?this._hostDomElement.insertBefore(this._getComponentRootNode(o),this._hostDomElement.firstChild):this._hostDomElement.appendChild(this._getComponentRootNode(o)),o}_getComponentRootNode(t){return t.hostView.rootNodes[0]}},wM=(()=>{class e{_document=F(Je);_containerElement;ngOnDestroy(){this._containerElement&&this._containerElement.parentNode&&this._containerElement.parentNode.removeChild(this._containerElement)}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let n=this._document.createElement("div");n.classList.add("overlay-container"),n.setAttribute("aria-live","polite"),this._document.body.appendChild(n),this._containerElement=n}static \u0275fac=function(i){return new(i||e)};static \u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),Th=class{_portalHost;constructor(t){this._portalHost=t}attach(t,n=!0){return this._portalHost.attach(t,n)}detach(){return this._portalHost.detach()}},SM=(()=>{class e{_overlayContainer=F(wM);_componentFactoryResolver=F(gg);_appRef=F(ao);_document=F(Je);_paneElements=new Map;create(n,i){return this._createOverlayRef(this.getPaneElement(n,i))}getPaneElement(n="",i){return this._paneElements.get(i)||this._paneElements.set(i,{}),this._paneElements.get(i)[n]||(this._paneElements.get(i)[n]=this._createPaneElement(n,i)),this._paneElements.get(i)[n]}_createPaneElement(n,i){let o=this._document.createElement("div");return o.id="toast-container",o.classList.add(n),o.classList.add("toast-container"),i?i.getContainerElement().appendChild(o):this._overlayContainer.getContainerElement().appendChild(o),o}_createPortalHost(n){return new Ch(n,this._componentFactoryResolver,this._appRef)}_createOverlayRef(n){return new Th(this._createPortalHost(n))}static \u0275fac=function(i){return new(i||e)};static \u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),td=(()=>{class e{overlay;_injector;sanitizer;ngZone;toastrConfig;currentlyActive=0;toasts=[];overlayContainer;previousToastMessage;index=0;constructor(n,i,o,r,s){this.overlay=i,this._injector=o,this.sanitizer=r,this.ngZone=s,this.toastrConfig=v(v({},n.default),n.config),n.config.iconClasses&&(this.toastrConfig.iconClasses=v(v({},n.default.iconClasses),n.config.iconClasses))}show(n,i,o={},r=""){return this._preBuildNotification(r,n,i,this.applyConfig(o))}success(n,i,o={}){let r=this.toastrConfig.iconClasses.success||"";return this._preBuildNotification(r,n,i,this.applyConfig(o))}error(n,i,o={}){let r=this.toastrConfig.iconClasses.error||"";return this._preBuildNotification(r,n,i,this.applyConfig(o))}info(n,i,o={}){let r=this.toastrConfig.iconClasses.info||"";return this._preBuildNotification(r,n,i,this.applyConfig(o))}warning(n,i,o={}){let r=this.toastrConfig.iconClasses.warning||"";return this._preBuildNotification(r,n,i,this.applyConfig(o))}clear(n){for(let i of this.toasts)if(n!==void 0){if(i.toastId===n){i.toastRef.manualClose();return}}else i.toastRef.manualClose()}remove(n){let i=this._findToast(n);if(!i||(i.activeToast.toastRef.close(),this.toasts.splice(i.index,1),this.currentlyActive=this.currentlyActive-1,!this.toastrConfig.maxOpened||!this.toasts.length))return!1;if(this.currentlyActive<this.toastrConfig.maxOpened&&this.toasts[this.currentlyActive]){let o=this.toasts[this.currentlyActive].toastRef;o.isInactive()||(this.currentlyActive=this.currentlyActive+1,o.activate())}return!0}findDuplicate(n="",i="",o,r){let{includeTitleDuplicates:s}=this.toastrConfig;for(let a of this.toasts){let l=s&&a.title===n;if((!s||l)&&a.message===i)return a.toastRef.onDuplicate(o,r),a}return null}applyConfig(n={}){return v(v({},this.toastrConfig),n)}_findToast(n){for(let i=0;i<this.toasts.length;i++)if(this.toasts[i].toastId===n)return{index:i,activeToast:this.toasts[i]};return null}_preBuildNotification(n,i,o,r){return r.onActivateTick?this.ngZone.run(()=>this._buildNotification(n,i,o,r)):this._buildNotification(n,i,o,r)}_buildNotification(n,i,o,r){if(!r.toastComponent)throw new Error("toastComponent required");let s=this.findDuplicate(o,i,this.toastrConfig.resetTimeoutOnDuplicate&&r.timeOut>0,this.toastrConfig.countDuplicates);if((this.toastrConfig.includeTitleDuplicates&&o||i)&&this.toastrConfig.preventDuplicates&&s!==null)return s;this.previousToastMessage=i;let a=!1;this.toastrConfig.maxOpened&&this.currentlyActive>=this.toastrConfig.maxOpened&&(a=!0,this.toastrConfig.autoDismiss&&this.clear(this.toasts[0].toastId));let l=this.overlay.create(r.positionClass,this.overlayContainer);this.index=this.index+1;let u=i;i&&r.enableHtml&&(u=this.sanitizer.sanitize(An.HTML,i));let p=new Sh(l),h=new bs(this.index,r,u,o,n,p),m=[{provide:bs,useValue:h}],f=cn.create({providers:m,parent:this._injector}),w=new bh(r.toastComponent,f),O=l.attach(w,r.newestOnTop);p.componentInstance=O.instance;let N={toastId:this.index,title:o||"",message:i||"",toastRef:p,onShown:p.afterActivate(),onHidden:p.afterClosed(),onTap:h.onTap(),onAction:h.onAction(),portal:O};return a||(this.currentlyActive=this.currentlyActive+1,setTimeout(()=>{N.toastRef.activate()})),this.toasts.push(N),N}static \u0275fac=function(i){return new(i||e)(Se(Uv),Se(SM),Se(cn),Se(Aa),Se(ct))};static \u0275prov=U({token:e,factory:e.\u0275fac,providedIn:"root"})}return e})(),CM=(()=>{class e{toastrService;toastPackage;ngZone;message;title;options;duplicatesCount;originalTimeout;width=Rr(-1);toastClasses="";state;get _state(){return this.state()}get displayStyle(){if(this.state().value==="inactive")return"none"}timeout;intervalId;hideTime;sub;sub1;sub2;sub3;constructor(n,i,o){this.toastrService=n,this.toastPackage=i,this.ngZone=o,this.message=i.message,this.title=i.title,this.options=i.config,this.originalTimeout=i.config.timeOut,this.toastClasses=`${i.toastType} ${i.config.toastClass}`,this.sub=i.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=i.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=i.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=i.toastRef.countDuplicate().subscribe(r=>{this.duplicatesCount=r}),this.state=Rr({value:"inactive",params:{easeTime:this.toastPackage.config.easeTime,easing:"ease-in"}})}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state.update(n=>B(v({},n),{value:"active"})),!(this.options.disableTimeOut===!0||this.options.disableTimeOut==="timeOut")&&this.options.timeOut&&(this.outsideTimeout(()=>this.remove(),this.options.timeOut),this.hideTime=new Date().getTime()+this.options.timeOut,this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}updateProgress(){if(this.width()===0||this.width()===100||!this.options.timeOut)return;let n=new Date().getTime(),i=this.hideTime-n;this.width.set(i/this.options.timeOut*100),this.options.progressAnimation==="increasing"&&this.width.update(o=>100-o),this.width()<=0&&this.width.set(0),this.width()>=100&&this.width.set(100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state.update(n=>B(v({},n),{value:"active"})),this.outsideTimeout(()=>this.remove(),this.originalTimeout),this.options.timeOut=this.originalTimeout,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width.set(-1),this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10)}remove(){this.state().value!=="removed"&&(clearTimeout(this.timeout),this.state.update(n=>B(v({},n),{value:"removed"})),this.outsideTimeout(()=>this.toastrService.remove(this.toastPackage.toastId),+this.toastPackage.config.easeTime))}tapToast(){this.state().value!=="removed"&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){this.state().value!=="removed"&&this.options.disableTimeOut!=="extendedTimeOut"&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width.set(0))}delayedHideToast(){this.options.disableTimeOut===!0||this.options.disableTimeOut==="extendedTimeOut"||this.options.extendedTimeOut===0||this.state().value==="removed"||(this.outsideTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width.set(-1),this.options.progressBar&&this.outsideInterval(()=>this.updateProgress(),10))}outsideTimeout(n,i){this.ngZone?this.ngZone.runOutsideAngular(()=>this.timeout=setTimeout(()=>this.runInsideAngular(n),i)):this.timeout=setTimeout(()=>n(),i)}outsideInterval(n,i){this.ngZone?this.ngZone.runOutsideAngular(()=>this.intervalId=setInterval(()=>this.runInsideAngular(n),i)):this.intervalId=setInterval(()=>n(),i)}runInsideAngular(n){this.ngZone?this.ngZone.run(()=>n()):n()}static \u0275fac=function(i){return new(i||e)(H(td),H(bs),H(ct))};static \u0275cmp=ee({type:e,selectors:[["","toast-component",""]],hostVars:5,hostBindings:function(i,o){i&1&&x("click",function(){return o.tapToast()})("mouseenter",function(){return o.stickAround()})("mouseleave",function(){return o.delayedHideToast()}),i&2&&(Cg("@flyInOut",o._state),Si(o.toastClasses),wi("display",o.displayStyle))},standalone:!0,features:[ae],attrs:jv,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(i,o){i&1&&G(0,cM,3,0,"button",0)(1,uM,3,5,"div",1)(2,pM,1,3,"div",2)(3,hM,2,4,"div",3)(4,mM,2,2,"div",4),i&2&&(C("ngIf",o.options.closeButton),g(),C("ngIf",o.title),g(),C("ngIf",o.message&&o.options.enableHtml),g(),C("ngIf",o.message&&!o.options.enableHtml),g(),C("ngIf",o.options.progressBar))},dependencies:[$i],encapsulation:2,data:{animation:[Zl("flyInOut",[$r("inactive",co({opacity:0})),$r("active",co({opacity:1})),$r("removed",co({opacity:0})),Wr("inactive => active",Ur("{{ easeTime }}ms {{ easing }}")),Wr("active => removed",Ur("{{ easeTime }}ms {{ easing }}"))])]},changeDetection:0})}return e})(),TM=B(v({},zv),{toastComponent:CM}),Mh=(e={})=>ro([{provide:Uv,useValue:{default:TM,config:e}}]),$v=(()=>{class e{static forRoot(n={}){return{ngModule:e,providers:[Mh(n)]}}static \u0275fac=function(i){return new(i||e)};static \u0275mod=Bt({type:e});static \u0275inj=Ht({})}return e})();var MM=(()=>{class e{toastrService;toastPackage;appRef;message;title;options;duplicatesCount;originalTimeout;width=Rr(-1);toastClasses="";get displayStyle(){return this.state()==="inactive"?"none":null}state=Rr("inactive");timeout;intervalId;hideTime;sub;sub1;sub2;sub3;constructor(n,i,o){this.toastrService=n,this.toastPackage=i,this.appRef=o,this.message=i.message,this.title=i.title,this.options=i.config,this.originalTimeout=i.config.timeOut,this.toastClasses=`${i.toastType} ${i.config.toastClass}`,this.sub=i.toastRef.afterActivate().subscribe(()=>{this.activateToast()}),this.sub1=i.toastRef.manualClosed().subscribe(()=>{this.remove()}),this.sub2=i.toastRef.timeoutReset().subscribe(()=>{this.resetTimeout()}),this.sub3=i.toastRef.countDuplicate().subscribe(r=>{this.duplicatesCount=r})}ngOnDestroy(){this.sub.unsubscribe(),this.sub1.unsubscribe(),this.sub2.unsubscribe(),this.sub3.unsubscribe(),clearInterval(this.intervalId),clearTimeout(this.timeout)}activateToast(){this.state.set("active"),!(this.options.disableTimeOut===!0||this.options.disableTimeOut==="timeOut")&&this.options.timeOut&&(this.timeout=setTimeout(()=>{this.remove()},this.options.timeOut),this.hideTime=new Date().getTime()+this.options.timeOut,this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))),this.options.onActivateTick&&this.appRef.tick()}updateProgress(){if(this.width()===0||this.width()===100||!this.options.timeOut)return;let n=new Date().getTime(),i=this.hideTime-n;this.width.set(i/this.options.timeOut*100),this.options.progressAnimation==="increasing"&&this.width.update(o=>100-o),this.width()<=0&&this.width.set(0),this.width()>=100&&this.width.set(100)}resetTimeout(){clearTimeout(this.timeout),clearInterval(this.intervalId),this.state.set("active"),this.options.timeOut=this.originalTimeout,this.timeout=setTimeout(()=>this.remove(),this.originalTimeout),this.hideTime=new Date().getTime()+(this.originalTimeout||0),this.width.set(-1),this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10))}remove(){this.state()!=="removed"&&(clearTimeout(this.timeout),this.state.set("removed"),this.timeout=setTimeout(()=>this.toastrService.remove(this.toastPackage.toastId)))}tapToast(){this.state()!=="removed"&&(this.toastPackage.triggerTap(),this.options.tapToDismiss&&this.remove())}stickAround(){this.state()!=="removed"&&(clearTimeout(this.timeout),this.options.timeOut=0,this.hideTime=0,clearInterval(this.intervalId),this.width.set(0))}delayedHideToast(){this.options.disableTimeOut===!0||this.options.disableTimeOut==="extendedTimeOut"||this.options.extendedTimeOut===0||this.state()==="removed"||(this.timeout=setTimeout(()=>this.remove(),this.options.extendedTimeOut),this.options.timeOut=this.options.extendedTimeOut,this.hideTime=new Date().getTime()+(this.options.timeOut||0),this.width.set(-1),this.options.progressBar&&(this.intervalId=setInterval(()=>this.updateProgress(),10)))}static \u0275fac=function(i){return new(i||e)(H(td),H(bs),H(ao))};static \u0275cmp=ee({type:e,selectors:[["","toast-component",""]],hostVars:4,hostBindings:function(i,o){i&1&&x("click",function(){return o.tapToast()})("mouseenter",function(){return o.stickAround()})("mouseleave",function(){return o.delayedHideToast()}),i&2&&(Si(o.toastClasses),wi("display",o.displayStyle))},standalone:!0,features:[ae],attrs:jv,decls:5,vars:5,consts:[["type","button","class","toast-close-button","aria-label","Close",3,"click",4,"ngIf"],[3,"class",4,"ngIf"],["role","alert",3,"class","innerHTML",4,"ngIf"],["role","alert",3,"class",4,"ngIf"],[4,"ngIf"],["type","button","aria-label","Close",1,"toast-close-button",3,"click"],["aria-hidden","true"],["role","alert",3,"innerHTML"],["role","alert"],[1,"toast-progress"]],template:function(i,o){i&1&&G(0,fM,3,0,"button",0)(1,_M,3,5,"div",1)(2,yM,1,3,"div",2)(3,vM,2,4,"div",3)(4,bM,2,2,"div",4),i&2&&(C("ngIf",o.options.closeButton),g(),C("ngIf",o.title),g(),C("ngIf",o.message&&o.options.enableHtml),g(),C("ngIf",o.message&&!o.options.enableHtml),g(),C("ngIf",o.options.progressBar))},dependencies:[$i],encapsulation:2,changeDetection:0})}return e})(),fP=B(v({},zv),{toastComponent:MM});var Wv={providers:[Hv(Bv),Gv(),Mh({timeOut:3e3,positionClass:"toast-bottom-full-width",progressBar:!0})]};var Dh,Ka=Dh=class extends Jr{constructor(e){super(e),this.type="none"}clone(){return new Dh({type:this.type})}};c([W_({none:"none",stayAbove:"stay-above"})],Ka.prototype,"type",void 0),Ka=Dh=c([b("esri.ground.NavigationConstraint")],Ka);var Eh,Ln=Eh=class extends Qg(wa){constructor(e){super(e),this.opacity=1,this.surfaceColor=null,this.navigationConstraint=null,this.layers=new W;let t=i=>{i.parent&&i.parent!==this&&"remove"in i.parent&&i.parent.remove(i),i.parent=this,i.type!=="elevation"&&i.type!=="base-elevation"&&q.getLogger(this).error(`Layer '${i.title}, id:${i.id}' of type '${i.type}' is not supported as a ground layer and will therefore be ignored. Only layers of type 'elevation' are supported.`)},n=i=>{i.parent=null};this.addHandles([this.layers.on("after-add",i=>t(i.item)),this.layers.on("after-remove",i=>n(i.item))])}initialize(){this.when().catch(e=>{Qr(e)||q.getLogger(this).error("#load()","Failed to load ground",e)}),this.resourceInfo&&this.read(this.resourceInfo.data,this.resourceInfo.context)}destroy(){let e=this.layers.removeAll();for(let t of e)re(t);this.layers.destroy()}normalizeCtorArgs(e){return e&&"resourceInfo"in e&&(this._set("resourceInfo",e.resourceInfo),delete(e=v({},e)).resourceInfo),e}set layers(e){this._set("layers",ec(e,this._get("layers")))}writeLayers(e,t,n,i){let o=[];e&&(i=B(v({},i),{layerContainerType:"ground"}),e.forEach(r=>{if("write"in r){let s={};dy(r)().write(s,i)&&o.push(s)}else i?.messages&&i.messages.push(new ne("layer:unsupported",`Layers (${r.title}, ${r.id}) of type '${r.declaredClass}' cannot be persisted in the ground`,{layer:r}))})),t.layers=o}load(e){return this.addResolvingPromise(this._loadFromSource(e)),Promise.resolve(this)}loadAll(){return d_(this,e=>{e(this.layers)})}queryElevation(e,t){return D(this,null,function*(){yield this.load({signal:t?.signal});let{ElevationQuery:n}=yield import("./chunk-HCL2JNKQ.js");nt(t);let i=new n,o=this.layers.filter(qv).toArray();return i.queryAll(o,e,t)})}createElevationSampler(e,t){return D(this,null,function*(){yield this.load({signal:t?.signal});let{ElevationQuery:n}=yield import("./chunk-HCL2JNKQ.js");nt(t);let i=new n,o=this.layers.filter(qv).toArray();return i.createSamplerAll(o,e,t)})}clone(){let e={opacity:this.opacity,surfaceColor:ya(this.surfaceColor),navigationConstraint:ya(this.navigationConstraint),layers:this.layers.slice()};return this.loaded&&(e.loadStatus="loaded"),new Eh({resourceInfo:this.resourceInfo}).set(e)}read(e,t){this.resourceInfo||this._set("resourceInfo",{data:e,context:t}),super.read(e,t)}_loadFromSource(e){let t=this.resourceInfo;return t?this._loadLayersFromJSON(t.data,t.context,e):Promise.resolve()}_loadLayersFromJSON(e,t,n){return D(this,null,function*(){let i=t?.origin||"web-scene",o=t?.portal||null,r=t?.url||null,{populateOperationalLayers:s}=yield import("./chunk-YIXLGUMW.js");nt(n);let a=[];if(e.layers&&Array.isArray(e.layers)){let l={context:{origin:i,url:r,portal:o,layerContainerType:"ground"},defaultLayerType:"ArcGISTiledElevationServiceLayer"};a.push(s(this.layers,e.layers,l))}yield Promise.allSettled(a)})}};function EM(e){return e&&"createElevationSampler"in e}function qv(e){return e.type==="elevation"||EM(e)}c([d({json:{read:!1}})],Ln.prototype,"layers",null),c([u_("layers")],Ln.prototype,"writeLayers",null),c([d({readOnly:!0})],Ln.prototype,"resourceInfo",void 0),c([d({type:Number,nonNullable:!0,range:{min:0,max:1},json:{type:$u,read:{reader:Dy,source:"transparency"},write:{writer:(e,t)=>{t.transparency=My(e)},target:"transparency"}}})],Ln.prototype,"opacity",void 0),c([d({type:mn,json:{type:[$u],write:(e,t)=>{t.surfaceColor=e.toJSON().slice(0,3)}}})],Ln.prototype,"surfaceColor",void 0),c([d({type:Ka,json:{write:!0}})],Ln.prototype,"navigationConstraint",void 0),Ln=Eh=c([b("esri.Ground")],Ln);var ws=Ln;var id=new WeakMap;function xh(e){return!e.destroyed&&(id.has(e)||e.addHandles([I(()=>{let t=e.parent;return!(!t||!("type"in t))&&(t.type==="catalog-dynamic-group"||xh(t))},t=>id.set(e,t),ke),Yt(()=>id.delete(e))]),id.get(e))}function xM(e){return typeof e=="object"&&e!=null&&"loaded"in e&&e.loaded===!0&&"type"in e}function Zv(e){return!(!xM(e)||!j_(e)?.operations?.supportsEditing||"editingEnabled"in e&&!z_(e)||xh(e))}var Yv={"world-elevation":{id:"worldElevation",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/Terrain3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"},"world-topobathymetry":{id:"worldTopoBathymetry",url:"//elevation3d.arcgis.com/arcgis/rest/services/WorldElevation3D/TopoBathy3D/ImageServer",layerType:"ArcGISTiledElevationServiceLayer"}};function Kv(e){let t=null;if(typeof e=="string")if(e in Yv){let n=Yv[e];t=new ws({resourceInfo:{data:{layers:[n]}}})}else q.getLogger("esri.support.groundUtils").warn(`Unable to find ground definition for: ${e}. Try "world-elevation"`);else t=Kg(ws,e);return t}var Qi=class extends Gy(By(Be.EventedMixin(k))){constructor(e){super(e),this.allLayers=new Yo({getCollections:()=>[this.basemap?.baseLayers,this.ground?.layers,this.layers,this.basemap?.referenceLayers],getChildrenFunction:t=>"layers"in t?t.layers:null}),this.allTables=Hy(this),this.basemap=null,this.editableLayers=new Yo({getCollections:()=>[this.allLayers],itemFilterFunction:Zv}),this.ground=new ws,this._basemapCache=q_()}destroy(){Z_(this._basemapCache),this._basemapCache=null,this.allLayers.destroy(),this.allTables.destroy(),this.editableLayers.destroy(),this.basemap=re(this.basemap),re(this.ground),this._set("ground",null)}castBasemap(e){return Y_(e,this._basemapCache)}castGround(e){return Kv(e)??this._get("ground")}findLayerById(e){return this.allLayers.find(t=>t.id===e)}findTableById(e){return this.allTables.find(t=>t.id===e)}};c([d({readOnly:!0,dependsOn:[]})],Qi.prototype,"allLayers",void 0),c([d({readOnly:!0})],Qi.prototype,"allTables",void 0),c([d({type:$y,json:{read:{source:"baseMap"},write:{target:"baseMap"}}})],Qi.prototype,"basemap",void 0),c([hi("basemap")],Qi.prototype,"castBasemap",null),c([d({readOnly:!0})],Qi.prototype,"editableLayers",void 0),c([d({type:ws,nonNullable:!0})],Qi.prototype,"ground",void 0),c([hi("ground")],Qi.prototype,"castGround",null),c([d()],Qi.prototype,"undoRedo",void 0),Qi=c([b("esri.Map")],Qi);var nd=Qi;var od={widthBreakpoint:{getValue(e){let t=e.viewSize[0],n=e.breakpoints,i=this.values;return t<=n.xsmall?i.xsmall:t<=n.small?i.small:t<=n.medium?i.medium:t<=n.large?i.large:i.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(e){let t=e.viewSize[1],n=e.breakpoints,i=this.values;return t<=n.xsmall?i.xsmall:t<=n.small?i.small:t<=n.medium?i.medium:t<=n.large?i.large:i.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(e){let t=e.viewSize,n=t[0],i=t[1],o=this.values;return i>=n?o.portrait:o.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},Ih={xsmall:544,small:768,medium:992,large:1200};function IM(e){let t=e;return t&&t.xsmall<t.small&&t.small<t.medium&&t.medium<t.large}function Oh(e,t){return t?od[e].valueToClassName[t].split(" "):[]}var Qv=e=>{let t=class extends e{constructor(...n){super(...n),this.orientation=null,this.widthBreakpoint=null,this.heightBreakpoint=null,this.breakpoints=Ih}initialize(){this.addHandles(I(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),ie))}destroy(){this.destroyed||this._removeActiveClassNames()}set breakpoints(n){if(n!==this._get("breakpoints")){if(!IM(n)){let i=JSON.stringify(Ih,null,2);console.warn("provided breakpoints are not valid, using defaults:"+i),n=Ih}this._set("breakpoints",v({},n))}}_updateClassNames(){if(!this.container)return;let n=va.acquire(),i=va.acquire(),o,r=!1;for(o in od){let s=this[o],a=od[o].getValue({viewSize:this.size,breakpoints:this.breakpoints});s!==a&&(r=!0,this[o]=a,Oh(o,s).forEach(l=>i.push(l)),Oh(o,a).forEach(l=>n.push(l)))}r&&(this._applyClassNameChanges(n,i),va.release(n),va.release(i))}_applyClassNameChanges(n,i){let o=this.container;o&&(i.forEach(r=>o.classList.remove(r)),n.forEach(r=>o.classList.add(r)))}_removeActiveClassNames(){let n=this.container;if(!n)return;let i;for(i in od)Oh(i,this[i]).forEach(o=>n.classList.remove(o))}};return c([d()],t.prototype,"breakpoints",null),c([d()],t.prototype,"orientation",void 0),c([d()],t.prototype,"widthBreakpoint",void 0),c([d()],t.prototype,"heightBreakpoint",void 0),t=c([b("esri.views.BreakpointsOwner")],t),t};var vo=class extends k{constructor(){super(...arguments),this.items=new W,this._watchUpdatingTracking=new hn,this._callbacks=new Map,this._projector=Ku(),this._hiddenProjector=Ku()}get needsRender(){return this.items.length>0}get updating(){return this._watchUpdatingTracking?.updating??!1}initialize(){let e=document.createElement("div");e.className="esri-overlay-surface",this._set("surface",e),this._hiddenSurface=document.createElement("div"),this._hiddenSurface.setAttribute("style","visibility: hidden;"),e.appendChild(this._hiddenSurface),this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,t=>{for(let n of t.added){let i=()=>n.render();this._callbacks.set(n,i),this._projector.append(this.surface,i)}for(let n of t.removed){let i=this._projector.detach(this._callbacks.get(n));this.surface.removeChild(i.domNode),this._callbacks.delete(n)}})}addItem(e){this.items.add(e)}removeItem(e){this.items.remove(e)}destroy(){this.items.removeAll(),this._callbacks.forEach(e=>this._projector.detach(e)),this._callbacks=null,this._projector=null,this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(e){let t=this._hiddenSurface,n=this._hiddenProjector,i,o=()=>(i=e.render(),i);n.append(t,o),n.renderNow();let r={left:0,top:0,right:0,bottom:0};if(i?.domNode){let s=i.domNode.getBoundingClientRect();r.left=s.left,r.top=s.top,r.right=s.right,r.bottom=s.bottom}for(n.detach(o);t.firstChild;)t.removeChild(t.firstChild);return r}overlaps(e,t){let n=this.computeBoundingRect(e),i=this.computeBoundingRect(t);return Math.max(n.left,i.left)<=Math.min(n.right,i.right)&&Math.max(n.top,i.top)<=Math.min(n.bottom,i.bottom)}get hasVisibleItems(){return this.items.some(e=>e.visible)}prepare(){return D(this,null,function*(){yield document.fonts.load(this._fontString()).catch(()=>{})})}renderCanvas(e,t){let n=!!t?.disableDecorations;if(!this.items.some(o=>o.visible&&!(n&&o.isDecoration)))return;let i=e.getContext("2d");i.save(),i.font=this._fontString(),this.items.forEach(o=>{n&&o.isDecoration||(i.save(),o.renderCanvas(i),i.restore())}),i.restore()}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};c([d({readOnly:!0})],vo.prototype,"surface",void 0),c([d({readOnly:!0})],vo.prototype,"items",void 0),c([d({readOnly:!0})],vo.prototype,"needsRender",null),c([d({readOnly:!0})],vo.prototype,"_watchUpdatingTracking",void 0),c([d({readOnly:!0})],vo.prototype,"updating",null),vo=c([b("esri.views.overlay.ViewOverlay")],vo);var kh=vo;var Ah=[0,0];function OM(e){let t=(e.ownerDocument||window.document).defaultView,n=e.getBoundingClientRect();return Ah[0]=n.left+(t?.pageXOffset??0),Ah[1]=n.top+(t?.pageYOffset??0),Ah}function Jv(e){e&&(Xl(e),e.parentNode&&e.parentNode.removeChild(e))}function kM(e){let t=document.createElement("div");return e.appendChild(t),t}var Qa=16,rd=750,AM=512,PM=2,Xv=e=>{let t=class extends e{constructor(...n){super(...n),this._freqInfo={freq:Qa,time:rd},this._overlayRenderTaskHandle=null,this.height=0,this.messagesCommon=null,this.overlay=null,this.position=null,this.resizing=!1,this.root=null,this.surface=null,this.suspended=!0,this.ui=null,this.userContent=null,this.width=0,this.widthBreakpoint=null,this.addHandles([I(()=>this.cursor,i=>{let{surface:o}=this;o&&o.setAttribute("data-cursor",i)}),I(()=>this.navigating,i=>{let{surface:o}=this;o&&o.setAttribute("data-navigating",i.toString())})])}initialize(){this.addHandles([I(()=>this.ui,(n,i)=>this._handleUIChange(n,i),ie),this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])}destroy(){this.destroyed||(this.ui=re(this.ui),this.container=null)}get container(){return this._get("container")??null}set container(n){let i=this._get("container"),o=Jl(n);if(o||typeof n!="string"||q.getLogger(this).error("#container",`element with id '${n}' not found`),i===o)return;if(this._stopMeasuring(),i&&(i.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(Jv(this.root),this._set("root",null)),this.userContent&&(Yu(this.userContent,i),Jv(this.userContent),this._set("userContent",null))),!o)return this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),void this._set("container",null);o.classList.add("esri-view");let r=document.createElement("div");r.className="esri-view-user-storage",Yu(o,r),o.appendChild(r),this._set("userContent",r);let s=document.createElement("div");s.className="esri-view-root",o.insertBefore(s,o.firstChild),this._set("root",s);let a=document.createElement("div");a.className="esri-view-surface",a.setAttribute("role","application"),a.tabIndex=0,s.appendChild(a),this._set("surface",a);let l=new kh;s.appendChild(l.surface),this._set("overlay",l),this.addHandles(I(()=>l.needsRender,u=>{u&&!this._overlayRenderTaskHandle?this._overlayRenderTaskHandle=qi({render:()=>this.overlay?.render()}):this._overlayRenderTaskHandle=Me(this._overlayRenderTaskHandle)})),this.forceDOMReadyCycle(),this._set("container",o),this._startMeasuring()}get focused(){let n=document.activeElement===this.surface;return document.hasFocus()&&n}get size(){return[this.width,this.height]}blur(){this.surface?.blur()}focus(){this.surface?.focus()}pageToContainer(n,i,o){let r=this.position;return n-=r?r[0]:0,i-=r?r[1]:0,o?(o[0]=n,o[1]=i):o=[n,i],o}containerToPage(n,i,o){let r=this.position;return n+=r?r[0]:0,i+=r?r[1]:0,o?(o[0]=n,o[1]=i):o=[n,i],o}_handleUIChange(n,i){this.removeHandles("ui"),i&&i!==n&&i.destroy(),n&&(n.view=this,this.addHandles(I(()=>this.root,o=>{n.container=o?kM(o):null},ie),"ui")),this._set("ui",n)}_stopMeasuring(){this.removeHandles("measuring"),this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){let n=this._freqInfo;n.freq=Qa,n.time=rd,this.addHandles([Hg(window,"resize",()=>{n.freq=Qa,n.time=rd}),qi({prepare:i=>{let o=this._measure(),r=this._freqInfo;if(r.time+=i.deltaTime,o&&(r.freq=Qa,this._get("resizing")||this._set("resizing",!0)),r.time<r.freq)return;r.time=0;let s=this._position();r.freq=s||o?Qa:Math.min(rd,r.freq*PM),!o&&r.freq>=AM&&this._get("resizing")&&this._set("resizing",!1)}})],"measuring"),this._measure(),this._position()}_measure(){let n=this.container,i=n?n.clientWidth:0,o=n?n.clientHeight:0;if(i===0||o===0)return this.suspended||this._set("suspended",!0),!1;let r=this.width,s=this.height;return i===r&&o===s?(this.suspended&&this._set("suspended",!1),!1):(this._set("width",i),this._set("height",o),this.suspended&&this._set("suspended",!1),this.emit("resize",{oldWidth:r,oldHeight:s,width:i,height:o}),!0)}_position(){let n=this.container,i=this.position,o=n&&OM(n);return!!o&&(!i||o[0]!==i[0]||o[1]!==i[1])&&(this._set("position",[o[0],o[1]]),!0)}forceDOMReadyCycle(){}};return c([d()],t.prototype,"container",null),c([d({readOnly:!0})],t.prototype,"focused",null),c([d({readOnly:!0})],t.prototype,"height",void 0),c([d()],t.prototype,"messagesCommon",void 0),c([d({type:kh})],t.prototype,"overlay",void 0),c([d({readOnly:!0})],t.prototype,"position",void 0),c([d({readOnly:!0})],t.prototype,"resizing",void 0),c([d({readOnly:!0})],t.prototype,"root",void 0),c([d({value:null,readOnly:!0})],t.prototype,"size",null),c([d({readOnly:!0})],t.prototype,"surface",void 0),c([d({readOnly:!0})],t.prototype,"suspended",void 0),c([d()],t.prototype,"ui",void 0),c([d({readOnly:!0})],t.prototype,"userContent",void 0),c([d({readOnly:!0})],t.prototype,"width",void 0),c([d()],t.prototype,"widthBreakpoint",void 0),t=c([b("esri.views.DOMContainer")],t),t};function Nn(e){return e!=null&&"open"in e&&"declaredClass"in e}function eb(e){return e!=null&&"declaredClass"in e&&"dockOptions"in e}var tb=e=>{let t=class extends e{constructor(){super(...arguments),this._popupSetupTask=null,this.popup={},this.popupEnabled=!0}initialize(){this.addHandles([I(()=>[this.ui,this.popup],([n,i],o)=>{let r="popup",s="manual";if(o){let[a,l]=o;a&&Nn(l)&&(l.view=null,eb(l)&&a.remove(l,r))}n&&Nn(i)&&(i.view=this,eb(i)&&n.add(i,{key:r,position:s,internal:!0}))},ie),this.on("click",n=>{this.popup&&this.popupEnabled&&(n.pointerType!=="mouse"||n.button===0)&&(Nn(this.popup)?this.popup.viewModel.handleViewClick(n):n.async(()=>D(this,null,function*(){yield this.setupPopup(),Nn(this.popup)&&!this.destroyed&&this.ready&&this.popupEnabled&&this.popup.viewModel.handleViewClick(n)})))},ve.WIDGET)]),Rn(()=>this.ready&&this.popupEnabled&&!this.updating).then(()=>{import("./chunk-KTK67P2X.js")})}destroy(){this.destroyed||this.closePopup()}openPopup(n){return D(this,null,function*(){if(Nn(this.popup))return this.popup.open(n);try{if(yield this.setupPopup(),!this.popup)return void q.getLogger(this).error(new ne("view:null-popup","Popup is null and can't be opened"));this.popup.open(n)}catch{}})}closePopup(){this._popupSetupTask?.abort(),Nn(this.popup)&&this.popup.close()}fetchPopupFeatures(n,i){return D(this,null,function*(){return yield this.when(),this._popupHitsToFeatures(yield this._getPopupHits(n,i),i)})}setupPopup(){return D(this,null,function*(){if(this._popupSetupTask?.abort(),this.popup&&!Nn(this.popup))return this._popupSetupTask=ho(n=>D(this,null,function*(){let{default:i}=yield import("./chunk-KTK67P2X.js");if(nt(n),!this.popup||Nn(this.popup))return;let o=this.popup;delete o.open,delete o.close,this.popup=new i(o)})),this._popupSetupTask.promise})}_popupHitsToFeatures(r,s){return D(this,arguments,function*({location:n,hits:i},o){let a=[],l=[],u=!1,p=Gg(o,$e("popup-view-fetch-timeout")??FM),h=w=>{let O=new Ph(w);return l.push(O),a.push(O.promise),O},m=w=>{let O=l.at(-1);return O&&O.layerView===w&&!u?O:h(w)};for(let w of i)"graphic"in w?(m(w.layerView).graphics.push(w.graphic),u=!1):(a.push(w.layerView.fetchPopupFeaturesAtLocation(w.mapPoint,p)),u=!0);l.map(w=>w.resolve(p));let f=Ql(a).then(w=>w.filter(O=>!!O).flat());return{pendingFeatures:a,allGraphicsPromise:f,location:n}})}_getPopupHits(n,i){return D(this,null,function*(){let{hits:o,location:r}=yield this.popupHitTest(n);nt(i);let s=[];for(let a of o)if("graphic"in a){if(this._isValidPopupGraphic(a.graphic,i)){let l=this._isValidPopupGraphicsLayerView(a.layerView)?a.layerView:void 0;s.push({graphic:a.graphic,layerView:l})}}else this._isValidPopupLocationLayerView(a.layerView)&&s.push({mapPoint:a.mapPoint,layerView:a.layerView});return{hits:s,location:r}})}_isValidPopupGraphic(n,i){return n&&!!n.getEffectivePopupTemplate(i?.defaultPopupTemplateEnabled)}_isValidPopupGraphicsLayerView(n){return!n||(!("layer"in n)||!n.suspended)&&"fetchPopupFeaturesFromGraphics"in n}_isValidPopupLocationLayerView(n){return(!("layer"in n)||!n.suspended)&&"fetchPopupFeaturesAtLocation"in n}};return c([d({cast(n){return!n||Nn(n)||typeof n=="object"&&(n.open=i=>(zu(q.getLogger(this),"view.popup is no longer created by default. view.popup.open() will stop working when the popup isn't created",{replacement:"Use view.openPopup() instead.",version:"4.27"}),this.openPopup(i)),n.close=()=>(zu(q.getLogger(this),"view.popup is no longer created by default. view.popup.close() will stop working when the popup isn't created",{replacement:"Use view.closePopup() instead.",version:"4.27"}),this.closePopup())),n}})],t.prototype,"popup",void 0),c([d()],t.prototype,"popupEnabled",void 0),t=c([b("esri.views.PopupView")],t),t},Ph=class{constructor(t){this.layerView=t,this._resolver=zo(),this.graphics=[]}get promise(){return this._resolver.promise}resolve(t){let{layerView:n,graphics:i,_resolver:o}=this;if(!n)return o.resolve(i),o.promise;let r;return n.fetchPopupFeaturesFromGraphics(i,t).catch(s=>(r=s,null)).then(s=>{s?o.resolve(s):o.reject(r)}),o.promise}},FM=5e3;var Ja=class extends zy{constructor(e){super(e),this.addHandles(this.on("before-add",t=>{t.item!=null&&t.item.parent===this.owner&&(q.getLogger(this).warn("Analysis inside the collection must be unique. Not adding this element again."),t.preventDefault())}))}_own(e){e.parent=this.owner}_release(e){e.parent=null}};Ja=c([b("esri.support.AnalysesCollection")],Ja);var Vn=class extends k{constructor(e){super(e),this.view=null,this.baseLayerViews=new W,this.referenceLayerViews=new W,this._loadingHandle=I(()=>this.view?.map?.basemap,t=>{t&&t.load().catch(()=>{})},ie)}destroy(){this._set("view",null),this._loadingHandle&&(this._loadingHandle.remove(),this._loadingHandle=null);for(let e of this.baseLayerViews)e.destroy();this.baseLayerViews.length=0;for(let e of this.referenceLayerViews)e.destroy();this.referenceLayerViews.length=0}get suspended(){return!this.view||this.view.suspended}get updating(){if(this.view?.suspended)return!1;let e=this.view?.map?.basemap;return!!e&&!!e.loaded&&(this.baseLayerViews.some(t=>t.updating)||this.referenceLayerViews.some(t=>t.updating))}};c([d({constructOnly:!0})],Vn.prototype,"view",void 0),c([d({readOnly:!0})],Vn.prototype,"baseLayerViews",void 0),c([d({readOnly:!0})],Vn.prototype,"referenceLayerViews",void 0),c([d({readOnly:!0})],Vn.prototype,"suspended",null),c([d({type:Boolean,readOnly:!0})],Vn.prototype,"updating",null),Vn=c([b("esri.views.BasemapView")],Vn);function RM(e){return"tryRecycleWith"in e}function LM(e){return e!=null&&typeof e=="object"&&"layerViews"in e}var Fh=class{constructor(t,n,i){this.layer=t,this.view=n,this.layerViewImporter=i,this._controller=new AbortController,this._deferred=zo(),this._started=!1,this.done=!1,this.promise=this._deferred.promise,Kr(this._controller.signal,()=>{let o=new ne("cancelled:layerview-create","layerview creation cancelled",{layer:t});this._deferred.reject(o)})}tryRecycle(t){if(!this.done||!this.layerView||!RM(this.layerView))return null;let n=this.layer.type,i=this._controller.signal;for(let o=0;o<t.length;o++){let r=t[o];if(r.type!==n)continue;let s=this.layerView.tryRecycleWith(r,{signal:i});if(s){t.splice(o,1),this.layer=r;let a=this.layerView,l=a.view;return this.promise=Promise.race([s.then(()=>(nt(this._controller.signal),r.emit("layerview-destroy",{view:l,layerView:a}),l.emit("layerview-destroy",{view:l,layerView:a}),r.emit("layerview-create",{view:l,layerView:a}),l.emit("layerview-create",{view:l,layerView:a}),a)),new Promise((u,p)=>Kr(this._controller.signal,()=>p(Yr())))]),this.promise}}return null}destroy(){this._controller.abort();let{layerView:t}=this;if(t){let{layer:n,view:i}=this;n.emit("layerview-destroy",{view:i,layerView:t}),i.emit("layerview-destroy",{layer:n,layerView:t})}this.done=!0,this.layer=null,this.layerView=null,this.view=null,this.layerViewImporter=null,this._map=null}start(){return D(this,null,function*(){if(this._started)return;this._started=!0;let{_controller:{signal:t},layer:n,view:i}=this;this._map=i.map;try{let o,r;if(yield n.load({signal:t}),n.prefetchResources&&(yield n.prefetchResources({signal:t})),NM(n))o=yield n.createLayerView(i,{signal:t});else{if(!this.layerViewImporter.hasLayerViewModule(n))throw new ne("layer:view-not-supported","No layerview implementation was found");let l=yield this.layerViewImporter.importLayerView(n);nt(t),o="default"in l?new l.default({layer:n,view:i}):new l({layer:n,view:i})}let s=()=>{r=Me(r),o.destroyed||o.destroy(),o.layer=null,o.parent=null,o.view=null,this.done=!0};r=Kr(t,s),nt(t);try{yield o.when()}catch(l){throw s(),l}if(!this._map?.allLayers?.includes(n))return s(),void this._deferred.reject(new ne("view:no-layerview-for-layer","The layer has been removed from the map",{layer:n}));this.layerView=o,n.emit("layerview-create",{view:i,layerView:o}),i.emit("layerview-create",{layer:n,layerView:o}),this.done=!0,this._deferred.resolve(o)}catch(o){n.emit("layerview-create-error",{view:i,error:o}),i.emit("layerview-create-error",{layer:n,error:o}),this.done=!0,this._deferred.reject(new ne("layerview:create-error","layerview creation failed",{layer:n,error:o}))}})}},ki=class extends k{constructor(e){super(e),this._layerLayerViewInfoMap=new Map,this._recyclingInfoMap=new Map,this._watchUpdatingTracking=new hn,this.supportsGround=!0,this._preloadLayerViewModules=()=>{let t=this.view.map?.allLayers;if(t)for(let n of t)this.layerViewImporter.hasLayerViewModule(n)&&this.layerViewImporter.importLayerView(n)},this._reschedule=()=>this.destroyed?Promise.reject():(this._workPromise==null&&(this._workPromise=zo(),this._workPromise.promise.catch(()=>{})),this.removeHandles("reschedule"),this.addHandles($g(this._doWork),"reschedule"),this._workPromise.promise),this._doWork=()=>{if(this.destroyed)return;let t=this.view.map;if(this._map!==t&&(this.clear(),this._map=t),this._workPromise==null)return void this.notifyChange("updating");this.removeHandles("reschedule"),this.removeHandles("collection-change");let n=new Set,i=[],o=this.view.ready,r=a=>{if(a!=null){for(let l of a)if(l){n.add(l);let u=this._layerLayerViewInfoMap.get(l);u&&o?u.start():u||this._recyclingInfoMap.has(l)||i.push(l),"layers"in l&&l.layers&&r(l.layers)}}};for(let a of this._rootCollectionNames)r(Fn(this,a));for(let[a,l]of this._layerLayerViewInfoMap)if(!n.has(a)){this._layerLayerViewInfoMap.delete(l.layer);let u=l.tryRecycle(i);u?(this.notifyChange("updating"),this._recyclingInfoMap.set(l.layer,l),u.then(()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(l.layer),this._layerLayerViewInfoMap.set(l.layer,l),this._reschedule()}).catch(()=>{this.notifyChange("updating"),this._recyclingInfoMap.delete(l.layer),l.destroy(),this._reschedule()})):l.destroy()}for(let[a,l]of this._recyclingInfoMap)n.has(a)||(this.notifyChange("updating"),this._recyclingInfoMap.delete(l.layer),l.destroy());for(let a of i)this._createLayerView(a);this._refreshCollections();let s=[t?.ground?.layers,t?.basemap?.baseLayers,t?.basemap?.referenceLayers,t?.layers].filter(a=>!!a);n.forEach(a=>"layers"in a&&s.push(a.layers)),this.addHandles(s.map(a=>this._watchUpdatingTracking.addOnCollectionChange(()=>a,this._reschedule)),"collection-change"),this._workPromise.resolve(),this._workPromise=null}}initialize(){this.addHandles([Zi(()=>this.view?.map?.allLayers,"change",this._preloadLayerViewModules,{onListenerAdd:this._preloadLayerViewModules}),I(()=>{let e=this.view,t=e?.map;return[t?.basemap,t?.ground,t?.layers,e?.ready]},()=>this._reschedule(),ke)]),this._preloadLayerViewModules(),this._reschedule()}destroy(){this.clear(),_c(this._recyclingInfoMap),_c(this._layerLayerViewInfoMap),this._watchUpdatingTracking.destroy(),this._map=null,this._workPromise!=null&&(this._workPromise.reject(Yr()),this._workPromise=null)}get _layersToLayerViews(){let e=[["view.map.basemap.baseLayers","view.basemapView.baseLayerViews"],["view.map.layers","view.layerViews"],["view.map.basemap.referenceLayers","view.basemapView.referenceLayerViews"]];return this.supportsGround&&e.push(["view.map.ground.layers","view.groundView.layerViews"]),new Map(e)}get _rootCollectionNames(){return Array.from(this._layersToLayerViews.keys())}get updating(){return this._workPromise!=null||this._watchUpdatingTracking.updating||po(this._layerLayerViewInfoMap,e=>!e.done)||this._recyclingInfoMap.size>0}get updatingRemaining(){let e=0;for(let t of this._layerLayerViewInfoMap.values())t.done||++e;return e}clear(){this.destroyed||(_c(this._layerLayerViewInfoMap),this._refreshCollections())}whenLayerView(e){return D(this,null,function*(){if(yield this._reschedule(),!this._layerLayerViewInfoMap.has(e)){if(this._recyclingInfoMap.has(e))return this._recyclingInfoMap.get(e).promise;throw new ne("view:no-layerview-for-layer","No layerview has been found for the layer",{layer:e})}return this._layerLayerViewInfoMap.get(e).promise})}isCreatingLayerViewsForLayer(e,t){this.commitProperty("updatingRemaining");let n=this._layerLayerViewInfoMap.get(e);if(!n?.done)return!0;let i=n.layerView;return!(!i||!t||i.parent===t)||!!(n.done&&i&&"layers"in e&&e.layers?.length)&&e.layers.some(o=>this.isCreatingLayerViewsForLayer(o,i))}_refreshCollections(){for(let[e,t]of this._layersToLayerViews)this._populateLayerViewsOwners(Fn(this,e),Fn(this,t),this.view);this.notifyChange("updating"),this.notifyChange("updatingRemaining")}_populateLayerViewsOwners(e,t,n){if(!e||!t)return void(t&&t.removeAll());let i=0;for(let o of e){let r=this._layerLayerViewInfoMap.get(o);if(!r?.layerView)continue;let s=r.layerView;s.layer=o,s.parent=n,t.at(i)!==s&&t.splice(i,0,s),"layers"in o&&LM(s)&&this._populateLayerViewsOwners(o.layers,s.layerViews,s),i+=1}i<t.length&&t.splice(i,t.length)}_createLayerView(e){e.load().catch(()=>{}),this.layerViewImporter.hasLayerViewModule(e)&&this.layerViewImporter.importLayerView(e);let t=new Fh(e,this.view,this.layerViewImporter);t.promise.then(()=>this._refreshCollections(),n=>{n&&(Qr(n)||n.name==="cancelled:layerview-create")||q.getLogger(this).error(`Failed to create layerview for layer title:'${e.title??"no title"}', id:'${e.id??"no id"}' of type '${e.type}'.`,{layer:e,error:n}),this._refreshCollections()}),this._layerLayerViewInfoMap.set(e,t),this.view.ready&&t.start(),this.notifyChange("updating"),this.notifyChange("updatingRemaining")}};c([d()],ki.prototype,"_workPromise",void 0),c([d({readOnly:!0})],ki.prototype,"_watchUpdatingTracking",void 0),c([d({readOnly:!0})],ki.prototype,"_layersToLayerViews",null),c([d({readOnly:!0})],ki.prototype,"_rootCollectionNames",null),c([d()],ki.prototype,"layerViewImporter",void 0),c([d()],ki.prototype,"supportsGround",void 0),c([d({readOnly:!0})],ki.prototype,"updating",null),c([d({readOnly:!0})],ki.prototype,"updatingRemaining",null),c([d({constructOnly:!0})],ki.prototype,"view",void 0),ki=c([b("esri.views.LayerViewManager")],ki);var ib=ki;function NM(e){return"createLayerView"in e&&e.createLayerView!=null}var vi=class extends k{constructor(e){super(e),this.factor=1.5,this.offset=me(0,0),this.position=null,this.size=120,this.maskUrl=null,this.maskEnabled=!0,this.overlayUrl=null,this.overlayEnabled=!0,this.visible=!0}get version(){return this.commitProperty("factor"),this.commitProperty("offset"),this.commitProperty("position"),this.commitProperty("visible"),this.commitProperty("size"),this.commitProperty("maskUrl"),this.commitProperty("maskEnabled"),this.commitProperty("overlayUrl"),this.commitProperty("overlayEnabled"),(this._get("version")||0)+1}};c([d({type:Number})],vi.prototype,"factor",void 0),c([d({nonNullable:!0})],vi.prototype,"offset",void 0),c([d()],vi.prototype,"position",void 0),c([d({type:Number,range:{min:0}})],vi.prototype,"size",void 0),c([d()],vi.prototype,"maskUrl",void 0),c([d()],vi.prototype,"maskEnabled",void 0),c([d()],vi.prototype,"overlayUrl",void 0),c([d()],vi.prototype,"overlayEnabled",void 0),c([d({readOnly:!0})],vi.prototype,"version",null),c([d({type:Boolean})],vi.prototype,"visible",void 0),vi=c([b("esri.views.Magnifier")],vi);var Rh=vi;function Xa(e){return!!(e!=null&&typeof e=="object"&&"createQuery"in e&&e.createQuery&&"on"in e&&e.on)}var Hn=class extends Be.EventedAccessor{constructor(e){super(e),this._selectionMap=new my,this._sources=new W,this._trashCan=[],this._layerEditHandles=new W,this._vizTaskId=0,this.showHighlight=!0}initialize(){this.addHandles([I(()=>[this.view,this.showHighlight],()=>this._refreshVisualization()),Zi(()=>this.sources,"change",t=>{let n=this._selectionMap;for(let i of t.removed)n.delete(i);this._refreshListeners(),this._refreshVisualization()},{onListenerAdd:()=>this._refreshListeners()})]);let e=new W;this.view.when().then(()=>{this.view.map&&(this.view.map.allLayers.flatten(t=>"sublayers"in t&&t.sublayers?t.sublayers:null).forEach(t=>{(Xa(t)&&!Wo(t)||mo(t))&&e.add(t)}),this.sources=e)})}destroy(){this._layerEditHandles.drain(Me)}get selections(){return Array.from(this._selectionMap.entries()).map(e=>{let[t,n]=e;return{layer:t,selection:[...n.selection]}})}get count(){let e=0;for(let t of this._selectionMap.values())e+=t.selection.length;return e}get hasSelection(){return this.count>0}get sources(){return this._sources}set sources(e){ec(e,this._sources)}getSelectedFeatures(i){return D(this,arguments,function*(e,t={},n="layerView"){let{view:o,selections:r}=this,s=(e!==void 0?r.filter(a=>e.includes(a.layer)):r).filter(a=>a.selection.length>0).map(a=>D(this,null,function*(){let{layer:l,selection:u}=a,p=mo(l)?l.parent:l;if(p==null||!ob(p))return null;if(n==="layer")return rb(p,u,t);if(nb(p))return null;let h=yield o.whenLayerView(p).catch(()=>null);return h?rb(h,u,t):null}));return(yield Promise.all(s)).filter(a=>a!=null)})}updateSelection(e){let t=new Map;for(let[o,r]of this._selectionMap)t.set(o,[...r.selection]);let n=!1,i=e.current.concat(e.added);for(let o of i){let r=o.sourceLayer,s=o.getObjectId();if(this.sources.includes(r)&&(Xa(r)||mo(r))&&s!==null){let a=Zg(t,r,()=>[]);a.includes(s)||(a.push(s),n=!0)}}for(let o of e.removed){let r=o.sourceLayer,s=o.getObjectId();if(this.sources.includes(r)&&(Xa(r)||mo(r))&&s!==null){let a=t.get(r),l=a?.indexOf(s);l!==void 0&&l>=0&&(a?.splice(l,1),n=!0)}}if(n){let{_selectionMap:o,_trashCan:r}=this,s=[];for(let[a,l]of t){let u=o.get(a);u!==void 0&&r.push(u),o.set(a,{selection:l}),s.push(v({layer:a,selection:l},_a(u!==void 0?u.selection:[],l)))}this._onSelectionChange(s)}}setSelection(e,t){this._setSelection(e,t)}getSelection(e){return this._selectionMap.get(e)?.selection}appendToSelection(e,t){let n=this._selectionMap.get(e),i=n!==void 0?[...n.selection]:[];for(let o of t)i.includes(o)||i.push(o);this._setSelection(e,i)}removeFromSelection(e,t){let n=this._selectionMap.get(e);if(!n)return;let i=[];for(let o of n.selection)t.includes(o)||i.push(o);this._setSelection(e,i)}toggleInSelection(e,t){let n=this._selectionMap.get(e);if(!n||n.selection.length===0)return void this._setSelection(e,t);let i=new Set(n.selection),o=new Set(t),r=Wg(i,o);this._setSelection(e,Array.from(r))}clear(){let e=this._selectionMap.values();this._trashCan.push(...e);let t=[];for(let[n,i]of this._selectionMap.entries())t.push({layer:n,added:[],removed:[...i.selection],selection:[]});this._selectionMap.clear(),this._onSelectionChange(t)}_onSelectionChange(e){this._refreshVisualization(),this.emit("selection-change",{view:this.view,changes:e})}_refreshVisualization(){if(this.view==null||this.sources==null)return;for(this._vizTaskId++;this._trashCan.length>0;)this._trashCan.pop()?.highlightHandle?.remove();let{sources:e,view:t,_selectionMap:n,showHighlight:i}=this,o=this._vizTaskId;for(let r of e){let s=n.get(r),a=mo(r)?r.parent:r;if(a!=null&&ob(a)){if(nb(a))continue;t.whenLayerView(a).then(l=>{s?.highlightHandle?.remove(),s!=null&&i&&o===this._vizTaskId&&"highlight"in l&&typeof l.highlight=="function"&&s.selection.length>0&&(s.highlightHandle=l.highlight(s.selection,"selection"))}).catch(()=>{s?.highlightHandle?.remove()})}}}_refreshListeners(){this._layerEditHandles.drain(Me);for(let e of this.sources){let t=mo(e)?e.parent:e;if(t!=null&&Xa(t)){let n=t.on("edits",i=>{this._handleEditChanges(i,e)});this._layerEditHandles.push(n)}}}_handleEditChanges(e,t){if(e.deletedFeatures!==void 0&&e.deletedFeatures.length>0&&this._selectionMap.has(t)){let n=e.deletedFeatures.filter(i=>i.error==null).map(i=>i.objectId).filter(dt);this.removeFromSelection(t,n)}}_setSelection(e,t){if(!this.sources.includes(e))throw new Error(`Cannot set selection on layer ${e.title} because it is not in 'sources'`);let n=this._selectionMap.get(e);if(n===void 0||!HM(n,{selection:t})){n!==void 0&&this._trashCan.push(n),this._selectionMap.set(e,{selection:[...t]});let i=v({layer:e,selection:[...t]},_a(n!==void 0?n.selection:[],t));this._onSelectionChange([i])}}};c([d({readOnly:!0,nonNullable:!0})],Hn.prototype,"selections",null),c([d({readOnly:!0,nonNullable:!0})],Hn.prototype,"count",null),c([d({constructOnly:!0,nonNullable:!0})],Hn.prototype,"view",void 0),c([d({readOnly:!0,nonNullable:!0})],Hn.prototype,"hasSelection",null),c([d()],Hn.prototype,"showHighlight",void 0),c([d()],Hn.prototype,"sources",null),Hn=c([b("esri.views.SelectionManager")],Hn);var nb=e=>mo(e)?e.parent?.isTable===!0:e.isTable,VM=e=>e.layer!==void 0,ob=e=>e?.when!==void 0,HM=(e,t)=>{if(e==null&&t==null)return!0;if(e!=null&&t==null||e==null&&t!=null)return!1;if(e!=null&&t!=null&&e.selection!=null&&t.selection!=null){let n=[...e.selection],i=[...t.selection];if(n.length!==i.length)return!1;n.sort(),i.sort();for(let o=0;o<n.length;o++)if(n[o]!==i[o])return!1}return!0},rb=(i,o,...r)=>D(void 0,[i,o,...r],function*(e,t,n={}){let s;if(VM(e)){let a=e;s=a===void 0?null:yield a.queryFeatures(new np(B(v({},n),{objectIds:t}))).then(l=>({data:l,layer:e.layer}))}else{let a=e;s=a===void 0?null:yield a.queryFeatures(new np(B(v({},n),{objectIds:t}))).then(l=>({data:l,layer:a}))}return s}),sb=Hn;var el=class extends ry(k){constructor(e){super(e),this.accentColor=new mn([255,127,0]),this.textColor=new mn([255,255,255])}};c([d({type:mn,nonNullable:!0})],el.prototype,"accentColor",void 0),c([d({type:mn,nonNullable:!0})],el.prototype,"textColor",void 0),el=c([b("esri.views.Theme")],el);var sd=el;var Nh=["click","double-click","immediate-click","immediate-double-click","hold","drag","key-down","key-up","pointer-down","pointer-move","pointer-up","pointer-drag","mouse-wheel","pointer-enter","pointer-leave","gamepad","focus","blur"],ab={};function lb(e){return!!ab[e]}function BM(e){for(let t of e)if(!lb(t))return!1;return!0}Nh.forEach(e=>{ab[e]=!0});var ad=class{constructor(t){this._handlers=new Map,this._counter=0,this._handlerCounts=new Map,this.view=t,this.inputManager=null}connect(t){t&&this.disconnect(),this.inputManager=t,this._handlers.forEach(({handler:n,priority:i},o)=>this.inputManager?.installHandlers(o,[n],i))}disconnect(){this.inputManager&&this._handlers.forEach((t,n)=>this.inputManager?.uninstallHandlers(n)),this.inputManager=null}destroy(){this.disconnect(),this._handlers.clear(),this.view=null}on(t,n,i,o){let r=Array.isArray(t)?t:t.split(",");if(!BM(r))return r.some(lb)&&console.error("Error: registering input events and other events on the view at the same time is not supported."),null;let s,a;Array.isArray(n)?a=n:(s=n,a=[]),typeof i=="function"?s=i:o=i,o=o??ve.DEFAULT;let l=this._createUniqueGroupName(),u=new Lh(this.view,r,a,s);this._handlers.set(l,{handler:u,priority:o});for(let p of r){let h=this._handlerCounts.get(p)||0;this._handlerCounts.set(p,h+1)}return this.inputManager&&this.inputManager.installHandlers(l,[u],o),Yt(()=>this._removeHandler(l,r))}hasHandler(t){return!!this._handlerCounts.get(t)}_removeHandler(t,n){if(this._handlers.has(t)){this._handlers.delete(t);for(let i of n){let o=this._handlerCounts.get(i);o===void 0||(o===1?this._handlerCounts.delete(i):this._handlerCounts.set(i,o-1))}}this.inputManager&&this.inputManager.uninstallHandlers(t)}_createUniqueGroupName(){return this._counter+=1,`viewEvents_${this._counter}`}},Lh=class extends le{constructor(t,n,i,o){super(!0),this._latestDragStart=void 0,this.view=t;for(let r of n)switch(r){case"click":this.registerIncoming("click",i,s=>o(zM(t,s)));break;case"double-click":this.registerIncoming("double-click",i,s=>o(UM(t,s)));break;case"immediate-click":this.registerIncoming("immediate-click",i,s=>o($M(t,s)));break;case"immediate-double-click":this.registerIncoming("immediate-double-click",i,s=>o(WM(t,s)));break;case"hold":this.registerIncoming("hold",i,s=>o(qM(t,s)));break;case"drag":this.registerIncoming("drag",i,s=>{let a=this._wrapDrag(s);a&&o(a)});break;case"key-down":this.registerIncoming("key-down",i,s=>o(ZM(s)));break;case"key-up":this.registerIncoming("key-up",i,s=>o(YM(s)));break;case"pointer-down":this.registerIncoming("pointer-down",i,s=>o(tl(s,"pointer-down")));break;case"pointer-move":this.registerIncoming("pointer-move",i,s=>o(tl(s,"pointer-move")));break;case"pointer-up":this.registerIncoming("pointer-up",i,s=>o(tl(s,"pointer-up")));break;case"pointer-drag":this.registerIncoming("pointer-drag",i,s=>o(KM(s)));break;case"mouse-wheel":this.registerIncoming("mouse-wheel",i,s=>o(QM(s)));break;case"pointer-enter":this.registerIncoming("pointer-enter",i,s=>o(tl(s,"pointer-enter")));break;case"pointer-leave":this.registerIncoming("pointer-leave",i,s=>o(tl(s,"pointer-leave")));break;case"gamepad":this.registerIncoming("gamepad",i,s=>{o(JM(s))});break;case"focus":this.registerIncoming("focus",i,s=>{o(GM(s))});break;case"blur":this.registerIncoming("blur",i,s=>{o(jM(s))})}}_wrapDrag(t){let n=t.data,{x:i,y:o}=n.center,{action:r,pointerType:s,button:a}=n;if(r==="start"&&(this._latestDragStart=n),!this._latestDragStart)return;let l=n.pointer.native,u=n.buttons,{cancelable:p,timestamp:h}=t,m={x:this._latestDragStart.center.x,y:this._latestDragStart.center.y};return r==="end"&&(this._latestDragStart=void 0),{type:"drag",action:r,x:i,y:o,origin:m,pointerType:s,button:a,buttons:u,radius:n.radius,angle:F_(n.angle),native:l,timestamp:h,cancelable:p,stopPropagation:()=>t.stopPropagation(),async:f=>t.async(f),preventDefault:()=>t.preventDefault()}}};function GM(e){return{type:"focus",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}function jM(e){return{type:"blur",timestamp:e.timestamp,native:e.data.native,cancelable:e.cancelable,stopPropagation:()=>e.stopPropagation(),async:t=>e.async(t),preventDefault:()=>e.preventDefault()}}function zM(e,t){let{pointerType:n,button:i,buttons:o,x:r,y:s,native:a,eventId:l}=t.data,{cancelable:u,timestamp:p}=t;return{type:"click",pointerType:n,button:i,buttons:o,x:r,y:s,native:a,timestamp:p,screenPoint:me(r,s),mapPoint:il(e,r,s),eventId:l,cancelable:u,stopPropagation:()=>t.stopPropagation(),async:h=>t.async(h),preventDefault:()=>t.preventDefault()}}function UM(e,t){let{pointerType:n,button:i,buttons:o,x:r,y:s,native:a,eventId:l}=t.data,{cancelable:u,timestamp:p}=t;return{type:"double-click",pointerType:n,button:i,buttons:o,x:r,y:s,native:a,timestamp:p,mapPoint:il(e,r,s),eventId:l,cancelable:u,stopPropagation:()=>t.stopPropagation(),async:h=>t.async(h),preventDefault:()=>t.preventDefault()}}function $M(e,t){let{pointerType:n,button:i,buttons:o,x:r,y:s,native:a,eventId:l}=t.data,u=a.pointerId,{cancelable:p,timestamp:h}=t;return{type:"immediate-click",pointerId:u,pointerType:n,button:i,buttons:o,x:r,y:s,native:a,timestamp:h,mapPoint:il(e,r,s),eventId:l,cancelable:p,stopPropagation:()=>t.stopPropagation(),async:m=>t.async(m),preventDefault:()=>t.preventDefault()}}function WM(e,t){let{pointerType:n,button:i,buttons:o,x:r,y:s,native:a,eventId:l}=t.data,u=a.pointerId,{cancelable:p,timestamp:h}=t;return{type:"immediate-double-click",pointerId:u,pointerType:n,button:i,buttons:o,x:r,y:s,native:a,timestamp:h,mapPoint:il(e,r,s),eventId:l,cancelable:p,stopPropagation:()=>t.stopPropagation(),async:m=>t.async(m),preventDefault:()=>t.preventDefault()}}function qM(e,t){let{pointerType:n,button:i,buttons:o,x:r,y:s,native:a}=t.data,{cancelable:l,timestamp:u}=t;return{type:"hold",pointerType:n,button:i,buttons:o,x:r,y:s,native:a,timestamp:u,mapPoint:il(e,r,s),cancelable:l,stopPropagation:()=>t.stopPropagation(),async:p=>t.async(p),preventDefault:()=>t.preventDefault()}}function il(e,t,n){return e.toMap(me(t,n),{exclude:[]})}function ZM(e){let{key:t,repeat:n,native:i}=e.data,{cancelable:o,timestamp:r}=e;return{type:"key-down",key:t,repeat:n,native:i,timestamp:r,cancelable:o,stopPropagation:()=>e.stopPropagation(),async:s=>e.async(s),preventDefault:()=>e.preventDefault()}}function YM(e){let{key:t,native:n}=e.data,{cancelable:i,timestamp:o}=e;return{type:"key-up",key:t,native:n,timestamp:o,cancelable:i,stopPropagation:()=>e.stopPropagation(),async:r=>e.async(r),preventDefault:()=>e.preventDefault()}}function tl(e,t){let{x:n,y:i,button:o,buttons:r,native:s,eventId:a}=e.data,l=s.pointerId,u=s.pointerType,{cancelable:p,timestamp:h}=e;return{type:t,x:n,y:i,pointerId:l,pointerType:u,button:o,buttons:r,native:s,timestamp:h,eventId:a,cancelable:p,stopPropagation:()=>e.stopPropagation(),async:m=>e.async(m),preventDefault:()=>e.preventDefault()}}function KM(e){let{x:t,y:n,buttons:i,native:o,eventId:r}=e.data.currentEvent,{button:s}=e.data.startEvent,a=e.data.startEvent.native.pointerId,l=e.data.startEvent.native.pointerType,u=e.data.action,p={x:e.data.startEvent.x,y:e.data.startEvent.y},{cancelable:h,timestamp:m}=e;return{type:"pointer-drag",x:t,y:n,pointerId:a,pointerType:l,button:s,buttons:i,action:u,origin:p,native:o,timestamp:m,eventId:r,cancelable:h,stopPropagation:()=>e.stopPropagation(),async:f=>e.async(f),preventDefault:()=>e.preventDefault()}}function QM(e){let{cancelable:t,data:n,timestamp:i}=e,{x:o,y:r,deltaY:s,native:a}=n;return{type:"mouse-wheel",x:o,y:r,deltaY:s,native:a,timestamp:i,cancelable:t,stopPropagation:()=>e.stopPropagation(),async:l=>e.async(l),preventDefault:()=>e.preventDefault()}}function JM(e){let{action:t,state:n,device:i}=e.data,{cancelable:o,timestamp:r}=e,{buttons:s,axes:a}=n;return{type:"gamepad",device:i,timestamp:r,action:t,buttons:s,axes:a,cancelable:o,stopPropagation:()=>e.stopPropagation(),async:l=>e.async(l),preventDefault:()=>e.preventDefault()}}function cb(e){return[e.on("before-add",t=>{let n=t.item;if(n==null||e.includes(n))return q.getLogger("esri.views.interactive.interactiveToolUtils").warn("Tool is either already in the list of tools or tool is `null`. Not adding tool."),void t.preventDefault();n.onAdd()}),e.on("after-remove",t=>{let n=t.item;n.active&&(n.view.activeTool=null),n.destroy()})]}function nl(e){return e.visible&&e.getEditableFlag!=null&&e.getEditableFlag(Ea.USER)&&e.getEditableFlag(Ea.MANAGER)}var ld=class{constructor(){this._pointerLocations=new Map,this._hoveredManipulators=new Map,this._grabbedManipulators=new Map,this._draggedManipulators=new Map,this._stopDrag=!1,this._revertToNullActiveTool=!1,this._cursor=null}get cursor(){return this._cursor}hasFocusedManipulators(){return this._grabbedManipulators.size>0||this._draggedManipulators.size>0}handleInputEvent(t,n){let i=()=>t.stopPropagation();switch(t.type){case"pointer-move":ub(t.pointerType)&&this._pointerLocations.set(t.pointerId,{x:t.x,y:t.y,pointerType:t.pointerType});break;case"drag":this._grabbedManipulators.size>0&&(this._stopDrag=!0),this._stopDrag&&(i(),t.action==="end"&&(this._stopDrag=!1));break;case"pointer-down":{if(!pb(t))break;let o=fi(t),r=Ss(o,t.pointerType,n.forEachTool);if(r==null)break;let s=r.manipulator,a=r.tool;s==null||a==null||!s.interactive||s.grabbable&&s.grabbableForEvent(t)||!s.grabbing||s.dragging||this._releaseManipulatorBeforeDragging(s,t,n),s!=null&&a!=null&&s.interactive&&s.grabbable&&s.grabbableForEvent(t)&&!s.grabbing&&(this._grabbedManipulators.set(t.pointerId,{manipulator:s,tool:a,start:o,pointerType:t.pointerType}),this._grabbedManipulators.size===1&&n.activeTool==null&&(this._revertToNullActiveTool=!0,n.setActiveTool(r.tool)),s.grabbing=!0,s.events.emit("grab-changed",{action:"start",pointerType:t.pointerType,screenPoint:o}),i());break}case"pointer-up":this._draggedManipulators.has(t.pointerId)||this._handlePointerEnd(t,n);break;case"pointer-drag":{if(!pb(t))break;let o=this._grabbedManipulators.get(t.pointerId),r=o?.manipulator,s=o?.tool;if(r==null||s==null)break;let a=fi(t);a.x=Xu(a.x,0,n.view.width),a.y=Xu(a.y,0,n.view.height);let l=o.start,u=this._draggedManipulators.get(t.pointerId);switch(t.action){case"start":case"update":t.action!=="update"&&this._grabbedManipulators.size!==1||(r.dragging=!0,u?r.events.emit("drag",{action:"update",start:l,screenPoint:a}):r.events.emit("drag",{action:"start",start:l,screenPoint:a,pointerType:t.pointerType}),this._draggedManipulators.set(t.pointerId,{tool:s,manipulator:r,start:l}));break;case"end":r.dragging=!1,u&&r.events.emit("drag",{action:"end",start:l,screenPoint:a}),this._draggedManipulators.delete(t.pointerId),this._handlePointerEnd(t,n)}i();break}case"immediate-click":{let o=fi(t),r=Ss(o,t.pointerType,n.forEachTool);if(XM(t)||n.forEachTool(u=>{if((r==null||r.tool!==u||u.automaticManipulatorSelection)&&u.manipulators){let p=!1;u.manipulators.forEach(({manipulator:h})=>{h.selected&&(h.selected=!1,p=!0)}),p&&u.onManipulatorSelectionChanged&&u.onManipulatorSelectionChanged()}}),r==null)break;let{manipulator:s,tool:a}=r;if(!s.interactive)break;s.selectable&&a.automaticManipulatorSelection&&(s.selected=!s.selected,a.onManipulatorSelectionChanged&&a.onManipulatorSelectionChanged());let l=t.native.shiftKey;s.events.emit("immediate-click",{screenPoint:o,button:t.button,pointerType:t.pointerType,shiftKey:l,stopPropagation:i}),Vh(s,i);break}case"click":{let o=fi(t),r=Ss(o,t.pointerType,n.forEachTool),s=r?.manipulator;if(s==null||!s.interactive)break;let a=t.native.shiftKey;s.events.emit(t.type,{screenPoint:o,button:t.button,pointerType:t.pointerType,shiftKey:a}),i();break}case"double-click":{let o=fi(t),r=Ss(o,t.pointerType,n.forEachTool),s=r!=null?r.manipulator:null;if(s==null||!s.interactive)break;let a=t.native.shiftKey;s.events.emit("double-click",{screenPoint:o,button:t.button,pointerType:t.pointerType,shiftKey:a,stopPropagation:i}),Vh(s,i);break}case"immediate-double-click":{let o=fi(t),r=Ss(o,t.pointerType,n.forEachTool),s=r!=null?r.manipulator:null;if(s==null||!s.interactive)break;let a=t.native.shiftKey;s.events.emit("immediate-double-click",{screenPoint:o,button:t.button,pointerType:t.pointerType,shiftKey:a,stopPropagation:i}),Vh(s,i);break}}this._onFocusChange(n.forEachTool)}_releaseManipulatorBeforeDragging(t,n,i){t.grabbing=!1,t.events.emit("grab-changed",{action:"end",pointerType:n.pointerType,screenPoint:fi(n)}),this._grabbedManipulators.forEach(({manipulator:o},r)=>{o===t&&this._grabbedManipulators.delete(r)}),this._afterManipulatorRelease(i.setActiveTool)}_handlePointerEnd(t,n){let i=this._grabbedManipulators.get(t.pointerId)?.manipulator;i!=null&&i.grabbing&&(i.grabbing=!1,i.events.emit("grab-changed",{action:"end",pointerType:t.pointerType,screenPoint:fi(t)}),this._grabbedManipulators.delete(t.pointerId),this._afterManipulatorRelease(n.setActiveTool))}_onFocusChange(t){this._updateCursor(),this._updateFocusedManipulatorTools(t)}_updateCursor(){this._grabbedManipulators.size>0?this._cursor=db(this._grabbedManipulators)||"grabbing":this._hoveredManipulators.size>0?this._cursor=db(this._hoveredManipulators)||"pointer":this._cursor=null}_updateFocusedManipulatorTools(t){let n=new Set,i=new Set;this._grabbedManipulators.forEach(({tool:o})=>{n.add(o)}),this._hoveredManipulators.forEach(({tool:o})=>{i.add(o)}),t(o=>{o.hasGrabbedManipulators=n.has(o),o.hasHoveredManipulators=i.has(o);let r=this._grabbedManipulators.values(),s=Ng(r,({tool:a})=>a===o);o.firstGrabbedManipulator=s!=null?s.manipulator:null})}clearPointers(t,{forEachTool:n,setActiveTool:i},o=!0,r){let s=(a,l)=>a===t&&(r==null||r===l);this._grabbedManipulators.forEach(({tool:a,manipulator:l,pointerType:u},p)=>{s(a,l)&&(this._grabbedManipulators.delete(p),l.grabbing=!1,l.events.emit("grab-changed",{action:"end",screenPoint:null,pointerType:u}))}),this._draggedManipulators.forEach(({tool:a,manipulator:l},u)=>{s(a,l)&&(this._draggedManipulators.delete(u),l.dragging=!1,l.events.emit("drag",{action:"cancel"}))}),o&&this._hoveredManipulators.forEach(({tool:a,manipulator:l},u)=>{s(a,l)&&(this._hoveredManipulators.delete(u),l.hovering=!1)}),this._afterManipulatorRelease(i),this._onFocusChange(n)}updateHoveredStateFromKnownPointers(t){this._pointerLocations.forEach((n,i)=>{this._updateHoveredStateForPointerAtScreenPosition(me(n.x,n.y),i,n.pointerType,t)})}handleHoverEvent(t,n){t.type!=="pointer-up"&&t.type!=="immediate-click"&&t.type!=="pointer-move"||!ub(t.pointerType)||this._updateHoveredStateForPointerAtScreenPosition(fi(t),t.pointerId,t.pointerType,n)}_updateHoveredStateForPointerAtScreenPosition(t,n,i,o){let r=Ss(t,i,o),s=this._hoveredManipulators.get(n)?.manipulator;r==null||r.manipulator.interactive||(r=null),r!=null&&s===r.manipulator||(s!=null&&(s.hovering=!1),r!=null?(r.manipulator.hovering=!0,this._hoveredManipulators.set(n,r)):this._hoveredManipulators.delete(n),this._onFocusChange(o))}_afterManipulatorRelease(t){this._grabbedManipulators.size===0&&this._revertToNullActiveTool&&(t(null),this._revertToNullActiveTool=!1)}};function db(e){let t=null;return po(e,({manipulator:n})=>!(n==null||!n.interactive)&&(n.grabbing&&n.grabCursor?(t=n.grabCursor,!0):!!n.cursor&&(t=n.cursor,!0))),t}function Ss(e,t,n){let i=null;return n(o=>{if(o.manipulators==null||!nl(o))return!1;let r=o.manipulators.intersect(e,t);return r!=null&&(i={tool:o,manipulator:r},!0)}),i}function ub(e){return e==="mouse"}function pb(e){return e.pointerType!=="mouse"||e.button===0}function XM(e){return!!e.native.shiftKey}function Vh(e,t){e?.consumesClicks&&t()}var hb="attached",Hh="tools",eD=1e3,Ji=class extends k{constructor(e){super(e),this._updatingHandles=new hn,this._clock=un,this._manipulatorState=new ld,this.tools=new W,this.cursor=null,this._interacting=!1,this._interactingTimeout=eD,this._interactingTimeoutHandle=null,this._forEachTool=t=>{for(let n of this.tools.items)if(t(n))return}}initialize(){this.addHandles([this.view.on(Nh,e=>{this._handleInputEvent(e)},ve.TOOL),...cb(this.tools),this.tools.on("before-add",({item:e})=>{this._updateToolEditableFlag(e)}),this.tools.on("before-remove",({item:e})=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs),this._updateCursor()}),this.tools.on("change",()=>{this._refreshToolWatchers()})])}destroy(){this.activeTool=null,this.tools.drain(e=>e.destroy()),this._clearInteractingTimeout(),this._interacting=!1,this._updatingHandles.destroy()}get _manipulatorStateEventArgs(){return{forEachTool:this._forEachTool,activeTool:this.activeTool,setActiveTool:e=>{this.activeTool=e},view:this.view}}set activeTool(e){if(e!=null&&!this.view.ready)return void q.getLogger(this).error("Cannot set active tool while view is not ready.");if(e===this.activeTool)return;let t=this.activeTool;this._set("activeTool",e),t?.deactivate(),e?.activate(),this._removeIncompleteTools(e);for(let n of this.tools){this._updateToolEditableFlag(n);let i=nl(n);this.activeTool!=null&&i||this._manipulatorState.clearPointers(n,this._manipulatorStateEventArgs,!i)}this._updateCursor()}get updating(){return this._updatingHandles.updating||this.tools.some(e=>e.updating)}get interacting(){return this._interacting}_clearInteractingTimeout(){this._interactingTimeoutHandle=Me(this._interactingTimeoutHandle)}_startInteractingTimeout(){this._clearInteractingTimeout(),this._interactingTimeoutHandle=this._clock.setTimeout(()=>this._interacting=!1,this._interactingTimeout)}attach(){this.view.type==="3d"?this.addHandles([I(()=>{let{state:e}=this.view;return"camera"in e&&e.camera},()=>this._forEachManipulator(e=>e.onViewChange())),this.view.elevationProvider?.on("elevation-change",e=>this._forEachManipulator(t=>t.onElevationChange(e)))],hb):this.addHandles(I(()=>this.view.extent,()=>this._forEachManipulator(e=>e.onViewChange())))}detach(){this.activeTool=null,this.tools.removeAll(),this.removeHandles(hb),this._clearInteractingTimeout(),this._interacting=!1}_forEachManipulator(e){this._forEachTool(t=>{t.manipulators&&t.manipulators.forEach(({manipulator:n})=>e(n,t))})}_handleInputEvent(e){let t=!1,n=B(v({},e),{stopPropagation:()=>{t=!0,e.stopPropagation()}});this.activeTool!=null?this.activeTool.handleInputEvent&&this.activeTool.handleInputEvent(n):this._forEachTool(i=>{!t&&i.visible&&i.handleInputEvent(n)}),!t&&e.type==="key-down"&&e.key==="Escape"&&this.activeTool&&(e.stopPropagation(),this.activeTool=null),this._manipulatorState.handleInputEvent(n,this._manipulatorStateEventArgs),t||this.activeTool==null||this.activeTool.handleInputEventAfter(n),this._manipulatorState.handleHoverEvent(n,this._forEachTool),this._updateCursor(),e.type==="pointer-move"&&(this._manipulatorState.hasFocusedManipulators()||this.activeTool)&&(this._interacting=!0,this._startInteractingTimeout())}_refreshToolWatchers(){this.removeHandles(Hh),this._forEachTool(e=>{if(e instanceof k){let t=I(()=>[e.cursor,e.visible,e.editable],()=>{nl(e)||this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs),this._updateCursor()});this.addHandles(t,Hh)}e.manipulators&&this.addHandles([e.manipulators.on("after-remove",t=>{this._manipulatorState.clearPointers(e,this._manipulatorStateEventArgs,!0,t.item.manipulator)}),e.manipulators.on("change",()=>{this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()})],Hh)}),this._manipulatorState.updateHoveredStateFromKnownPointers(this._forEachTool),this._updateCursor()}_updateToolEditableFlag(e){e.setEditableFlag?.(Ea.MANAGER,this.activeTool==null||e===this.activeTool)}_updateCursor(){let e=this._manipulatorState.cursor;e==null&&this._forEachTool(t=>!(t.cursor==null||!t.visible)&&(e=t.cursor,!0)),this._get("cursor")!==e&&this._set("cursor",e)}_removeIncompleteTools(e){this.tools.filter(t=>(e==null||t!==e)&&!t.created&&t.removeIncompleteOnCancel).forEach(t=>{this.tools.remove(t)})}get test(){}};c([d({constructOnly:!0,nonNullable:!0})],Ji.prototype,"view",void 0),c([d({value:null})],Ji.prototype,"activeTool",null),c([d({readOnly:!0,type:W})],Ji.prototype,"tools",void 0),c([d({readOnly:!0})],Ji.prototype,"cursor",void 0),c([d({readOnly:!0})],Ji.prototype,"updating",null),c([d()],Ji.prototype,"_interacting",void 0),c([d({readOnly:!0})],Ji.prototype,"interacting",null),Ji=c([b("esri.views.ToolViewManager")],Ji);var Cs=class extends k{constructor(e){super(),this.nativeIndex=null,this._detectedDeviceType="unknown",e.mapping==="standard"?this._detectedDeviceType="standard":tD.test(e.id)?this._detectedDeviceType="spacemouse":this._detectedDeviceType="unknown",this.nativeIndex=e.index}get native(){let e=navigator.getGamepads?navigator.getGamepads():[];return this.nativeIndex!=null&&this.nativeIndex<e.length?e[this.nativeIndex]:null}get deviceType(){return this._detectedDeviceType}get axisThreshold(){return iD[this.deviceType]}};c([d({nonNullable:!0,readOnly:!0})],Cs.prototype,"nativeIndex",void 0),c([d({type:String,readOnly:!0})],Cs.prototype,"deviceType",null),c([d({type:Number,readOnly:!0})],Cs.prototype,"axisThreshold",null),Cs=c([b("esri.views.input.gamepad.GamepadInputDevice")],Cs);var Ts=Cs,tD=new RegExp("^(3dconnexion|space(mouse|navigator|pilot|explorer))","i"),iD={standard:.15,spacemouse:.025,unknown:0};var ol=class extends k{constructor(...e){super(...e),this.devices=new W,this.enabledFocusMode="document"}};c([d({type:W.ofType(Ts),readOnly:!0})],ol.prototype,"devices",void 0),c([d({type:["document","view","none"]})],ol.prototype,"enabledFocusMode",void 0),ol=c([b("esri.views.input.gamepad.GamepadSettings")],ol);var mb=ol;var cd=class extends k{constructor(){super(...arguments),this.gamepad=new mb}};c([d({readOnly:!0})],cd.prototype,"gamepad",void 0),cd=c([b("esri.views.input.Input")],cd);var fb=cd;var bo=class extends k{constructor(e){super(e),this.enabled=!0,this.device=null,this.mode="pan",this.tiltDirection="forward-down",this.velocityFactor=1}};c([d({type:Boolean,nonNullable:!0})],bo.prototype,"enabled",void 0),c([d({type:Ts})],bo.prototype,"device",void 0),c([d({type:["pan","zoom"],nonNullable:!0})],bo.prototype,"mode",void 0),c([d({type:["forward-down","forward-up"],nonNullable:!0})],bo.prototype,"tiltDirection",void 0),c([d({type:Number,nonNullable:!0})],bo.prototype,"velocityFactor",void 0),bo=c([b("esri.views.navigation.gamepad.GamepadSettings")],bo);var Bh=bo;var er=class extends k{constructor(e){super(e),this.browserTouchPanEnabled=!0,this.gamepad=new Bh,this.momentumEnabled=!0,this.mouseWheelZoomEnabled=!0}get effectiveMomentumEnabled(){return this.momentumEnabled&&!wc()}};c([d({type:Boolean})],er.prototype,"browserTouchPanEnabled",void 0),c([d({type:Bh,nonNullable:!0})],er.prototype,"gamepad",void 0),c([d({type:Boolean})],er.prototype,"momentumEnabled",void 0),c([d({type:Boolean})],er.prototype,"mouseWheelZoomEnabled",void 0),er=c([b("esri.views.navigation.Navigation")],er);var Gh=er;var zh,jh=null;function nD(e){return D(this,null,function*(){jh||(jh=import("./chunk-FRBVXS3A.js").then(t=>zh=t)),yield jh,nt(e)})}function Uh(e,t,n,i){return D(this,null,function*(){if(!e)return null;let o=e.spatialReference;return pc()||mc(o,t)?Ki(e,t):zh?zh.projectGeometry(e,t,n,i):(yield Promise.race([nD(i),hc(i)]),Uh(e,t,n,i))})}var ge=class extends k{constructor(e){super(e),this.required={tileInfo:!1,heightModelInfo:!1,extent:!1},this.defaultSpatialReference=null,this.userSpatialReference=null,this.sourcePreloadCount=10,this.priorityCollection=null,this.requiresExtentInSpatialReference=!0,this.suspended=!1,this._projectExtentTask={task:null,input:null,output:null,spatialReference:null}}destroy(){this._projectExtentTask.task&&(this._projectExtentTask.task=Pn(this._projectExtentTask.task)),this._set("map",null)}get ready(){return!this._spatialReferenceTask.updating&&!this._tileInfoTask.updating&&!this._extentTask.updating}get heightModelInfoReady(){return!this._heightModelInfoTask.updating}get spatialReference(){return this.userSpatialReference??this._spatialReferenceTask.spatialReference}get extent(){return this._extentTask.extent}get heightModelInfo(){return this._heightModelInfoTask.heightModelInfo}get vcsWkid(){return this._heightModelInfoTask.vcsWkid}get latestVcsWkid(){return this._heightModelInfoTask.latestVcsWkid}get viewingMode(){return this.userSpatialReference==null||this.userSpatialReference.equals(this._spatialReferenceTask.spatialReference)?this._spatialReferenceTask.viewingMode:null}get tileInfo(){return this._tileInfoTask.tileInfo}get mapCollections(){let e=this.map?.(),t=[];return this.priorityCollection!=null&&t.push(this.priorityCollection),t.push({parent:e?.basemap,layers:e?.basemap?.baseLayers},{layers:e?.layers},{parent:e?.ground,layers:e?.ground?.layers},{parent:e?.basemap,layers:e?.basemap?.referenceLayers}),t}get _allLayers(){return this._collectLayers(this.mapCollections)}get _spatialReferenceTask(){if(this.suspended)return this._get("_spatialReferenceTask")??{updating:!1};let{layers:e,updating:t}=this._allLayers,n=null;for(let o of e){let r=this._getSupportedSpatialReferences(o);if(r.length>0){let s=this._narrowDownSpatialReferenceCandidates(n,r);s!=null&&(n=s)}if(n!=null&&n.length===1)break}if(t&&(n==null||n.length!==1))return{updating:!0};let i=this._pickSpatialReferenceCandidate(n);return{spatialReference:i?.spatialReference??null,viewingMode:i?.viewingMode??null,updating:!1}}get _tileInfoTask(){if(!this.required.tileInfo)return this._get("_tileInfoTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};let{layers:e,updating:t}=this._collectLayers([{parent:this.map?.()?.basemap,layers:this.map?.()?.basemap?.baseLayers},{layers:this.map?.()?.layers}]);if(e&&e.length>0&&"tileInfo"in e[0]){let n=e[0].tileInfo;return{tileInfo:n?.spatialReference.equals(this.spatialReference)?n:null,updating:!1}}return{updating:t}}get _heightModelInfoTask(){if(!this.required.heightModelInfo||this.suspended&&this._get("_heightModelInfoTask")?.heightModelInfo)return this._get("_heightModelInfoTask")??{updating:!1};let{layers:e,updating:t}=this._allLayers;for(let n of e)if(Xy(n)){let i=Jy(n);if(i)return{heightModelInfo:i,vcsWkid:n.spatialReference?.vcsWkid,latestVcsWkid:n.spatialReference?.latestVcsWkid,updating:!1}}return{updating:t}}get _extentCandidatesTask(){if(this.suspended||!this.required.extent)return this._get("_extentCandidatesTask")??{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};let e=this._allLayers,t=e.updating,n=[];for(let i of e.layers){let o="fullExtents"in i&&i.fullExtents||(i.fullExtent!=null?[i.fullExtent]:[]),r=this.requiresExtentInSpatialReference?null:o[0],s=o.find(a=>a.spatialReference.equals(this.spatialReference))??r;if(s)return{candidates:[{extent:s,layer:i}],updating:!1};if(this._getSupportedSpatialReferences(i).length>0)for(let a of o)n.push({extent:a,layer:i})}return{candidates:n,updating:t}}get _extentTask(){let{candidates:e,updating:t}=this._extentCandidatesTask;if(t)return{updating:t};if(e==null||e.length===0)return{updating:!1};if(!this.spatialReference)return{updating:this._spatialReferenceTask.updating};let n=this._pickExtentCandidate(e),i=this.spatialReference;return n.extent.equals(this._projectExtentTask.input)&&i.equals(this._projectExtentTask.spatialReference)?{extent:this._projectExtentTask.output,updating:this._projectExtentTask.task!=null&&!this._projectExtentTask.task.finished}:(this._projectExtentTask.task!=null&&(this._projectExtentTask.task=Pn(this._projectExtentTask.task)),this._projectExtentTask={input:n.extent.clone(),output:null,spatialReference:i.clone(),task:ho(o=>D(this,null,function*(){try{let r=yield Uh(n.extent,i,"portalItem"in n.layer?n.layer.portalItem:void 0,o);this._projectExtentTask=B(v({},this._projectExtentTask),{task:null,output:r})}catch{if(Kl(o))return;this._projectExtentTask=B(v({},this._projectExtentTask),{task:null})}}))},{updating:!0})}_narrowDownSpatialReferenceCandidates(e,t){if(e==null)return t;let n=new Array;for(let i of e)for(let o of t){if(!i.spatialReference.equals(o.spatialReference))continue;let r=oD(i.viewingMode,o.viewingMode);if(r!==!1){n.push({spatialReference:i.spatialReference,viewingMode:r});break}}return n.length>0?n:null}_pickSpatialReferenceCandidate(e){let t=this.defaultSpatialReference;return e==null||e.length<1?t?{spatialReference:t,viewingMode:null}:null:(t!=null&&e.length>1&&e.some(({spatialReference:n})=>n.equals(t))&&(e=e.filter(({spatialReference:n})=>n.equals(t))),e.length>1&&e.some(({viewingMode:n})=>n!==dp.Local)&&(e=e.filter(({viewingMode:n})=>n!==dp.Local)),e[0])}_getSupportedSpatialReferences(e){let t="supportedSpatialReferences"in e&&e.supportedSpatialReferences||(e.spatialReference?[e.spatialReference]:[]);if(t.length===0)return[];let n=[];for(let i of t){let o=this.getSpatialReferenceSupport(i,e);if(o!=null){let r=o.constraints??[{spatialReference:i,viewingMode:null}];for(let{spatialReference:s,viewingMode:a}of r)this.requiresExtentInSpatialReference&&this.userSpatialReference!=null&&!s.equals(this.userSpatialReference)||n.push({spatialReference:s,viewingMode:a})}}return n}_pickExtentCandidate(e){let t=this.spatialReference;return e.find(({extent:n})=>t.equals(n.spatialReference))||e[0]}_collectLayers(e){if(this._loadMaybe(this.map?.())!=="loaded")return{layers:[],updating:!0};let t=new $h;for(let n of e)if(this._collectCollection(n,t),t.preloading===this.sourcePreloadCount)break;return{layers:t.layers,updating:t.updating}}_collectCollection(e,t){if(e.layers){switch(this._loadMaybe(e.parent)){case"loading":return t.updating=!0,void++t.preloading;case"failed":return}for(let n of e.layers){switch(this._loadMaybe(n)){case"failed":continue;case"loading":t.updating=!0,++t.preloading;break;case"loaded":t.updating||t.layers.push(n),"layers"in n&&this._collectCollection({layers:n.layers},t)}if(t.preloading===this.sourcePreloadCount)break}}}_loadMaybe(e){return e&&"loadStatus"in e&&e.loadStatus!=null?e.loadStatus==="not-loaded"?(e.load().catch(t=>{Qr(t)||console.log(t)}),"loading"):e.loadStatus:"loaded"}};c([d()],ge.prototype,"required",void 0),c([d({constructOnly:!0})],ge.prototype,"map",void 0),c([d({constructOnly:!0})],ge.prototype,"getSpatialReferenceSupport",void 0),c([d()],ge.prototype,"defaultSpatialReference",void 0),c([d()],ge.prototype,"userSpatialReference",void 0),c([d()],ge.prototype,"sourcePreloadCount",void 0),c([d()],ge.prototype,"priorityCollection",void 0),c([d()],ge.prototype,"requiresExtentInSpatialReference",void 0),c([d()],ge.prototype,"suspended",void 0),c([d({readOnly:!0})],ge.prototype,"ready",null),c([d({readOnly:!0})],ge.prototype,"heightModelInfoReady",null),c([d({readOnly:!0})],ge.prototype,"spatialReference",null),c([d({readOnly:!0})],ge.prototype,"extent",null),c([d({readOnly:!0})],ge.prototype,"heightModelInfo",null),c([d({readOnly:!0})],ge.prototype,"vcsWkid",null),c([d({readOnly:!0})],ge.prototype,"latestVcsWkid",null),c([d({readOnly:!0})],ge.prototype,"viewingMode",null),c([d({readOnly:!0})],ge.prototype,"tileInfo",null),c([d({readOnly:!0})],ge.prototype,"mapCollections",null),c([d({readOnly:!0})],ge.prototype,"_allLayers",null),c([d({readOnly:!0})],ge.prototype,"_spatialReferenceTask",null),c([d({readOnly:!0})],ge.prototype,"_tileInfoTask",null),c([d({readOnly:!0})],ge.prototype,"_heightModelInfoTask",null),c([d({readOnly:!0})],ge.prototype,"_extentCandidatesTask",null),c([d()],ge.prototype,"_extentTask",null),c([d()],ge.prototype,"_projectExtentTask",void 0),ge=c([b("esri.views.support.DefaultsFromMap")],ge);var $h=class{constructor(){this.layers=new Array,this.preloading=-1,this.updating=!1}};function oD(e,t){return e!=null?t!=null?e===t&&e:e:t}var rl,z=rl=class extends Be.EventedMixin(n_(k)){constructor(e){super(e),this._userSpatialReference=null,this._cursor=null,this.handles=new Yl,this.updatingHandles=new hn,this.allLayerViews=new Yo({getCollections:()=>[this.basemapView?.baseLayerViews,this.groundView?.layerViews,this.layerViews,this.basemapView?.referenceLayerViews],getChildrenFunction:rD}),this.groundView=null,this.basemapView=null,this.fatalError=null,this.graphics=new hp,this.analyses=new Ja,this.typeSpecificPreconditionsReady=!0,this.layerViews=new W,this.magnifier=new Rh,this.padding={left:0,top:0,right:0,bottom:0},this.ready=!1,this.spatialReferenceWarningDelay=1e3,this.supportsGround=!0,this.timeExtent=null,this.type=null,this.scale=null,this.updating=!1,this.initialExtentRequired=!0,this.input=new fb,this.navigation=new Gh,this.layerViewManager=null,this.analysisViewManager=null,this.isHeightModelInfoRequired=!1,this.width=null,this.height=null,this.resizing=!1,this.suspended=!1,this.viewEvents=new ad(this),this.persistableViewModels=new W,this._isValid=!1,this._readyCycleForced=!1,this._lockedSpatialReference=null,this._userTimeZone=null,this._lockedTimeZone=null,this.theme=null,this.handles.add(I(()=>this.preconditionsReady,t=>{let n=this.ready;if(t?(this._lockedSpatialReference=this.spatialReference,this._lockedTimeZone=this.timeZone,rl.views.add(this)):(this._lockedSpatialReference=null,rl.views.remove(this)),this.notifyChange("spatialReference"),!t&&n)this.toolViewManager?.detach(),this.analysisViewManager!=null&&this.analysisViewManager.detach(),this.layerViewManager?.clear(),this._teardown();else if(t&&!n){try{this._startup()}catch(i){return void queueMicrotask(()=>{this.fatalError=new ne("startup-error",null,i)})}this.analysisViewManager!=null&&this.analysisViewManager.attach(),this.toolViewManager.attach()}},Kt))}initialize(){this.addResolvingPromise(Promise.all([this.loadAsyncDependencies(),this.validate()]).then(()=>(this._isValid=!0,Rn(()=>this.ready)))),this.basemapView=new Vn({view:this}),this.layerViewManager=new ib({view:this,layerViewImporter:{importLayerView:e=>this.importLayerView(e),hasLayerViewModule:e=>this.hasLayerViewModule(e)},supportsGround:this.supportsGround}),this.toolViewManager=new Ji({view:this}),this._setupSpatialReferenceLogger(),this.selectionManager=new sb({view:this}),this.addHandles([I(()=>this.initialExtentRequired,e=>this.defaultsFromMap.required=B(v({},this.defaultsFromMap.required),{extent:e}),ke),I(()=>this.ready,e=>{this.defaultsFromMap&&(this.defaultsFromMap.suspended=e,this.defaultsFromMap.userSpatialReference=e?this.spatialReference:this._userSpatialReference)},Kt),I(()=>this._userSpatialReference,e=>{this.defaultsFromMap&&(this.defaultsFromMap.userSpatialReference=e)},ke)])}_setupSpatialReferenceLogger(){let e=null;this.addHandles([I(()=>this.defaultsFromMap?.ready,t=>{let n=this.map?.allLayers.length>0;if(t&&!this.spatialReference&&n){if(e!=null)return;let i=Yt(()=>e=Pn(e));e=ho(o=>D(this,null,function*(){try{yield Bg(this.spatialReferenceWarningDelay,null,o)}catch{return}finally{e=null}q.getLogger(this).warn("#spatialReference","no spatial reference could be derived from the currently added map layers")})),this.addHandles(i,"spatial-reference-logger-task")}else this.removeHandles("spatial-reference-logger-task")},{sync:!0})])}destroy(){this.destroyed||(rl.views.remove(this),this.viewEvents.destroy(),this.allLayerViews.destroy(),this.navigation&&(this.navigation.destroy(),this._set("navigation",null)),this.graphics=re(this.graphics),this.analyses=re(this.analyses),this.defaultsFromMap.destroy(),this._set("defaultsFromMap",null),re(this.analysisViewManager),this.toolViewManager=re(this.toolViewManager),this.layerViewManager=re(this.layerViewManager),this.selectionManager=re(this.selectionManager),this.basemapView=re(this.basemapView),this.groundView?.destroy(),this.layerViews?.forEach(e=>e.destroy()),this.layerViews.length=0,this.invalidate(),this._emitter.clear(),this.handles.destroy(),this.map=re(this.map),this.updatingHandles.destroy())}_startup(){this._set("ready",!0)}_teardown(){this._set("ready",!1)}whenReady(){return Promise.resolve(this)}toMap(){return q.getLogger(this).error("#toMap()","Not implemented on this instance of View"),null}get activeTool(){return this.toolViewManager?.activeTool}set activeTool(e){this.toolViewManager&&(this.toolViewManager.activeTool=e)}get animation(){return this._get("animation")}set animation(e){this._set("animation",e)}get center(){return null}get _defaultsFromMapSettings(){return{}}get defaultsFromMap(){return new ge(v({required:{tileInfo:!1,heightModelInfo:!1,extent:!1},map:()=>this.map,getSpatialReferenceSupport:(e,t)=>this.getSpatialReferenceSupport(e,t)},this._defaultsFromMapSettings))}get extent(){return this._get("extent")}set extent(e){this._set("extent",e)}get heightModelInfo(){return this.getDefaultHeightModelInfo()}get interacting(){return this.navigating}get navigating(){return!1}get preconditionsReady(){return!(this.fatalError||!this._isValid||this._readyCycleForced||!this.map||wa.isLoadable(this.map)&&!this.map.loaded||this.width===0||this.height===0||!this.spatialReference||!this._validateSpatialReference(this.spatialReference)||!this._lockedSpatialReference&&!this.defaultsFromMap?.ready||!this.typeSpecificPreconditionsReady)}get resolution(){return 0}set map(e){e!==this._get("map")&&(e?.destroyed&&(q.getLogger(this).warn("#map","The provided map is already destroyed",{map:e}),e=null),wa.isLoadable(e)&&e.load().catch(()=>{}),this.constructed&&!this.destroyed&&(this.forceReadyCycle(),this._lockedSpatialReference=null),this._set("map",e))}get spatialReference(){let e=this._userSpatialReference||this._lockedSpatialReference||this.getDefaultSpatialReference()||null;if(e&&this.defaultsFromMap?.required?.heightModelInfo){let t=e.clone();return t.vcsWkid=this.defaultsFromMap.vcsWkid,t.latestVcsWkid=this.defaultsFromMap.latestVcsWkid,t}return e}set spatialReference(e){let t=!Xr(e,this._get("spatialReference"));this._set("_userSpatialReference",e),t&&(this._set("spatialReference",e),this._spatialReferenceChanged(e))}_spatialReferenceChanged(e){}get stationary(){return!this.animation&&!this.navigating&&!this.resizing}get timeZone(){return this._userTimeZone??this._lockedTimeZone??this.getDefaultTimeZone()??qu}set timeZone(e){let t=new Set(["etc/utc","etc/gmt","gmt"]),n=new Set(Intl.supportedValuesOf("timeZone").map(i=>i.toLowerCase()));this._userTimeZone=e,e===qu||e===e_||t.has(e.toLowerCase())||n.has(e.toLowerCase())||q.getLogger(this).warn("#timeZone",`the parsed value '${e}' may not be a valid IANA time zone`)}get tools(){return this.toolViewManager?.tools}get initialExtent(){return this.defaultsFromMap?.extent}get cursor(){return this.toolViewManager?.cursor??this._cursor??"default"}set cursor(e){this._cursor=e,this.notifyChange("cursor")}get size(){return[this.width,this.height]}get effectiveTheme(){return this.theme??new sd}whenLayerView(e){return this.layerViewManager?.whenLayerView(e)??Promise.reject()}getDefaultSpatialReference(){return this.defaultsFromMap?.spatialReference}getDefaultHeightModelInfo(){return(this.map&&"heightModelInfo"in this.map?this.map.heightModelInfo:void 0)??this.defaultsFromMap?.heightModelInfo??null}getDefaultTimeZone(){return null}importLayerView(e){throw new ne("importLayerView() not implemented")}hasLayerViewModule(e){return!1}validate(){return D(this,null,function*(){})}loadAsyncDependencies(){return D(this,null,function*(){})}invalidate(){this._isValid=!1}getSpatialReferenceSupport(){return{constraints:null}}_validateSpatialReference(e){return this.getSpatialReferenceSupport(e)!=null}when(e,t){return this.isResolved()&&!this.ready&&q.getLogger(this).warn("#when()","Calling view.when() while the view is no longer ready but was already resolved once will resolve immediately. Use reactiveUtils.whenOnce(() => view.ready).then(...) instead."),super.when(e,t)}forceReadyCycle(){this.ready&&(pi(()=>this.destroyed||this.preconditionsReady===!1,()=>this._readyCycleForced=!1,{once:!0}),this._readyCycleForced=!0)}addAndActivateTool(e){this.toolViewManager.tools.add(e),this.activeTool=e}tryFatalErrorRecovery(){this.fatalError=null}};z.views=new W,c([d()],z.prototype,"_userSpatialReference",void 0),c([d()],z.prototype,"activeTool",null),c([d({readOnly:!0})],z.prototype,"allLayerViews",void 0),c([d()],z.prototype,"groundView",void 0),c([d()],z.prototype,"animation",null),c([d()],z.prototype,"basemapView",void 0),c([d()],z.prototype,"center",null),c([d({readOnly:!0})],z.prototype,"_defaultsFromMapSettings",null),c([d()],z.prototype,"defaultsFromMap",null),c([d()],z.prototype,"fatalError",void 0),c([d({type:pn})],z.prototype,"extent",null),c([d(pp(hp,"graphics"))],z.prototype,"graphics",void 0),c([d(pp(Ja,"analyses"))],z.prototype,"analyses",void 0),c([d({readOnly:!0,type:S_})],z.prototype,"heightModelInfo",null),c([d({readOnly:!0})],z.prototype,"interacting",null),c([d({readOnly:!0})],z.prototype,"navigating",null),c([d({readOnly:!0,dependsOn:["fatalError","_isValid","_readyCycleForced","map","map.loaded?","width","height","spatialReference","_lockedSpatialReference","defaultsFromMap.ready","typeSpecificPreconditionsReady"]})],z.prototype,"preconditionsReady",null),c([d({readOnly:!0})],z.prototype,"typeSpecificPreconditionsReady",void 0),c([d({type:W,readOnly:!0})],z.prototype,"layerViews",void 0),c([d()],z.prototype,"resolution",null),c([d({type:Rh})],z.prototype,"magnifier",void 0),c([d({value:null,type:nd})],z.prototype,"map",null),c([d()],z.prototype,"padding",void 0),c([d({readOnly:!0})],z.prototype,"ready",void 0),c([d({type:es})],z.prototype,"spatialReference",null),c([d()],z.prototype,"spatialReferenceWarningDelay",void 0),c([d()],z.prototype,"stationary",null),c([d({readOnly:!0})],z.prototype,"supportsGround",void 0),c([d({type:V_})],z.prototype,"timeExtent",void 0),c([d({type:String,nonNullable:!0})],z.prototype,"timeZone",null),c([d()],z.prototype,"tools",null),c([d()],z.prototype,"toolViewManager",void 0),c([d({readOnly:!0})],z.prototype,"type",void 0),c([d({type:Number})],z.prototype,"scale",void 0),c([d({readOnly:!0})],z.prototype,"updating",void 0),c([d({readOnly:!0})],z.prototype,"initialExtentRequired",void 0),c([d({readOnly:!0})],z.prototype,"initialExtent",null),c([d()],z.prototype,"cursor",null),c([d({readOnly:!0})],z.prototype,"input",void 0),c([d({type:Gh,nonNullable:!0})],z.prototype,"navigation",void 0),c([d()],z.prototype,"layerViewManager",void 0),c([d()],z.prototype,"analysisViewManager",void 0),c([d()],z.prototype,"selectionManager",void 0),c([d()],z.prototype,"width",void 0),c([d()],z.prototype,"height",void 0),c([d({readOnly:!0})],z.prototype,"resizing",void 0),c([d({value:null,readOnly:!0})],z.prototype,"size",null),c([d({readOnly:!0})],z.prototype,"suspended",void 0),c([d({readOnly:!0})],z.prototype,"viewEvents",void 0),c([d({readOnly:!0})],z.prototype,"persistableViewModels",void 0),c([d()],z.prototype,"_isValid",void 0),c([d()],z.prototype,"_readyCycleForced",void 0),c([d()],z.prototype,"_lockedSpatialReference",void 0),c([d()],z.prototype,"_userTimeZone",void 0),c([d()],z.prototype,"_lockedTimeZone",void 0),c([d({type:sd})],z.prototype,"theme",void 0),c([d({readOnly:!0,type:sd})],z.prototype,"effectiveTheme",null),z=rl=c([b("esri.views.View")],z);var gb=z;function rD(e){return e.layerViews}var wo=class extends o_{constructor(e){super(e),this.state="running",this.target=null,this._resolver=null}initialize(){this._resolver=zo(),this.addResolvingPromise(this._resolver.promise)}get done(){return this.state==="finished"||this.state==="stopped"}stop(){this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","stopped"),this._resolver?.reject(new ne("ViewAnimation stopped")))}finish(){this.state!=="stopped"&&this.state!=="finished"&&(this._set("state","finished"),this._resolver?.resolve())}update(e,t){t||(t=jg(e)?"waiting-for-target":"running"),this._set("target",e),this._set("state",t)}};c([d({readOnly:!0})],wo.prototype,"done",null),c([d({readOnly:!0,type:String})],wo.prototype,"state",void 0),c([d()],wo.prototype,"target",void 0),wo=c([b("esri.views.ViewAnimation")],wo),function(e){e.State={RUNNING:"running",STOPPED:"stopped",FINISHED:"finished",WAITING_FOR_TARGET:"waiting-for-target"}}(wo||(wo={}));var sl=wo;function sD(e){return e instanceof Float32Array&&e.length>=2}function aD(e){return Array.isArray(e)&&e.length>=2}function dd(e){return sD(e)||aD(e)}var Wh,Bn=[0,0],So=Wh=class extends Jr{constructor(e){super(e),this._viewpoint2D={center:Mi(),rotation:0,scale:0,spatialReference:void 0},this.center=[0,0],this.extent=new pn,this.id=0,this.inverseTransform=Tc(),this.resolution=0,this.rotation=0,this.scale=0,this.transform=Tc(),this.transformNoRotation=Tc(),this.displayMat3=Dc(),this.displayViewMat3=Dc(),this.viewMat3=Dc(),this.viewMat2d=vy(),this.worldScreenWidth=0,this.size=[0,0]}set pixelRatio(e){this._set("pixelRatio",e),this._update()}set size(e){this._set("size",e),this._update()}set viewpoint(e){if(e){let t=this._viewpoint2D,n=e.targetGeometry;t.center[0]=n.x,t.center[1]=n.y,t.rotation=e.rotation,t.scale=e.scale,t.spatialReference=n.spatialReference}this._update()}copy(e){let t=this.size,n=this.viewpoint;return n&&t?(this.viewpoint=Di(n,e.viewpoint),this._set("size",os(t,e.size))):(this.viewpoint=e.viewpoint.clone(),this._set("size",[e.size[0],e.size[1]])),this._set("pixelRatio",e.pixelRatio),this}clone(){return new Wh({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(e,t,n){return dd(t)?Zo(e,t,this.inverseTransform):(Bn[0]=t,Bn[1]=n,Zo(e,Bn,this.inverseTransform))}toScreen(e,t,n){return dd(t)?Zo(e,t,this.transform):(Bn[0]=t,Bn[1]=n,Zo(e,Bn,this.transform))}toScreenNoRotation(e,t,n){return dd(t)?Zo(e,t,this.transformNoRotation):(Bn[0]=t,Bn[1]=n,Zo(e,Bn,this.transformNoRotation))}wrapMapCoordinate(e,t){os(e,t);let[n]=t,[i]=this.center,{extent:o,spatialReference:r}=this,{xmin:s,xmax:a}=o;if(r.isWrappable){let l=c0(r)/2;s=Math.max(s,i-l),a=Math.min(a,i+l)}return(n<s||n>a)&&(e[0]=X_(n,i,r)),e}getScreenTransform(e,t){let{center:n}=this._viewpoint2D,i=this._get("pixelRatio")||1,o=this._get("size");return s0(e,n,o,t,0,i),e}_update(){let{center:e,spatialReference:t,scale:n,rotation:i}=this._viewpoint2D,o=this._get("pixelRatio")||1,r=this._get("size"),s=new mi({targetGeometry:new Fe(e[0],e[1],t),scale:n,rotation:i});if(this._set("viewpoint",s),!r||!t||!n)return;this.resolution=o0(s),this.rotation=i,this.scale=n,this.spatialReference=t,os(this.center,e);let a=r[0]!==0?2/r[0]:0,l=r[1]!==0?-2/r[1]:0;sy(this.displayMat3,a,0,0,0,l,0,-1,1,1);let u=ay(this.viewMat3),p=op(r[0]/2,r[1]/2),h=op(-r[0]/2,-r[1]/2),m=D_(i);ip(u,u,p),cy(u,u,m),ip(u,u,h),ly(this.displayViewMat3,this.displayMat3,u);let f=yy(this.viewMat2d,p);return gy(f,f,m),_y(f,f,h),i0(this.extent,s,r),a0(this.transform,s,r,o),fy(this.inverseTransform,this.transform),l0(this.transformNoRotation,s,r,o),this.worldScreenWidth=d0(this.spatialReference,this.resolution),this._set("id",this.id+1),this}};c([d({readOnly:!0})],So.prototype,"id",void 0),c([d({value:1,json:{write:!0}})],So.prototype,"pixelRatio",null),c([d({json:{write:!0}})],So.prototype,"size",null),c([d()],So.prototype,"spatialReference",void 0),c([d({type:mi,json:{write:!0}})],So.prototype,"viewpoint",null),So=Wh=c([b("esri.views.2d.ViewState")],So);var qh=So;var Zh,Yh,Gn=Zh=class extends k{constructor(){super(...arguments),this.left=0,this.top=0,this.right=0,this.bottom=0}clone(){return new Zh({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};c([d()],Gn.prototype,"left",void 0),c([d()],Gn.prototype,"top",void 0),c([d()],Gn.prototype,"right",void 0),c([d()],Gn.prototype,"bottom",void 0),Gn=Zh=c([b("esri.views.2d.PaddedViewState.Padding")],Gn);var Ms=Yh=class extends qh{constructor(...e){super(...e),this.paddedViewState=new qh,this._updateContent=(()=>{let t=Mi();return()=>{let n=this._get("size"),i=this._get("padding");if(!n||!i)return;let o=this.paddedViewState;ey(t,i.left+i.right,i.top+i.bottom),Ta(t,n,t),os(o.size,t);let r=o.viewpoint;r&&(this.viewpoint=r)}})(),this.addHandles(I(()=>[this.size,this.padding],()=>this._updateContent(),Kt)),this.padding=new Gn,this.size=[0,0]}set padding(e){this._set("padding",e||new Gn)}set viewpoint(e){if(e){this.paddedViewState.viewpoint=e;let t=this._viewpoint2D;if(this._get("padding")){let n=e.clone();p0(n,e,this._get("size"),this._get("padding"));let i=n.targetGeometry;t.center[0]=i.x,t.center[1]=i.y,t.rotation=n.rotation,t.scale=n.scale,t.spatialReference=i.spatialReference}else{let n=e.targetGeometry;t.center[0]=n.x,t.center[1]=n.y,t.rotation=e.rotation,t.scale=e.scale,t.spatialReference=n.spatialReference}this._update()}}clone(){return new Yh({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};c([d()],Ms.prototype,"paddedViewState",void 0),c([d({type:Gn})],Ms.prototype,"padding",null),c([d()],Ms.prototype,"viewpoint",null),Ms=Yh=c([b("esri.views.2d.PaddedViewState")],Ms);var Ds=Ms;var al=class{constructor(t){this._view=t,this.viewpoint=new mi({targetGeometry:new Fe,scale:0,rotation:0})}get view(){return this._view}get size(){let[t,n]=this._view.size;return Math.sqrt(t*t+n*n)}get scale(){return this.viewpoint.scale}get rotation(){return this.viewpoint.rotation}get center(){return this.viewpoint.targetGeometry}get scaleToResolutionFactor(){return r0(this.center.spatialReference)}pixelsPerPanAtZoom(t){return 1/(t*this.scaleToResolutionFactor)}zoomAtPixelsPerPan(t){return 1/(t*this.scaleToResolutionFactor)}pixelsPerRotateAtZoom(t){return this.size/2}compareTo(t,n){n.pan=b_(this.center,t.center);let i=Math.abs(t.rotation-this.rotation);i=i>=180?360-i:i,n.rotate=rc(i),n.sourceZoom=this.scale,n.targetZoom=t.scale}interpolate(t,n,i){let{pan:o,rotate:r,zoom:s,zoomOffset:a}=i,{center:l}=this;l.spatialReference=t.center.spatialReference,l.x=Ca(t.center.x,n.center.x,o),l.y=Ca(t.center.y,n.center.y,o),this.viewpoint.scale=Ca(t.scale,n.scale+a,s);let u=t.rotation,p=n.rotation;Math.abs(p-u)>=180&&(u+=360*(u<p?1:-1)),this.viewpoint.rotation=Ca(u,p,r)}copyFrom(t){Di(this.viewpoint,t.viewpoint),this._view=t.view}};var Kh=e=>e*e,_b=e=>1-Kh(1-e);var lD=e=>2**(10*(e-1)),yb=e=>1-lD(1-e);function Ai(e){let t=2*(e-Math.sqrt((e-1)*e)),n=t/2/e;return i=>i<n?e*i*i:t*i-t+1}function Pi(e,t){return(n,i)=>n<t?t*e(n/t,i):1-e((1-n)/(1-t),i)*(1-t)}var XH=Pi(Ai(1),1),eB=Pi(Ai(1),0),Qh=Pi(Ai(1),.5),tB=Pi(Ai(2),1),iB=Pi(Ai(2),0),nB=Pi(Ai(2),.5),oB=Pi(Ai(3),1),rB=Pi(Ai(3),0),sB=Pi(Ai(3),.5),aB=Pi(Ai(4),1),lB=Pi(Ai(4),0),cB=Pi(Ai(4),.5);var ud=class{constructor(){this.pan=0,this.rotate=0,this.fov=0,this.sourceZoom=0,this.targetZoom=0}};var tr={desiredScreenFlow:2,minDuration:500,maxDuration:8e3},Jh=B(v({},tr),{maxDuration:4e3});var hd=class e{constructor(t){this._createCamera=t,this.compared=new ud,this.segmentStart=0,this.segmentEnd=1,this.settings={desiredScreenFlow:tr.desiredScreenFlow},this.source=t(),this.target=t()}clone(){let t=new e(this._createCamera);return t.copyFrom(this),t}copyFrom(t){this.update(t.source,t.target,t.settings)}update(t,n,i){this.source!==t&&this.source.copyFrom(t),this.target!==n&&this.target.copyFrom(n),this.source.compareTo(this.target,this.compared),this.settings.desiredScreenFlow=i.desiredScreenFlow!=null?i.desiredScreenFlow:tr.desiredScreenFlow,this.desiredPixelFlow=this.settings.desiredScreenFlow*this.target.size,this.halfWindowSize=this.target.size/2}halfWindowPanAtZoom(t){let n=this.target.pixelsPerPanAtZoom(t);return this.halfWindowSize/n}get hasZoom(){return Math.abs(this.compared.sourceZoom-this.compared.targetZoom)>1e-5}get hasPan(){return this.compared.pan>ts()}get hasFov(){return Math.abs(this.compared.fov)>ts()}get hasRotate(){return this.compared.rotate>ts()}};var md=class{constructor(){this.pan=0,this.rotate=0,this.zoom=0,this.fov=0,this.zoomOffset=0}};var bb=class{constructor(){this.segments=new Array}get time(){return this.segments.reduce((e,t)=>e+t.time,0)}interpolateComponentsAt(e,t){e=Math.min(Math.max(e,0),1),e*=this.time;let n=0,i=0,o=this.definition,r=this.segments.reduce((s,a)=>s||a.definition.hasZoom,!1);for(let s=0;s<this.segments.length;s++){let a=this.segments[s],l=a.definition;if(e<=a.time||s===this.segments.length-1){if(this.segmentInterpolateComponentsAt(a,a.time===0?0:e/a.time,t),o.hasPan&&!isNaN(t.pan)&&isFinite(o.compared.pan)?t.pan=(n+l.compared.pan*t.pan)/o.compared.pan:t.pan=1,o.hasRotate&&!isNaN(t.rotate)&&isFinite(o.compared.rotate)?t.rotate=(i+l.compared.rotate*t.rotate)/o.compared.rotate:t.rotate=1,r&&!isNaN(t.zoom)&&isFinite(l.compared.targetZoom)){let{sourceZoom:u,targetZoom:p}=l.compared,h=t.zoom*(p-u)+u,m=this.segments[0].definition.compared.sourceZoom,f=this.segments[this.segments.length-1].definition.compared.targetZoom,w=Math.abs(p-m)>Math.abs(u-m)?p:u;t.zoomOffset=w-f,t.zoom=(h-m)/(w-m)}else t.zoom=1;return t}e-=a.time,n+=l.compared.pan,i+=l.compared.rotate}}segmentInterpolateComponentsAt(e,t,n){e.interpolateComponentsAt(t,n)}};var Es=class{get time(){return this._time}constructor(t){t&&this.update(t)}update(t){t&&(this.definition?this.definition.copyFrom(t):this.definition=t.clone()),this._updatePrecomputedVariables(),this._updatePixelFlow()}_updatePrecomputedVariables(){let t=this.definition,n=t.compared,i=n.sourceZoom,o=n.targetZoom;this._zoomSign=i>o?1:-1,this._panPixelsAtSource=n.pan*t.source.pixelsPerPanAtZoom(i);let r=(t.source.pixelsPerRotateAtZoom(i)+t.target.pixelsPerRotateAtZoom(o))/2;this._rotatePixels=n.rotate*r}_updatePixelFlow(){let t=this.definition.compared.sourceZoom,n=this.definition.compared.targetZoom,{hasZoom:i,hasPan:o,hasRotate:r}=this.definition,s=0,a=0;i&&(o&&(s=(n/t-1)/(-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2*this._panPixelsAtSource)),r&&(a=this._zoomSign*(Math.log(t/n)/Math.LN2)*this.definition.halfWindowSize/this._rotatePixels)),this._zoomPixelFlow=0,this._panPixelFlow=0,this._rotatePixelFlow=0;let l=this.definition.desiredPixelFlow;if(i&&o&&r){let u=s+a+s*a;this._zoomPixelFlow=s*a/u*l,this._panPixelFlow=a/u*l,this._rotatePixelFlow=s/u*l}else if(i&&o){let u=1+s;this._zoomPixelFlow=s/u*l,this._panPixelFlow=1/u*l}else if(i&&r){let u=1+a;this._zoomPixelFlow=a/u*l,this._rotatePixelFlow=1/u*l}else if(o&&r){let u=this._panPixelsAtSource/this._rotatePixels,p=1+u;this._panPixelFlow=u/p*l,this._rotatePixelFlow=1/p*l}else o?this._panPixelFlow=l:i?this._zoomPixelFlow=l:r&&(this._rotatePixelFlow=l);this._time=this.rotateTime??this.zoomTime??this.panTime??this.fovTime??0}get rotateTime(){return this.definition.hasRotate?this._rotatePixels/this._rotatePixelFlow:null}get zoomTime(){return this.definition.hasZoom?this._zoomSign*(Math.log(this.definition.compared.sourceZoom/this.definition.compared.targetZoom)/Math.LN2)*this.definition.halfWindowSize/this._zoomPixelFlow:null}get fovTime(){return this.definition.hasFov?Math.abs(this.definition.compared.fov)/cD:null}get panTime(){if(this.definition.hasPan){if(this.definition.hasZoom){let t=-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2,n=t*this._panPixelsAtSource;return Math.log(n*(this._zoomPixelFlow/this._panPixelFlow)+1)/(t*this._zoomPixelFlow)}return this._panPixelsAtSource/this._panPixelFlow}}_interpolateComponentsZoom(t){if(t===0||t===1)return t;if(this.definition.hasZoom){let n=this.definition.compared.sourceZoom,i=this.definition.compared.targetZoom;return(n*(n/i)**-t-n)/(i-n)}return t}_interpolateComponentsFov(t){if(t===0)return this.definition.segmentStart;if(t===1)return this.definition.segmentEnd;if(this.definition.hasFov){let{segmentStart:n,segmentEnd:i}=this.definition;return n+t*(i-n)}return this.definition.segmentStart}_interpolateComponentsPan(t){if(t===0||t===1)return t;if(this.definition.hasPan&&this.definition.hasZoom){let n=-1/(this._zoomSign*this.definition.halfWindowSize)*this._zoomPixelFlow;return 1/this._panPixelsAtSource*(this._panPixelFlow*(2**(n*t*this._time)-1))/(n*Math.LN2)}return t}_interpolateComponentsRotate(t){return t}interpolateComponentsAt(t,n){t=Math.min(Math.max(t,0),1),n.zoom=this._interpolateComponentsZoom(t),n.pan=this._interpolateComponentsPan(t),n.rotate=this._interpolateComponentsRotate(t),n.zoomOffset=0,n.fov=this._interpolateComponentsFov(t)}},cD=rc(90);function wb(e,t,n){let i=t-e.compared.sourceZoom,o=e.halfWindowPanAtZoom(i);return-e.halfWindowSize*(n.ascensionFactor*Math.LN2*e.compared.pan+o)*Math.log(e.compared.sourceZoom/t)/(e.desiredPixelFlow*Math.LN2*o)}function Sb(e,t,n){let i=1/t,o=Math.log(e.compared.sourceZoom*i),r=1/e.desiredPixelFlow,s=1/Math.LN2,a=t-e.compared.sourceZoom,l=1/a,u=(n.ascensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(a))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*i*r*s*l*u-e.halfWindowSize*o*r*s*l+e.halfWindowSize*o*r*s*u/(a*a)}function Cb(e,t,n){let i=t-e.compared.sourceZoom,o=1/i,r=1/t,s=Math.log(e.compared.sourceZoom*r),a=(n.ascensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(i))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*o*(-2*o*r*a+2*o*s+2*r-2*s*a/(i*i)-a/(t*t))/(e.desiredPixelFlow*Math.LN2)}function Tb(e,t){return-e.halfWindowSize*Math.log(e.compared.sourceZoom/t)/(e.desiredPixelFlow*Math.LN2)}function Mb(e,t){return e.halfWindowSize/(t*e.desiredPixelFlow*Math.LN2)}function Db(e,t){return-e.halfWindowSize/(t*t*e.desiredPixelFlow*Math.LN2)}function Eb(e,t,n){return-e.compared.pan*e.halfWindowSize*(n.ascensionFactor+n.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t))}function xb(e,t,n){return e.compared.pan*e.halfWindowSize*(n.ascensionFactor+n.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t*t))}function Ib(e,t,n){return-2*e.compared.pan*e.halfWindowSize*(n.ascensionFactor+n.descensionFactor-1)/(e.desiredPixelFlow*e.halfWindowPanAtZoom(t*t*t))}function Ob(e,t,n){return e.halfWindowSize*(-e.halfWindowPanAtZoom(t)-n.descensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(e.compared.targetZoom))*Math.log(t/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2*e.halfWindowPanAtZoom(-t+e.compared.targetZoom))}function kb(e,t,n){let i=Math.log(t/e.compared.targetZoom),o=1/e.desiredPixelFlow,r=1/Math.LN2,s=-t+e.compared.targetZoom,a=1/s,l=(-e.halfWindowPanAtZoom(t)-n.descensionFactor*Math.LN2*e.compared.pan+e.halfWindowPanAtZoom(e.compared.targetZoom))/e.halfWindowPanAtZoom(1);return-e.halfWindowSize*i*o*r*a+e.halfWindowSize*i*o*r*l/(s*s)+e.halfWindowSize*o*r*a*l/t}function Ab(e,t,n){let i=t-e.compared.targetZoom,o=1/i,r=1/t,s=Math.log(t/e.compared.targetZoom),a=(e.halfWindowPanAtZoom(t)+n.descensionFactor*Math.LN2*e.compared.pan-e.halfWindowPanAtZoom(e.compared.targetZoom))/e.halfWindowPanAtZoom(1);return e.halfWindowSize*o*(-2*o*r*a-2*o*s+2*r+2*s*a/(i*i)-a/(t*t))/(e.desiredPixelFlow*Math.LN2)}function Pb(e,t){return e.halfWindowSize*Math.log(t/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2)}function Fb(e,t){return e.halfWindowSize/(t*e.desiredPixelFlow*Math.LN2)}function Rb(e,t){return-e.halfWindowSize/(t*t*e.desiredPixelFlow*Math.LN2)}function Lb(e){let t=e.compared.sourceZoom-e.compared.targetZoom;if(t===0)return e.compared.pan*e.halfWindowSize/(e.desiredPixelFlow*e.halfWindowPanAtZoom(e.compared.sourceZoom));let n=Math.LN2*e.compared.pan,i=t,o=e.halfWindowPanAtZoom(i),r=e.halfWindowSize*Math.log(e.compared.sourceZoom/e.compared.targetZoom)/(e.desiredPixelFlow*Math.LN2*o);return e.compared.sourceZoom<=e.compared.targetZoom?r*(n-o):r*(n+o)}function Nb(e,t){let n=dD(e,t),i={ascensionFactor:t.ascensionFactor!=null?t.ascensionFactor:.5,descensionFactor:t.descensionFactor!=null?t.descensionFactor:.5},o=i.ascensionFactor===0,r=i.descensionFactor===0,s=o?Tb:wb,a=o?Mb:Sb,l=o?Db:Cb,u=r?Pb:Ob,p=r?Fb:kb,h=r?Rb:Ab,m=j=>s(e,j,i)+Eb(e,j,i)+u(e,j,i),f=j=>a(e,j,i)+xb(e,j,i)+p(e,j,i),w=j=>l(e,j,i)+Ib(e,j,i)+h(e,j,i),O=m(n),N=Lb(e),R,K=t.maximumIterations||20,Y=t.maximumDistance!=null?t.maximumDistance:1/0;for(R=0;R<K;R++){let j=t.desiredSlope??1e-6,Q=f(n);Math.abs(Q)>j&&(Q+=j);let X=Q/w(n);if(isNaN(X)||n>=Y&&X<0){if(!isFinite(Y))return null;n=Y,O=m(n);break}if(n-=X,n<e.compared.sourceZoom||n<e.compared.targetZoom)return null;let ce=m(n);if(Math.abs(ce-O)/O<=.005)break;O=ce}return O>N*(1-.3)||n<e.compared.sourceZoom||n<e.compared.targetZoom?null:n}function dD(e,t){let n=Math.max(e.compared.sourceZoom,e.compared.targetZoom),i=e.source.zoomAtPixelsPerPan(e.desiredPixelFlow/e.compared.pan)/2;return i<n?t.maximumDistance!=null?n+(t.maximumDistance-n)/2:1.5*n:t.maximumDistance?Math.min(t.maximumDistance,i):i}var fd=class extends bb{constructor(t,n){super(),this._preallocSegments=[new Es,new Es,new Es],this._ascensionSegment=null,this._descensionSegment=null,this.update(t,n)}update(t,n){if(!t)return;this.definition?this.definition.copyFrom(t):this.definition=t.clone();let i=n?.apex?Nb(t,n.apex):null;this.segments.length=0,this._ascensionSegment=null,this._descensionSegment=null,i?this._updateWithApex(i,n?.apex):this._updateWithoutApex()}segmentInterpolateComponentsAt(t,n,i){t.interpolateComponentsAt(n,i),t===this._ascensionSegment?i.zoom=_b(i.zoom):t===this._descensionSegment&&(i.zoom=Kh(i.zoom))}_updateWithApex(t,n){let[i,o,r]=this._preallocSegments,s=n?.ascensionFactor??.5,a=Math.min(1-s,n?.ascensionFactor!=null&&n.descensionFactor!=null?n.descensionFactor:.5),l=1-s-a;i.definition?i.definition.copyFrom(this.definition):i.definition=this.definition.clone(),i.definition.compared.targetZoom=t,i.definition.compared.pan=this.definition.compared.pan*s,i.definition.compared.rotate=this.definition.compared.rotate*s,i.definition.segmentEnd=s,i.update(),this._ascensionSegment=i,this.segments.push(i),l>0&&(o.definition?o.definition.copyFrom(this.definition):o.definition=this.definition.clone(),o.definition.copyFrom(this.definition),o.definition.compared.sourceZoom=t,o.definition.compared.targetZoom=t,o.definition.compared.pan=this.definition.compared.pan*l,o.definition.compared.rotate=this.definition.compared.rotate*l,o.definition.segmentStart=i.definition.segmentEnd,o.definition.segmentEnd=i.definition.segmentEnd+l,o.update(),this.segments.push(o)),r.definition?r.definition.copyFrom(this.definition):r.definition=this.definition.clone(),r.definition.compared.sourceZoom=t,r.definition.compared.pan=this.definition.compared.pan*a,r.definition.compared.rotate=this.definition.compared.rotate*a,r.definition.segmentStart=s+l,r.update(),this._descensionSegment=r,this.segments.push(r)}_updateWithoutApex(){let[t]=this._preallocSegments;t.update(this.definition),this.segments.push(t)}};var uD=new md,Vb=class{get time(){return this._time}get isLinear(){return this.path.segments.length===1}constructor(e){this._time=0,this._easing=Qh,this.definition=new hd(e),this.path=new fd}update(e,t,n){this.definition.update(e,t,n),this.path.update(this.definition,n),this._time=this._applyTimeSettings(Ug(isFinite(this.path.time)?this.path.time:0),n),this._easing=n.easing??(this._time>=1e3?Qh:yb)}cameraAt(e,t){e=Math.min(Math.max(0,e),1),e=this._normalizedEasing(e);let n=this.path.interpolateComponentsAt(e,uD);t.interpolate(this.definition.source,this.definition.target,n)}_normalizedEasing(e){let t=this._easing(0,this._time),n=this._easing(1,this._time);return(this._easing(e,this._time)-t)/(n-t)}_applyTimeSettings(e,t){let n=t.speedFactor!=null?t.speedFactor:1,i=t.minDuration??tr.minDuration/n,o=t.maxDuration??tr.maxDuration/n;return e=t.duration!=null?t.duration:Math.min(Math.max(e/n,i),o)}};var Hb=2e3,pD=64,Xh=class{constructor(t){this._view=t,this._animation=new Vb(()=>new al(this._view)),this._current=new al(this._view)}get _source(){return this._animation.definition.source}get _target(){return this._animation.definition.target}get duration(){return this._animation.time}get animation(){return this._animation}update(t,n,i={}){Di(this._current.viewpoint,t),Di(this._source.viewpoint,t),Di(this._target.viewpoint,n),this._animation.update(this._source,this._target,i)}applyRatio(t,n){this._animation.cameraAt(n,this._current),Di(t,this._current.viewpoint)}},xs=class extends k{constructor(e){super(e),this._animation=null,this._destinationViewState=new Ds,this.updateFunction=null,this.easing=Oy.ease,this.viewpoint=new mi({targetGeometry:new Fe,scale:0,rotation:0}),this._updateTask=qi({postRender:this._postRender.bind(this)}),this._updateTask.pause(),this._transition=new Xh(e.view)}destroy(){this._updateTask=Me(this._updateTask)}get animation(){return this._animation}set animation(e){this._animation=e,this.view.animation=e}animate(e,t,n){this.stop();let i=this.viewpoint;Di(i,t);let o=(typeof n?.easing=="string"?ky(n.easing):n?.easing)||this.easing,r=e.target;this._transition.update(this.viewpoint,r,{apex:{maximumDistance:Math.min(Math.min(t.scale,r.scale)*pD,this.view.constraints.effectiveMinScale),desiredSlope:5e-8},duration:n?.duration,maxDuration:n?.animationMode==="auto"?1/0:n?.maxDuration??Jh.maxDuration,speedFactor:n?.speedFactor,easing:typeof o=="function"?a=>o(a):void 0}),n?.animationMode==="auto"&&(this._destinationViewState.copy(this.view.state),this._destinationViewState.viewpoint=r,hD(this._transition.animation,n,this.view.state,this._destinationViewState)||this._transition.update(this.viewpoint,r,{duration:0}));let s=()=>{this.animation===e&&this._updateTask&&(e.state==="finished"&&(this._transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.animation=null,this.updateFunction=null)};return e.when(s,s),this._startTime=performance.now(),this._updateTask.resume(),this.animation=e,e}animateContinuous(e,t){this.stop(),this.updateFunction=t,this.viewpoint=e;let n=new sl({target:e.clone()}),i=()=>{this.animation===n&&this._updateTask&&(this.animation=null,this.updateFunction=null)};return n.when(i,i),this._startTime=performance.now(),this._updateTask.resume(),this.animation=n,n}stop(){this.animation&&(this.animation.stop(),this.animation=null,this.updateFunction=null)}_postRender(e){let t=this.animation;if(t&&t.state!==sl.State.STOPPED){if(this.updateFunction)this.updateFunction(this.viewpoint,e.deltaTime),this.animation?.update(this.viewpoint);else{let n=performance.now()-this._startTime,i=this._transition.duration,o=i>0?n/i:1,r=o>=1;this._transition.applyRatio(this.viewpoint,o),r&&this.animation?.finish()}this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())}else this._updateTask.pause()}};function hD(e,t,n,i){if(t?.duration!=null)return!0;let{time:o,isLinear:r}=e,s=t?.speedFactor||1,a=t?.maxDuration??Jh.maxDuration/s;if($e("esri-goto-debug")&&(console.log("speed factor:",s),console.log("adjusted duration:		",o),console.log("adjusted max duration:	",a),console.log("is linear:",r)),o>a)return $e("esri-goto-debug")&&console.warn(`failed "auto" heuristic: animations must be shorter than ${a/1e3}s`),!1;if(r){let u=Mi(),p=me(...i.toScreen(u,...n.center)),h=me(...n.toScreen(u,...i.center)),m=h!=null&&h.x>-(1.5-.5)*n.size[0]&&h.x<(1.5+.5)*n.size[0]&&h.y>-(1.5-.5)*n.size[1]&&h.y<(1.5+.5)*n.size[1],f=p!=null&&p.x>-(1.5-.5)*i.size[0]&&p.x<(1.5+.5)*i.size[0]&&p.y>-(1.5-.5)*i.size[1]&&p.y<(1.5+.5)*i.size[1];if($e("esri-goto-debug")&&(console.log(`dest is within ${1.5} screens at start view:`,m),console.log(`start is within ${1.5} screens at dest view:`,f)),o>Hb/s&&!m&&!f)return $e("esri-goto-debug")&&console.warn(`failed "auto" heuristic: linear animations must be...
  - shorter than ${Hb/1e3/s}s, or
  - shorter than ${a/1e3}s and the destination is close enough to the starting screen, or
  - shorter than ${a/1e3}s and the start point is close enough to the destination screen`),!1}return!0}c([d()],xs.prototype,"easing",void 0),c([d()],xs.prototype,"view",void 0),c([d()],xs.prototype,"viewpoint",void 0),xs=c([b("esri.views.2d.AnimationManager")],xs);var Bb=xs;var gd=class{constructor(t){this.view=t,this._stationaryHandle=null,this._frameTaskHandle=null,this._updateParameters=null,this._updateRequested=!1,this.stationary=!0,this.animationInProgress=!1,this.prepare=()=>{this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions,this._updateParameters.targetState.copy(this.view.state),this.view.animation&&!("then"in this.view.animation.target)&&(this._updateParameters.targetState.viewpoint=this.view.animation.target))},this.update=()=>{if(this._updateRequested=!1,this.view?.destroyed)return;let{allLayerViews:n,graphicsView:i,labelManager:o,state:{id:r}}=this.view;n.forEach(this._updateLayerView,this),o!=null&&(o.lastUpdateId!==r&&(o.viewChange(),o.lastUpdateId=r),o.updateRequested&&o.processUpdate(this._updateParameters)),i!=null&&(i.lastUpdateId!==r&&(i.viewChange(),i.lastUpdateId=r),i.updateRequested&&i.processUpdate(this._updateParameters)),this.view.graphicsTileStore.setViewState(this._updateParameters.state),this.animationInProgress||this._updateRequested||this._frameTaskHandle?.pause()}}destroy(){this.stop()}start(){if(this._frameTaskHandle)return;let t=this.view;this.stationary=t.stationary,this._updateParameters={state:t.state,targetState:new Ds,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:t.renderingOptions},this._stationaryHandle=I(()=>t.stationary,n=>{this.stationary=n,this.requestFrame()}),this._frameTaskHandle=qi(this),this.requestUpdate()}stop(){this._frameTaskHandle&&(this._updateRequested=!1,this._stationaryHandle?.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=null,this.stationary=!0,this.animationInProgress=!1)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(t){if(!t.attached)return void this.requestUpdate();let n=this.view.state,i=t.lastUpdateId;i!=null&&(this.stationary||t.moving)||(t.moving=!0),i!==n.id&&t.viewChange(),this.stationary&&t.moving&&(t.moving=!1,t.moveEnd()),t.lastUpdateId=n.id,t.updateRequested&&t.processUpdate(this._updateParameters),"layerViews"in t&&t.layerViews?.forEach(this._updateLayerView,this)}};var ll=class extends k{constructor(e){super(e),this._gotoTask=null}destroy(){this._gotoTask=null}goTo(e,t){return D(this,null,function*(){if(!e)return void q.getLogger(this).error("#goTo()","target cannot be null or undefined");let n=new sl;this.view.animation=n,yield Rn(()=>this.view.ready,t);let i=B(v({},t),{animate:t?.animate??!wc(),animationMode:t?.animationMode??"auto"}),{extent:o,spatialReference:r,size:s,viewpoint:a,constraints:l,padding:u,allLayerViews:p}=this.view,h=t0(e,{extent:o,spatialReference:r,size:s,viewpoint:a,constraints:l,padding:u,allLayerViews:p,pickClosestTarget:t?.pickClosestTarget??!0});return n?.update(h),this._gotoTask={},i.animate?this._gotoAnimated(h,i):this._gotoImmediate(h,i)})}_gotoImmediate(e,t){let n=this._gotoTask,i=this.view.animation,o=e.then(r=>{if(nt(t),n!==this._gotoTask)throw new ne("view:goto-interrupted","Goto was interrupted");this.view.viewpoint=i.target=r,i.finish()});return this._cancellableGoTo(n,i,o,t)}_gotoAnimated(e,t){let n=this._gotoTask,i=this.view.animation;if(!i)return Promise.resolve();let o=e.then(r=>{if(nt(t),n!==this._gotoTask)throw new ne("view:goto-interrupted","Goto was interrupted");return i.update(r),this.view.animationManager.animate(i,this.view.viewpoint,t),i.when().then(()=>{},()=>{})});return this._cancellableGoTo(n,i,o,t)}_cancellableGoTo(e,t,n,i){let o=()=>e===this._gotoTask;return uo(n,i).finally(()=>{o()&&(t.done||t.stop())})}};c([d({constructOnly:!0})],ll.prototype,"view",void 0),ll=c([b("esri.views.2d.GoToManager")],ll);function Pe(){return Promise.all([import("./chunk-OG3VJURW.js"),import("./chunk-VDUHK25V.js")])}var cl=()=>Pe().then(()=>import("./chunk-UCSTMADJ.js")),Is=()=>Pe().then(()=>import("./chunk-IAX6OKGW.js")),Gb={"base-dynamic":()=>Pe().then(()=>import("./chunk-N4BMQAEO.js")),"base-tile":cl,"bing-maps":cl,catalog:()=>Pe().then(()=>import("./chunk-V3GIU4LT.js")),"catalog-dynamic-group":()=>Pe().then(()=>import("./chunk-TB46AQ3H.js")),"catalog-footprint":()=>Pe().then(()=>import("./chunk-XVLOVFTH.js")),csv:Is,"geo-rss":()=>Pe().then(()=>import("./chunk-CGHMXCEB.js")),feature:Is,geojson:Is,graphics:()=>Pe().then(()=>import("./chunk-7BTQLG4Y.js")),group:()=>Pe().then(()=>import("./chunk-ARV4KSFO.js")),imagery:()=>Pe().then(()=>import("./chunk-V4QVXDVP.js")),"imagery-tile":()=>Pe().then(()=>import("./chunk-VYOX33DV.js")),kml:()=>Pe().then(()=>import("./chunk-65GWGX53.js")),"knowledge-graph":()=>Pe().then(()=>import("./chunk-ULJCOYD5.js")),"link-chart":()=>Pe().then(()=>import("./chunk-ULJCOYD5.js")),"knowledge-graph-sublayer":Is,"map-image":()=>Pe().then(()=>import("./chunk-DK4M4MN5.js")),"map-notes":()=>Pe().then(()=>import("./chunk-V6QSAOYK.js")),media:()=>Pe().then(()=>import("./chunk-MSJYZ2VY.js")),"ogc-feature":()=>Pe().then(()=>import("./chunk-PCGUGWNQ.js")),"open-street-map":cl,"oriented-imagery":Is,route:()=>Pe().then(()=>import("./chunk-QJJZST2R.js")),stream:()=>Pe().then(()=>import("./chunk-Y3CZF3XT.js")),"subtype-group":()=>Pe().then(()=>import("./chunk-JQSKKPMF.js")),tile:cl,"vector-tile":()=>Pe().then(()=>import("./chunk-MHKLNQGD.js")),video:()=>Pe().then(()=>import("./chunk-CJVYWG4G.js")),wcs:()=>Pe().then(()=>import("./chunk-VYOX33DV.js")),"web-tile":cl,wfs:Is,wms:()=>Pe().then(()=>import("./chunk-N4XTSJIM.js")),wmts:()=>Pe().then(()=>import("./chunk-7E4VETES.js")),"line-of-sight":null,"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"integrated-mesh":null,"integrated-mesh-3dtiles":null,"point-cloud":null,voxel:null,scene:null,unknown:null,unsupported:null};function mD(e){let t=e.declaredClass?e.declaredClass.slice(e.declaredClass.lastIndexOf(".")+1):"Unknown",n=t.replaceAll(/([a-z])([A-Z])/g,"$1-$2").toLowerCase();return new ne(`${n}:view-not-supported`,`${t} is not supported in 2D`)}var em={hasLayerViewModule:e=>Gb[e.type]!=null,importLayerView:e=>{let t=Gb[e.type];if(t==null)throw mD(e);return t(e)}};function jb(e,t){let{spatialReference:n}=t,i=[t.x,t.y],o=Number.POSITIVE_INFINITY,r=0,s=0,a=[0,0],l=e.type==="extent"?[[[e.xmin,e.ymin],[e.xmin,e.ymax],[e.xmax,e.ymax],[e.xmax,e.ymin],[e.xmin,e.ymin]]]:e.rings;for(let u of l)for(let p=0;p<u.length-1;p++){C_(a,i,u,p);let h=fo(i,a);h<o&&(o=h,r=a[0],s=a[1])}return{coordinate:new Fe({x:r,y:s,spatialReference:n}),distance:o}}var tm,Co=tm=class extends is(k){constructor(e){super(e),this.geometry=null,this.spatialReference=null}get normalizedGeometry(){if(this.geometry==null||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return Ki(this.geometry,this.spatialReference)}catch(e){return q.getLogger(this).error("#constraints.geometry","could not project the geometry to the view's spatial reference",{geometry:this.geometry,spatialReference:this.spatialReference,error:e}),null}return this.geometry}constrain(e,t){if(this.normalizedGeometry==null)return e;let n=e.targetGeometry;if(this.normalizedGeometry.type==="extent"?nc(this.normalizedGeometry,n):w_(this.normalizedGeometry,n))return e;let{coordinate:i}=jb(this.normalizedGeometry,n);return i&&(e.targetGeometry=i),e}clone(){return new tm({geometry:this.geometry?.clone(),spatialReference:this.spatialReference?.clone()})}};c([d({constructOnly:!0})],Co.prototype,"geometry",void 0),c([d({readOnly:!0})],Co.prototype,"normalizedGeometry",null),c([d({constructOnly:!0})],Co.prototype,"spatialReference",void 0),Co=tm=c([b("esri.views.2d.constraints.GeometryConstraint")],Co);var im,dl=im=class extends is(k){constructor(){super(...arguments),this.enabled=!0,this.rotationEnabled=!0}constrain(e,t){return this.enabled&&t&&(this.rotationEnabled||(e.rotation=t.rotation)),e}clone(){return new im({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};c([d()],dl.prototype,"enabled",void 0),c([d()],dl.prototype,"rotationEnabled",void 0),dl=im=c([b("esri.views.2d.constraints.RotationConstraint")],dl);var nm=dl;var om,Jt=om=class extends is(k){constructor(e){super(e),this._lodByScale={},this._scales=[],this.effectiveLODs=null,this.effectiveMinZoom=-1,this.effectiveMaxZoom=-1,this.effectiveMinScale=0,this.effectiveMaxScale=0,this.lods=null,this.minZoom=-1,this.maxZoom=-1,this.minScale=0,this.maxScale=0,this.snapToZoom=!0}initialize(){let e,{lods:t,minScale:n,maxScale:i,minZoom:o,maxZoom:r}=this,s=-1,a=-1,l=!1,u=!1;if(n!==0&&i!==0&&n<i&&([n,i]=[i,n]),!t?.length)return this._set("effectiveMinScale",n),void this._set("effectiveMaxScale",i);t=t.map(p=>p.clone()),t.sort((p,h)=>h.scale-p.scale),t.forEach((p,h)=>p.level=h);for(let p of t)!l&&n>0&&n>=p.scale&&(s=p.level,l=!0),!u&&i>0&&i>=p.scale&&(a=e?e.level:-1,u=!0),e=p;o===-1&&(o=n===0?0:s),r===-1&&(r=i===0?t.length-1:a),o=Math.max(o,0),o=Math.min(o,t.length-1),r=Math.max(r,0),r=Math.min(r,t.length-1),o>r&&([o,r]=[r,o]),n=t[o].scale,i=t[r].scale,t.splice(0,o),t.splice(r-o+1,t.length),t.forEach((p,h)=>{this._lodByScale[p.scale]=p,this._scales[h]=p.scale}),this._set("effectiveLODs",t),this._set("effectiveMinZoom",o),this._set("effectiveMaxZoom",r),this._set("effectiveMinScale",n),this._set("effectiveMaxScale",i)}constrain(e,t){if(t&&e.scale===t.scale)return e;let n=this.effectiveMinScale,i=this.effectiveMaxScale,o=e.targetGeometry,r=t&&t.targetGeometry,s=i!==0&&e.scale<i,a=n!==0&&e.scale>n;if(s||a){let l=a?n:i;if(t&&r){let u=(l-t.scale)/(e.scale-t.scale);o.x=r.x+(o.x-r.x)*u,o.y=r.y+(o.y-r.y)*u}e.scale=l}return this.snapToZoom&&this.effectiveLODs&&(e.scale=this._getClosestScale(e.scale)),e}fit(e){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(e,null);let t=this.scaleToZoom(e.scale),n=Math.abs(t-Math.floor(t));return e.scale=this.zoomToScale(n>.99?Math.round(t):Math.floor(t)),e}zoomToScale(e){if(!this.effectiveLODs)return 0;e-=this.effectiveMinZoom,e=Math.max(0,e);let t=this._scales;if(e<=0)return t[0];if(e>=t.length)return t[t.length-1];let n=Math.floor(e),i=Math.ceil(e);return t[n]+(e-n)*(t[i]-t[n])}scaleToZoom(e){if(!this.effectiveLODs)return-1;let t=this._scales,n,i;if(e>=t[0])return this.effectiveMinZoom;if(e<=t[t.length-1])return this.effectiveMaxZoom;for(let o=0;o<t.length-1;o++){if(n=t[o],i=t[o+1],i===e)return o+this.effectiveMinZoom+1;if(n>e&&i<e)return o+this.effectiveMinZoom+1-(e-i)/(n-i)}return-1}snapToClosestScale(e){if(!this.effectiveLODs)return e;let t=this.scaleToZoom(e);return this.zoomToScale(Math.round(t))}snapToNextScale(e,t=.5){if(!this.effectiveLODs)return e*t;let n=Math.round(this.scaleToZoom(e));return this.zoomToScale(n+1)}snapToPreviousScale(e,t=2){if(!this.effectiveLODs)return e*t;let n=Math.round(this.scaleToZoom(e));return this.zoomToScale(n-1)}clone(){return new om({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(e){return this._lodByScale[e]||(e=this._scales.reduce((t,n)=>Math.abs(n-e)<=Math.abs(t-e)?n:t,this._scales[0])),this._lodByScale[e].scale}};c([d({readOnly:!0})],Jt.prototype,"effectiveLODs",void 0),c([d({readOnly:!0})],Jt.prototype,"effectiveMinZoom",void 0),c([d({readOnly:!0})],Jt.prototype,"effectiveMaxZoom",void 0),c([d({readOnly:!0})],Jt.prototype,"effectiveMinScale",void 0),c([d({readOnly:!0})],Jt.prototype,"effectiveMaxScale",void 0),c([d()],Jt.prototype,"lods",void 0),c([d()],Jt.prototype,"minZoom",void 0),c([d()],Jt.prototype,"maxZoom",void 0),c([d()],Jt.prototype,"minScale",void 0),c([d()],Jt.prototype,"maxScale",void 0),c([d()],Jt.prototype,"snapToZoom",void 0),Jt=om=c([b("esri.views.2d.constraints.ZoomConstraint")],Jt);var rm=Jt;var fD={base:null,key:"type",typeMap:{extent:pn,polygon:lc}},Ze=class extends k{constructor(e){super(e),this.lods=null,this.minScale=0,this.maxScale=0,this.minZoom=-1,this.maxZoom=-1,this.rotationEnabled=!0,this.snapToZoom=!0,this.customConstraints=new W}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(e){e?this._set("geometry",e):this._set("geometry",null)}get version(){return`${this._zoom?.uid}/${this._rotation?.uid}/${this._geometry?.uid}`}get _geometry(){let e=this._get("_geometry");return e&&this.geometry===e.geometry&&this.view?.constraintsInfo.spatialReference===e.spatialReference?e:new Co({geometry:this.geometry,spatialReference:this.view?.constraintsInfo.spatialReference})}get _rotation(){return new nm({rotationEnabled:this.rotationEnabled})}get _zoom(){let e=this._get("_zoom"),t=this.lods||this.view?.constraintsInfo.lods,n=this.minZoom,i=this.maxZoom,o=this.minScale,r=this.maxScale,s=this.snapToZoom;return e&&e.lods===t&&e.minZoom===n&&e.maxZoom===i&&e.minScale===o&&e.maxScale===r&&e.snapToZoom===s?e:new rm({lods:t,minZoom:n,maxZoom:i,minScale:o,maxScale:r,snapToZoom:s})}canZoomInTo(e){let t=this.effectiveMaxScale;return t===0||e>=t}canZoomOutTo(e){let t=this.effectiveMinScale;return t===0||e<=t}constrain(e,t){return this._zoom.constrain(e,t),this._rotation.constrain(e,t),this._geometry.constrain(e,t),this.customConstraints.forEach(n=>n.constrain(e,t)),e}constrainByGeometry(e){return this._geometry.constrain(e),this.customConstraints.forEach(t=>t.applyPanConstraint?.(e)),e}fit(e){return this._zoom.fit(e)}zoomToScale(e){return this._zoom.zoomToScale(e)}scaleToZoom(e){return this._zoom.scaleToZoom(e)}snapScale(e){return this._zoom.snapToClosestScale(e)}snapToNextScale(e){return this._zoom.snapToNextScale(e)}snapToPreviousScale(e){return this._zoom.snapToPreviousScale(e)}};c([d({readOnly:!0})],Ze.prototype,"effectiveLODs",null),c([d({readOnly:!0})],Ze.prototype,"effectiveMinScale",null),c([d({readOnly:!0})],Ze.prototype,"effectiveMaxScale",null),c([d({readOnly:!0})],Ze.prototype,"effectiveMinZoom",null),c([d({readOnly:!0})],Ze.prototype,"effectiveMaxZoom",null),c([d({types:fD,value:null})],Ze.prototype,"geometry",null),c([d({type:[U_]})],Ze.prototype,"lods",void 0),c([d()],Ze.prototype,"minScale",void 0),c([d()],Ze.prototype,"maxScale",void 0),c([d()],Ze.prototype,"minZoom",void 0),c([d()],Ze.prototype,"maxZoom",void 0),c([d()],Ze.prototype,"rotationEnabled",void 0),c([d()],Ze.prototype,"snapToZoom",void 0),c([d({type:W})],Ze.prototype,"customConstraints",void 0),c([d()],Ze.prototype,"view",void 0),c([d({readOnly:!0})],Ze.prototype,"version",null),c([d({type:Co,readOnly:!0})],Ze.prototype,"_geometry",null),c([d({type:nm})],Ze.prototype,"_rotation",null),c([d({readOnly:!0,type:rm})],Ze.prototype,"_zoom",null),Ze=c([b("esri.views.2d.MapViewConstraints")],Ze);var sm=Ze;var Lt=class extends k{constructor(e){super(e),this.constraints=null,this.ready=!1,this.resizeAlign="center",this.addHandles([I(()=>this.constraints?.version,t=>{this.constraints&&t&&this.ready&&(this.state.viewpoint=this.constraints.fit(this.state.paddedViewState.viewpoint))},Kt)])}get center(){if(!this.ready)return this._get("center");let{center:e,spatialReference:t}=this.state.paddedViewState;return this.state.commitProperty("id"),new Fe({x:e[0],y:e[1],spatialReference:t})}set center(e){if(e==null)return;if(!this.ready)return void this._set("center",e);let t;try{t=this._project(e,this.state.spatialReference)}catch(i){return void q.getLogger(this).error(new ne("mapview:invalid-center","could not project the value in the view's spatial reference",{input:e,error:i}))}let n=this.viewpoint;fp(n,n,t),this.viewpoint=n}get extent(){return this.ready?(this.state.commitProperty("id"),this.state.paddedViewState.extent.clone()):this._get("extent")}set extent(e){if(e==null)return;if(!e.width||!e.height)return void q.getLogger(this).error(new ne("mapview:invalid-extent","invalid extent size"));if(!this.ready)return this._set("extent",e),this._set("center",void 0),this._set("viewpoint",void 0),this._set("scale",void 0),void this._set("zoom",void 0);let t;try{t=this._project(e,this.state.spatialReference)}catch(i){return void q.getLogger(this).error(new ne("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:i}))}let n=this.viewpoint;n0(n,n,t,this.state.size,{constraints:this.constraints}),this.viewpoint=n}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(e){this.ready?(this.state.padding=e,this._set("padding",this.state.padding)):this._set("padding",e)}get resolution(){return this.ready?(this.state.commitProperty("id"),this.state.resolution):0}get rotation(){return this.ready?(this.state.commitProperty("id"),this.state.rotation):this._get("rotation")}set rotation(e){if(isNaN(e))return;if(!this.ready)return void this._set("rotation",e);let t=this.viewpoint;m0(t,t,e),this.viewpoint=t}get scale(){return this.ready?(this.state.commitProperty("id"),this.state.scale):this._get("scale")}set scale(e){if(!e||isNaN(e))return;if(!this.ready){this._set("scale",e),this._set("zoom",void 0);let n=this._get("extent");return void(n&&(this._set("extent",void 0),this._set("center",n.center)))}let t=this.viewpoint;gp(t,t,e),this.viewpoint=t}get viewpoint(){return this.ready?this.state.paddedViewState.viewpoint.clone():this._get("viewpoint")}set viewpoint(e){if(e==null)return;if(!this.ready)return this._set("viewpoint",e),this._set("extent",void 0),this._set("center",void 0),this._set("zoom",void 0),void this._set("scale",void 0);let t,n;try{t=this._project(e,this.state.spatialReference),!e.scale||isNaN(e.scale)?n=new ne("mapview:invalid-viewpoint",`invalid scale value of ${e.scale}`):e.targetGeometry==null&&(n=new ne("mapview:invalid-viewpoint","geometry not defined"))}catch(o){n=new ne("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:o})}if(n)return void q.getLogger(this).error(n);this._scaleBeforeChangingSpatialReference=null;let i=new mi({targetGeometry:new Fe,scale:0,rotation:0});Di(i,t),this.constraints?.constrain(i,this.state.paddedViewState.viewpoint),this.state.viewpoint=i,this._set("viewpoint",i)}get zoom(){return this.ready?this.constraints?.scaleToZoom(this.scale)??-1:this._get("zoom")}set zoom(e){if(!(e>=0))return;if(!this.ready){this._set("zoom",e),this._set("scale",void 0);let i=this._get("extent");return void(i&&(this._set("extent",void 0),this._set("center",i.center)))}let t=this.constraints?.zoomToScale(e)??0;if(!t)return void this._set("zoom",-1);let n=this.viewpoint;gp(n,n,t),this.viewpoint=n,this._set("zoom",this.constraints?.scaleToZoom(this.scale)??-1)}getUserStartupOptions(e){if(!e[0]&&!e[1])return{center:void 0,rotation:void 0,scale:void 0};let{padding:t,constraints:n}=this,i=this._get("center"),o=this._get("extent"),r=this._get("scale"),s=this._get("rotation"),a=this._get("viewpoint"),l=this._get("zoom"),u=l!=null&&n!=null&&n.zoomToScale(l)||void 0,p,h,m,f=a?.rotation,w=a?.targetGeometry;w?.type==="extent"?p=w:w?.type==="point"&&(h=w,m=a?.scale);let O=o??p;return{center:i??h??O?.center,rotation:s??f,scale:(r??u??m??(O&&Mc(O,[e[0]-t.left-t.right,e[1]-t.top-t.bottom])))||void 0}}startup(e,t,n,i){let o=e.targetGeometry;try{this._project(e,n)}catch(r){q.getLogger(this).warn(new Wu("mapview:startup-projection-error","projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:o.toJSON(),spatialReference:n,error:r})),e.targetGeometry=i||new Fe({x:0,y:0,spatialReference:n})}this.constraints?.fit(e),this._set("state",new Ds({padding:this.padding,size:t,viewpoint:e})),this._set("ready",!0)}teardown(){this._set("ready",!1);let{center:[e,t],spatialReference:n,rotation:i,scale:o}=this.state.paddedViewState,r=new Fe({x:e,y:t,spatialReference:n});this._set("viewpoint",null),this._set("extent",null),this._set("center",r),this._set("zoom",-1),this._set("rotation",i),this._set("scale",o),this._set("state",null)}changeSpatialReference(e){let t=this.state.paddedViewState.clone();if(this._scaleBeforeChangingSpatialReference==null)this._scaleBeforeChangingSpatialReference=t.scale;else{let a=t.viewpoint.clone();a.scale=this._scaleBeforeChangingSpatialReference,t.viewpoint=a}let n=t.clone(),[i,o]=t.center,r=null;try{r=this._project(new Fe({x:i,y:o,spatialReference:t.spatialReference}),e)}catch(a){p_()||q.getLogger(this).warn(new Wu("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:r?.toJSON(),spatialReference:e,error:a}))}r||(r=new Fe({x:0,y:0,spatialReference:e}));let s=fp(new mi({targetGeometry:new Fe,scale:0,rotation:0}),t.viewpoint,r);n.viewpoint=s;try{let l=[t.size[0]/2,t.size[1]/2],u=[l[0]+20,l[1]],p=t.toMap([0,0],u),{x:h,y:m}=this._project(new Fe({x:p[0],y:p[1],spatialReference:t.spatialReference}),e);p[0]=h,p[1]=m,n.toScreen(p,p);let f=u0(l,p,u),w=Math.hypot(p[0]-l[0],p[1]-l[1])/20;!Number.isFinite(w)||Math.abs(w)>4?(s.rotation=0,s.targetGeometry=new Fe({x:0,y:0,spatialReference:e})):(s.scale*=w,s.scale>$e("mapview-srswitch-adjust-rotation-scale-threshold")?s.rotation=0:s.rotation+=Number.isFinite(f)?f:0)}catch{}this._get("constraints")?.constrain(s,void 0),this._get("state").viewpoint=s}resize(e,t){if(!this.ready)return;let n=this.state,i=this.state.paddedViewState.viewpoint,o=this.state.paddedViewState.size.concat();n.size=[e,t],h0(i,i,o,this.state.paddedViewState.size,this.resizeAlign),i=this.constraints?.constrain(i,void 0)??i,this.state.viewpoint=i}toMap(e){if(!this.ready)return null;let t=[0,0],[n,i]=this.state.toMap(t,[e.x,e.y]),o=this.state.spatialReference;return new Fe({x:n,y:i,spatialReference:o})}toScreen(e,t){if(!this.ready)return null;let n=this._project(e,this.state.spatialReference),i=[n.x,n.y];return t?.pickClosestTarget===!1||this.state.paddedViewState.wrapMapCoordinate(i,i),this.state.toScreen(i,i),me(i[0],i[1])}_project(e,t){let n=e?.targetGeometry||e;if(!t)return e;if(!n)return null;if(t.imageCoordinateSystem||n.spatialReference?.imageCoordinateSystem||Xr(t,n.spatialReference))return e;let i=Ki(n,t);if(!i)throw new ne("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:n,spatialReference:t});return gD(e)?(e.targetGeometry=i,e):i}};function gD(e){return e?.declaredClass==="esri.Viewpoint"}c([d({type:Fe})],Lt.prototype,"center",null),c([d()],Lt.prototype,"constraints",void 0),c([d({type:pn})],Lt.prototype,"extent",null),c([d({value:{top:0,right:0,bottom:0,left:0},cast:e=>v({top:0,right:0,bottom:0,left:0},e)})],Lt.prototype,"padding",null),c([d()],Lt.prototype,"ready",void 0),c([d()],Lt.prototype,"resizeAlign",void 0),c([d({readOnly:!0})],Lt.prototype,"resolution",null),c([d({type:Number})],Lt.prototype,"rotation",null),c([d({type:Number})],Lt.prototype,"scale",null),c([d({readOnly:!0})],Lt.prototype,"state",void 0),c([d({type:mi})],Lt.prototype,"viewpoint",null),c([d()],Lt.prototype,"zoom",null),Lt=c([b("esri.views.2d.ViewStateManager")],Lt);function Os(e,t){switch(t){case"primary":return e.pointerType==="touch"||e.button===0;case"secondary":return e.pointerType!=="touch"&&e.button===2;case"tertiary":return e.pointerType!=="touch"&&e.button===1}}var ul=class extends le{constructor(t,n){super(!0),this._view=t,this.registerIncoming("double-click",n,i=>this._handleDoubleClick(i,n))}_handleDoubleClick(t,n){Os(t.data,"primary")&&(t.stopPropagation(),n?this._view.mapViewNavigation.zoomOut([t.data.x,t.data.y]):this._view.mapViewNavigation.zoomIn([t.data.x,t.data.y]))}};var _d=class extends le{constructor(t,n,i){super(!0),this.view=t,this.pointerType=n,this.registerIncoming("double-tap-drag",i,o=>this._handleDoubleTapDrag(o))}_handleDoubleTapDrag(t){let{data:n}=t,{pointerType:i}=n;if(i!==this.pointerType)return;t.stopPropagation();let{action:o,delta:r}=n,{view:s}=this,{mapViewNavigation:a}=s;switch(o){case"begin":{let{scale:l}=s;this._startScale=l,this._currentScale=l,this._previousDelta=r,a.begin();break}case"update":{if(this._previousDelta.y===r.y)return;this._previousDelta=r;let l=1.015**r.y,u=this._startScale*l,p=u/this._currentScale;a.setViewpointImmediate(p),this._currentScale=u;break}case"end":{let{constraints:l}=s,{effectiveLODs:u,snapToZoom:p}=l;if(!p||!u)return void a.end();let h=l.snapScale(this._currentScale),m=(r.y>0?Math.max(h,l.snapToPreviousScale(this._startScale)):Math.min(h,l.snapToNextScale(this._startScale)))/this._currentScale;a.zoom(m).then(()=>{a.end()});break}}}};var vn=class{constructor(t){this._callbacks=t,this._currentCount=0,this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(t){let n=t.data,i=n.pointers.size;switch(n.action){case"start":this._currentCount=i,this._emitStart(t);break;case"added":this._emitEnd(this._previousEvent),this._currentCount=i,this._emitStart(t);break;case"update":this._emitUpdate(t);break;case"removed":this._startEvent&&this._emitEnd(this._previousEvent),this._currentCount=i,this._emitStart(t);break;case"end":this._emitEnd(t),this._currentCount=0}this._previousEvent=t}_emitStart(t){this._startEvent=t,this._callbacks.condition?.(this._currentCount,t)&&this._callbacks.start(this._currentCount,t,this._startEvent)}_emitUpdate(t){this._callbacks.condition?.(this._currentCount,t)&&this._callbacks.update(this._currentCount,t,this._startEvent)}_emitEnd(t){this._callbacks.condition?.(this._currentCount,t)&&this._callbacks.end(this._currentCount,t,this._startEvent),this._startEvent=null}};var yd=class extends le{constructor(t,n,i){super(!0),this.view=t,this.pointerAction=n,this.registerIncoming("drag",i,o=>this._handleDrag(o)),this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(t){super.onInstall(t),this._dragEventSeparator=new vn({start:(n,i)=>{this.view.mapViewNavigation.pan.begin(this.view,i.data),i.stopPropagation()},update:(n,i)=>{this.view.mapViewNavigation.pan.update(this.view,i.data),i.stopPropagation()},end:(n,i)=>{this.view.mapViewNavigation.pan.end(this.view,i.data),i.stopPropagation()},condition:(n,i)=>n===1&&Os(i.data,this.pointerAction)})}_handleDrag(t){let n=this.view.mapViewNavigation;n.pinch.zoomMomentum||n.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(t)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}};var vd=class extends le{constructor(t,n,i){super(!0),this._view=t,this.pointerAction=n;let o=this._view.mapViewNavigation;this._dragEventSeparator=new vn({start:(r,s)=>{o.rotate.begin(this._view,s.data),s.stopPropagation()},update:(r,s)=>{o.rotate.update(this._view,s.data),s.stopPropagation()},end:(r,s)=>{o.rotate.end(),s.stopPropagation()},condition:(r,s)=>r===1&&Os(s.data,this.pointerAction)}),this.registerIncoming("drag",i,r=>this._dragEventSeparator.handle(r))}};function Xi(e){let t=e*e;return e<0&&(t*=-1),t}function zb(e){return e.translation[0]=0,e.translation[1]=0,e.translation[2]=0,e.heading=0,e.tilt=0,e}function Ub(e,t,n){let i=n,o=e.state,r=e.device,s=t.tiltDirection==="forward-down"?1:-1,a=1;return r.deviceType==="standard"?(i.translation[0]=Xi(o.axes[0]),i.translation[1]=Xi(o.axes[1]),i.translation[2]=Xi(o.buttons[7])-Xi(o.buttons[6]),i.heading=Xi(o.axes[2]),i.tilt=Xi(o.axes[3])):r.deviceType==="spacemouse"&&(i.translation[0]=1.2*Xi(o.axes[0]),i.translation[1]=1.2*Xi(o.axes[1]),i.translation[2]=2*-Xi(o.axes[2]),i.heading=1.2*Xi(o.axes[5]),i.tilt=1.2*Xi(o.axes[3])),i.tilt*=s,O_(i.translation,i.translation,a),i}function $b(e){return e.translation[0]===0&&e.translation[1]===0&&e.translation[2]===0&&e.heading===0&&e.tilt===0&&e.zoom===0}var bd=class extends le{constructor(t){super(!0),this._view=t,this._frameTask=null,this._watchHandles=new Yl,this._currentDevice=null,this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0},this._handle=this.registerIncoming("gamepad",n=>this._handleGamePadEvent(n)),this._handle.pause()}onInstall(t){super.onInstall(t),this._watchHandles.add([I(()=>this._view.navigation.gamepad?.enabled,n=>{n?(this._handle.resume(),this._frameTask||(this._frameTask=qi({update:i=>this._frameUpdate(i.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},ie)])}onUninstall(){this._watchHandles.removeAll(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null),super.onUninstall()}_handleGamePadEvent(t){let n=this._view.navigation.gamepad.device;n&&t.data.device!==n||this._currentDevice&&this._currentDevice!==t.data.device||(t.data.action==="end"?(this._currentDevice=null,zb(this._transformation)):(this._currentDevice=t.data.device,Ub(t.data,this._view.navigation.gamepad,this._transformation)))}_frameUpdate(t){let n=this._transformation;if($b(n))return;let i=this._view.viewpoint.clone(),o=this._view.navigation.gamepad.velocityFactor,r=yD*o*t;g0(i,i,[n.translation[0]*r,-n.translation[1]*r]);let s=1+n.translation[2]*vD*t,a=this._view.constraints.rotationEnabled?-n.heading*_D*t:0,l=this._view.size,u=[l[0]/2,l[1]];f0(i,i,s,a,u,l);let p=this._view.constraints.constrain(i,this._view.viewpoint);this._view.viewpoint=p}},_D=.06,yD=.7,vD=6e-4;function wd(e){let t=()=>e(document.visibilityState==="visible");return document.addEventListener("visibilitychange",t),Yt(()=>document.removeEventListener("visibilitychange",t))}var Sd=class extends le{constructor(t,n,i){super(!0),this.view=t,this.keys=n,this._isSticky=!1,this._pressedKeys=new Set,this._timeout=void 0,this._currentDirection=void 0,this._stickyKeyDuration=200,this._handleKey=o=>{let r=this._keyMap[o.data.key];if(o.modifiers.has("Meta")||o.modifiers.has("Control"))return void this._stopMovement();if(r==null)return;o.stopPropagation(),o.preventDefault();let s=o.type==="key-down";if(this._pressedKeys[s?"add":"delete"](r),s){if(this._direction===r)return;this._direction=r,this._isSticky=!1,this._setTimeout(()=>{this._isSticky&&this._handlePopKey()})}else{let a=this._timeout===void 0,l=this._pressedKeys.size>0;a||l?this._handlePopKey():this._isSticky=!0}},this._handlePopKey=()=>{this._direction=Array.from(this._pressedKeys).pop(),this._direction==null&&this._stopMovement()},this._stopMovement=()=>{this._isSticky=!1,this._direction=void 0,this._pressedKeys.clear(),this._setTimeout(void 0)},this._keyMap={[n.left]:"left",[n.right]:"right",[n.up]:"up",[n.down]:"down"},this.registerIncoming("key-down",i,this._handleKey),this.registerIncoming("key-up",i,this._handleKey),this.registerIncoming("blur",i,this._stopMovement),this._visibilityHandle=wd(o=>o?null:this._stopMovement())}onUninstall(){this._stopMovement(),this._visibilityHandle?.remove()}get _direction(){return this._currentDirection}set _direction(t){let n=this._currentDirection!=null;if(t!=null){if(n||this.view.mapViewNavigation.begin(),this._currentDirection!==t)switch(t){case"left":this.view.mapViewNavigation.continuousPanLeft();break;case"right":this.view.mapViewNavigation.continuousPanRight();break;case"up":this.view.mapViewNavigation.continuousPanUp();break;case"down":this.view.mapViewNavigation.continuousPanDown()}}else n&&this.view.mapViewNavigation.stop();this._currentDirection=t}_setTimeout(t){clearTimeout(this._timeout),this._timeout=t===void 0?void 0:setTimeout(()=>{this._timeout=void 0,t()},this._stickyKeyDuration)}};var Cd=class extends le{constructor(t,n,i){super(!0),this.view=t,this.keys=n,this._pressed=!1,this._keyToDirection={[n.clockwiseOption1]:"clockwise",[n.clockwiseOption2]:"clockwise",[n.counterClockwiseOption1]:"counterClockwise",[n.counterClockwiseOption2]:"counterClockwise",[n.resetOption1]:"reset",[n.resetOption2]:"reset"},this.registerIncoming("key-down",i,o=>this._handleKeyDown(o)),this.registerIncoming("key-up",i,o=>this._handleKeyUp(o)),this.registerIncoming("blur",i,()=>this._handleStop()),this._visibilityHandle=wd(o=>o?null:this._handleStop())}onUninstall(){this._visibilityHandle?.remove(),this._handleStop()}_handleKeyDown(t){t.data.repeat||this._handleKey(t,!0)}_handleKeyUp(t){this._handleKey(t,!1)}_handleStop(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(t,n){let i=t.modifiers;if(i.size>0&&!i.has("Shift")||!this.view.constraints.rotationEnabled)return;let o=this._keyToDirection[t.data.key];if(this._pressed=o!=null,this._pressed){if(t.preventDefault(),n)switch(this.view.mapViewNavigation.begin(),o){case"clockwise":this.view.mapViewNavigation.continuousRotateClockwise();break;case"counterClockwise":this.view.mapViewNavigation.continuousRotateCounterclockwise();break;case"reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();t.stopPropagation()}}};var ks;(function(e){e[e.IN=0]="IN",e[e.OUT=1]="OUT"})(ks||(ks={}));var Td=class extends le{constructor(t,n,i){super(!0),this.view=t,this.keys=n,this._keysToZoomAction={},this.registerIncoming("key-down",i,o=>this._handleKeyDown(o)),n.zoomIn.forEach(o=>this._keysToZoomAction[o]=ks.IN),n.zoomOut.forEach(o=>this._keysToZoomAction[o]=ks.OUT)}_handleKeyDown(t){this._handleKey(t)}_handleKey(t){let n=t.modifiers;if(n.size>0&&!n.has("Shift"))return;let{key:i}=t.data;if(!(i in this._keysToZoomAction))return;let o=this._keysToZoomAction[i],{mapViewNavigation:r}=this.view,s=null;switch(o){case ks.IN:s=r.zoomIn();break;case ks.OUT:s=r.zoomOut();break;default:return}r.begin(),s.then(()=>r.end()),t.stopPropagation()}};var bD=.6,Md=class extends le{constructor(t,n){super(!0),this._view=t,this._canZoom=!0,this.registerIncoming("mouse-wheel",n,i=>this._handleMouseWheel(i))}_handleMouseWheel(t){if(!this._view.navigation.mouseWheelZoomEnabled||(t.preventDefault(),t.stopPropagation(),!this._canZoom))return;let n=this._view.mapViewNavigation,{x:i,y:o,deltaY:r}=t.data,s=1/bD**(1/60*r),a=n.zoom(s,[i,o]);a&&(this._canZoom=!1,a.catch(()=>{}).then(()=>{this._canZoom=!0,n.end()}))}};var Dd=class extends le{constructor(t){super(!0),this.view=t,this.registerIncoming("drag",i=>this._handleDrag(i)),this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());let n=this.view.mapViewNavigation;this._dragEventSeparator=new vn({start:(i,o)=>{n.pinch.begin(this.view,o.data),o.stopPropagation()},update:(i,o)=>{n.pinch.update(this.view,o.data),o.stopPropagation()},end:(i,o)=>{n.pinch.end(this.view),o.stopPropagation()},condition:i=>i>=2})}_handleDrag(t){this._dragEventSeparator.handle(t)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}};function am(e){let t=e.native;return t?{buttons:t.buttons.map(n=>n.pressed?n.value||1:0),axes:t.axes.map(n=>wD(n,e.axisThreshold))}:{buttons:[],axes:[]}}function Wb(e,t){if(e.axes.length!==t.axes.length||e.buttons.length!==t.buttons.length)return!1;for(let n=0;n<e.axes.length;n++)if(e.axes[n]!==t.axes[n])return!1;for(let n=0;n<e.buttons.length;n++)if(e.buttons[n]!==t.buttons[n])return!1;return!0}function qb(e){for(let t=0;t<e.axes.length;t++)if(e.axes[t]!==0)return!1;for(let t=0;t<e.buttons.length;t++)if(e.buttons[t]!==0)return!1;return!0}function wD(e,t){let n=Math.abs(e);return n<t?0:Math.sign(e)*(n-t)/(1-t)}var Ed=class{constructor(t,n){this._element=t,this._input=n,this._hasEventListeners=!1,this._onConnectGamepad=r=>{this._connectGamepad(r.gamepad)},this._onDisconnectGamepad=r=>{let s=r.gamepad,a=s.index,l=this._inputDevices[a];l&&(this._emitGamepadEvent(s,am(l),!1),this._inputDevices.splice(a,1),this._latestUpdate.splice(a,1),this._input.gamepad.devices.remove(l),this.ensurePollingState())},this._frameTask=null,this._latestUpdate=new Array,this._inputDevices=new Array,this._callback=null;let i="getGamepads"in window.navigator,o=window.isSecureContext;this.supported=i&&o,this.supported&&(Zb(r=>this._connectGamepad(r)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState())}destroy(){this.hasEventListeners=!1,this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",this._onDisconnectGamepad))}set hasEventListeners(t){this._hasEventListeners!==t&&(this._hasEventListeners=t,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&this._inputDevices.length>0&&this._hasEventListeners}set onEvent(t){this._callback=t}_connectGamepad(t){let n=new Ts(t);n.deviceType!=="unknown"&&(this._inputDevices[t.index]=n,this._input.gamepad.devices.add(n)),this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){this._frameTask==null&&(this._frameTask=qi({update:()=>this._readGamepadState()}))}_stopPolling(){this._frameTask!=null&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=new Array)}_readGamepadState(){let t=document.hasFocus(),n=this._element.contains(document.activeElement),i=this._input.gamepad.enabledFocusMode==="document"&&!t||this._input.gamepad.enabledFocusMode==="view"&&!n;Zb(o=>{let r=this._inputDevices[o.index];if(!r)return;let s=this._latestUpdate[o.index],a=am(r),l=i||qb(a);s&&(s.timestamp===o.timestamp||!s.active&&l||Wb(s.state,a))||this._emitGamepadEvent(o,a,!l)})}_emitGamepadEvent(t,n,i){let o=this._latestUpdate[t.index],r=o&&o.active;if(!r&&!i)return;let s=!r&&i?"start":r&&i?"update":"end";this._latestUpdate[t.index]={timestamp:t.timestamp,state:n,active:i},this._callback&&this._callback({device:this._inputDevices[t.index],state:n,action:s})}};function SD(e){if(!e||!e.connected)return!1;for(let t=0;t<e.axes.length;t++)if(isNaN(e.axes[t]))return!1;return!0}function Zb(e){let t=window.navigator.getGamepads();for(let n=0;n<t.length;n++){let i=t[n];SD(i)&&e(i)}}var Yb=$e("edge"),CD=$e("chrome"),TD=$e("ff"),MD=$e("safari"),Kb="esri-view-surface",As={touchNone:`${Kb}--touch-none`,touchPan:`${Kb}--touch-pan`},Qb=(()=>{class e{constructor(n,i){this._input=i,this._active={},this._callback=()=>{},this._activePointerCaptures=new Set,this._keyDownState=new Set,this._eventId=1,this._browserTouchPanningEnabled=!1,this._element=n,n.getAttribute("tabindex")||n.setAttribute("tabindex","0"),this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost},this._updateTouchAction(),this._element.addEventListener("keydown",this._preventAltKeyDefault),this._gamepadSource=new Ed(n,this._input),this._gamepadSource.onEvent=o=>this._callback("gamepad",o)}destroy(){this._callback=()=>{},this.activeEvents=null,this._activePointerCaptures.forEach(n=>{this._releasePointerCaptureSafe(n)}),this._gamepadSource=re(this._gamepadSource),this._activePointerCaptures=null,this._removeTouchAction(),this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(n){this._browserTouchPanningEnabled=n,this._updateTouchAction(),this._updateTouchEventHandling()}set onEventReceived(n){this._callback=n}set activeEvents(n){for(let i in this._active)if(!n||!n.has(i)){let o=this._active[i];this._element.removeEventListener(lm[i],o),delete this._active[i]}n&&n.forEach(i=>{if(!this._active[i]&&lm[i]){let o=(this._eventHandlers[i]||this._handleDefault).bind(this,i);this._element.addEventListener(lm[i],o),this._active[i]=o}}),this._gamepadSource.hasEventListeners=n?.has("gamepad")??!1}setPointerCapture(n,i){i?this._setPointerCatpureSafe(n.pointerId):(this._releasePointerCaptureSafe(n.pointerId),this._activePointerCaptures.delete(n.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?As.touchNone:As.touchPan),this._element.classList.add(this._browserTouchPanningEnabled?As.touchPan:As.touchNone)}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove(As.touchNone),this._element.classList.remove(As.touchPan),this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_setPointerCatpureSafe(n){try{this._element.setPointerCapture(n),this._activePointerCaptures.add(n)}catch{}}_releasePointerCaptureSafe(n){try{if(this._element.hasPointerCapture&&!this._element.hasPointerCapture(n))return;this._element.releasePointerCapture(n)}catch{}}_updateNormalizedPointerLikeEvent(n,i){let o=Qy(this._element,n);return e.test.disableSubpixelCoordinates&&(o.x=Math.round(o.x),o.y=Math.round(o.y)),i.x=o.x,i.y=o.y,i}_handleKey(n,i){let{key:o}=i;o&&n==="key-up"&&this._keyDownState.delete(o);let r={native:i,key:o,repeat:!!o&&this._keyDownState.has(o)};o&&n==="key-down"&&this._keyDownState.add(r.key),this._callback(n,r)}_handlePointer(n,i){let o=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});this._callback(n,o)}_handlePointerPreventDefault(n,i){let o=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,pointerType:i.pointerType,button:i.button,buttons:i.buttons,eventId:this._eventId++});i.preventDefault(),this._callback(n,o)}_handleMouseWheel(n,i){let o=i.deltaY;switch(i.deltaMode){case 0:Yb&&(o=o/document.documentElement.clientHeight*600);break;case 1:o*=30;break;case 2:o*=900}Yb?o*=.7:CD||MD?o*=.6:TD&&(o*=1.375);let r=100,s=Math.abs(o);s>r&&(o=o/s*200/(1+Math.exp(-.02*(s-r))));let a=this._updateNormalizedPointerLikeEvent(i,{native:i,x:0,y:0,deltaY:o});this._callback(n,a)}_handlePointerCaptureLost(n,i){this._activePointerCaptures.delete(i.pointerId),this._handleDefault(n,i)}_handleDefault(n,i){let o={native:i};i.preventDefault(),this._callback(n,o)}_preventAltKeyDefault(n){n.key==="Alt"&&n.preventDefault()}_preventMultiTouchPanning(n){n.touches.length>1&&n.preventDefault()}}return e.test={disableSubpixelCoordinates:!1},e})(),lm={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove","mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};var xd=class extends le{constructor(){super(!0),this.registerIncoming("context-menu",t=>{t.data.native.preventDefault()})}};var et={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500,maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};function ir(e,t){return Math.abs(t.x-e.x)+Math.abs(t.y-e.y)}function Jb(e,t){let n=t.x-e.x,i=t.y-e.y;return Math.sqrt(n*n+i*i)}function Xb(e,t){if(t?(t.radius=0,t.center.x=0,t.center.y=0):t={radius:0,center:me()},e.length===0)return t;if(e.length===1)return t.center.x=e[0].x,t.center.y=e[0].y,t;if(e.length===2){let[Y,j]=e,[Q,X]=[j.x-Y.x,j.y-Y.y];return t.radius=Math.sqrt(Q*Q+X*X)/2,t.center.x=(Y.x+j.x)/2,t.center.y=(Y.y+j.y)/2,t}let n=0,i=0;for(let Y=0;Y<e.length;Y++)n+=e[Y].x,i+=e[Y].y;n/=e.length,i/=e.length;let o=e.map(Y=>Y.x-n),r=e.map(Y=>Y.y-i),s=0,a=0,l=0,u=0,p=0,h=0,m=0;for(let Y=0;Y<o.length;Y++){let j=o[Y],Q=r[Y],X=j*j,ce=Q*Q;s+=X,a+=ce,l+=j*Q,u+=X*j,p+=ce*Q,h+=j*ce,m+=Q*X}let f=.5*(u+h),w=.5*(p+m),O=s*a-l*l,N=(f*a-w*l)/O,R=(s*w-l*f)/O,K=me(N+n,R+i);return{radius:Math.sqrt(N*N+R*R+(s+a)/e.length),center:K}}function bn(e){let{native:t}=e,{pointerId:n,button:i,pointerType:o}=t;return o==="mouse"?`${n}:${i}`:`${o}`}var Id=class extends le{constructor(t=et.maximumDoubleClickDelay,n=et.maximumDoubleClickDistance,i=et.maximumDoubleTouchDelay,o=et.maximumDoubleTouchDistance,r=un){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=n,this._maximumDoubleTouchDelay=i,this._maximumDoubleTouchDistance=o,this._clock=r,this._doubleTapDragReady=!1,this._doubleTapDragActive=!1,this._dragStartCenter=me(0,0),this._pointerState=new Map,this._doubleTapDrag=this.registerOutgoing("double-tap-drag"),this._dragEventSeparator=new vn({start:(s,a)=>this._dragStart(s,a),update:(s,a)=>this._dragUpdate(a),end:(s,a)=>this._dragEnd(a)}),this.registerIncoming("drag",s=>this._dragEventSeparator.handle(s)),this.registerIncoming("pointer-down",s=>this._handlePointerDown(s)),this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(t=>{t.doubleTapTimeout=Me(t.doubleTapTimeout)})}get hasPendingInputs(){return po(this._pointerState,t=>t.doubleTapTimeout!=null)}_clearPointerDown(t){let n=this._pointerState.get(t);n&&(n.doubleTapTimeout=Me(n.doubleTapTimeout),this._pointerState.delete(t),this.refreshHasPendingInputs())}_dragStart(t,n){if(!this._doubleTapDragReady||t!==1)return;this._doubleTapDragReady=!1,this._doubleTapDragActive=!0;let{data:i,modifiers:o}=n,{center:r}=i;this._dragStartCenter=r;let s=cm("begin",me(0,0),i);this._doubleTapDrag.emit(s,void 0,o),n.stopPropagation()}_dragUpdate(t){if(!this._doubleTapDragActive)return;let{data:n,modifiers:i}=t,{center:o}=n,r=cm("update",me(o.x-this._dragStartCenter.x,o.y-this._dragStartCenter.y),n);this._doubleTapDrag.emit(r,void 0,i),t.stopPropagation()}_dragEnd(t){if(!this._doubleTapDragActive)return;let{data:n,modifiers:i}=t,{center:o}=n,r=cm("end",me(o.x-this._dragStartCenter.x,o.y-this._dragStartCenter.y),n);this._doubleTapDrag.emit(r,void 0,i),this._doubleTapDragActive=!1,t.stopPropagation()}_handlePointerDown(t){let{data:n}=t,i=bn(n),o=this._pointerState.get(i),{pointerType:r}=n.native;if(o){let s=r==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;this._clearPointerDown(i),ir(o.event.data,n)>s?this._storePointerDown(t):this._doubleTapDragReady=!0}else this._storePointerDown(t)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(t){let{data:n}=t,{pointerType:i}=n.native,o=bn(n),r=i==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,s=this._clock.setTimeout(()=>this._clearPointerDown(o),r);this._pointerState.set(o,{event:t,doubleTapTimeout:s}),this.refreshHasPendingInputs()}};function cm(e,t,n){let{button:i,buttons:o,pointer:r,pointers:s,pointerType:a,timestamp:l}=n;return{action:e,delta:t,button:i,buttons:o,pointer:r,pointers:s,pointerType:a,timestamp:l}}var Ad=class extends le{constructor(t){super(!1),this._navigationTouch=t,this._startStateModifiers=new Set,this._activePointerMap=new Map,this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._drag=this.registerOutgoing("drag"),this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this)),this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(t,n,i,o){return{action:t,pointerType:this._pointerType,button:this._mouseButton,buttons:n.buttons,timestamp:o,pointers:DD(this._activePointerMap),pointer:n,angle:i.angle,radius:i.radius,center:i.center}}_addPointer(t){let n=t.native.pointerId,i=Od(this._activePointerMap).angle,o={event:t,initialAngle:0,lastAngle:0};this._activePointerMap.set(n,o);let r=kd(o,tw(this._activePointerMap));o.initialAngle=r,o.lastAngle=r,this._updatePointerAngles(i)}_updatePointer(t){if(t&&t.x==null&&t.y==null)return;let n=t.native.pointerId,i=this._activePointerMap.get(n);i?i.event=t:this._addPointer(t)}_removePointer(t){let n=Od(this._activePointerMap).angle;this._activePointerMap.delete(t),this._updatePointerAngles(n)}_updatePointerAngles(t){let n=Od(this._activePointerMap);this._activePointerMap.forEach(i=>{i.initialAngle=kd(i,n)-t,i.lastAngle=kd(i,n)-t})}_emitEvent(t,n,i){let o=Od(this._activePointerMap);this._drag.emit(this._createPayload(t,n,o,i),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(t){let n=t.data.native.pointerId,i=t.timestamp;this._activePointerMap.get(n)&&(this._activePointerMap.size===1?(this._updatePointer(t.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",t.data,i),this._isDragging=!1,this._isCurrentDragSuppressed=!1,this._removePointer(n)):(this._removePointer(n),this._emitEvent("removed",t.data,t.timestamp)))}_handlePointerDrag(t){let n=t.data,i=n.currentEvent,o=t.timestamp;switch(n.action){case"start":case"update":this._isDragging?this._activePointerMap.has(i.native.pointerId)?(this._updatePointer(i),!this._isCurrentDragSuppressed&&this._emitEvent("update",i,o)):(this._addPointer(i),this._emitEvent("added",i,o),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(i),this._pointerType=t.data.startEvent.pointerType,this._mouseButton=t.data.startEvent.button,this._startStateModifiers=t.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",i,o))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&this._pointerType==="touch"&&this._activePointerMap.size===1}};function tw(e){let t=[];return e.forEach(n=>{t.push(me(n.event.x,n.event.y))}),Xb(t)}function Od(e){let t=tw(e),n=0;return e.forEach(i=>{let o=kd(i,t),r=o-i.lastAngle;for(;r>Math.PI;)r-=2*Math.PI;for(;r<-Math.PI;)r+=2*Math.PI;o=i.lastAngle+r,i.lastAngle=o;let s=o-i.initialAngle;n+=s}),n/=e.size||1,{angle:n,radius:t.radius,center:t.center}}function DD(e){let t=new Map;return e.forEach((n,i)=>t.set(i,n.event)),t}function kd(e,t){let n=e.event,i=n.x-t.center.x,o=n.y-t.center.y;return Math.atan2(o,i)}var ew;(function(e){e[e.Left=0]="Left",e[e.Middle=1]="Middle",e[e.Right=2]="Right",e[e.Back=3]="Back",e[e.Forward=4]="Forward",e[e.Undefined=-1]="Undefined"})(ew||(ew={}));var Pd=class extends le{constructor(t=et.maximumDoubleClickDelay,n=et.maximumDoubleClickDistance,i=et.maximumDoubleTouchDelay,o=et.maximumDoubleTouchDistance,r=un){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=n,this._maximumDoubleTouchDelay=i,this._maximumDoubleTouchDistance=o,this._clock=r,this._pointerState=new Map,this._immediateDoubleClick=this.registerOutgoing("immediate-double-click"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach(t=>{t.immediateDoubleClick&&t.immediateDoubleClick.timeoutHandle.remove()}),super.onUninstall()}_handlePointerDown(t){let n=t.data,i=bn(n);if(!this._pointerState.has(i)){let o={downButton:n.native.button,x:n.x,y:n.y,immediateDoubleClick:null};this._pointerState.set(i,o),this.startCapturingPointer(n.native)}}_handlePointerUp(t){let n=t.data,i=bn(n),o=this._pointerState.get(i);if(o&&o.downButton===n.native.button){let r=o.immediateDoubleClick,s=t.data.native.pointerType==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;r?(r.timeoutHandle.remove(),ir(r,t.data)>s?this._startImmediateDoubleClick(t,o):(this._immediateDoubleClick.emit(t.data,void 0,r.modifiers),this._removeState(n))):ir(o,t.data)>s?this._removeState(n):this._startImmediateDoubleClick(t,o)}}_startImmediateDoubleClick(t,n){let i=t.data.native.pointerType==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay;n.immediateDoubleClick={x:t.data.x,y:t.data.y,modifiers:t.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(t.data),i)}}_removeState(t){let n=bn(t);this._pointerState.delete(n),this.stopCapturingPointer(t.native),this.refreshHasPendingInputs()}};var Rd=class extends le{constructor(t=et.maximumClickDelay,n=et.movementUntilMouseDrag,i=et.movementUntilPenDrag,o=et.movementUntilTouchDrag,r=et.holdDelay,s=un){super(!1),this._maximumClickDelay=t,this._movementUntilMouseDrag=n,this._movementUntilPenDrag=i,this._movementUntilTouchDrag=o,this._holdDelay=r,this._clock=s,this._pointerState=new Map,this._pointerDrag=this.registerOutgoing("pointer-drag"),this._immediateClick=this.registerOutgoing("immediate-click"),this._pointerHold=this.registerOutgoing("hold"),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this)),this.registerIncoming("pointer-up",a=>{this._handlePointerLoss(a,"pointer-up")}),this.registerIncoming("pointer-capture-lost",a=>{this._handlePointerLoss(a,"pointer-capture-lost")}),this.registerIncoming("pointer-cancel",a=>{this._handlePointerLoss(a,"pointer-cancel")}),this._moveHandle=this.registerIncoming("pointer-move",this._handlePointerMove.bind(this)),this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(t=>{t.holdTimeout=Me(t.holdTimeout)}),super.onUninstall()}_handlePointerDown(t){let n=t.data,i=n.native.pointerId,o=null;this._pointerState.size===0&&(o=this._clock.setTimeout(()=>{let s=this._pointerState.get(i);if(s){if(!s.isDragging){let a=s.previousEvent;this._pointerHold.emit(a,void 0,t.modifiers),s.holdEmitted=!0}s.holdTimeout=null}},this._holdDelay));let r={startEvent:n,previousEvent:n,startTimestamp:t.timestamp,isDragging:!1,downButton:n.native.button,holdTimeout:o,modifiers:new Set};this._pointerState.set(i,r),this.startCapturingPointer(n.native),this._moveHandle.resume(),this._pointerState.size>1&&this._startDragging(t)}_handlePointerMove(t){let n=t.data,i=n.native.pointerId,o=this._pointerState.get(i);o&&(o.isDragging?this._pointerDrag.emit(Fd("update",o,n),void 0,o.modifiers):Jb(n,o.startEvent)>this._getDragThreshold(n.native.pointerType)&&this._startDragging(t),o.previousEvent=n)}_getDragThreshold(t){switch(t){case"touch":return this._movementUntilTouchDrag;case"pen":return this._movementUntilPenDrag;default:return this._movementUntilMouseDrag}}_startDragging(t){let n=t.data,i=n.native.pointerId;this._pointerState.forEach(o=>{o.holdTimeout!=null&&(o.holdTimeout.remove(),o.holdTimeout=null),o.isDragging||(o.modifiers=t.modifiers,o.isDragging=!0,i===o.startEvent.native.pointerId?this._pointerDrag.emit(Fd("start",o,n)):this._pointerDrag.emit(Fd("start",o,o.previousEvent),t.timestamp))})}_handlePointerLoss(t,n){let i=t.data,o=i.native.pointerId,r=this._pointerState.get(o);r&&(r.holdTimeout!=null&&(r.holdTimeout.remove(),r.holdTimeout=null),r.isDragging?this._pointerDrag.emit(Fd("end",r,n==="pointer-up"?i:r.previousEvent),void 0,r.modifiers):n==="pointer-up"&&r.downButton===i.native.button&&t.timestamp-r.startTimestamp<=this._maximumClickDelay&&!r.holdEmitted&&this._immediateClick.emit(i),this._pointerState.delete(o),this.stopCapturingPointer(i.native),this._pointerState.size===0&&this._moveHandle.pause())}};function Fd(e,t,n){return{action:e,startEvent:t.startEvent,previousEvent:t.previousEvent,currentEvent:n}}var Ld=class extends le{constructor(t=et.maximumDoubleClickDelay,n=et.maximumDoubleClickDistance,i=et.maximumDoubleTouchDelay,o=et.maximumDoubleTouchDistance,r=un){super(!1),this._maximumDoubleClickDelay=t,this._maximumDoubleClickDistance=n,this._maximumDoubleTouchDelay=i,this._maximumDoubleTouchDistance=o,this._clock=r,this._pointerState=new Map,this._click=this.registerOutgoing("click"),this._doubleClick=this.registerOutgoing("double-click"),this.registerIncoming("immediate-click",this._handleImmediateClick.bind(this)),this.registerIncoming("pointer-down",this._handlePointerDown.bind(this))}onUninstall(){this._pointerState.forEach(t=>t.doubleClickTimer=Me(t.doubleClickTimer))}get hasPendingInputs(){return po(this._pointerState,t=>t.doubleClickTimer!=null)}_clearDoubleClickTimer(t,n){let i=this._pointerState.get(t);i&&(i.doubleClickTimer=Me(i.doubleClickTimer),n&&this._click.emit(i.event.data,void 0,i.event.modifiers),this._pointerState.delete(t),this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(t){let n=this._pointerState.get(t);n.pointerDownCount===1&&this._click.emit(n.event.data,void 0,n.event.modifiers),n.doubleClickTimer=null,this._pointerState.delete(t),this.refreshHasPendingInputs()}_handleImmediateClick(t){let n=t.data,{pointerType:i}=n.native,o=ED(n);if(!this._pointerState.has(o))return void this._startClick(t);let r=this._pointerState.get(o),{data:s,modifiers:a}=r.event,l=i==="touch"?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;ir(s,n)>l?(this._clearDoubleClickTimer(o,!0),this._startClick(t)):(this._clearDoubleClickTimer(o,!1),r.pointerDownCount===2&&this._doubleClick.emit(s,void 0,a))}_handlePointerDown(t){let n=bn(t.data),i=this._pointerState.get(n);i&&(i.pointerDownCount+=1)}_startClick(t){let{data:n}=t,{native:{pointerType:i}}=n,o=bn(n),r=i==="touch"?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay,s=this._clock.setTimeout(()=>this._doubleClickTimeoutExceeded(o),r);this._pointerState.set(o,{event:t,doubleClickTimer:s,pointerDownCount:1}),this.refreshHasPendingInputs()}};function ED(e){let{pointerId:t,pointerType:n,button:i}=e.native;return n==="mouse"?`${t}:${i}`:`${n}`}var Nd={counter:"Control",pan:{left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},zoom:{zoomIn:["=","+"],zoomOut:["-","_"]},rotate:{clockwiseOption1:"a",clockwiseOption2:"A",counterClockwiseOption1:"d",counterClockwiseOption2:"D",resetOption1:"n",resetOption2:"N"}},nr=class extends k{initialize(){let e=()=>this.view?.ready;this.addHandles([pi(()=>!e(),()=>this._disconnect()),pi(e,()=>this._connect())])}destroy(){this._disconnect()}get latestPointerType(){return this._inputManager?.latestPointerType}get latestPointerLocation(){return this._inputManager?.latestPointerLocation}get multiTouchActive(){return this._inputManager?.multiTouchActive??!1}isModifierKeyDown(e){return this._inputManager?.isModifierKeyDown(e)??!1}_disconnect(){this.view.viewEvents.disconnect(),this._inputManager=re(this._inputManager)}_connect(){let e=this.view.surface,t=new Qb(e,this.view.input),n=[new Pd,new Rd,new Ld,new Ad(this.view.navigation),new Id],i=new Wy({eventSource:t,recognizers:n});i.installHandlers("prevent-context-menu",[new xd],ve.INTERNAL),i.installHandlers("navigation",[new Dd(this.view),new bd(this.view),new Md(this.view),new ul(this.view),new ul(this.view,[Nd.counter]),new yd(this.view,"primary"),new Sd(this.view,Nd.pan),new Td(this.view,Nd.zoom),new Cd(this.view,Nd.rotate),new vd(this.view,"secondary"),new _d(this.view,"touch")],ve.INTERNAL),this.view.viewEvents.connect(i),this._source=t,this._inputManager=i,I(()=>this.view?.navigation?.browserTouchPanEnabled,o=>{this._source&&(this._source.browserTouchPanningEnabled=!o)},ie)}get test(){}};c([d()],nr.prototype,"view",void 0),c([d()],nr.prototype,"latestPointerType",null),c([d()],nr.prototype,"latestPointerLocation",null),c([d()],nr.prototype,"multiTouchActive",null),nr=c([b("esri.views.2d.input.MapViewInputManager")],nr);var iw=nr;var or={added:[],removed:[]},dm=new Set,xD=new uy(0,0,0,0);function ID(e,t){let n=tc(t);if(!n)return null;let[i,o]=n.valid;return e[2]>o?[$o([e[0],e[1],o,e[3]]),$o([i,e[1],i+e[2]-o,e[3]])]:e[0]<i?[$o([i,e[1],e[2],e[3]]),$o([o-(i-e[0]),e[1],o,e[3]])]:null}var Vd=class extends Be{constructor(t){super(),this._tiles=new Map,this._index=Sy(9,$e("esri-csp-restrictions")?n=>({minX:n.bounds[0],minY:n.bounds[1],maxX:n.bounds[2],maxY:n.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]),this.tiles=[],this.tileScheme=t}destroy(){this.clear()}clear(){this.tiles.length=0,this._tiles.clear(),this._index.clear()}has(t){return this._tiles.has(t)}get(t){return this._tiles.get(t)}getIntersectingTiles(t){if(!t||sc(t)===0||ac(t)===0)return[];let n=ID(t,this.tileScheme.spatialReference);return n!=null?[...new Set([...this.boundsIntersections(n[0]),...this.boundsIntersections(n[1])])]:this.boundsIntersections(t)}boundsIntersections(t){return this._index.search({minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]})}updateTiles(t){let n={added:[],removed:[]};for(let i of t.added)if(!this.has(i)){let o=new cp(this.tileScheme,i);this._tiles.set(i,o),this._index.insert(o),n.added.push(o)}for(let i of t.removed)if(this.has(i)){let o=this.get(i);this._tiles.delete(i),this._index.remove(o),n.removed.push(o)}this.tiles.length=0,this._tiles.forEach(i=>this.tiles.push(i)),(n.added.length||n.removed.length)&&this.emit("update",n)}setViewState(t){let n=this.tileScheme.getTileCoverage(t,0);if(!n)return;let{spans:i,lodInfo:o}=n,{level:r}=o;if(i.length>0)for(let{row:s,colFrom:a,colTo:l}of i)for(let u=a;u<=l;u++){let p=xD.set(r,s,o.normalizeCol(u),o.getWorldForColumn(u)).id;if(dm.add(p),!this.has(p)){let h=new cp(this.tileScheme,p);this._tiles.set(p,h),this._index.insert(h),this.tiles.push(h),or.added.push(h)}}for(let s=this.tiles.length-1;s>=0;s--){let a=this.tiles[s];dm.has(a.id)||(this._tiles.delete(a.id),this.tiles.splice(s,1),this._index.remove(a),or.removed.push(a))}(or.added.length||or.removed.length)&&this.emit("update",or),py.pool.release(n),dm.clear(),or.added.length=0,or.removed.length=0}};function rw(e,t,n){return D(this,null,function*(){let i=Cc(t)?Sc(e,t):t;if(!e.ready||isNaN(i.x)||isNaN(i.y))return{screenPoint:i,results:[]};let o=new Set,r=new Set,s=!1,a=null,l=null;n?.include?ow(n.include,nw(e,m=>{o.add(m),um(m,f=>r.add(f))},(m,f)=>{r.add(m),o.add(f)},m=>{a||(a=new Set),a.add(m)},m=>o.add(m),()=>s=!0)):(s=!0,o=new Set(e.allLayerViews),o.forEach(m=>{um(m,f=>r.add(f))})),n?.exclude&&ow(n.exclude,nw(e,m=>{o.delete(m),um(m,f=>r.delete(f))},m=>r.delete(m),m=>{l||(l=new Set),l.add(m)}));let u=e.toMap(i),p=e.allLayerViews.filter(m=>!m.suspended&&o.has(m)&&m.clips.every(f=>w0(e,f,i,u))).reverse(),h=[...s?e.graphicsView.hitTest(u).map(m=>({type:"graphic",graphic:m,layer:null,mapPoint:u})):[],...yield Promise.all(p.map(m=>m.hitTest(u,i)).toArray())].filter(dt).flat().filter(dt);return h=h.filter(m=>m.type!=="graphic"||m.layer?.type!=="subtype-group"||r.has(m.graphic.layer)),a&&(h=h.filter(m=>!("graphic"in m)||!m.graphic||a?.has(pm(m.graphic)))),l&&(h=h.filter(m=>!("graphic"in m)||!m.graphic||!l?.has(pm(m.graphic)))),{screenPoint:i,results:h}})}function nw(e,t,n,i,o,r){return s=>{if(s instanceof Iy){if(s.layer===e)r?.();else{let a=e.allLayerViews.find(l=>l.layer===s.layer);a&&o?.(a)}i(pm(s))}else if(!("layer"in s&&"element"in s))if(s.type==="subtype-sublayer"){let a=e.allLayerViews.find(l=>l.layer===s.parent);a&&n(s,a)}else{let a=e.allLayerViews.find(l=>l.layer===s);a&&t(a)}}}function ow(e,t){if(e)if(Uu(e))for(let n of e)if(Uu(n))for(let i of n)t(i);else t(n);else t(e)}function pm(e){let t=e.getObjectId();return t?`${e.layer?.uid??e.sourceLayer?.uid??"MapView"}/${t}`:`"MapView/${e.uid}`}function um({layer:e},t){e?.type==="subtype-group"&&e.sublayers.forEach(n=>{t(n)})}var sw={flipY:!0,premultipliedAlpha:!0};function aw(e,t){return D(this,null,function*(){let n=yield cw(e,t),{format:i,quality:o}=v0(t?.format,t?.quality);return _0(n,{format:i,quality:o,rotation:0,disableDecorations:!1},sw)})}function lw(e,t){return D(this,null,function*(){let n=yield cw(e,t);return y0(n,sw)})}function cw(e,t){let n=AD(t||{},kD(e.stage,e.size),e.size,e.padding),i=OD(t,e.allLayerViews);return e.stage.takeScreenshot(n,i,e.backgroundColor,t?.rotation)}function OD(e={},t){if(!e.layers)return;let n=[];return e.layers.forEach(i=>{let o=t.find(r=>r.layer.id===i.id);o?.container&&n.push(o.container)}),n}function kD(e,t){return Math.min(4,b0(t,Math.min(4096,e.context.parameters.maxTextureSize)))}function AD(e,t,n,i){e.ignorePadding&&(i={left:0,right:0,top:0,bottom:0});let o=null;e.width!=null&&e.height!=null?o=[e.width,e.height]:e.width==null&&e.height!=null?o=[e.height,e.height]:e.width!=null&&e.height==null?o=[e.width,e.width]:e.width==null&&e.height==null&&(o=null);let r=n[0]-(i.left+i.right),s=n[1]-(i.top+i.bottom),a,l,u=e.area||{x:0,y:0,width:r,height:s};if(o){let p=r/s,h=o[0]/o[1];if(h>p){let m=u.width/h;u={x:u.x,y:Math.round(u.y+(u.height-m)/2),width:u.width,height:Math.round(m)}}else{let m=u.height*h;u={x:Math.round(u.x+(u.width-m)/2),y:u.y,width:Math.round(m),height:u.height}}}else o=[u.width,u.height];return o[0]>u.width?(a=Math.min(o[0]/u.width,t),l=o[0]/u.width/a):(a=1,l=o[0]/u.width),{cropArea:{x:Math.round((u.x+i.left)*a),y:Math.round((u.y+i.top)*a),width:Math.round(u.width*a),height:Math.round(u.height*a)},outputScale:l,resolutionScale:a}}var dw=160,Ps=class extends k{constructor(){super(...arguments),this._timer=void 0}get stationary(){return!this._timer}flip(){this._timestamp=performance.now(),this._timer==null&&(this._timer=setInterval(()=>{performance.now()-this._timestamp>=dw&&this.clear()},dw))}clear(){this._timer&&(clearInterval(this._timer),this._timer=void 0)}};c([d()],Ps.prototype,"_timer",void 0),c([d()],Ps.prototype,"stationary",null),Ps=c([b("esri.views.2d.support.StationaryManager")],Ps);function uw(e){let t=Uy();return t.available?e==="3d"&&t.majorPerformanceCaveat?new ne("webgl:major-performance-caveat-detected","Your WebGL implementation doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist."):t.supportsHighPrecisionFragment?t.supportsVertexShaderSamplers?null:new ne("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new ne("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new ne("webgl:required","WebGL2 is required but not supported.",new Error().stack)}function PD(e){return e&&"nodeType"in e}function FD(e){return e&&typeof e.render=="function"}var pw={component:"esri-component"},rr=class extends k{constructor(){super(...arguments),this.widget=null}destroy(){this.node=null,this.widget?.destroy()}get id(){return this._get("id")??this.widget?.id??this.node?.id}set id(e){this._set("id",e)}set node(e){let t=this._get("node");e!==t&&(e&&e.classList.add(pw.component),t&&t.classList.remove(pw.component),this._set("node",e))}castNode(e){return this.widget?.destroy(),e?typeof e=="string"||PD(e)?(this._set("widget",null),Jl(e)):(FD(e)&&!e.domNode&&(e.domNode=document.createElement("div")),this._set("widget",e),e.domNode):(this._set("widget",null),null)}};c([d()],rr.prototype,"id",null),c([d()],rr.prototype,"node",null),c([hi("node")],rr.prototype,"castNode",null),c([d({readOnly:!0})],rr.prototype,"widget",void 0),rr=c([b("esri.views.ui.Component")],rr);var Fs=rr;var RD={left:0,top:0,bottom:0,right:0},hw={bottom:30,top:15,right:15,left:15},jn="esri-ui",Xt={ui:jn,corner:`${jn}-corner`,innerContainer:`${jn}-inner-container`,manualContainer:`${jn}-manual-container`,cornerContainer:`${jn}-corner-container`,topLeft:`${jn}-top-left`,topRight:`${jn}-top-right`,bottomLeft:`${jn}-bottom-left`,bottomRight:`${jn}-bottom-right`};function LD(e){return e&&!e._started&&typeof e.postMixInProperties=="function"&&typeof e.buildRendering=="function"&&typeof e.postCreate=="function"&&typeof e.startup=="function"}function Hd(e){return e===0?"0":`${e}px`}function hm(e){let t=typeof e=="object"&&e!==null&&Object.getPrototypeOf(e);return(t===null||t===Object.prototype)&&("component"in e||"index"in e||"position"in e)?e:null}function mm(e,{top:t,bottom:n,left:i,right:o}){e.style.top=t,e.style.bottom=n,e.style.left=i,e.style.right=o}var wn=class extends Be.EventedAccessor{constructor(e){super(e),this._cornerNameToContainerLookup={},this._positionNameToContainerLookup={},this._components=new Array,this._componentMap=new Map,this._removeWidgetHandleKey=Symbol("componentOnRemoveSymbol"),this._locale=Jg(),this.view=null,this._applyViewPadding=()=>{let t=this.container;t&&mm(t,this._toPixelPosition(this._getViewPadding()))},this._applyUIPadding=()=>{let t=this._innerContainer;t&&mm(t,this._toPixelPosition(this.padding))},this._initContainers()}initialize(){this.addHandles([I(()=>[this.view?.padding,this.container],this._applyViewPadding,ie),I(()=>this.padding,this._applyUIPadding,ie),I(()=>[this.container,this._locale],([e,t])=>{e&&e.setAttribute("lang",t)},ie),Xg(e=>{this._locale=e})])}destroy(){this.container=null;for(let e of this._components)e.destroy();this._components.length=0,this._componentMap.clear()}set container(e){let t=this._get("container");e!==t&&(e&&(e.classList.add(Xt.ui),c_(e),this._attachContainers(e)),t&&(t.classList.remove(Xt.ui),mm(t,{top:"",bottom:"",left:"",right:""}),Xl(t)),this._set("container",e))}get height(){let e=this.view?.height??0;if(e===0)return e;let t=this._getViewPadding(),{top:n,bottom:i}=t;return Math.max(e-n-i,0)}get padding(){return this._get("padding")}set padding(e){this._overrideIfSome("padding",e)}castPadding(e){return typeof e=="number"?{bottom:e,top:e,right:e,left:e}:v(v({},hw),e)}get width(){let e=this.view?.width??0;if(e===0)return e;let t=this._getViewPadding(),{left:n,right:i}=t;return Math.max(e-n-i,0)}add(e,t){let n,i,o;if(Array.isArray(e))return void e.forEach(s=>this.add(s,t));let r=hm(e);r&&({index:n,position:t,component:e,key:i}=r),t&&typeof t=="object"&&({index:n,key:i,position:t,internal:o}=t),!e||t&&!this._isValidPosition(t)||this._add(e,t,n,i,o)}remove(e,t){if(!e)return;if(Array.isArray(e))return e.map(i=>this.remove(i,t));let n=this._find(e);if(n){if(this._componentMap.has(n)&&this._componentMap.get(n)?.key!==t)return;let i=this._components.indexOf(n);return n.node.parentNode?.removeChild(n.node),this._componentMap.delete(n),n.widget?.removeHandlesReference(this._removeWidgetHandleKey),this._components.splice(i,1)[0]}}empty(e,t={removeInternal:!1}){if(Array.isArray(e)){for(let o of e)this.empty(o,t);return}let n=this._positionNameToContainerLookup[e??"manual"],i=Array.prototype.slice.call(n.children).map(o=>this._findByNode(o)).filter(o=>o==null?!1:!(this._componentMap.get(o)?.internal??!1)||t.removeInternal);for(let o of i)this.remove(o)}move(e,t){if(Array.isArray(e)&&e.forEach(r=>this.move(r,t)),!e)return;let n,i=hm(e)||hm(t);if(i&&(n=i.index,t=i.position,e=i.component||e),t&&!this._isValidPosition(t))return;let o=this.remove(e);o&&this.add(o,{position:t,index:n})}find(e){if(!e)return null;let t=this._findById(e);return t&&(t.widget||t.node)}getComponents(e,t={includeInternal:!1}){return e?Array.isArray(e)?e.flatMap(n=>this._getComponentsAtPosition(n,t)):this._getComponentsAtPosition(e,t):this._components.filter(n=>t.includeInternal||!this._componentMap.get(n)?.internal).map(({widget:n,node:i})=>n??i)}getPosition(e){for(let t in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[t].contains(e))return t;return null}_add(e,t,n,i,o){e instanceof Fs||(e=new Fs({node:e}));let{widget:r}=e;r!=null&&r instanceof k&&r.addHandles(Yt(()=>{queueMicrotask(()=>this.remove(e))}),this._removeWidgetHandleKey),this._place({component:e,position:t,index:n}),this._components.push(e),this._componentMap.set(e,{key:i,internal:o})}_find(e){return e?e instanceof Fs?this._findByComponent(e):typeof e=="string"?this._findById(e):this._findByNode(e.domNode||e):null}_getViewPadding(){return this.view?.padding??RD}_attachContainers(e){e.appendChild(this._innerContainer),e.appendChild(this._manualContainer)}_initContainers(){let e=document.createElement("div");e.classList.add(Xt.innerContainer,Xt.cornerContainer);let t=document.createElement("div");t.classList.add(Xt.innerContainer,Xt.manualContainer);let n=document.createElement("div");n.classList.add(Xt.topLeft,Xt.corner),e.appendChild(n);let i=document.createElement("div");i.classList.add(Xt.topRight,Xt.corner),e.appendChild(i);let o=document.createElement("div");o.classList.add(Xt.bottomLeft,Xt.corner),e.appendChild(o);let r=document.createElement("div");r.classList.add(Xt.bottomRight,Xt.corner),e.appendChild(r),this._innerContainer=e,this._manualContainer=t;let s=ba();this._cornerNameToContainerLookup={"top-left":n,"top-right":i,"bottom-left":o,"bottom-right":r,"top-leading":s?i:n,"top-trailing":s?n:i,"bottom-leading":s?r:o,"bottom-trailing":s?o:r},this._positionNameToContainerLookup=v({manual:t},this._cornerNameToContainerLookup)}_isValidPosition(e){return!!this._positionNameToContainerLookup[e]}_place(e){let t=e.position??"manual",{component:n,index:i}=e,o=this._positionNameToContainerLookup[t],r=i!=null&&i>-1;if(LD(n.widget)&&n.widget.startup(),!r)return void o.appendChild(n.node);let s=Array.from(o.children);if(i===0)return void(o.firstChild?Zu(n.node,o.firstChild):o.appendChild(n.node));i>=s.length?o.appendChild(n.node):Zu(n.node,s[i])}_toPixelPosition(e){return{top:Hd(e.top),left:Hd(e.left),right:Hd(e.right),bottom:Hd(e.bottom)}}_findByComponent(e){return this._components.find(t=>t===e)??null}_findById(e){return this._components.find(({id:t})=>t===e)??null}_findByNode(e){return this._components.find(({node:t})=>t===e)??null}_getComponentsAtPosition(e,t){let n=this._positionNameToContainerLookup[e];return Array.prototype.slice.call(n.children).map(i=>this._findByNode(i)).filter(dt).filter(i=>t.includeInternal||!this._componentMap.get(i)?.internal).map(({widget:i,node:o})=>i??o)}};c([d()],wn.prototype,"_locale",void 0),c([d()],wn.prototype,"container",null),c([d()],wn.prototype,"height",null),c([d({value:hw})],wn.prototype,"padding",null),c([hi("padding")],wn.prototype,"castPadding",null),c([d()],wn.prototype,"view",void 0),c([d()],wn.prototype,"width",null),wn=c([b("esri.views.ui.UI")],wn);var mw=wn;var ND=new Map;function fw(e){return ND.get(e)}function gw(e,t){return e&&"copyright"in e&&(!t||typeof e.originOf=="function"&&e.originOf("copyright")==="user")}function VD(e,t){return e.length!==t.length||e.some((n,i)=>n.text!==t[i].text)}function pl(e,t,n){!n||!t||e.find(i=>i.layerView===t&&i.text===n)||e.push({text:n,layerView:t})}function HD(e){return e.type==="bing-maps"}var zn=[],Rs=class extends k{constructor(e){super(e),this._clear=()=>{this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.removeHandles("suspension"),this.notifyChange("state")},this._pendingAttributions=new Set,this._fetchedAttributionData=new Map,this.items=new W,this.view=null,this._allLayerViewsChange=t=>{this.removeHandles("suspension"),this.removeHandles("visible-geometry-changed");let n=this.view?.allLayerViews;n&&(this.addHandles(n.map(i=>I(()=>[i.suspended,i.layer?.attributionVisible],()=>this._updateAttributionItems())).toArray(),"suspension"),n.forEach(i=>{i.declaredClass==="esri.views.3d.layers.Tiles3DLayerView3D"&&this.addHandles(i.on("visible-geometry-changed",()=>this._updateAttributionItems()),"visible-geometry-changed")})),t?.removed&&t.removed.forEach(i=>{this._pendingAttributions.delete(i),this._fetchedAttributionData.delete(i)}),this._updateAttributionItems()},this.addHandles([Zi(()=>this.view?.allLayerViews,"change",t=>this._allLayerViewsChange(t),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),pi(()=>this.view?.stationary===!0,()=>this._updateAttributionItems())])}destroy(){this.view=null,this._fetchedAttributionData.clear(),this._pendingAttributions.clear(),this.items.removeAll()}get state(){return this.view?.ready?this._pendingAttributions.size>0?"loading":"ready":"disabled"}_updateAttributionItems(){let e=this.view,t=e?.allLayerViews;if(zn.length=0,!e||!t)return void this._clear();t.forEach(i=>{if(i.suspended||!i.layer?.attributionVisible)return;let o=i.layer;if(gw(o,"user"))return void pl(zn,i,o.copyright);if(o.hasAttributionData){if(this._fetchedAttributionData.has(i)){let s=this._fetchedAttributionData.get(i);return void(s?pl(zn,i,this._getDynamicAttribution(s,e,o)):gw(o)&&pl(zn,i,o.copyright))}return void this._fetchAttributionData(i)}let r="portalItem"in o?o.portalItem?.accessInformation:void 0;pl(zn,i,r||o.copyright)});let n=t.find(i=>i.layer?.type==="integrated-mesh-3dtiles");if(this.view&&n){let i=fw(this.view);if(i){let o=i.getAttributionText();for(let r=0;r<o.length;++r)pl(zn,n,o[r])}}VD(this.items,zn)&&(this.items.removeAll(),this.items.addMany(zn)),zn.length=0,this.notifyChange("state")}_fetchAttributionData(e){return D(this,null,function*(){if(this._pendingAttributions.has(e))return;this._pendingAttributions.add(e);let t=yield r_(e.layer.fetchAttributionData());if(this._pendingAttributions.has(e)){let n=t.ok?this._createContributionIndex(t.value,HD(e.layer)):null;this._pendingAttributions.delete(e),this._fetchedAttributionData.set(e,n)}this._updateAttributionItems()})}_createContributionIndex(e,t){let n=e.contributors,i={};if(!n)return i;for(let o=0;o<n.length;o++){let r=n[o],s=r.coverageAreas;if(!s)return;for(let a of s){let l=a.bbox,u=a.zoomMin-(t&&a.zoomMin?1:0),p=a.zoomMax-(t&&a.zoomMax?1:0),h=new pn({xmin:l[1],ymin:l[0],xmax:l[3],ymax:l[2],spatialReference:es.WGS84}),m={extent:y_(h),attribution:r.attribution||"",score:a.score!=null?a.score:100,id:o};for(let f=u;f<=p;f++)i[f]??=[],i[f].push(m)}}return i.maxKey=Math.max.apply(null,Object.keys(i)),i}_getDynamicAttribution(e,t,n){let{extent:i,scale:o}=t,r=n.tileInfo?.scaleToZoom(o)??0;if(r=Math.min(e.maxKey??0,Math.round(r)),!i||r==null||r<=-1)return"";let s=e[r],a=__(i.center.clone().normalize(),t.spatialReference),l=new Set;return s?s.filter(u=>{let p=u.id,h=!l.has(p)&&a&&u.extent&&nc(u.extent,a);return h&&l.add(p),h}).sort((u,p)=>p.score-u.score||u.objectId-p.objectId).map(u=>u.attribution).join(", "):""}};c([d({readOnly:!0,type:W})],Rs.prototype,"items",void 0),c([d({readOnly:!0})],Rs.prototype,"state",null),c([d()],Rs.prototype,"view",void 0),Rs=c([b("esri.widgets.Attribution.AttributionViewModel")],Rs);var fm=Rs;var Ls="esri-attribution",Ns={base:Ls,poweredBy:`${Ls}__powered-by`,sources:`${Ls}__sources`,open:`${Ls}--open`,sourcesOpen:`${Ls}__sources--open`,link:`${Ls}__link`},jt=class extends ot{constructor(e,t){super(e,t),this._isOpen=!1,this._attributionTextOverflowed=!1,this._prevSourceNodeHeight=0,this._resizeObserver=new ResizeObserver(n=>n.forEach(({target:i})=>this._checkSourceTextOverflow(i))),this.itemDelimiter=" | ",this.messages=null,this.viewModel=new fm}initialize(){this.addHandles(Zi(()=>this.viewModel?.items,"change",()=>this.scheduleRender()))}destroy(){this._resizeObserver?.disconnect()}get _isInteractive(){return this._isOpen||this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((e,t)=>(e.includes(t.text)||e.push(t.text),e),[]).join(this.itemDelimiter)}get icon(){return"description"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){let e={[Ns.open]:this._isOpen};return M("div",{bind:this,class:this.classes(Ns.base,Ae.widget,e),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),this._renderPoweredBy())}_renderPoweredBy(){return M("div",{class:Ns.poweredBy},"Powered by"," ",M("a",{class:Ns.link,href:"https://www.esri.com/",rel:"noreferrer",target:"_blank"},"Esri"))}_renderSourcesNode(){let e=this._isOpen,t=this._isInteractive,n=t?0:void 0,{attributionText:i}=this,o={[Ns.sourcesOpen]:e,[Ae.interactive]:t};return M("div",{afterCreate:this._afterSourcesNodeCreate,bind:this,class:this.classes(Ns.sources,o),innerHTML:i,tabIndex:n})}_afterSourcesNodeCreate(e){this._prevSourceNodeHeight=e.clientWidth,this._resizeObserver.observe(e)}_checkSourceTextOverflow(e){let t=!1,{clientHeight:n,clientWidth:i,scrollWidth:o}=e,r=o>i,s=this._attributionTextOverflowed!==r;if(this._attributionTextOverflowed=r,s&&(t=!0),this._isOpen){let a=n<this._prevSourceNodeHeight;this._prevSourceNodeHeight=n,a&&(this._isOpen=!1,t=!0)}t&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};c([d()],jt.prototype,"_isOpen",void 0),c([d()],jt.prototype,"_isInteractive",null),c([d()],jt.prototype,"_attributionTextOverflowed",void 0),c([d()],jt.prototype,"_prevSourceNodeHeight",void 0),c([d({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],jt.prototype,"attributionText",null),c([d()],jt.prototype,"icon",null),c([d()],jt.prototype,"itemDelimiter",void 0),c([d()],jt.prototype,"label",null),c([d(),ut("esri/widgets/Attribution/t9n/Attribution")],jt.prototype,"messages",void 0),c([d()],jt.prototype,"view",null),c([d({type:fm})],jt.prototype,"viewModel",void 0),c([qy()],jt.prototype,"_toggleState",null),jt=c([b("esri.widgets.Attribution")],jt);var _w=jt;function yw(e){return e?.spatialReference?.isWebMercator||e?.spatialReference?.isGeographic||!1}var sr=class extends Ky(k){constructor(e){super(e),this.orientation={x:0,y:0,z:0},this.view=null,this._updateForCamera=this._updateForCamera.bind(this),this._updateForRotation=this._updateForRotation.bind(this),this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this.addHandles(I(()=>this.view,this._updateRotationWatcher,ie))}destroy(){this.view=null}get canShowNorth(){return yw(this.view)}get state(){return!this.view?.ready||this.view.type==="2d"&&!this.view.constraints.rotationEnabled?"disabled":this.canShowNorth?"compass":"rotation"}reset(){this.view?.ready&&(this.view?.type==="2d"?this.callGoTo({target:{rotation:0},options:{animationMode:"always",duration:$e("mapview-essential-goto-duration")}}):this.callGoTo({target:{heading:0}}))}_updateForRotation(e){e!=null&&this._set("orientation",{z:e})}_updateForCamera(e){if(!e)return;let t=-e.heading;this._set("orientation",{x:0,y:0,z:t})}_updateRotationWatcher(e){this.removeAllHandles(),e&&this.addHandles(e.type==="2d"?I(()=>e?.rotation,this._updateForRotation,ie):I(()=>e?.camera,this._updateForCamera,ie))}};c([d({readOnly:!0})],sr.prototype,"canShowNorth",null),c([d({readOnly:!0})],sr.prototype,"orientation",void 0),c([d({readOnly:!0})],sr.prototype,"state",null),c([d()],sr.prototype,"view",void 0),sr=c([b("esri.widgets.Compass.CompassViewModel")],sr);var gm=sr;var vw="esri-compass",_m={base:vw,iconContainer:`${vw}__icon-container`};var Un=class extends ot{constructor(e,t){super(e,t),this.messages=null,this.viewModel=new gm,this._reset=()=>{this.viewModel.reset()},this._toRotationTransform=n=>({transform:`rotateZ(${n.z}deg)`})}loadDependencies(){return Rt({button:()=>import("./chunk-TK63DTGS.js"),icon:()=>import("./chunk-4HUBSTEF.js")})}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(e){this.viewModel.goToOverride=e}get icon(){return this.viewModel.state==="rotation"?"arrow-up":"compass-needle"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}reset(){return this.viewModel.reset()}render(){let{orientation:e,state:t}=this.viewModel,{messages:n}=this;return M("div",{class:this.classes(_m.base,Ae.widget)},M("calcite-button",{class:Ae.widgetButton,disabled:t==="disabled",kind:"neutral",label:n.reset,onclick:this._reset,round:!0,scale:"s",title:n.reset},M("div",{"aria-hidden":"true",class:_m.iconContainer,title:n.reset},M("calcite-icon",{icon:this.icon,styles:this._toRotationTransform(e)}))))}};c([d()],Un.prototype,"goToOverride",null),c([d()],Un.prototype,"icon",null),c([d()],Un.prototype,"label",null),c([d(),ut("esri/widgets/Compass/t9n/Compass")],Un.prototype,"messages",void 0),c([d()],Un.prototype,"view",null),c([d({type:gm})],Un.prototype,"viewModel",void 0),Un=c([b("esri.widgets.Compass")],Un);var bw=Un;var ww="esri-navigation-toggle",ym={base:ww,isLayoutHorizontal:`${ww}--horizontal`};var Vs=class extends k{constructor(e){super(e),this._navigationMode="pan",this.view=null}initialize(){this.addHandles(pi(()=>this.view?.inputManager,()=>this._setNavigationMode()))}destroy(){this.view=null}get state(){return this.view?.ready&&this.view?.type==="3d"?"ready":"disabled"}get navigationMode(){return this._navigationMode}set navigationMode(e){this._navigationMode=e,this._setNavigationMode()}toggle(){this.state!=="disabled"&&(this.navigationMode=this.navigationMode!=="pan"?"pan":"rotate")}_setNavigationMode(){let e=this.view?.inputManager;e&&(e.primaryDragAction=this._navigationMode==="pan"?"pan":"rotate")}};c([d({readOnly:!0})],Vs.prototype,"state",null),c([d()],Vs.prototype,"_navigationMode",void 0),c([d()],Vs.prototype,"view",void 0),Vs=c([b("esri.widgets.NavigationToggle.NavigationToggleViewModel")],Vs);var vm=Vs;var $n=class extends ot{constructor(e,t){super(e,t),this.messages=null,this.viewModel=new vm,this.toggle=()=>this.viewModel.toggle(),this._panButton=null,this._rotateButton=null,this._toggle=()=>{(this.viewModel?.navigationMode==="pan"?this._rotateButton:this._panButton)?.setFocus(),this.toggle()}}loadDependencies(){return Rt({button:()=>import("./chunk-TK63DTGS.js")})}get icon(){return"move"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){let e=this.viewModel?.state==="disabled",t=this.viewModel?.navigationMode==="pan",n=this.messages.toggle;return M("div",{class:this.classes(ym.base,Ae.widget,{[ym.isLayoutHorizontal]:this.layout==="horizontal"})},M("calcite-button",{afterCreate:i=>{this._panButton=i},appearance:t?"outline-fill":"solid",class:Ae.widgetButton,disabled:e,iconStart:"move",kind:"neutral",label:n,onclick:this._toggle,tabIndex:t?void 0:-1,title:n}),M("calcite-button",{afterCreate:i=>{this._rotateButton=i},appearance:t?"solid":"outline-fill",class:Ae.widgetButton,disabled:e,iconStart:"rotate",kind:"neutral",label:n,onclick:this._toggle,tabIndex:t?-1:void 0,title:n}))}};c([d()],$n.prototype,"icon",null),c([d()],$n.prototype,"label",null),c([d({value:"vertical"})],$n.prototype,"layout",null),c([d(),ut("esri/widgets/NavigationToggle/t9n/NavigationToggle")],$n.prototype,"messages",void 0),c([d()],$n.prototype,"view",null),c([d({type:vm})],$n.prototype,"viewModel",void 0),$n=c([b("esri.widgets.NavigationToggle")],$n);var Sw=$n;var ar=class extends k{get canZoomIn(){if(!this.view?.ready)return!1;let t=this.view?.constraints?.effectiveMaxScale;return t===0||this._scale>t}get canZoomOut(){let{view:e}=this;if(!e?.ready)return!1;let n=e.constraints?.effectiveMinScale;return n===0||this._scale<n}get _scale(){let e=this.view?.animation?.target;return(e&&"then"in e?void 0:e?.scale)??this.view?.scale??0}};c([d({readOnly:!0})],ar.prototype,"canZoomIn",null),c([d({readOnly:!0})],ar.prototype,"canZoomOut",null),c([d()],ar.prototype,"view",void 0),c([d()],ar.prototype,"_scale",null),ar=c([b("esri.widgets.Zoom.ZoomConditions2D")],ar);var Cw=ar;var Hs=class extends k{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};c([d({readOnly:!0})],Hs.prototype,"canZoomIn",null),c([d({readOnly:!0})],Hs.prototype,"canZoomOut",null),c([d()],Hs.prototype,"view",void 0),Hs=c([b("esri.widgets.Zoom.ZoomConditions3D")],Hs);var Tw=Hs;var To=class extends k{constructor(e){super(e)}destroy(){this.view=null}get canZoomIn(){return this._zoomConditions!=null&&this._zoomConditions.canZoomIn}get canZoomOut(){return this._zoomConditions!=null&&this._zoomConditions?.canZoomOut}get state(){return this.view?.ready?"ready":"disabled"}set view(e){e?e.type==="2d"?this._zoomConditions=new Cw({view:e}):e.type==="3d"&&(this._zoomConditions=new Tw({view:e})):this._zoomConditions=null,this._set("view",e)}zoomIn(){if(!this.canZoomIn)return;let e=this.view;e.type==="2d"?e.mapViewNavigation.zoomIn():Wi(e.goTo({zoomFactor:2}))}zoomOut(){if(!this.canZoomOut)return;let e=this.view;e.type==="2d"?e.mapViewNavigation.zoomOut():Wi(e.goTo({zoomFactor:.5}))}};c([d()],To.prototype,"_zoomConditions",void 0),c([d()],To.prototype,"canZoomIn",null),c([d()],To.prototype,"canZoomOut",null),c([d({readOnly:!0})],To.prototype,"state",null),c([d()],To.prototype,"view",null),To=c([b("esri.widgets.Zoom.ZoomViewModel")],To);var bm=To;var Mw={base:"esri-zoom",horizontalLayout:"esri-zoom--horizontal"},Wn=class extends ot{constructor(e,t){super(e,t),this.messages=null,this.viewModel=new bm,this.zoomIn=()=>this.viewModel.zoomIn(),this.zoomOut=()=>this.viewModel.zoomOut()}loadDependencies(){return Rt({button:()=>import("./chunk-TK63DTGS.js")})}get icon(){return"magnifying-glass-plus"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}set layout(e){e!=="horizontal"&&(e="vertical"),this._set("layout",e)}set view(e){this.viewModel.view=e}get view(){return this.viewModel.view}render(){let e={[Mw.horizontalLayout]:this.layout==="horizontal"},{canZoomIn:t,canZoomOut:n}=this.viewModel,{zoomIn:i,zoomOut:o}=this.messages;return M("div",{class:this.classes(Mw.base,Ae.widget,e)},M("calcite-button",{class:Ae.widgetButton,disabled:!t,iconStart:"plus",kind:"neutral",label:i,onclick:this.zoomIn,title:i}),M("calcite-button",{class:Ae.widgetButton,disabled:!n,iconStart:"minus",kind:"neutral",label:o,onclick:this.zoomOut,title:o}))}};c([d()],Wn.prototype,"icon",null),c([d()],Wn.prototype,"label",null),c([d({value:"vertical"})],Wn.prototype,"layout",null),c([d(),ut("esri/widgets/Zoom/t9n/Zoom")],Wn.prototype,"messages",void 0),c([d()],Wn.prototype,"view",null),c([d({type:bm})],Wn.prototype,"viewModel",void 0),Wn=c([b("esri.widgets.Zoom")],Wn);var Dw=Wn;function BD(e){return e?.view!==void 0}var Bd=class extends mw{constructor(e){super(e),this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"},this.components=[],this._updateViewAwareWidgets=t=>{this.components.forEach(n=>{let i=this._find(n),o=i?.widget;BD(o)&&(o.view=t)})},this._componentsWatcher=(t,n)=>{this._removeComponents(n),this._addComponents(t),this._adjustPadding(t)}}initialize(){this.addHandles([I(()=>this.components,this._componentsWatcher,ie),I(()=>this.view,this._updateViewAwareWidgets,ie)])}_add(e,t,n,i,o){let r=e;if(typeof e=="string"&&this._defaultPositionLookup[e]){if(this._find(e))return;r=this._createComponent(e)}super._add(r,t,n,i,o)}_removeComponents(e){e.forEach(t=>{let n=this._find(t);n&&(this.remove(n),n.destroy())})}_adjustPadding(e){if(!e.includes("attribution")&&!this._isOverridden("padding")){let{top:t}=this.padding;this.padding=t}}_addComponents(e){this.constructed&&e.forEach(t=>this.add(this._createComponent(t),this._defaultPositionLookup[t]))}_createComponent(e){let t=this._createWidget(e);return new Fs({id:e,node:t})}_createWidget(e){let t=this.view;switch(e){case"attribution":return new _w({view:t});case"compass":return new bw({view:t});case"navigation-toggle":return new Sw({view:t});case"zoom":return new Dw({view:t})}}};c([d()],Bd.prototype,"components",void 0),Bd=c([b("esri.views.ui.DefaultUI")],Bd);var Gd=Bd;var jd=class extends Gd{constructor(e){super(e),this.components=["attribution","zoom"]}};c([d()],jd.prototype,"components",void 0),jd=c([b("esri.views.ui.2d.DefaultUI2D")],jd);var wm=jd;var Sm,zd=Sm=class extends Jr{constructor(e){super(e),this.color=new mn([0,0,0,1])}clone(){return new Sm(ya({color:this.color}))}};c([d({type:mn,json:{write:!0}})],zd.prototype,"color",void 0),zd=Sm=c([b("esri.webmap.background.ColorBackground")],zd);var Ew=zd;var xw,Iw,Ow,kw,Aw,Pw;function GD(){return D(this,null,function*(){let[,{GraphicsView2D:e,GraphicContainer:t,LabelManager:n,MapViewNavigation:i,MagnifierView2D:o,Stage:r}]=yield Promise.all([import("./chunk-OG3VJURW.js"),import("./chunk-VDUHK25V.js")]);Iw=e,Ow=t,kw=n,Aw=i,Pw=o,xw=r})}var Z=class extends Qv(tb(Xv(gb))){constructor(e){super(e),this._magnifierView=null,this.stage=null,this._resolveWhenReady=[],this.rootLayerViews=new Yo({getCollections:()=>[this.basemapView?.baseLayerViews,this.layerViews,this.basemapView?.referenceLayerViews],getChildrenFunction:()=>null}),this.featuresTilingScheme=null,this.fullOpacity=1,this.goToManager=new ll({view:this}),this.graphicsView=null,this.stateManager=new Lt({constraints:new sm({view:this})}),this.stationaryManager=new Ps,this.labelManager=null,this.mapViewNavigation=null,this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0},this.supersampleScreenshotsEnabled=!0,this.supportsGround=!1,this.frameTask=new gd(this),this.floors=new W,this.highlightOptions=new ap,this.inputManager=new iw({view:this}),this.map=null,this.spatialReferenceLocked=!1,this.timeline=new _p,this.type="2d",this.ui=new wm,this.test={takeScreenshot:t=>D(this,null,function*(){return lw(this._getScreenshotView(t),t)})},this.padding={top:0,right:0,bottom:0,left:0},this.addHandles([I(()=>this.viewpoint,()=>this.stationaryManager.flip(),Kt),this.on("resize",t=>this.stateManager.resize(t.width,t.height))]),Ay()}destroy(){this.layerViewManager.clear(),this._set("preconditionsReady",!1),this.frameTask=re(this.frameTask),this.goToManager.destroy(),this.rootLayerViews.destroy(),this.inputManager.destroy(),this._set("inputManager",null)}get graphicsTileStore(){return new Vd(this.featuresTilingScheme)}get constraintsInfo(){let e=this.defaultsFromMap?.tileInfo,t=this.spatialReference;return{lods:e?.spatialReference?.equals(t)?e.lods:null,spatialReference:t}}get state(){return this.stateManager.state}get initialExtentRequired(){if(!this.stateManager)return!1;let{scale:e,constraints:t,center:n,viewpoint:i,extent:o}=this,r=this.zoom;return!(this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties?.viewpoint)&&!o&&(t?.effectiveLODs||(r=-1),(!n||e===0&&r===-1)&&(i?.targetGeometry==null||i.targetGeometry.type!=="extent"&&!i.scale))}get _defaultsFromMapSettings(){return{required:{tileInfo:!0,heightModelInfo:!1,extent:!1},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get typeSpecificPreconditionsReady(){let e=this._getDefaultViewpoint();if(!e)return!1;let t=e.targetGeometry,n=this.spatialReference;return K_(t.spatialReference,n)}set animation(e){let t=this._get("animation");if(e===t)return;if(t&&t.stop(),e!==this.animationManager.animation&&this.animationManager.stop(),!e||e.isFulfilled())return this._set("animation",null),void(this.frameTask.animationInProgress=!1);this._set("animation",e),this.frameTask.animationInProgress=!0;let n=()=>{this.destroyed||(e===this._get("animation")&&(this._set("animation",null),this.frameTask?.requestFrame()),this.frameTask.animationInProgress=!1)};e.when(n,n)}get background(){return yp(this.map)?this.map.initialViewProperties.background:null}set background(e){this._override("background",e)}get center(){return this.stateManager?.center??null}set center(e){this.stateManager.center=e}get constraints(){return this.stateManager?.constraints}set constraints(e){e.view=this;let t=this.stateManager.constraints;this.stateManager.constraints=e,t?.destroy()}get extent(){return this.stateManager?.extent??null}set extent(e){this.stateManager.extent=e}get padding(){return this.stateManager?.padding}set padding(e){this.stateManager&&(this.stateManager.padding=e)}get rendering(){return this.stage?.renderRequested??!1}get resizeAlign(){return this.stateManager.resizeAlign}set resizeAlign(e){this.stateManager.resizeAlign=e}get resolution(){return this.stateManager.resolution??0}get rotation(){return this.stateManager.rotation??0}set rotation(e){let{rotationEnabled:t}=this.constraints;this.constraints.rotationEnabled=!0,this.stateManager.rotation=e,this.constraints.rotationEnabled=t}get scale(){return this.stateManager?.scale??0}set scale(e){this.stateManager&&(this.stateManager.scale=e)}get stationary(){return!this.animation&&!this.navigating&&!this.resizing&&this.stationaryManager.stationary}get tileInfo(){return this.featuresTilingScheme?.tileInfo}get updating(){let e=!(!this.magnifier.visible||this.magnifier.position===null||!this._magnifierView?.updatingHandles.updating),t=!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||this.layerViewManager.updating===!0||this.labelManager.updating===!0||this.graphicsView.updating===!0||this.allLayerViews.some(n=>!n.destroyed&&!("layerViews"in n)&&n.updating===!0)||e);if($e("esri-2d-log-updating")){let n=this.allLayerViews.reduce((i,o)=>B(v({},i),{[`${o.layer.id}(${o.layer.type})`]:!o.destroyed&&!("layerViews"in o)&&o.updating}),{});console.log(`Updating MapView: ${t}
-> Null LayerViewManager: ${!this.layerViewManager}
-> Null LabelManager: ${!this.labelManager}
-> Null GraphicsView: ${!this.graphicsView}
-> layerViewManager.updating: ${this.layerViewManager?.updating}
-> labelManager.updating: ${this.labelManager?.updating}
-> graphicsView.updating: ${this.graphicsView?.updating}
-> allLayerViews: ${JSON.stringify(n)}
-> updatingMagnifier: ${e}
`)}return t}get viewpoint(){return this.stateManager.viewpoint??null}set viewpoint(e){this.stateManager.viewpoint=e,this.frameTask.requestFrame()}get zoom(){return this.stateManager.zoom??-1}set zoom(e){this.stateManager.zoom=e}get navigating(){return this.mapViewNavigation?.interacting??!1}goTo(e,t){return this.goToManager.goTo(e,t)}hitTest(e,t){return D(this,null,function*(){return rw(this,e,t)})}takeScreenshot(e){return D(this,null,function*(){return aw(this._getScreenshotView(e),e)})}toMap(e){if(!this.ready)return null;let t=Cc(e)?Sc(this,e):e;return this.stateManager.toMap(t)}toScreen(e,t){return this.stateManager.toScreen(e,t)}on(e,t,n,i){return this.inputManager&&this.viewEvents.on(e,t,n,i)||super.on(e,t)}hasEventListener(e){return super.hasEventListener(e)||this.viewEvents.hasHandler(e)}whenLayerView(e){return super.whenLayerView(e)}graphicChanged(e){this.graphicsView&&this.graphicsView.graphicUpdateHandler(e)}whenReady(){return new Promise(e=>{this.ready?e(this):this._resolveWhenReady.push(e)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){return this.map&&"initialViewProperties"in this.map&&this.map?.initialViewProperties?.spatialReference||this.defaultsFromMap?.spatialReference||null}getDefaultTimeZone(){return yp(this.map)?this.map.initialViewProperties.timeZone:null}hasLayerViewModule(e){return em.hasLayerViewModule(e)}importLayerView(e){return em.importLayerView(e)}pixelSizeAt(){return this.ready?this.resolution:(q.getLogger(this).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}popupHitTest(e){return D(this,null,function*(){let t=this.toMap(e),n=yield this.hitTest(e),i=this.allLayerViews.toArray().reverse(),o=new globalThis.Map(i.map(l=>[l.layer.uid,l])),r=[],s=0,a=0;for(;s<n.results.length||a<i.length;){let l=n.results.at(s);if(l&&l.type!=="graphic"){++s;continue}let u=o.get((l?.layer??l?.graphic.layer)?.uid);if((!l||u)&&a<i.length&&i.at(a)!==u){let p=i.at(a);"fetchPopupFeaturesAtLocation"in p&&r.push({mapPoint:t,layerView:p}),++a}else l&&(r.push({graphic:l.graphic,layerView:u}),++s)}return{hits:r,location:t}})}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}validate(){return D(this,null,function*(){let e=uw(this.type);if($e("safari")&&$e("safari")<9&&(e=new ne("mapview:browser-not-supported","This browser is not supported by MapView (Safari < 9)",{type:"safari",requiredVersion:9,detectedVersion:$e("safari")})),e!=null)throw q.getLogger(this).warn("#validate()",e.message),e})}loadAsyncDependencies(){return GD()}_getDefaultViewpoint(){let{constraints:e,initialExtent:t,map:n,padding:i,size:o}=this;if(!e)return null;let r=n&&"initialViewProperties"in n?n.initialViewProperties:void 0,s=this.stateManager.getUserStartupOptions(this.size),a=r?.viewpoint,l=a?.targetGeometry?.extent??t,u=l?.center,p=a?.rotation??0,h=a?.scale||l&&Mc(l,[o[0]-i.left-i.right,o[1]-i.top-i.bottom]),m=s.center??u,f=s.rotation??p,w=s.scale??h;return m&&w?new mi({targetGeometry:m,scale:w,rotation:f}):null}_startup(){this.timeline.begin("MapView Startup");let e=this._getDefaultViewpoint();this.stateManager.startup(e,this.size,this.spatialReference,this.defaultsFromMap.extent?.center),this.graphics.owner=this;let t=new xw(this.surface,{canvas:this.renderCanvas,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this.stage=t,this._magnifierView=new Pw,this._magnifierView.magnifier=this.magnifier;let n=new kw({view:this});this._set("labelManager",n);let i=new Bb({view:this});this._set("animationManager",i);let o=new Aw({view:this,animationManager:i});this._set("mapViewNavigation",o),this._setupSpatialReferenceDependentProperties(),this.addHandles([this.rootLayerViews.on("change",()=>this._updateStageChildren()),t.on("webgl-error",s=>this.fatalError=s.error),I(()=>this.stationary,s=>t.stationary=s,ke),I(()=>this.background,s=>{t.backgroundColor=s?.color,this._magnifierView.backgroundColor=s?.color},ke),I(()=>this.magnifier,s=>this._magnifierView.magnifier=s,ke),I(()=>this.renderingOptions,s=>t.renderingOptions=s,ke),I(()=>this.highlightOptions,s=>t.highlightOptions=s,ke),I(()=>this.state.id,()=>t.state=this.state,ke)],"map-view"),this._updateStageChildren();let r=this._resolveWhenReady;this._resolveWhenReady=[],r.forEach(s=>s(this)),this.timeline.end("MapView Startup"),this.frameTask.start(),this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties(),this.removeHandles("map-view"),this.mapViewNavigation.destroy(),this._set("mapViewNavigation",null),this.animation=null,this.animationManager.destroy(),this._set("animationManager",null),this.layerViewManager.clear(),this.labelManager.destroy(),this._magnifierView.destroy(),this.stage.destroy(),this.stage=null,this._set("graphicsView",null),this._magnifierView=null,this._set("labelManager",null),this._set("mapViewNavigation",null),this.graphics.owner=null,this.frameTask.stop(),this.stationaryManager.clear(),this._set("ready",!1),this.stateManager.teardown()}_updateStageChildren(){this.stage.removeAllChildren(),this.rootLayerViews.forEach(t=>{this.stage.addChild(t.container)});let e=this.graphicsView;this.stage.addChild(e.container),this.stage.addChild(this._magnifierView)}_setupSpatialReferenceDependentProperties(){let e=new hy($_.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",e);let t=new Iw({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new Ow(e)});this._set("graphicsView",t)}_destroySpatialReferenceDependentProperties(){let e=this.graphicsView;this._set("graphicsView",null),e.destroy(),this._set("featuresTilingScheme",null)}_getScreenshotView(e){let{allLayerViews:t,padding:n,size:i,stage:o}=this;return{allLayerViews:t,backgroundColor:e?.ignoreBackground?null:this.background?.color,padding:n,size:i,stage:o}}_spatialReferenceChanged(e){if(this.ready){this.frameTask.stop();for(let t of this.allLayerViews)t.processDetach();this._destroySpatialReferenceDependentProperties(),this.stateManager.changeSpatialReference(e),this.stage.state=this.state,this._setupSpatialReferenceDependentProperties();for(let t of this.allLayerViews)t.processAttach();this.frameTask.requestFrame(),this.frameTask.start(),this._updateStageChildren()}}};Z.type="2d",c([d({readOnly:!0})],Z.prototype,"animationManager",void 0),c([d({constructOnly:!0})],Z.prototype,"deactivatedWebGLExtensions",void 0),c([d({constructOnly:!0})],Z.prototype,"debugWebGLExtensions",void 0),c([d({readOnly:!0})],Z.prototype,"featuresTilingScheme",void 0),c([d({readOnly:!0})],Z.prototype,"fullOpacity",void 0),c([d()],Z.prototype,"goToManager",void 0),c([d({readOnly:!0})],Z.prototype,"graphicsTileStore",null),c([d()],Z.prototype,"graphicsView",void 0),c([d()],Z.prototype,"stateManager",void 0),c([d()],Z.prototype,"constraintsInfo",null),c([d({readOnly:!0})],Z.prototype,"state",null),c([d()],Z.prototype,"initialExtentRequired",null),c([d()],Z.prototype,"labelManager",void 0),c([d({readOnly:!0})],Z.prototype,"mapViewNavigation",void 0),c([d({constructOnly:!0})],Z.prototype,"renderCanvas",void 0),c([d()],Z.prototype,"renderingOptions",void 0),c([d({constructOnly:!0})],Z.prototype,"supersampleScreenshotsEnabled",void 0),c([d({readOnly:!0})],Z.prototype,"supportsGround",void 0),c([d()],Z.prototype,"_defaultsFromMapSettings",null),c([d({readOnly:!0})],Z.prototype,"typeSpecificPreconditionsReady",null),c([d()],Z.prototype,"animation",null),c([d({type:Ew})],Z.prototype,"background",null),c([d()],Z.prototype,"center",null),c([d({type:sm})],Z.prototype,"constraints",null),c([d()],Z.prototype,"extent",null),c([d()],Z.prototype,"floors",void 0),c([d({type:ap})],Z.prototype,"highlightOptions",void 0),c([d({readOnly:!0})],Z.prototype,"inputManager",void 0),c([d()],Z.prototype,"map",void 0),c([d()],Z.prototype,"padding",null),c([d({readOnly:!0})],Z.prototype,"rendering",null),c([d()],Z.prototype,"resizeAlign",null),c([d({readOnly:!0})],Z.prototype,"resolution",null),c([d()],Z.prototype,"rotation",null),c([d()],Z.prototype,"scale",null),c([d({constructOnly:!0})],Z.prototype,"spatialReferenceLocked",void 0),c([d()],Z.prototype,"stationary",null),c([d({readOnly:!0})],Z.prototype,"tileInfo",null),c([d({type:_p,readOnly:!0})],Z.prototype,"timeline",void 0),c([d({readOnly:!0})],Z.prototype,"type",void 0),c([d({readOnly:!0})],Z.prototype,"updating",null),c([d()],Z.prototype,"viewpoint",null),c([d()],Z.prototype,"zoom",null),c([d({readOnly:!0})],Z.prototype,"navigating",null),c([d(),hi(e=>e instanceof Gd?e:Yg(wm,e))],Z.prototype,"ui",void 0),Z=c([b("esri.views.MapView")],Z);var Fw=Z;var Rw={readOnly:!0,get(){return T0(this.view)}};var zt="esri-scale-bar",De={base:zt,labelContainer:`${zt}__label-container`,rulerLabelContainer:`${zt}__label-container--ruler`,lineLabelContainer:`${zt}__label-container--line`,topLabelContainer:`${zt}__label-container--top`,bottomLabelContainer:`${zt}__label-container--bottom`,label:`${zt}__label`,line:`${zt}__line`,topLine:`${zt}__line--top`,bottomLine:`${zt}__line--bottom`,ruler:`${zt}__ruler`,rulerBlock:`${zt}__ruler-block`,barContainer:`${zt}__bar-container`,rulerBarContainer:`${zt}__bar-container--ruler`,lineBarContainer:`${zt}__bar-container--line`};function jD(e){return e>.5?{min:.5,max:1}:e>.2?{min:.2,max:.5}:{min:.1,max:.2}}function zD(e,t){switch(t){case"metric":return e>1e3?{distance:Uo(e,"meters","kilometers"),unit:"kilometer"}:e>1?{distance:e,unit:"meter"}:e>.01?{distance:Uo(e,"meters","centimeters"),unit:"centimeter"}:{distance:Uo(e,"meters","millimeters"),unit:"millimeter"};case"imperial":return e>1609.344?{distance:Uo(e,"meters","miles"),unit:"mile"}:e>.3048?{distance:Uo(e,"meters","feet"),unit:"foot"}:{distance:Uo(e,"meters","inches"),unit:"inch"}}}function UD(e){let{isWebMercator:t,wkt:n,wkt2:i}=e;return t||((i||n)?.includes("WGS_1984_Web_Mercator")??!1)}function Lw({state:{paddedViewState:e},spatialReference:t,width:n}){return t.isWrappable&&e.worldScreenWidth<n}function Nw(e,t){let{x:n,y:i}=e?v_(t,!0):t;return[n,i]}var Bs=class extends k{constructor(e){super(e),this.scaleComputedFrom=me(),this.view=null}get state(){return this.view?.ready&&this.view?.type==="2d"?"ready":"disabled"}getScaleBarProperties(e,t){if(this.state==="disabled"||isNaN(e)||!t||!this.view)return null;let n=this._getDistanceInMeters();return n==null?null:this._getScaleBarProps(e,n,t)}_getDistanceInMeters(){let{state:e,spatialReference:t}=this.view;if(!h_(t))return null;let{isGeographic:n}=t,i=UD(t);if(!n&&!i)return e.extent.width*(g_(t)??1);let[o,r]=this._getScaleMeasuringPoints(),s=i||n&&!M0(t)?es.WGS84:t,a=new N_({paths:[[Nw(i,o),Nw(i,r)]],spatialReference:s}),l=J_(a,10),u;try{[u]=D0([l],"meters")}catch{return null}return u}_getScaleMeasuringPoints(){let e=this.view,{width:t,height:n,position:i,spatialReference:o}=e;if(Lw(e)){let l=tc(o),{valid:u}=l;return[new Fe(u[0],0,o),new Fe(u[1],0,o)]}let r=this.scaleComputedFrom.y-i[1];r>n?r=n:r<0&&(r=0);let s=me(0,r),a=me(t,r);return[e.toMap(s),e.toMap(a)]}_getScaleBarProps(e,t,n){let i=this.view,o=e*t/(Lw(i)?i.state.paddedViewState.worldScreenWidth:i.width);if(o<.001)return null;let r=zD(o,n),{distance:s,unit:a}=r,l=s,u=0;for(;l>=1;)l/=10,u++;let{min:p,max:h}=jD(l),m=h/l>=l/p?p:h;return{length:e*(m/l),value:10**u*m,unit:a}}};c([d()],Bs.prototype,"scaleComputedFrom",void 0),c([d({readOnly:!0})],Bs.prototype,"state",null),c([d()],Bs.prototype,"view",void 0),Bs=c([b("esri.widgets.ScaleBar.ScaleBarViewModel")],Bs);var Vw=Bs;function Hw(e,t){return t_(e,{style:"unit",unit:t,unitDisplay:"short"})}var en=class extends ot{constructor(e,t){super(e,t),this.messages=null,this.style="line",this.viewModel=new Vw}initialize(){this.addHandles(I(()=>{let{view:e}=this;return[e?.stationary,e?.center,e?.scale,e?.zoom]},([e])=>{e&&this.scheduleRender()}))}get icon(){return"actual-size"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get unit(){return this._defaultUnit}set unit(e){this._overrideIfSome("unit",e)}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}render(){let e=this.viewModel.state==="disabled",t={[Ae.disabled]:e},n,i;if(!e){let{unit:o,style:r}=this,s=o==="metric"||o==="dual",a=100,l=o==="dual"?"line":r;if(o==="imperial"||o==="dual"){let u=this.viewModel.getScaleBarProperties(a,"imperial");u&&(i=l==="ruler"?this._renderRuler(u):this._renderLine(u,"bottom"))}if(s){let u=this.viewModel.getScaleBarProperties(a,"metric");u&&(n=l==="ruler"?this._renderRuler(u):this._renderLine(u,"top"))}}return M("div",{afterCreate:this._handleRootCreateOrUpdate,afterUpdate:this._handleRootCreateOrUpdate,bind:this,class:this.classes(De.base,Ae.widget,t)},n,i)}_renderRuler(e){let{length:t,unit:n,value:i}=e,o=Math.round(t),r=Hw(i,n);return M("div",{class:this.classes(De.barContainer,De.rulerBarContainer),key:De.rulerBarContainer},M("div",{class:De.ruler,styles:{width:`${o}px`}},M("div",{class:De.rulerBlock}),M("div",{class:De.rulerBlock}),M("div",{class:De.rulerBlock}),M("div",{class:De.rulerBlock})),M("div",{class:this.classes(De.labelContainer,De.rulerLabelContainer)},M("div",{class:De.label},"0"),M("div",{class:De.label},r)))}_renderLine(e,t){let{length:n,unit:i,value:o}=e,r=Math.round(n),s=Hw(o,i),a={[De.topLabelContainer]:t==="top",[De.bottomLabelContainer]:t==="bottom"},l=M("div",{class:this.classes(De.labelContainer,De.lineLabelContainer,a),key:De.labelContainer},M("div",{class:De.label},s)),u={[De.topLine]:t==="top",[De.bottomLine]:t==="bottom"},p=M("div",{class:this.classes(De.line,u),key:De.line,styles:{width:`${r}px`}});return M("div",{class:this.classes(De.barContainer,De.lineBarContainer),key:De.lineBarContainer},[p,l])}_handleRootCreateOrUpdate(e){if(!this.viewModel)return;let{scaleComputedFrom:t}=this.viewModel,n=e.getBoundingClientRect(),i=n.left+window.pageXOffset,o=n.top+window.pageYOffset,r=me(i,o);(r.x!==t.x||r.y!==t.y)&&(this.viewModel.scaleComputedFrom=r)}};c([d(Rw)],en.prototype,"_defaultUnit",void 0),c([d()],en.prototype,"icon",null),c([d()],en.prototype,"label",null),c([d(),ut("esri/widgets/ScaleBar/t9n/ScaleBar")],en.prototype,"messages",void 0),c([d({type:["ruler","line"]})],en.prototype,"style",void 0),c([d({type:["metric","imperial","dual"]})],en.prototype,"unit",null),c([d()],en.prototype,"view",null),c([d()],en.prototype,"viewModel",void 0),en=c([b("esri.widgets.ScaleBar")],en);var Bw=en;function Gw(e){return $D(e).result}function $D(e){if(e.graphic&&e.graphic.layer?.type!=="graphics")return{result:vt.GRAPHICS_LAYER_MISSING};if(!e.operations)return{result:vt.GEOMETRY_MISSING};if(Ny(e.elevationInfo))return{result:vt.ELEVATION_MODE_UNSUPPORTED};let t=e.operations.data.type,n=e.operations.data.geometry;return t==="point"||t==="mesh"||t==="polyline"||t==="polygon"?{result:vt.SUPPORTED,geometry:n}:{result:vt.GEOMETRY_TYPE_UNSUPPORTED}}function jw(e){if(e.layer?.type!=="graphics")return vt.GRAPHICS_LAYER_MISSING;if(e.geometry==null)return vt.GEOMETRY_MISSING;switch(e.geometry.type){case"point":break;case"polygon":case"polyline":case"multipoint":case"extent":case"mesh":return vt.SUPPORTED;default:return vt.GEOMETRY_TYPE_UNSUPPORTED}let t=e.symbol!=null&&e.symbol.type==="point-3d"&&e.symbol.symbolLayers;return!t||!t.some(n=>n.type==="object")?vt.SYMBOL_TYPE_UNSUPPORTED:Ry(e)!=="on-the-ground"&&Ly(e)?vt.ELEVATION_MODE_UNSUPPORTED:vt.SUPPORTED}var ei=class extends k{set attributeRulesEnabled(e){this._set("attributeRulesEnabled",e),e&&this.loadRules()}get layerView(){return this.view?.allLayerViews?.find(e=>e.layer===this.layer)}get valid(){let{_valid:e,snappingSource:t,layer:n}=this;return!(!t||!n)&&e}get subtypeFilter(){let{layer:e,snappingSource:t}=this;if(!Wo(e)||!e.subtypes?.length||!t)return{mode:"not-in-use",filter:null};let n=t.layerSource.sublayerSources.filter(o=>o.enabled&&o.layer.visible&&Yy(this.view?.scale,o.layer.effectiveScaleRange.minScale,o.layer.effectiveScaleRange.maxScale)).map(o=>o.layer.subtypeCode);if(!n.length)return{mode:"none-visible",filter:null};if(n.length===e.subtypes.length)return{mode:"all-visible",filter:null};let i=e.fieldsIndex.get(e.subtypeField)?.name??e.subtypeField;return n.length===1?{mode:"in-use",filter:`${i} = ${n.getItemAt(0)}`}:{mode:"in-use",filter:`${i} IN (${n.join(", ")})`}}get floorFilter(){let{view:e,layer:t}=this;return e&&t?jy({view:e,layer:t}):null}constructor(e){super(e),this.layer=null,this.snappingSource=null,this.rulesTable=null,this._valid=null}initialize(){if(!this.snappingSource||!this.layer)return void(this._valid=!1);let{layer:e,snappingSource:t}=this;if("refresh"in e){let n=e;this.addHandles(n.on("refresh",()=>t.refresh()))}this.loadRules(),this.addHandles([I(()=>t.updating,n=>t.layerSource.updating=n,ke),I(()=>t.availability,n=>t.layerSource.availability=n,ke)])}getFetchCandidatesParameters(e,t,n){if(!this.valid)return[];let{layer:i,layerView:o,floorFilter:r,rulesTable:s,subtypeFilter:a}=this,l=B(v({distance:n,mode:this.view?.type??"2d",point:e,coordinateHelper:t.coordinateHelper},WD()),{filter:o&&"filter"in o?o.filter:null});if(r&&(l.filter=Cm(l.filter,r)),a.mode!=="not-in-use"&&a.mode!=="all-visible"){if(a.mode==="none-visible")return[];l.filter?l.filter.where=tp(l.filter.where,a.mode):l.filter=new Da({where:a.filter})}if(!this.attributeRulesEnabled)return[l];let u=t.feature,p=u?.sourceLayer?.type==="subtype-sublayer"?u.sourceLayer.parent:u?.sourceLayer;if(s&&u&&Cp(this.view?.map)&&(ns(i)||Wo(i))&&i.layerId&&(ns(p)||Wo(p))&&this.view.map.utilityNetworks?.find(h=>h.isUtilityLayer(p))){if(s.loadStatus!=="loaded")return[];let h=[],m=i.layerId,f=s.getFeatureSQL(p,u)?.[m];if(!f)return[];let w=f.anyVertex,O=f.endVertex;return O&&w&&O===w&&(O=""),O&&h.push(B(v({},l),{returnEdge:!1,vertexMode:"ends",filter:Cm(l.filter,O)})),w&&h.push(B(v({},l),{returnEdge:!1,vertexMode:"all",filter:Cm(l.filter,w)})),h}return[l]}loadRules(){return D(this,null,function*(){this._valid=null;let{layer:e,view:t,attributeRulesEnabled:n}=this;if(n&&e&&t&&Cp(t?.map)&&(ns(e)||Wo(e)))try{yield Promise.allSettled(t.map.utilityNetworks?.map(o=>o.load())??[]);let i=t.map.utilityNetworks?.find(o=>o.isUtilityLayer(e));i&&(this.rulesTable=yield i.getRulesTable(),yield this.rulesTable?.load())}catch{return this._valid=!1,void q.getLogger("esri.views.interactive.snapping.FeatureSnappingSourceInfo").error("Failed to load rules table for snapping source",e.title)}this._valid=!0})}remove(){this.destroy()}destroy(){this.snappingSource?.destroy()}};function WD(){return{returnEdge:!0,vertexMode:"all"}}function Cm(e,t){return e==null?new Da({where:t}):e.where?new Da({where:tp(e.where,t)}):new Da({where:t})}c([d({constructOnly:!0})],ei.prototype,"layer",void 0),c([d({constructOnly:!0})],ei.prototype,"snappingSource",void 0),c([d({constructOnly:!0})],ei.prototype,"view",void 0),c([d({value:!1})],ei.prototype,"attributeRulesEnabled",null),c([d()],ei.prototype,"layerView",null),c([d()],ei.prototype,"rulesTable",void 0),c([d()],ei.prototype,"valid",null),c([d()],ei.prototype,"subtypeFilter",null),c([d()],ei.prototype,"floorFilter",null),c([d()],ei.prototype,"_valid",void 0),ei=c([b("esri.views.interactive.snapping.FeatureSnappingSourceInfo")],ei);var Mo=class extends gn{constructor({targetPoint:t,constraint:n,previousVertex:i,otherVertex:o,otherVertexType:r,isDraped:s,selfSnappingType:a,objectId:l,domain:u}){super(t,n,s,u??rt.SELF),this.previousVertex=i,this.otherVertex=o,this.otherVertexType=r,this.selfSnappingType=a??Sn.None,this.objectId=l??null}get hints(){let t=this.previousVertex,n=this.otherVertexType===Do.CENTER?this.otherVertex:this.targetPoint,i=this.otherVertexType===Do.CENTER?this.targetPoint:this.otherVertex;return[new Ii(xi.TARGET,n,i,this.isDraped,this.domain),new Ii(xi.REFERENCE,t,n,this.isDraped,this.domain),new Fc(this.previousVertex,n,i,this.isDraped,this.domain)]}},Do,Sn;(function(e){e[e.NEXT=0]="NEXT",e[e.CENTER=1]="CENTER"})(Do||(Do={})),function(e){e[e.None=0]="None",e[e.LastVertex=1]="LastVertex",e[e.FirstVertex=2]="FirstVertex",e[e.ExistingEdge=3]="ExistingEdge"}(Sn||(Sn={}));var qn=class extends k{get updating(){return this._snappingSources.some(e=>e?.valid==null||e.valid===!0&&e.snappingSource?.updating===!0)||this._updatingHandles.updating}constructor(e){super(e),this.options=null,this._domain=rt.FEATURE,this._updatingHandles=new hn,this._sourceModules={featureService:{module:null,loader:null},featureCollection:{module:null,loader:null},graphics:{module:null,loader:null},notes:{module:null,loader:null},scene:{module:null,loader:null}}}initialize(){let e=s_(()=>this.options?._effectiveFeatureSources,(t,n)=>this._createSourceInfo(t,n));this._snappingSources=e,this.addHandles([Vg(e),I(()=>({rulesEnabled:!!this.options?.attributeRulesEnabled,sources:this._snappingSources.filter(dt)}),({rulesEnabled:t,sources:n})=>{for(let i of n)i.attributeRulesEnabled=t},Kt)])}destroy(){this._set("options",null),this._updatingHandles.destroy()}fetchCandidates(e,t,n,i){return D(this,null,function*(){if(!(t&this._domain&&this.options!=null&&this.options.effectiveFeatureEnabled))return[];let o=[],r=this._computeScreenSizeDistanceParameters(e,n);for(let a of this._snappingSources){if(!a?.valid||!a.snappingSource?.layerSource?.enabled||a.layerView?.suspended)continue;let l=a.getFetchCandidatesParameters(e,n,r);for(let u of l)o.push(a.snappingSource.fetchCandidates(u,i).then(p=>p.filter(h=>!this._candidateIsExcluded(a.snappingSource,h,n.excludeFeature))))}let s=(yield Ql(o)).flat();return this._addRightAngleCandidates(s,e,r,n),nt(i),cs(e,s),s})}_addRightAngleCandidates(e,t,n,i){let o=i.vertexHandle!=null?i.vertexHandle.rightEdge?.rightVertex?.pos:i.editGeometryOperations!=null&&i.editGeometryOperations.data.type==="polygon"?i.editGeometryOperations.data.components[0]?.getFirstVertex()?.pos:null,r=i.vertexHandle!=null?i.vertexHandle.leftEdge?.leftVertex?.pos:i.editGeometryOperations!=null?i.editGeometryOperations.data.components[0]?.getLastVertex()?.pos:null,{view:s}=this,a=Ge(o,s,i),l=Ge(r,s,i),u=e.length;for(let p=0;p<u;p++)this._addRightAngleCandidate(e[p],l,t,n,e),this._addRightAngleCandidate(e[p],a,t,n,e)}_addRightAngleCandidate(e,t,n,i,o){if(t==null||!qD(e))return;let r=e.constraint.closestTo(t),s=(r[0]-n[0])/i.x,a=(r[1]-n[1])/i.y,{start:l,end:u}=e.constraint;if(s*s+a*a<=1){let p=qo(r,l)>qo(r,u)?l:u,h=new Mo({targetPoint:Qt(r),otherVertex:t,otherVertexType:Do.NEXT,previousVertex:p,constraint:new Oc(t,r),objectId:e.objectId,isDraped:e.isDraped,domain:rt.FEATURE});o.push(h)}}_computeScreenSizeDistanceParameters(e,t){let n=this.options!=null?this.options.distance*(t.pointer==="touch"?this.options.touchSensitivityMultiplier:1):0;return this.view==null?{x:n,y:n,z:n,distance:n}:this.view.type==="2d"?(n*=this.view.resolution,{x:n,y:n,z:n,distance:n}):this._computeScreenSizeDistanceParameters3D(e,n,this.view,t)}_computeScreenSizeDistanceParameters3D(e,t,n,i){let{spatialReference:o}=i;n.renderCoordsHelper.toRenderCoords(e,o,zw);let r=n.state.camera.computeScreenPixelSizeAt(zw),s=r*n.renderCoordsHelper.unitInMeters,a=s/ic(o),l=s/f_(o),u=t*a,p=t*l,h=We(e,o,Re,n),m=h?Tm(h,e,a,0,0,n,i):0,f=h?Tm(h,e,0,a,0,n,i):0,w=h?Tm(h,e,0,0,l,n,i):0;return{x:m===0?0:u/m,y:f===0?0:u/f,z:w===0?0:p/w,distance:r*t}}_candidateIsExcluded(e,t,n){if(n==null)return!1;let i=this._getCandidateObjectId(t);if(i==null)return!1;let o=e.layerSource.layer;return o.type==="graphics"?n.uid===i:n.sourceLayer===o&&!(!n.attributes||!("objectIdField"in o))&&n.attributes[o.objectIdField]===i}_getCandidateObjectId(e){return e instanceof V0?e.objectId:null}_createSourceInfo(e,t){return D(this,null,function*(){let n=e.layer;n.loaded||(yield n.load(),nt(t));let{view:i}=this,o=yield this._createFeatureSnappingSourceType(e);return nt(t),new ei(o==null?{}:{snappingSource:o,view:i,layer:n})})}_createFeatureSnappingSourceType(e){return D(this,null,function*(){switch(e.layer.type){case"feature":case"geojson":case"csv":case"oriented-imagery":case"subtype-group":case"wfs":return this._createFeatureSnappingSourceFeatureLayer(e);case"graphics":return this._createFeatureSnappingSourceGraphicsLayer(e);case"map-notes":return this._createFeatureSnappingSourceMapNotesLayer(e);case"scene":case"building-scene":return this._createFeatureSnappingSourceSceneLayer(e)}return null})}_createFeatureSnappingSourceSceneLayer(e){return D(this,null,function*(){let{view:t}=this;return t==null||t.type!=="3d"?null:new(yield this._getSourceModule("scene")).SceneLayerSnappingSource({layerSource:e,view:t})})}_createFeatureSnappingSourceFeatureLayer(e){return D(this,null,function*(){switch(e.layer.source?.type){case"feature-layer":case"oriented-imagery":return new(yield this._getSourceModule("featureService")).FeatureServiceSnappingSource({spatialReference:this.spatialReference,view:this.view,layerSource:e});case"memory":case"csv":case"geojson":case"wfs":return e.layer.geometryType==="mesh"?null:new(yield this._getSourceModule("featureCollection")).FeatureCollectionSnappingSource({layerSource:e,view:this.view})}return null})}_createFeatureSnappingSourceGraphicsLayer(e){return D(this,null,function*(){return new(yield this._getSourceModule("graphics")).GraphicsSnappingSource({getGraphicsLayers:()=>[e.layer],spatialReference:this.spatialReference,view:this.view,layerSource:e})})}_createFeatureSnappingSourceMapNotesLayer(e){return D(this,null,function*(){return new(yield this._getSourceModule("notes")).GraphicsSnappingSource({getGraphicsLayers:()=>e.layer.sublayers?.toArray()??[],spatialReference:this.spatialReference,view:this.view,layerSource:e})})}_getSourceModule(e){return D(this,null,function*(){let t=this._sourceModules[e];if(t.loader==null){let n=this._loadSourceModule(e),i={module:null,loader:n};this._sourceModules[e]=i;let o=yield n,r={module:o,loader:n};return this._sourceModules[e]=r,o}return t.module==null?t.loader:t.module})}_loadSourceModule(e){let t=this._updatingHandles;switch(e){case"featureService":return t.addPromise(import("./chunk-HVQMZYBR.js"));case"featureCollection":return t.addPromise(import("./chunk-CNN7HJII.js"));case"graphics":case"notes":return t.addPromise(import("./chunk-6AHQQ3MT.js"));case"scene":return t.addPromise(import("./chunk-ADK7DJMX.js"))}}get test(){}};function qD(e){return(e instanceof Pc||e instanceof Ac)&&!ZD(e)}function ZD({constraint:{start:e,end:t}}){let n=A_(e,t),i=qo(e,t);return n<ts()||i/n<KD}function Tm(e,t,n,i,o,r,{spatialReference:s}){let a=E_(YD,t);a[0]+=n,a[1]+=i,a[2]+=o;let l=We(a,s,Re,r);return l?L0(l,e):1/0}c([d({constructOnly:!0})],qn.prototype,"spatialReference",void 0),c([d({constructOnly:!0})],qn.prototype,"view",void 0),c([d()],qn.prototype,"options",void 0),c([d({readOnly:!0})],qn.prototype,"updating",null),c([d()],qn.prototype,"_snappingSources",void 0),qn=c([b("esri.views.interactive.snapping.FeatureSnappingEngine")],qn);var zw=Yi(),YD=Yi(),KD=1e-4;var Cn=class{constructor(t,n){this.view=t,this.options=n,this.squaredShortLineThreshold=gi.shortLineThreshold*gi.shortLineThreshold}snap(t,n){return n.vertexHandle!=null?n.vertexHandle.type!=="vertex"?[]:this.snapExistingVertex(t,n):this.snapNewVertex(t,n)}edgeExceedsShortLineThreshold(t,n){return this.exceedsShortLineThreshold(Ge(t.leftVertex.pos,this.view,n),Ge(t.rightVertex.pos,this.view,n),n)}exceedsShortLineThreshold(t,n,{spatialReference:i}){return this.squaredShortLineThreshold===0||Ei(We(n,i,Re,this.view),We(t,i,Re,this.view))>this.squaredShortLineThreshold}isVertical(t,n,{spatialReference:i}){let o=ic(i);return fo(t,n)*o<gi.verticalLineThresholdMeters}squaredProximityThreshold(t){return t==="touch"?this._squaredTouchProximityThreshold:this._squaredMouseProximityThreshold}get _squaredMouseProximityThreshold(){return this.options.distance*this.options.distance}get _squaredTouchProximityThreshold(){let{distance:t,touchSensitivityMultiplier:n}=this.options,i=t*n;return i*i}};var Gs=class extends gn{constructor({lineStart:t,lineEnd:n,targetPoint:i,isDraped:o}){super(i,new kc(t,n),o,rt.SELF),this._referenceLineHint=new Ii(xi.REFERENCE_EXTENSION,t,n,o,this.domain)}get hints(){return[this._referenceLineHint,new Ii(xi.TARGET,this._lineEndClosestToTarget(),this.targetPoint,this.isDraped,this.domain)]}_lineEndClosestToTarget(){return this.constraint.closestEndTo(this.targetPoint)}};var Ud=class extends Cn{snapNewVertex(t,n){let i=n.editGeometryOperations.data.components[0],o=i.edges.length,r=[];if(o<1)return r;let{spatialReference:s}=n,a=We(t,s,Re,this.view),{view:l}=this,u=i.edges[o-1],p=u;do{if(this.edgeExceedsShortLineThreshold(p,n)){let h=ds(p,l,n);this._processCandidateProposal(h.left,h.right,t,a,n,r)}p=p.leftVertex.leftEdge}while(p&&p!==u);return r}snapExistingVertex(t,n){let i=[],o=n.vertexHandle,r=o.component;if(r.edges.length<2)return i;let{view:s}=this,{spatialReference:a}=n,l=We(t,a,Re,s),u=o.leftEdge,p=o.rightEdge;u&&p&&this.edgeExceedsShortLineThreshold(u,n)&&this.edgeExceedsShortLineThreshold(p,n)&&this._processCandidateProposal(Ge(u.leftVertex.pos,s,n),Ge(p.rightVertex.pos,s,n),t,l,n,i);let h=r.edges[0],m=h;do{if(m!==o.leftEdge&&m!==o.rightEdge&&this.edgeExceedsShortLineThreshold(m,n)){let f=ds(m,s,n);this._processCandidateProposal(f.left,f.right,t,l,n,i)}m=m.rightVertex.rightEdge}while(m&&m!==h);return i}_processCandidateProposal(t,n,i,o,r,s){let{spatialReference:a,pointer:l}=r,u=Yi();QD(u,t,n,i,r);let p=Qt(u);Ei(o,We(p,a,Re,this.view))<this.squaredProximityThreshold(l)&&s.push(new Gs({lineStart:t,lineEnd:n,targetPoint:p,isDraped:r.elevationInfo?.mode==="on-the-ground"}))}};function QD(e,t,n,i,o){JD(e,t,n,i,o)||XD(e,i,t,n)}function JD(e,t,n,i,{spatialReference:o}){let r=ss(t,n,o,o);if(r==null)return!1;let s=ss(n,i,o,o);if(s==null)return!1;let a=Rc(n,i,o);if(a==null)return!1;let l=Math.abs(Vy.shortestSignedDiff(r,s))>Math.PI/2?gc.normalize(r+Math.PI):r;return Ec(e,n,o,bc(a,"meters"),vc(l,"radians","geographic"),"geodesic"),e[2]=i[2],!0}function XD(e,t,n,i){P0(t,{start:n,end:i,type:A0.LINE},e),e[2]=t[2]}var js=class extends gn{constructor({referenceLine:t,lineStart:n,targetPoint:i,isDraped:o}){let r=M_(n),{left:s,right:a}=t;oc(r,I_(r,r,a),s),super(i,new kc(n,r),o,rt.SELF),this._referenceLines=[{edge:t,fadeLeft:!0,fadeRight:!0}]}get hints(){return[new Ii(xi.TARGET,this.constraint.start,this.targetPoint,this.isDraped,this.domain),new H0(this.constraint.start,this.targetPoint,this.isDraped,this.domain),...this._referenceLines.map(t=>new Ii(xi.REFERENCE,t.edge.left,t.edge.right,this.isDraped,this.domain,t.fadeLeft,t.fadeRight))]}addReferenceLine(t){let n={edge:t,fadeLeft:!0,fadeRight:!0};this._referenceLines.forEach(i=>{Sa(t.right,i.edge.left)&&(i.fadeLeft=!1,n.fadeRight=!1),Sa(t.right,i.edge.right)&&(i.fadeRight=!1,n.fadeRight=!1),Sa(t.left,i.edge.right)&&(i.fadeRight=!1,n.fadeLeft=!1),Sa(t.left,i.edge.left)&&(i.fadeLeft=!1,n.fadeLeft=!1)}),this._referenceLines.push(n)}};var $d=class extends Cn{snapNewVertex(t,n){let i=n.editGeometryOperations.data.components[0],o=i.edges.length,r=i.vertices.length,s=[];if(o<2)return s;let{view:a}=this,l=We(t,n.spatialReference,Re,a),u=Ge(i.vertices[r-1].pos,a,n),p=Ge(i.vertices[0].pos,a,n),h=i.edges[o-1],m=h;do{if(this.edgeExceedsShortLineThreshold(m,n)){let f=ds(m,a,n);this._checkEdgeForParallelLines(f,u,t,l,n,s),this._checkEdgeForParallelLines(f,p,t,l,n,s)}m=m.leftVertex.leftEdge}while(m&&m!==h);return s}snapExistingVertex(t,n){let i=[],o=n.vertexHandle,r=o.component;if(r.edges.length<3)return i;let{view:s}=this,a=We(t,n.spatialReference,Re,s),l=o.leftEdge,u=o.rightEdge,p=r.vertices[0],h=Ge(p.pos,s,n),m=r.vertices.length,f=r.vertices[m-1],w=Ge(f.pos,s,n),O=r.edges[0],N=O;do{if(N!==l&&N!==u&&this.edgeExceedsShortLineThreshold(N,n)){let R=ds(N,s,n);l&&this._checkEdgeForParallelLines(R,Ge(l.leftVertex.pos,s,n),t,a,n,i),u&&this._checkEdgeForParallelLines(R,Ge(u.rightVertex.pos,s,n),t,a,n,i),o===p?this._checkEdgeForParallelLines(R,w,t,a,n,i):o===f&&this._checkEdgeForParallelLines(R,h,t,a,n,i)}N=N.rightVertex.rightEdge}while(N&&N!==O);return i}_checkEdgeForParallelLines(t,n,i,o,r,s){let a=t.left,l=t.right;if(Ic(lr,n,a,l),qo(lr,n)<gi.parallelLineThreshold)return;Ic(lr,i,a,l,n);let{spatialReference:u,pointer:p}=r,h=Qt(ls(lr[0],lr[1],i[2]));if(Ei(o,We(h,u,Re,this.view))<this.squaredProximityThreshold(p)){if(this.isVertical(h,n,r)||this.isVertical(a,l,r)||eE(t,s))return;s.push(new js({referenceLine:t,lineStart:n,targetPoint:h,isDraped:r.elevationInfo?.mode==="on-the-ground"}))}}};function eE(e,t){let n=e.left,i=e.right;for(let o of t)if(Ic(lr,i,o.constraint.start,o.constraint.end,n),qo(lr,i)<gi.parallelLineThreshold)return o.addReferenceLine(e),!0;return!1}var lr=Mi();var Wd=class extends Cn{snapNewVertex(t,n){let i=n.editGeometryOperations.data.components[0],o=[];if(i.vertices.length<2)return o;let{view:r}=this,s=We(t,n.spatialReference,Re,r),a=i.vertices.at(-1);this._checkForSnappingCandidate(Sn.LastVertex,o,a.leftEdge,a,a.leftEdge.leftVertex,t,s,n);let l=i.vertices[0];return this._checkForSnappingCandidate(Sn.FirstVertex,o,l.rightEdge,l,l.rightEdge.rightVertex,t,s,n),o}snapExistingVertex(t,n){let i=[],o=n.vertexHandle;if(o.component.vertices.length<3)return i;let{view:r}=this,s=We(t,n.spatialReference,Re,r),a=o.leftEdge,l=o.rightEdge;if(a?.leftVertex.leftEdge){let u=a.leftVertex.leftEdge;this._checkForSnappingCandidate(Sn.ExistingEdge,i,u,u.rightVertex,u.leftVertex,t,s,n)}if(l?.rightVertex.rightEdge){let u=l.rightVertex.rightEdge;this._checkForSnappingCandidate(Sn.ExistingEdge,i,u,u.leftVertex,u.rightVertex,t,s,n)}return i}_checkForSnappingCandidate(t,n,i,o,r,s,a,l){if(!this.edgeExceedsShortLineThreshold(i,l))return;let u=this.view,p=Ge(o.pos,u,l),h=Ge(r.pos,u,l);tE(Uw,h,p,s,l),this._checkForSnappingCandidateAlongProjectedRay(t,n,h,p,Uw,s,a,l)}_checkForSnappingCandidateAlongProjectedRay(t,n,i,o,r,s,a,l){let{spatialReference:u,pointer:p}=l,h=Ta(Dm,s,o),m=ny(r,h)/iy(r),f=ty(Dm,o,r,m),w=Qt(ls(f[0],f[1],s[2]));if(Ei(a,We(w,u,Re,this.view))>this.squaredProximityThreshold(p)||this.isVertical(w,o,l)||this.isVertical(o,i,l))return;let O=k_(Yi(),o,r,Math.sign(m));n.push(new Mo({targetPoint:w,constraint:new Oc(o,O),previousVertex:i,otherVertex:o,otherVertexType:Do.CENTER,selfSnappingType:t,isDraped:l.elevationInfo?.mode==="on-the-ground"}))}};function tE(e,t,n,i,o){iE(e,t,n,i,o)||nE(e,t,n)}function iE(e,t,n,i,{spatialReference:o}){let r=ss(t,n,o,o);if(r==null)return!1;let s=ss(n,i,o,o);if(s==null)return!1;let a=Math.sign(gc.shortestSignedDiff(r,s))*Math.PI*.5,l=vc(r+a,"radians","geographic"),u=Yi(),p=Rc(n,i,o);return p!=null&&(Ec(u,n,o,bc(p,"meters"),l,"geodesic"),oc(e,u,n),!0)}function nE(e,t,n){let i=Ta(Dm,n,t);x_(e,i[1],-i[0],0)}var Dm=Mi(),Uw=Yi();var zs=class extends gn{constructor({targetPoint:t,point1:n,point2:i,isDraped:o}){super(t,new R0(P_(Yi(),n,i,.5),.5*fo(n,i)),o,rt.SELF),this._p1=n,this._p2=i}get hints(){return[new Ii(xi.REFERENCE,this.targetPoint,this._p1,this.isDraped,this.domain),new Ii(xi.REFERENCE,this.targetPoint,this._p2,this.isDraped,this.domain),new Fc(this._p1,this.targetPoint,this._p2,this.isDraped,this.domain)]}};var qd=class extends Cn{snapNewVertex(t,n){let i=n.editGeometryOperations.data.components[0],o=[],r=i.vertices.length;if(n.editGeometryOperations.data.type!=="polygon"||r<2)return o;let{view:s}=this,a=i.vertices[0],l=i.vertices[r-1],u=Ge(a.pos,s,n),p=Ge(l.pos,s,n);return this._processCandidateProposal(u,p,t,n,o),o}snapExistingVertex(t,n){let i=[],o=n.vertexHandle,r=o.component;if(r.edges.length<2||n.editGeometryOperations.data.type==="polyline"&&(o.index===0||o.index===r.vertices.length-1))return i;let{view:s}=this,a=Ge(o.leftEdge.leftVertex.pos,s,n),l=Ge(o.rightEdge.rightVertex.pos,s,n);return this._processCandidateProposal(a,l,t,n,i),i}_processCandidateProposal(t,n,i,o,r){if(!this.exceedsShortLineThreshold(t,n,o))return;let s=oy($w,t,n,.5),a=.5*fo(t,n),l=k0($w,i,s,a),u=Qt(ls(l[0],l[1],i[2])),{spatialReference:p,pointer:h}=o,m=We(i,p,Re,this.view);if(Ei(m,We(u,p,Re,this.view))<this.squaredProximityThreshold(h)){if(this.isVertical(t,u,o)||this.isVertical(u,n,o))return;r.push(new zs({targetPoint:u,point1:t,point2:n,isDraped:o.elevationInfo?.mode==="on-the-ground"}))}}},$w=Mi();var cr=class extends k{constructor(e){super(e),this.updating=!1,this._snappers=new W,this._domain=rt.SELF}initialize(){this._snappers.push(new $d(this.view,this.options),new Ud(this.view,this.options),new Wd(this.view,this.options),new qd(this.view,this.options))}set options(e){this._set("options",e);for(let t of this._snappers)t.options=e}fetchCandidates(e,t,n){return D(this,null,function*(){if(!(t&this._domain&&this.options.effectiveSelfEnabled))return[];let i=[];for(let o of this._snappers.items)for(let r of o.snap(e,n))i.push(r);return cs(e,i),i})}};c([d({readOnly:!0})],cr.prototype,"updating",void 0),c([d({constructOnly:!0})],cr.prototype,"view",void 0),c([d()],cr.prototype,"options",null),cr=c([b("esri.views.interactive.snapping.SelfSnappingEngine")],cr);function Ww(e,t){return[new cr({view:e,options:t}),new qn({view:e,options:t,spatialReference:e.spatialReference})]}var Eo=class extends k{constructor(e){super(e),this.layer=null,this.enabled=!0,this.updating=!1,this.availability=1,this.sublayerSources=new W}};c([d({constructOnly:!0})],Eo.prototype,"layer",void 0),c([d()],Eo.prototype,"enabled",void 0),c([d()],Eo.prototype,"updating",void 0),c([d()],Eo.prototype,"availability",void 0),c([d()],Eo.prototype,"sublayerSources",void 0),Eo=c([b("esri.views.interactive.snapping.FeatureSnappingLayerSource")],Eo);var ml=Eo;var Nt=class extends k{constructor(e){super(e),this.enabled=!1,this.enabledToggled=!1,this.forceDisabled=!1,this.selfEnabled=!0,this.featureEnabled=!0,this.attributeRulesEnabled=!1,this.featureSources=new W,this.distance=gi.distance,this.touchSensitivityMultiplier=gi.touchSensitivityMultiplier}get effectiveEnabled(){return!this.forceDisabled&&(this.enabledToggled?!this.enabled:this.enabled)}get effectiveSelfEnabled(){return this.effectiveEnabled&&this.selfEnabled}get effectiveFeatureEnabled(){return this.effectiveEnabled&&this.featureEnabled}get _effectiveFeatureSources(){let e=this.featureSources;e.some(qw)&&q.getLogger(this).warnOnce("Do not configure SubtypeGroupLayer sources in SnappingOptions.featureSources directly. Create a FeatureSnappingLayerSource for each SubtypeSublayer.");let t=e.filter(rE),n=this._get("_effectiveFeatureSources")?.filter(qw)??new W;for(let a of t){let l=n.find(u=>u.layer===a.layer.parent);if(l)l.sublayerSources.includes(a)||l.sublayerSources.add(a);else if(a.layer.parent){let u=new ml({layer:a.layer.parent});u.sublayerSources.add(a),n.add(u)}}for(let a of n){let l=a.sublayerSources.filter(u=>!t.includes(u));a.sublayerSources.removeMany(l)}n.removeMany(n.filter(a=>a.sublayerSources.length===0));let i=e.filter(oE),o=this._get("_effectiveFeatureSources")??new W,{added:r,removed:s}=_a(o.toArray(),[...i,...n]);return o.removeMany(s),o.addMany(r),o}};c([d()],Nt.prototype,"enabled",void 0),c([d()],Nt.prototype,"enabledToggled",void 0),c([d()],Nt.prototype,"forceDisabled",void 0),c([d()],Nt.prototype,"selfEnabled",void 0),c([d()],Nt.prototype,"featureEnabled",void 0),c([d()],Nt.prototype,"attributeRulesEnabled",void 0),c([d({type:W.ofType(ml)})],Nt.prototype,"featureSources",void 0),c([d()],Nt.prototype,"distance",void 0),c([d()],Nt.prototype,"touchSensitivityMultiplier",void 0),c([d({readOnly:!0})],Nt.prototype,"effectiveEnabled",null),c([d({readOnly:!0})],Nt.prototype,"effectiveSelfEnabled",null),c([d({readOnly:!0})],Nt.prototype,"effectiveFeatureEnabled",null),c([d({readOnly:!0})],Nt.prototype,"_effectiveFeatureSources",null),Nt=c([b("esri.views.interactive.snapping.SnappingOptions")],Nt);var xo=Nt;function qw(e){return e.layer.type==="subtype-group"}function oE(e){return e.layer.type!=="subtype-group"}function rE(e){return e.layer.type==="subtype-sublayer"}var dr=class extends gn{constructor(t,n,i,o){super(t,new F0(t),o,rt.ALL),this.first=n,this.second=i}get hints(){return this.first.targetPoint=this.targetPoint,this.second.targetPoint=this.targetPoint,[...this.first.hints,...this.second.hints,new B0(this.targetPoint,this.isDraped,this.domain)]}};var Fi=class extends Be.EventedMixin(k){constructor(e){super(e),this.options=new xo,this.snappingEnginesFactory=Ww,this._engines=[],this._currentMainCandidate=null,this._currentOtherActiveCandidates=[],this._currentSnappedType=Zn.MAIN}initialize(){this.addHandles([I(()=>{let{effectiveFeatureEnabled:e,effectiveSelfEnabled:t,touchSensitivityMultiplier:n,distance:i}=this.options;return{effectiveFeatureEnabled:e,effectiveSelfEnabled:t,touchSensitivityMultiplier:n,distance:i}},()=>{this.doneSnapping(),this.emit("changed")},Kt),I(()=>this.options,e=>{for(let t of this._engines)t.options=e},Kt),I(()=>({viewReady:this.view.ready,viewSpatialReference:this.view.spatialReference,snappingEnginesFactory:this.snappingEnginesFactory}),({viewReady:e,snappingEnginesFactory:t})=>this._recreateEngines(e,t),ke)])}destroy(){this._destroyEngines()}get updating(){return this._engines.some(e=>e.updating)}_recreateEngines(e,t){if(this._destroyEngines(),!e)return;let{view:n,options:i}=this;this._engines=t(n,i)}_destroyEngines(){for(let e of this._engines)e.destroy();this._engines=[]}get _squaredMouseProximityThreshold(){return this.options.distance*this.options.distance}get _squaredTouchProximityThreshold(){let{distance:e,touchSensitivityMultiplier:t}=this.options,n=e*t;return n*n}snap(e){return lE(e)?this._snapMultiPoint(e):this._snapSinglePoint(e)}update(e){let{point:t,context:n}=e;this._removeVisualization();let i=this._currentMainCandidate;if(i==null)return t;let o=this._selectUpdateInput(e);if(o==null)return t;let{spatialReference:r}=n,s=Ki(o,r);if(s==null)return t;let{view:a}=this,{elevationInfo:l,visualizer:u}=n,p=[],h=xa(s,a,l),m=i.constraint.closestTo(h);if(!this._arePointsWithinScreenThreshold(h,m,n)||!xm(i,n.drawConstraints))return this._resetSnappingState(),t;i.targetPoint=Qt(m),p.push(...i.hints);for(let f of this._currentOtherActiveCandidates)xm(f,n.drawConstraints)&&(f.targetPoint=Qt(m),p.push(...f.hints));return u!=null&&this.addHandles(u.draw(p,{spatialReference:r,elevationInfo:cE(n),view:a,selfSnappingZ:n.selfSnappingZ}),Em),Sp(m,a,t,n)}doneSnapping(){this._removeVisualization(),this._resetSnappingState()}_selectUpdateInput({point:e,scenePoint:t}){switch(this._currentSnappedType){case Zn.MAIN:return e;case Zn.SCENE:return t}}_resetSnappingState(){this._currentMainCandidate=null,this._currentOtherActiveCandidates=[],this._currentSnappedType=Zn.MAIN}_removeVisualization(){this.removeHandles(Em)}_snapSinglePoint(i){return D(this,arguments,function*({point:e,context:t,signal:n}){let{view:o}=this,{elevationInfo:r}=t,s=xa(e,o,r),a=yield this._fetchCandidates(s,rt.ALL,t,n);return this._createSnapResult(s,Zn.MAIN,a,o,e,t,n)})}_snapMultiPoint(o){return D(this,arguments,function*({point:e,scenePoint:t,context:n,signal:i}){let{view:r}=this,{coordinateHelper:s,elevationInfo:a,spatialReference:l}=n;yield Q_(t.spatialReference,l);let u=Ki(t,l),p=xa(u,r,a),h=yield this._fetchCandidates(p,rt.FEATURE,n,i);if(h.length>0){let w=yield this._fetchCandidates(p,rt.SELF,n,i);return this._createSnapResult(p,Zn.SCENE,[...h,...w],r,u,n,i)}let m=xa(e,r,a),f=yield this._fetchCandidates(m,rt.SELF,n,i);return this._createSnapResult(m,Zn.MAIN,f,r,{z:s.hasZ()&&e.hasZ?e.z??0:void 0,m:s.hasM()&&e.hasM?e.m??0:void 0},n,i)})}_fetchCandidates(e,t,n,i){return D(this,null,function*(){return(yield Promise.all(this._engines.map(o=>o.fetchCandidates(e,t,n,i)))).flat()})}_createSnapResult(e,t,n,i,o,r,s){return{get valid(){return!Kl(s)},apply:()=>{let{spatialReference:a}=r,{snappedPoint:l,hints:u}=this._processCandidates(e,t,n,r);return this._removeVisualization(),r.visualizer!=null&&this.addHandles(r.visualizer.draw(u,{spatialReference:a,elevationInfo:Re,view:i,selfSnappingZ:r.selfSnappingZ}),Em),Sp(l,i,o,r)}}}_processCandidates(e,t,n,i){if(n.length<1)return this.doneSnapping(),{snappedPoint:e,hints:[]};this._currentSnappedType!==t&&this._resetSnappingState(),cs(e,n);let o=this._currentMainCandidate;if(o!=null){let r=aE(o,n);if(r>=0){if(!(n[r]instanceof dr))return this._intersectWithOtherCandidates(r,n,e,t,i);if(this._arePointsWithinScreenThreshold(e,o.targetPoint,i))return this._updateSnappingCandidate(o,t,n,i)}}return this._intersectWithOtherCandidates(0,n,e,t,i)}_intersectWithOtherCandidates(e,t,n,i,o){let{coordinateHelper:r}=o,s=t[e],a=[];for(let l=0;l<t.length;++l){if(l===e)continue;let u=t[l],p=s.constraint.intersect(u.constraint);if(p)for(let h of p.closestPoints(s.targetPoint))a.push([new dr(Qt(h),s,u,u.isDraped),this._squaredScreenDistance(n,h,r)])}return a.length>0&&(a.sort((l,u)=>l[1]-u[1]),a[0][1]<this._squaredPointProximityThreshold(o.pointer))?this._updateSnappingCandidate(a[0][0],i,t,o):xm(s,o.drawConstraints)?this._updateSnappingCandidate(s,i,t,o):{snappedPoint:n,hints:[]}}_updateSnappingCandidate(e,t,n,i){this.doneSnapping(),this._currentMainCandidate=e,this._currentSnappedType=t;let o=this._currentMainCandidate.targetPoint,r=[];r.push(...e.hints);for(let s of n){if(e instanceof dr){if(s.constraint.equals(e.first.constraint)||s.constraint.equals(e.second.constraint))continue}else if(s.constraint.equals(e.constraint))continue;let a=s.constraint.closestTo(o);this._squaredScreenDistance(a,o,i.coordinateHelper)<sE()&&(s.targetPoint=o,this._currentOtherActiveCandidates.push(s),r.push(...s.hints))}return{snappedPoint:o,hints:r}}_squaredPointProximityThreshold(e){return e==="touch"?this._squaredTouchProximityThreshold:this._squaredMouseProximityThreshold}_arePointsWithinScreenThreshold(e,t,n){return this._squaredScreenDistance(e,t,n.coordinateHelper)<this._squaredPointProximityThreshold(n.pointer)}_squaredScreenDistance(e,t,n){return Ei(this._toScreen(e,n),this._toScreen(t,n))}_toScreen(e,t){return We(e,t.spatialReference,Re,this.view)}get test(){}},Zn;c([d({constructOnly:!0})],Fi.prototype,"view",void 0),c([d()],Fi.prototype,"options",void 0),c([d({readOnly:!0})],Fi.prototype,"updating",null),c([d()],Fi.prototype,"snappingEnginesFactory",void 0),c([d()],Fi.prototype,"_engines",void 0),c([d()],Fi.prototype,"_squaredMouseProximityThreshold",null),c([d()],Fi.prototype,"_squaredTouchProximityThreshold",null),Fi=c([b("esri.views.interactive.snapping.SnappingManager")],Fi),function(e){e[e.MAIN=0]="MAIN",e[e.SCENE=1]="SCENE"}(Zn||(Zn={}));var Em="visualization-handle";function sE(){return gi.satisfiesConstraintScreenThreshold*gi.satisfiesConstraintScreenThreshold}function xm(e,t){return!t||t.direction==null&&t.distance==null||!(e instanceof Ac||e instanceof Pc||e instanceof Gs||e instanceof js||e instanceof zs)&&(!(e instanceof Mo)||t.direction==null&&e.selfSnappingType===Sn.LastVertex)}function aE(e,t){return e instanceof dr?Im(t,e.first)>=0&&Im(t,e.second)>=0?0:-1:Im(t,e)}function Im(e,t){let n=-1;for(let i=0;i<e.length;++i)if(t.constraint.equals(e[i].constraint)){n=i;break}return n}function lE(e){return e.scenePoint!=null}function cE({coordinateHelper:e,elevationInfo:t}){return e.hasZ()?Re:t}var Dt=class extends Be.EventedAccessor{constructor(e){super(e),this.cancelled=!1,this.history={undo:[],redo:[]},this.type=null}get tool(){if(!this.activeComponent)return null;switch(this.activeComponent.type){case"graphic-mover":case"move-3d":return"move";case"box":case"transform-3d":return"transform";case"reshape":case"reshape-3d":return"reshape";case"draw-2d":case"draw-3d":return this.activeComponent.geometryType;default:this.activeComponent}return null}addToHistory(e){this.history.redo=[],this.history.undo.push(e)}resetHistory(){this.history.redo=[],this.history.undo=[]}canUndo(){return this.history.undo.length>0}canRedo(){return this.history.redo.length>0}complete(){this._reset(),this.onEnd(),this.emit("complete")}cancel(){this.cancelled=!0,this.complete()}_reset(){this.activeComponent?.reset()}refreshComponent(){let e=this.activeComponent;e&&(e.type!=="box"&&e.type!=="reshape"&&e.type!=="graphic-mover"||e.refresh())}set undo(e){this._set("undo",()=>{this.canUndo()&&e()})}set redo(e){this._set("redo",()=>{this.canRedo()&&e()})}};c([d()],Dt.prototype,"activeComponent",void 0),c([d()],Dt.prototype,"cancelled",void 0),c([d()],Dt.prototype,"history",void 0),c([d()],Dt.prototype,"tool",null),c([d()],Dt.prototype,"type",void 0),c([d()],Dt.prototype,"canUndo",null),c([d()],Dt.prototype,"canRedo",null),c([d()],Dt.prototype,"onEnd",void 0),c([d()],Dt.prototype,"undo",null),c([d()],Dt.prototype,"redo",null),c([d()],Dt.prototype,"toggleTool",void 0),c([d()],Dt.prototype,"addToSelection",void 0),c([d()],Dt.prototype,"removeFromSelection",void 0),Dt=c([b("esri.widgets.Sketch.support.OperationHandle")],Dt);var fl=class extends Dt{};c([d()],fl.prototype,"activeComponent",void 0),fl=c([b("esri.widgets.Sketch.support.OperationHandle.CreateOperationHandle")],fl);var Tn=class extends Dt{};c([d()],Tn.prototype,"activeComponent",void 0),Tn=c([b("esri.widgets.Sketch.support.OperationHandle.UpdateOperationHandle")],Tn);var Zw={defaultZ:0},gl={reshapeOptions:{edgeOperation:"split",shapeOperation:"move",vertexOperation:"move"},enableMoveAllGraphics:!0,enableRotation:!0,enableScaling:!0,multipleSelectionEnabled:!0,preserveAspectRatio:!1,toggleToolOnClick:!0,enableZ:!0,highlightOptions:{enabled:!0},tool:"transform"},_e=class extends Be.EventedAccessor{constructor(e){super(e),this._numUpdating=0,this._defaultSnappingManager=null,this._internalGraphicsLayer=new yc({listMode:"hide",internal:!0,title:"SVM Internal"}),this._operationHandle=null,this._viewHandlesKey="viewHandles",this.activeFillSymbol=null,this.activeLineSymbol=null,this.activeVertexSymbol=null,this.allowDeleteKey=!0,this.layer=null,this.pointSymbol=new rp({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}}),this.polygonSymbol=new wy({color:[150,150,150,.2],outline:{color:[50,50,50],width:2}}),this.polylineSymbol=new by({color:[130,130,130,1],width:2}),this.meshSymbol=new xy({symbolLayers:new W([new Ey])}),this.updateGraphics=new W,this.updateOnGraphicClick=!0,this.vertexSymbol=new rp({style:"circle",size:6,color:[255,255,255],outline:{color:[50,50,50],width:1}}),this.sketchOptions=new as,this._moduleLoaderAbortController=null,this._viewReadyAbortController=null,this._originalPopupEnabled=null,this.defaultCreateOptions=Zw,this.defaultUpdateOptions=gl,this.snappingOptions=e?.snappingManager?.options??e?.snappingOptions??new xo}initialize(){this.addHandles([Zi(()=>this.view?.map?.layers,"change",e=>{e.removed.includes(this.layer)&&this.cancel()}),Zi(()=>this.layer?.graphics,"change",e=>{if(this._operationHandle!=null)for(let t of e.removed)this.updateGraphics.includes(t)&&(this.updateGraphics.length>1?this._operationHandle.removeFromSelection(t):this._operationHandle.cancel())}),I(()=>this.layer?.elevationInfo??null,e=>{e!==this._internalGraphicsLayer.elevationInfo&&(this.cancel(),this._internalGraphicsLayer.elevationInfo=e)},ke),I(()=>this.view,e=>{this._defaultSnappingManager=re(this._defaultSnappingManager),e&&(this.snappingManager||(this._defaultSnappingManager=new Fi({view:e,options:this.snappingOptions})),e.type==="2d"?import("./chunk-RPG3SNFA.js"):e.type==="3d"&&(import("./chunk-M5E5EPS3.js"),import("./chunk-7RMG2ICZ.js")))},ke),I(()=>this.view?.spatialReference,(e,t)=>{e&&t&&!e.equals(t)&&this.cancel()})]),N0(this)}destroy(){this.cancel(),this._removeDefaultLayer(),this._defaultSnappingManager=re(this._defaultSnappingManager),this._set("snappingManager",null),this._set("view",null),this.emit("destroy")}get updating(){return this._numUpdating>0||this.snappingManager!=null&&this.snappingManager.updating}get activeTool(){return this._operationHandle?.tool??null}get activeComponent(){return this._operationHandle?.activeComponent??null}get createGraphic(){return this.activeComponent==null||this.activeComponent.type!=="draw-3d"&&this.activeComponent.type!=="draw-2d"?this._get("createGraphic"):this.activeComponent.graphic}get defaultCreateOptions(){return this._get("defaultCreateOptions")}set defaultCreateOptions(e){this._set("defaultCreateOptions",v(v({},Zw),e))}get defaultUpdateOptions(){return this._get("defaultUpdateOptions")}set defaultUpdateOptions(e){this._set("defaultUpdateOptions",B(v(v({},gl),e),{reshapeOptions:v(v({},gl.reshapeOptions),e?.reshapeOptions),highlightOptions:v(v({},gl.highlightOptions),e?.highlightOptions)}))}get labelOptions(){return this.sketchOptions.labels}set labelOptions(e){this.sketchOptions.labels=e}get snappingOptions(){return this.snappingManager?.options??this._get("snappingOptions")}set snappingOptions(e){this._defaultSnappingManager!=null&&(this._defaultSnappingManager.options=e),this._set("snappingOptions",e)}get snappingManager(){return this._isOverridden("snappingManager")&&this._get("snappingManager"),this._defaultSnappingManager}set snappingManager(e){if(e)this._isOverridden("snappingManager")||(this._defaultSnappingManager=re(this._defaultSnappingManager)),this._override("snappingManager",e);else{let{view:t}=this;!this._defaultSnappingManager&&t&&(this._defaultSnappingManager=new Fi({options:this.snappingOptions,view:t})),this._clearOverride("snappingManager")}}get state(){let e=!(!this.view?.ready||!this.layer),t=this._operationHandle;return e&&t?"active":e?"ready":"disabled"}get tooltipOptions(){return this.sketchOptions.tooltips}set tooltipOptions(e){this.sketchOptions.tooltips=e}get valueOptions(){return this.sketchOptions.values}set valueOptions(e){this.sketchOptions.values=e}get view(){return this._get("view")}set view(e){let t=this._get("view");if(t){let{container:i,map:o}=t;i&&(t.cursor=null),o?.remove(this._internalGraphicsLayer),this.removeHandles(this._viewHandlesKey),this.cancel()}let n="view-ready";this.removeHandles(n),e&&this.addHandles(pi(()=>e.ready,i=>{this.removeHandles(this._viewHandlesKey),i&&this.addHandles(this._generateViewHandles(e),this._viewHandlesKey)},ke),n),this._set("view",e)}cancel(){this._moduleLoaderAbortController=Pn(this._moduleLoaderAbortController),this._viewReadyAbortController=Pn(this._viewReadyAbortController),this._operationHandle&&this._operationHandle.cancel()}complete(){this._operationHandle&&this._operationHandle.complete()}delete(){let{state:e,updateGraphics:t}=this;if(e==="active"&&t.length){let{activeTool:n,layer:i}=this,o=t.toArray();i.removeMany(o),this.cancel(),this._emitDeleteEvent({graphics:o,tool:n})}}duplicate(){if(this.state==="active"&&this.updateGraphics.length){let e=this.updateGraphics.map(t=>t.clone()).toArray();return this.layer.addMany(e),this.emit("duplicate",{graphics:e,type:"duplicate"}),e}return[]}create(e,t){return D(this,null,function*(){this.cancel(),yield this._waitViewReady();let{view:n,layer:i}=this;if(!n||this.state==="disabled")throw i||this._logMissingLayer(),Yr();if(n.activeTool!=null&&(n.activeTool=null),!e)return void this._logError("sketch:missing-parameter","Missing parameter 'tool'.");bp(n,this._internalGraphicsLayer);let o=yield this._setupCreateOperation(e,t);if(o==null||this.destroyed)return void n.map.remove(this._internalGraphicsLayer);let r=()=>{if(o===this._operationHandle){let s=this.createGraphic,a=this._operationHandle.cancelled;this._operationHandle.destroy(),this._operationHandle=null,this._set("createGraphic",null),this.view?.map&&this.view.map.remove(this._internalGraphicsLayer),o.cancelled||s==null||i.add(s),this.emit("create",{graphic:s,state:a?"cancel":"complete",tool:e,toolEventInfo:null,type:"create"})}};o.on("complete",r),this._operationHandle=o,n.ready&&n.focus()})}place(e,t){return D(this,null,function*(){return this.create("mesh",v({mode:"click",hasZ:e.hasZ,geometryToPlace:e},t))})}update(e,t){return D(this,null,function*(){this.cancel(),yield this._waitViewReady();let{layer:n,view:i,state:o}=this;if(!i||o==="disabled")throw n||this._logMissingLayer(),Yr();i.activeTool!=null&&(i.activeTool=null);let r=Array.isArray(e)?e:[e];if(e==null||!r?.length)return void this._logError("sketch:missing-parameter","Missing parameter 'graphics'.");if(r.some(a=>a.layer!==n?(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics missing from the supplied GraphicsLayer."),!0):a.geometry==null&&(this._logError("sketch:invalid-parameter","Parameter 'graphics' contains one or more graphics with an unsupported geometry."),!0)))return;let s=yield this._setupUpdateOperation(r,t);this.destroyed||s==null||st(s)||(bp(i,this._internalGraphicsLayer),this._setUpdateOperationHandle(s,t),this.emit("update",{graphics:r,state:"start",aborted:!1,tool:s.tool,toolEventInfo:null,type:"update"}))})}_updateSpatialReference(e){return D(this,null,function*(){let t=this.view;if(t){this._beginAsyncOperation(),e=Array.isArray(e)?e:[e];for(let n of e)n.geometry==null||n.geometry.type==="mesh"||Xr(n.geometry.spatialReference,t.spatialReference)||(mc(n.geometry.spatialReference,t.spatialReference)||pc()||(yield hc()),n.geometry=Ki(n.geometry,t.spatialReference));this._endAsyncOperation()}else this._logMissingView()})}undo(){this.canUndo()&&this._operationHandle?.undo()}redo(){this.canRedo()&&this._operationHandle?.redo()}canUndo(){return!!this._operationHandle?.canUndo()}canRedo(){return!!this._operationHandle?.canRedo()}toggleUpdateTool(){this._operationHandle?.toggleTool()}_getFirstHit(e){return D(this,null,function*(){let t=this.view;if(!t)return this._logMissingView(),null;if(t.type==="2d"){let o=[];t.map.allLayers.forEach(s=>{s.type!=="vector-tile"&&s.type!=="imagery"||o.push(s)});let r=yield t.hitTest(e,{exclude:o});return G0(r.results)}let n=[t.map.ground];t.map.allLayers.forEach(o=>{G_(o.type)&&n.push(o)});let i=yield t.hitTest(e,{exclude:n});if(i.results.length>0){let o=i.results[0];if(o!=null&&o.type==="graphic"&&o.graphic&&(!i.ground.mapPoint||t.map.ground.opacity<1||i.ground.distance-(o.distance??0)>-Math.min(3*i.ground.distance,t.viewingMode==="global"?m_(t.renderCoordsHelper.spatialReference).radius/t.renderCoordsHelper.unitInMeters:Number.POSITIVE_INFINITY)))return o}return null})}_generateViewHandles(e){return[e.on("immediate-click",t=>D(this,null,function*(){let n=this.state==="active"&&this._operationHandle?.type==="create";if(this.state==="disabled"||n||!this.updateOnGraphicClick)return;this._beginAsyncOperation();let i=yield t.async(()=>this._getFirstHit(fi(t))),o=null;if(i!=null){let r=i.graphic;this.updateGraphics.includes(r)||r.layer===this.layer?(t.stopPropagation(),o=r):e.type!=="2d"||this._isComponentGraphic(r)||this.state!=="active"||this.cancel()}else this.state==="active"&&this.cancel();o==null||this.updateGraphics.includes(o)||(yield this.update([o],B(v({},this.defaultUpdateOptions),{reshapeOptions:v({},this.defaultUpdateOptions.reshapeOptions)}))),this._endAsyncOperation()}),ve.WIDGET)]}_setupCreateOperation(e,t){return D(this,null,function*(){let n=this.view;if(!n)return this._logMissingView(),null;let i=v(v({hasZ:n.type==="3d"},this.defaultCreateOptions),t),o=yield this._setupDrawGraphicTool(e,n,i);return o==null?null:(n.tools.add(o),n.activeTool=o,this._setupCreateOperationHandle(o))})}_setupDrawGraphicTool(e,t,n){return D(this,null,function*(){if(e==="multipoint"&&t.type==="3d")return this._logError("sketch:create","Multipoint geometries are not supported in SceneView."),null;if(!t)return this._logMissingView(),null;let{cursor:i,defaultZ:o,hasZ:r,geometryToPlace:s,graphicProperties:a,mode:l,preserveAspectRatio:u}=n,p=e==="rectangle"||e==="circle"?"hybrid":"click",h=u??e!=="rectangle",m={centered:e!=="rectangle"&&!(e==="circle"&&!h),cursor:i,defaultZ:o,forceUniformSize:h,graphicProperties:a,geometryToPlace:s,geometryType:e,graphicSymbol:this._getGraphicSymbolFromTool(e),hasZ:r,mode:l??p,snappingManager:this.snappingManager,snapToScene:!1,view:t};return t.type==="2d"?this._makeDrawGraphicTool2D(m):this._makeDrawGraphicTool3D(m)})}_makeDrawGraphicTool2D(e){return D(this,null,function*(){let t=yield this._requireModule(import("./chunk-RPG3SNFA.js"));return st(t)||this.destroyed?null:new t.module.DrawGraphicTool2D(B(v({},e),{activeVertexSymbol:this.activeVertexSymbol,regularVerticesSymbol:this.vertexSymbol,activeLineSymbol:this.activeLineSymbol,activeFillSymbol:uE(e.geometryType)?this.activeFillSymbol:null,sketchOptions:this.sketchOptions}))})}_makeDrawGraphicTool3D(e){return D(this,null,function*(){let t=yield this._requireModule(import("./chunk-M5E5EPS3.js"));if(st(t)||this.destroyed)return null;let{elevationInfo:n}=this.layer;return new t.module.DrawGraphicTool3D(B(v({},e),{elevationInfo:n,snapToScene:!0,sketchOptions:this.sketchOptions}))})}_setupCreateOperationHandle(e){let t=this.view;if(!t)return this._logMissingView(),null;let n=null,i=e.forceUniformSize,o=e.centered,r=[t.on("key-down",a=>{if(a.key===Ce.pan)a.stopPropagation(),a.repeat||(e.enabled=!1);else if(a.key===Ce.complete)a.stopPropagation(),e.completeCreateOperation();else if(a.key!==Ce.vertexAdd||a.repeat)a.key===Ce.undo?(a.stopPropagation(),s.undo()):a.key===Ce.redo?(a.stopPropagation(),s.redo()):a.key!==Ce.constraint||e.geometryType!=="rectangle"&&e.geometryType!=="circle"||a.repeat?a.key===Ce.center&&(a.repeat||(e.centered=!o,a.stopPropagation())):(e.forceUniformSize=!i,a.stopPropagation());else{let l=e.drawOperation.geometryType;l!=="polyline"&&l!=="polygon"&&l!=="multipoint"||(a.stopPropagation(),e.drawOperation.commitStagedVertex())}},ve.WIDGET),t.on("key-up",a=>{a.key===Ce.pan?e.enabled=!0:a.key!==Ce.constraint||e.geometryType!=="rectangle"&&e.geometryType!=="circle"?a.key===Ce.center&&(e.centered=o,a.stopPropagation()):(e.forceUniformSize=i,a.stopPropagation())},ve.WIDGET),e.on("vertex-add",a=>{switch(n=n==null?"start":"active",a.operation){case"apply":this.emit("create",{graphic:e.graphic,state:n,tool:this.activeTool,toolEventInfo:a,type:"create"});break;case"undo":this._emitUndoEvent({graphics:[e.graphic],tool:e.geometryType});break;case"redo":this._emitRedoEvent({graphics:[e.graphic],tool:e.geometryType})}}),e.on("cursor-update",a=>{e.drawOperation.numCommittedVertices>0&&this.emit("create",{graphic:e.graphic,state:"active",tool:this.activeTool,toolEventInfo:{coordinates:a.vertices[0].coordinates,type:"cursor-update"},type:"create"})}),e.on("vertex-remove",a=>{switch(a.operation){case"apply":this.emit("create",{graphic:e.graphic,state:"active",tool:this.activeTool,toolEventInfo:a,type:"create"});break;case"undo":this._emitUndoEvent({graphics:[e.graphic],tool:e.geometryType});break;case"redo":this._emitRedoEvent({graphics:[e.graphic],tool:e.geometryType})}}),e.on("complete",a=>{this._set("createGraphic",a.graphic),n="complete",a.aborted?s&&s.cancel():s&&s.complete()}),I(()=>this._getGraphicSymbolFromTool(e.geometryType),a=>{e.graphicSymbol=a})],s=new fl({activeComponent:e,tool:e.geometryType,type:"create",onEnd:()=>{r.forEach(a=>a.remove()),r.length=0,t.tools?.remove(e)},undo:()=>{e.canUndo&&e.undo()},redo:()=>{e.canRedo&&e.redo()},canUndo:()=>e.canUndo,canRedo:()=>e.canRedo});return s}_getGraphicSymbolFromTool(e){switch(e){case"point":case"multipoint":return this.pointSymbol;case"polyline":return this.polylineSymbol;case"circle":case"rectangle":case"polygon":return this.polygonSymbol;case"mesh":return this.meshSymbol}}_setupUpdateOperation(e,t){return D(this,null,function*(){let{layer:n,view:i}=this;if(!i)return this._logMissingView(),null;let o=B(v(v({},this.defaultUpdateOptions),t),{reshapeOptions:v(v({},this.defaultUpdateOptions.reshapeOptions),t?.reshapeOptions),highlightOptions:v(v({},this.defaultUpdateOptions.highlightOptions),t?.highlightOptions)}),r=o.tool??gl.tool;for(let s of e)n.remove(s),n.add(s);if(i.type==="3d"){if(e.length===0)return null;switch(r){case"move":return this._setupMove3DOperation(e,o,i,r);case"reshape":return e.length>1?(this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null):this._setupReshape3DOperation(e[0],o,i);case"transform":return this._setupGraphicTransform3DOperation(e,o,i)}}switch(r){case"move":return this._setupMove2DOperation(e,o,i);case"reshape":return e.length>1?(this._logError("sketch:reshape-multiple","Reshape operation does not support multiple graphics."),null):this._setupTransformOrReshape2DOperation(e,r,o,i);case"transform":if(e.length===1){let s=e[0].geometry?.type;s!=="point"&&s!=="multipoint"||(r="reshape")}return this._setupTransformOrReshape2DOperation(e,r,o,i)}})}_setupMove3DOperation(e,t,n,i,o=!1){return D(this,null,function*(){let r=yield this._requireModule(import("./chunk-M5E5EPS3.js"));if(st(r))return r;let{ManipulatedObject3DGraphic:s,MoveTool3D:a}=r.module,l=new Map,u=()=>{l.forEach(f=>f.destroy()),l.clear()};for(let f of e){let w=new s({view:n,graphic:f}),O=x0(w);if(O!==vt.SUPPORTED)return u(),this._logError("sketch:move",`Move operation not supported for provided graphic(s) (${vp(O)}).`),null;l.set(f,w)}let p=new a({view:n,enableZ:t.enableZ,snappingManager:this.snappingManager,sketchOptions:this.sketchOptions});n.tools.add(p),p.objects.addMany(Array.from(l.values())),o||this.updateGraphics.addMany(e);let h=[],m=new Tn({activeComponent:p,tool:i,type:"update",onEnd:()=>{h.forEach(f=>f.remove()),h.length=0,n.tools?.remove(p),p.destroyed||p.destroy(),u()},undo:()=>{Kw(this.view,p),Zd(m,this.updateGraphics.toArray()),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:i})},redo:()=>{Yd(m,this.updateGraphics.toArray()),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:i})},addToSelection:f=>{this.updateGraphics.push(f);let w=new s({view:n,graphic:f});l.set(f,w),p.objects.push(w),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[f],removed:[],type:"selection-change"},type:"update"})},removeFromSelection:f=>{let w=this.updateGraphics.indexOf(f);if(m.history.undo.forEach(N=>N.updates.splice(w,1)),m.history.redo.forEach(N=>N.updates.splice(w,1)),this.updateGraphics.remove(f),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[f],type:"selection-change"},type:"update"}),this.updateGraphics.length===0)return void m.complete();let O=l.get(f);O&&(p.objects.remove(O),O.destroy(),l.delete(f))},toggleTool:()=>D(this,null,function*(){if(this.updateGraphics.length!==1||t.toggleToolOnClick===!1||i!=="transform")return;let f=this.updateGraphics.at(0),w=yield this._setupReshape3DOperation(f,t,n,!0);w&&!st(w)&&(m.onEnd(),m.destroy(),this._setUpdateOperationHandle(w,t))})});return h.push(...this._getHandlesForComponent(m,t),n.on("immediate-click",f=>this._getCommonUpdateOperationClickHandlers(m,f,t),ve.WIDGET),n.on("key-down",f=>{this._getCommonUpdateOperationKeyDownHandlers(m,f)},ve.WIDGET)),m})}_setupGraphicTransform3DOperation(e,t,n,i=!1){if(e.length===1&&jw(e[0])===vt.SUPPORTED){let o=e[0],r=o.geometry;if(r!=null&&(r.type==="point"||r.type==="mesh"))return this._setupPointTransform3DOperation(o,t,n);if(r!=null&&(r.type==="polygon"||r.type==="polyline"))return this._setupPolyTransform3DOperation(o,t,n,i)}return this._setupMove3DOperation(e,t,n,"transform",i)}_setupPointTransform3DOperation(e,t,n){return D(this,null,function*(){let i="transform",{enableRotation:o,enableScaling:r,enableZ:s}=t,a=yield this._requireModule(import("./chunk-M5E5EPS3.js"));if(st(a))return a;let{TransformTool3D:l,ManipulatedObject3DGraphic:u}=a.module,p=new u({graphic:e,view:n}),h=new l({object:p,view:n,enableRotation:o,enableScaling:r,enableZ:s,snappingManager:this.snappingManager,sketchOptions:this.sketchOptions});n.tools.add(h),this.updateGraphics.add(e);let m=[],f=new Tn({activeComponent:h,tool:i,type:"update",onEnd:()=>{m.forEach(w=>w.remove()),m.length=0,n.tools?.remove(h),h.destroyed||h.destroy(),p.destroy()},undo:()=>{Kw(this.view,h),Zd(f,this.updateGraphics.toArray()),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:i})},redo:()=>{Yd(f,this.updateGraphics.toArray()),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:i})},addToSelection:w=>D(this,null,function*(){this.updateGraphics.add(w),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[w],removed:[],type:"selection-change"},type:"update"}),f.onEnd(),f.destroy();let O=yield this._setupMove3DOperation(this.updateGraphics.toArray(),t,n,"transform",!0);st(O)||this._setUpdateOperationHandle(O,t)}),removeFromSelection:w=>{this.updateGraphics.remove(w),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[w],type:"selection-change"},type:"update"}),f.complete()},toggleTool:()=>{}});return m.push(...this._getHandlesForComponent(f,t),n.on("immediate-click",w=>this._getCommonUpdateOperationClickHandlers(f,w,t),ve.WIDGET),n.on("key-down",w=>{this._getCommonUpdateOperationKeyDownHandlers(f,w)},ve.WIDGET)),f})}_setupPolyTransform3DOperation(e,t,n,i=!1){return D(this,null,function*(){let o="transform",{enableRotation:r,enableScaling:s,enableZ:a,preserveAspectRatio:l}=t,u=yield this._requireModule(import("./chunk-M5E5EPS3.js"));if(st(u))return u;let{ManipulatedObject3DGraphic:p,ExtentTransformTool:h}=u.module,m=this.view?.inputManager?.isModifierKeyDown(Ce.constraint),f=new p({view:n,graphic:e}),w=new h({object:f,view:n,enableRotation:r,enableScaling:s,enableZ:a,preserveAspectRatio:!!l!=!!m,sketchOptions:this.sketchOptions});n.tools.add(w),i||this.updateGraphics.add(e);let O=[],N=new Tn({activeComponent:w,tool:o,type:"update",onEnd:()=>{O.forEach(R=>R.remove()),O.length=0,n.tools?.remove(w),w.destroyed||w.destroy(),f.destroy()},canUndo:()=>w.canUndo,undo:()=>{w.undo(),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:o})},canRedo:()=>w.canRedo,redo:()=>{w.redo(),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:o})},addToSelection:R=>D(this,null,function*(){this.updateGraphics.add(R),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[R],removed:[],type:"selection-change"},type:"update"}),N.onEnd(),N.destroy();let K=yield this._setupMove3DOperation(this.updateGraphics.toArray(),t,n,"transform",!0);st(K)||this._setUpdateOperationHandle(K,t)}),removeFromSelection:R=>{this.updateGraphics.remove(R),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[R],type:"selection-change"},type:"update"}),N.complete()},toggleTool:()=>D(this,null,function*(){if(this.updateGraphics.length!==1||t.toggleToolOnClick===!1)return;let R=yield this._setupReshape3DOperation(e,t,n,!0);R&&!st(R)&&(N.onEnd(),N.destroy(),this._setUpdateOperationHandle(R,t))})});return O.push(...this._getHandlesForComponent(N,t),n.on("immediate-click",R=>this._getCommonUpdateOperationClickHandlers(N,R,t),ve.WIDGET),n.on("key-down",R=>this._getCommonUpdateOperationKeyDownHandlers(N,R),ve.WIDGET),n.on("key-down",R=>{R.key!==Ce.constraint||R.repeat||(w.preserveAspectRatio=!w.preserveAspectRatio,R.stopPropagation())},ve.WIDGET),n.on("key-up",R=>{R.key===Ce.constraint&&(w.preserveAspectRatio=!w.preserveAspectRatio,R.stopPropagation())},ve.WIDGET)),N})}_setupMove2DOperation(e,t,n){return D(this,null,function*(){let i="move";this.updateGraphics.addMany(e),yield this._updateSpatialReference(e);let o=yield this._getGraphicMover(e,t,n);if(st(o))return o;let r=new Tn({activeComponent:o,tool:i,type:"update",onEnd:()=>{this._displayDefaultCursor(),l.forEach(u=>u.remove()),a.forEach(u=>u.remove()),l=[],a=[],o.destroy(),this._internalGraphicsLayer?.removeMany([...this.updateGraphics.toArray()])},undo:()=>{let u=this.updateGraphics.toArray();Zd(r,u),r.refreshComponent(),this._emitUndoEvent({graphics:u,tool:i})},redo:()=>{let u=this.updateGraphics.toArray();Yd(r,u),r.refreshComponent(),this._emitRedoEvent({graphics:u,tool:i})},addToSelection:u=>D(this,null,function*(){yield this._updateSpatialReference(u),this.updateGraphics.push(u),o.graphics=this.updateGraphics.toArray(),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[u],removed:[],type:"selection-change"},type:"update"})}),removeFromSelection:u=>{let p=this.updateGraphics.indexOf(u);r.history.undo.forEach(m=>m.updates.splice(p,1)),r.history.redo.forEach(m=>m.updates.splice(p,1)),this.updateGraphics.remove(u);let h=this.updateGraphics.toArray();this.emit("update",{graphics:h,state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[u],type:"selection-change"},type:"update"}),this.updateGraphics.length!==0?o.graphics=h:r.complete()}}),s=!1,a=[n.on("immediate-click",u=>this._getCommonUpdateOperationClickHandlers(r,u,t),ve.WIDGET),n.on("key-down",u=>{this._getCommonUpdateOperationKeyDownHandlers(r,u),u.key!==Ce.constraint||u.repeat||(s=!0,o.enableMoveAllGraphics=!o.enableMoveAllGraphics)},ve.WIDGET),n.on("key-up",u=>{u.key===Ce.constraint&&s&&(s=!1,o.enableMoveAllGraphics=!o.enableMoveAllGraphics)},ve.WIDGET)],l=this._getHandlesForComponent(r,t);return r})}_setupReshape3DOperation(e,t,n,i=!1){return D(this,null,function*(){let o="reshape",r=yield this._requireModule(import("./chunk-M5E5EPS3.js"));if(st(r))return r;let{ManipulatedObject3DGraphic:s,ReshapeTool3D:a}=r.module,l=new s({view:n,graphic:e}),u=Gw(l);if(u!==vt.SUPPORTED)return l.destroy(),this._logError("sketch:reshape",`Reshape operation not supported for provided graphic(s) (${vp(u)}).`),null;let p=t.reshapeOptions,h=new a({view:n,object:l,enableZVertex:t.enableZ&&p?.vertexOperation==="move",enableZShape:t.enableZ&&p?.shapeOperation==="move",enableMoveObject:p?.shapeOperation==="move"||p?.shapeOperation==="move-xy",enableMidpoints:p?.edgeOperation==="split",enableEdgeOffset:p?.edgeOperation==="offset",snappingManager:this.snappingManager,sketchOptions:this.sketchOptions});n.tools.add(h),i||this.updateGraphics.add(l.graphic);let m=[],f=new Tn({activeComponent:h,tool:o,type:"update",onEnd:()=>{m.forEach(w=>w.remove()),m.length=0,n.tools?.remove(h),h.destroyed||h.destroy(),l.destroy()},canUndo:()=>h.canUndo,undo:()=>{h.undo(),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:o})},canRedo:()=>h.canRedo,redo:()=>{h.redo(),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:o})},addToSelection:w=>D(this,null,function*(){this.updateGraphics.add(w),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[w],removed:[],type:"selection-change"},type:"update"}),f.onEnd(),f.destroy();let O=yield this._setupMove3DOperation(this.updateGraphics.toArray(),t,n,"transform",!0);st(O)||this._setUpdateOperationHandle(O,t)}),removeFromSelection:w=>{this.updateGraphics.remove(w),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[w],type:"selection-change"},type:"update"}),f.complete()},toggleTool:()=>D(this,null,function*(){if(t.toggleToolOnClick===!1)return;f.onEnd(),f.destroy();let w=yield this._setupGraphicTransform3DOperation(this.updateGraphics.toArray(),t,n,!0);st(w)||this._setUpdateOperationHandle(w,t)})});return m.push(...this._getHandlesForComponent(f,t),n.on("immediate-click",w=>this._getCommonUpdateOperationClickHandlers(f,w,t),ve.WIDGET),n.on("key-down",w=>{this._getCommonUpdateOperationKeyDownHandlers(f,w)},ve.WIDGET)),f})}_setupTransformOrReshape2DOperation(e,t,n,i){return D(this,null,function*(){this.updateGraphics.addMany(e),yield this._updateSpatialReference(e);let o=t==="transform"?yield this._getBox(e,n,i):yield this._getReshape(e,n,i);if(st(o))return o;let r=new Tn({activeComponent:o,type:"update",onEnd:()=>{a.forEach(l=>l.remove()),s.forEach(l=>l.remove()),a=[],s=[],r.activeComponent&&!r.activeComponent.destroyed&&r.activeComponent.destroy(),this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray())},undo:()=>{Zd(r,this.updateGraphics.toArray()),r.refreshComponent(),this._emitUndoEvent({graphics:this.updateGraphics.toArray(),tool:r.tool})},redo:()=>{Yd(r,this.updateGraphics.toArray()),r.refreshComponent(),this._emitRedoEvent({graphics:this.updateGraphics.toArray(),tool:r.tool})},addToSelection:l=>D(this,null,function*(){let u=r.activeComponent;if(u?.type==="reshape"){let p=[...this.updateGraphics,l];this.updateGraphics.removeAll(),r.onEnd(),r.destroy();let h=yield this._setupTransformOrReshape2DOperation(p,"transform",n,i);if(st(h))return;this._setUpdateOperationHandle(h,n)}else this.updateGraphics.add(l),u.graphics=this.updateGraphics.toArray(),u.refresh(),r.resetHistory();this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[l],removed:[],type:"selection-change"},type:"update"})}),removeFromSelection:l=>D(this,null,function*(){let u=this.updateGraphics.indexOf(l);r.history.undo.forEach(h=>h.updates.splice(u,1)),r.history.redo.forEach(h=>h.updates.splice(u,1)),this.updateGraphics.remove(l);let p=this.updateGraphics.toArray();if(p.length===0)r.complete();else{let h=p[0].geometry;p.length!==1||h==null||h.type!=="point"&&h.type!=="multipoint"?r.activeComponent.graphics=p:r.toggleTool()}this.emit("update",{graphics:p,state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:[],removed:[l],type:"selection-change"},type:"update"})}),toggleTool:()=>D(this,null,function*(){if(this.updateGraphics.length>1)return;let l=this.updateGraphics.at(0),u=l.geometry;if(u!=null&&(r.tool==="reshape"&&(u.type==="point"||u.type==="multipoint")||r.tool==="transform"&&u.type==="extent"))return;let p=null;r.tool==="transform"?p=yield this._getReshape([l],n,i):r.tool==="reshape"&&(p=yield this._getBox([l],n,i)),st(p)||(r.activeComponent?.destroy(),r.activeComponent=p,r.activeComponent&&(a.forEach(h=>h.remove()),a=this._getHandlesForComponent(r,n)))})}),s=[i.on("immediate-click",l=>this._getCommonUpdateOperationClickHandlers(r,l,n),ve.WIDGET),i.on("key-down",l=>{if(this._getCommonUpdateOperationKeyDownHandlers(r,l),l.key===Ce.constraint&&!l.repeat&&r){let u=r.activeComponent;u&&u.type==="box"&&(u.preserveAspectRatio=!u.preserveAspectRatio)}},ve.WIDGET),i.on("key-up",l=>{if(l.key===Ce.constraint&&r){let u=r.activeComponent;u&&u.type==="box"&&(u.preserveAspectRatio=!u.preserveAspectRatio)}},ve.WIDGET)],a=this._getHandlesForComponent(r,n);return r})}_getGraphicMover(e,t,n){return D(this,null,function*(){let{enableMoveAllGraphics:i,highlightOptions:o}=t,r=yield this._requireModule(import("./chunk-6SDWUVW5.js"));return st(r)?r:new r.module.default({enableMoveAllGraphics:i,highlightsEnabled:!!o?.enabled,indicatorsEnabled:!1,graphics:e,view:n,callbacks:{onGraphicMoveStart:({dx:s,dy:a,graphic:l})=>{this._displayGrabbingCursor(),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:s,dy:a,mover:l,type:"move-start"},type:"update"})},onGraphicMove:({dx:s,dy:a,graphic:l})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:s,dy:a,mover:l,type:"move"},type:"update"}),onGraphicMoveStop:({dx:s,dy:a,graphic:l})=>{this._displayPointerCursor(),this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:s,dy:a,mover:l,type:"move-stop"},type:"update"})},onGraphicPointerOver:()=>this._displayPointerCursor(),onGraphicPointerOut:()=>this._displayDefaultCursor()}})})}_getBox(e,t,n){return D(this,null,function*(){let{enableRotation:i,enableScaling:o,highlightOptions:r,preserveAspectRatio:s}=t,a=yield this._requireModule(import("./chunk-3OWG6X5B.js"));if(st(a))return a;let l=this.view?.inputManager?.isModifierKeyDown(Ce.constraint);return new a.module.default({graphics:e,enableRotation:i,enableScaling:o,highlightsEnabled:!!r?.enabled,preserveAspectRatio:!!s!=!!l,layer:this._internalGraphicsLayer,view:n,sketchOptions:this.sketchOptions,callbacks:{onMoveStart:u=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:v({},u),type:"update"}),onMove:u=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:v({},u),type:"update"}),onMoveStop:u=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:v({},u),type:"update"}),onScaleStart:u=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:v({},u),type:"update"}),onScale:u=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:v({},u),type:"update"}),onScaleStop:u=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:v({},u),type:"update"}),onRotateStart:u=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:v({},u),type:"update"}),onRotate:u=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:v({},u),type:"update"}),onRotateStop:u=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:v({},u),type:"update"})}})})}_getReshape(e,t,n){return D(this,null,function*(){let i=t.reshapeOptions?.edgeOperation==="split",o=t.reshapeOptions?.shapeOperation==="move",r=!!t.highlightOptions?.enabled,s=yield this._requireModule(import("./chunk-IBPMBKRD.js"));return st(s)?s:new s.module.default({enableMidpoints:i,enableMovement:o,graphic:e[0],highlightsEnabled:r,layer:this._internalGraphicsLayer,snappingManager:this.snappingManager,sketchOptions:this.sketchOptions,view:n,callbacks:{onReshapeStart:a=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:v({},a),type:"update"}),onReshape:a=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:v({},a),type:"update"}),onReshapeStop:({mover:a,type:l})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:a,type:l},type:"update"}),onMoveStart:({dx:a,dy:l,mover:u,type:p})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:a,dy:l,mover:u,type:p},type:"update"}),onMove:({dx:a,dy:l,mover:u,type:p})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:a,dy:l,mover:u,type:p},type:"update"}),onMoveStop:({dx:a,dy:l,mover:u,type:p})=>this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:a,dy:l,mover:u,type:p},type:"update"}),onVertexAdd:({added:a,type:l,vertices:u})=>{let p=a.map(h=>Ju(h.geometry));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{added:p,vertices:u,type:l},type:"update"})},onVertexRemove:({removed:a,type:l,vertices:u})=>{let p=a.map(h=>Ju(h.geometry));this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{removed:p,vertices:u,type:l},type:"update"})}}})})}_getHandlesForComponent(e,t){let n=e.activeComponent;if(!n)return[];switch(n.type){case"graphic-mover":return[n.on("graphic-click",({graphic:i,viewEvent:o})=>{o.native?.shiftKey&&(o.stopPropagation(),e.removeFromSelection(i))}),n.on("graphic-move-start",i=>e.addToHistory(Io(i.allGraphics)))];case"box":return[n.on("graphic-click",i=>this._onTransformOrReshape2DGraphicClick(e,t,i)),n.on("move-start",i=>e.addToHistory(Io(i.graphics))),n.on("rotate-start",i=>e.addToHistory(Io(i.graphics))),n.on("scale-start",i=>e.addToHistory(Io(i.graphics)))];case"reshape":return[n.on("graphic-click",i=>this._onTransformOrReshape2DGraphicClick(e,t,i)),n.on("move-start",i=>e.addToHistory(Io([i.mover]))),n.on("reshape-start",i=>e.addToHistory(Io([i.graphic]))),n.on("vertex-add",i=>e.addToHistory(Io([i.oldGraphic]))),n.on("vertex-remove",i=>e.addToHistory(Io([i.oldGraphic])))];case"move-3d":return[n.events.on("record-undo",({updates:i})=>{e.addToHistory({updates:i})}),n.events.on("move-start",i=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,mover:i.objects.length>0?i.objects[0].graphic:null,type:"move-start"},type:"update"})}),n.events.on("move",i=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:i.dx,dy:i.dy,mover:i.objects.length>0?i.objects[0].graphic:null,type:"move"},type:"update"})}),n.events.on("move-stop",i=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{dx:0,dy:0,mover:i.objects.length>0?i.objects[0].graphic:null,type:"move-stop"},type:"update"})}),n.events.on("immediate-click",i=>{i.shiftKey?this._toggleSelection([i.object.graphic],e,t):e.toggleTool()})];case"transform-3d":return[n.events.on("record-undo",({updates:i})=>{e.addToHistory({updates:i})}),n.events.on("translate-start",i=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:i.object.graphic,dx:i.dxScreen,dy:i.dyScreen,type:"move-start"},type:"update"})}),n.events.on("translate-stop",i=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:i.object.graphic,dx:i.dxScreen,dy:i.dyScreen,type:"move-stop"},type:"update"})}),n.events.on("rotate-start",i=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:i.object.graphic,angle:i.angle,type:"rotate-start"},type:"update"})}),n.events.on("rotate-stop",i=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:i.object.graphic,angle:i.angle,type:"rotate-stop"},type:"update"})}),n.events.on("scale-start",i=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:i.object.graphic,xScale:i.xScale,yScale:i.yScale,type:"scale-start"},type:"update"})}),n.events.on("scale-stop",i=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:i.object.graphic,xScale:i.xScale,yScale:i.yScale,type:"scale-stop"},type:"update"})}),n.events.on("translate",i=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:i.object.graphic,dx:i.dxScreen,dy:i.dyScreen,type:"move"},type:"update"})}),n.events.on("rotate",i=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:i.object.graphic,angle:i.angle,type:"rotate"},type:"update"})}),n.events.on("scale",i=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:{mover:i.object.graphic,xScale:i.xScale,yScale:i.yScale,type:"scale"},type:"update"})}),n.events.on("immediate-click",i=>{i.shiftKey?this._toggleSelection([i.object.graphic],e,t):e.toggleTool()})];case"reshape-3d":return[n.events.on("reshape",i=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:B(v({},i),{mover:i.object.graphic}),type:"update"})}),n.events.on("move",i=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:B(v({},i),{mover:i.object.graphic}),type:"update"})}),n.events.on("vertex-add",i=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:i,type:"update"})}),n.events.on("vertex-remove",i=>{this.emit("update",{graphics:this.updateGraphics.toArray(),state:"active",aborted:!1,tool:this.activeTool,toolEventInfo:i,type:"update"})}),n.events.on("immediate-click",i=>{i.shiftKey?this._toggleSelection([i.object.graphic],e,t):e.toggleTool()})]}}_onTransformOrReshape2DGraphicClick(e,t,n){let{graphic:i,viewEvent:o}=n;return o.native?.shiftKey&&i.layer===this.layer?(o.stopPropagation(),e.removeFromSelection(i)):t.toggleToolOnClick?(o.stopPropagation(),e.toggleTool()):void 0}_setUpdateOperationHandle(e,t){this._operationHandle=e;let n=this.view?.map;this._disablePopup(t);let i=()=>{if(e===this._operationHandle){let o=this.updateGraphics.toArray(),r=this._operationHandle.tool;this._operationHandle.destroy(),this._operationHandle=null,this._internalGraphicsLayer.removeMany(this.updateGraphics.toArray()),this.updateGraphics.removeAll(),n&&n.remove(this._internalGraphicsLayer),this._restorePopup(t),this.emit("update",{graphics:o,state:"complete",aborted:e.cancelled,tool:r,toolEventInfo:null,type:"update"})}};e.on("complete",i)}_getCommonUpdateOperationClickHandlers(e,t,n){return D(this,null,function*(){let i=fi(t),o=yield t.async(()=>this._getFirstHit(i));if(o==null)return void e.complete();if(t.native.shiftKey&&this._toggleSelection([o.graphic],e,n))return void t.stopPropagation();this.updateGraphics.includes(o.graphic)?t.stopPropagation():e.complete()})}_toggleSelection(e,t,n){let i=!!n.multipleSelectionEnabled;return e.some(o=>o!=null&&!(!i||o.layer!==this.layer)&&(this.updateGraphics.includes(o)?t.removeFromSelection(o):t.addToSelection(o),!0))}_getCommonUpdateOperationKeyDownHandlers(e,t){if(!e)return;let n=t.key;n===Ce.undo&&e.canUndo()?(t.stopPropagation(),e.undo()):n===Ce.redo&&e.canRedo()?(t.stopPropagation(),e.redo()):n===Ce.cancel?(t.stopPropagation(),e.cancel()):this.allowDeleteKey&&Ce.delete.includes(n)&&this._onDeleteKey(t)}_onDeleteKey(e){if(!this._operationHandle||this._operationHandle.type!=="update")return;let t=this.activeComponent,n=this.updateGraphics.toArray();t!=null&&(t.type!=="reshape"||n.length===1&&n[0].geometry?.type==="point")&&(e.stopPropagation(),this.delete())}_removeDefaultLayer(){this._internalGraphicsLayer&&(this.view?.map?.remove(this._internalGraphicsLayer),this._internalGraphicsLayer=re(this._internalGraphicsLayer))}_isComponentGraphic(e){let{activeComponent:t}=this;return!(!e||t==null)&&(e.attributes?.esriSketchTool||t.type==="draw-2d"&&t.graphic===e||(t.type==="box"||t.type==="reshape")&&t.isUIGraphic(e))}_displayPointerCursor(){this.view?.container&&this.view.cursor!=="pointer"&&(this.view.cursor="pointer")}_displayGrabbingCursor(){this.view?.container&&this.view.cursor!=="grabbing"&&(this.view.cursor="grabbing")}_displayDefaultCursor(){this.view?.container&&this.view.cursor!==null&&(this.view.cursor=null)}_logError(e,t,n){q.getLogger(this).error(new ne(e,t,n))}_requireModule(e){return D(this,null,function*(){let t=new AbortController;this._moduleLoaderAbortController=t;let n=yield e;return this._moduleLoaderAbortController!==t||t.signal.aborted?{requireError:"aborted"}:{module:n}})}_emitUndoEvent(e){this.emit("undo",B(v({},e),{type:"undo"}))}_emitRedoEvent(e){this.emit("redo",B(v({},e),{type:"redo"}))}_emitDeleteEvent(e){this.emit("delete",B(v({},e),{type:"delete"}))}get test(){}wait(){return Rn(()=>!this.updating)}_beginAsyncOperation(){this._numUpdating+=1,this.notifyChange("updating")}_endAsyncOperation(){this._numUpdating-=1,this.notifyChange("updating")}_disablePopupEnabled(e){return this.view?.type!=="3d"||this.updateOnGraphicClick||(e?.toggleToolOnClick??!1)}_disablePopup(e){this._disablePopupEnabled(e)&&this.view&&this._originalPopupEnabled==null&&(this._originalPopupEnabled=this.view.popupEnabled,this.view.popupEnabled=!1)}_restorePopup(e){this._disablePopupEnabled(e)&&this.view&&this._originalPopupEnabled!=null&&(this.view.popupEnabled=this._originalPopupEnabled,this._originalPopupEnabled=null)}_waitViewReady(){return D(this,null,function*(){let e=this.view;e?(Pn(this._viewReadyAbortController),this._viewReadyAbortController=new AbortController,yield uo(Rn(()=>e?.ready),this._viewReadyAbortController.signal)):this._logMissingView()})}_logMissingView(){this._logError("sketch:missing-property",Yw("view"))}_logMissingLayer(){this._logError(dE,Yw("layer"))}};c([d()],_e.prototype,"_defaultSnappingManager",void 0),c([d()],_e.prototype,"updating",null),c([d()],_e.prototype,"_operationHandle",void 0),c([d({readOnly:!0})],_e.prototype,"activeTool",null),c([d()],_e.prototype,"activeFillSymbol",void 0),c([d()],_e.prototype,"activeLineSymbol",void 0),c([d()],_e.prototype,"activeVertexSymbol",void 0),c([d()],_e.prototype,"allowDeleteKey",void 0),c([d({readOnly:!0})],_e.prototype,"createGraphic",null),c([d()],_e.prototype,"defaultCreateOptions",null),c([d()],_e.prototype,"defaultUpdateOptions",null),c([d({type:I0,nonNullable:!0})],_e.prototype,"labelOptions",null),c([d()],_e.prototype,"layer",void 0),c([d({types:Ma})],_e.prototype,"pointSymbol",void 0),c([d({types:Ma})],_e.prototype,"polygonSymbol",void 0),c([d({types:Ma})],_e.prototype,"polylineSymbol",void 0),c([d()],_e.prototype,"meshSymbol",void 0),c([d({type:xo,nonNullable:!0})],_e.prototype,"snappingOptions",null),c([d()],_e.prototype,"snappingManager",null),c([d({readOnly:!0})],_e.prototype,"state",null),c([d({type:O0,nonNullable:!0})],_e.prototype,"tooltipOptions",null),c([d({readOnly:!0})],_e.prototype,"updateGraphics",void 0),c([d()],_e.prototype,"updateOnGraphicClick",void 0),c([d({type:xc,nonNullable:!0})],_e.prototype,"valueOptions",null),c([d({types:Ma})],_e.prototype,"vertexSymbol",void 0),c([d({value:null})],_e.prototype,"view",null),c([d({constructOnly:!0,type:as})],_e.prototype,"sketchOptions",void 0),_e=c([b("esri.widgets.Sketch.SketchViewModel")],_e);var dE="sketch:missing-property",Yw=e=>`Property '${e}' is missing on SketchViewModel.`;function uE(e){return e==="polygon"||e==="rectangle"||e==="circle"}function Zd(e,t){Qw("undo",e.history.undo,e.history.redo,t)}function Yd(e,t){Qw("redo",e.history.redo,e.history.undo,t)}function Qw(e,t,n,i){let o=t.pop();if(!o)return;let r=o.updates,s=[];i.forEach((a,l)=>{let u=r[l];u!=null&&("geometry"in u&&u.geometry!=null&&(s.push({geometry:a.geometry}),a.geometry=u.geometry),"symbol"in u&&u.symbol!=null&&(s.push({symbol:a.symbol}),a.symbol=u.symbol),"undo"in u&&(s.push(u),u[e](a)))}),n.push({updates:s})}function Kw(e,t){e!=null&&t.hasGrabbedManipulators&&(e.activeTool=null)}function Io(e){return{updates:e.map(({geometry:t})=>t?.type==="mesh"?{geometry:t.cloneShallow()}:{geometry:t})}}function st(e){return"requireError"in e&&e.requireError==="aborted"}var Jw=_e;var Yn=class extends k{constructor(e){super(e),this.enabledToggle=!0,this.featureEnabledToggle=!0,this.header=!1,this.layerList=!0,this.layerListToggleLayersButton=!0,this.selfEnabledToggle=!0}};c([d({type:Boolean,nonNullable:!0})],Yn.prototype,"enabledToggle",void 0),c([d({type:Boolean,nonNullable:!0})],Yn.prototype,"featureEnabledToggle",void 0),c([d({type:Boolean,nonNullable:!0})],Yn.prototype,"header",void 0),c([d({type:Boolean,nonNullable:!0})],Yn.prototype,"layerList",void 0),c([d({type:Boolean,nonNullable:!0})],Yn.prototype,"layerListToggleLayersButton",void 0),c([d({type:Boolean,nonNullable:!0})],Yn.prototype,"selfEnabledToggle",void 0),Yn=c([b("esri.widgets.support.SnappingControls.VisibleElements")],Yn);var Us=Yn;var tn=class extends k{constructor(e){super(e),this.point=!0,this.polyline=!0,this.polygon=!0,this.rectangle=!0,this.circle=!0,this.multipoint=!0,this.mesh=!0}};c([d({type:Boolean,nonNullable:!0})],tn.prototype,"point",void 0),c([d({type:Boolean,nonNullable:!0})],tn.prototype,"polyline",void 0),c([d({type:Boolean,nonNullable:!0})],tn.prototype,"polygon",void 0),c([d({type:Boolean,nonNullable:!0})],tn.prototype,"rectangle",void 0),c([d({type:Boolean,nonNullable:!0})],tn.prototype,"circle",void 0),c([d({type:Boolean,nonNullable:!0})],tn.prototype,"multipoint",void 0),c([d({type:Boolean,nonNullable:!0})],tn.prototype,"mesh",void 0),tn=c([b("esri.widgets.Sketch.VisibleElements.CreateToolVisibilityMap")],tn);var ur=class extends k{constructor(e){super(e),this["rectangle-selection"]=!0,this["lasso-selection"]=!0,this["custom-selection"]=!0}};c([d({nonNullable:!0})],ur.prototype,"rectangle-selection",void 0),c([d({nonNullable:!0})],ur.prototype,"lasso-selection",void 0),c([d({nonNullable:!0})],ur.prototype,"custom-selection",void 0),ur=c([b("esri.widgets.Sketch.VisibleElements.SelectionToolVisibilityMap")],ur);var bi=class extends k{constructor(e){super(e),this.createTools=new tn,this.directionModePicker=!1,this.duplicateButton=!0,this.labelsToggle=!0,this.selectionTools=new ur,this.settingsMenu=!0,this.snappingControls=!0,this.snappingControlsElements=new Us,this.tooltipsToggle=!0,this.undoRedoMenu=!0}};c([d({type:tn,nonNullable:!0})],bi.prototype,"createTools",void 0),c([d({type:Boolean,nonNullable:!0})],bi.prototype,"directionModePicker",void 0),c([d({type:Boolean,nonNullable:!0})],bi.prototype,"duplicateButton",void 0),c([d({type:Boolean,nonNullable:!0})],bi.prototype,"labelsToggle",void 0),c([d({type:ur,nonNullable:!0})],bi.prototype,"selectionTools",void 0),c([d({type:Boolean,nonNullable:!0})],bi.prototype,"settingsMenu",void 0),c([d({type:Boolean,nonNullable:!0})],bi.prototype,"snappingControls",void 0),c([d({type:Us,nonNullable:!0})],bi.prototype,"snappingControlsElements",void 0),c([d({type:Boolean,nonNullable:!0})],bi.prototype,"tooltipsToggle",void 0),c([d({type:Boolean,nonNullable:!0})],bi.prototype,"undoRedoMenu",void 0),bi=c([b("esri.widgets.Sketch.VisibleElements")],bi);var Om=bi;var Ut=class extends k{constructor(e){super(e),this.coordinates=void 0,this.strokeDash=[],this.strokeWidth=1,this.strokeColor=[0,0,0,1],this.strokeDashColor=[255,255,255,1],this.fillColor=[0,0,0,0],this.visible=!0,this.isDecoration=!0}get _strokeStyle(){let e=this.strokeColor;return`rgba(${e[0]}, ${e[1]}, ${e[2]}, ${e[3]})`}get _strokeBackgroundStyle(){let e=this.strokeDashColor;return`rgba(${e[0]}, ${e[1]}, ${e[2]}, ${e[3]})`}get _fillStyle(){let e=this.fillColor;return`rgba(${e[0]}, ${e[1]}, ${e[2]}, ${e[3]})`}get _renderCoordinates(){let e=[];if(!this.coordinates)return{coordinates:e,rect:ep};let t=L_(R_($o(ep),this.coordinates),2*this.strokeWidth);t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]+.5),t[3]=Math.ceil(t[3]+.5);for(let n of this.coordinates)e.push([Math.floor(n[0]-t[0])+.5,Math.floor(n[1]-t[1])+.5]);return e.reverse(),{coordinates:e,rect:t}}render(){let{coordinates:e,rect:t}=this._renderCoordinates,n=sc(t),i=ac(t);return M("div",{classes:{"esri-outline-overlay-item":!0},styles:{left:t[0]+"px",top:t[1]+"px",width:n+"px",height:i+"px",visibility:this.visible?"visible":"hidden"}},M("svg",{height:i,styles:{display:"block"},width:n},M("polygon",{fill:this._fillStyle,points:e.map(([o,r])=>`${o},${r}`).join(" "),stroke:this._strokeBackgroundStyle,"stroke-width":this.strokeWidth}),M("polygon",{fill:"transparent",points:e.map(([o,r])=>`${o},${r}`).join(" "),stroke:this._strokeStyle,"stroke-dasharray":this.strokeDash.length?this.strokeDash.join(" "):void 0,"stroke-width":this.strokeWidth})))}renderCanvas(){}};c([d()],Ut.prototype,"coordinates",void 0),c([d()],Ut.prototype,"strokeDash",void 0),c([d()],Ut.prototype,"strokeWidth",void 0),c([d()],Ut.prototype,"strokeColor",void 0),c([d()],Ut.prototype,"strokeDashColor",void 0),c([d()],Ut.prototype,"fillColor",void 0),c([d()],Ut.prototype,"visible",void 0),c([d()],Ut.prototype,"isDecoration",void 0),c([d({readOnly:!0})],Ut.prototype,"_strokeStyle",null),c([d({readOnly:!0})],Ut.prototype,"_strokeBackgroundStyle",null),c([d({readOnly:!0})],Ut.prototype,"_fillStyle",null),c([d({readOnly:!0})],Ut.prototype,"_renderCoordinates",null),Ut=c([b("esri.views.overlay.OutlineOverlayItem")],Ut);var Xw=Ut;var ti=class extends Be.EventedMixin(q0){constructor(e){super(e),this._overlayItem=void 0,this.geometryType=null,this.mode=null,this.type="draw-screen"}initialize(){this.drawOperation=this._makeDrawOperation();let e=t=>this.drawOperation.on(t,n=>{this._updateVisuals(),this.emit(t,n)});this.addHandles([e("vertex-add"),e("vertex-remove"),e("vertex-update"),e("cursor-update"),e("complete")]),this.finishToolCreation()}destroy(){this.drawOperation=re(this.drawOperation),this._set("view",null)}get canRedo(){return this.drawOperation.canRedo}get canUndo(){return this.drawOperation.canUndo}set centeredToggled(e){this._set("centeredToggled",e),this._updateVisuals()}set enabled(e){this.drawOperation.interactive=e,this._set("enabled",e)}set uniformSizeToggled(e){this._set("uniformSizeToggled",e),this._updateVisuals()}get updating(){return this.drawOperation?.updating??!1}get cursor(){return this.geometryType==="point"?"default":"crosshair"}completeCreateOperation(){this.drawOperation.complete()}onInputEvent(e){this.destroyed||this.drawOperation.onInputEvent(e)}redo(){this.drawOperation.redo()}undo(){this.drawOperation.undo()}reset(){}_makeDrawOperation(){let{view:e}=this;return new Y0({view:e,manipulators:this.manipulators,geometryType:pE(this.geometryType),drawingMode:this.mode,hasZ:!1,defaultZ:0,snapToSceneEnabled:!1,drawSurface:new Tp,hasM:!1,snappingManager:null,snappingVisualizer:null,graphic:null,cursor:this.cursor})}get coordinates(){let{drawOperation:e}=this;if(!e?.geometryIncludingUncommittedVertices.length)return[];let{coordinateHelper:t}=e,n=e.committableVertex,i=e.committedVertices.slice();n!=null&&i.push(t.pointToArray(n));let o=i.length;switch(this.geometryType){case"circle":case"rectangle":{let r=new j0(e0,Tp.spatialReference),s=this.geometryType==="circle"?$0:z0,a=this.geometryType==="circle"?W0:U0;if(o===1&&e.isCompleted){let l=i[0],u=r.makeMapPoint(l[0]+hE,l[1]);return s([l,u],r,!0)?.geometry.rings[0]??[]}if(o===2){let l=this.geometryType!=="rectangle",u=this.centeredToggled!==l,p=this.geometryType!=="rectangle";return(this.uniformSizeToggled!==p?s(i,r,u)?.geometry.rings[0]:a(i,r,u)?.geometry.rings[0])??[]}return[]}}return i}_updateVisuals(){if(!this._overlayItem){let e=new Xw({strokeDash:[5],strokeDashColor:[255,255,255,255]});this.view.overlay?.addItem(e),this.addHandles(Yt(()=>{this.view.overlay?.removeItem(e),e?.destroy(),this._overlayItem=void 0})),this._overlayItem=e}this._overlayItem.coordinates=this.coordinates}onDeactivate(){this.drawOperation.isCompleted||this.drawOperation.cancel()}};function pE(e){switch(e){case"polygon":case"point":return e;case"circle":case"rectangle":return"segment"}}c([d({value:!1})],ti.prototype,"centeredToggled",null),c([d()],ti.prototype,"drawOperation",void 0),c([d({value:!0})],ti.prototype,"enabled",null),c([d({value:!1})],ti.prototype,"uniformSizeToggled",null),c([d({constructOnly:!0})],ti.prototype,"geometryType",void 0),c([d({constructOnly:!0})],ti.prototype,"mode",void 0),c([d({readOnly:!0})],ti.prototype,"type",void 0),c([d({readOnly:!0})],ti.prototype,"updating",null),c([d({constructOnly:!0,nonNullable:!0})],ti.prototype,"view",void 0),c([d()],ti.prototype,"cursor",null),ti=c([b("esri.views.draw.DrawScreenTool")],ti);var hE=48;function mE(){return D(this,null,function*(){return import("./chunk-PM74IUJK.js")})}function fE(){return D(this,null,function*(){return mE().then(({contains:e,intersects:t,overlaps:n,simplify:i})=>({contains:e,intersects:t,overlaps:n,simplify:i}))})}function t1(e){return D(this,null,function*(){let{currentSelection:t,selector:n,signal:i,sources:o,view:r}=e;if(!o?.length)return{added:[],removed:[]};let{layers:s,layerViews:a,graphicsLayers:l}=vE(o),u=(yield uo(Promise.all([_E(n,s,r,i),yE(n,a,r,i),gE(n,l,r)]),i)).flat();if(!t)return{added:u,removed:[]};let p=t.toArray(),h=u.filter(f=>!e1(p,f)),m=p.filter(f=>!e1(u,f));return t.removeMany(m),t.addMany(h),{added:h,removed:m}})}var gE=(e,t,n)=>D(void 0,null,function*(){return CE({candidates:t.flatMap(i=>i.graphics.toArray())??[],selector:e,view:n})}),_E=(e,t,n,i)=>D(void 0,null,function*(){let o=yield Wi(wE({selector:e,signal:i,layers:t,view:n}));return o?i1(o):[]}),yE=(e,t,n,i)=>D(void 0,null,function*(){let o=yield Wi(bE({selector:e,signal:i,layerViews:t,view:n}));return o?i1(o):[]});function i1(e){let t=[];for(let n=0;n<e.length;n++){let i=e[n];i.status==="fulfilled"&&t.push(...i.value)}return t}function vE(e){let t=[],n=[],i=[];return e.forEach(o=>{ns(o)?t.push(o):(dc(o)||uc(o))&&o.layers?.length?t.push(...o.layers.toArray()):B_(o)&&o.sublayers?.length?i.push(...o.sublayers.toArray()):H_(o)?i.push(o):rs(o)&&n.push(o)}),{layers:t,layerViews:n,graphicsLayers:i}}function e1(e,t){if(e.includes(t))return!0;let n=t.getObjectId(),i=n!=null,{layer:o,uid:r}=t;return i?e.some(s=>{if(o===s.layer)return n===s.getObjectId()}):e.some(s=>{if(o===s.layer)return r===s.uid})}function bE(e){return D(this,null,function*(){let{layerViews:t,selector:n,signal:i,view:o}=e;return uo(Promise.allSettled(t.map(r=>D(this,null,function*(){let s=r.createQuery(),{geometry:a}=n1(n,r.layer,o);return s.outFields=["*"],s.geometry=a,s.returnGeometry=!0,s.outSpatialReference=o.spatialReference,r.queryFeatures(s,{signal:i}).then(({features:l})=>l)}))),i)})}function wE(e){return D(this,null,function*(){let{layers:t,selector:n,signal:i,view:o}=e;return uo(Promise.allSettled(t.map(r=>D(this,null,function*(){return r.queryFeatures(SE(r.createQuery(),n,r,o),{signal:i}).then(({features:s})=>s)}))),i)})}function n1(e,t,n){let i="displayField"in t?t.displayField:null,o=Fy({displayField:i,fields:t.fields}),r=[t.objectIdField];o!=null&&t.fieldsIndex.has(o)&&r.push(o);let s="renderer"in t?S0({renderer:t.renderer}):0;return{geometry:e.type==="point"?C0(e,s,n):e,outFields:r}}function SE(e,t,n,i){let{outFields:o,geometry:r}=n1(t,n,i);return e.outFields=o,e.geometry=r,e.returnGeometry=!0,e.outSpatialReference=i.spatialReference,e}function CE(e){return D(this,null,function*(){let{selector:t,candidates:n,view:i}=e;if(!n?.length||!t)return[];let{spatialReference:o}=i,r=t,s=yield fE();return n.filter(a=>s.intersects(o,r,a.geometry))})}var TE=100,pr=class extends Be.EventedAccessor{constructor(e){super(e),this._processTask=null,this.options=null,this.selection=new W,this.sources=null,this._process=zg((t,n)=>D(this,null,function*(){let{callback:i,selector:o,completed:r}=t,s=ho(a=>D(this,null,function*(){let{sources:l,selection:u,view:p}=this;if(!(!l?.length&&!p?.selectionManager.sources.length)&&p){if(o&&l!=null){let h=yield t1({currentSelection:u,selector:o,signal:a,sources:l,view:p});r&&p.selectionManager?.updateSelection(v({current:u.toArray()},h))}i&&i()}else u.removeAll()}));return Kr(n,()=>s.abort()),this._processTask=s,s.promise}),TE)}initialize(){this._setup()}cancel(){this.removeAllHandles(),this._processTask?.abort()}_setup(){return D(this,null,function*(){let{view:e}=this;if(yield e.whenReady(),this.destroyed)return;let t=this.options,n=t?.createTool??"rectangle",i=t?.mode??(n==="polygon"?"click":"hybrid"),o=Symbol();this._tool=new ti({view:e,mode:i,geometryType:n}),t?.selectOnComplete||this.addHandles(this._tool.on(["cursor-update","vertex-add","vertex-remove"],()=>Wi(this._process({selector:this._selectionArea}))),o),this.addHandles([e.on("key-down",r=>{if(!r.repeat)switch(r.key){case Ce.constraint:this._tool.uniformSizeToggled=!0,r.stopPropagation();break;case Ce.center:this._tool.centeredToggled=!0,r.stopPropagation()}}),e.on("key-up",r=>{switch(r.key){case Ce.constraint:this._tool.uniformSizeToggled=!1,r.stopPropagation();break;case Ce.center:this._tool.centeredToggled=!1,r.stopPropagation()}}),this._tool.on("complete",r=>D(this,null,function*(){this.removeHandles(o);let s=()=>{this.removeAllHandles(),this.emit("complete",{aborted:r.aborted,selection:this.selection.toArray()})};r.aborted?(this.cancel(),this.selection.removeAll(),s()):yield this._process({selector:this._selectionArea,callback:s,completed:!0})}))],o),this.addHandles(Yt(()=>e.tools.remove(this._tool))),e.addAndActivateTool(this._tool)})}get _selectionArea(){let e=me(),t=this._tool.coordinates,n=this.view.spatialReference,i=r=>{e.x=r[0],e.y=r[1];let{x:s,y:a}=this.view.toMap(e);return[s,a]};if(t.length===1){let[r,s]=i(t[0]);return new Fe({x:r,y:s,spatialReference:n})}let o=this._tool.coordinates.map(i);if(o.length!==0)return T_(o)||o.reverse(),new lc({spatialReference:n,rings:[o]})}};c([d()],pr.prototype,"options",void 0),c([d({readOnly:!0})],pr.prototype,"selection",void 0),c([d()],pr.prototype,"sources",void 0),c([d({constructOnly:!0})],pr.prototype,"view",void 0),pr=c([b("esri.widgets.support.Selector2D.SelectionOperation")],pr);var o1=pr;var Kn=class extends Be.EventedAccessor{constructor(e){super(e),this._operationHandlesGroup=null,this.activeOperation=null,this.sources=null}initialize(){this.addHandles([I(()=>this._sources,e=>{this.activeOperation&&(this.activeOperation.sources=e)})])}destroy(){this._operationHandlesGroup=Me(this._operationHandlesGroup)}get _sources(){let{sources:e,view:t}=this;return t&&e?.length?e.flatMap(n=>{if(rs(n))return n;if(dc(n)||uc(n)){let o=n.layers||[],r=o.map(s=>{let a=wp(t,s)||void 0;return rs(a)?a:s});return r.length?r.toArray():o.length?o.toArray():n}let i=wp(t,n)||void 0;return rs(i)?i:n}):[]}get layers(){return qr(q.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.sources}set layers(e){qr(q.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.sources=e}get state(){let{_sources:e,view:t}=this,n=!e?.length&&!t?.selectionManager.sources.length;return this.activeOperation?"active":t?.ready&&!n?"ready":"disabled"}cancel(){this.state==="active"&&(this.activeOperation?.cancel(),this._set("activeOperation",null))}activate(e){let{_sources:t,state:n,view:i}=this,o=!t?.length&&!i?.selectionManager.sources.length;if(n==="disabled"||o||!this.view)return;n==="active"&&this.cancel();let r=new o1({view:this.view,sources:t,options:e});return this._operationHandlesGroup=Zr([r.selection.on("change",s=>this.emit("selection-change",s)),r.once("complete",s=>this._onOperationComplete(s))]),this._set("activeOperation",r),r}_onOperationComplete(e){this._operationHandlesGroup=Me(this._operationHandlesGroup),this._set("activeOperation",null),this.emit("complete",e)}};c([d()],Kn.prototype,"_sources",null),c([d({readOnly:!0})],Kn.prototype,"activeOperation",void 0),c([d()],Kn.prototype,"layers",null),c([d()],Kn.prototype,"sources",void 0),c([d({readOnly:!0})],Kn.prototype,"state",null),c([d()],Kn.prototype,"view",void 0),Kn=c([b("esri.widgets.support.SelectionToolbar.SelectionToolbarViewModel")],Kn);var r1=Kn;var s1={lassoTool:!0,rectangleTool:!0},ME={createTool:"polygon",mode:"freehand"},DE={createTool:"rectangle"},km="esri-selection-toolbar",Am={base:km,container:`${km}__container`,toolButton:`${km}__tool-button`},ii=class extends ot{constructor(e,t){super(e,t),this._viewModelHandlesGroup=null,this.activeToolInfo=null,this.messages=null,this.toolConfigs=[],this.viewModel=new r1,this.visibleElements=v({},s1),this._viewModelHandlesGroup=Zr([this.viewModel.on("complete",n=>{this._set("activeToolInfo",null),this.emit("complete",n)})])}destroy(){this._viewModelHandlesGroup=Me(this._viewModelHandlesGroup)}loadDependencies(){return Rt({action:()=>import("./chunk-EANCIRMG.js"),icon:()=>import("./chunk-4HUBSTEF.js")})}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get layers(){return qr(q.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.viewModel.sources}set layers(e){qr(q.getLogger(this),"layers",{replacement:"Use SelectionToolbar.sources instead."}),this.viewModel.sources=e}get sources(){return this.viewModel.sources}set sources(e){this.viewModel.sources=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}castVisibleElements(e){return v(v({},s1),e)}get visibleToolCount(){let{view:e,toolConfigs:t,visibleElements:n}=this;return(t?.length??0)+(e?.type==="2d"?(n.lassoTool?1:0)+(n.rectangleTool?1:0):0)}activate(e){if(this.cancel(),this.viewModel.state!=="disabled")switch(e){case"lasso":this._activateTool("lasso");break;case"rectangle":this._activateTool("rectangle");break;default:this._activateTool(e)}}cancel(){this.viewModel.cancel(),this._set("activeToolInfo",null)}render(){return M("div",{"aria-label":this.label,class:this.classes(Am.base,Ae.widget)},M("div",{class:Am.container},this._renderDefaultTools(),this._renderCustomTools()))}_renderDefaultTools(){if(this.view?.type==="2d")return[this._renderRectangleTool(),this._renderLassoTool()]}_renderCustomTools(){if(this.toolConfigs?.length)return this.toolConfigs.map(({toolName:e,icon:t})=>M("calcite-action",{active:this.activeToolInfo?.toolName===e,bind:this,class:Am.toolButton,disabled:this.viewModel.state==="disabled",onclick:()=>this._onCustomToolClick(e),scale:"s",text:e,title:e},M("calcite-icon",{icon:t||"selection",scale:"s"})))}_renderLassoTool(){let{activeToolInfo:e,messages:t,visibleElements:n}=this;if(!n.lassoTool)return;let i=t.selectByLasso;return M("calcite-action",{active:e?.toolName==="lasso",bind:this,disabled:this.viewModel.state==="disabled",onclick:this._onLassoToolClick,scale:"s",text:i,title:i},M("calcite-icon",{icon:"lasso-select",scale:"s"}))}_renderRectangleTool(){let{activeToolInfo:e,messages:t,visibleElements:n}=this;if(!n.rectangleTool)return;let i=t.selectByRectangle;return M("calcite-action",{active:e?.toolName==="rectangle",bind:this,disabled:this.viewModel.state==="disabled",onclick:this._onRectangleToolClick,scale:"s",text:i,title:i},M("calcite-icon",{icon:"cursor-marquee",scale:"s"}))}_onCustomToolClick(e){this._toggleTool(e)}_onLassoToolClick(){this._toggleTool("lasso")}_onRectangleToolClick(){this._toggleTool("rectangle")}_activateTool(e){let t=this._getToolOptions(e);if(!t)return;let n=this.viewModel.activate(t);n&&this._set("activeToolInfo",{toolName:e,operation:n})}_toggleTool(e){if(this.activeToolInfo){let t=this.activeToolInfo.toolName;if(this.cancel(),t===e)return}this._activateTool(e)}_getToolOptions(e){return e==="lasso"?ME:e==="rectangle"?DE:this.toolConfigs.find(t=>t.toolName===e)}};c([d({readOnly:!0})],ii.prototype,"activeToolInfo",void 0),c([d()],ii.prototype,"label",null),c([d()],ii.prototype,"layers",null),c([d(),ut("esri/widgets/support/SelectionToolbar/t9n/SelectionToolbar")],ii.prototype,"messages",void 0),c([d()],ii.prototype,"sources",null),c([d()],ii.prototype,"toolConfigs",void 0),c([d()],ii.prototype,"view",null),c([d()],ii.prototype,"viewModel",void 0),c([d()],ii.prototype,"visibleElements",void 0),c([hi("visibleElements")],ii.prototype,"castVisibleElements",null),c([d()],ii.prototype,"visibleToolCount",null),ii=c([b("esri.widgets.support.SelectionToolbar")],ii);var a1=ii;var Jd=()=>Promise.all([Rt({icon:()=>import("./chunk-4HUBSTEF.js"),label:()=>import("./chunk-LMCBFGZ4.js"),switch:()=>import("./chunk-M7OTRAIY.js"),tooltip:()=>import("./chunk-3DLWI6VB.js")})]),Kd="esri-labeled-switch",Qd={label:`${Kd}__label`,labelContent:`${Kd}__label-content`,icon:`${Kd}__icon`,tooltip:`${Kd}__tooltip`};function hr({checked:e,disabled:t,hint:n,key:i,label:o,onChange:r}){return M("calcite-label",{class:Qd.label,disabled:t,key:i,layout:"inline-space-between",scale:"s"},M("div",{class:Qd.labelContent,key:"label-content"},n?M(l_,null,M("div",null,o),M("calcite-icon",{class:Qd.icon,icon:"information",id:i,scale:"s"}),M("calcite-tooltip",{class:Qd.tooltip,referenceElement:i},n)):o),M("calcite-switch",{checked:e,disabled:t,scale:"s",onCalciteSwitchChange:s=>r(s.target.checked)}))}var mr=class extends k{constructor(e){super(e),this.directionModePicker=!1,this.header=!1,this.labelsToggle=!0,this.tooltipsToggle=!0}};c([d({type:Boolean,nonNullable:!0})],mr.prototype,"directionModePicker",void 0),c([d({type:Boolean,nonNullable:!0})],mr.prototype,"header",void 0),c([d({type:Boolean,nonNullable:!0})],mr.prototype,"labelsToggle",void 0),c([d({type:Boolean,nonNullable:!0})],mr.prototype,"tooltipsToggle",void 0),mr=c([b("esri.widgets.support.SketchTooltipControls.VisibleElements")],mr);var Pm=mr;var _l="esri-sketch-tooltip-controls",Xd={base:_l,block:`${_l}__block`,blockContent:`${_l}__block-content`,hintIcon:`${_l}__hint-icon`,radioButtonLabelWrapper:`${_l}__radio-button-label-wrapper`},Oo=class extends ot{constructor(e,t){super(e,t),this.viewModel=null,this.visibleElements=new Pm,this.sketchOptions=new as,this.viewType=void 0,this._onTooltipsEnabledChange=n=>{this.sketchOptions.tooltips.enabled=n},this._onLabelsEnabledChange=n=>{this.sketchOptions.labels.enabled=n},this._onDirectionModeChange=n=>{this.sketchOptions.values.directionMode=n.target.selectedItem.value}}loadDependencies(){return Promise.all([Rt({block:()=>import("./chunk-ZKHFZ44S.js"),label:()=>import("./chunk-LMCBFGZ4.js"),icon:()=>import("./chunk-4HUBSTEF.js"),"radio-button":()=>import("./chunk-CP55T2WN.js"),"radio-button-group":()=>import("./chunk-FRJNOSUK.js")}),Jd()])}render(){let{label:e,visibleElements:t}=this,n=this._renderContent();return M("div",{"aria-label":e,class:this.classes(Xd.base,Ae.widget)},n?M("calcite-block",{class:Xd.block,heading:t.header?this.label:"",key:"content-block",open:!0},M("div",{class:Xd.blockContent,key:"content"},n)):void 0)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}_renderContent(){let{visibleElements:e,viewType:t}=this,n=[e.tooltipsToggle?this._renderTooltipsToggle():null,e.labelsToggle&&t!=="2d"?this._renderLabelsToggle():null,e.directionModePicker?this._renderDirectionModePicker():null].filter(dt);return n.length===0?null:n}_renderTooltipsToggle(){let{messages:e,sketchOptions:t}=this;return M(hr,{checked:t.tooltips.effectiveEnabled,hint:e.tooltipsToggleHint,key:`${this.id}__tooltips`,label:e.tooltipsToggle,onChange:this._onTooltipsEnabledChange})}_renderLabelsToggle(){let{messages:e,sketchOptions:t}=this;return M(hr,{checked:t.labels.enabled,hint:e.labelsToggleHint,key:`${this.id}__labels`,label:e.labelsToggle,onChange:this._onLabelsEnabledChange})}_renderDirectionModePicker(){let{messages:e,sketchOptions:t}=this,{directionMode:n}=t.values;return M("calcite-label",{key:"direction-mode",layout:"default",scale:"s"},e.directionModePicker,M("calcite-radio-button-group",{key:"radio-button-group",layout:"horizontal",name:this.id,scale:"s",value:n,onCalciteRadioButtonGroupChange:this._onDirectionModeChange},this._renderDirectionModeOption("relative",n,e.directionModeRelative),this._renderDirectionModeOption("absolute",n,e.directionModeAbsolute)))}_renderDirectionModeOption(e,t,n){return M("calcite-label",{key:e,layout:"inline",scale:"s"},M("calcite-radio-button",{checked:e===t,scale:"s",value:e}),M("div",{class:Xd.radioButtonLabelWrapper,key:"label-wrapper"},M("calcite-icon",{icon:Z0[e],scale:"s"}),n))}};c([d()],Oo.prototype,"label",null),c([d({type:Pm,nonNullable:!0})],Oo.prototype,"visibleElements",void 0),c([d(),ut("esri/widgets/support/SketchTooltipControls/t9n/SketchTooltipControls")],Oo.prototype,"messages",void 0),c([d({nonNullable:!0,type:as})],Oo.prototype,"sketchOptions",void 0),c([d({type:String})],Oo.prototype,"viewType",void 0),Oo=c([b("esri.widgets.support.SketchTooltipControls")],Oo);var l1=Oo;var EE={hide:"hide",hideChildren:"hide-children"};function $s(e){return e?.listMode??void 0}function c1(e){if(!e)return"inherited";let t=xE(Rm(e)?e.layer:e);return t!=null?t?"independent":"inherited":"visibilityMode"in e&&e.visibilityMode!=null?e.visibilityMode:"independent"}function eu(e){if(e&&(!("type"in e)||e.type!=="wmts"))return"sublayers"in e?"sublayers":"layers"in e?"layers":void 0}function Ws(e){return $s(e)!==EE.hide}function Fm(e){let t=e?.layer;return t&&"layers"in t?t.layers:null}function Rm(e){return e!=null&&"layer"in e&&e.layer!=null}function xE(e){let t=IE(e);return t!=null&&"supportsSublayerVisibility"in t?t.supportsSublayerVisibility:void 0}function IE(e){return e&&"capabilities"in e&&e.capabilities!=null&&"exportMap"in e.capabilities?e.capabilities.exportMap:void 0}var Lm,ko=Lm=class extends fc{constructor(e){super(e),this.displayValueEnabled=!1,this.max=1,this.min=0,this.step=.1,this.type="slider",this.value=null}clone(){return new Lm({active:this.active,className:this.className,disabled:this.disabled,id:this.id,indicator:this.indicator,title:this.title,visible:this.visible,displayValueEnabled:this.displayValueEnabled,max:this.max,min:this.min,step:this.step,value:this.value})}};c([d()],ko.prototype,"displayValueEnabled",void 0),c([d()],ko.prototype,"max",void 0),c([d()],ko.prototype,"min",void 0),c([d()],ko.prototype,"step",void 0),c([d()],ko.prototype,"value",void 0),ko=Lm=c([b("esri.support.actions.ActionSlider")],ko);var d1=ko;var Et=class extends cc(ot){constructor(e,t){super(e,t),this._legend=null,this.className=null,this.content=null,this.flowEnabled=!1,this.image=null,this.listItem=null,this.open=!1,this.visible=!0}initialize(){this.addHandles([I(()=>this._canCreateLegend,()=>this._createLegend(),ie),I(()=>[this._legend,this._legendOptions],()=>this._updateLegend(),ie)])}destroy(){this._legend=re(this._legend)}get _canCreateLegend(){let{content:e,listItem:t}=this;if(!t)return!1;let n="legend";return e===n||e!=null&&!!Array.isArray(e)&&e.includes(n)}get _legendOptions(){let{listItem:e,_legendLayerInfo:t}=this,n=e?.view;return t&&n?{view:n,layerInfos:[t]}:{}}get _legendLayerInfo(){let e=this.listItem?.layer;if(!e||e.type==="subtype-sublayer")return null;let t=Rm(e)?e:null,n=e?.parent,i=n!=null&&"type"in n&&n.type==="map-image"?t?.source:null,o="";return i&&n?{layer:n,title:o,sublayerIds:[i.mapLayerId]}:{layer:e,title:o}}get disabled(){let{listItem:e,_legend:t,content:n}=this;return!e||!(Array.isArray(n)&&n.length>1)&&!!t&&(!t.activeLayerInfos?.length||!e.visibleAtCurrentScale||!e.visible)}set disabled(e){this._overrideIfSome("disabled",e)}get icon(){let{image:e}=this,t=this._getFirstWidget();return this._get("icon")??(!e&&t?t.icon:null)}set icon(e){this._overrideIfSome("icon",e)}get title(){return this._get("title")||(this._getFirstWidget()?.label??"")}set title(e){this._override("title",e)}render(){return M("div",{class:"esri-list-item-panel"},this._renderContents())}_renderContent(e){let{_legend:t,disabled:n,open:i}=this;return e&&!n&&i?e==="legend"&&t?M("div",{key:"legend-widget"},t.render()):typeof e=="string"?M("div",{innerHTML:e,key:e}):mp(e)?M("div",{key:"content-widget"},e.render()):e instanceof HTMLElement?M("div",{afterCreate:this._attachToNode,bind:e,key:"content-element"}):null:null}_renderContents(){let{content:e,open:t}=this;return t?Array.isArray(e)?e.map(n=>this._renderContent(n)):this._renderContent(e):null}_createLegend(){return D(this,null,function*(){if(re(this._legend),this._legend=null,!this._canCreateLegend)return;let{default:e}=yield import("./chunk-2FKOTFUB.js"),t=new e(this._legendOptions);this._legend=t})}_attachToNode(e){e.appendChild(this)}_updateLegend(){let e=this._legend;e&&e.set(this._legendOptions)}_getWidget(e){return e==="legend"?this._legend:mp(e)?e:null}_getFirstWidget(){let{content:e}=this;return Array.isArray(e)?e.map(t=>this._getWidget(t)).find(t=>t):this._getWidget(e)}};c([d()],Et.prototype,"_legend",void 0),c([d()],Et.prototype,"_canCreateLegend",null),c([d()],Et.prototype,"_legendOptions",null),c([d()],Et.prototype,"_legendLayerInfo",null),c([d()],Et.prototype,"className",void 0),c([d()],Et.prototype,"content",void 0),c([d()],Et.prototype,"disabled",null),c([d()],Et.prototype,"flowEnabled",void 0),c([d()],Et.prototype,"icon",null),c([d()],Et.prototype,"image",void 0),c([d()],Et.prototype,"listItem",void 0),c([d()],Et.prototype,"open",void 0),c([d()],Et.prototype,"title",null),c([d()],Et.prototype,"visible",void 0),Et=c([b("esri.widgets.LayerList.ListItemPanel")],Et);var Nm=Et;var yl,OE=W.ofType({key:"type",defaultKeyValue:"button",base:fc,typeMap:{button:Cy,toggle:Ty,slider:d1}}),u1=W.ofType(OE),Vm="layer",tu="child-list-mode",kE="hide",be=yl=class extends cc(k){constructor(e){super(e),this.actionsSections=new u1,this.actionsOpen=!1,this.checkPublishStatusEnabled=!1,this.children=new(W.ofType(yl)),this.childrenSortable=!0,this.hidden=!1,this.layer=null,this.listItemCreatedFunction=null,this.listModeDisabled=!1,this.open=!1,this.panel=null,this.parent=null,this.view=null}initialize(){if(this.addHandles([I(()=>[this.layer,this.layer?.listMode,this.listModeDisabled],()=>this._watchLayerProperties(this.layer),ie),I(()=>this.checkPublishStatusEnabled,e=>this._updateChildrenPublishing(e),ie),I(()=>this.view,e=>this._updateChildrenView(e),ie),I(()=>this.panel,e=>this._setListItemOnPanel(e),ie)]),typeof this.listItemCreatedFunction=="function"){let e={item:this};this.listItemCreatedFunction.call(null,e)}}destroy(){this.panel?.destroy(),this.children.destroyAll(),this.view=null}get connectionStatus(){let{layerView:e,publishing:t}=this;if(!t&&e&&"connectionStatus"in e)return e.connectionStatus}get error(){return this.layer?.loadError}get incompatible(){let{layerView:e}=this;return!(!e||!("spatialReferenceSupported"in e))&&!e.spatialReferenceSupported}get layerView(){let{layer:e,view:t}=this;if(!e||!t||e.type==="sublayer")return null;let n=e.type==="subtype-sublayer"?e.parent:e;return t.allLayerViews.find(i=>i.layer===n)??null}castPanel(e){return this.panel?.open&&!e.hasOwnProperty("open")&&(e.open=!0),e?new Nm(e):null}get sortable(){return this.layer?.type!=="knowledge-graph-sublayer"&&this._get("sortable")}set sortable(e){this._set("sortable",e)}get title(){let e=Fn(this,"layer.layer");return(!e||e&&Fn(this,"layer.layer.loaded"))&&Fn(this,"layer.title")||Fn(this,"layer.attributes.title")||""}set title(e){this._override("title",e)}get publishing(){let{layer:e,checkPublishStatusEnabled:t}=this;return t&&e&&"publishingInfo"in e&&e.publishingInfo?.status==="publishing"}get updating(){let{layerView:e,connectionStatus:t,layer:n,publishing:i}=this;return!i&&!t&&(e?e.updating:n?.loadStatus==="loading"||!1)}get visible(){return this.layer?.visible}set visible(e){let t=this.layer;t&&(t.visible=e)}get visibleAtCurrentScale(){return this.layerView?.visibleAtCurrentScale??!0}get visibleAtCurrentTimeExtent(){return this.layerView?.visibleAtCurrentTimeExtent??!0}get visibilityMode(){return c1(this.layer)}clone(){return new yl({actionsSections:this.actionsSections.clone(),actionsOpen:this.actionsOpen,checkPublishStatusEnabled:this.checkPublishStatusEnabled,children:this.children.clone(),childrenSortable:this.childrenSortable,hidden:this.hidden,layer:this.layer,listItemCreatedFunction:this.listItemCreatedFunction,listModeDisabled:this.listModeDisabled,open:this.open,panel:this.panel,parent:this.parent,sortable:this.sortable,title:this.title,view:this.view,visible:this.visible})}_setListItemOnPanel(e){e&&(e.listItem=this)}_updateChildrenPublishing(e){let t=this.children;t&&t.forEach(n=>n.checkPublishStatusEnabled=e)}_updateChildrenView(e){let t=this.children;t&&t.forEach(n=>n.view=e)}_createChildren(e){let{listModeDisabled:t,children:n}=this,i=e.filter(o=>!n.some(r=>r.layer===o));n.addMany(this._createChildItems(i,t))}_destroyChildren(e){let{children:t}=this,n=t.filter(i=>!e.includes(i.layer));t.destroyMany(n)}_sortChildren(e){this.children.sort((t,n)=>e.indexOf(n.layer)-e.indexOf(t.layer))}_destroyAllChildren(){this.removeHandles(tu),this.children.destroyAll()}_watchChildLayerListMode(e){this.removeHandles(tu),this.listModeDisabled||this.addHandles(e.toArray().map(t=>I(()=>t.listMode,()=>this._compileChildren(e))),tu)}_compileChildren(e){let t=this.listModeDisabled?e:e?.filter(n=>$s(n)!==kE);t?.length?(this._createChildren(t),this._destroyChildren(t),this._sortChildren(t),this._watchChildLayerListMode(e)):this._destroyAllChildren()}_watchSublayerChanges(e){e&&this.addHandles(e.on("change",()=>this._compileChildren(e)),Vm)}_initializeChildLayers(e){this._compileChildren(e),this._watchSublayerChanges(e)}_createChildItems(e,t){return e.map(n=>t||Ws(n)?new yl({layer:n,checkPublishStatusEnabled:this.checkPublishStatusEnabled,listItemCreatedFunction:this.listItemCreatedFunction,listModeDisabled:this.listModeDisabled,parent:this,view:this.view}):null).filter(dt).reverse()}_watchLayerProperties(e){if(this.removeHandles(Vm),this.removeHandles(tu),!e)return;if((!this.listModeDisabled&&$s(e))==="hide-children")return void this.children.destroyAll();let t=eu(e);t&&this.addHandles(I(()=>e[t],n=>{e.hasOwnProperty(t)&&this._initializeChildLayers(n)},ie),Vm)}};c([d({type:u1})],be.prototype,"actionsSections",void 0),c([d()],be.prototype,"actionsOpen",void 0),c([d()],be.prototype,"checkPublishStatusEnabled",void 0),c([d({type:W})],be.prototype,"children",void 0),c([d()],be.prototype,"childrenSortable",void 0),c([d({readOnly:!0})],be.prototype,"connectionStatus",null),c([d({readOnly:!0})],be.prototype,"error",null),c([d()],be.prototype,"hidden",void 0),c([d({readOnly:!0})],be.prototype,"incompatible",null),c([d()],be.prototype,"layer",void 0),c([d({readOnly:!0})],be.prototype,"layerView",null),c([d()],be.prototype,"listItemCreatedFunction",void 0),c([d({nonNullable:!0})],be.prototype,"listModeDisabled",void 0),c([d()],be.prototype,"open",void 0),c([d({type:Nm})],be.prototype,"panel",void 0),c([hi("panel")],be.prototype,"castPanel",null),c([d()],be.prototype,"parent",void 0),c([d({value:!0})],be.prototype,"sortable",null),c([d()],be.prototype,"title",null),c([d({readOnly:!0})],be.prototype,"publishing",null),c([d({readOnly:!0})],be.prototype,"updating",null),c([d()],be.prototype,"view",void 0),c([d()],be.prototype,"visible",null),c([d({readOnly:!0})],be.prototype,"visibleAtCurrentScale",null),c([d({readOnly:!0})],be.prototype,"visibleAtCurrentTimeExtent",null),c([d({readOnly:!0})],be.prototype,"visibilityMode",null),be=yl=c([b("esri.widgets.LayerList.ListItem")],be);var vl=be;var nn={view:"view",viewLayers:"view-layers",mapLayers:"map-layers",layerViews:"layer-views",layerListMode:"layer-list-mode"},AE="hide",p1=W.ofType(vl),Mn=class extends Be.EventedAccessor{constructor(e){super(e),this.checkPublishStatusEnabled=!1,this.listItemCreatedFunction=null,this.listModeDisabled=!1,this.operationalItems=new p1,this.view=null}initialize(){this.addHandles([I(()=>this.view?.ready===!0,()=>this._viewHandles(),ie),I(()=>[this.listItemCreatedFunction,this.checkPublishStatusEnabled,this.listModeDisabled],()=>this._recompileList())],nn.view)}destroy(){this._removeAllItems(),this.view=null}get state(){let{view:e}=this;return e?.ready?"ready":e?"loading":"disabled"}get totalItems(){return this.operationalItems.flatten(e=>e.children).length}triggerAction(e,t){e&&!e.disabled&&this.emit("trigger-action",{action:e,item:t})}moveListItem(e,t,n,i){let o=e?.layer;if(!o||o.type==="subtype-sublayer"||o.type==="sublayer")return;let r=this.view?.map?.layers,s=t?Fm(t):r,a=n?Fm(n):r;if(!s||!a)return;let{operationalItems:l}=this,u=t?.children||l,p=n?.children||l,h=a.length-i;e.parent=n||null,u.remove(e),s.remove(o),p.includes(e)||p.add(e,h),a.includes(o)||a.add(o,h),this._compileList()}_createLayerViewHandles(e){this.removeHandles(nn.layerViews),this._compileList(),e&&this.addHandles(e.on("change",()=>this._compileList()),nn.layerViews)}_createMapLayerHandles(e){this.removeHandles(nn.mapLayers),this._compileList(),e&&this.addHandles(e.on("change",()=>this._compileList()),nn.mapLayers)}_createListItem(e){let{view:t,listItemCreatedFunction:n,checkPublishStatusEnabled:i,listModeDisabled:o}=this;return new vl({checkPublishStatusEnabled:i,listModeDisabled:o,layer:e,listItemCreatedFunction:n,view:t})}_removeAllItems(){this.operationalItems.destroyAll()}_getViewableLayers(e){return e?this.listModeDisabled?e:e.filter(t=>$s(t)!==AE):void 0}_watchLayersListMode(e){this.removeHandles(nn.layerListMode),e&&!this.listModeDisabled&&this.addHandles(I(()=>e.filter(t=>"listMode"in t).map(t=>t.listMode).toArray(),()=>this._compileList()),nn.layerListMode)}_compileList(){let e=this.view?.map?.layers;this._watchLayersListMode(e);let t=this._getViewableLayers(e);t?.length?(this._createNewItems(t),this._removeItems(t),this._sortItems(t)):this._removeAllItems()}_createNewItems(e){let{operationalItems:t}=this;e.forEach(n=>{t.some(i=>i.layer===n)||t.add(this._createListItem(n))})}_removeItems(e){let{operationalItems:t}=this,n=[];t.forEach(i=>{i&&e&&e.includes(i.layer)||n.push(i)}),t.destroyMany(n)}_sortItems(e){let{operationalItems:t}=this;t.sort((n,i)=>{let o=e.indexOf(n.layer),r=e.indexOf(i.layer);return o>r?-1:o<r?1:0})}_recompileList(){this._removeAllItems(),this._compileList()}_viewHandles(){let{view:e}=this;this.removeHandles([nn.mapLayers,nn.layerViews,nn.viewLayers]),e?.ready?this.addHandles([I(()=>this.view?.map?.allLayers,t=>this._createMapLayerHandles(t),ie),I(()=>this.view?.allLayerViews,t=>this._createLayerViewHandles(t),ie)],nn.viewLayers):this._removeAllItems()}};c([d()],Mn.prototype,"checkPublishStatusEnabled",void 0),c([d()],Mn.prototype,"listItemCreatedFunction",void 0),c([d({nonNullable:!0})],Mn.prototype,"listModeDisabled",void 0),c([d({type:p1})],Mn.prototype,"operationalItems",void 0),c([d({readOnly:!0})],Mn.prototype,"state",null),c([d()],Mn.prototype,"totalItems",null),c([d()],Mn.prototype,"view",void 0),Mn=c([b("esri.widgets.LayerList.LayerListViewModel")],Mn);var h1=Mn;var bl=e=>PE(e)||FE(e),PE=e=>{if(!("type"in e))return!1;switch(e.type){case"feature":case"geojson":case"csv":case"graphics":case"wfs":case"map-notes":case"oriented-imagery":case"scene":case"building-scene":case"subtype-sublayer":return!0;default:return!1}},FE=e=>{let t=eu(e);if(t!=null&&e.hasOwnProperty(t)&&e[t]!=null){for(let n of e[t])if(bl(n))return!0}return!1},wl=(e,t)=>t!=null&&e!=null&&(t.test(e.title)?"self":!!e.children.some(n=>wl(n,t)!==!1)&&"children");var Hm,Dn=Hm=class extends vl{constructor(e){super(e),this.children=new W,this.parent=null}get enabled(){let{children:e}=this;if(e.length===0)return this.featureSource!=null&&this.featureSource.enabled?"enabled":"disabled";let t=!1,n=!1;for(let i of e){if(i.enabled==="indeterminate")return i.enabled;if(i.enabled==="enabled"?t=!0:i.enabled==="disabled"&&(n=!0),n&&t)return"indeterminate"}return n?"disabled":"enabled"}get childLayerIds(){return this.children.toArray().flatMap(e=>[e.layer.id,...e.childLayerIds])}get featureSource(){let{layer:e,getFeatureSnappingSources:t}=this;return t().find(n=>n.layer===e)}_initializeChildLayers(e){if(!e)return;let t=e.filter(bl);super._initializeChildLayers(t)}_createChildItems(e){return e.map(t=>Ws(t)?new Hm({layer:t,parent:this,view:this.view,getFeatureSnappingSources:this.getFeatureSnappingSources}):null).filter(dt).reverse()}};c([d()],Dn.prototype,"enabled",null),c([d()],Dn.prototype,"children",void 0),c([d()],Dn.prototype,"childLayerIds",null),c([d()],Dn.prototype,"featureSource",null),c([d({constructOnly:!0})],Dn.prototype,"getFeatureSnappingSources",void 0),c([d()],Dn.prototype,"parent",void 0),Dn=Hm=c([b("esri.widgets.support.SnappingControls.SnappingListItem")],Dn);var Ao=class extends h1{constructor(){super(...arguments),this.featureSnappingSources=new W}get operationalItemsFlat(){return this.operationalItems.flatten(e=>e.children)}get selectableItems(){return this.operationalItemsFlat.filter(e=>!e.children?.length)}_compileList(){let e=this.view?.map?.layers;if(!e)return;let t=e.filter(bl);this._watchLayersListMode(t);let n=this._getViewableLayers(t);n?.length?(this._createNewItems(n),this._removeItems(n),this._sortItems(n)):this._removeAllItems()}_createListItem(e){return new Dn({layer:e,view:this.view,getFeatureSnappingSources:()=>this.featureSnappingSources})}};c([d()],Ao.prototype,"featureSnappingSources",void 0),c([d()],Ao.prototype,"operationalItems",void 0),c([d()],Ao.prototype,"operationalItemsFlat",null),c([d()],Ao.prototype,"selectableItems",null),Ao=c([b("esri.widgets.support.SnappingControls.SnappingLayerListViewModel")],Ao);var En=class extends k{constructor(e){super(e),this.layerListViewModel=new Ao,this.snappingOptions=new xo,this.view=null}initialize(){this.addHandles([I(()=>({viewModel:this.layerListViewModel,view:this.view}),({viewModel:e,view:t})=>{e.view=t},ie),I(()=>({viewModel:this.layerListViewModel,sources:this.snappingOptions?.featureSources}),({viewModel:e,sources:t})=>{e.featureSnappingSources=t},ie)])}get allLayersEnabled(){return(this.layerListViewModel?.selectableItems??[]).every(e=>e.enabled==="enabled")}get allLayersDisabled(){return(this.layerListViewModel?.selectableItems??[]).every(e=>!e.enabled)}get layersEnabledCount(){return this.layerListViewModel?.selectableItems?.filter(e=>e.enabled==="enabled").length??0}get state(){return this.snappingOptions?"ready":"disabled"}toggleSnappingForLayers(e,t){e?.forEach(n=>t?this.enableSnappingForLayer(n):this.disableSnappingForLayer(n))}toggleSnappingForAllLayers(e){this.layerListViewModel.selectableItems.forEach(({layer:{id:t}})=>{e?this.enableSnappingForLayer(t):this.disableSnappingForLayer(t)})}enableSnappingForLayer(e){let t=this._findSnappingSourceForLayer(e)??this._makeSnappingSourceForLayer(e);t&&(t.enabled=!0)}disableSnappingForLayer(e){let t=this._findSnappingSourceForLayer(e);t&&(t.enabled=!1)}updateEnabledFeatureSources(e){for(let t of this.snappingOptions.featureSources)Ws(t.layer)&&(t.enabled=e.includes(t.layer.id))}_findSnappingSourceForLayer(e){return this.snappingOptions.featureSources.find(t=>t.layer.id===e)}_makeSnappingSourceForLayer(e){let t=this.layerListViewModel.operationalItemsFlat.find(i=>i.layer.id===e)?.layer;if(!t)throw new ne("snapping-controls:layer-not-found",`cannot enable snapping for layer with id ${e} because no such layer was found in the view`);if(t.type==="group")return;let n=new ml({layer:t});return this.snappingOptions.featureSources.add(n),n}};c([d()],En.prototype,"allLayersEnabled",null),c([d()],En.prototype,"allLayersDisabled",null),c([d({constructOnly:!0})],En.prototype,"layerListViewModel",void 0),c([d()],En.prototype,"layersEnabledCount",null),c([d({type:xo,nonNullable:!0})],En.prototype,"snappingOptions",void 0),c([d()],En.prototype,"state",null),c([d()],En.prototype,"view",void 0),En=c([b("esri.widgets.support.SnappingControls.SnappingControlsViewModel")],En);var m1=En;var on="esri-snapping-controls",xn={base:on,container:`${on}__container`,item:`${on}__item`,toggleBlock:`${on}__toggle-block`,layerListBlock:`${on}__layer-list-block`,layerList:`${on}__layer-list`,layerListFilter:`${on}__layer-list__filter`,layerListButton:`${on}__layer-list__button`,layerListItem:`${on}__layer-list__item`,layerListGroup:`${on}__layer-list__group`,nestedContainer:`${on}__nested-container`},ni=class extends ot{constructor(e,t){super(e,t),this._defaultViewModel=null,this._layerListFilter=null,this.layerListOpen=!0,this.messages=null,this.visibleElements=new Us,this._enableSnappingSwitchChange=r=>{this.snappingOptions.enabled=r},this._featureEnabledSwitchChange=r=>{this.snappingOptions.featureEnabled=r},this._selfEnabledSwitchChange=r=>{this.snappingOptions.selfEnabled=r},this._onToggleLayersButtonClick=r=>{this.viewModel.toggleSnappingForAllLayers(!this.viewModel.allLayersEnabled),requestAnimationFrame(()=>r.target.setFocus())};let{snappingOptions:n,view:i,viewModel:o}=e;this.viewModel=o??(this._defaultViewModel=new m1({snappingOptions:n,view:i}))}normalizeCtorArgs(e){let r=e,{snappingOptions:t,view:n,viewModel:i}=r;return Bf(r,["snappingOptions","view","viewModel"])}destroy(){this.viewModel!==this._defaultViewModel&&(this._defaultViewModel=re(this._defaultViewModel))}loadDependencies(){return Promise.all([Rt({block:()=>import("./chunk-ZKHFZ44S.js"),button:()=>import("./chunk-TK63DTGS.js"),input:()=>import("./chunk-SG5PSDJY.js"),list:()=>import("./chunk-MXFGHPC6.js"),"list-item":()=>import("./chunk-4FFGJW4G.js"),checkbox:()=>import("./chunk-FTZ7XEDG.js")}),Jd()])}get icon(){return"snap-to-point"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get snappingOptions(){return this.viewModel.snappingOptions}set snappingOptions(e){this.viewModel.snappingOptions=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}set viewModel(e){e!==this._get("viewModel")&&(this._defaultViewModel!=null&&this._defaultViewModel===e||(this._defaultViewModel=re(this._defaultViewModel)),this._set("viewModel",e))}render(){let{label:e}=this;return M("div",{"aria-label":e,class:this.classes(xn.base,Ae.widget)},M("div",{class:xn.container},this._renderContent()))}_renderContent(){return[this._renderToggles(),this._renderLayerList()]}_renderToggles(){let{visibleElements:e}=this,t=[e.selfEnabledToggle?this._renderSelfEnabledToggle():null,e.featureEnabledToggle?this._renderFeatureEnabledToggle():null].filter(dt),n=[e.enabledToggle?this._renderEnabledToggle():null,t.length>0?M("div",{class:xn.nestedContainer},t):null].filter(dt);return n.length===0?null:M("calcite-block",{class:xn.toggleBlock,heading:e.header?this.label:"",key:"toggle-block",open:!0},n)}_renderEnabledToggle(){let{messages:e,viewModel:t}=this,{snappingOptions:n}=t;return M(hr,{checked:n.enabled,disabled:this._enabledToggleDisabled,key:`${this.id}__enabled-toggle`,label:e.enableSnapping,onChange:this._enableSnappingSwitchChange})}_renderSelfEnabledToggle(){let{messages:e,viewModel:t}=this,{snappingOptions:n}=t,i=n.enabled&&n.selfEnabled;return M(hr,{checked:i,disabled:this._secondaryElementsDisabled,key:`${this.id}__self-enabled-toggle`,label:e.geometryGuides,onChange:this._selfEnabledSwitchChange})}_renderFeatureEnabledToggle(){let{messages:e,viewModel:t}=this,{snappingOptions:n}=t,i=n.enabled&&n.featureEnabled;return M(hr,{checked:i,disabled:this._secondaryElementsDisabled,key:`${this.id}__feature-enabled-toggle`,label:e.featureToFeature,onChange:this._featureEnabledSwitchChange})}_renderLayerList(){if(!this.visibleElements.layerList)return null;let{messages:e,viewModel:t}=this,n=({target:{value:s}})=>{this._layerListFilter=s===""?null:new RegExp(s,"i")},i=t.layerListViewModel.operationalItems.length>9?M("calcite-input",{class:xn.layerListFilter,clearable:!0,placeholder:e?.searchLayers,onCalciteInputInput:n}):null,o=this._secondaryElementsDisabled,r=this.layerListOpen&&!o;return M("calcite-block",{class:xn.layerListBlock,collapsible:!0,disabled:this._secondaryElementsDisabled,heading:e.snappingLayers,key:"list-block",open:r,onCalciteBlockToggle:s=>this.layerListOpen=s.target.open},i,this._renderToggleLayersButton(),M("calcite-list",{class:xn.layerList,selectionMode:"none"},this._renderLayerListItemCollection(t.layerListViewModel.operationalItems)))}_renderLayerListItemCollection(e){let t=this._layerListFilter;return e.map(n=>{switch(t?wl(n,t):null){case"children":{let i=n.children.filter(o=>wl(o,t)!==!1);return this._renderLayerListItemGroup(n,i)}case"self":case null:return this._renderLayerListItemOrGroup(n);case!1:return wl(n.parent,t)==="self"?this._renderLayerListItemOrGroup(n):null}}).toArray().filter(dt)}_renderToggleLayersButton(){if(!this.visibleElements.layerListToggleLayersButton)return null;let{viewModel:{allLayersEnabled:e},messages:t}=this,n=e?t.disableAllLayers:t.enableAllLayers;return M("calcite-button",{appearance:"transparent",class:xn.layerListButton,label:n,name:"layer-toggle",onclick:this._onToggleLayersButtonClick},n)}_renderLayerListItemOrGroup(e){if(e.children.length)return this._renderLayerListItemGroup(e);let{messages:{untitledLayer:t}}=this,n=e.title||t,i=()=>{this.viewModel.toggleSnappingForLayers([e.layer.id],e.enabled!=="enabled")};return M("calcite-list-item",{class:xn.layerListItem,key:`${this.id}-list-item-${e.uid}`,label:n,onCalciteListItemSelect:o=>{o.stopPropagation(),i()}},M("calcite-checkbox",{checked:e.enabled==="enabled",slot:"actions-start",onCalciteCheckboxChange:i}))}_renderLayerListItemGroup(e,t){let{children:n,title:i}=e,o=i||this.messages.untitledLayer,r=i&&i!==""?i:qg(),s=!!t?.length,a=t??n,l=()=>{this.viewModel.toggleSnappingForLayers(e.childLayerIds,e.enabled!=="enabled")};return M("calcite-list-item",{class:xn.layerListGroup,key:r,label:o,open:s,onCalciteListItemSelect:u=>{u.stopPropagation(),l()}},M("calcite-checkbox",{checked:e.enabled==="enabled",indeterminate:e.enabled==="indeterminate",slot:"actions-start",onCalciteCheckboxChange:l}),M("calcite-list",null,this._renderLayerListItemCollection(a)))}get _enabledToggleDisabled(){let e=this.snappingOptions;return e.enabledToggled||e.forceDisabled}get _secondaryElementsDisabled(){return this._enabledToggleDisabled||!this.snappingOptions.enabled}};c([d()],ni.prototype,"_defaultViewModel",void 0),c([d()],ni.prototype,"_layerListFilter",void 0),c([d()],ni.prototype,"label",null),c([d({type:Boolean,nonNullable:!0})],ni.prototype,"layerListOpen",void 0),c([d(),ut("esri/widgets/support/SnappingControls/t9n/SnappingControls")],ni.prototype,"messages",void 0),c([d()],ni.prototype,"snappingOptions",null),c([d()],ni.prototype,"view",null),c([d()],ni.prototype,"viewModel",null),c([d({type:Us,nonNullable:!0})],ni.prototype,"visibleElements",void 0),c([d()],ni.prototype,"_enabledToggleDisabled",null),c([d()],ni.prototype,"_secondaryElementsDisabled",null),ni=c([b("esri.widgets.support.SnappingControls")],ni);var f1=ni;var pt="esri-sketch",ht={base:pt,verticalLayout:`${pt}--vertical`,horizontalLayout:`${pt}--horizontal`,panel:`${pt}__panel`,infoPanel:`${pt}__info-panel`,section:`${pt}__section`,toolSection:`${pt}__tool-section`,infoSection:`${pt}__info-section`,infoCountSection:`${pt}__info-count-section`,menuContainer:`${pt}__menu-container`,menuHeader:`${pt}__menu-header`,menuTitle:`${pt}__menu-title`,featureCountBadge:`${pt}__feature-count-badge`,featureCountText:`${pt}__feature-count-text`,featureCountNumber:`${pt}__feature-count-number`,actionToggle:`${pt}__action-toggle`,actionToggleOn:`${pt}__action-toggle--on`,actionTitle:`${pt}__item-action-title`,actionIcon:`${pt}__item-action-icon`},Le=class extends ot{constructor(e,t){super(e,t),this._activeCreateOptions=null,this._menuOpen=!1,this._selectionToolbar=null,this._viewModelHandlesGroup=null,this.availableCreateTools=["point","polyline","polygon","rectangle","circle"],this.creationMode="continuous",this.layout="horizontal",this.messages=null,this.messagesCommon=null,this.visibleElements=new Om,this._activateCreateTool=this._activateCreateTool.bind(this),this.viewModel=e?.viewModel||new Jw}initialize(){let{layer:e,view:t}=this,n=new a1({view:t?.type==="2d"?t:null,sources:e?[e]:null});this.addHandles([I(()=>this.viewModel,i=>{this._viewModelHandlesGroup=Me(this._viewModelHandlesGroup),i&&(this._viewModelHandlesGroup=Zr([i.on("create",o=>{this.scheduleRender(),this._onCreateOperation(o)}),i.on("update",()=>this.scheduleRender()),i.on("delete",o=>this.emit("delete",o)),i.on("undo",()=>this.scheduleRender()),i.on("redo",()=>this.scheduleRender()),I(()=>i.layer,o=>{this._selectionToolbar&&(this._selectionToolbar.sources=o?[o]:null)}),I(()=>i.view,o=>{this._selectionToolbar&&(this._selectionToolbar.view=o?.type==="2d"?o:null)}),I(()=>i.state,()=>this.notifyChange("state"))]))},ke),pi(()=>n.activeToolInfo,()=>this.viewModel.cancel()),n.on("complete",i=>this._onSelectionOperationComplete(i)),I(()=>{let{selectionTools:i}=this.visibleElements;return{lassoTool:!!i?.["lasso-selection"],rectangleTool:!!i?.["rectangle-selection"]}},i=>{Object.assign(n.visibleElements,i)},ke)]),this._selectionToolbar=n}loadDependencies(){return Rt({action:()=>import("./chunk-EANCIRMG.js"),icon:()=>import("./chunk-4HUBSTEF.js")})}destroy(){this._selectionToolbar?.destroy(),this._viewModelHandlesGroup=Me(this._viewModelHandlesGroup)}get activeTool(){let e=this._selectionToolbar?.activeToolInfo;if(e)switch(e.toolName){case"lasso":return"lasso-selection";case"rectangle":return"rectangle-selection";case"default":return"custom-selection"}return this.viewModel.activeTool}get createGraphic(){return this.viewModel.createGraphic}get defaultCreateOptions(){return this.viewModel.defaultCreateOptions}set defaultCreateOptions(e){this.viewModel.defaultCreateOptions=e}get defaultUpdateOptions(){return this.viewModel.defaultUpdateOptions}set defaultUpdateOptions(e){this.viewModel.defaultUpdateOptions=e}get icon(){return"pencil"}set icon(e){this._overrideIfSome("icon",e)}get label(){return this.messages?.widgetLabel??""}set label(e){this._overrideIfSome("label",e)}get labelOptions(){return this.viewModel.labelOptions}set labelOptions(e){this.viewModel.labelOptions=e}get layer(){return this.viewModel.layer}set layer(e){this.viewModel.layer=e}get snappingOptions(){return this.viewModel.snappingOptions}set snappingOptions(e){this.viewModel.snappingOptions=e}get state(){return this._selectionToolbar?.activeToolInfo?"active":this.viewModel.state}get tooltipOptions(){return this.viewModel.tooltipOptions}set tooltipOptions(e){this.viewModel.tooltipOptions=e}get updateGraphics(){return this.viewModel.updateGraphics}get valueOptions(){return this.viewModel.valueOptions}set valueOptions(e){this.viewModel.valueOptions=e}get view(){return this.viewModel.view}set view(e){this.viewModel.view=e}set viewModel(e){let t=this._get("viewModel");e!==t&&(t&&re(t),this._set("viewModel",e))}get _effectiveAvailableCreateTools(){let{availableCreateTools:e,visibleElements:t}=this;return e?.filter(n=>!!t.createTools?.[n])}create(e,t){return this._activeCreateOptions=t||null,Wi(this.viewModel.create(e,t))}update(e,t){return Wi(this.viewModel.update(e,t))}complete(){this.viewModel.complete()}cancel(){this._selectionToolbar?.cancel(),this.viewModel.cancel()}undo(){this.viewModel.undo(),this.view?.focus()}redo(){this.viewModel.redo(),this.view?.focus()}delete(){this.viewModel.delete()}duplicate(){return this.viewModel.duplicate()}render(){let{label:e,layout:t,viewModel:{state:n}}=this;return M("div",{"aria-label":e,class:this.classes(ht.base,Ae.widget,{[Ae.disabled]:n==="disabled",[ht.verticalLayout]:t==="vertical",[ht.horizontalLayout]:t==="horizontal"})},M("div",{class:ht.panel,role:"toolbar"},this._renderTopPanelContents()),M("div",{class:this.classes(ht.panel,ht.infoPanel)},this._renderInfoPanelContents()))}_renderTopPanelContents(){let e=this.classes(ht.section,ht.toolSection),{_effectiveAvailableCreateTools:t,visibleElements:n,viewModel:i}=this;return[i.updateOnGraphicClick||this._selectionToolbar?.visibleToolCount?M("div",{class:e,key:"selection-button-container",role:"menu"},this._renderDefaultSelectionButton(),this._renderSelectionToolbar()):null,t?.length?M("div",{class:e,role:"menu"},this._renderDrawActions()):null,n.undoRedoMenu?M("div",{class:e,key:"undo-redo-menu-button-container",role:"menu"},this._renderUndoRedoMenuButtons()):null,n.settingsMenu?M("div",{class:ht.section,key:"settings-menu-button-container"},this._renderSettingsMenuButton()):null]}_renderInfoPanelContents(){return this._menuOpen?this._renderSettingsMenu():this.updateGraphics.length?[M("div",{class:this.classes(ht.section,ht.infoSection,ht.infoCountSection),key:"feature-count-container"},this._renderFeatureCount()),M("div",{class:this.classes(ht.section,ht.infoSection),key:"delete-button-container"},this._renderDuplicateButton(),this._renderDeleteButton())]:void 0}_renderSettingsMenu(){let{messagesCommon:e,snappingOptions:t,view:n,viewModel:i,visibleElements:o}=this,r={directionModePicker:o.directionModePicker,labelsToggle:o.labelsToggle,tooltipsToggle:o.tooltipsToggle};return M("div",{class:ht.menuContainer,"data-testid":"menu",key:"settings-menu-container",role:"menu"},M("header",{class:ht.menuHeader,key:"settings-menu-header"},M("span",{class:ht.menuTitle},e.settings)),a_(r)?M(l1,{sketchOptions:i.sketchOptions,viewType:n?.type,visibleElements:r}):void 0,o.snappingControls&&n&&t?M(f1,{snappingOptions:t,view:n,visibleElements:o.snappingControlsElements}):void 0)}_renderFeatureCount(){let{layout:e,messages:t,updateGraphics:{length:n}}=this,i=i_(t.selectedCount,{count:n});return M("div",{"aria-label":i,class:ht.featureCountBadge},M("span",{class:ht.featureCountNumber},e==="vertical"?n:i))}_renderDuplicateButton(){if(!this.visibleElements.duplicateButton)return;let e=this.messages,t=this.updateGraphics.length>1?e.duplicateFeatures:e.duplicateFeature;return M("calcite-action",{bind:this,onclick:this._onDuplicateSelect,scale:"s",text:t,title:t},M("calcite-icon",{icon:"copy",scale:"s"}))}_renderDeleteButton(){let e=this.messages,t=this.updateGraphics.length>1?e.deleteFeatures:e.deleteFeature;return M("calcite-action",{bind:this,onclick:this.delete,scale:"s",text:t,title:t},M("calcite-icon",{icon:"trash",scale:"s"}))}_renderDefaultSelectionButton(){if(!this.viewModel.updateOnGraphicClick)return;let{messages:e,state:t}=this,n=e.selectFeature;return M("calcite-action",{active:t==="ready",bind:this,disabled:t==="disabled",onclick:this._activateDefaultSelectTool,scale:"s",text:n,title:n},M("calcite-icon",{icon:"cursor",scale:"s"}))}_renderSelectionToolbar(){if(this.view?.type==="2d"&&this._selectionToolbar)return this._selectionToolbar.render()}_renderDrawActions(){let{messages:e}=this;return this._effectiveAvailableCreateTools?.map(t=>{switch(t){case"point":return this._renderAction(t,e.drawPoint,"pin");case"polyline":return this._renderAction(t,e.drawPolyline,"line");case"polygon":return this._renderAction(t,e.drawPolygon,"polygon");case"rectangle":return this._renderAction(t,e.drawRectangle,"rectangle");case"circle":return this._renderAction(t,e.drawCircle,"circle");default:return}})}_renderAction(e,t,n){return M("calcite-action",{active:this.activeTool===e,bind:this,disabled:this.state==="disabled",onclick:()=>this._activateCreateTool(e),scale:"s",text:t,title:t},M("calcite-icon",{icon:n,scale:"s"}))}_renderUndoRedoMenuButtons(){return[this._renderUndoButton(),this._renderRedoButton()]}_renderUndoButton(){let e=this.messages.undo;return M("calcite-action",{bind:this,disabled:!this.viewModel.canUndo()||this.state==="disabled",onclick:this.undo,scale:"s",text:e,title:e},M("calcite-icon",{icon:ba(this.container)?"redo":"undo",scale:"s"}))}_renderRedoButton(){let e=this.messages.redo;return M("calcite-action",{bind:this,disabled:!this.viewModel.canRedo()||this.state==="disabled",onclick:this.redo,scale:"s",text:e,title:e},M("calcite-icon",{icon:ba(this.container)?"undo":"redo",scale:"s"}))}_renderSettingsMenuButton(){let e=this.messagesCommon.settings;return M("calcite-action",{active:this._menuOpen,bind:this,"data-testid":"settings-menu-action",disabled:this.state==="disabled",onclick:this._toggleMenu,scale:"s",text:e,title:e},M("calcite-icon",{icon:"gear",scale:"s"}))}_activateCreateTool(e){this.activeTool!==e?(this._selectionToolbar?.cancel(),this.create(e)):this.cancel()}_onCreateOperation(e){if(e.state!=="complete")return;let{creationMode:t}=this,{type:n}=e;if(n==="create"){let{tool:i,graphic:o}=e,r=this._activeCreateOptions;this._activeCreateOptions=null,t==="continuous"?this.create(i,r):t==="update"&&this.update([o])}}_toggleMenu(){this._menuOpen=!this._menuOpen,this.scheduleRender()}_onDuplicateSelect(){let e=this.duplicate(),t=this.viewModel.activeTool;t!=="transform"&&t!=="reshape"||this.update(e,{tool:t})}_onSelectionOperationComplete(e){let{viewModel:{defaultUpdateOptions:t}}=this,{selection:n}=e;if(!e.aborted&&n.length){let i=t.tool,o=n.length>1&&i==="reshape"?"transform":i;this.update(n,B(v({},t),{tool:o}))}this.notifyChange("state")}_activateDefaultSelectTool(){this.cancel(),this.view?.focus()}};c([d()],Le.prototype,"activeTool",null),c([d({cast:e=>{if(!e?.length)return null;let t=new Set(["point","polyline","polygon","rectangle","circle"]);return e.filter(n=>t.has(n))}})],Le.prototype,"availableCreateTools",void 0),c([d({readOnly:!0})],Le.prototype,"createGraphic",null),c([d()],Le.prototype,"creationMode",void 0),c([d()],Le.prototype,"defaultCreateOptions",null),c([d()],Le.prototype,"defaultUpdateOptions",null),c([d()],Le.prototype,"icon",null),c([d()],Le.prototype,"label",null),c([d()],Le.prototype,"labelOptions",null),c([d()],Le.prototype,"layer",null),c([d({type:["horizontal","vertical"]})],Le.prototype,"layout",void 0),c([d(),ut("esri/widgets/Sketch/t9n/Sketch")],Le.prototype,"messages",void 0),c([d(),ut("esri/t9n/common")],Le.prototype,"messagesCommon",void 0),c([d()],Le.prototype,"snappingOptions",null),c([d()],Le.prototype,"state",null),c([d()],Le.prototype,"tooltipOptions",null),c([d({readOnly:!0})],Le.prototype,"updateGraphics",null),c([d({type:xc,nonNullable:!0})],Le.prototype,"valueOptions",null),c([d()],Le.prototype,"view",null),c([d(),Zy(["create","update","undo","redo"])],Le.prototype,"viewModel",null),c([d({type:Om,nonNullable:!0})],Le.prototype,"visibleElements",void 0),c([d()],Le.prototype,"_effectiveAvailableCreateTools",null),Le=c([b("esri.widgets.Sketch")],Le);var g1=Le;var Ri=(()=>{let t=class t{constructor(){this.showLayersOrWidgetsSubject=new Ne({type:S.PlatformLayer,visible:!0}),this.showLayersOrWidgets$=this.showLayersOrWidgetsSubject.asObservable(),this.setMapFiltersSubject=new Ne(null),this.setMapFilters$=this.setMapFiltersSubject.asObservable(),this.platformFilters={layerOrWidget:S.PlatformLayer,details:new fr},this.resetPlatformFiltersSubject=new Ne(null),this.resetPlatformFilters$=this.resetPlatformFiltersSubject.asObservable(),this.updateFiltersListSubject=new Ne(null),this.updateFiltersList$=this.updateFiltersListSubject.asObservable(),this.downloadFilteredDataSubject=new Ne(null),this.downloadFilteredData$=this.downloadFilteredDataSubject.asObservable(),this.hurricaneFilters={layerOrWidget:S.HistoricHurricaneTrackLayer,details:new fr},this.rHFilters={layerOrWidget:S.RecentHGroupLayer,details:new fr},this.hConeLayerFilters={layerOrWidget:S.HHConeLayer,details:new fr},this.HLayerListFromMapSubject=new Ne(null),this.hLayerListFromMap$=this.HLayerListFromMapSubject.asObservable(),this.pipelineFilters={layerOrWidget:S.PipelineLayer,details:new fr},this.resetPipelineFiltersSubject=new Ne(null),this.resetPipelineFilters$=this.resetPipelineFiltersSubject.asObservable(),this.FilterListFromMapSubject=new Ne({type:E.None,value:[]}),this.filterListFromMap$=this.FilterListFromMapSubject.asObservable()}ShowHideLayersOrWidgets(i){this.showLayersOrWidgetsSubject.next(i)}setMapFilterValue(i,o){let r=this.getLayerOrWidgetFromFilterType(i),s=this.getFilterObjectFromLayerOrWidgetType(r);if(s==null)return;let a=!1;if(o.length<1?s.details.has(i)&&(s.details.delete(i),a=!0):(s.details.set(i,o),a=!0),!!a)switch(this.setMapFiltersSubject.next(s),r){case S.PlatformLayer:this.updatePlatformFilterList(i,o);break;case S.HistoricHurricaneTrackLayer:this.updateHurricaneFilterList(i,o);break}}updatePlatformFilterList(i,o){if(i===E.Area_Code){let r=new Map;r.set(E.Area_Code,o),this.updateFiltersListSubject.next({type:E.Block_Number,value:r})}}clearPlatformFilters(){let i=this.platformFilters.details.get(E.Area_Code);this.platformFilters.details.clear(),this.setMapFiltersSubject.next(this.platformFilters),this.resetPlatformFiltersSubject.next(!0),i&&i.length>0&&this.updateFiltersListSubject.next({type:E.Block_Number,value:null})}downloadFilteredData(i){this.downloadFilteredDataSubject.next(i)}updateHurricaneFilterList(i,o){if(i===E.HurricaneYear){if(!this.hurricaneFilters.details.has(E.HurricaneName)){let r=new Map;r.set(E.HurricaneYear,o),this.updateFiltersListSubject.next({type:E.HurricaneName,value:r})}if(o.length<1){let r=null;this.hurricaneFilters.details.has(E.HurricaneName)&&(r=new Map,r.set(E.HurricaneName,this.hurricaneFilters.details.get(E.HurricaneName))),this.updateFiltersListSubject.next({type:E.HurricaneYear,value:r})}}else if(i===E.HurricaneName){if(!this.hurricaneFilters.details.has(E.HurricaneYear)){let r=new Map;r.set(E.HurricaneName,o),this.updateFiltersListSubject.next({type:E.HurricaneYear,value:r})}if(o.length<1){let r=null;this.hurricaneFilters.details.has(E.HurricaneYear)&&(r=new Map,r.set(E.HurricaneYear,this.hurricaneFilters.details.get(E.HurricaneYear))),this.updateFiltersListSubject.next({type:E.HurricaneName,value:r})}}this.updateFiltersListSubject.next({type:E.HConeAdvisory,value:this.hurricaneFilters.details})}clearHurricaneFilters(){let i=this.hurricaneFilters.details.get(E.HurricaneYear),o=this.hurricaneFilters.details.get(E.HurricaneName);this.hurricaneFilters.details.clear(),this.hConeLayerFilters.details.clear(),this.setMapFiltersSubject.next(this.hurricaneFilters),this.setMapFiltersSubject.next(this.hConeLayerFilters),i&&i.length>0&&this.updateFiltersListSubject.next({type:E.HurricaneName,value:null}),o&&o.length>0&&this.updateFiltersListSubject.next({type:E.HurricaneYear,value:null})}clearRHFilters(){this.rHFilters.details.clear(),this.setMapFiltersSubject.next(this.rHFilters)}setHLayerListFromMap(i){this.HLayerListFromMapSubject.next(i)}clearPipelineFilters(){this.pipelineFilters.details.clear(),this.setMapFiltersSubject.next(this.pipelineFilters),this.resetPipelineFiltersSubject.next(!0)}setFilterListFromMap(i){this.FilterListFromMapSubject.next(i)}getLayerOrWidgetFromFilterType(i){switch(i){case E.ActiveStatus:case E.Area_Code:case E.Block_Number:case E.Bus_Asc_Name:case E.operatorName:case E.Complex_Id_Num:case E.Install_Date:case E.Removal_Date:case E.Water_Depth__feet_:case E.platformName:return S.PlatformLayer;case E.HurricaneName:case E.HurricaneYear:return S.HistoricHurricaneTrackLayer;case E.PipelineOperator:case E.PipelineSegmentNumber:case E.PipelineStatusCode:return S.PipelineLayer;case E.HConeAdvisory:return S.HHConeLayer;case E.RH_STORMNAME:return S.RecentHGroupLayer;default:return S.None}}getFilterObjectFromType(i){let o=this.getLayerOrWidgetFromFilterType(i);return this.getFilterObjectFromLayerOrWidgetType(o)}getFilterObjectFromLayerOrWidgetType(i){switch(i){case S.PlatformLayer:return this.platformFilters;case S.HistoricHurricaneTrackLayer:return this.hurricaneFilters;case S.HHConeLayer:return this.hConeLayerFilters;case S.PipelineLayer:return this.pipelineFilters;case S.RecentHGroupLayer:return this.rHFilters;default:return null}}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),E=function(e){return e.None="None",e.ActiveStatus="ActiveStatus",e.Area_Code="Area_Code",e.Block_Number="Block_Number",e.Bus_Asc_Name="Bus_Asc_Name",e.operatorName="operatorName",e.platformName="PlatformName",e.Water_Depth__feet_="Water_Depth__feet_",e.Install_Date="Install_Date",e.Removal_Date="Removal_Date",e.Complex_Id_Num="Complex_Id_Num",e.HurricaneYear="year",e.HurricaneName="NAME",e.PipelineSegmentNumber="SEGMENT_NU",e.PipelineOperator="SDE_COMPAN",e.PipelineStatusCode="STATUS_COD",e.HConeAdvisory="AdvisoryNo",e.RH_STORMNAME="STORMNAME",e}(E||{}),Bm=function(e){return e.Active="Active",e.Removed="Removed",e}(Bm||{}),S=function(e){return e.PlatformLayer="PlatformLayer",e.BSEEPlatformLayer="BSEEPlatformLayer",e.Legend="Legend",e.AreaLayer="AreaLayer",e.BLockLayer="BLockLayer",e.HistoricHurricaneTrackLayer="HistoricHurricaneTrackLayer",e.HHConeLayer="HHConeLayer",e.ForecastGroupLayer="ForecastGroupLayer",e.PipelineLayer="PipelineLayer",e.ForecastSubLayerAll="ForecastSubLayerAll",e.ForecastSubLayer0="ForecastSubLayer0",e.ForecastSubLayer1="ForecastSubLayer1",e.ForecastSubLayer2="ForecastSubLayer2",e.ForecastSubLayer3="ForecastSubLayer3",e.ForecastSubLayer4="ForecastSubLayer4",e.ForecastSubLayer5="ForecastSubLayer5",e.ForecastSubLayer7="ForecastSubLayer7",e.ForecastSubLayer8="ForecastSubLayer8",e.ForecastSubLayer9="ForecastSubLayer9",e.ForecastSubLayer10="ForecasSubtLayer10",e.ForecastSubLayer11="ForecasSubtLayer11",e.RecentHGroupLayer="RecentHGroupLayer",e.RecentHSubLayer0="RecentHSubLayer0",e.RecentHSubLayer1="RecentHSubLayer1",e.RecentHSubLayer2="RecentHSubLayer2",e.None="None",e.Sketch="Sketch",e}(S||{}),fr=class extends Map{};var RE=["overlay"],LE=["*"];function NE(e,t){e&1&&V(0,"div")}function VE(e,t){if(e&1&&(_(0,"div"),G(1,NE,1,0,"div",6),y()),e&2){let n=T(2);Si(n.spinner.class),wi("color",n.spinner.color),g(),C("ngForOf",n.spinner.divArray)}}function HE(e,t){if(e&1&&(V(0,"div",7),Gr(1,"safeHtml")),e&2){let n=T(2);C("innerHTML",Vu(1,1,n.template),ha)}}function BE(e,t){if(e&1&&(_(0,"div",2,0),G(2,VE,2,5,"div",3)(3,HE,2,3,"div",4),_(4,"div",5),Hr(5),y()()),e&2){let n=T();wi("background-color",n.spinner.bdColor)("z-index",n.spinner.zIndex)("position",n.spinner.fullScreen?"fixed":"absolute"),C("@.disabled",n.disableAnimation)("@fadeIn","in"),g(2),C("ngIf",!n.template),g(),C("ngIf",n.template),g(),wi("z-index",n.spinner.zIndex)}}var GE={"ball-8bits":16,"ball-atom":4,"ball-beat":3,"ball-circus":5,"ball-climbing-dot":4,"ball-clip-rotate":1,"ball-clip-rotate-multiple":2,"ball-clip-rotate-pulse":2,"ball-elastic-dots":5,"ball-fall":3,"ball-fussion":4,"ball-grid-beat":9,"ball-grid-pulse":9,"ball-newton-cradle":4,"ball-pulse":3,"ball-pulse-rise":5,"ball-pulse-sync":3,"ball-rotate":1,"ball-running-dots":5,"ball-scale":1,"ball-scale-multiple":3,"ball-scale-pulse":2,"ball-scale-ripple":1,"ball-scale-ripple-multiple":3,"ball-spin":8,"ball-spin-clockwise":8,"ball-spin-clockwise-fade":8,"ball-spin-clockwise-fade-rotating":8,"ball-spin-fade":8,"ball-spin-fade-rotating":8,"ball-spin-rotate":2,"ball-square-clockwise-spin":8,"ball-square-spin":8,"ball-triangle-path":3,"ball-zig-zag":2,"ball-zig-zag-deflect":2,cog:1,"cube-transition":2,fire:3,"line-scale":5,"line-scale-party":5,"line-scale-pulse-out":5,"line-scale-pulse-out-rapid":5,"line-spin-clockwise-fade":8,"line-spin-clockwise-fade-rotating":8,"line-spin-fade":8,"line-spin-fade-rotating":8,pacman:6,"square-jelly-box":2,"square-loader":1,"square-spin":1,timer:1,"triangle-skew-spin":1},Gm={BD_COLOR:"rgba(51,51,51,0.8)",SPINNER_COLOR:"#fff",Z_INDEX:99999},jm="primary",gr=class e{constructor(t){Object.assign(this,t)}static create(t){return!t?.template&&!t?.type&&console.warn(`[ngx-spinner]: Property "type" is missed. Please, provide animation type to <ngx-spinner> component
        and ensure css is added to angular.json file`),new e(t)}},zm=(()=>{let t=class t{constructor(){this.spinnerObservable=new Ne(null)}getSpinner(i){return this.spinnerObservable.asObservable().pipe(Tt(o=>o&&o.name===i))}show(i=jm,o){return new Promise((r,s)=>{setTimeout(()=>{o&&Object.keys(o).length?(o.name=i,this.spinnerObservable.next(new gr(B(v({},o),{show:!0}))),r(!0)):(this.spinnerObservable.next(new gr({name:i,show:!0})),r(!0))},10)})}hide(i=jm,o=10){return new Promise((r,s)=>{setTimeout(()=>{this.spinnerObservable.next(new gr({name:i,show:!1})),r(!0)},o)})}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),_1=new Ie("NGX_SPINNER_CONFIG"),jE=(()=>{let t=class t{constructor(i){this._sanitizer=i}transform(i){if(i)return this._sanitizer.bypassSecurityTrustHtml(i)}};t.\u0275fac=function(o){return new(o||t)(H(Aa,16))},t.\u0275pipe=Gl({name:"safeHtml",type:t,pure:!0,standalone:!0});let e=t;return e})(),y1=(()=>{let t=class t{constructor(i,o,r,s){this.spinnerService=i,this.changeDetector=o,this.elementRef=r,this.globalConfig=s,this.disableAnimation=!1,this.spinner=new gr,this.ngUnsubscribe=new xe,this.setDefaultOptions=()=>{let{type:a}=this.globalConfig??{};this.spinner=gr.create({name:this.name,bdColor:this.bdColor,size:this.size,color:this.color,type:this.type??a,fullScreen:this.fullScreen,divArray:this.divArray,divCount:this.divCount,show:this.show,zIndex:this.zIndex,template:this.template,showSpinner:this.showSpinner})},this.bdColor=Gm.BD_COLOR,this.zIndex=Gm.Z_INDEX,this.color=Gm.SPINNER_COLOR,this.size="large",this.fullScreen=!0,this.name=jm,this.template=null,this.showSpinner=!1,this.divArray=[],this.divCount=0,this.show=!1}initObservable(){this.spinnerService.getSpinner(this.name).pipe(tt(this.ngUnsubscribe)).subscribe(i=>{this.setDefaultOptions(),Object.assign(this.spinner,i),i.show&&this.onInputChange(),this.changeDetector.detectChanges()})}ngOnInit(){this.setDefaultOptions(),this.initObservable()}isSpinnerZone(i){return i===this.elementRef.nativeElement.parentElement?!0:i.parentNode&&this.isSpinnerZone(i.parentNode)}ngOnChanges(i){for(let o in i)if(o){let r=i[o];if(r.isFirstChange())return;typeof r.currentValue<"u"&&r.currentValue!==r.previousValue&&r.currentValue!==""&&(this.spinner[o]=r.currentValue,o==="showSpinner"&&(r.currentValue?this.spinnerService.show(this.spinner.name,this.spinner):this.spinnerService.hide(this.spinner.name)),o==="name"&&this.initObservable())}}getClass(i,o){this.spinner.divCount=GE[i],this.spinner.divArray=Array(this.spinner.divCount).fill(0).map((s,a)=>a);let r="";switch(o.toLowerCase()){case"small":r="la-sm";break;case"medium":r="la-2x";break;case"large":r="la-3x";break;default:break}return"la-"+i+" "+r}onInputChange(){this.spinner.class=this.getClass(this.spinner.type,this.spinner.size)}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete()}};t.\u0275fac=function(o){return new(o||t)(H(zm),H(Gt),H(ze),H(_1,8))},t.\u0275cmp=ee({type:t,selectors:[["ngx-spinner"]],viewQuery:function(o,r){if(o&1&&Ft(RE,5),o&2){let s;pe(s=he())&&(r.spinnerDOM=s.first)}},inputs:{bdColor:"bdColor",size:"size",color:"color",type:"type",fullScreen:"fullScreen",name:"name",zIndex:"zIndex",template:"template",showSpinner:"showSpinner",disableAnimation:"disableAnimation"},standalone:!0,features:[Zt,ae],ngContentSelectors:LE,decls:1,vars:1,consts:[["overlay",""],["class","ngx-spinner-overlay",3,"background-color","z-index","position",4,"ngIf"],[1,"ngx-spinner-overlay"],[3,"class","color",4,"ngIf"],[3,"innerHTML",4,"ngIf"],[1,"loading-text"],[4,"ngFor","ngForOf"],[3,"innerHTML"]],template:function(o,r){o&1&&(Vr(),G(0,BE,6,12,"div",1)),o&2&&C("ngIf",r.spinner.show)},dependencies:[jE,$i,lo],styles:[".ngx-spinner-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%}.ngx-spinner-overlay[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:not(.loading-text){top:50%;left:50%;margin:0;position:absolute;transform:translate(-50%,-50%)}.loading-text[_ngcontent-%COMP%]{position:absolute;top:60%;left:50%;transform:translate(-50%,-60%)}"],data:{animation:[Zl("fadeIn",[$r("in",co({opacity:1})),Wr(":enter",[co({opacity:0}),Ur(300)]),Wr(":leave",Ur(200,co({opacity:0})))])]},changeDetection:0});let e=t;return e})(),v1=(()=>{let t=class t{static forRoot(i){return{ngModule:t,providers:[{provide:_1,useValue:i}]}}};t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=Bt({type:t}),t.\u0275inj=Ht({imports:[Te]});let e=t;return e})();var w1=WS(b1());var S1=(()=>{let t=class t{constructor(){}ExportDataExcel(i,o,r){let s=[];s.push(o),import("./chunk-AAQMBHOX.js").then(a=>{let l=a.utils.json_to_sheet([]);a.utils.sheet_add_aoa(l,s),this.autoFitColumns(l,s),a.utils.sheet_add_json(l,i,{origin:"A2",skipHeader:!0});let u={Sheets:{data:l},SheetNames:["data"]},p=a.write(u,{bookType:"xlsx",type:"array"});this.saveAsExcelFile(p,r)})}autoFitColumns(i,o){let r=[];o.map(a=>{a.map(l=>{let u=l.length>10?l.length:10;r[l]=r[l]>=u?r[l]:u})});let s=[];Object.keys(r).map(a=>{let l=r[a]===null?10:r[a];s.push({width:l})}),i["!cols"]=s}saveAsExcelFile(i,o){let r="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet;charset=UTF-8",s=".xlsx",a=new Blob([i],{type:r});w1.saveAs(a,o+"_"+new Date().toLocaleDateString()+s)}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var $E=["mapViewNode"],C1=(()=>{let t=class t{constructor(i,o,r,s){this.mapService=i,this.spinnerService=o,this.excelService=r,this.toastr=s,this.view=null,this.mapReady=!1,this.forecastHurricaneLayers=[],this.forecastLayers=[],this.defaultConditionForLayer={[S.PlatformLayer]:"Latitude <> 0 AND Longitude <> 0",[S.BSEEPlatformLayer]:void 0,[S.Legend]:void 0,[S.AreaLayer]:void 0,[S.BLockLayer]:void 0,[S.HistoricHurricaneTrackLayer]:"1=0",[S.None]:void 0,[S.PipelineLayer]:"1=1",[S.HHConeLayer]:"1=0",[S.ForecastGroupLayer]:"1=1",[S.ForecastSubLayer0]:void 0,[S.ForecastSubLayer1]:void 0,[S.ForecastSubLayer2]:void 0,[S.ForecastSubLayer3]:void 0,[S.ForecastSubLayer4]:void 0,[S.ForecastSubLayer5]:void 0,[S.ForecastSubLayer7]:void 0,[S.ForecastSubLayer8]:void 0,[S.ForecastSubLayer9]:void 0,[S.ForecastSubLayer10]:void 0,[S.ForecastSubLayer11]:void 0,[S.ForecastSubLayerAll]:void 0,[S.Sketch]:void 0,[S.RecentHGroupLayer]:void 0,[S.RecentHSubLayer0]:void 0,[S.RecentHSubLayer1]:void 0,[S.RecentHSubLayer2]:void 0},this.recentHurricaneLayers=[],this.recentHLayersDetails=[]}initializeMap(){let i=this.mapViewEl.nativeElement;ju.apiKey="AAPKd618a22668304d46bef2738772b6593bfCyEJX_kFpN0SYkRDaQSMcopf5s2JUROU6_-R7hRCsCZzlJLDciyRkfSlNltWu6a",ju.log.level="error";let o=new nd({basemap:"arcgis-topographic"});this.map=o,this.view=new Fw({container:i,map:o,zoom:6,popup:{defaultPopupTemplateEnabled:!0},center:[-89.052,24.96]}),this.view.constraints={minZoom:3};let r=new Bw({view:this.view});this.view.ui.add(r,{position:"bottom-left"}),this.legend=new E0({view:this.view,visible:!0}),this.view.ui.add(this.legend,"bottom-right"),this.SetAreaLayer(),this.SetBlockLayer(),this.SetBSEEPlatformLayer(),this.SetPipelineLayer();var s=this;return Promise.all([this.areaLayer.load(),this.blockLayer.load(),this.platformsBSEELayer.load()]).then(function(){o.addMany([s.areaLayer,s.blockLayer,s.platformsBSEELayer])}).catch(function(a){console.error("Error loading layers:",a)}),Promise.all([this.pipelineLayer.load()]).then(function(){o.add(s.pipelineLayer)}).catch(function(a){console.error("Error loading pipeline layer:",a)}),this.SetMainPlatformLayer(),o.add(this.platformLayer),this.platformLayer.when(()=>{this.view.whenLayerView(this.platformLayer).then(function(a){s.platformLayerView=a})}).catch(a=>{console.log("view platformLayer error",a)}),this.SetHistoricHurricaneLayer(),this.historicHurricaneTrackLayer.load().then(function(){o.add(s.historicHurricaneTrackLayer)}),this.SetHHConesLayer(),this.hhConesLayer.load().then(function(){o.add(s.hhConesLayer)}),this.SetForecastHurricaneLayer(),this.SetSketchLayer(),o.add(this.graphicsLayer),this.view.ui.add(this.sketchWidget,"top-right"),this.SetRHurricaneLayer(),this.view.ui.add("sketchActions","top-right"),this.view.when()}ClearSketch(){this.graphicsLayer.removeAll()}ExportFeatures(){return D(this,null,function*(){let o=this.graphicsLayer.graphics.items.map(function(s){return s.geometry}),r=yield Py(o);if(this.platformLayerView){let s={geometry:r,outFields:["*"]};this.platformLayerView.queryFeatures(s).then(a=>{if(a.features&&a.features.length===0)console.log("no features"),this.toastr.warning("No Platform inside the sketch","Results from sketch");else{a.features.forEach(p=>{});let l=Object.keys(a.features[0].attributes),u=[];for(let p=0;p<a.features.length;p++)u.push(a.features[p].attributes);this.excelService.ExportDataExcel(u,l,"Platforms")}}).catch(a=>{console.log("error while downloading sketched feature:",a)})}})}SetSketchLayer(){this.graphicsLayer=new yc({title:"graphicsLayer"}),this.sketchWidget=new g1({layer:this.graphicsLayer,view:this.view,creationMode:"update",snappingOptions:{enabled:!0,selfEnabled:!1,featureSources:[{layer:this.graphicsLayer,enabled:!0}]}})}ngOnInit(){this.initializeMap().then(()=>{console.log("The map is ready."),this.mapReady=!0,this.setFilterValue(),this.mapService.showLayersOrWidgets$.subscribe(i=>{if(this.mapReady)switch(i.type){case S.PlatformLayer:this.platformLayer&&(this.platformLayer.visible=i.visible);break;case S.BSEEPlatformLayer:this.platformsBSEELayer&&(this.platformsBSEELayer.visible=i.visible);break;case S.AreaLayer:this.areaLayer&&(this.areaLayer.visible=i.visible);break;case S.BLockLayer:this.blockLayer&&(this.blockLayer.visible=i.visible);break;case S.Legend:this.legend&&(this.legend.visible=i.visible);break;case S.HistoricHurricaneTrackLayer:this.historicHurricaneTrackLayer&&(this.historicHurricaneTrackLayer.visible=i.visible);break;case S.HHConeLayer:this.hhConesLayer&&(this.hhConesLayer.visible=i.visible);break;case S.ForecastGroupLayer:this.forecastGroupLayer&&(this.forecastGroupLayer.visible=i.visible);break;case S.RecentHGroupLayer:this.rHurricaneGroupLayer&&(this.rHurricaneGroupLayer.visible=i.visible);break;case S.PipelineLayer:this.pipelineLayer&&(i.visible==!0&&this.showLoading(this.pipelineLayer),this.pipelineLayer.visible=i.visible);break;case S.ForecastSubLayerAll:this.forecastGroupLayer.layers.items&&this.forecastGroupLayer.layers.items.forEach(s=>{s.visible=i.visible});break;case S.Sketch:if(this.sketchWidget){this.sketchWidget.visible=i.visible;var o=document.getElementById("sketchActions");o&&(o.style.display=i.visible?"flex":"none")}break;default:let r=this.getLayerFromLayerOrWidget(i.type);r&&(r.visible=i.visible);break}}),this.mapService.setMapFilters$.subscribe(i=>{i!=null&&this.ApplyMapFilters(i)}),this.mapService.updateFiltersList$.subscribe(i=>{this.UpdateFilterList(i)}),this.mapService.downloadFilteredData$.subscribe(i=>{i!=null&&this.downloadFilteredData(i)})})}downloadFilteredData(i){let o=this,r="1=1";i==S.PlatformLayer&&this.defaultConditionForLayer.PlatformLayer!=null&&(r=this.defaultConditionForLayer.PlatformLayer);let s=this.getLayerFromLayerOrWidget(i);s.queryFeatures({where:s.definitionExpression||r,outFields:["*"],orderByFields:[E.platformName]}).then(function(a){if(a.features&&a.features.length>0){let l=Object.keys(a.features[0].attributes),u=[];for(let p=0;p<a.features.length;p++)u.push(a.features[p].attributes);o.excelService.ExportDataExcel(u,l,"FilteredData")}else o.toastr.warning("No data to export","NO DATA")})}SetMainPlatformLayer(){let i={type:"simple-marker",size:"4px",outline:{color:"transparent"}},o=["red","blue","green","yellow","violet","deeppink","maroon","orange","indigo","lightseagreen"];var r=[{value:"Removed",symbol:B(v({},i),{color:"grey"})}];let s={type:"unique-value",legendOptions:{title:"Business Asc Name"},field:"Bus_asc_name",defaultLabel:"Active",valueExpression:`
      var Bus_asc_name = $feature.Bus_Asc_Name;
      var Removal_Date = $feature.Removal_Date;
      var today_date = Today();
      var diff = DateDiff(today_date, Removal_Date, 'days');

      if (diff > 0) {
        return 'Removed';
      } else {
        return Bus_asc_name;
      }
    `,defaultSymbol:B(v({},i),{color:"blue"}),uniqueValueInfos:r};this.platformLayer=new fn({url:"https://services2.arcgis.com/Tk8KtWY399EerUu0/arcgis/rest/services/Platform16sep_2024/FeatureServer",visible:!0,title:"Platforms",refreshInterval:5,outFields:["*"],popupTemplate:this.getPlatformPopupTemplate()}),this.platformLayer.renderer=s}getPlatformPopupTemplate(){var i={title:"<span style='color: orange;'>Platform : {Area_Code} {Block_Number} {Structure_Name}</span>",content:`
      <table class="esri-widget__table" style="width:100%">
          <tr>
              <th style="width:30%">Field Name</th>
              <th style="width:35%">BSEE</th>
              <th style="width:35%">iSIMS</th>
          </tr>
          <tr>
              <td>Complex Id Num</td>
              <td>{Complex_Id_Num}</td>
              <td>{cpxid}</td>
          </tr>
          <tr>
              <td>Structure Number</td>
              <td>{Structure_Number}</td>
              <td>{stn}</td>
          </tr>
          <tr>
              <td>Bus Asc Name</td>
              <td>{Bus_Asc_Name}</td>
              <td>{operatorName}</td>
          </tr>
          <tr>
              <td>Platform Name</td>
              <td>{PlatformName}</td>
              <td>{platformname}</td>
          </tr>
          <tr>
              <td>Water Depth (feet)</td>
              <td>{Water_Depth__feet_}</td>
              <td>{wd}</td>
          </tr>
          <tr>
              <td>Authority Number</td>
              <td>{Authority_Number}</td>
              <td>{authnum}</td>
          </tr>
          <tr>
              <td>Authority Status</td>
              <td>{Authority_Status}</td>
              <td>{authstatus}</td>
          </tr>
          <tr>
              <td>Authority Type</td>
              <td>{Authority_Type}</td>
              <td>{authtyp}</td>
          </tr>
          <tr>
              <td>Install Date</td>
              <td>{Install_Date}</td>
              <td>{installDate}</td>
          </tr>
          <tr>
              <td>Attended 8 Hr</td>
              <td>{Attended_8_Hr}</td>
              <td>{isAttendedEighthHours}</td>
          </tr>
          <tr>
              <td>Heliport Flag</td>
              <td>{Heliport_Flag}</td>
              <td>{hasHeliport}</td>
          </tr>
          <tr>
              <td>District Code</td>
              <td>{District_Code}</td>
              <td>{districtCode}</td>
          </tr>
          <tr>
              <td>Field</td>
              <td>{Field}</td>
              <td></td>
          </tr>
          <tr>
              <td>INCs</td>
              <td>{INCs}</td>
              <td></td>
          </tr>
          <tr>
              <td>Latitude</td>
              <td>{Latitude}</td>
              <td>{latitude}</td>
          </tr>
          <tr>
              <td>Lease Number</td>
              <td>{Lease_Number}</td>
              <td></td>
          </tr>
          <tr>
              <td>Longitude</td>
              <td>{Longitude}</td>
              <td>{longitude}</td>
          </tr>
          <tr>
              <td>Maj Struc Flag</td>
              <td>{Maj_Struc_Flag}</td>
              <td>{isMajorStructure}</td>
          </tr>
          <tr>
              <td>Manned 24 Hr</td>
              <td>{Manned_24_Hr}</td>
              <td></td>
          </tr>
          <tr>
              <td>Nad Year Cd</td>
              <td>{Nad_Year_Cd}</td>
              <td></td>
          </tr>
          <tr>
              <td>Proj Code</td>
              <td>{Proj_Code}</td>
              <td></td>
          </tr>
          <tr>
              <td>Ptfrm X Location</td>
              <td>{Ptfrm_X_Location}</td>
              <td></td>
          </tr>
          <tr>
              <td>Ptfrm Y Location</td>
              <td>{Ptfrm_Y_Location}</td>
              <td></td>
          </tr>
          <tr>
              <td>Removal Date</td>
              <td>{Removal_Date}</td>
              <td>{removalDate}</td>
          </tr>
          <tr>
              <td>Site Clear Date</td>
              <td>{Site_Clear_Date}</td>
              <td></td>
          </tr>
          <tr>
              <td>Struc Type Code</td>
              <td>{Struc_Type_Code}</td>
              <td></td>
          </tr>
          <tr>
              <td>Surf E W Code</td>
              <td>{Surf_E_W_Code}</td>
              <td></td>
          </tr>
          <tr>
              <td>Surf E W Dist</td>
              <td>{Surf_E_W_Dist}</td>
              <td></td>
          </tr>
          <tr>
              <td>Surf N S Code</td>
              <td>{Surf_N_S_Code}</td>
              <td></td>
          </tr>
          <tr>
              <td>Surf N S Dist</td>
              <td>{Surf_N_S_Dist}</td>
              <td></td>
          </tr>
      </table>
  `};return i}SetBSEEPlatformLayer(){let i={type:"simple",symbol:{type:"simple-marker",color:[200,200,200,1],size:"4px",outline:{color:"transparent"}}};var o={title:"Platform:{PlatformName}",content:[{type:"fields",fieldInfos:[{fieldName:"Bus_Asc_Name",label:"Operator Name"},{fieldName:"Water_Depth__feet_",label:"Water Depth feet"},{fieldName:"Install_Date",label:"Install Date"},{fieldName:"Removal_Date",label:"Removal Date"}]}]};this.platformsBSEELayer=new fn({url:"https://services2.arcgis.com/Tk8KtWY399EerUu0/arcgis/rest/services/Platform_BSEE_16sep/FeatureServer",visible:!1,refreshInterval:60,title:"Platform BSEE",popupTemplate:o,opacity:.5,renderer:i})}SetAreaLayer(){var i=new lp({labelExpressionInfo:{expression:"$feature.AREA_CODE"},symbol:new sp({color:"black",haloColor:"",haloSize:"2px",font:{family:"Arial",size:6,weight:"bold"}})});this.areaLayer=new fn({url:"https://services2.arcgis.com/Tk8KtWY399EerUu0/arcgis/rest/services/protclip/FeatureServer",labelingInfo:[i],visible:!1,title:"Area",popupTemplate:{title:"Area:{AREA_CODE}",content:[{type:"fields",fieldInfos:[{fieldName:"AREA_CODE",label:"Area code"},{fieldName:"PLAN_AREA_",label:"Plan area"},{fieldName:"PLAN_AREA1",label:"plan area1"},{fieldName:"PROJ_ZONE_",label:"Proj zone"},{fieldName:"PROT_APRV_",label:"PROT_APRV_"},{fieldName:"PROT_NAME",label:"PROT_NAME"},{fieldName:"PROT_NUMBE",label:"PROT_NUMBER"},{fieldName:"PROTCLIP_",label:"PROTCLIP"}]}]}})}SetBlockLayer(){var i=new lp({labelExpressionInfo:{expression:"$feature.BLOCK_NUMB"},symbol:new sp({color:"black",haloColor:"",haloSize:"2px",font:{family:"Arial",size:6,weight:"bold"}}),minScale:5e5,maxScale:1e5});this.blockLayer=new fn({url:"https://services2.arcgis.com/Tk8KtWY399EerUu0/arcgis/rest/services/block/FeatureServer/0",labelingInfo:[i],visible:!1,title:"Block",popupTemplate:{title:"Block:{BLOCK_NUMB}",content:[{type:"fields",fieldInfos:[{fieldName:"AC_LAB",label:"AC_LAB"},{fieldName:"AREA_CODE",label:"AREA_CODE"},{fieldName:"BLK_FED_AP	",label:"BLK_FED_AP	"},{fieldName:"BLOCK LAB	",label:"BLOCK LAB	"},{fieldName:"BLOCK_NUMB",label:"BLOCK_NUMB"},{fieldName:"BLOCKS",label:"BLOCKS"},{fieldName:"BLOCKS_ID",label:"BLOCKS_ID"},{fieldName:"PROT_APRV_",label:"PROT_APRV_"},{fieldName:"PROT_NUMBE",label:"PROT_NUMBE"},{fieldName:"MMS_REGION",label:"MMS_REGION"}]}]}})}SetPipelineLayer(){let i={type:"simple",symbol:{type:"simple-line",color:"#a553b7"}};this.pipelineLayer=new fn({url:"https://services2.arcgis.com/Tk8KtWY399EerUu0/arcgis/rest/services/Join_Features_to_Pipeline_view/FeatureServer",visible:!1,title:"Pipelines",opacity:.4,popupTemplate:{title:"Segment Number:{SEGMENT_NU}",content:[{type:"fields",fieldInfos:[{fieldName:"SEG_LENGTH",label:"Segment Length"},{fieldName:"STATUS_COD",label:"Status Code"},{fieldName:"PPL_SIZE_C	",label:"Pipeline Size"},{fieldName:"ROW_NUMBER",label:"Row Number"},{fieldName:"PROD_CODE",label:"Production Code"},{fieldName:"APRV_CODE",label:"Approval code"},{fieldName:"SDE_COMPAN",label:"SDE Company"},{fieldName:"Originating_Id_Name",label:"Originating Id Name"},{fieldName:"Originating_Area_Code",label:"Originating Area Code"},{fieldName:"Originating_Block_Number",label:"Originating Block Number"},{fieldName:"Originating_Lease_Number",label:"Originating Lease Number"},{fieldName:"Receiving_Id_Name",label:"Receiving Id Name"},{fieldName:"Receiving_Area_Code",label:"Receiving Area Code"},{fieldName:"Receiving_Block_Number",label:"Receiving Block Number"},{fieldName:"Receiving_Lease_Number",label:"Receiving Lease Number"},{fieldName:"Approved_Date",label:" Approved Date"},{fieldName:"Install_Date",label:"Install Date"},{fieldName:"Max_Water_Depth__feet_",label:"Max Water Depth (feet)"},{fieldName:"Max_Allowable_Operating_Pressure",label:"Max Allowable Operating Pressure"},{fieldName:"Authority",label:"Authority"},{fieldName:"Bidirectional",label:" Bidirectional"},{fieldName:"Out_of_Service_Date",label:"Out of Service Date"},{fieldName:"Abandonment_Approval_Date",label:"Abandonment Approval Date"},{fieldName:"Abandonment_Date",label:"Abandonment Date"}]}]},renderer:i})}ApplyMapFilters(i){let o=this.platformLayer,r=this.defaultConditionForLayer.PlatformLayer;i.layerOrWidget==S.HistoricHurricaneTrackLayer?(o=this.historicHurricaneTrackLayer,r=this.defaultConditionForLayer.HistoricHurricaneTrackLayer):i.layerOrWidget==S.PipelineLayer?(o=this.pipelineLayer,r=this.defaultConditionForLayer.PipelineLayer):i.layerOrWidget==S.HHConeLayer?(o=this.hhConesLayer,r=this.defaultConditionForLayer.HHConeLayer):i.layerOrWidget==S.ForecastGroupLayer?(o=this.forecastHurricaneLayers,r=this.defaultConditionForLayer.ForecastGroupLayer):i.layerOrWidget==S.RecentHGroupLayer&&(o=this.rHurricaneGroupLayer,r=this.defaultConditionForLayer.RecentHGroupLayer);let s=this.getFinalFilterCondition(i.details,r);i.layerOrWidget==S.HHConeLayer?o.definitionExpression=this.historicHurricaneTrackLayer.definitionExpression+"  AND "+s:i.layerOrWidget==S.PlatformLayer?o.definitionExpression=this.defaultConditionForLayer.PlatformLayer+" AND "+s:i.layerOrWidget==S.RecentHGroupLayer?this.rHurricaneGroupLayer.layers.forEach(l=>{l.definitionExpression=s}):o.definitionExpression=s,this.showLoading(o);let a=this;o.queryExtent().then(function(l){l!=null&&l.extent?a.view.goTo(l.extent):a.platformLayer.visible?a.view.goTo(a.platformLayer.fullExtent):a.pipelineLayer.visible?a.view.goTo(a.pipelineLayer.fullExtent):a.historicHurricaneTrackLayer.visible&&a.historicHurricaneTrackLayer.definitionExpression!="1=0"?a.view.goTo(a.historicHurricaneTrackLayer.fullExtent):a.hhConesLayer.visible&&a.hhConesLayer.definitionExpression!="1=0"?a.view.goTo(a.hhConesLayer.fullExtent):a.view.goTo(a.platformLayer.fullExtent)})}showLoading(i){this.spinnerService.show("appSpinner");var o=this,r=this.view.whenLayerView(i);r.then(function(s){if(!s.updating){o.spinnerService.hide("appSpinner");return}var a=s.watch("updating",function(l,u,p,h){l||(a.remove(),o.spinnerService.hide("appSpinner"))})})}UpdateFilterList(i){if(i==null)return;let o="1=1";i.type==E.HConeAdvisory&&(o="1=0");let r=this.getFinalFilterCondition(i.value,o);this.getFieldDataForFilter(i.type,r)}getFinalFilterCondition(i,o){let r=[];i!=null&&i.size>0&&i.forEach((a,l)=>{if(a.length>0)switch(l){case E.ActiveStatus:case E.Area_Code:case E.Block_Number:case E.Bus_Asc_Name:case E.platformName:case E.operatorName:case E.HurricaneName:case E.HurricaneYear:case E.PipelineOperator:case E.PipelineStatusCode:case E.HConeAdvisory:case E.RH_STORMNAME:let u=l.toString()+" IN ('"+a.join("', '")+"')";r.push(u);break;case E.Water_Depth__feet_:case E.Complex_Id_Num:case E.Install_Date:case E.Removal_Date:case E.PipelineSegmentNumber:let p=l.toString()+" "+a;r.push(p);break;default:break}});let s=o;return r.length&&(s=r.join(" AND ")),s}getLayerFromLayerOrWidget(i){switch(i){case S.PlatformLayer:return this.platformLayer;case S.HistoricHurricaneTrackLayer:return this.historicHurricaneTrackLayer;case S.PipelineLayer:return this.pipelineLayer;case S.HHConeLayer:return this.hhConesLayer;case S.ForecastGroupLayer:return this.forecastHurricaneLayers;case S.ForecastSubLayer0:return this.forecastGroupLayer.layers.items[0];case S.ForecastSubLayer1:return this.forecastGroupLayer.layers.items[1];case S.ForecastSubLayer2:return this.forecastGroupLayer.layers.items[2];case S.ForecastSubLayer3:return this.forecastGroupLayer.layers.items[3];case S.ForecastSubLayer4:return this.forecastGroupLayer.layers.items[4];case S.ForecastSubLayer5:return this.forecastGroupLayer.layers.items[5];case S.ForecastSubLayer7:return this.forecastGroupLayer.layers.items[6];case S.ForecastSubLayer8:return this.forecastGroupLayer.layers.items[7];case S.ForecastSubLayer9:return this.forecastGroupLayer.layers.items[8];case S.ForecastSubLayer10:return this.forecastGroupLayer.layers.items[9];case S.ForecastSubLayer11:return this.forecastGroupLayer.layers.items[10];case S.RecentHGroupLayer:return this.rHurricaneGroupLayer;case S.RecentHSubLayer0:return this.rHurricaneGroupLayer.layers.items[0];case S.RecentHSubLayer1:return this.rHurricaneGroupLayer.layers.items[1];case S.RecentHSubLayer2:return this.rHurricaneGroupLayer.layers.items[2]}return null}getFieldDataForFilter(i,o="1=1"){let r=this,s=[],a=this.mapService.getLayerOrWidgetFromFilterType(i),l=this.getLayerFromLayerOrWidget(a);i===E.RH_STORMNAME&&(l=this.rHurricaneGroupLayer.layers.items[0]),l.queryFeatures({where:o,returnDistinctValues:!0,outFields:[i],orderByFields:[i]}).then(function(u){u.features.forEach(function(p){var h=p.attributes[i],m=h;(h==null||h=="")&&(m="Unknown"),s.push({text:m,value:h})}),i==E.HConeAdvisory&&s.sort((p,h)=>parseFloat(p.text)-parseFloat(h.text)),r.mapService.setFilterListFromMap({type:i,value:s})})}setFilterValue(){this.getFieldDataForFilter(E.Area_Code),this.getFieldDataForFilter(E.Block_Number),this.getFieldDataForFilter(E.Bus_Asc_Name),this.getFieldDataForFilter(E.operatorName),this.getFieldDataForFilter(E.platformName),this.getFieldDataForFilter(E.HurricaneYear),this.getFieldDataForFilter(E.HurricaneName),this.getFieldDataForFilter(E.PipelineOperator),this.getFieldDataForFilter(E.PipelineStatusCode),this.getFieldDataForFilter(E.RH_STORMNAME)}SetHistoricHurricaneLayer(){this.historicHurricaneTrackLayer=new fn({url:"https://services2.arcgis.com/FiaPA4ga0iQKduv3/arcgis/rest/services/IBTrACS_ALL_list_v04r00_lines_1/FeatureServer",title:"Historic Hurricanes",refreshInterval:5,outFields:["*"],definitionExpression:"1=0",visible:!1})}SetHHConesLayer(){this.hhConesLayer=new fn({url:"https://services2.arcgis.com/Tk8KtWY399EerUu0/arcgis/rest/services/ALL_Cones/FeatureServer",title:"Historic Hurricanes Cones",refreshInterval:5,outFields:["*"],definitionExpression:"1=0",visible:!1})}SetForecastHurricaneLayer(){let i="https://services9.arcgis.com/RHVPKKiFTONKtxq3/arcgis/rest/services/Active_Hurricanes_v1/FeatureServer",o=this;Qu(i,{responseType:"json",query:{f:"json"}}).then(r=>{this.forecastLayers=r.data.layers,this.forecastLayers.forEach(s=>{s.isVisible=!0;var a=new fn({url:"https://services9.arcgis.com/RHVPKKiFTONKtxq3/arcgis/rest/services/Active_Hurricanes_v1/FeatureServer/"+s.id,title:s.name,outFields:["*"],definitionExpression:"1=1",visible:!0});this.forecastHurricaneLayers.push(a)}),this.forecastGroupLayer=new up({visibilityMode:"independent",title:"Forecast Hurricanes",visible:!1}),this.forecastGroupLayer.layers.addMany(this.forecastHurricaneLayers),this.forecastGroupLayer.loadAll().catch(s=>{console.error("Error loading forecast hurricane layers:",s)}).then(()=>{o.map.add(o.forecastGroupLayer),this.mapService.setHLayerListFromMap({layerOrWidget:S.ForecastGroupLayer,detailedList:o.forecastLayers})})}).catch(r=>{r.name==="AbortError"?console.log("Request aborted"):console.error("Error encountered",r)})}SetRHurricaneLayer(){let i="https://services9.arcgis.com/RHVPKKiFTONKtxq3/arcgis/rest/services/Recent_Hurricanes_v1/FeatureServer",o=this;Qu(i,{responseType:"json",query:{f:"json"}}).then(r=>{this.recentHLayersDetails=r.data.layers,this.recentHLayersDetails.forEach(s=>{s.isVisible=!0;var a=new fn({url:i+"/"+s.id,title:s.name,outFields:["*"],definitionExpression:"1=1",visible:!0});this.recentHurricaneLayers.push(a)}),this.rHurricaneGroupLayer=new up({visibilityMode:"independent",title:"Recent Hurricanes",visible:!1}),this.rHurricaneGroupLayer.layers.addMany(this.recentHurricaneLayers),this.rHurricaneGroupLayer.loadAll().catch(s=>{console.error("Error loading recent hurricane layers:",s)}).then(()=>{o.map.add(o.rHurricaneGroupLayer),this.mapService.setHLayerListFromMap({layerOrWidget:S.RecentHGroupLayer,detailedList:o.recentHLayersDetails})})}).catch(r=>{r.name==="AbortError"?console.log("Request aborted"):console.error("Error encountered",r)})}ngOnDestroy(){this.view&&this.view.destroy()}};t.\u0275fac=function(o){return new(o||t)(H(Ri),H(zm),H(S1),H(td))},t.\u0275cmp=ee({type:t,selectors:[["app-esri-map"]],viewQuery:function(o,r){if(o&1&&Ft($E,7),o&2){let s;pe(s=he())&&(r.mapViewEl=s.first)}},standalone:!0,features:[ae],decls:5,vars:0,consts:[["mapViewNode",""],["id","sketchActions",1,"d-flex"],["title","Download Platforms",1,"esri-icon-download","esri-widget--button","esri-widget","esri-interactive",3,"click"],["title","Clear Sketch",1,"esri-icon-erase","esri-widget--button","esri-widget","esri-interactive",3,"click"]],template:function(o,r){if(o&1){let s=oe();V(0,"div",null,0),_(2,"div",1)(3,"div",2),x("click",function(){return A(s),P(r.ExportFeatures())}),y(),_(4,"div",3),x("click",function(){return A(s),P(r.ClearSketch())}),y()()}},dependencies:[v1,$v],styles:[`.esri-view,#mapViewNode{padding:0;margin:0;height:100%;width:100%}.form-check-input.squareChkbox{border-radius:0!important}.form-check-input:focus{box-shadow:none!important}
`],encapsulation:2});let e=t;return e})();var A1=(()=>{let t=class t{constructor(i,o){this._renderer=i,this._elementRef=o,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(i,o){this._renderer.setProperty(this._elementRef.nativeElement,i,o)}registerOnTouched(i){this.onTouched=i}registerOnChange(i){this.onChange=i}setDisabledState(i){this.setProperty("disabled",i)}};t.\u0275fac=function(o){return new(o||t)(H(Fr),H(ze))},t.\u0275dir=ye({type:t});let e=t;return e})(),Qm=(()=>{let t=class t extends A1{};t.\u0275fac=(()=>{let i;return function(r){return(i||(i=di(t)))(r||t)}})(),t.\u0275dir=ye({type:t,features:[so]});let e=t;return e})(),rn=new Ie(""),WE={provide:rn,useExisting:ci(()=>Jm),multi:!0},Jm=(()=>{let t=class t extends Qm{writeValue(i){this.setProperty("checked",i)}};t.\u0275fac=(()=>{let i;return function(r){return(i||(i=di(t)))(r||t)}})(),t.\u0275dir=ye({type:t,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(o,r){o&1&&x("change",function(a){return r.onChange(a.target.checked)})("blur",function(){return r.onTouched()})},features:[Ci([WE]),so]});let e=t;return e})(),qE={provide:rn,useExisting:ci(()=>Li),multi:!0};function ZE(){let e=jr()?jr().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}var YE=new Ie(""),Li=(()=>{let t=class t extends A1{constructor(i,o,r){super(i,o),this._compositionMode=r,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!ZE())}writeValue(i){let o=i??"";this.setProperty("value",o)}_handleInput(i){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(i)}_compositionStart(){this._composing=!0}_compositionEnd(i){this._composing=!1,this._compositionMode&&this.onChange(i)}};t.\u0275fac=function(o){return new(o||t)(H(Fr),H(ze),H(YE,8))},t.\u0275dir=ye({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(o,r){o&1&&x("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[Ci([qE]),so]});let e=t;return e})();var Xm=new Ie(""),KE=new Ie("");function P1(e){return e!=null}function F1(e){return Wl(e)?ai(e):e}function R1(e){let t={};return e.forEach(n=>{t=n!=null?v(v({},t),n):t}),Object.keys(t).length===0?null:t}function L1(e,t){return t.map(n=>n(e))}function QE(e){return!e.validate}function N1(e){return e.map(t=>QE(t)?t:n=>t.validate(n))}function JE(e){if(!e)return null;let t=e.filter(P1);return t.length==0?null:function(n){return R1(L1(n,t))}}function V1(e){return e!=null?JE(N1(e)):null}function XE(e){if(!e)return null;let t=e.filter(P1);return t.length==0?null:function(n){let i=L1(n,t).map(F1);return qf(i).pipe(se(R1))}}function H1(e){return e!=null?XE(N1(e)):null}function T1(e,t){return e===null?[t]:Array.isArray(e)?[...e,t]:[e,t]}function ex(e){return e._rawValidators}function tx(e){return e._rawAsyncValidators}function Wm(e){return e?Array.isArray(e)?e:[e]:[]}function ou(e,t){return Array.isArray(e)?e.includes(t):e===t}function M1(e,t){let n=Wm(t);return Wm(e).forEach(o=>{ou(n,o)||n.push(o)}),n}function D1(e,t){return Wm(t).filter(n=>!ou(e,n))}var ru=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=V1(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=H1(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,n){return this.control?this.control.hasError(t,n):!1}getError(t,n){return this.control?this.control.getError(t,n):null}},qm=class extends ru{get formDirective(){return null}get path(){return null}},Tl=class extends ru{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Zm=class{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},ix={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Lte=B(v({},ix),{"[class.ng-submitted]":"isSubmitted"}),oi=(()=>{let t=class t extends Zm{constructor(i){super(i)}};t.\u0275fac=function(o){return new(o||t)(H(Tl,2))},t.\u0275dir=ye({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(o,r){o&2&&_t("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[so]});let e=t;return e})();var Sl="VALID",iu="INVALID",Zs="PENDING",Cl="DISABLED";function ef(e){return(au(e)?e.validators:e)||null}function nx(e){return Array.isArray(e)?V1(e):e||null}function tf(e,t){return(au(t)?t.asyncValidators:e)||null}function ox(e){return Array.isArray(e)?H1(e):e||null}function au(e){return e!=null&&!Array.isArray(e)&&typeof e=="object"}function B1(e,t,n){let i=e.controls;if(!(t?Object.keys(i):i).length)throw new we(1e3,"");if(!i[n])throw new we(1001,"")}function G1(e,t,n){e._forEachChild((i,o)=>{if(n[o]===void 0)throw new we(1002,"")})}var Ys=class{constructor(t,n){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Sl}get invalid(){return this.status===iu}get pending(){return this.status==Zs}get disabled(){return this.status===Cl}get enabled(){return this.status!==Cl}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(M1(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(M1(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(D1(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(D1(t,this._rawAsyncValidators))}hasValidator(t){return ou(this._rawValidators,t)}hasAsyncValidator(t){return ou(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(n=>{n.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(n=>{n.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Zs,t.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=Cl,this.errors=null,this._forEachChild(i=>{i.disable(B(v({},t),{onlySelf:!0}))}),this._updateValue(),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(B(v({},t),{skipPristineCheck:n})),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){let n=this._parentMarkedDirty(t.onlySelf);this.status=Sl,this._forEachChild(i=>{i.enable(B(v({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(B(v({},t),{skipPristineCheck:n})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Sl||this.status===Zs)&&this._runAsyncValidator(t.emitEvent)),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Cl:Sl}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Zs,this._hasOwnPendingAsyncValidator=!0;let n=F1(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,n={}){this.errors=t,this._updateControlsErrors(n.emitEvent!==!1)}get(t){let n=t;return n==null||(Array.isArray(n)||(n=n.split(".")),n.length===0)?null:n.reduce((i,o)=>i&&i._find(o),this)}getError(t,n){let i=n?this.get(n):this;return i&&i.errors?i.errors[t]:null}hasError(t,n){return!!this.getError(t,n)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new $,this.statusChanges=new $}_calculateStatus(){return this._allControlsDisabled()?Cl:this.errors?iu:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Zs)?Zs:this._anyControlsHaveStatus(iu)?iu:Sl}_anyControlsHaveStatus(t){return this._anyControls(n=>n.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){au(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let n=this._parent&&this._parent.dirty;return!t&&!!n&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=nx(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=ox(this._rawAsyncValidators)}},su=class extends Ys{constructor(t,n,i){super(ef(n),tf(i,n)),this.controls=t,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,n){return this.controls[t]?this.controls[t]:(this.controls[t]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(t,n,i={}){this.registerControl(t,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(t,n,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],n&&this.registerControl(t,n),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,n={}){G1(this,!0,t),Object.keys(t).forEach(i=>{B1(this,!0,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(t,n={}){t!=null&&(Object.keys(t).forEach(i=>{let o=this.controls[i];o&&o.patchValue(t[i],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(t={},n={}){this._forEachChild((i,o)=>{i.reset(t?t[o]:null,{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this._reduceChildren({},(t,n,i)=>(t[i]=n.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(n,i)=>i._syncPendingControls()?!0:n);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(n=>{let i=this.controls[n];i&&t(i,n)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[n,i]of Object.entries(this.controls))if(this.contains(n)&&t(i))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(n,i,o)=>((i.enabled||this.disabled)&&(n[o]=i.value),n))}_reduceChildren(t,n){let i=t;return this._forEachChild((o,r)=>{i=n(i,o,r)}),i}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var Ym=class extends su{};var j1=new Ie("CallSetDisabledState",{providedIn:"root",factory:()=>nf}),nf="always";function rx(e,t){return[...t.path,e]}function sx(e,t,n=nf){lx(e,t),t.valueAccessor.writeValue(e.value),(e.disabled||n==="always")&&t.valueAccessor.setDisabledState?.(e.disabled),cx(e,t),ux(e,t),dx(e,t),ax(e,t)}function E1(e,t){e.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(t)})}function ax(e,t){if(t.valueAccessor.setDisabledState){let n=i=>{t.valueAccessor.setDisabledState(i)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}function lx(e,t){let n=ex(e);t.validator!==null?e.setValidators(T1(n,t.validator)):typeof n=="function"&&e.setValidators([n]);let i=tx(e);t.asyncValidator!==null?e.setAsyncValidators(T1(i,t.asyncValidator)):typeof i=="function"&&e.setAsyncValidators([i]);let o=()=>e.updateValueAndValidity();E1(t._rawValidators,o),E1(t._rawAsyncValidators,o)}function cx(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,e.updateOn==="change"&&z1(e,t)})}function dx(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,e.updateOn==="blur"&&e._pendingChange&&z1(e,t),e.updateOn!=="submit"&&e.markAsTouched()})}function z1(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function ux(e,t){let n=(i,o)=>{t.valueAccessor.writeValue(i),o&&t.viewToModelUpdate(i)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}function px(e,t){if(!e.hasOwnProperty("model"))return!1;let n=e.model;return n.isFirstChange()?!0:!Object.is(t,n.currentValue)}function hx(e){return Object.getPrototypeOf(e.constructor)===Qm}function mx(e,t){if(!t)return null;Array.isArray(t);let n,i,o;return t.forEach(r=>{r.constructor===Li?n=r:hx(r)?i=r:o=r}),o||i||n||null}function x1(e,t){let n=e.indexOf(t);n>-1&&e.splice(n,1)}function I1(e){return typeof e=="object"&&e!==null&&Object.keys(e).length===2&&"value"in e&&"disabled"in e}var nu=class extends Ys{constructor(t=null,n,i){super(ef(n),tf(i,n)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),au(n)&&(n.nonNullable||n.initialValueIsDefault)&&(I1(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,n={}){this.value=this._pendingValue=t,this._onChange.length&&n.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,n.emitViewToModelChange!==!1)),this.updateValueAndValidity(n)}patchValue(t,n={}){this.setValue(t,n)}reset(t=this.defaultValue,n={}){this._applyFormState(t),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){x1(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){x1(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){I1(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var fx={provide:Tl,useExisting:ci(()=>$t)},O1=Promise.resolve(),$t=(()=>{let t=class t extends Tl{constructor(i,o,r,s,a,l){super(),this._changeDetectorRef=a,this.callSetDisabledState=l,this.control=new nu,this._registered=!1,this.name="",this.update=new $,this._parent=i,this._setValidators(o),this._setAsyncValidators(r),this.valueAccessor=mx(this,s)}ngOnChanges(i){if(this._checkForErrors(),!this._registered||"name"in i){if(this._registered&&(this._checkName(),this.formDirective)){let o=i.name.previousValue;this.formDirective.removeControl({name:o,path:this._getPath(o)})}this._setUpControl()}"isDisabled"in i&&this._updateDisabled(i),px(i,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){sx(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(i){O1.then(()=>{this.control.setValue(i,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(i){let o=i.isDisabled.currentValue,r=o!==0&&Ue(o);O1.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(i){return this._parent?rx(i,this._parent):[i]}};t.\u0275fac=function(o){return new(o||t)(H(qm,9),H(Xm,10),H(KE,10),H(rn,10),H(Gt,8),H(j1,8))},t.\u0275dir=ye({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[ue.None,"disabled","isDisabled"],model:[ue.None,"ngModel","model"],options:[ue.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Ci([fx]),so,Zt]});let e=t;return e})();var gx={provide:rn,useExisting:ci(()=>_r),multi:!0},_r=(()=>{let t=class t extends Qm{writeValue(i){let o=i??"";this.setProperty("value",o)}registerOnChange(i){this.onChange=o=>{i(o==""?null:parseFloat(o))}}};t.\u0275fac=(()=>{let i;return function(r){return(i||(i=di(t)))(r||t)}})(),t.\u0275dir=ye({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(o,r){o&1&&x("input",function(a){return r.onChange(a.target.value)})("blur",function(){return r.onTouched()})},features:[Ci([gx]),so]});let e=t;return e})();var _x=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=Bt({type:t}),t.\u0275inj=Ht({});let e=t;return e})(),Km=class extends Ys{constructor(t,n,i){super(ef(n),tf(i,n)),this.controls=t,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[this._adjustIndex(t)]}push(t,n={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}insert(t,n,i={}){this.controls.splice(t,0,n),this._registerControl(n),this.updateValueAndValidity({emitEvent:i.emitEvent})}removeAt(t,n={}){let i=this._adjustIndex(t);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),this.updateValueAndValidity({emitEvent:n.emitEvent})}setControl(t,n,i={}){let o=this._adjustIndex(t);o<0&&(o=0),this.controls[o]&&this.controls[o]._registerOnCollectionChange(()=>{}),this.controls.splice(o,1),n&&(this.controls.splice(o,0,n),this._registerControl(n)),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,n={}){G1(this,!1,t),t.forEach((i,o)=>{B1(this,!1,o),this.at(o).setValue(i,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(t,n={}){t!=null&&(t.forEach((i,o)=>{this.at(o)&&this.at(o).patchValue(i,{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(t=[],n={}){this._forEachChild((i,o)=>{i.reset(t[o],{onlySelf:!0,emitEvent:n.emitEvent})}),this._updatePristine(n),this._updateTouched(n),this.updateValueAndValidity(n)}getRawValue(){return this.controls.map(t=>t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(n=>n._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_adjustIndex(t){return t<0?t+this.length:t}_syncPendingControls(){let t=this.controls.reduce((n,i)=>i._syncPendingControls()?!0:n,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((n,i)=>{t(n,i)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(n=>n.enabled&&t(n))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(let t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}_find(t){return this.at(t)??null}};function k1(e){return!!e&&(e.asyncValidators!==void 0||e.validators!==void 0||e.updateOn!==void 0)}var U1=(()=>{let t=class t{constructor(){this.useNonNullable=!1}get nonNullable(){let i=new t;return i.useNonNullable=!0,i}group(i,o=null){let r=this._reduceControls(i),s={};return k1(o)?s=o:o!==null&&(s.validators=o.validator,s.asyncValidators=o.asyncValidator),new su(r,s)}record(i,o=null){let r=this._reduceControls(i);return new Ym(r,o)}control(i,o,r){let s={};return this.useNonNullable?(k1(o)?s=o:(s.validators=o,s.asyncValidators=r),new nu(i,B(v({},s),{nonNullable:!0}))):new nu(i,o,r)}array(i,o,r){let s=i.map(a=>this._createControl(a));return new Km(s,o,r)}_reduceControls(i){let o={};return Object.keys(i).forEach(r=>{o[r]=this._createControl(i[r])}),o}_createControl(i){if(i instanceof nu)return i;if(i instanceof Ys)return i;if(Array.isArray(i)){let o=i[0],r=i.length>1?i[1]:null,s=i.length>2?i[2]:null;return this.control(o,r,s)}else return this.control(i)}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var bt=(()=>{let t=class t{static withConfig(i){return{ngModule:t,providers:[{provide:j1,useValue:i.callSetDisabledState??nf}]}}};t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=Bt({type:t}),t.\u0275inj=Ht({imports:[_x]});let e=t;return e})();var $1=(()=>{let t=class t{constructor(i){this.mapService=i,this.showLegend=!0,this.showSketch=!0}toggleLegend(){this.showLegend=!this.showLegend,this.mapService.ShowHideLayersOrWidgets({type:S.Legend,visible:this.showLegend})}toggleSketch(){this.showSketch=!this.showSketch,this.mapService.ShowHideLayersOrWidgets({type:S.Sketch,visible:this.showSketch})}};t.\u0275fac=function(o){return new(o||t)(H(Ri))},t.\u0275cmp=ee({type:t,selectors:[["app-header"]],standalone:!0,features:[ae],decls:10,vars:2,consts:[["id","header",1,"fixed-top"],[1,"d-flex","flex-wrap"],[1,"me-auto"],[1,"text-white"],[1,"d-flex"],["title","Legend","type","button",1,"no-border","rounded-0","btn","btn-lg",3,"click","ngClass"],[1,"fa-solid","fa-list"],["title","Sketch Tool","type","button",1,"no-border","rounded-0","btn","btn-lg",3,"click","ngClass"],[1,"fa-solid","fa-draw-polygon"]],template:function(o,r){o&1&&(_(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),L(4,"IntelliSIMS"),y()(),_(5,"div",4)(6,"button",5),x("click",function(){return r.toggleLegend()}),V(7,"i",6),y(),_(8,"button",7),x("click",function(){return r.toggleSketch()}),V(9,"i",8),y()()()()),o&2&&(g(6),C("ngClass",r.showLegend?"text-dark":"text-white"),g(2),C("ngClass",r.showSketch?"text-dark":"text-white"))},dependencies:[bt,Te,Ti],styles:["#header[_ngcontent-%COMP%]{background-color:#e95420;padding:5px 10px;margin:0}"]});let e=t;return e})();var yx=e=>({"dropdown-multiselect--active":e});function vx(e,t){if(e&1&&(_(0,"span"),L(1),y()),e&2){let n=T();g(),de(n._placeholder)}}function bx(e,t){if(e&1){let n=oe();_(0,"span",15)(1,"span",16)(2,"span"),L(3),y(),_(4,"a",17),x("click",function(o){let r=A(n).$implicit,s=T();return P(s.onItemClick(o,r))}),L(5,"x"),y()()()}if(e&2){let n=t.$implicit,i=t.index,o=T();g(),C("hidden",i>o._settings.itemsShowLimit-1),g(2),yt("",n.text,"\xA0")}}function wx(e,t){if(e&1&&(_(0,"span",18),L(1),y()),e&2){let n=T();g(),yt("+",n.itemShowRemaining(),"")}}function Sx(e,t){if(e&1){let n=oe();_(0,"li",19),x("click",function(){A(n);let o=T();return P(o.toggleSelectAll())}),V(1,"input",20),_(2,"div"),L(3),y()()}if(e&2){let n=T();g(),C("checked",n.isAllItemsSelected())("disabled",n.disabled||n.isLimitSelectionReached()),g(2),de(n.isAllItemsSelected()?n._settings.unSelectAllText:n._settings.selectAllText)}}function Cx(e,t){if(e&1){let n=oe();_(0,"li",21)(1,"input",22),Qe("ngModelChange",function(o){A(n);let r=T();return Ke(r.filter.text,o)||(r.filter.text=o),P(o)}),x("ngModelChange",function(o){A(n);let r=T();return P(r.onFilterTextChange(o))}),y()()}if(e&2){let n=T();g(),C("readOnly",n.disabled)("placeholder",n._settings.searchPlaceholderText),Ye("ngModel",n.filter.text)}}function Tx(e,t){if(e&1){let n=oe();_(0,"li",23),x("click",function(o){let r=A(n).$implicit,s=T();return P(s.onItemClick(o,r))}),V(1,"input",24),_(2,"div"),L(3),y()()}if(e&2){let n=t.$implicit,i=T();g(),C("checked",i.isSelected(n))("disabled",i.disabled||i.isLimitSelectionReached()&&!i.isSelected(n)||n.isDisabled),At("aria-label",n.text),g(2),de(n.text)}}function Mx(e,t){if(e&1&&(_(0,"li",25)(1,"h5"),L(2),y()()),e&2){let n=T();g(2),de(n._settings.noFilteredDataAvailablePlaceholderText)}}function Dx(e,t){if(e&1&&(_(0,"li",26)(1,"h5"),L(2),y()()),e&2){let n=T();g(2),de(n._settings.noDataAvailablePlaceholderText)}}var Qn=class{id;text;isDisabled;constructor(t){(typeof t=="string"||typeof t=="number")&&(this.id=this.text=t,this.isDisabled=!1),typeof t=="object"&&(this.id=t.id,this.text=t.text,this.isDisabled=t.isDisabled)}},of=(()=>{class e{transform(n,i){return!n||!i?n:n.filter(o=>this.applyFilter(o,i))}applyFilter(n,i){return typeof n.text=="string"&&typeof i.text=="string"?!(i.text&&n.text&&n.text.toLowerCase().indexOf(i.text.toLowerCase())===-1):!(i.text&&n.text&&n.text.toString().toLowerCase().indexOf(i.text.toString().toLowerCase())===-1)}static \u0275fac=function(i){return new(i||e)};static \u0275pipe=Gl({name:"multiSelectFilter",type:e,pure:!1})}return e})(),Ex=(()=>{class e{_elementRef;constructor(n){this._elementRef=n}clickOutside=new $;onClick(n,i){if(!i)return;this._elementRef.nativeElement.contains(i)||this.clickOutside.emit(n)}static \u0275fac=function(i){return new(i||e)(H(ze))};static \u0275dir=ye({type:e,selectors:[["","clickOutside",""]],hostBindings:function(i,o){i&1&&x("click",function(s){return o.onClick(s,s.target)},!1,mg)},outputs:{clickOutside:"clickOutside"}})}return e})(),xx={provide:rn,useExisting:ci(()=>rf),multi:!0},W1=()=>{},rf=(()=>{class e{listFilterPipe;cdr;_settings;_data=[];selectedItems=[];isDropdownOpen=!0;_placeholder="Select";_sourceDataType=null;_sourceDataFields=[];filter=new Qn(this.data);defaultSettings={singleSelection:!1,idField:"id",textField:"text",disabledField:"isDisabled",enableCheckAll:!0,selectAllText:"Select All",unSelectAllText:"UnSelect All",allowSearchFilter:!1,limitSelection:-1,clearSearchFilter:!0,maxHeight:197,itemsShowLimit:999999999999,searchPlaceholderText:"Search",noDataAvailablePlaceholderText:"No data available",noFilteredDataAvailablePlaceholderText:"No filtered data available",closeDropDownOnSelection:!1,showSelectedItemsAtTop:!1,defaultOpen:!1,allowRemoteDataSearch:!1};set placeholder(n){n?this._placeholder=n:this._placeholder="Select"}disabled=!1;set settings(n){n?this._settings=Object.assign(this.defaultSettings,n):this._settings=Object.assign(this.defaultSettings)}set data(n){if(!n)this._data=[];else{let i=n[0];this._sourceDataType=typeof i,this._sourceDataFields=this.getFields(i),this._data=n.map(o=>typeof o=="string"||typeof o=="number"?new Qn(o):new Qn({id:o[this._settings.idField],text:o[this._settings.textField],isDisabled:o[this._settings.disabledField]}))}}onFilterChange=new $;onDropDownClose=new $;onSelect=new $;onDeSelect=new $;onSelectAll=new $;onDeSelectAll=new $;onTouchedCallback=W1;onChangeCallback=W1;onFilterTextChange(n){this.onFilterChange.emit(n)}constructor(n,i){this.listFilterPipe=n,this.cdr=i}onItemClick(n,i){if(this.disabled||i.isDisabled)return!1;let o=this.isSelected(i),r=this._settings.limitSelection===-1||this._settings.limitSelection>0&&this.selectedItems.length<this._settings.limitSelection;o?this.removeSelected(i):r&&this.addSelected(i),this._settings.singleSelection&&this._settings.closeDropDownOnSelection&&this.closeDropdown()}writeValue(n){if(n!=null&&n.length>0)if(this._settings.singleSelection)try{if(n.length>=1){let i=n[0];this.selectedItems=[typeof i=="string"||typeof i=="number"?new Qn(i):new Qn({id:i[this._settings.idField],text:i[this._settings.textField],isDisabled:i[this._settings.disabledField]})]}}catch{}else{let i=n.map(o=>typeof o=="string"||typeof o=="number"?new Qn(o):new Qn({id:o[this._settings.idField],text:o[this._settings.textField],isDisabled:o[this._settings.disabledField]}));this._settings.limitSelection>0?this.selectedItems=i.splice(0,this._settings.limitSelection):this.selectedItems=i}else this.selectedItems=[];this.onChangeCallback(n),this.cdr.markForCheck()}registerOnChange(n){this.onChangeCallback=n}registerOnTouched(n){this.onTouchedCallback=n}onTouched(){this.onTouchedCallback()}trackByFn(n,i){return i.id}isSelected(n){let i=!1;return this.selectedItems.forEach(o=>{n.id===o.id&&(i=!0)}),i}isLimitSelectionReached(){return this._settings.limitSelection===this.selectedItems.length}isAllItemsSelected(){let n=this.listFilterPipe.transform(this._data,this.filter),i=n.filter(o=>o.isDisabled).length;return(!this.data||this.data.length===0)&&this._settings.allowRemoteDataSearch?!1:n.length===this.selectedItems.length+i}showButton(){return this._settings.singleSelection?!1:!(this._settings.limitSelection>0)}itemShowRemaining(){return this.selectedItems.length-this._settings.itemsShowLimit}addSelected(n){this._settings.singleSelection?(this.selectedItems=[],this.selectedItems.push(n)):this.selectedItems.push(n),this.onChangeCallback(this.emittedValue(this.selectedItems)),this.onSelect.emit(this.emittedValue(n))}removeSelected(n){this.selectedItems.forEach(i=>{n.id===i.id&&this.selectedItems.splice(this.selectedItems.indexOf(i),1)}),this.onChangeCallback(this.emittedValue(this.selectedItems)),this.onDeSelect.emit(this.emittedValue(n))}emittedValue(n){let i=[];if(Array.isArray(n))n.map(o=>{i.push(this.objectify(o))});else if(n)return this.objectify(n);return i}objectify(n){if(this._sourceDataType==="object"){let i={};return i[this._settings.idField]=n.id,i[this._settings.textField]=n.text,this._sourceDataFields.includes(this._settings.disabledField)&&(i[this._settings.disabledField]=n.isDisabled),i}return this._sourceDataType==="number"?Number(n.id):n.text}toggleDropdown(n){n.preventDefault(),!(this.disabled&&this._settings.singleSelection)&&(this._settings.defaultOpen=!this._settings.defaultOpen,this._settings.defaultOpen||this.onDropDownClose.emit())}closeDropdown(){this._settings.defaultOpen=!1,this._settings.clearSearchFilter&&(this.filter.text=""),this.onDropDownClose.emit()}toggleSelectAll(){if(this.disabled)return!1;this.isAllItemsSelected()?(this.selectedItems=[],this.onDeSelectAll.emit(this.emittedValue(this.selectedItems))):(this.selectedItems=this.listFilterPipe.transform(this._data,this.filter).filter(n=>!n.isDisabled).slice(),this.onSelectAll.emit(this.emittedValue(this.selectedItems))),this.onChangeCallback(this.emittedValue(this.selectedItems))}getFields(n){let i=[];if(typeof n!="object")return i;for(let o in n)i.push(o);return i}static \u0275fac=function(i){return new(i||e)(H(of),H(Gt))};static \u0275cmp=ee({type:e,selectors:[["ng-multiselect-dropdown"]],hostBindings:function(i,o){i&1&&x("blur",function(){return o.onTouched()})},inputs:{placeholder:"placeholder",disabled:"disabled",settings:"settings",data:"data"},outputs:{onFilterChange:"onFilterChange",onDropDownClose:"onDropDownClose",onSelect:"onSelect",onDeSelect:"onDeSelect",onSelectAll:"onSelectAll",onDeSelectAll:"onDeSelectAll"},features:[Ci([xx])],decls:18,vars:23,consts:[["tabindex","0",1,"multiselect-dropdown",3,"blur","clickOutside"],["tabindex","-1",1,"dropdown-btn",3,"click"],[4,"ngIf"],["class","selected-item-container",4,"ngFor","ngForOf","ngForTrackBy"],[2,"float","right !important","padding-right","4px",3,"ngClass"],["style","padding-right: 15px;",4,"ngIf"],[1,"dropdown-multiselect__caret"],[1,"dropdown-list",3,"hidden"],[1,"item1"],["class","multiselect-item-checkbox","style","border-bottom: 1px solid #ccc;padding:10px",3,"click",4,"ngIf"],["class","filter-textbox",4,"ngIf"],[1,"item2"],["class","multiselect-item-checkbox",3,"click",4,"ngFor","ngForOf"],["class","no-filtered-data",4,"ngIf"],["class","no-data",4,"ngIf"],[1,"selected-item-container"],[1,"selected-item",3,"hidden"],[2,"padding-left","2px","color","white",3,"click"],[2,"padding-right","15px"],[1,"multiselect-item-checkbox",2,"border-bottom","1px solid #ccc","padding","10px",3,"click"],["type","checkbox","aria-label","multiselect-select-all",3,"checked","disabled"],[1,"filter-textbox"],["type","text","aria-label","multiselect-search",3,"ngModelChange","readOnly","placeholder","ngModel"],[1,"multiselect-item-checkbox",3,"click"],["type","checkbox",3,"checked","disabled"],[1,"no-filtered-data"],[1,"no-data"]],template:function(i,o){i&1&&(_(0,"div",0),x("blur",function(){return o.onTouched()})("clickOutside",function(){return o.closeDropdown()}),_(1,"div")(2,"span",1),x("click",function(s){return o.toggleDropdown(s)}),G(3,vx,2,1,"span",2)(4,bx,6,2,"span",3),_(5,"span",4),G(6,wx,2,1,"span",5),V(7,"span",6),y()()(),_(8,"div",7)(9,"ul",8),G(10,Sx,4,3,"li",9)(11,Cx,2,3,"li",10),y(),_(12,"ul",11),G(13,Tx,4,4,"li",12),Gr(14,"multiSelectFilter"),G(15,Mx,3,1,"li",13),Gr(16,"multiSelectFilter"),G(17,Dx,3,1,"li",14),y()()()),i&2&&(g(),_t("disabled",o.disabled),g(2),C("ngIf",o.selectedItems.length==0),g(),C("ngForOf",o.selectedItems)("ngForTrackBy",o.trackByFn),g(),C("ngClass",dn(21,yx,o._settings.defaultOpen)),g(),C("ngIf",o.itemShowRemaining()>0),g(2),C("hidden",!o._settings.defaultOpen),g(2),C("ngIf",(o._data.length>0||o._settings.allowRemoteDataSearch)&&!o._settings.singleSelection&&o._settings.enableCheckAll&&o._settings.limitSelection===-1),g(),C("ngIf",(o._data.length>0||o._settings.allowRemoteDataSearch)&&o._settings.allowSearchFilter),g(),wi("max-height",o._settings.maxHeight+"px"),g(),C("ngForOf",Hu(14,15,o._data,o.filter)),g(2),C("ngIf",o._data.length!=0&&Hu(16,18,o._data,o.filter).length==0&&!o._settings.allowRemoteDataSearch),g(2),C("ngIf",o._data.length==0&&!o._settings.allowRemoteDataSearch))},dependencies:[Ti,lo,$i,Li,oi,$t,Ex,of],styles:['.multiselect-dropdown[_ngcontent-%COMP%]{position:relative;width:100%;font-size:inherit;font-family:inherit}.multiselect-dropdown[_ngcontent-%COMP%]   .dropdown-btn[_ngcontent-%COMP%]{display:inline-block;border:1px solid #adadad;width:100%;padding:6px 12px;margin-bottom:0;font-weight:400;line-height:1.52857143;text-align:left;vertical-align:middle;cursor:pointer;background-image:none;border-radius:4px}.multiselect-dropdown[_ngcontent-%COMP%]   .dropdown-btn[_ngcontent-%COMP%]   .selected-item-container[_ngcontent-%COMP%]{display:flex;float:left}.multiselect-dropdown[_ngcontent-%COMP%]   .dropdown-btn[_ngcontent-%COMP%]   .selected-item-container[_ngcontent-%COMP%]   .selected-item[_ngcontent-%COMP%]{border:1px solid #337ab7;margin-right:4px;background:#337ab7;padding:0 5px;color:#fff;border-radius:2px;float:left;max-width:100px}.multiselect-dropdown[_ngcontent-%COMP%]   .dropdown-btn[_ngcontent-%COMP%]   .selected-item-container[_ngcontent-%COMP%]   .selected-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis}.multiselect-dropdown[_ngcontent-%COMP%]   .dropdown-btn[_ngcontent-%COMP%]   .selected-item-container[_ngcontent-%COMP%]   .selected-item[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none}.multiselect-dropdown[_ngcontent-%COMP%]   .dropdown-btn[_ngcontent-%COMP%]   .selected-item[_ngcontent-%COMP%]:hover{box-shadow:1px 1px #959595}.multiselect-dropdown[_ngcontent-%COMP%]   .dropdown-btn[_ngcontent-%COMP%]   .dropdown-multiselect__caret[_ngcontent-%COMP%]{line-height:16px;display:block;position:absolute;box-sizing:border-box;width:40px;height:38px;right:1px;top:0;padding:4px 8px;margin:0;text-decoration:none;text-align:center;cursor:pointer;transition:transform .2s ease}.multiselect-dropdown[_ngcontent-%COMP%]   .dropdown-btn[_ngcontent-%COMP%]   .dropdown-multiselect__caret[_ngcontent-%COMP%]:before{position:relative;right:0;top:65%;color:#999;margin-top:4px;border-style:solid;border-width:8px 8px 0 8px;border-color:#999999 transparent;content:""}.multiselect-dropdown[_ngcontent-%COMP%]   .dropdown-btn[_ngcontent-%COMP%]   .dropdown-multiselect--active[_ngcontent-%COMP%]   .dropdown-multiselect__caret[_ngcontent-%COMP%]{transform:rotate(180deg)}.multiselect-dropdown[_ngcontent-%COMP%]   .disabled[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{background-color:#eceeef}.dropdown-list[_ngcontent-%COMP%]{position:absolute;padding-top:6px;width:100%;z-index:9999;border:1px solid #ccc;border-radius:3px;background:#fff;margin-top:10px;box-shadow:0 1px 5px #959595}.dropdown-list[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{padding:0;list-style:none;overflow:auto;margin:0}.dropdown-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{padding:6px 10px;cursor:pointer;text-align:left}.dropdown-list[_ngcontent-%COMP%]   .filter-textbox[_ngcontent-%COMP%]{border-bottom:1px solid #ccc;position:relative;padding:10px}.dropdown-list[_ngcontent-%COMP%]   .filter-textbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{border:0px;width:100%;padding:0 0 0 26px}.dropdown-list[_ngcontent-%COMP%]   .filter-textbox[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none}.multiselect-item-checkbox[_ngcontent-%COMP%]:hover{background-color:#e4e3e3}.multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{border:0;clip:rect(0 0 0 0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:focus + div[_ngcontent-%COMP%]:before, .multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:hover + div[_ngcontent-%COMP%]:before{border-color:#337ab7;background-color:#f2f2f2}.multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:active + div[_ngcontent-%COMP%]:before{transition-duration:0s}.multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%] + div[_ngcontent-%COMP%]{position:relative;padding-left:2em;vertical-align:middle;-webkit-user-select:none;user-select:none;cursor:pointer;margin:0;color:#000}.multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%] + div[_ngcontent-%COMP%]:before{box-sizing:content-box;content:"";color:#337ab7;position:absolute;top:50%;left:0;width:14px;height:14px;margin-top:-9px;border:2px solid #337ab7;text-align:center;transition:all .4s ease}.multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%] + div[_ngcontent-%COMP%]:after{box-sizing:content-box;content:"";background-color:#337ab7;position:absolute;top:50%;left:4px;width:10px;height:10px;margin-top:-5px;transform:scale(0);transform-origin:50%;transition:transform .2s ease-out}.multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:disabled + div[_ngcontent-%COMP%]:before{border-color:#ccc}.multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:disabled:focus + div[_ngcontent-%COMP%]:before   .multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:disabled:hover + div[_ngcontent-%COMP%]:before{background-color:inherit}.multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:disabled:checked + div[_ngcontent-%COMP%]:before{background-color:#ccc}.multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%] + div[_ngcontent-%COMP%]:after{background-color:transparent;top:50%;left:4px;width:8px;height:3px;margin-top:-4px;border-style:solid;border-color:#fff;border-width:0 0 3px 3px;border-image:none;transform:rotate(-45deg) scale(0)}.multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + div[_ngcontent-%COMP%]:after{content:"";transform:rotate(-45deg) scale(1);transition:transform .2s ease-out}.multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + div[_ngcontent-%COMP%]:before{animation:_ngcontent-%COMP%_borderscale .2s ease-in;background:#337ab7}.multiselect-item-checkbox[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + div[_ngcontent-%COMP%]:after{transform:rotate(-45deg) scale(1)}@keyframes _ngcontent-%COMP%_borderscale{50%{box-shadow:0 0 0 2px #337ab7}}'],changeDetection:0})}return e})(),q1=(()=>{class e{static forRoot(){return{ngModule:e}}static \u0275fac=function(i){return new(i||e)};static \u0275mod=Bt({type:e});static \u0275inj=Ht({providers:[of],imports:[Te,bt]})}return e})();function Ox(e,t){if(e&1){let n=oe();_(0,"button",7),x("click",function(){A(n);let o=T();return P(o.selExpanded=!o.selExpanded)}),V(1,"i",8),y()}if(e&2){let n=T();Mg("title","Selected ",n.title,"")}}function kx(e,t){if(e&1&&(_(0,"div"),L(1),y()),e&2){let n=t.$implicit,i=t.index;g(),Dg("",i+1,". ",n,"")}}function Ax(e,t){if(e&1&&(_(0,"div",9),G(1,kx,2,2,"div",10),y()),e&2){let n=T();g(),C("ngForOf",n.selectedValues)}}var Z1=(()=>{let t=class t{constructor(i){this.fb=i,this.title="Multi Select",this.options=[],this.disabled=!1,this.ShowFilter=!0,this.itemsShowLimit=3,this.enableCheckAll=!0,this.limitSelection=-1,this.singleSelection=!1,this.valueField="id",this.displayField="",this.selectedItemsChanged=new $,this.selectedItems=[],this.selectedValues=[],this.dropdownSettings={},this.selExpanded=!1}writeValue(i){console.log("from parent",i),this.selectedItems=i}ngOnInit(){this.dropdownSettings={singleSelection:this.singleSelection,itemsShowLimit:this.itemsShowLimit,enableCheckAll:this.enableCheckAll,limitSelection:this.limitSelection,allowSearchFilter:this.ShowFilter,idField:this.valueField,textField:this.displayField}}onSelectionChanged(i){this.selectedValues=i.map(o=>o.value),this.selectedItemsChanged.emit(i)}};t.\u0275fac=function(o){return new(o||t)(H(U1))},t.\u0275cmp=ee({type:t,selectors:[["app-multi-select"]],inputs:{title:"title",options:"options",disabled:"disabled",ShowFilter:"ShowFilter",itemsShowLimit:"itemsShowLimit",enableCheckAll:"enableCheckAll",limitSelection:"limitSelection",singleSelection:"singleSelection",valueField:"valueField",displayField:"displayField",selectedItems:"selectedItems"},outputs:{selectedItemsChanged:"selectedItemsChanged"},standalone:!0,features:[ae],decls:10,vars:9,consts:[[1,"d-flex"],["name","selItems",1,"flex-fill",2,"align-content","center",3,"ngModelChange","placeholder","ngModel","settings","data","disabled"],[1,"d-grid"],["title","Clear Selection",1,"ms-auto","no-border","rounded-0","btn","btn-sm",3,"click","disabled"],[1,"fa-solid","fa-filter-circle-xmark","text-primary"],["class","p-0 btn rounded-0 btn-sm no-border","type","button",3,"title","click",4,"ngIf"],["class","text-info",4,"ngIf"],["type","button",1,"p-0","btn","rounded-0","btn-sm","no-border",3,"click","title"],[1,"fa-solid","fa-list-check"],[1,"text-info"],[4,"ngFor","ngForOf"]],template:function(o,r){o&1&&(_(0,"div")(1,"h6"),L(2),y(),_(3,"div",0)(4,"ng-multiselect-dropdown",1),Qe("ngModelChange",function(a){return Ke(r.selectedItems,a)||(r.selectedItems=a),a}),x("ngModelChange",function(a){return r.onSelectionChanged(a)}),y(),_(5,"div",2)(6,"button",3),x("click",function(){return r.selectedItems=[]}),V(7,"i",4),y(),G(8,Ox,2,2,"button",5),y()(),G(9,Ax,2,1,"div",6),y()),o&2&&(g(2),de(r.title),g(2),C("placeholder",r.title),Ye("ngModel",r.selectedItems),C("settings",r.dropdownSettings)("data",r.options)("disabled",r.disabled),g(2),C("disabled",r.selectedItems.length<1),g(2),C("ngIf",r.selectedValues!=null&&r.selectedValues.length>0),g(),C("ngIf",r.selExpanded))},dependencies:[q1,rf,Te,lo,$i,bt,oi,$t],styles:[`.multiselect-dropdown .dropdown-btn .selected-item-container .selected-item{margin-top:4px!important;max-width:max-content!important;background:#ee784e!important}
`],encapsulation:2});let e=t;return e})();var Y1=(()=>{let t=class t{constructor(){this.ShowFilter=!0,this.itemsShowLimit="2",this.selectedItemsChanged=new $}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=ee({type:t,selectors:[["app-dropdown-filter"]],inputs:{ShowFilter:"ShowFilter",title:"title",options:"options",itemsShowLimit:"itemsShowLimit",selectedItems:"selectedItems",valueField:"valueField",displayField:"displayField"},outputs:{selectedItemsChanged:"selectedItemsChanged"},standalone:!0,features:[ae],decls:1,vars:7,consts:[[3,"selectedItemsChanged","ShowFilter","title","options","valueField","displayField","itemsShowLimit","selectedItems"]],template:function(o,r){o&1&&(_(0,"app-multi-select",0),x("selectedItemsChanged",function(a){return r.selectedItemsChanged.emit(a)}),y()),o&2&&C("ShowFilter",r.ShowFilter)("title",r.title)("options",r.options)("valueField",r.valueField)("displayField",r.displayField)("itemsShowLimit",r.itemsShowLimit)("selectedItems",r.selectedItems)},dependencies:[Z1,Te]});let e=t;return e})();var Px=["content"],Fx=["scroll"],Rx=["padding"],J1=["*"],Dl=e=>({searchTerm:e});function Lx(e,t){if(e&1&&(_(0,"div",3),Lu(1,6),y()),e&2){let n=T();g(),C("ngTemplateOutlet",n.headerTemplate)("ngTemplateOutletContext",dn(2,Dl,n.filterValue))}}function Nx(e,t){if(e&1&&(_(0,"div",5),Lu(1,6),y()),e&2){let n=T();g(),C("ngTemplateOutlet",n.footerTemplate)("ngTemplateOutletContext",dn(2,Dl,n.filterValue))}}var Vx=["searchInput"],Hx=["clearButton"],Bx=(e,t,n)=>({item:e,clear:t,label:n}),Gx=(e,t)=>({items:e,clear:t}),jx=(e,t,n,i)=>({item:e,item$:t,index:n,searchTerm:i});function zx(e,t){if(e&1){let n=oe();_(0,"span",21),x("click",function(){A(n);let o=T().$implicit,r=T(2);return P(r.unselect(o))}),L(1,"\xD7"),y(),V(2,"span",22)}if(e&2){let n=T().$implicit,i=T(2);g(2),C("ngItemLabel",n.label)("escape",i.escapeHTML)}}function Ux(e,t){}function $x(e,t){if(e&1&&(_(0,"div",20),G(1,zx,3,2,"ng-template",null,1,ui)(3,Ux,0,0,"ng-template",12),y()),e&2){let n=t.$implicit,i=He(2),o=T(2);_t("ng-value-disabled",n.disabled),g(3),C("ngTemplateOutlet",o.labelTemplate||i)("ngTemplateOutletContext",Nu(4,Bx,n.value,o.clearItem,n.label))}}function Wx(e,t){if(e&1&&zi(0,$x,4,8,"div",19,Ru().trackByOption,!0),e&2){let n=T();Ui(n.selectedItems)}}function qx(e,t){}function Zx(e,t){if(e&1&&G(0,qx,0,0,"ng-template",12),e&2){let n=T();C("ngTemplateOutlet",n.multiLabelTemplate)("ngTemplateOutletContext",Br(2,Gx,n.selectedValues,n.clearItem))}}function Yx(e,t){e&1&&V(0,"div",24)}function Kx(e,t){}function Qx(e,t){if(e&1&&G(0,Yx,1,0,"ng-template",null,2,ui)(2,Kx,0,0,"ng-template",23),e&2){let n=He(1),i=T();g(2),C("ngTemplateOutlet",i.loadingSpinnerTemplate||n)}}function Jx(e,t){if(e&1&&(_(0,"span",15,3)(2,"span",25),L(3,"\xD7"),y()()),e&2){let n=T();Tg("title",n.clearAllText)}}function Xx(e,t){if(e&1&&V(0,"span",30),e&2){let n=T().$implicit,i=T(2);C("ngItemLabel",n.label)("escape",i.escapeHTML)}}function eI(e,t){}function tI(e,t){if(e&1){let n=oe();_(0,"div",29),x("click",function(){let o=A(n).$implicit,r=T(2);return P(r.toggleItem(o))})("mouseover",function(){let o=A(n).$implicit,r=T(2);return P(r.onItemHover(o))}),G(1,Xx,1,2,"ng-template",null,4,ui)(3,eI,0,0,"ng-template",12),y()}if(e&2){let n=t.$implicit,i=He(2),o=T(2);_t("ng-option-disabled",n.disabled)("ng-option-selected",n.selected)("ng-optgroup",n.children)("ng-option",!n.children)("ng-option-child",!!n.parent)("ng-option-marked",n===o.itemsList.markedItem),At("role",n.children?"group":"option")("aria-selected",n.selected)("id",n==null?null:n.htmlId),g(3),C("ngTemplateOutlet",n.children?o.optgroupTemplate||i:o.optionTemplate||i)("ngTemplateOutletContext",Eg(17,jx,n.value,n,n.index,o.searchTerm))}}function iI(e,t){if(e&1&&(_(0,"span")(1,"span",32),L(2),y(),L(3),y()),e&2){let n=T(3);g(2),de(n.addTagText),g(),yt('"',n.searchTerm,'"')}}function nI(e,t){}function oI(e,t){if(e&1){let n=oe();_(0,"div",31),x("mouseover",function(){A(n);let o=T(2);return P(o.itemsList.unmarkItem())})("click",function(){A(n);let o=T(2);return P(o.selectTag())}),G(1,iI,4,2,"ng-template",null,5,ui)(3,nI,0,0,"ng-template",12),y()}if(e&2){let n=He(2),i=T(2);_t("ng-option-marked",!i.itemsList.markedItem),g(3),C("ngTemplateOutlet",i.tagTemplate||n)("ngTemplateOutletContext",dn(4,Dl,i.searchTerm))}}function rI(e,t){if(e&1&&(_(0,"div",33),L(1),y()),e&2){let n=T(3);g(),de(n.notFoundText)}}function sI(e,t){}function aI(e,t){if(e&1&&G(0,rI,2,1,"ng-template",null,6,ui)(2,sI,0,0,"ng-template",12),e&2){let n=He(1),i=T(2);g(2),C("ngTemplateOutlet",i.notFoundTemplate||n)("ngTemplateOutletContext",dn(2,Dl,i.searchTerm))}}function lI(e,t){if(e&1&&(_(0,"div",33),L(1),y()),e&2){let n=T(3);g(),de(n.typeToSearchText)}}function cI(e,t){}function dI(e,t){if(e&1&&G(0,lI,2,1,"ng-template",null,7,ui)(2,cI,0,0,"ng-template",23),e&2){let n=He(1),i=T(2);g(2),C("ngTemplateOutlet",i.typeToSearchTemplate||n)}}function uI(e,t){if(e&1&&(_(0,"div",33),L(1),y()),e&2){let n=T(3);g(),de(n.loadingText)}}function pI(e,t){}function hI(e,t){if(e&1&&G(0,uI,2,1,"ng-template",null,8,ui)(2,pI,0,0,"ng-template",12),e&2){let n=He(1),i=T(2);g(2),C("ngTemplateOutlet",i.loadingTextTemplate||n)("ngTemplateOutletContext",dn(2,Dl,i.searchTerm))}}function mI(e,t){if(e&1){let n=oe();_(0,"ng-dropdown-panel",26),x("update",function(o){A(n);let r=T();return P(r.viewPortItems=o)})("scroll",function(o){A(n);let r=T();return P(r.scroll.emit(o))})("scrollToEnd",function(o){A(n);let r=T();return P(r.scrollToEnd.emit(o))})("outsideClick",function(){A(n);let o=T();return P(o.close())}),Lr(1),zi(2,tI,4,22,"div",27,Ru().trackByOption,!0),G(4,oI,4,6,"div",28),Nr(),G(5,aI,3,4)(6,dI,3,1)(7,hI,3,4),y()}if(e&2){let n=T();_t("ng-select-multiple",n.multiple),C("virtualScroll",n.virtualScroll)("bufferAmount",n.bufferAmount)("appendTo",n.appendTo)("position",n.dropdownPosition)("headerTemplate",n.headerTemplate)("footerTemplate",n.footerTemplate)("filterValue",n.searchTerm)("items",n.itemsList.filteredItems)("markedItem",n.itemsList.markedItem)("ngClass",n.appendTo?n.classes:null)("id",n.dropdownId),g(2),Ui(n.viewPortItems),g(2),Ve(4,n.showAddTag?4:-1),g(),Ve(5,n.showNoItemsFound()?5:-1),g(),Ve(6,n.showTypeToSearch()?6:-1),g(),Ve(7,n.loading&&n.itemsList.filteredItems.length===0?7:-1)}}var X1=/[&<>"']/g,fI=RegExp(X1.source),gI={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function _I(e){return e&&fI.test(e)?e.replace(X1,t=>gI[t]):e}function qe(e){return e!=null}function Ml(e){return typeof e=="object"&&qe(e)}function yI(e){return e instanceof Promise}function cu(e){return e instanceof Function}var vI=(()=>{let t=class t{constructor(i){this.element=i,this.escape=!0}ngOnChanges(i){this.element.nativeElement.innerHTML=this.escape?_I(this.ngItemLabel):this.ngItemLabel}};t.\u0275fac=function(o){return new(o||t)(H(ze))},t.\u0275dir=ye({type:t,selectors:[["","ngItemLabel",""]],inputs:{ngItemLabel:"ngItemLabel",escape:"escape"},features:[Zt]});let e=t;return e})(),bI=(()=>{let t=class t{constructor(i){this.template=i}};t.\u0275fac=function(o){return new(o||t)(H(Oe))},t.\u0275dir=ye({type:t,selectors:[["","ng-option-tmp",""]]});let e=t;return e})(),wI=(()=>{let t=class t{constructor(i){this.template=i}};t.\u0275fac=function(o){return new(o||t)(H(Oe))},t.\u0275dir=ye({type:t,selectors:[["","ng-optgroup-tmp",""]]});let e=t;return e})(),SI=(()=>{let t=class t{constructor(i){this.template=i}};t.\u0275fac=function(o){return new(o||t)(H(Oe))},t.\u0275dir=ye({type:t,selectors:[["","ng-label-tmp",""]]});let e=t;return e})(),CI=(()=>{let t=class t{constructor(i){this.template=i}};t.\u0275fac=function(o){return new(o||t)(H(Oe))},t.\u0275dir=ye({type:t,selectors:[["","ng-multi-label-tmp",""]]});let e=t;return e})(),TI=(()=>{let t=class t{constructor(i){this.template=i}};t.\u0275fac=function(o){return new(o||t)(H(Oe))},t.\u0275dir=ye({type:t,selectors:[["","ng-header-tmp",""]]});let e=t;return e})(),MI=(()=>{let t=class t{constructor(i){this.template=i}};t.\u0275fac=function(o){return new(o||t)(H(Oe))},t.\u0275dir=ye({type:t,selectors:[["","ng-footer-tmp",""]]});let e=t;return e})(),DI=(()=>{let t=class t{constructor(i){this.template=i}};t.\u0275fac=function(o){return new(o||t)(H(Oe))},t.\u0275dir=ye({type:t,selectors:[["","ng-notfound-tmp",""]]});let e=t;return e})(),EI=(()=>{let t=class t{constructor(i){this.template=i}};t.\u0275fac=function(o){return new(o||t)(H(Oe))},t.\u0275dir=ye({type:t,selectors:[["","ng-typetosearch-tmp",""]]});let e=t;return e})(),xI=(()=>{let t=class t{constructor(i){this.template=i}};t.\u0275fac=function(o){return new(o||t)(H(Oe))},t.\u0275dir=ye({type:t,selectors:[["","ng-loadingtext-tmp",""]]});let e=t;return e})(),II=(()=>{let t=class t{constructor(i){this.template=i}};t.\u0275fac=function(o){return new(o||t)(H(Oe))},t.\u0275dir=ye({type:t,selectors:[["","ng-tag-tmp",""]]});let e=t;return e})(),OI=(()=>{let t=class t{constructor(i){this.template=i}};t.\u0275fac=function(o){return new(o||t)(H(Oe))},t.\u0275dir=ye({type:t,selectors:[["","ng-loadingspinner-tmp",""]]});let e=t;return e})();function eS(){return"axxxxxxxxxxx".replace(/[x]/g,()=>(Math.random()*16|0).toString(16))}var kI={"\u24B6":"A",\uFF21:"A",\u00C0:"A",\u00C1:"A",\u00C2:"A",\u1EA6:"A",\u1EA4:"A",\u1EAA:"A",\u1EA8:"A",\u00C3:"A",\u0100:"A",\u0102:"A",\u1EB0:"A",\u1EAE:"A",\u1EB4:"A",\u1EB2:"A",\u0226:"A",\u01E0:"A",\u00C4:"A",\u01DE:"A",\u1EA2:"A",\u00C5:"A",\u01FA:"A",\u01CD:"A",\u0200:"A",\u0202:"A",\u1EA0:"A",\u1EAC:"A",\u1EB6:"A",\u1E00:"A",\u0104:"A","\u023A":"A","\u2C6F":"A","\uA732":"AA",\u00C6:"AE",\u01FC:"AE",\u01E2:"AE","\uA734":"AO","\uA736":"AU","\uA738":"AV","\uA73A":"AV","\uA73C":"AY","\u24B7":"B",\uFF22:"B",\u1E02:"B",\u1E04:"B",\u1E06:"B","\u0243":"B",\u0182:"B",\u0181:"B","\u24B8":"C",\uFF23:"C",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u00C7:"C",\u1E08:"C",\u0187:"C","\u023B":"C","\uA73E":"C","\u24B9":"D",\uFF24:"D",\u1E0A:"D",\u010E:"D",\u1E0C:"D",\u1E10:"D",\u1E12:"D",\u1E0E:"D",\u0110:"D",\u018B:"D",\u018A:"D",\u0189:"D","\uA779":"D",\u01F1:"DZ",\u01C4:"DZ",\u01F2:"Dz",\u01C5:"Dz","\u24BA":"E",\uFF25:"E",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u1EC0:"E",\u1EBE:"E",\u1EC4:"E",\u1EC2:"E",\u1EBC:"E",\u0112:"E",\u1E14:"E",\u1E16:"E",\u0114:"E",\u0116:"E",\u00CB:"E",\u1EBA:"E",\u011A:"E",\u0204:"E",\u0206:"E",\u1EB8:"E",\u1EC6:"E",\u0228:"E",\u1E1C:"E",\u0118:"E",\u1E18:"E",\u1E1A:"E",\u0190:"E",\u018E:"E","\u24BB":"F",\uFF26:"F",\u1E1E:"F",\u0191:"F","\uA77B":"F","\u24BC":"G",\uFF27:"G",\u01F4:"G",\u011C:"G",\u1E20:"G",\u011E:"G",\u0120:"G",\u01E6:"G",\u0122:"G",\u01E4:"G",\u0193:"G","\uA7A0":"G","\uA77D":"G","\uA77E":"G","\u24BD":"H",\uFF28:"H",\u0124:"H",\u1E22:"H",\u1E26:"H",\u021E:"H",\u1E24:"H",\u1E28:"H",\u1E2A:"H",\u0126:"H","\u2C67":"H","\u2C75":"H","\uA78D":"H","\u24BE":"I",\uFF29:"I",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u0128:"I",\u012A:"I",\u012C:"I",\u0130:"I",\u00CF:"I",\u1E2E:"I",\u1EC8:"I",\u01CF:"I",\u0208:"I",\u020A:"I",\u1ECA:"I",\u012E:"I",\u1E2C:"I",\u0197:"I","\u24BF":"J",\uFF2A:"J",\u0134:"J","\u0248":"J","\u24C0":"K",\uFF2B:"K",\u1E30:"K",\u01E8:"K",\u1E32:"K",\u0136:"K",\u1E34:"K",\u0198:"K","\u2C69":"K","\uA740":"K","\uA742":"K","\uA744":"K","\uA7A2":"K","\u24C1":"L",\uFF2C:"L",\u013F:"L",\u0139:"L",\u013D:"L",\u1E36:"L",\u1E38:"L",\u013B:"L",\u1E3C:"L",\u1E3A:"L",\u0141:"L","\u023D":"L","\u2C62":"L","\u2C60":"L","\uA748":"L","\uA746":"L","\uA780":"L",\u01C7:"LJ",\u01C8:"Lj","\u24C2":"M",\uFF2D:"M",\u1E3E:"M",\u1E40:"M",\u1E42:"M","\u2C6E":"M",\u019C:"M","\u24C3":"N",\uFF2E:"N",\u01F8:"N",\u0143:"N",\u00D1:"N",\u1E44:"N",\u0147:"N",\u1E46:"N",\u0145:"N",\u1E4A:"N",\u1E48:"N","\u0220":"N",\u019D:"N","\uA790":"N","\uA7A4":"N",\u01CA:"NJ",\u01CB:"Nj","\u24C4":"O",\uFF2F:"O",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u1ED2:"O",\u1ED0:"O",\u1ED6:"O",\u1ED4:"O",\u00D5:"O",\u1E4C:"O",\u022C:"O",\u1E4E:"O",\u014C:"O",\u1E50:"O",\u1E52:"O",\u014E:"O",\u022E:"O",\u0230:"O",\u00D6:"O",\u022A:"O",\u1ECE:"O",\u0150:"O",\u01D1:"O",\u020C:"O",\u020E:"O",\u01A0:"O",\u1EDC:"O",\u1EDA:"O",\u1EE0:"O",\u1EDE:"O",\u1EE2:"O",\u1ECC:"O",\u1ED8:"O",\u01EA:"O",\u01EC:"O",\u00D8:"O",\u01FE:"O",\u0186:"O",\u019F:"O","\uA74A":"O","\uA74C":"O",\u01A2:"OI","\uA74E":"OO",\u0222:"OU","\u24C5":"P",\uFF30:"P",\u1E54:"P",\u1E56:"P",\u01A4:"P","\u2C63":"P","\uA750":"P","\uA752":"P","\uA754":"P","\u24C6":"Q",\uFF31:"Q","\uA756":"Q","\uA758":"Q","\u024A":"Q","\u24C7":"R",\uFF32:"R",\u0154:"R",\u1E58:"R",\u0158:"R",\u0210:"R",\u0212:"R",\u1E5A:"R",\u1E5C:"R",\u0156:"R",\u1E5E:"R","\u024C":"R","\u2C64":"R","\uA75A":"R","\uA7A6":"R","\uA782":"R","\u24C8":"S",\uFF33:"S","\u1E9E":"S",\u015A:"S",\u1E64:"S",\u015C:"S",\u1E60:"S",\u0160:"S",\u1E66:"S",\u1E62:"S",\u1E68:"S",\u0218:"S",\u015E:"S","\u2C7E":"S","\uA7A8":"S","\uA784":"S","\u24C9":"T",\uFF34:"T",\u1E6A:"T",\u0164:"T",\u1E6C:"T",\u021A:"T",\u0162:"T",\u1E70:"T",\u1E6E:"T",\u0166:"T",\u01AC:"T",\u01AE:"T","\u023E":"T","\uA786":"T","\uA728":"TZ","\u24CA":"U",\uFF35:"U",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u0168:"U",\u1E78:"U",\u016A:"U",\u1E7A:"U",\u016C:"U",\u00DC:"U",\u01DB:"U",\u01D7:"U",\u01D5:"U",\u01D9:"U",\u1EE6:"U",\u016E:"U",\u0170:"U",\u01D3:"U",\u0214:"U",\u0216:"U",\u01AF:"U",\u1EEA:"U",\u1EE8:"U",\u1EEE:"U",\u1EEC:"U",\u1EF0:"U",\u1EE4:"U",\u1E72:"U",\u0172:"U",\u1E76:"U",\u1E74:"U","\u0244":"U","\u24CB":"V",\uFF36:"V",\u1E7C:"V",\u1E7E:"V",\u01B2:"V","\uA75E":"V","\u0245":"V","\uA760":"VY","\u24CC":"W",\uFF37:"W",\u1E80:"W",\u1E82:"W",\u0174:"W",\u1E86:"W",\u1E84:"W",\u1E88:"W","\u2C72":"W","\u24CD":"X",\uFF38:"X",\u1E8A:"X",\u1E8C:"X","\u24CE":"Y",\uFF39:"Y",\u1EF2:"Y",\u00DD:"Y",\u0176:"Y",\u1EF8:"Y",\u0232:"Y",\u1E8E:"Y",\u0178:"Y",\u1EF6:"Y",\u1EF4:"Y",\u01B3:"Y","\u024E":"Y","\u1EFE":"Y","\u24CF":"Z",\uFF3A:"Z",\u0179:"Z",\u1E90:"Z",\u017B:"Z",\u017D:"Z",\u1E92:"Z",\u1E94:"Z",\u01B5:"Z",\u0224:"Z","\u2C7F":"Z","\u2C6B":"Z","\uA762":"Z","\u24D0":"a",\uFF41:"a",\u1E9A:"a",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u1EA7:"a",\u1EA5:"a",\u1EAB:"a",\u1EA9:"a",\u00E3:"a",\u0101:"a",\u0103:"a",\u1EB1:"a",\u1EAF:"a",\u1EB5:"a",\u1EB3:"a",\u0227:"a",\u01E1:"a",\u00E4:"a",\u01DF:"a",\u1EA3:"a",\u00E5:"a",\u01FB:"a",\u01CE:"a",\u0201:"a",\u0203:"a",\u1EA1:"a",\u1EAD:"a",\u1EB7:"a",\u1E01:"a",\u0105:"a","\u2C65":"a",\u0250:"a","\uA733":"aa",\u00E6:"ae",\u01FD:"ae",\u01E3:"ae","\uA735":"ao","\uA737":"au","\uA739":"av","\uA73B":"av","\uA73D":"ay","\u24D1":"b",\uFF42:"b",\u1E03:"b",\u1E05:"b",\u1E07:"b",\u0180:"b",\u0183:"b",\u0253:"b","\u24D2":"c",\uFF43:"c",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u00E7:"c",\u1E09:"c",\u0188:"c","\u023C":"c","\uA73F":"c","\u2184":"c","\u24D3":"d",\uFF44:"d",\u1E0B:"d",\u010F:"d",\u1E0D:"d",\u1E11:"d",\u1E13:"d",\u1E0F:"d",\u0111:"d",\u018C:"d",\u0256:"d",\u0257:"d","\uA77A":"d",\u01F3:"dz",\u01C6:"dz","\u24D4":"e",\uFF45:"e",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u1EC1:"e",\u1EBF:"e",\u1EC5:"e",\u1EC3:"e",\u1EBD:"e",\u0113:"e",\u1E15:"e",\u1E17:"e",\u0115:"e",\u0117:"e",\u00EB:"e",\u1EBB:"e",\u011B:"e",\u0205:"e",\u0207:"e",\u1EB9:"e",\u1EC7:"e",\u0229:"e",\u1E1D:"e",\u0119:"e",\u1E19:"e",\u1E1B:"e","\u0247":"e",\u025B:"e",\u01DD:"e","\u24D5":"f",\uFF46:"f",\u1E1F:"f",\u0192:"f","\uA77C":"f","\u24D6":"g",\uFF47:"g",\u01F5:"g",\u011D:"g",\u1E21:"g",\u011F:"g",\u0121:"g",\u01E7:"g",\u0123:"g",\u01E5:"g",\u0260:"g","\uA7A1":"g","\u1D79":"g","\uA77F":"g","\u24D7":"h",\uFF48:"h",\u0125:"h",\u1E23:"h",\u1E27:"h",\u021F:"h",\u1E25:"h",\u1E29:"h",\u1E2B:"h",\u1E96:"h",\u0127:"h","\u2C68":"h","\u2C76":"h",\u0265:"h",\u0195:"hv","\u24D8":"i",\uFF49:"i",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u0129:"i",\u012B:"i",\u012D:"i",\u00EF:"i",\u1E2F:"i",\u1EC9:"i",\u01D0:"i",\u0209:"i",\u020B:"i",\u1ECB:"i",\u012F:"i",\u1E2D:"i",\u0268:"i",\u0131:"i","\u24D9":"j",\uFF4A:"j",\u0135:"j",\u01F0:"j","\u0249":"j","\u24DA":"k",\uFF4B:"k",\u1E31:"k",\u01E9:"k",\u1E33:"k",\u0137:"k",\u1E35:"k",\u0199:"k","\u2C6A":"k","\uA741":"k","\uA743":"k","\uA745":"k","\uA7A3":"k","\u24DB":"l",\uFF4C:"l",\u0140:"l",\u013A:"l",\u013E:"l",\u1E37:"l",\u1E39:"l",\u013C:"l",\u1E3D:"l",\u1E3B:"l",\u017F:"l",\u0142:"l",\u019A:"l",\u026B:"l","\u2C61":"l","\uA749":"l","\uA781":"l","\uA747":"l",\u01C9:"lj","\u24DC":"m",\uFF4D:"m",\u1E3F:"m",\u1E41:"m",\u1E43:"m",\u0271:"m",\u026F:"m","\u24DD":"n",\uFF4E:"n",\u01F9:"n",\u0144:"n",\u00F1:"n",\u1E45:"n",\u0148:"n",\u1E47:"n",\u0146:"n",\u1E4B:"n",\u1E49:"n",\u019E:"n",\u0272:"n",\u0149:"n","\uA791":"n","\uA7A5":"n",\u01CC:"nj","\u24DE":"o",\uFF4F:"o",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u1ED3:"o",\u1ED1:"o",\u1ED7:"o",\u1ED5:"o",\u00F5:"o",\u1E4D:"o",\u022D:"o",\u1E4F:"o",\u014D:"o",\u1E51:"o",\u1E53:"o",\u014F:"o",\u022F:"o",\u0231:"o",\u00F6:"o",\u022B:"o",\u1ECF:"o",\u0151:"o",\u01D2:"o",\u020D:"o",\u020F:"o",\u01A1:"o",\u1EDD:"o",\u1EDB:"o",\u1EE1:"o",\u1EDF:"o",\u1EE3:"o",\u1ECD:"o",\u1ED9:"o",\u01EB:"o",\u01ED:"o",\u00F8:"o",\u01FF:"o",\u0254:"o","\uA74B":"o","\uA74D":"o",\u0275:"o",\u01A3:"oi",\u0223:"ou","\uA74F":"oo","\u24DF":"p",\uFF50:"p",\u1E55:"p",\u1E57:"p",\u01A5:"p","\u1D7D":"p","\uA751":"p","\uA753":"p","\uA755":"p","\u24E0":"q",\uFF51:"q","\u024B":"q","\uA757":"q","\uA759":"q","\u24E1":"r",\uFF52:"r",\u0155:"r",\u1E59:"r",\u0159:"r",\u0211:"r",\u0213:"r",\u1E5B:"r",\u1E5D:"r",\u0157:"r",\u1E5F:"r","\u024D":"r",\u027D:"r","\uA75B":"r","\uA7A7":"r","\uA783":"r","\u24E2":"s",\uFF53:"s",\u00DF:"s",\u015B:"s",\u1E65:"s",\u015D:"s",\u1E61:"s",\u0161:"s",\u1E67:"s",\u1E63:"s",\u1E69:"s",\u0219:"s",\u015F:"s","\u023F":"s","\uA7A9":"s","\uA785":"s",\u1E9B:"s","\u24E3":"t",\uFF54:"t",\u1E6B:"t",\u1E97:"t",\u0165:"t",\u1E6D:"t",\u021B:"t",\u0163:"t",\u1E71:"t",\u1E6F:"t",\u0167:"t",\u01AD:"t",\u0288:"t","\u2C66":"t","\uA787":"t","\uA729":"tz","\u24E4":"u",\uFF55:"u",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u0169:"u",\u1E79:"u",\u016B:"u",\u1E7B:"u",\u016D:"u",\u00FC:"u",\u01DC:"u",\u01D8:"u",\u01D6:"u",\u01DA:"u",\u1EE7:"u",\u016F:"u",\u0171:"u",\u01D4:"u",\u0215:"u",\u0217:"u",\u01B0:"u",\u1EEB:"u",\u1EE9:"u",\u1EEF:"u",\u1EED:"u",\u1EF1:"u",\u1EE5:"u",\u1E73:"u",\u0173:"u",\u1E77:"u",\u1E75:"u",\u0289:"u","\u24E5":"v",\uFF56:"v",\u1E7D:"v",\u1E7F:"v",\u028B:"v","\uA75F":"v",\u028C:"v","\uA761":"vy","\u24E6":"w",\uFF57:"w",\u1E81:"w",\u1E83:"w",\u0175:"w",\u1E87:"w",\u1E85:"w",\u1E98:"w",\u1E89:"w","\u2C73":"w","\u24E7":"x",\uFF58:"x",\u1E8B:"x",\u1E8D:"x","\u24E8":"y",\uFF59:"y",\u1EF3:"y",\u00FD:"y",\u0177:"y",\u1EF9:"y",\u0233:"y",\u1E8F:"y",\u00FF:"y",\u1EF7:"y",\u1E99:"y",\u1EF5:"y",\u01B4:"y","\u024F":"y","\u1EFF":"y","\u24E9":"z",\uFF5A:"z",\u017A:"z",\u1E91:"z",\u017C:"z",\u017E:"z",\u1E93:"z",\u1E95:"z",\u01B6:"z",\u0225:"z","\u0240":"z","\u2C6C":"z","\uA763":"z",\u0386:"\u0391",\u0388:"\u0395",\u0389:"\u0397",\u038A:"\u0399",\u03AA:"\u0399",\u038C:"\u039F",\u038E:"\u03A5",\u03AB:"\u03A5",\u038F:"\u03A9",\u03AC:"\u03B1",\u03AD:"\u03B5",\u03AE:"\u03B7",\u03AF:"\u03B9",\u03CA:"\u03B9",\u0390:"\u03B9",\u03CC:"\u03BF",\u03CD:"\u03C5",\u03CB:"\u03C5",\u03B0:"\u03C5",\u03C9:"\u03C9",\u03C2:"\u03C3"};function lu(e){let t=n=>kI[n]||n;return e.replace(/[^\u0000-\u007E]/g,t)}var sf=class{constructor(t,n){this._ngSelect=t,this._selectionModel=n,this._items=[],this._filteredItems=[],this._markedIndex=-1}get items(){return this._items}get filteredItems(){return this._filteredItems}get markedIndex(){return this._markedIndex}get selectedItems(){return this._selectionModel.value}get markedItem(){return this._filteredItems[this._markedIndex]}get noItemsToSelect(){return this._ngSelect.hideSelected&&this._items.length===this.selectedItems.length}get maxItemsSelected(){return this._ngSelect.multiple&&this._ngSelect.maxSelectedItems<=this.selectedItems.length}get lastSelectedItem(){let t=this.selectedItems.length-1;for(;t>=0;t--){let n=this.selectedItems[t];if(!n.disabled)return n}return null}setItems(t){this._items=t.map((n,i)=>this.mapItem(n,i)),this._ngSelect.groupBy?(this._groups=this._groupBy(this._items,this._ngSelect.groupBy),this._items=this._flatten(this._groups)):(this._groups=new Map,this._groups.set(void 0,this._items)),this._filteredItems=[...this._items]}select(t){if(t.selected||this.maxItemsSelected)return;let n=this._ngSelect.multiple;n||this.clearSelected(),this._selectionModel.select(t,n,this._ngSelect.selectableGroupAsModel),this._ngSelect.hideSelected&&this._hideSelected(t)}unselect(t){t.selected&&(this._selectionModel.unselect(t,this._ngSelect.multiple),this._ngSelect.hideSelected&&qe(t.index)&&this._ngSelect.multiple&&this._showSelected(t))}findItem(t){let n;return this._ngSelect.compareWith?n=i=>this._ngSelect.compareWith(i.value,t):this._ngSelect.bindValue?n=i=>!i.children&&this.resolveNested(i.value,this._ngSelect.bindValue)===t:n=i=>i.value===t||!i.children&&i.label&&i.label===this.resolveNested(t,this._ngSelect.bindLabel),this._items.find(i=>n(i))}addItem(t){let n=this.mapItem(t,this._items.length);return this._items.push(n),this._filteredItems.push(n),n}clearSelected(t=!1){this._selectionModel.clear(t),this._items.forEach(n=>{n.selected=t&&n.selected&&n.disabled,n.marked=!1}),this._ngSelect.hideSelected&&this.resetFilteredItems()}findByLabel(t){return t=lu(t).toLocaleLowerCase(),this.filteredItems.find(n=>lu(n.label).toLocaleLowerCase().substr(0,t.length)===t)}filter(t){if(!t){this.resetFilteredItems();return}this._filteredItems=[],t=this._ngSelect.searchFn?t:lu(t).toLocaleLowerCase();let n=this._ngSelect.searchFn||this._defaultSearchFn,i=this._ngSelect.hideSelected;for(let o of Array.from(this._groups.keys())){let r=[];for(let s of this._groups.get(o)){if(i&&(s.parent&&s.parent.selected||s.selected))continue;let a=this._ngSelect.searchFn?s.value:s;n(t,a)&&r.push(s)}if(r.length>0){let[s]=r.slice(-1);if(s.parent){let a=this._items.find(l=>l===s.parent);this._filteredItems.push(a)}this._filteredItems.push(...r)}}}resetFilteredItems(){this._filteredItems.length!==this._items.length&&(this._ngSelect.hideSelected&&this.selectedItems.length>0?this._filteredItems=this._items.filter(t=>!t.selected):this._filteredItems=this._items)}unmarkItem(){this._markedIndex=-1}markNextItem(){this._stepToItem(1)}markPreviousItem(){this._stepToItem(-1)}markItem(t){this._markedIndex=this._filteredItems.indexOf(t)}markSelectedOrDefault(t){if(this._filteredItems.length===0)return;let n=this._getLastMarkedIndex();n>-1?this._markedIndex=n:this._markedIndex=t?this.filteredItems.findIndex(i=>!i.disabled):-1}resolveNested(t,n){if(!Ml(t))return t;if(n.indexOf(".")===-1)return t[n];{let i=n.split("."),o=t;for(let r=0,s=i.length;r<s;++r){if(o==null)return null;o=o[i[r]]}return o}}mapItem(t,n){let i=qe(t.$ngOptionLabel)?t.$ngOptionLabel:this.resolveNested(t,this._ngSelect.bindLabel),o=qe(t.$ngOptionValue)?t.$ngOptionValue:t;return{index:n,label:qe(i)?i.toString():"",value:o,disabled:t.disabled,htmlId:`${this._ngSelect.dropdownId}-${n}`}}mapSelectedItems(){let t=this._ngSelect.multiple;for(let n of this.selectedItems){let i=this._ngSelect.bindValue?this.resolveNested(n.value,this._ngSelect.bindValue):n.value,o=qe(i)?this.findItem(i):null;this._selectionModel.unselect(n,t),this._selectionModel.select(o||n,t,this._ngSelect.selectableGroupAsModel)}this._ngSelect.hideSelected&&(this._filteredItems=this.filteredItems.filter(n=>this.selectedItems.indexOf(n)===-1))}_showSelected(t){if(this._filteredItems.push(t),t.parent){let n=t.parent;this._filteredItems.find(o=>o===n)||this._filteredItems.push(n)}else if(t.children)for(let n of t.children)n.selected=!1,this._filteredItems.push(n);this._filteredItems=[...this._filteredItems.sort((n,i)=>n.index-i.index)]}_hideSelected(t){this._filteredItems=this._filteredItems.filter(n=>n!==t),t.parent?t.parent.children.every(i=>i.selected)&&(this._filteredItems=this._filteredItems.filter(i=>i!==t.parent)):t.children&&(this._filteredItems=this.filteredItems.filter(n=>n.parent!==t))}_defaultSearchFn(t,n){return lu(n.label).toLocaleLowerCase().indexOf(t)>-1}_getNextItemIndex(t){return t>0?this._markedIndex>=this._filteredItems.length-1?0:this._markedIndex+1:this._markedIndex<=0?this._filteredItems.length-1:this._markedIndex-1}_stepToItem(t){this._filteredItems.length===0||this._filteredItems.every(n=>n.disabled)||(this._markedIndex=this._getNextItemIndex(t),this.markedItem.disabled&&this._stepToItem(t))}_getLastMarkedIndex(){if(this._ngSelect.hideSelected||this._markedIndex>-1&&this.markedItem===void 0)return-1;let t=this._filteredItems.indexOf(this.lastSelectedItem);return this.lastSelectedItem&&t<0?-1:Math.max(this.markedIndex,t)}_groupBy(t,n){let i=new Map;if(t.length===0)return i;if(Array.isArray(t[0].value[n])){for(let s of t){let a=(s.value[n]||[]).map((l,u)=>this.mapItem(l,u));i.set(s,a)}return i}let o=cu(this._ngSelect.groupBy),r=s=>{let a=o?n(s.value):s.value[n];return qe(a)?a:void 0};for(let s of t){let a=r(s),l=i.get(a);l?l.push(s):i.set(a,[s])}return i}_flatten(t){let n=cu(this._ngSelect.groupBy),i=[];for(let o of Array.from(t.keys())){let r=i.length;if(o===void 0){let h=t.get(void 0)||[];i.push(...h.map(m=>(m.index=r++,m)));continue}let s=Ml(o),a={label:s?"":String(o),children:void 0,parent:null,index:r++,disabled:!this._ngSelect.selectableGroup,htmlId:eS()},l=n?this._ngSelect.bindLabel:this._ngSelect.groupBy,u=this._ngSelect.groupValue||(()=>s?o.value:{[l]:o}),p=t.get(o).map(h=>(h.parent=a,h.children=void 0,h.index=r++,h));a.children=p,a.value=u(o,p.map(h=>h.value)),i.push(a),i.push(...p)}return i}},In=function(e){return e[e.Tab=9]="Tab",e[e.Enter=13]="Enter",e[e.Esc=27]="Esc",e[e.Space=32]="Space",e[e.ArrowUp=38]="ArrowUp",e[e.ArrowDown=40]="ArrowDown",e[e.Backspace=8]="Backspace",e}(In||{}),tS=(()=>{let t=class t{constructor(){this._dimensions={itemHeight:0,panelHeight:0,itemsPerViewport:0}}get dimensions(){return this._dimensions}calculateItems(i,o,r){let s=this._dimensions,a=s.itemHeight*o,u=Math.max(0,i)/a*o,p=Math.min(o,Math.ceil(u)+(s.itemsPerViewport+1)),m=Math.max(0,p-s.itemsPerViewport),f=Math.min(m,Math.floor(u)),w=s.itemHeight*Math.ceil(f)-s.itemHeight*Math.min(f,r);return w=isNaN(w)?0:w,f=isNaN(f)?-1:f,p=isNaN(p)?-1:p,f-=r,f=Math.max(0,f),p+=r,p=Math.min(o,p),{topPadding:w,scrollHeight:a,start:f,end:p}}setDimensions(i,o){let r=Math.max(1,Math.floor(o/i));this._dimensions={itemHeight:i,panelHeight:o,itemsPerViewport:r}}getScrollTo(i,o,r){let{panelHeight:s}=this.dimensions,a=i+o,l=r,u=l+s;return s>=a&&r===i?null:a>u?l+a-u:i<=l?i:null}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=U({token:t,factory:t.\u0275fac});let e=t;return e})(),K1=["top","right","bottom","left"],AI=typeof requestAnimationFrame<"u"?zf:jf,Q1=(()=>{let t=class t{constructor(i,o,r,s,a){this._renderer=i,this._zone=o,this._panelService=r,this._document=a,this.items=[],this.position="auto",this.virtualScroll=!1,this.filterValue=null,this.update=new $,this.scroll=new $,this.scrollToEnd=new $,this.outsideClick=new $,this._destroy$=new xe,this._scrollToEndFired=!1,this._updateScrollHeight=!1,this._lastScrollPosition=0,this._dropdown=s.nativeElement}get currentPosition(){return this._currentPosition}get itemsLength(){return this._itemsLength}set itemsLength(i){i!==this._itemsLength&&(this._itemsLength=i,this._onItemsLengthChanged())}get _startOffset(){if(this.markedItem){let{itemHeight:i,panelHeight:o}=this._panelService.dimensions,r=this.markedItem.index*i;return o>r?0:r}return 0}ngOnInit(){this._select=this._dropdown.parentElement,this._virtualPadding=this.paddingElementRef.nativeElement,this._scrollablePanel=this.scrollElementRef.nativeElement,this._contentPanel=this.contentElementRef.nativeElement,this._handleScroll(),this._handleOutsideClick(),this._appendDropdown(),this._setupMousedownListener()}ngOnChanges(i){if(i.items){let o=i.items;this._onItemsChange(o.currentValue,o.firstChange)}}ngOnDestroy(){this._destroy$.next(),this._destroy$.complete(),this._destroy$.unsubscribe(),this.appendTo&&this._renderer.removeChild(this._dropdown.parentNode,this._dropdown)}scrollTo(i,o=!1){if(!i)return;let r=this.items.indexOf(i);if(r<0||r>=this.itemsLength)return;let s;if(this.virtualScroll){let a=this._panelService.dimensions.itemHeight;s=this._panelService.getScrollTo(r*a,a,this._lastScrollPosition)}else{let a=this._dropdown.querySelector(`#${i.htmlId}`),l=o?a.offsetTop:this._lastScrollPosition;s=this._panelService.getScrollTo(a.offsetTop,a.clientHeight,l)}qe(s)&&(this._scrollablePanel.scrollTop=s)}scrollToTag(){let i=this._scrollablePanel;i.scrollTop=i.scrollHeight-i.clientHeight}adjustPosition(){this._updateYPosition()}_handleDropdownPosition(){this._currentPosition=this._calculateCurrentPosition(this._dropdown),K1.includes(this._currentPosition)?this._updateDropdownClass(this._currentPosition):this._updateDropdownClass("bottom"),this.appendTo&&this._updateYPosition(),this._dropdown.style.opacity="1"}_updateDropdownClass(i){K1.forEach(r=>{let s=`ng-select-${r}`;this._renderer.removeClass(this._dropdown,s),this._renderer.removeClass(this._select,s)});let o=`ng-select-${i}`;this._renderer.addClass(this._dropdown,o),this._renderer.addClass(this._select,o)}_handleScroll(){this._zone.runOutsideAngular(()=>{qt(this.scrollElementRef.nativeElement,"scroll").pipe(tt(this._destroy$),Yf(0,AI)).subscribe(i=>{let o=i.path||i.composedPath&&i.composedPath();if(!o||o.length===0&&!i.target)return;let r=!o||o.length===0?i.target.scrollTop:o[0].scrollTop;this._onContentScrolled(r)})})}_handleOutsideClick(){this._document&&this._zone.runOutsideAngular(()=>{Ir(qt(this._document,"touchstart",{capture:!0}),qt(this._document,"click",{capture:!0})).pipe(tt(this._destroy$)).subscribe(i=>this._checkToClose(i))})}_checkToClose(i){if(this._select.contains(i.target)||this._dropdown.contains(i.target))return;let o=i.path||i.composedPath&&i.composedPath();i.target&&i.target.shadowRoot&&o&&o[0]&&this._select.contains(o[0])||this._zone.run(()=>this.outsideClick.emit())}_onItemsChange(i,o){this.items=i||[],this._scrollToEndFired=!1,this.itemsLength=i.length,this.virtualScroll?this._updateItemsRange(o):(this._setVirtualHeight(),this._updateItems(o))}_updateItems(i){this.update.emit(this.items),i!==!1&&this._zone.runOutsideAngular(()=>{Promise.resolve().then(()=>{let o=this._scrollablePanel.clientHeight;this._panelService.setDimensions(0,o),this._handleDropdownPosition(),this.scrollTo(this.markedItem,i)})})}_updateItemsRange(i){this._zone.runOutsideAngular(()=>{this._measureDimensions().then(()=>{i?(this._renderItemsRange(this._startOffset),this._handleDropdownPosition()):this._renderItemsRange()})})}_onContentScrolled(i){this.virtualScroll&&this._renderItemsRange(i),this._lastScrollPosition=i,this._fireScrollToEnd(i)}_updateVirtualHeight(i){this._updateScrollHeight&&(this._virtualPadding.style.height=`${i}px`,this._updateScrollHeight=!1)}_setVirtualHeight(){this._virtualPadding&&(this._virtualPadding.style.height="0px")}_onItemsLengthChanged(){this._updateScrollHeight=!0}_renderItemsRange(i=null){if(i&&this._lastScrollPosition===i)return;i=i||this._scrollablePanel.scrollTop;let o=this._panelService.calculateItems(i,this.itemsLength,this.bufferAmount);this._updateVirtualHeight(o.scrollHeight),this._contentPanel.style.transform=`translateY(${o.topPadding}px)`,this._zone.run(()=>{this.update.emit(this.items.slice(o.start,o.end)),this.scroll.emit({start:o.start,end:o.end})}),qe(i)&&this._lastScrollPosition===0&&(this._scrollablePanel.scrollTop=i,this._lastScrollPosition=i)}_measureDimensions(){if(this._panelService.dimensions.itemHeight>0||this.itemsLength===0)return Promise.resolve(this._panelService.dimensions);let[i]=this.items;return this.update.emit([i]),Promise.resolve().then(()=>{let r=this._dropdown.querySelector(`#${i.htmlId}`).clientHeight;this._virtualPadding.style.height=`${r*this.itemsLength}px`;let s=this._scrollablePanel.clientHeight;return this._panelService.setDimensions(r,s),this._panelService.dimensions})}_fireScrollToEnd(i){if(this._scrollToEndFired||i===0)return;let o=this.virtualScroll?this._virtualPadding:this._contentPanel;i+this._dropdown.clientHeight>=o.clientHeight-1&&(this._zone.run(()=>this.scrollToEnd.emit()),this._scrollToEndFired=!0)}_calculateCurrentPosition(i){if(this.position!=="auto")return this.position;let o=this._select.getBoundingClientRect(),r=document.documentElement.scrollTop||document.body.scrollTop,s=o.top+window.pageYOffset,a=o.height,l=i.getBoundingClientRect().height;return s+a+l>r+document.documentElement.clientHeight?"top":"bottom"}_appendDropdown(){if(this.appendTo){if(this._parent=document.querySelector(this.appendTo),!this._parent)throw new Error(`appendTo selector ${this.appendTo} did not found any parent element`);this._updateXPosition(),this._parent.appendChild(this._dropdown)}}_updateXPosition(){let i=this._select.getBoundingClientRect(),o=this._parent.getBoundingClientRect(),r=i.left-o.left;this._dropdown.style.left=r+"px",this._dropdown.style.width=i.width+"px",this._dropdown.style.minWidth=i.width+"px"}_updateYPosition(){let i=this._select.getBoundingClientRect(),o=this._parent.getBoundingClientRect(),r=i.height;if(this._currentPosition==="top"){let s=o.bottom-i.bottom;this._dropdown.style.bottom=s+r+"px",this._dropdown.style.top="auto"}else if(this._currentPosition==="bottom"){let s=i.top-o.top;this._dropdown.style.top=s+r+"px",this._dropdown.style.bottom="auto"}}_setupMousedownListener(){this._zone.runOutsideAngular(()=>{qt(this._dropdown,"mousedown").pipe(tt(this._destroy$)).subscribe(i=>{i.target.tagName!=="INPUT"&&i.preventDefault()})})}};t.\u0275fac=function(o){return new(o||t)(H(Fr),H(ct),H(tS),H(ze),H(Je,8))},t.\u0275cmp=ee({type:t,selectors:[["ng-dropdown-panel"]],viewQuery:function(o,r){if(o&1&&(Ft(Px,7,ze),Ft(Fx,7,ze),Ft(Rx,7,ze)),o&2){let s;pe(s=he())&&(r.contentElementRef=s.first),pe(s=he())&&(r.scrollElementRef=s.first),pe(s=he())&&(r.paddingElementRef=s.first)}},inputs:{items:"items",markedItem:"markedItem",position:"position",appendTo:"appendTo",bufferAmount:"bufferAmount",virtualScroll:[ue.HasDecoratorInputTransform,"virtualScroll","virtualScroll",Ue],headerTemplate:"headerTemplate",footerTemplate:"footerTemplate",filterValue:"filterValue"},outputs:{update:"update",scroll:"scroll",scrollToEnd:"scrollToEnd",outsideClick:"outsideClick"},features:[fa,Zt],ngContentSelectors:J1,decls:9,vars:6,consts:[["scroll",""],["padding",""],["content",""],[1,"ng-dropdown-header"],["role","listbox",1,"ng-dropdown-panel-items","scroll-host"],[1,"ng-dropdown-footer"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(o,r){o&1&&(Vr(),G(0,Lx,2,4,"div",3),_(1,"div",4,0),V(3,"div",null,1),_(5,"div",null,2),Hr(7),y()(),G(8,Nx,2,4,"div",5)),o&2&&(Ve(0,r.headerTemplate?0:-1),g(3),_t("total-padding",r.virtualScroll),g(2),_t("scrollable-content",r.virtualScroll&&r.items.length),g(3),Ve(8,r.footerTemplate?8:-1))},dependencies:[zr],encapsulation:2,changeDetection:0});let e=t;return e})(),PI=(()=>{let t=class t{constructor(i){this.elementRef=i,this.disabled=!1,this.stateChange$=new xe}get label(){return(this.elementRef.nativeElement.textContent||"").trim()}ngOnChanges(i){i.disabled&&this.stateChange$.next({value:this.value,disabled:this.disabled})}ngAfterViewChecked(){this.label!==this._previousLabel&&(this._previousLabel=this.label,this.stateChange$.next({value:this.value,disabled:this.disabled,label:this.elementRef.nativeElement.innerHTML}))}ngOnDestroy(){this.stateChange$.complete()}};t.\u0275fac=function(o){return new(o||t)(H(ze))},t.\u0275cmp=ee({type:t,selectors:[["ng-option"]],inputs:{value:"value",disabled:[ue.HasDecoratorInputTransform,"disabled","disabled",Ue]},features:[fa,Zt],ngContentSelectors:J1,decls:1,vars:0,template:function(o,r){o&1&&(Vr(),Hr(0))},encapsulation:2,changeDetection:0});let e=t;return e})(),FI=(()=>{let t=class t{constructor(){this.notFoundText="No items found",this.typeToSearchText="Type to search",this.addTagText="Add item",this.loadingText="Loading...",this.clearAllText="Clear all",this.disableVirtualScroll=!0,this.openOnEnter=!0,this.appearance="underline"}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),RI=(()=>{let t=class t{warn(i){console.warn(i)}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),iS=new Ie("ng-select-selection-model"),nS=(()=>{let t=class t{get items(){return this._items}set items(i){this._itemsAreUsed=!0,this._items=i??[]}get compareWith(){return this._compareWith}set compareWith(i){if(i!=null&&!cu(i))throw Error("`compareWith` must be a function.");this._compareWith=i}get clearSearchOnAdd(){return qe(this._clearSearchOnAdd)?this._clearSearchOnAdd:qe(this.config.clearSearchOnAdd)?this.config.clearSearchOnAdd:this.closeOnSelect}set clearSearchOnAdd(i){this._clearSearchOnAdd=i}get deselectOnClick(){return qe(this._deselectOnClick)?this._deselectOnClick:qe(this.config.deselectOnClick)?this.config.deselectOnClick:this.multiple}set deselectOnClick(i){this._deselectOnClick=i}get disabled(){return this.readonly||this._disabled}get filtered(){return!!this.searchTerm&&this.searchable||this._isComposing}get single(){return!this.multiple}get _editableSearchTerm(){return this.editableSearchTerm&&!this.multiple}constructor(i,o,r,s,a,l,u){this.classes=i,this.autoFocus=o,this.config=r,this._cd=l,this._console=u,this.markFirst=!0,this.dropdownPosition="auto",this.loading=!1,this.closeOnSelect=!0,this.hideSelected=!1,this.selectOnTab=!1,this.bufferAmount=4,this.selectableGroup=!1,this.selectableGroupAsModel=!0,this.searchFn=null,this.trackByFn=null,this.clearOnBackspace=!0,this.labelForId=null,this.inputAttrs={},this.readonly=!1,this.searchWhileComposing=!0,this.minTermLength=0,this.editableSearchTerm=!1,this.keyDownFn=p=>!0,this.multiple=!1,this.addTag=!1,this.searchable=!0,this.clearable=!0,this.isOpen=!1,this.blurEvent=new $,this.focusEvent=new $,this.changeEvent=new $,this.openEvent=new $,this.closeEvent=new $,this.searchEvent=new $,this.clearEvent=new $,this.addEvent=new $,this.removeEvent=new $,this.scroll=new $,this.scrollToEnd=new $,this.useDefaultClass=!0,this.viewPortItems=[],this.searchTerm=null,this.dropdownId=eS(),this.escapeHTML=!0,this._items=[],this._defaultLabel="label",this._pressedKeys=[],this._isComposing=!1,this._destroy$=new xe,this._keyPress$=new xe,this._onChange=p=>{},this._onTouched=()=>{},this.clearItem=p=>{let h=this.selectedItems.find(m=>m.value===p);this.unselect(h)},this.trackByOption=(p,h)=>this.trackByFn?this.trackByFn(h.value):h,this._mergeGlobalConfig(r),this.itemsList=new sf(this,s()),this.element=a.nativeElement}get selectedItems(){return this.itemsList.selectedItems}get selectedValues(){return this.selectedItems.map(i=>i.value)}get hasValue(){return this.selectedItems.length>0}get currentPanelPosition(){if(this.dropdownPanel)return this.dropdownPanel.currentPosition}ngOnInit(){this._handleKeyPresses(),this._setInputAttributes()}ngOnChanges(i){i.multiple&&this.itemsList.clearSelected(),i.items&&this._setItems(i.items.currentValue||[]),i.isOpen&&(this._manualOpen=qe(i.isOpen.currentValue))}ngAfterViewInit(){this._itemsAreUsed||(this.escapeHTML=!1,this._setItemsFromNgOptions()),qe(this.autoFocus)&&this.focus()}ngOnDestroy(){this._destroy$.next(),this._destroy$.complete()}handleKeyDown(i){if(In[i.which]){if(this.keyDownFn(i)===!1)return;this.handleKeyCode(i)}else i.key&&i.key.length===1&&this._keyPress$.next(i.key.toLocaleLowerCase())}handleKeyCode(i){let o=i.target;this.clearButton&&this.clearButton.nativeElement===o?this.handleKeyCodeClear(i):this.handleKeyCodeInput(i)}handleKeyCodeInput(i){switch(i.which){case In.ArrowDown:this._handleArrowDown(i);break;case In.ArrowUp:this._handleArrowUp(i);break;case In.Space:this._handleSpace(i);break;case In.Enter:this._handleEnter(i);break;case In.Tab:this._handleTab(i);break;case In.Esc:this.close(),i.preventDefault();break;case In.Backspace:this._handleBackspace();break}}handleKeyCodeClear(i){switch(i.which){case In.Enter:this.handleClearClick(),i.preventDefault();break}}handleMousedown(i){let o=i.target;if(o.tagName!=="INPUT"&&i.preventDefault(),o.classList.contains("ng-clear-wrapper")){this.handleClearClick();return}if(o.classList.contains("ng-arrow-wrapper")){this.handleArrowClick();return}o.classList.contains("ng-value-icon")||(this.focused||this.focus(),this.searchable?this.open():this.toggle())}handleArrowClick(){this.isOpen?this.close():this.open()}handleClearClick(){this.hasValue&&(this.itemsList.clearSelected(!0),this._updateNgModel()),this._clearSearch(),this.focus(),this.clearEvent.emit(),this._onSelectionChanged()}clearModel(){this.clearable&&(this.itemsList.clearSelected(),this._updateNgModel())}writeValue(i){this.itemsList.clearSelected(),this._handleWriteValue(i),this._cd.markForCheck()}registerOnChange(i){this._onChange=i}registerOnTouched(i){this._onTouched=i}setDisabledState(i){this._disabled=i,this._cd.markForCheck()}toggle(){this.isOpen?this.close():this.open()}open(){this.disabled||this.isOpen||this._manualOpen||!this._isTypeahead&&!this.addTag&&this.itemsList.noItemsToSelect||(this.isOpen=!0,this.itemsList.markSelectedOrDefault(this.markFirst),this.openEvent.emit(),this.searchTerm||this.focus(),this.detectChanges())}close(){!this.isOpen||this._manualOpen||(this.isOpen=!1,this._isComposing=!1,this._editableSearchTerm?this.itemsList.resetFilteredItems():this._clearSearch(),this.itemsList.unmarkItem(),this._onTouched(),this.closeEvent.emit(),this._cd.markForCheck())}toggleItem(i){!i||i.disabled||this.disabled||(this.deselectOnClick&&i.selected?this.unselect(i):this.select(i),this._editableSearchTerm&&this._setSearchTermFromItems(),this._onSelectionChanged())}select(i){i.selected||(this.itemsList.select(i),this.clearSearchOnAdd&&!this._editableSearchTerm&&this._clearSearch(),this._updateNgModel(),this.multiple&&this.addEvent.emit(i.value)),(this.closeOnSelect||this.itemsList.noItemsToSelect)&&this.close()}focus(){this.searchInput.nativeElement.focus()}blur(){this.searchInput.nativeElement.blur()}unselect(i){i&&(this.itemsList.unselect(i),this.focus(),this._updateNgModel(),this.removeEvent.emit(i.value))}selectTag(){let i;cu(this.addTag)?i=this.addTag(this.searchTerm):i=this._primitive?this.searchTerm:{[this.bindLabel]:this.searchTerm};let o=r=>this._isTypeahead||!this.isOpen?this.itemsList.mapItem(r,null):this.itemsList.addItem(r);yI(i)?i.then(r=>this.select(o(r))).catch(()=>{}):i&&this.select(o(i))}showClear(){return this.clearable&&(this.hasValue||this.searchTerm)&&!this.disabled}focusOnClear(){this.blur(),this.clearButton&&this.clearButton.nativeElement.focus()}get showAddTag(){if(!this._validTerm)return!1;let i=this.searchTerm.toLowerCase().trim();return this.addTag&&!this.itemsList.filteredItems.some(o=>o.label.toLowerCase()===i)&&(!this.hideSelected&&this.isOpen||!this.selectedItems.some(o=>o.label.toLowerCase()===i))&&!this.loading}showNoItemsFound(){let i=this.itemsList.filteredItems.length===0;return(i&&!this._isTypeahead&&!this.loading||i&&this._isTypeahead&&this._validTerm&&!this.loading)&&!this.showAddTag}showTypeToSearch(){return this.itemsList.filteredItems.length===0&&this._isTypeahead&&!this._validTerm&&!this.loading}onCompositionStart(){this._isComposing=!0}onCompositionEnd(i){this._isComposing=!1,!this.searchWhileComposing&&this.filter(i)}filter(i){this._isComposing&&!this.searchWhileComposing||(this.searchTerm=i,this._isTypeahead&&(this._validTerm||this.minTermLength===0)&&this.typeahead.next(i),this._isTypeahead||(this.itemsList.filter(this.searchTerm),this.isOpen&&this.itemsList.markSelectedOrDefault(this.markFirst)),this.searchEvent.emit({term:i,items:this.itemsList.filteredItems.map(o=>o.value)}),this.open())}onInputFocus(i){this.focused||(this._editableSearchTerm&&this._setSearchTermFromItems(),this.element.classList.add("ng-select-focused"),this.focusEvent.emit(i),this.focused=!0)}onInputBlur(i){this.element.classList.remove("ng-select-focused"),this.blurEvent.emit(i),!this.isOpen&&!this.disabled&&this._onTouched(),this._editableSearchTerm&&this._setSearchTermFromItems(),this.focused=!1}onItemHover(i){i.disabled||this.itemsList.markItem(i)}detectChanges(){this._cd.destroyed||this._cd.detectChanges()}_setSearchTermFromItems(){let i=this.selectedItems&&this.selectedItems[0];this.searchTerm=i&&i.label||null}_setItems(i){let o=i[0];this.bindLabel=this.bindLabel||this._defaultLabel,this._primitive=qe(o)?!Ml(o):this._primitive||this.bindLabel===this._defaultLabel,this.itemsList.setItems(i),i.length>0&&this.hasValue&&this.itemsList.mapSelectedItems(),this.isOpen&&qe(this.searchTerm)&&!this._isTypeahead&&this.itemsList.filter(this.searchTerm),(this._isTypeahead||this.isOpen)&&this.itemsList.markSelectedOrDefault(this.markFirst)}_setItemsFromNgOptions(){let i=r=>{this.items=r.map(s=>({$ngOptionValue:s.value,$ngOptionLabel:s.elementRef.nativeElement.innerHTML,disabled:s.disabled})),this.itemsList.setItems(this.items),this.hasValue&&this.itemsList.mapSelectedItems(),this.detectChanges()},o=()=>{let r=Ir(this.ngOptions.changes,this._destroy$);Ir(...this.ngOptions.map(s=>s.stateChange$)).pipe(tt(r)).subscribe(s=>{let a=this.itemsList.findItem(s.value);a.disabled=s.disabled,a.label=s.label||a.label,this._cd.detectChanges()})};this.ngOptions.changes.pipe(ca(this.ngOptions),tt(this._destroy$)).subscribe(r=>{this.bindLabel=this._defaultLabel,i(r),o()})}_isValidWriteValue(i){if(!qe(i)||this.multiple&&i===""||Array.isArray(i)&&i.length===0)return!1;let o=r=>!qe(this.compareWith)&&Ml(r)&&this.bindValue?(this._console.warn(`Setting object(${JSON.stringify(r)}) as your model with bindValue is not allowed unless [compareWith] is used.`),!1):!0;return this.multiple?Array.isArray(i)?i.every(r=>o(r)):(this._console.warn("Multiple select ngModel should be array."),!1):o(i)}_handleWriteValue(i){if(!this._isValidWriteValue(i))return;let o=r=>{let s=this.itemsList.findItem(r);if(s)this.itemsList.select(s);else{let a=Ml(r),l=!a&&!this.bindValue;a||l?this.itemsList.select(this.itemsList.mapItem(r,null)):this.bindValue&&(s={[this.bindLabel]:null,[this.bindValue]:r},this.itemsList.select(this.itemsList.mapItem(s,null)))}};this.multiple?i.forEach(r=>o(r)):o(i)}_handleKeyPresses(){this.searchable||this._keyPress$.pipe(tt(this._destroy$),it(i=>this._pressedKeys.push(i)),Kf(200),Tt(()=>this._pressedKeys.length>0),se(()=>this._pressedKeys.join(""))).subscribe(i=>{let o=this.itemsList.findByLabel(i);o&&(this.isOpen?(this.itemsList.markItem(o),this._scrollToMarked(),this._cd.markForCheck()):this.select(o)),this._pressedKeys=[]})}_setInputAttributes(){let i=this.searchInput.nativeElement,o=v({type:"text",autocorrect:"off",autocapitalize:"off",autocomplete:this.labelForId?"off":this.dropdownId},this.inputAttrs);for(let r of Object.keys(o))i.setAttribute(r,o[r])}_updateNgModel(){let i=[];for(let r of this.selectedItems)if(this.bindValue){let s=null;if(r.children){let a=this.groupValue?this.bindValue:this.groupBy;s=r.value[a||this.groupBy]}else s=this.itemsList.resolveNested(r.value,this.bindValue);i.push(s)}else i.push(r.value);let o=this.selectedItems.map(r=>r.value);this.multiple?(this._onChange(i),this.changeEvent.emit(o)):(this._onChange(qe(i[0])?i[0]:null),this.changeEvent.emit(o[0])),this._cd.markForCheck()}_clearSearch(){this.searchTerm&&(this._changeSearch(null),this.itemsList.resetFilteredItems())}_changeSearch(i){this.searchTerm=i,this._isTypeahead&&this.typeahead.next(i)}_scrollToMarked(){!this.isOpen||!this.dropdownPanel||this.dropdownPanel.scrollTo(this.itemsList.markedItem)}_scrollToTag(){!this.isOpen||!this.dropdownPanel||this.dropdownPanel.scrollToTag()}_onSelectionChanged(){this.isOpen&&this.deselectOnClick&&this.appendTo&&(this._cd.detectChanges(),this.dropdownPanel.adjustPosition())}_handleTab(i){if(this.isOpen===!1){if(this.showClear()&&!i.shiftKey)this.focusOnClear(),i.preventDefault();else if(!this.addTag)return}this.selectOnTab?this.itemsList.markedItem?(this.toggleItem(this.itemsList.markedItem),i.preventDefault()):this.showAddTag?(this.selectTag(),i.preventDefault()):this.close():this.close()}_handleEnter(i){if(this.isOpen||this._manualOpen)this.itemsList.markedItem?this.toggleItem(this.itemsList.markedItem):this.showAddTag&&this.selectTag();else if(this.openOnEnter)this.open();else return;i.preventDefault()}_handleSpace(i){this.isOpen||this._manualOpen||(this.open(),i.preventDefault())}_handleArrowDown(i){this._nextItemIsTag(1)?(this.itemsList.unmarkItem(),this._scrollToTag()):(this.itemsList.markNextItem(),this._scrollToMarked()),this.open(),i.preventDefault()}_handleArrowUp(i){this.isOpen&&(this._nextItemIsTag(-1)?(this.itemsList.unmarkItem(),this._scrollToTag()):(this.itemsList.markPreviousItem(),this._scrollToMarked()),i.preventDefault())}_nextItemIsTag(i){let o=this.itemsList.markedIndex+i;return this.addTag&&this.searchTerm&&this.itemsList.markedItem&&(o<0||o===this.itemsList.filteredItems.length)}_handleBackspace(){this.searchTerm||!this.clearable||!this.clearOnBackspace||!this.hasValue||(this.multiple?this.unselect(this.itemsList.lastSelectedItem):this.clearModel())}get _isTypeahead(){return this.typeahead&&this.typeahead.observers.length>0}get _validTerm(){let i=this.searchTerm&&this.searchTerm.trim();return i&&i.length>=this.minTermLength}_mergeGlobalConfig(i){this.placeholder=this.placeholder||i.placeholder,this.notFoundText=this.notFoundText||i.notFoundText,this.typeToSearchText=this.typeToSearchText||i.typeToSearchText,this.addTagText=this.addTagText||i.addTagText,this.loadingText=this.loadingText||i.loadingText,this.clearAllText=this.clearAllText||i.clearAllText,this.virtualScroll=qe(this.virtualScroll)?this.virtualScroll:qe(i.disableVirtualScroll)?!i.disableVirtualScroll:!1,this.openOnEnter=qe(this.openOnEnter)?this.openOnEnter:i.openOnEnter,this.appendTo=this.appendTo||i.appendTo,this.bindValue=this.bindValue||i.bindValue,this.bindLabel=this.bindLabel||i.bindLabel,this.appearance=this.appearance||i.appearance}};t.\u0275fac=function(o){return new(o||t)(pa("class"),pa("autofocus"),H(FI),H(iS),H(ze),H(Gt),H(RI))},t.\u0275cmp=ee({type:t,selectors:[["ng-select"]],contentQueries:function(o,r,s){if(o&1&&(Pt(s,bI,5,Oe),Pt(s,wI,5,Oe),Pt(s,SI,5,Oe),Pt(s,CI,5,Oe),Pt(s,TI,5,Oe),Pt(s,MI,5,Oe),Pt(s,DI,5,Oe),Pt(s,EI,5,Oe),Pt(s,xI,5,Oe),Pt(s,II,5,Oe),Pt(s,OI,5,Oe),Pt(s,PI,5)),o&2){let a;pe(a=he())&&(r.optionTemplate=a.first),pe(a=he())&&(r.optgroupTemplate=a.first),pe(a=he())&&(r.labelTemplate=a.first),pe(a=he())&&(r.multiLabelTemplate=a.first),pe(a=he())&&(r.headerTemplate=a.first),pe(a=he())&&(r.footerTemplate=a.first),pe(a=he())&&(r.notFoundTemplate=a.first),pe(a=he())&&(r.typeToSearchTemplate=a.first),pe(a=he())&&(r.loadingTextTemplate=a.first),pe(a=he())&&(r.tagTemplate=a.first),pe(a=he())&&(r.loadingSpinnerTemplate=a.first),pe(a=he())&&(r.ngOptions=a)}},viewQuery:function(o,r){if(o&1&&(Ft(Q1,5),Ft(Vx,7),Ft(Hx,5)),o&2){let s;pe(s=he())&&(r.dropdownPanel=s.first),pe(s=he())&&(r.searchInput=s.first),pe(s=he())&&(r.clearButton=s.first)}},hostVars:20,hostBindings:function(o,r){o&1&&x("keydown",function(a){return r.handleKeyDown(a)}),o&2&&_t("ng-select-typeahead",r.typeahead)("ng-select-multiple",r.multiple)("ng-select-taggable",r.addTag)("ng-select-searchable",r.searchable)("ng-select-clearable",r.clearable)("ng-select-opened",r.isOpen)("ng-select",r.useDefaultClass)("ng-select-disabled",r.disabled)("ng-select-filtered",r.filtered)("ng-select-single",r.single)},inputs:{bindLabel:"bindLabel",bindValue:"bindValue",markFirst:[ue.HasDecoratorInputTransform,"markFirst","markFirst",Ue],placeholder:"placeholder",notFoundText:"notFoundText",typeToSearchText:"typeToSearchText",addTagText:"addTagText",loadingText:"loadingText",clearAllText:"clearAllText",appearance:"appearance",dropdownPosition:"dropdownPosition",appendTo:"appendTo",loading:[ue.HasDecoratorInputTransform,"loading","loading",Ue],closeOnSelect:[ue.HasDecoratorInputTransform,"closeOnSelect","closeOnSelect",Ue],hideSelected:[ue.HasDecoratorInputTransform,"hideSelected","hideSelected",Ue],selectOnTab:[ue.HasDecoratorInputTransform,"selectOnTab","selectOnTab",Ue],openOnEnter:[ue.HasDecoratorInputTransform,"openOnEnter","openOnEnter",Ue],maxSelectedItems:[ue.HasDecoratorInputTransform,"maxSelectedItems","maxSelectedItems",ga],groupBy:"groupBy",groupValue:"groupValue",bufferAmount:[ue.HasDecoratorInputTransform,"bufferAmount","bufferAmount",ga],virtualScroll:[ue.HasDecoratorInputTransform,"virtualScroll","virtualScroll",Ue],selectableGroup:[ue.HasDecoratorInputTransform,"selectableGroup","selectableGroup",Ue],selectableGroupAsModel:[ue.HasDecoratorInputTransform,"selectableGroupAsModel","selectableGroupAsModel",Ue],searchFn:"searchFn",trackByFn:"trackByFn",clearOnBackspace:[ue.HasDecoratorInputTransform,"clearOnBackspace","clearOnBackspace",Ue],labelForId:"labelForId",inputAttrs:"inputAttrs",tabIndex:[ue.HasDecoratorInputTransform,"tabIndex","tabIndex",ga],readonly:[ue.HasDecoratorInputTransform,"readonly","readonly",Ue],searchWhileComposing:[ue.HasDecoratorInputTransform,"searchWhileComposing","searchWhileComposing",Ue],minTermLength:[ue.HasDecoratorInputTransform,"minTermLength","minTermLength",ga],editableSearchTerm:[ue.HasDecoratorInputTransform,"editableSearchTerm","editableSearchTerm",Ue],keyDownFn:"keyDownFn",typeahead:"typeahead",multiple:[ue.HasDecoratorInputTransform,"multiple","multiple",Ue],addTag:"addTag",searchable:[ue.HasDecoratorInputTransform,"searchable","searchable",Ue],clearable:[ue.HasDecoratorInputTransform,"clearable","clearable",Ue],isOpen:[ue.HasDecoratorInputTransform,"isOpen","isOpen",Ue],items:"items",compareWith:"compareWith",clearSearchOnAdd:"clearSearchOnAdd",deselectOnClick:"deselectOnClick"},outputs:{blurEvent:"blur",focusEvent:"focus",changeEvent:"change",openEvent:"open",closeEvent:"close",searchEvent:"search",clearEvent:"clear",addEvent:"add",removeEvent:"remove",scroll:"scroll",scrollToEnd:"scrollToEnd"},features:[Ci([{provide:rn,useExisting:ci(()=>t),multi:!0},tS]),fa,Zt],decls:14,vars:19,consts:[["searchInput",""],["defaultLabelTemplate",""],["defaultLoadingSpinnerTemplate",""],["clearButton",""],["defaultOptionTemplate",""],["defaultTagTemplate",""],["defaultNotFoundTemplate",""],["defaultTypeToSearchTemplate",""],["defaultLoadingTextTemplate",""],[1,"ng-select-container",3,"mousedown"],[1,"ng-value-container"],[1,"ng-placeholder"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["role","combobox","aria-haspopup","listbox",1,"ng-input"],["aria-autocomplete","list",3,"input","compositionstart","compositionend","focus","blur","change","readOnly","disabled","value"],["tabindex","0",1,"ng-clear-wrapper",3,"title"],[1,"ng-arrow-wrapper"],[1,"ng-arrow"],["role","listbox","aria-label","Options list",1,"ng-dropdown-panel",3,"virtualScroll","bufferAmount","appendTo","position","headerTemplate","footerTemplate","filterValue","items","markedItem","ng-select-multiple","ngClass","id"],[1,"ng-value",3,"ng-value-disabled"],[1,"ng-value"],["aria-hidden","true",1,"ng-value-icon","left",3,"click"],[1,"ng-value-label",3,"ngItemLabel","escape"],[3,"ngTemplateOutlet"],[1,"ng-spinner-loader"],["aria-hidden","true",1,"ng-clear"],["role","listbox","aria-label","Options list",1,"ng-dropdown-panel",3,"update","scroll","scrollToEnd","outsideClick","virtualScroll","bufferAmount","appendTo","position","headerTemplate","footerTemplate","filterValue","items","markedItem","ngClass","id"],[1,"ng-option",3,"ng-option-disabled","ng-option-selected","ng-optgroup","ng-option","ng-option-child","ng-option-marked"],["role","option",1,"ng-option",3,"ng-option-marked"],[1,"ng-option",3,"click","mouseover"],[1,"ng-option-label",3,"ngItemLabel","escape"],["role","option",1,"ng-option",3,"mouseover","click"],[1,"ng-tag-label"],[1,"ng-option","ng-option-disabled"]],template:function(o,r){if(o&1){let s=oe();_(0,"div",9),x("mousedown",function(l){return A(s),P(r.handleMousedown(l))}),_(1,"div",10)(2,"div",11),L(3),y(),G(4,Wx,2,0)(5,Zx,1,5,null,12),_(6,"div",13)(7,"input",14,0),x("input",function(){A(s);let l=He(8);return P(r.filter(l.value))})("compositionstart",function(){return A(s),P(r.onCompositionStart())})("compositionend",function(){A(s);let l=He(8);return P(r.onCompositionEnd(l.value))})("focus",function(l){return A(s),P(r.onInputFocus(l))})("blur",function(l){return A(s),P(r.onInputBlur(l))})("change",function(l){return A(s),P(l.stopPropagation())}),y()()(),G(9,Qx,3,1)(10,Jx,4,1,"span",15),_(11,"span",16),V(12,"span",17),y()(),G(13,mI,8,17,"ng-dropdown-panel",18)}o&2&&(_t("ng-appearance-outline",r.appearance==="outline")("ng-has-value",r.hasValue),g(3),de(r.placeholder),g(),Ve(4,(!r.multiLabelTemplate||!r.multiple)&&r.selectedItems.length>0?4:-1),g(),Ve(5,r.multiple&&r.multiLabelTemplate&&r.selectedValues.length>0?5:-1),g(),At("aria-expanded",r.isOpen)("aria-owns",r.isOpen?r.dropdownId:null),g(),C("readOnly",!r.searchable||r.itemsList.maxItemsSelected)("disabled",r.disabled)("value",r.searchTerm?r.searchTerm:""),At("id",r.labelForId)("tabindex",r.tabIndex)("aria-activedescendant",r.isOpen?r.itemsList==null||r.itemsList.markedItem==null?null:r.itemsList.markedItem.htmlId:null)("aria-controls",r.isOpen?r.dropdownId:null),g(2),Ve(9,r.loading?9:-1),g(),Ve(10,r.showClear()?10:-1),g(3),Ve(13,r.isOpen?13:-1))},dependencies:[Ti,zr,Q1,vI],styles:[`@charset "UTF-8";.ng-select{position:relative;display:block;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.ng-select div,.ng-select input,.ng-select span{-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box}.ng-select [hidden]{display:none}.ng-select.ng-select-searchable .ng-select-container .ng-value-container .ng-input{opacity:1}.ng-select.ng-select-opened .ng-select-container{z-index:1001}.ng-select.ng-select-disabled .ng-select-container .ng-value-container .ng-placeholder,.ng-select.ng-select-disabled .ng-select-container .ng-value-container .ng-value{-webkit-user-select:none;user-select:none;cursor:default}.ng-select.ng-select-disabled .ng-arrow-wrapper{cursor:default}.ng-select.ng-select-filtered .ng-placeholder{display:none}.ng-select .ng-select-container{cursor:default;display:flex;outline:none;overflow:hidden;position:relative;width:100%}.ng-select .ng-select-container .ng-value-container{display:flex;flex:1}.ng-select .ng-select-container .ng-value-container .ng-input{opacity:0}.ng-select .ng-select-container .ng-value-container .ng-input>input{box-sizing:content-box;background:none transparent;border:0 none;box-shadow:none;outline:none;padding:0;cursor:default;width:100%}.ng-select .ng-select-container .ng-value-container .ng-input>input::-ms-clear{display:none}.ng-select .ng-select-container .ng-value-container .ng-input>input[readonly]{-webkit-user-select:none;user-select:none;width:0;padding:0}.ng-select.ng-select-single.ng-select-filtered .ng-select-container .ng-value-container .ng-value{visibility:hidden}.ng-select.ng-select-single .ng-select-container .ng-value-container,.ng-select.ng-select-single .ng-select-container .ng-value-container .ng-value{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ng-select.ng-select-single .ng-select-container .ng-value-container .ng-value .ng-value-icon{display:none}.ng-select.ng-select-single .ng-select-container .ng-value-container .ng-input{position:absolute;left:0;width:100%}.ng-select.ng-select-multiple.ng-select-disabled>.ng-select-container .ng-value-container .ng-value .ng-value-icon{display:none}.ng-select.ng-select-multiple .ng-select-container .ng-value-container{flex-wrap:wrap}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-placeholder{position:absolute}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-value{white-space:nowrap}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-value.ng-value-disabled .ng-value-icon{display:none}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-value .ng-value-icon{cursor:pointer}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-input{flex:1;z-index:2}.ng-select.ng-select-multiple .ng-select-container .ng-value-container .ng-placeholder{z-index:1}.ng-select .ng-clear-wrapper{cursor:pointer;position:relative;width:17px;-webkit-user-select:none;user-select:none}.ng-select .ng-clear-wrapper .ng-clear{display:inline-block;font-size:18px;line-height:1;pointer-events:none}.ng-select .ng-spinner-loader{border-radius:50%;width:17px;height:17px;margin-right:5px;font-size:10px;position:relative;text-indent:-9999em;border-top:2px solid rgba(66,66,66,.2);border-right:2px solid rgba(66,66,66,.2);border-bottom:2px solid rgba(66,66,66,.2);border-left:2px solid #424242;transform:translateZ(0);animation:load8 .8s infinite linear}.ng-select .ng-spinner-loader:after{border-radius:50%;width:17px;height:17px}@-webkit-keyframes load8{0%{-webkit-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes load8{0%{-webkit-transform:rotate(0deg);transform:rotate(0)}to{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.ng-select .ng-arrow-wrapper{cursor:pointer;position:relative;text-align:center;-webkit-user-select:none;user-select:none}.ng-select .ng-arrow-wrapper .ng-arrow{pointer-events:none;display:inline-block;height:0;width:0;position:relative}.ng-dropdown-panel{box-sizing:border-box;position:absolute;opacity:0;width:100%;z-index:1050;-webkit-overflow-scrolling:touch}.ng-dropdown-panel .ng-dropdown-panel-items{display:block;height:auto;-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;max-height:240px;overflow-y:auto}.ng-dropdown-panel .ng-dropdown-panel-items .ng-optgroup{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ng-dropdown-panel .ng-dropdown-panel-items .ng-option{box-sizing:border-box;cursor:pointer;display:block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.ng-dropdown-panel .ng-dropdown-panel-items .ng-option .ng-option-label:empty:before{content:"\\200b"}.ng-dropdown-panel .ng-dropdown-panel-items .ng-option .highlighted{font-weight:700;text-decoration:underline}.ng-dropdown-panel .ng-dropdown-panel-items .ng-option.disabled{cursor:default}.ng-dropdown-panel .scroll-host{overflow:hidden;overflow-y:auto;position:relative;display:block;-webkit-overflow-scrolling:touch}.ng-dropdown-panel .scrollable-content{top:0;left:0;width:100%;height:100%;position:absolute}.ng-dropdown-panel .total-padding{width:1px;opacity:0}
`],encapsulation:2,changeDetection:0});let e=t;return e})();function LI(){return new af}var af=class{constructor(){this._selected=[]}get value(){return this._selected}select(t,n,i){if(t.selected=!0,(!t.children||!n&&i)&&this._selected.push(t),n)if(t.parent){let o=t.parent.children.length,r=t.parent.children.filter(s=>s.selected).length;t.parent.selected=o===r}else t.children&&(this._setChildrenSelectedState(t.children,!0),this._removeChildren(t),i&&this._activeChildren(t)?this._selected=[...this._selected.filter(o=>o.parent!==t),t]:this._selected=[...this._selected,...t.children.filter(o=>!o.disabled)])}unselect(t,n){if(this._selected=this._selected.filter(i=>i!==t),t.selected=!1,n)if(t.parent&&t.parent.selected){let i=t.parent.children;this._removeParent(t.parent),this._removeChildren(t.parent),this._selected.push(...i.filter(o=>o!==t&&!o.disabled)),t.parent.selected=!1}else t.children&&(this._setChildrenSelectedState(t.children,!1),this._removeChildren(t))}clear(t){this._selected=t?this._selected.filter(n=>n.disabled):[]}_setChildrenSelectedState(t,n){for(let i of t)i.disabled||(i.selected=n)}_removeChildren(t){this._selected=[...this._selected.filter(n=>n.parent!==t),...t.children.filter(n=>n.parent===t&&n.disabled&&n.selected)]}_removeParent(t){this._selected=this._selected.filter(n=>n!==t)}_activeChildren(t){return t.children.every(n=>!n.disabled||n.selected)}},oS=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=Bt({type:t}),t.\u0275inj=Ht({providers:[{provide:iS,useValue:LI}],imports:[Te]});let e=t;return e})();function El(e){e||(ng(El),e=F(jl));let t=new Tu(n=>e.onDestroy(n.next.bind(n)));return n=>n.pipe(tt(t))}var at="top",xt="bottom",wt="right",mt="left",du="auto",Po=[at,xt,wt,mt],Jn="start",vr="end",rS="clippingParents",uu="viewport",Qs="popper",sS="reference",lf=Po.reduce(function(e,t){return e.concat([t+"-"+Jn,t+"-"+vr])},[]),pu=[].concat(Po,[du]).reduce(function(e,t){return e.concat([t,t+"-"+Jn,t+"-"+vr])},[]),VI="beforeRead",HI="read",BI="afterRead",GI="beforeMain",jI="main",zI="afterMain",UI="beforeWrite",$I="write",WI="afterWrite",aS=[VI,HI,BI,GI,jI,zI,UI,$I,WI];function St(e){return e?(e.nodeName||"").toLowerCase():null}function je(e){if(e==null)return window;if(e.toString()!=="[object Window]"){var t=e.ownerDocument;return t&&t.defaultView||window}return e}function Ni(e){var t=je(e).Element;return e instanceof t||e instanceof Element}function ft(e){var t=je(e).HTMLElement;return e instanceof t||e instanceof HTMLElement}function Js(e){if(typeof ShadowRoot>"u")return!1;var t=je(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function qI(e){var t=e.state;Object.keys(t.elements).forEach(function(n){var i=t.styles[n]||{},o=t.attributes[n]||{},r=t.elements[n];!ft(r)||!St(r)||(Object.assign(r.style,i),Object.keys(o).forEach(function(s){var a=o[s];a===!1?r.removeAttribute(s):r.setAttribute(s,a===!0?"":a)}))})}function ZI(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.styles=n,t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach(function(i){var o=t.elements[i],r=t.attributes[i]||{},s=Object.keys(t.styles.hasOwnProperty(i)?t.styles[i]:n[i]),a=s.reduce(function(l,u){return l[u]="",l},{});!ft(o)||!St(o)||(Object.assign(o.style,a),Object.keys(r).forEach(function(l){o.removeAttribute(l)}))})}}var lS={name:"applyStyles",enabled:!0,phase:"write",fn:qI,effect:ZI,requires:["computeStyles"]};function Ct(e){return e.split("-")[0]}var sn=Math.max,br=Math.min,Xn=Math.round;function Xs(){var e=navigator.userAgentData;return e!=null&&e.brands&&Array.isArray(e.brands)?e.brands.map(function(t){return t.brand+"/"+t.version}).join(" "):navigator.userAgent}function xl(){return!/^((?!chrome|android).)*safari/i.test(Xs())}function Vi(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);var i=e.getBoundingClientRect(),o=1,r=1;t&&ft(e)&&(o=e.offsetWidth>0&&Xn(i.width)/e.offsetWidth||1,r=e.offsetHeight>0&&Xn(i.height)/e.offsetHeight||1);var s=Ni(e)?je(e):window,a=s.visualViewport,l=!xl()&&n,u=(i.left+(l&&a?a.offsetLeft:0))/o,p=(i.top+(l&&a?a.offsetTop:0))/r,h=i.width/o,m=i.height/r;return{width:h,height:m,top:p,right:u+h,bottom:p+m,left:u,x:u,y:p}}function wr(e){var t=Vi(e),n=e.offsetWidth,i=e.offsetHeight;return Math.abs(t.width-n)<=1&&(n=t.width),Math.abs(t.height-i)<=1&&(i=t.height),{x:e.offsetLeft,y:e.offsetTop,width:n,height:i}}function Il(e,t){var n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&Js(n)){var i=t;do{if(i&&e.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function Wt(e){return je(e).getComputedStyle(e)}function cf(e){return["table","td","th"].indexOf(St(e))>=0}function It(e){return((Ni(e)?e.ownerDocument:e.document)||window.document).documentElement}function eo(e){return St(e)==="html"?e:e.assignedSlot||e.parentNode||(Js(e)?e.host:null)||It(e)}function cS(e){return!ft(e)||Wt(e).position==="fixed"?null:e.offsetParent}function YI(e){var t=/firefox/i.test(Xs()),n=/Trident/i.test(Xs());if(n&&ft(e)){var i=Wt(e);if(i.position==="fixed")return null}var o=eo(e);for(Js(o)&&(o=o.host);ft(o)&&["html","body"].indexOf(St(o))<0;){var r=Wt(o);if(r.transform!=="none"||r.perspective!=="none"||r.contain==="paint"||["transform","perspective"].indexOf(r.willChange)!==-1||t&&r.willChange==="filter"||t&&r.filter&&r.filter!=="none")return o;o=o.parentNode}return null}function an(e){for(var t=je(e),n=cS(e);n&&cf(n)&&Wt(n).position==="static";)n=cS(n);return n&&(St(n)==="html"||St(n)==="body"&&Wt(n).position==="static")?t:n||YI(e)||t}function Sr(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Cr(e,t,n){return sn(e,br(t,n))}function dS(e,t,n){var i=Cr(e,t,n);return i>n?n:i}function Ol(){return{top:0,right:0,bottom:0,left:0}}function kl(e){return Object.assign({},Ol(),e)}function Al(e,t){return t.reduce(function(n,i){return n[i]=e,n},{})}var KI=function(t,n){return t=typeof t=="function"?t(Object.assign({},n.rects,{placement:n.placement})):t,kl(typeof t!="number"?t:Al(t,Po))};function QI(e){var t,n=e.state,i=e.name,o=e.options,r=n.elements.arrow,s=n.modifiersData.popperOffsets,a=Ct(n.placement),l=Sr(a),u=[mt,wt].indexOf(a)>=0,p=u?"height":"width";if(!(!r||!s)){var h=KI(o.padding,n),m=wr(r),f=l==="y"?at:mt,w=l==="y"?xt:wt,O=n.rects.reference[p]+n.rects.reference[l]-s[l]-n.rects.popper[p],N=s[l]-n.rects.reference[l],R=an(r),K=R?l==="y"?R.clientHeight||0:R.clientWidth||0:0,Y=O/2-N/2,j=h[f],Q=K-m[p]-h[w],X=K/2-m[p]/2+Y,ce=Cr(j,X,Q),Ee=l;n.modifiersData[i]=(t={},t[Ee]=ce,t.centerOffset=ce-X,t)}}function JI(e){var t=e.state,n=e.options,i=n.element,o=i===void 0?"[data-popper-arrow]":i;o!=null&&(typeof o=="string"&&(o=t.elements.popper.querySelector(o),!o)||Il(t.elements.popper,o)&&(t.elements.arrow=o))}var df={name:"arrow",enabled:!0,phase:"main",fn:QI,effect:JI,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Hi(e){return e.split("-")[1]}var XI={top:"auto",right:"auto",bottom:"auto",left:"auto"};function eO(e,t){var n=e.x,i=e.y,o=t.devicePixelRatio||1;return{x:Xn(n*o)/o||0,y:Xn(i*o)/o||0}}function uS(e){var t,n=e.popper,i=e.popperRect,o=e.placement,r=e.variation,s=e.offsets,a=e.position,l=e.gpuAcceleration,u=e.adaptive,p=e.roundOffsets,h=e.isFixed,m=s.x,f=m===void 0?0:m,w=s.y,O=w===void 0?0:w,N=typeof p=="function"?p({x:f,y:O}):{x:f,y:O};f=N.x,O=N.y;var R=s.hasOwnProperty("x"),K=s.hasOwnProperty("y"),Y=mt,j=at,Q=window;if(u){var X=an(n),ce="clientHeight",Ee="clientWidth";if(X===je(n)&&(X=It(n),Wt(X).position!=="static"&&a==="absolute"&&(ce="scrollHeight",Ee="scrollWidth")),X=X,o===at||(o===mt||o===wt)&&r===vr){j=xt;var gt=h&&X===Q&&Q.visualViewport?Q.visualViewport.height:X[ce];O-=gt-i.height,O*=l?1:-1}if(o===mt||(o===at||o===xt)&&r===vr){Y=wt;var lt=h&&X===Q&&Q.visualViewport?Q.visualViewport.width:X[Ee];f-=lt-i.width,f*=l?1:-1}}var kt=Object.assign({position:a},u&&XI),Bi=p===!0?eO({x:f,y:O},je(n)):{x:f,y:O};if(f=Bi.x,O=Bi.y,l){var Vt;return Object.assign({},kt,(Vt={},Vt[j]=K?"0":"",Vt[Y]=R?"0":"",Vt.transform=(Q.devicePixelRatio||1)<=1?"translate("+f+"px, "+O+"px)":"translate3d("+f+"px, "+O+"px, 0)",Vt))}return Object.assign({},kt,(t={},t[j]=K?O+"px":"",t[Y]=R?f+"px":"",t.transform="",t))}function tO(e){var t=e.state,n=e.options,i=n.gpuAcceleration,o=i===void 0?!0:i,r=n.adaptive,s=r===void 0?!0:r,a=n.roundOffsets,l=a===void 0?!0:a,u={placement:Ct(t.placement),variation:Hi(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:o,isFixed:t.options.strategy==="fixed"};t.modifiersData.popperOffsets!=null&&(t.styles.popper=Object.assign({},t.styles.popper,uS(Object.assign({},u,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:s,roundOffsets:l})))),t.modifiersData.arrow!=null&&(t.styles.arrow=Object.assign({},t.styles.arrow,uS(Object.assign({},u,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})}var pS={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:tO,data:{}};var hu={passive:!0};function iO(e){var t=e.state,n=e.instance,i=e.options,o=i.scroll,r=o===void 0?!0:o,s=i.resize,a=s===void 0?!0:s,l=je(t.elements.popper),u=[].concat(t.scrollParents.reference,t.scrollParents.popper);return r&&u.forEach(function(p){p.addEventListener("scroll",n.update,hu)}),a&&l.addEventListener("resize",n.update,hu),function(){r&&u.forEach(function(p){p.removeEventListener("scroll",n.update,hu)}),a&&l.removeEventListener("resize",n.update,hu)}}var hS={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:iO,data:{}};var nO={left:"right",right:"left",bottom:"top",top:"bottom"};function ea(e){return e.replace(/left|right|bottom|top/g,function(t){return nO[t]})}var oO={start:"end",end:"start"};function mu(e){return e.replace(/start|end/g,function(t){return oO[t]})}function Tr(e){var t=je(e),n=t.pageXOffset,i=t.pageYOffset;return{scrollLeft:n,scrollTop:i}}function Mr(e){return Vi(It(e)).left+Tr(e).scrollLeft}function uf(e,t){var n=je(e),i=It(e),o=n.visualViewport,r=i.clientWidth,s=i.clientHeight,a=0,l=0;if(o){r=o.width,s=o.height;var u=xl();(u||!u&&t==="fixed")&&(a=o.offsetLeft,l=o.offsetTop)}return{width:r,height:s,x:a+Mr(e),y:l}}function pf(e){var t,n=It(e),i=Tr(e),o=(t=e.ownerDocument)==null?void 0:t.body,r=sn(n.scrollWidth,n.clientWidth,o?o.scrollWidth:0,o?o.clientWidth:0),s=sn(n.scrollHeight,n.clientHeight,o?o.scrollHeight:0,o?o.clientHeight:0),a=-i.scrollLeft+Mr(e),l=-i.scrollTop;return Wt(o||n).direction==="rtl"&&(a+=sn(n.clientWidth,o?o.clientWidth:0)-r),{width:r,height:s,x:a,y:l}}function Dr(e){var t=Wt(e),n=t.overflow,i=t.overflowX,o=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+o+i)}function fu(e){return["html","body","#document"].indexOf(St(e))>=0?e.ownerDocument.body:ft(e)&&Dr(e)?e:fu(eo(e))}function Fo(e,t){var n;t===void 0&&(t=[]);var i=fu(e),o=i===((n=e.ownerDocument)==null?void 0:n.body),r=je(i),s=o?[r].concat(r.visualViewport||[],Dr(i)?i:[]):i,a=t.concat(s);return o?a:a.concat(Fo(eo(s)))}function ta(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function rO(e,t){var n=Vi(e,!1,t==="fixed");return n.top=n.top+e.clientTop,n.left=n.left+e.clientLeft,n.bottom=n.top+e.clientHeight,n.right=n.left+e.clientWidth,n.width=e.clientWidth,n.height=e.clientHeight,n.x=n.left,n.y=n.top,n}function mS(e,t,n){return t===uu?ta(uf(e,n)):Ni(t)?rO(t,n):ta(pf(It(e)))}function sO(e){var t=Fo(eo(e)),n=["absolute","fixed"].indexOf(Wt(e).position)>=0,i=n&&ft(e)?an(e):e;return Ni(i)?t.filter(function(o){return Ni(o)&&Il(o,i)&&St(o)!=="body"}):[]}function hf(e,t,n,i){var o=t==="clippingParents"?sO(e):[].concat(t),r=[].concat(o,[n]),s=r[0],a=r.reduce(function(l,u){var p=mS(e,u,i);return l.top=sn(p.top,l.top),l.right=br(p.right,l.right),l.bottom=br(p.bottom,l.bottom),l.left=sn(p.left,l.left),l},mS(e,s,i));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function Pl(e){var t=e.reference,n=e.element,i=e.placement,o=i?Ct(i):null,r=i?Hi(i):null,s=t.x+t.width/2-n.width/2,a=t.y+t.height/2-n.height/2,l;switch(o){case at:l={x:s,y:t.y-n.height};break;case xt:l={x:s,y:t.y+t.height};break;case wt:l={x:t.x+t.width,y:a};break;case mt:l={x:t.x-n.width,y:a};break;default:l={x:t.x,y:t.y}}var u=o?Sr(o):null;if(u!=null){var p=u==="y"?"height":"width";switch(r){case Jn:l[u]=l[u]-(t[p]/2-n[p]/2);break;case vr:l[u]=l[u]+(t[p]/2-n[p]/2);break;default:}}return l}function Ro(e,t){t===void 0&&(t={});var n=t,i=n.placement,o=i===void 0?e.placement:i,r=n.strategy,s=r===void 0?e.strategy:r,a=n.boundary,l=a===void 0?rS:a,u=n.rootBoundary,p=u===void 0?uu:u,h=n.elementContext,m=h===void 0?Qs:h,f=n.altBoundary,w=f===void 0?!1:f,O=n.padding,N=O===void 0?0:O,R=kl(typeof N!="number"?N:Al(N,Po)),K=m===Qs?sS:Qs,Y=e.rects.popper,j=e.elements[w?K:m],Q=hf(Ni(j)?j:j.contextElement||It(e.elements.popper),l,p,s),X=Vi(e.elements.reference),ce=Pl({reference:X,element:Y,strategy:"absolute",placement:o}),Ee=ta(Object.assign({},Y,ce)),gt=m===Qs?Ee:X,lt={top:Q.top-gt.top+R.top,bottom:gt.bottom-Q.bottom+R.bottom,left:Q.left-gt.left+R.left,right:gt.right-Q.right+R.right},kt=e.modifiersData.offset;if(m===Qs&&kt){var Bi=kt[o];Object.keys(lt).forEach(function(Vt){var Lo=[wt,xt].indexOf(Vt)>=0?1:-1,No=[at,xt].indexOf(Vt)>=0?"y":"x";lt[Vt]+=Bi[No]*Lo})}return lt}function mf(e,t){t===void 0&&(t={});var n=t,i=n.placement,o=n.boundary,r=n.rootBoundary,s=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,u=l===void 0?pu:l,p=Hi(i),h=p?a?lf:lf.filter(function(w){return Hi(w)===p}):Po,m=h.filter(function(w){return u.indexOf(w)>=0});m.length===0&&(m=h);var f=m.reduce(function(w,O){return w[O]=Ro(e,{placement:O,boundary:o,rootBoundary:r,padding:s})[Ct(O)],w},{});return Object.keys(f).sort(function(w,O){return f[w]-f[O]})}function aO(e){if(Ct(e)===du)return[];var t=ea(e);return[mu(e),t,mu(t)]}function lO(e){var t=e.state,n=e.options,i=e.name;if(!t.modifiersData[i]._skip){for(var o=n.mainAxis,r=o===void 0?!0:o,s=n.altAxis,a=s===void 0?!0:s,l=n.fallbackPlacements,u=n.padding,p=n.boundary,h=n.rootBoundary,m=n.altBoundary,f=n.flipVariations,w=f===void 0?!0:f,O=n.allowedAutoPlacements,N=t.options.placement,R=Ct(N),K=R===N,Y=l||(K||!w?[ea(N)]:aO(N)),j=[N].concat(Y).reduce(function(xr,io){return xr.concat(Ct(io)===du?mf(t,{placement:io,boundary:p,rootBoundary:h,padding:u,flipVariations:w,allowedAutoPlacements:O}):io)},[]),Q=t.rects.reference,X=t.rects.popper,ce=new Map,Ee=!0,gt=j[0],lt=0;lt<j.length;lt++){var kt=j[lt],Bi=Ct(kt),Vt=Hi(kt)===Jn,Lo=[at,xt].indexOf(Bi)>=0,No=Lo?"width":"height",si=Ro(t,{placement:kt,boundary:p,rootBoundary:h,altBoundary:m,padding:u}),Gi=Lo?Vt?wt:mt:Vt?xt:at;Q[No]>X[No]&&(Gi=ea(Gi));var Fl=ea(Gi),Vo=[];if(r&&Vo.push(si[Bi]<=0),a&&Vo.push(si[Gi]<=0,si[Fl]<=0),Vo.every(function(xr){return xr})){gt=kt,Ee=!1;break}ce.set(kt,Vo)}if(Ee)for(var Rl=w?3:1,bu=function(io){var ra=j.find(function(Nl){var Ho=ce.get(Nl);if(Ho)return Ho.slice(0,io).every(function(wu){return wu})});if(ra)return gt=ra,"break"},oa=Rl;oa>0;oa--){var Ll=bu(oa);if(Ll==="break")break}t.placement!==gt&&(t.modifiersData[i]._skip=!0,t.placement=gt,t.reset=!0)}}var ff={name:"flip",enabled:!0,phase:"main",fn:lO,requiresIfExists:["offset"],data:{_skip:!1}};function cO(e,t,n){var i=Ct(e),o=[mt,at].indexOf(i)>=0?-1:1,r=typeof n=="function"?n(Object.assign({},t,{placement:e})):n,s=r[0],a=r[1];return s=s||0,a=(a||0)*o,[mt,wt].indexOf(i)>=0?{x:a,y:s}:{x:s,y:a}}function dO(e){var t=e.state,n=e.options,i=e.name,o=n.offset,r=o===void 0?[0,0]:o,s=pu.reduce(function(p,h){return p[h]=cO(h,t.rects,r),p},{}),a=s[t.placement],l=a.x,u=a.y;t.modifiersData.popperOffsets!=null&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=u),t.modifiersData[i]=s}var gf={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:dO};function uO(e){var t=e.state,n=e.name;t.modifiersData[n]=Pl({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})}var fS={name:"popperOffsets",enabled:!0,phase:"read",fn:uO,data:{}};function _f(e){return e==="x"?"y":"x"}function pO(e){var t=e.state,n=e.options,i=e.name,o=n.mainAxis,r=o===void 0?!0:o,s=n.altAxis,a=s===void 0?!1:s,l=n.boundary,u=n.rootBoundary,p=n.altBoundary,h=n.padding,m=n.tether,f=m===void 0?!0:m,w=n.tetherOffset,O=w===void 0?0:w,N=Ro(t,{boundary:l,rootBoundary:u,padding:h,altBoundary:p}),R=Ct(t.placement),K=Hi(t.placement),Y=!K,j=Sr(R),Q=_f(j),X=t.modifiersData.popperOffsets,ce=t.rects.reference,Ee=t.rects.popper,gt=typeof O=="function"?O(Object.assign({},t.rects,{placement:t.placement})):O,lt=typeof gt=="number"?{mainAxis:gt,altAxis:gt}:Object.assign({mainAxis:0,altAxis:0},gt),kt=t.modifiersData.offset?t.modifiersData.offset[t.placement]:null,Bi={x:0,y:0};if(X){if(r){var Vt,Lo=j==="y"?at:mt,No=j==="y"?xt:wt,si=j==="y"?"height":"width",Gi=X[j],Fl=Gi+N[Lo],Vo=Gi-N[No],Rl=f?-Ee[si]/2:0,bu=K===Jn?ce[si]:Ee[si],oa=K===Jn?-Ee[si]:-ce[si],Ll=t.elements.arrow,xr=f&&Ll?wr(Ll):{width:0,height:0},io=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:Ol(),ra=io[Lo],Nl=io[No],Ho=Cr(0,ce[si],xr[si]),wu=Y?ce[si]/2-Rl-Ho-ra-lt.mainAxis:bu-Ho-ra-lt.mainAxis,HS=Y?-ce[si]/2+Rl+Ho+Nl+lt.mainAxis:oa+Ho+Nl+lt.mainAxis,Su=t.elements.arrow&&an(t.elements.arrow),BS=Su?j==="y"?Su.clientTop||0:Su.clientLeft||0:0,kf=(Vt=kt?.[j])!=null?Vt:0,GS=Gi+wu-kf-BS,jS=Gi+HS-kf,Af=Cr(f?br(Fl,GS):Fl,Gi,f?sn(Vo,jS):Vo);X[j]=Af,Bi[j]=Af-Gi}if(a){var Pf,zS=j==="x"?at:mt,US=j==="x"?xt:wt,Bo=X[Q],Vl=Q==="y"?"height":"width",Ff=Bo+N[zS],Rf=Bo-N[US],Cu=[at,mt].indexOf(R)!==-1,Lf=(Pf=kt?.[Q])!=null?Pf:0,Nf=Cu?Ff:Bo-ce[Vl]-Ee[Vl]-Lf+lt.altAxis,Vf=Cu?Bo+ce[Vl]+Ee[Vl]-Lf-lt.altAxis:Rf,Hf=f&&Cu?dS(Nf,Bo,Vf):Cr(f?Nf:Ff,Bo,f?Vf:Rf);X[Q]=Hf,Bi[Q]=Hf-Bo}t.modifiersData[i]=Bi}}var yf={name:"preventOverflow",enabled:!0,phase:"main",fn:pO,requiresIfExists:["offset"]};function vf(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}}function bf(e){return e===je(e)||!ft(e)?Tr(e):vf(e)}function hO(e){var t=e.getBoundingClientRect(),n=Xn(t.width)/e.offsetWidth||1,i=Xn(t.height)/e.offsetHeight||1;return n!==1||i!==1}function wf(e,t,n){n===void 0&&(n=!1);var i=ft(t),o=ft(t)&&hO(t),r=It(t),s=Vi(e,o,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!n)&&((St(t)!=="body"||Dr(r))&&(a=bf(t)),ft(t)?(l=Vi(t,!0),l.x+=t.clientLeft,l.y+=t.clientTop):r&&(l.x=Mr(r))),{x:s.left+a.scrollLeft-l.x,y:s.top+a.scrollTop-l.y,width:s.width,height:s.height}}function mO(e){var t=new Map,n=new Set,i=[];e.forEach(function(r){t.set(r.name,r)});function o(r){n.add(r.name);var s=[].concat(r.requires||[],r.requiresIfExists||[]);s.forEach(function(a){if(!n.has(a)){var l=t.get(a);l&&o(l)}}),i.push(r)}return e.forEach(function(r){n.has(r.name)||o(r)}),i}function Sf(e){var t=mO(e);return aS.reduce(function(n,i){return n.concat(t.filter(function(o){return o.phase===i}))},[])}function Cf(e){var t;return function(){return t||(t=new Promise(function(n){Promise.resolve().then(function(){t=void 0,n(e())})})),t}}function Tf(e){var t=e.reduce(function(n,i){var o=n[i.name];return n[i.name]=o?Object.assign({},o,i,{options:Object.assign({},o.options,i.options),data:Object.assign({},o.data,i.data)}):i,n},{});return Object.keys(t).map(function(n){return t[n]})}var gS={placement:"bottom",modifiers:[],strategy:"absolute"};function _S(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some(function(i){return!(i&&typeof i.getBoundingClientRect=="function")})}function yS(e){e===void 0&&(e={});var t=e,n=t.defaultModifiers,i=n===void 0?[]:n,o=t.defaultOptions,r=o===void 0?gS:o;return function(a,l,u){u===void 0&&(u=r);var p={placement:"bottom",orderedModifiers:[],options:Object.assign({},gS,r),modifiersData:{},elements:{reference:a,popper:l},attributes:{},styles:{}},h=[],m=!1,f={state:p,setOptions:function(R){var K=typeof R=="function"?R(p.options):R;O(),p.options=Object.assign({},r,p.options,K),p.scrollParents={reference:Ni(a)?Fo(a):a.contextElement?Fo(a.contextElement):[],popper:Fo(l)};var Y=Sf(Tf([].concat(i,p.options.modifiers)));return p.orderedModifiers=Y.filter(function(j){return j.enabled}),w(),f.update()},forceUpdate:function(){if(!m){var R=p.elements,K=R.reference,Y=R.popper;if(_S(K,Y)){p.rects={reference:wf(K,an(Y),p.options.strategy==="fixed"),popper:wr(Y)},p.reset=!1,p.placement=p.options.placement,p.orderedModifiers.forEach(function(lt){return p.modifiersData[lt.name]=Object.assign({},lt.data)});for(var j=0;j<p.orderedModifiers.length;j++){if(p.reset===!0){p.reset=!1,j=-1;continue}var Q=p.orderedModifiers[j],X=Q.fn,ce=Q.options,Ee=ce===void 0?{}:ce,gt=Q.name;typeof X=="function"&&(p=X({state:p,options:Ee,name:gt,instance:f})||p)}}}},update:Cf(function(){return new Promise(function(N){f.forceUpdate(),N(p)})}),destroy:function(){O(),m=!0}};if(!_S(a,l))return f;f.setOptions(u).then(function(N){!m&&u.onFirstUpdate&&u.onFirstUpdate(N)});function w(){p.orderedModifiers.forEach(function(N){var R=N.name,K=N.options,Y=K===void 0?{}:K,j=N.effect;if(typeof j=="function"){var Q=j({state:p,name:R,instance:f,options:Y}),X=function(){};h.push(Q||X)}})}function O(){h.forEach(function(N){return N()}),h=[]}return f}}var fO=[hS,fS,pS,lS],Mf=yS({defaultModifiers:fO});var gO=["ngbDatepickerDayView",""],_O=["month"],yO=["year"];function vO(e,t){if(e&1&&(_(0,"option",3),L(1),y()),e&2){let n=t.$implicit,i=T();C("value",n),At("aria-label",i.i18n.getMonthFullName(n,i.date.year)),g(),de(i.i18n.getMonthShortName(n,i.date.year))}}function bO(e,t){if(e&1&&(_(0,"option",3),L(1),y()),e&2){let n=t.$implicit,i=T();C("value",n),g(),de(i.i18n.getYearNumerals(n))}}function wO(e,t){if(e&1){let n=oe();_(0,"ngb-datepicker-navigation-select",6),x("select",function(o){A(n);let r=T();return P(r.select.emit(o))}),y()}if(e&2){let n=T();C("date",n.date)("disabled",n.disabled)("months",n.selectBoxes.months)("years",n.selectBoxes.years)}}function SO(e,t){e&1&&V(0,"div",7)}function CO(e,t){e&1&&V(0,"div",7)}function TO(e,t){if(e&1&&(G(0,SO,1,0,"div",7),_(1,"div",8),L(2),y(),G(3,CO,1,0,"div",7)),e&2){let n=t.$implicit,i=t.$index,o=T(2);Ve(0,i>0?0:-1),g(2),yt(" ",o.i18n.getMonthLabel(n.firstDate)," "),g(),Ve(3,i!==o.months.length-1?3:-1)}}function MO(e,t){if(e&1&&zi(0,TO,4,3,null,null,jo),e&2){let n=T();Ui(n.months)}}function DO(e,t){if(e&1&&(_(0,"div",1),L(1),y()),e&2){let n=T(2);g(),de(n.i18n.getWeekLabel())}}function EO(e,t){if(e&1&&(_(0,"div",2),L(1),y()),e&2){let n=t.$implicit;g(),de(n)}}function xO(e,t){if(e&1&&(_(0,"div",0),G(1,DO,2,1,"div",1),zi(2,EO,2,1,"div",2,wg),y()),e&2){let n=T();g(),Ve(1,n.datepicker.showWeekNumbers?1:-1),g(),Ui(n.viewModel.weekdays)}}function IO(e,t){if(e&1&&(_(0,"div",4),L(1),y()),e&2){let n=T(2).$implicit,i=T();g(),de(i.i18n.getWeekNumerals(n.number))}}function OO(e,t){}function kO(e,t){if(e&1&&G(0,OO,0,0,"ng-template",7),e&2){let n=T().$implicit,i=T(3);C("ngTemplateOutlet",i.datepicker.dayTemplate)("ngTemplateOutletContext",n.context)}}function AO(e,t){if(e&1){let n=oe();_(0,"div",6),x("click",function(o){let r=A(n).$implicit;return T(3).doSelect(r),P(o.preventDefault())}),G(1,kO,1,2,null,7),y()}if(e&2){let n=t.$implicit;_t("disabled",n.context.disabled)("hidden",n.hidden)("ngb-dp-today",n.context.today),C("tabindex",n.tabindex),At("aria-label",n.ariaLabel),g(),Ve(1,n.hidden?-1:1)}}function PO(e,t){if(e&1&&(_(0,"div",3),G(1,IO,2,1,"div",4),zi(2,AO,2,9,"div",5,jo),y()),e&2){let n=T().$implicit,i=T();g(),Ve(1,i.datepicker.showWeekNumbers?1:-1),g(),Ui(n.days)}}function FO(e,t){if(e&1&&G(0,PO,4,1,"div",3),e&2){let n=t.$implicit;Ve(0,n.collapsed?-1:0)}}var RO=["defaultDayTemplate"],LO=["content"],NO=e=>({$implicit:e});function VO(e,t){if(e&1&&V(0,"div",8),e&2){let n=t.date,i=t.currentMonth,o=t.selected,r=t.disabled,s=t.focused;C("date",n)("currentMonth",i)("selected",o)("disabled",r)("focused",s)}}function HO(e,t){if(e&1&&(_(0,"div",10),L(1),y()),e&2){let n=T().$implicit,i=T(2);g(),yt(" ",i.i18n.getMonthLabel(n.firstDate)," ")}}function BO(e,t){if(e&1&&(_(0,"div",9),G(1,HO,2,1,"div",10),V(2,"ngb-datepicker-month",11),y()),e&2){let n=t.$implicit,i=T(2);g(),Ve(1,i.navigation==="none"||i.displayMonths>1&&i.navigation==="select"?1:-1),g(),C("month",n.firstDate)}}function GO(e,t){if(e&1&&zi(0,BO,3,2,"div",9,jo),e&2){let n=T();Ui(n.model.months)}}function jO(e,t){if(e&1){let n=oe();_(0,"ngb-datepicker-navigation",12),x("navigate",function(o){A(n);let r=T();return P(r.onNavigateEvent(o))})("select",function(o){A(n);let r=T();return P(r.onNavigateDateSelect(o))}),y()}if(e&2){let n=T();C("date",n.model.firstDate)("months",n.model.months)("disabled",n.model.disabled)("showSelect",n.model.navigation==="select")("prevDisabled",n.model.prevDisabled)("nextDisabled",n.model.nextDisabled)("selectBoxes",n.model.selectBoxes)}}function zO(e,t){}function UO(e,t){}var $O={animation:!0,transitionTimerDelayMs:5};function ln(e){return parseInt(`${e}`,10)}function vS(e){return typeof e=="string"}function to(e){return!isNaN(ln(e))}function ri(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e}function bS(e){return to(e)?`0${e}`.slice(-2):""}function WO(e,t){return!t||typeof e.closest>"u"?null:e.closest(t)}var{transitionTimerDelayMs:vae}=$O;var Ot=class e{static from(t){return t instanceof e?t:t?new e(t.year,t.month,t.day):null}constructor(t,n,i){this.year=ri(t)?t:null,this.month=ri(n)?n:null,this.day=ri(i)?i:null}equals(t){return t!=null&&this.year===t.year&&this.month===t.month&&this.day===t.day}before(t){return t?this.year===t.year?this.month===t.month?this.day===t.day?!1:this.day<t.day:this.month<t.month:this.year<t.year:!1}after(t){return t?this.year===t.year?this.month===t.month?this.day===t.day?!1:this.day>t.day:this.month>t.month:this.year>t.year:!1}};function wS(e){return new Ot(e.getFullYear(),e.getMonth()+1,e.getDate())}function gu(e){let t=new Date(e.year,e.month-1,e.day,12);return isNaN(t.getTime())||t.setFullYear(e.year),t}function qO(){return new ZO}var na=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=U({token:t,factory:()=>qO(),providedIn:"root"});let e=t;return e})(),ZO=(()=>{let t=class t extends na{getDaysPerWeek(){return 7}getMonths(){return[1,2,3,4,5,6,7,8,9,10,11,12]}getWeeksPerMonth(){return 6}getNext(i,o="d",r=1){let s=gu(i),a=!0,l=s.getMonth();switch(o){case"y":s.setFullYear(s.getFullYear()+r);break;case"m":l+=r,s.setMonth(l),l=l%12,l<0&&(l=l+12);break;case"d":s.setDate(s.getDate()+r),a=!1;break;default:return i}return a&&s.getMonth()!==l&&s.setDate(0),wS(s)}getPrev(i,o="d",r=1){return this.getNext(i,o,-r)}getWeekday(i){let r=gu(i).getDay();return r===0?7:r}getWeekNumber(i,o){o===7&&(o=0);let r=(11-o)%7,s=i[r],a=gu(s);a.setDate(a.getDate()+4-(a.getDay()||7));let l=a.getTime();return a.setMonth(0),a.setDate(1),Math.floor(Math.round((l-a.getTime())/864e5)/7)+1}getToday(){return wS(new Date)}isValid(i){if(!i||!ri(i.year)||!ri(i.month)||!ri(i.day)||i.year===0)return!1;let o=gu(i);return!isNaN(o.getTime())&&o.getFullYear()===i.year&&o.getMonth()+1===i.month&&o.getDate()===i.day}};t.\u0275fac=(()=>{let i;return function(r){return(i||(i=di(t)))(r||t)}})(),t.\u0275prov=U({token:t,factory:t.\u0275fac});let e=t;return e})();function ia(e,t){return!YO(e,t)}function DS(e,t){return!e&&!t?!1:!e||!t?!0:e.year!==t.year||e.month!==t.month}function YO(e,t){return!e&&!t||!!e&&!!t&&e.equals(t)}function KO(e,t){if(t&&e&&t.before(e))throw new Error(`'maxDate' ${t} should be greater than 'minDate' ${e}`)}function _u(e,t,n){return e&&t&&e.before(t)?t:e&&n&&e.after(n)?n:e||null}function Df(e,t){let{minDate:n,maxDate:i,disabled:o,markDisabled:r}=t;return!(e==null||o||r&&r(e,{year:e.year,month:e.month})||n&&e.before(n)||i&&e.after(i))}function QO(e,t,n,i){if(!t)return[];let o=e.getMonths(t.year);if(n&&t.year===n.year){let r=o.findIndex(s=>s===n.month);o=o.slice(r)}if(i&&t.year===i.year){let r=o.findIndex(s=>s===i.month);o=o.slice(0,r+1)}return o}function JO(e,t,n){if(!e)return[];let i=t?Math.max(t.year,e.year-500):e.year-10,r=(n?Math.min(n.year,e.year+500):e.year+10)-i+1,s=Array(r);for(let a=0;a<r;a++)s[a]=i+a;return s}function XO(e,t,n){let i=Object.assign(e.getNext(t,"m"),{day:1});return n!=null&&i.after(n)}function ek(e,t,n){let i=Object.assign(e.getPrev(t,"m"),{day:1});return n!=null&&(i.year===n.year&&i.month<n.month||i.year<n.year&&n.month===1)}function tk(e,t,n,i,o){let{displayMonths:r,months:s}=n,a=s.splice(0,s.length);return Array.from({length:r},(u,p)=>{let h=Object.assign(e.getNext(t,"m",p),{day:1});if(s[p]=null,!o){let m=a.findIndex(f=>f.firstDate.equals(h));m!==-1&&(s[p]=a.splice(m,1)[0])}return h}).forEach((u,p)=>{s[p]===null&&(s[p]=ik(e,u,n,i,a.shift()||{}))}),s}function ik(e,t,n,i,o={}){let{dayTemplateData:r,minDate:s,maxDate:a,firstDayOfWeek:l,markDisabled:u,outsideDays:p,weekdayWidth:h,weekdaysVisible:m}=n,f=e.getToday();o.firstDate=null,o.lastDate=null,o.number=t.month,o.year=t.year,o.weeks=o.weeks||[],o.weekdays=o.weekdays||[],t=nk(e,t,l),m||(o.weekdays.length=0);for(let w=0;w<e.getWeeksPerMonth();w++){let O=o.weeks[w];O||(O=o.weeks[w]={number:0,days:[],collapsed:!0});let N=O.days;for(let R=0;R<e.getDaysPerWeek();R++){w===0&&m&&(o.weekdays[R]=i.getWeekdayLabel(e.getWeekday(t),h));let K=new Ot(t.year,t.month,t.day),Y=e.getNext(K),j=i.getDayAriaLabel(K),Q=!!(s&&K.before(s)||a&&K.after(a));!Q&&u&&(Q=u(K,{month:o.number,year:o.year}));let X=K.equals(f),ce=r?r(K,{month:o.number,year:o.year}):void 0;o.firstDate===null&&K.month===o.number&&(o.firstDate=K),K.month===o.number&&Y.month!==o.number&&(o.lastDate=K);let Ee=N[R];Ee||(Ee=N[R]={}),Ee.date=K,Ee.context=Object.assign(Ee.context||{},{$implicit:K,date:K,data:ce,currentMonth:o.number,currentYear:o.year,disabled:Q,focused:!1,selected:!1,today:X}),Ee.tabindex=-1,Ee.ariaLabel=j,Ee.hidden=!1,t=Y}O.number=e.getWeekNumber(N.map(R=>R.date),l),O.collapsed=p==="collapsed"&&N[0].date.month!==o.number&&N[N.length-1].date.month!==o.number}return o}function nk(e,t,n){let i=e.getDaysPerWeek(),o=new Ot(t.year,t.month,1),r=e.getWeekday(o)%i;return e.getPrev(o,"d",(i+r-n)%i)}var Er=(()=>{let t=class t{getMonthLabel(i){return`${this.getMonthFullName(i.month,i.year)} ${this.getYearNumerals(i.year)}`}getDayNumerals(i){return`${i.day}`}getWeekNumerals(i){return`${i}`}getYearNumerals(i){return`${i}`}getWeekLabel(){return""}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=U({token:t,factory:()=>new ok,providedIn:"root"});let e=t;return e})(),ok=(()=>{let t=class t extends Er{constructor(){super(...arguments),this._locale=F(Ig),this._monthsShort=[...Array(12).keys()].map(i=>Intl.DateTimeFormat(this._locale,{month:"short"}).format(new Date(2e3,i))),this._monthsFull=[...Array(12).keys()].map(i=>Intl.DateTimeFormat(this._locale,{month:"long"}).format(new Date(2e3,i)))}getWeekdayLabel(i,o="narrow"){let r=[...Array(7).keys()].map(a=>Intl.DateTimeFormat(this._locale,{weekday:o}).format(new Date(Date.UTC(2021,5,a-1))));return r.map((a,l)=>r[(l+1)%7])[i-1]||""}getMonthShortName(i){return this._monthsShort[i-1]||""}getMonthFullName(i){return this._monthsFull[i-1]||""}getDayAriaLabel(i){let o=new Date(i.year,i.month-1,i.day);return Pg(o,"fullDate",this._locale)}};t.\u0275fac=(()=>{let i;return function(r){return(i||(i=di(t)))(r||t)}})(),t.\u0275prov=U({token:t,factory:t.\u0275fac});let e=t;return e})(),Ef=(()=>{let t=class t{constructor(){this._VALIDATORS={dayTemplateData:i=>{if(this._state.dayTemplateData!==i)return{dayTemplateData:i}},displayMonths:i=>{if(i=ln(i),ri(i)&&i>0&&this._state.displayMonths!==i)return{displayMonths:i}},disabled:i=>{if(this._state.disabled!==i)return{disabled:i}},firstDayOfWeek:i=>{if(i=ln(i),ri(i)&&i>=0&&this._state.firstDayOfWeek!==i)return{firstDayOfWeek:i}},focusVisible:i=>{if(this._state.focusVisible!==i&&!this._state.disabled)return{focusVisible:i}},markDisabled:i=>{if(this._state.markDisabled!==i)return{markDisabled:i}},maxDate:i=>{let o=this.toValidDate(i,null);if(ia(this._state.maxDate,o))return{maxDate:o}},minDate:i=>{let o=this.toValidDate(i,null);if(ia(this._state.minDate,o))return{minDate:o}},navigation:i=>{if(this._state.navigation!==i)return{navigation:i}},outsideDays:i=>{if(this._state.outsideDays!==i)return{outsideDays:i}},weekdays:i=>{let o=i===!0||i===!1?"narrow":i,r=i===!0||i===!1?i:!0;if(this._state.weekdayWidth!==o||this._state.weekdaysVisible!==r)return{weekdayWidth:o,weekdaysVisible:r}}},this._calendar=F(na),this._i18n=F(Er),this._model$=new xe,this._dateSelect$=new xe,this._state={dayTemplateData:null,markDisabled:null,maxDate:null,minDate:null,disabled:!1,displayMonths:1,firstDate:null,firstDayOfWeek:1,lastDate:null,focusDate:null,focusVisible:!1,months:[],navigation:"select",outsideDays:"visible",prevDisabled:!1,nextDisabled:!1,selectedDate:null,selectBoxes:{years:[],months:[]},weekdayWidth:"narrow",weekdaysVisible:!0}}get model$(){return this._model$.pipe(Tt(i=>i.months.length>0))}get dateSelect$(){return this._dateSelect$.pipe(Tt(i=>i!==null))}set(i){let o=Object.keys(i).map(r=>this._VALIDATORS[r](i[r])).reduce((r,s)=>v(v({},r),s),{});Object.keys(o).length>0&&this._nextState(o)}focus(i){let o=this.toValidDate(i,null);o!=null&&!this._state.disabled&&ia(this._state.focusDate,o)&&this._nextState({focusDate:i})}focusSelect(){Df(this._state.focusDate,this._state)&&this.select(this._state.focusDate,{emitEvent:!0})}open(i){let o=this.toValidDate(i,this._calendar.getToday());o!=null&&!this._state.disabled&&(!this._state.firstDate||DS(this._state.firstDate,o))&&this._nextState({firstDate:o})}select(i,o={}){let r=this.toValidDate(i,null);r!=null&&!this._state.disabled&&(ia(this._state.selectedDate,r)&&this._nextState({selectedDate:r}),o.emitEvent&&Df(r,this._state)&&this._dateSelect$.next(r))}toValidDate(i,o){let r=Ot.from(i);return o===void 0&&(o=this._calendar.getToday()),this._calendar.isValid(r)?r:o}getMonth(i){for(let o of this._state.months)if(i.month===o.number&&i.year===o.year)return o;throw new Error(`month ${i.month} of year ${i.year} not found`)}_nextState(i){let o=this._updateState(i);this._patchContexts(o),this._state=o,this._model$.next(this._state)}_patchContexts(i){let{months:o,displayMonths:r,selectedDate:s,focusDate:a,focusVisible:l,disabled:u,outsideDays:p}=i;i.months.forEach(h=>{h.weeks.forEach(m=>{m.days.forEach(f=>{a&&(f.context.focused=a.equals(f.date)&&l),f.tabindex=!u&&a&&f.date.equals(a)&&a.month===h.number?0:-1,u===!0&&(f.context.disabled=!0),s!==void 0&&(f.context.selected=s!==null&&s.equals(f.date)),h.number!==f.date.month&&(f.hidden=p==="hidden"||p==="collapsed"||r>1&&f.date.after(o[0].firstDate)&&f.date.before(o[r-1].lastDate))})})})}_updateState(i){let o=Object.assign({},this._state,i),r=o.firstDate;if(("minDate"in i||"maxDate"in i)&&(KO(o.minDate,o.maxDate),o.focusDate=_u(o.focusDate,o.minDate,o.maxDate),o.firstDate=_u(o.firstDate,o.minDate,o.maxDate),r=o.focusDate),"disabled"in i&&(o.focusVisible=!1),"selectedDate"in i&&this._state.months.length===0&&(r=o.selectedDate),"focusVisible"in i||"focusDate"in i&&(o.focusDate=_u(o.focusDate,o.minDate,o.maxDate),r=o.focusDate,o.months.length!==0&&o.focusDate&&!o.focusDate.before(o.firstDate)&&!o.focusDate.after(o.lastDate)))return o;if("firstDate"in i&&(o.firstDate=_u(o.firstDate,o.minDate,o.maxDate),r=o.firstDate),r){let s="dayTemplateData"in i||"firstDayOfWeek"in i||"markDisabled"in i||"minDate"in i||"maxDate"in i||"disabled"in i||"outsideDays"in i||"weekdaysVisible"in i,a=tk(this._calendar,r,o,this._i18n,s);o.months=a,o.firstDate=a[0].firstDate,o.lastDate=a[a.length-1].lastDate,"selectedDate"in i&&!Df(o.selectedDate,o)&&(o.selectedDate=null),"firstDate"in i&&(!o.focusDate||o.focusDate.before(o.firstDate)||o.focusDate.after(o.lastDate))&&(o.focusDate=r);let l=!this._state.firstDate||this._state.firstDate.year!==o.firstDate.year,u=!this._state.firstDate||this._state.firstDate.month!==o.firstDate.month;o.navigation==="select"?(("minDate"in i||"maxDate"in i||o.selectBoxes.years.length===0||l)&&(o.selectBoxes.years=JO(o.firstDate,o.minDate,o.maxDate)),("minDate"in i||"maxDate"in i||o.selectBoxes.months.length===0||l)&&(o.selectBoxes.months=QO(this._calendar,o.firstDate,o.minDate,o.maxDate))):o.selectBoxes={years:[],months:[]},(o.navigation==="arrows"||o.navigation==="select")&&(u||l||"minDate"in i||"maxDate"in i||"disabled"in i)&&(o.prevDisabled=o.disabled||ek(this._calendar,o.firstDate,o.minDate),o.nextDisabled=o.disabled||XO(this._calendar,o.lastDate,o.maxDate))}return o}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=U({token:t,factory:t.\u0275fac});let e=t;return e})(),vu=function(e){return e[e.PREV=0]="PREV",e[e.NEXT=1]="NEXT",e}(vu||{}),xf=(()=>{let t=class t{constructor(){this.displayMonths=1,this.firstDayOfWeek=1,this.navigation="select",this.outsideDays="visible",this.showWeekNumbers=!1,this.weekdays="narrow"}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function rk(){return new sk}var If=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=U({token:t,factory:()=>rk(),providedIn:"root"});let e=t;return e})(),sk=(()=>{let t=class t extends If{fromModel(i){return i&&ri(i.year)&&ri(i.month)&&ri(i.day)?{year:i.year,month:i.month,day:i.day}:null}toModel(i){return i&&ri(i.year)&&ri(i.month)&&ri(i.day)?{year:i.year,month:i.month,day:i.day}:null}};t.\u0275fac=(()=>{let i;return function(r){return(i||(i=di(t)))(r||t)}})(),t.\u0275prov=U({token:t,factory:t.\u0275fac});let e=t;return e})(),ak=(()=>{let t=class t{processKey(i,o){let{state:r,calendar:s}=o;switch(i.key){case"PageUp":o.focusDate(s.getPrev(r.focusedDate,i.shiftKey?"y":"m",1));break;case"PageDown":o.focusDate(s.getNext(r.focusedDate,i.shiftKey?"y":"m",1));break;case"End":o.focusDate(i.shiftKey?r.maxDate:r.lastDate);break;case"Home":o.focusDate(i.shiftKey?r.minDate:r.firstDate);break;case"ArrowLeft":o.focusDate(s.getPrev(r.focusedDate,"d",1));break;case"ArrowUp":o.focusDate(s.getPrev(r.focusedDate,"d",s.getDaysPerWeek()));break;case"ArrowRight":o.focusDate(s.getNext(r.focusedDate,"d",1));break;case"ArrowDown":o.focusDate(s.getNext(r.focusedDate,"d",s.getDaysPerWeek()));break;case"Enter":case" ":o.focusSelect();break;default:return}i.preventDefault(),i.stopPropagation()}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),lk=(()=>{let t=class t{constructor(){this.i18n=F(Er)}isMuted(){return!this.selected&&(this.date.month!==this.currentMonth||this.disabled)}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=ee({type:t,selectors:[["","ngbDatepickerDayView",""]],hostAttrs:[1,"btn-light"],hostVars:10,hostBindings:function(o,r){o&2&&_t("bg-primary",r.selected)("text-white",r.selected)("text-muted",r.isMuted())("outside",r.isMuted())("active",r.focused)},inputs:{currentMonth:"currentMonth",date:"date",disabled:"disabled",focused:"focused",selected:"selected"},standalone:!0,features:[ae],attrs:gO,decls:1,vars:1,template:function(o,r){o&1&&L(0),o&2&&de(r.i18n.getDayNumerals(r.date))},styles:[`[ngbDatepickerDayView]{text-align:center;width:2rem;height:2rem;line-height:2rem;border-radius:.25rem;background:transparent}[ngbDatepickerDayView]:hover:not(.bg-primary),[ngbDatepickerDayView].active:not(.bg-primary){background-color:var(--bs-tertiary-bg);outline:1px solid var(--bs-border-color)}[ngbDatepickerDayView].outside{opacity:.5}
`],encapsulation:2,changeDetection:0});let e=t;return e})(),ck=(()=>{let t=class t{constructor(){this._month=-1,this._year=-1,this.i18n=F(Er),this.select=new $}changeMonth(i){this.select.emit(new Ot(this.date.year,ln(i),1))}changeYear(i){this.select.emit(new Ot(ln(i),this.date.month,1))}ngAfterViewChecked(){this.date&&(this.date.month!==this._month&&(this._month=this.date.month,this.monthSelect.nativeElement.value=`${this._month}`),this.date.year!==this._year&&(this._year=this.date.year,this.yearSelect.nativeElement.value=`${this._year}`))}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=ee({type:t,selectors:[["ngb-datepicker-navigation-select"]],viewQuery:function(o,r){if(o&1&&(Ft(_O,7,ze),Ft(yO,7,ze)),o&2){let s;pe(s=he())&&(r.monthSelect=s.first),pe(s=he())&&(r.yearSelect=s.first)}},inputs:{date:"date",disabled:"disabled",months:"months",years:"years"},outputs:{select:"select"},standalone:!0,features:[ae],decls:8,vars:2,consts:()=>{let i;i=$localize`:@@ngb.datepicker.select-month:Select month`;let o;o=$localize`:@@ngb.datepicker.select-month:Select month`;let r;r=$localize`:@@ngb.datepicker.select-year:Select year`;let s;return s=$localize`:@@ngb.datepicker.select-year:Select year`,[["month",""],["year",""],["aria-label",i,"title",o,1,"form-select",3,"change","disabled"],[3,"value"],["aria-label",r,"title",s,1,"form-select",3,"change","disabled"]]},template:function(o,r){if(o&1){let s=oe();_(0,"select",2,0),x("change",function(l){return A(s),P(r.changeMonth(l.target.value))}),zi(2,vO,2,3,"option",3,jo),y(),_(4,"select",4,1),x("change",function(l){return A(s),P(r.changeYear(l.target.value))}),zi(6,bO,2,2,"option",3,jo),y()}o&2&&(C("disabled",r.disabled),g(2),Ui(r.months),g(2),C("disabled",r.disabled),g(2),Ui(r.years))},styles:[`ngb-datepicker-navigation-select>.form-select{flex:1 1 auto;padding:0 .5rem;font-size:.875rem;height:1.85rem}ngb-datepicker-navigation-select>.form-select:focus{z-index:1}ngb-datepicker-navigation-select>.form-select::-ms-value{background-color:transparent!important}
`],encapsulation:2,changeDetection:0});let e=t;return e})(),dk=(()=>{let t=class t{constructor(){this.navigation=vu,this.i18n=F(Er),this.months=[],this.navigate=new $,this.select=new $}onClickPrev(i){i.currentTarget.focus(),this.navigate.emit(this.navigation.PREV)}onClickNext(i){i.currentTarget.focus(),this.navigate.emit(this.navigation.NEXT)}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=ee({type:t,selectors:[["ngb-datepicker-navigation"]],inputs:{date:"date",disabled:"disabled",months:"months",showSelect:"showSelect",prevDisabled:"prevDisabled",nextDisabled:"nextDisabled",selectBoxes:"selectBoxes"},outputs:{navigate:"navigate",select:"select"},standalone:!0,features:[ae],decls:8,vars:4,consts:()=>{let i;i=$localize`:@@ngb.datepicker.previous-month:Previous month`;let o;o=$localize`:@@ngb.datepicker.previous-month:Previous month`;let r;r=$localize`:@@ngb.datepicker.next-month:Next month`;let s;return s=$localize`:@@ngb.datepicker.next-month:Next month`,[[1,"ngb-dp-arrow","ngb-dp-arrow-prev"],["type","button","aria-label",i,"title",o,1,"btn","btn-link","ngb-dp-arrow-btn",3,"click","disabled"],[1,"ngb-dp-navigation-chevron"],[1,"ngb-dp-navigation-select",3,"date","disabled","months","years"],[1,"ngb-dp-arrow","ngb-dp-arrow-next"],["type","button","aria-label",r,"title",s,1,"btn","btn-link","ngb-dp-arrow-btn",3,"click","disabled"],[1,"ngb-dp-navigation-select",3,"select","date","disabled","months","years"],[1,"ngb-dp-arrow"],[1,"ngb-dp-month-name"]]},template:function(o,r){o&1&&(_(0,"div",0)(1,"button",1),x("click",function(a){return r.onClickPrev(a)}),V(2,"span",2),y()(),G(3,wO,1,4,"ngb-datepicker-navigation-select",3)(4,MO,2,0),_(5,"div",4)(6,"button",5),x("click",function(a){return r.onClickNext(a)}),V(7,"span",2),y()()),o&2&&(g(),C("disabled",r.prevDisabled),g(2),Ve(3,r.showSelect?3:-1),g(),Ve(4,r.showSelect?-1:4),g(2),C("disabled",r.nextDisabled))},dependencies:[ck],styles:[`ngb-datepicker-navigation{display:flex;align-items:center}.ngb-dp-navigation-chevron{border-style:solid;border-width:.2em .2em 0 0;display:inline-block;width:.75em;height:.75em;margin-left:.25em;margin-right:.15em;transform:rotate(-135deg)}.ngb-dp-arrow{display:flex;flex:1 1 auto;padding-right:0;padding-left:0;margin:0;width:2rem;height:2rem}.ngb-dp-arrow-next{justify-content:flex-end}.ngb-dp-arrow-next .ngb-dp-navigation-chevron{transform:rotate(45deg);margin-left:.15em;margin-right:.25em}.ngb-dp-arrow-btn{padding:0 .25rem;margin:0 .5rem;border:none;background-color:transparent;z-index:1}.ngb-dp-arrow-btn:focus{outline-width:1px;outline-style:auto}@media all and (-ms-high-contrast: none),(-ms-high-contrast: active){.ngb-dp-arrow-btn:focus{outline-style:solid}}.ngb-dp-month-name{font-size:larger;height:2rem;line-height:2rem;text-align:center}.ngb-dp-navigation-select{display:flex;flex:1 1 9rem}
`],encapsulation:2,changeDetection:0});let e=t;return e})(),uk=(()=>{let t=class t{constructor(){this.templateRef=F(Oe)}};t.\u0275fac=function(o){return new(o||t)},t.\u0275dir=ye({type:t,selectors:[["ng-template","ngbDatepickerContent",""]],standalone:!0});let e=t;return e})(),pk=(()=>{let t=class t{constructor(){this._keyboardService=F(ak),this._service=F(Ef),this.i18n=F(Er),this.datepicker=F(ES)}set month(i){this.viewModel=this._service.getMonth(i)}onKeyDown(i){this._keyboardService.processKey(i,this.datepicker)}doSelect(i){!i.context.disabled&&!i.hidden&&this.datepicker.onDateSelect(i.date)}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=ee({type:t,selectors:[["ngb-datepicker-month"]],hostAttrs:["role","grid"],hostBindings:function(o,r){o&1&&x("keydown",function(a){return r.onKeyDown(a)})},inputs:{month:"month"},standalone:!0,features:[ae],decls:3,vars:1,consts:[["role","row",1,"ngb-dp-week","ngb-dp-weekdays"],[1,"ngb-dp-weekday","ngb-dp-showweek","small"],["role","columnheader",1,"ngb-dp-weekday","small"],["role","row",1,"ngb-dp-week"],[1,"ngb-dp-week-number","small","text-muted"],["role","gridcell",1,"ngb-dp-day",3,"disabled","tabindex","hidden","ngb-dp-today"],["role","gridcell",1,"ngb-dp-day",3,"click","tabindex"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(o,r){o&1&&(G(0,xO,4,1,"div",0),zi(1,FO,1,1,null,null,jo)),o&2&&(Ve(0,r.viewModel.weekdays.length>0?0:-1),g(),Ui(r.viewModel.weeks))},dependencies:[zr],styles:[`ngb-datepicker-month{display:block}.ngb-dp-weekday,.ngb-dp-week-number{line-height:2rem;text-align:center;font-style:italic}.ngb-dp-weekday{color:var(--bs-info)}.ngb-dp-week{border-radius:.25rem;display:flex}.ngb-dp-weekdays{border-bottom:1px solid var(--bs-border-color);border-radius:0;background-color:var(--bs-tertiary-bg)}.ngb-dp-day,.ngb-dp-weekday,.ngb-dp-week-number{width:2rem;height:2rem}.ngb-dp-day{cursor:pointer}.ngb-dp-day.disabled,.ngb-dp-day.hidden{cursor:default;pointer-events:none}.ngb-dp-day[tabindex="0"]{z-index:1}
`],encapsulation:2});let e=t;return e})(),ES=(()=>{let t=class t{constructor(){this.injector=F(cn),this._service=F(Ef),this._calendar=F(na),this._i18n=F(Er),this._config=F(xf),this._nativeElement=F(ze).nativeElement,this._ngbDateAdapter=F(If),this._ngZone=F(ct),this._destroyRef=F(jl),this._controlValue=null,this._publicState={},this.dayTemplate=this._config.dayTemplate,this.dayTemplateData=this._config.dayTemplateData,this.displayMonths=this._config.displayMonths,this.firstDayOfWeek=this._config.firstDayOfWeek,this.footerTemplate=this._config.footerTemplate,this.markDisabled=this._config.markDisabled,this.maxDate=this._config.maxDate,this.minDate=this._config.minDate,this.navigation=this._config.navigation,this.outsideDays=this._config.outsideDays,this.showWeekNumbers=this._config.showWeekNumbers,this.startDate=this._config.startDate,this.weekdays=this._config.weekdays,this.navigate=new $,this.dateSelect=new $,this.onChange=o=>{},this.onTouched=()=>{};let i=F(Gt);this._service.dateSelect$.pipe(El()).subscribe(o=>{this.dateSelect.emit(o)}),this._service.model$.pipe(El()).subscribe(o=>{let r=o.firstDate,s=this.model?this.model.firstDate:null;this._publicState={maxDate:o.maxDate,minDate:o.minDate,firstDate:o.firstDate,lastDate:o.lastDate,focusedDate:o.focusDate,months:o.months.map(h=>h.firstDate)};let a=!1;if(!r.equals(s)&&(this.navigate.emit({current:s?{year:s.year,month:s.month}:null,next:{year:r.year,month:r.month},preventDefault:()=>a=!0}),a&&s!==null)){this._service.open(s);return}let l=o.selectedDate,u=o.focusDate,p=this.model?this.model.focusDate:null;this.model=o,ia(l,this._controlValue)&&(this._controlValue=l,this.onTouched(),this.onChange(this._ngbDateAdapter.toModel(l))),ia(u,p)&&p&&o.focusVisible&&this.focus(),i.markForCheck()})}get state(){return this._publicState}get calendar(){return this._calendar}get i18n(){return this._i18n}focusDate(i){this._service.focus(Ot.from(i))}focusSelect(){this._service.focusSelect()}focus(){this._ngZone.onStable.asObservable().pipe(no(1)).subscribe(()=>this._nativeElement.querySelector('div.ngb-dp-day[tabindex="0"]')?.focus())}navigateTo(i){this._service.open(Ot.from(i?i.day?i:B(v({},i),{day:1}):null))}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{let i=qt(this._contentEl.nativeElement,"focusin"),o=qt(this._contentEl.nativeElement,"focusout");Ir(i,o).pipe(Tt(r=>{let s=r.target,a=r.relatedTarget;return!(s?.classList.contains("ngb-dp-day")&&a?.classList.contains("ngb-dp-day")&&this._nativeElement.contains(s)&&this._nativeElement.contains(a))}),El(this._destroyRef)).subscribe(({type:r})=>this._ngZone.run(()=>this._service.set({focusVisible:r==="focusin"})))})}ngOnInit(){if(this.model===void 0){let i={};["dayTemplateData","displayMonths","markDisabled","firstDayOfWeek","navigation","minDate","maxDate","outsideDays","weekdays"].forEach(o=>i[o]=this[o]),this._service.set(i),this.navigateTo(this.startDate)}this.dayTemplate||(this.dayTemplate=this._defaultDayTemplate)}ngOnChanges(i){let o={};if(["dayTemplateData","displayMonths","markDisabled","firstDayOfWeek","navigation","minDate","maxDate","outsideDays","weekdays"].filter(r=>r in i).forEach(r=>o[r]=this[r]),this._service.set(o),"startDate"in i){let{currentValue:r,previousValue:s}=i.startDate;DS(s,r)&&this.navigateTo(this.startDate)}}onDateSelect(i){this._service.focus(i),this._service.select(i,{emitEvent:!0})}onNavigateDateSelect(i){this._service.open(i)}onNavigateEvent(i){switch(i){case vu.PREV:this._service.open(this._calendar.getPrev(this.model.firstDate,"m",1));break;case vu.NEXT:this._service.open(this._calendar.getNext(this.model.firstDate,"m",1));break}}registerOnChange(i){this.onChange=i}registerOnTouched(i){this.onTouched=i}setDisabledState(i){this._service.set({disabled:i})}writeValue(i){this._controlValue=Ot.from(this._ngbDateAdapter.fromModel(i)),this._service.select(this._controlValue)}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=ee({type:t,selectors:[["ngb-datepicker"]],contentQueries:function(o,r,s){if(o&1&&Pt(s,uk,7),o&2){let a;pe(a=he())&&(r.contentTemplateFromContent=a.first)}},viewQuery:function(o,r){if(o&1&&(Ft(RO,7),Ft(LO,7)),o&2){let s;pe(s=he())&&(r._defaultDayTemplate=s.first),pe(s=he())&&(r._contentEl=s.first)}},hostVars:2,hostBindings:function(o,r){o&2&&_t("disabled",r.model.disabled)},inputs:{contentTemplate:"contentTemplate",dayTemplate:"dayTemplate",dayTemplateData:"dayTemplateData",displayMonths:"displayMonths",firstDayOfWeek:"firstDayOfWeek",footerTemplate:"footerTemplate",markDisabled:"markDisabled",maxDate:"maxDate",minDate:"minDate",navigation:"navigation",outsideDays:"outsideDays",showWeekNumbers:"showWeekNumbers",startDate:"startDate",weekdays:"weekdays"},outputs:{navigate:"navigate",dateSelect:"dateSelect"},exportAs:["ngbDatepicker"],standalone:!0,features:[Ci([{provide:rn,useExisting:ci(()=>t),multi:!0},Ef]),Zt,ae],decls:10,vars:9,consts:[["defaultDayTemplate",""],["defaultContentTemplate",""],["content",""],[1,"ngb-dp-header"],[3,"date","months","disabled","showSelect","prevDisabled","nextDisabled","selectBoxes"],[1,"ngb-dp-content"],[3,"ngTemplateOutlet","ngTemplateOutletContext","ngTemplateOutletInjector"],[3,"ngTemplateOutlet"],["ngbDatepickerDayView","",3,"date","currentMonth","selected","disabled","focused"],[1,"ngb-dp-month"],[1,"ngb-dp-month-name"],[3,"month"],[3,"navigate","select","date","months","disabled","showSelect","prevDisabled","nextDisabled","selectBoxes"]],template:function(o,r){if(o&1&&(G(0,VO,1,5,"ng-template",null,0,ui)(2,GO,2,0,"ng-template",null,1,ui),_(4,"div",3),G(5,jO,1,7,"ngb-datepicker-navigation",4),y(),_(6,"div",5,2),G(8,zO,0,0,"ng-template",6),y(),G(9,UO,0,0,"ng-template",7)),o&2){let s=He(3);g(5),Ve(5,r.navigation!=="none"?5:-1),g(),_t("ngb-dp-months",!r.contentTemplate),g(2),C("ngTemplateOutlet",r.contentTemplate||(r.contentTemplateFromContent==null?null:r.contentTemplateFromContent.templateRef)||s)("ngTemplateOutletContext",dn(7,NO,r))("ngTemplateOutletInjector",r.injector),g(),C("ngTemplateOutlet",r.footerTemplate)}},dependencies:[zr,lk,pk,dk],styles:[`ngb-datepicker{border:1px solid var(--bs-border-color);border-radius:.25rem;display:inline-block}ngb-datepicker-month{pointer-events:auto}ngb-datepicker.dropdown-menu{padding:0}ngb-datepicker.disabled .ngb-dp-weekday,ngb-datepicker.disabled .ngb-dp-week-number,ngb-datepicker.disabled .ngb-dp-month-name{color:var(--bs-text-muted)}.ngb-dp-body{z-index:1055}.ngb-dp-header{border-bottom:0;border-radius:.25rem .25rem 0 0;padding-top:.25rem;background-color:var(--bs-tertiary-bg)}.ngb-dp-months{display:flex}.ngb-dp-month{pointer-events:none}.ngb-dp-month-name{font-size:larger;height:2rem;line-height:2rem;text-align:center;background-color:var(--bs-tertiary-bg)}.ngb-dp-month+.ngb-dp-month .ngb-dp-month-name,.ngb-dp-month+.ngb-dp-month .ngb-dp-week{padding-left:1rem}.ngb-dp-month:last-child .ngb-dp-week{padding-right:.25rem}.ngb-dp-month:first-child .ngb-dp-week{padding-left:.25rem}.ngb-dp-month .ngb-dp-week:last-child{padding-bottom:.25rem}
`],encapsulation:2,changeDetection:0});let e=t;return e})(),yu=(e,t)=>t?t.some(n=>n.contains(e)):!1,SS=(e,t)=>!t||WO(e,t)!=null,hk=(()=>{let e=()=>/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2,t=()=>/Android/.test(navigator.userAgent);return typeof navigator<"u"?!!navigator.userAgent&&(e()||t()):!1})(),mk=e=>hk?()=>setTimeout(()=>e(),100):e;function fk(e,t,n,i,o,r,s,a){n&&e.runOutsideAngular(mk(()=>{let l=m=>{let f=m.target;return m.button===2||yu(f,s)?!1:n==="inside"?yu(f,r)&&SS(f,a):n==="outside"?!yu(f,r):SS(f,a)||!yu(f,r)},u=qt(t,"keydown").pipe(tt(o),Tt(m=>m.key==="Escape"),it(m=>m.preventDefault())),p=qt(t,"mousedown").pipe(se(l),tt(o)),h=qt(t,"mouseup").pipe(Bl(p),Tt(([m,f])=>f),Jf(0),tt(o));Zf([u.pipe(se(m=>0)),h.pipe(se(m=>1))]).subscribe(m=>e.run(()=>i(m)))}))}var gk=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function _k(e){let t=Array.from(e.querySelectorAll(gk)).filter(n=>n.tabIndex!==-1);return[t[0],t[t.length-1]]}var yk=(e,t,n,i=!1)=>{e.runOutsideAngular(()=>{let o=qt(t,"focusin").pipe(tt(n),se(r=>r.target));qt(t,"keydown").pipe(tt(n),Tt(r=>r.key==="Tab"),Bl(o)).subscribe(([r,s])=>{let[a,l]=_k(t);(s===a||s===t)&&r.shiftKey&&(l.focus(),r.preventDefault()),s===l&&!r.shiftKey&&(a.focus(),r.preventDefault())}),i&&qt(t,"click").pipe(tt(n),Bl(o),se(r=>r[1])).subscribe(r=>r.focus())})},vk=(()=>{let t=class t{constructor(){this._element=F(Je).documentElement}isRTL(){return(this._element.getAttribute("dir")||"").toLowerCase()==="rtl"}};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),bk=/\s+/,wk=/  +/gi,Sk={top:["top"],bottom:["bottom"],start:["left","right"],left:["left"],end:["right","left"],right:["right"],"top-start":["top-start","top-end"],"top-left":["top-start"],"top-end":["top-end","top-start"],"top-right":["top-end"],"bottom-start":["bottom-start","bottom-end"],"bottom-left":["bottom-start"],"bottom-end":["bottom-end","bottom-start"],"bottom-right":["bottom-end"],"start-top":["left-start","right-start"],"left-top":["left-start"],"start-bottom":["left-end","right-end"],"left-bottom":["left-end"],"end-top":["right-start","left-start"],"right-top":["right-start"],"end-bottom":["right-end","left-end"],"right-bottom":["right-end"]};function Ck(e,t){let[n,i]=Sk[e];return t&&i||n}var Tk=/^left/,Mk=/^right/,Dk=/^start/,Ek=/^end/;function xk(e,t){let[n,i]=t.split("-"),o=n.replace(Tk,"start").replace(Mk,"end"),r=[o];if(i){let s=i;(n==="left"||n==="right")&&(s=s.replace(Dk,"top").replace(Ek,"bottom")),r.push(`${o}-${s}`)}return e&&(r=r.map(s=>`${e}-${s}`)),r.join(" ")}function CS({placement:e,baseClass:t},n){let i=Array.isArray(e)?e:e.split(bk),o=["top","bottom","start","end","top-start","top-end","bottom-start","bottom-end","start-top","start-bottom","end-top","end-bottom"],r=i.findIndex(u=>u==="auto");r>=0&&o.forEach(function(u){i.find(p=>p.search("^"+u)!==-1)==null&&i.splice(r++,1,u)});let s=i.map(u=>Ck(u,n.isRTL()));return{placement:s.shift(),modifiers:[{name:"bootstrapClasses",enabled:!!t,phase:"write",fn({state:u}){let p=new RegExp(t+"(-[a-z]+)*","gi"),h=u.elements.popper,m=u.placement,f=h.className;f=f.replace(p,""),f+=` ${xk(t,m)}`,f=f.trim().replace(wk," "),h.className=f}},ff,yf,df,{enabled:!0,name:"flip",options:{fallbackPlacements:s}},{enabled:!0,name:"preventOverflow",phase:"main",fn:function(){}}]}}function TS(e){return e}function Ik(){let e=F(vk),t=null;return{createPopper(n){if(!t){let o=(n.updatePopperOptions||TS)(CS(n,e));t=Mf(n.hostElement,n.targetElement,o)}},update(){t&&t.update()},setOptions(n){if(t){let o=(n.updatePopperOptions||TS)(CS(n,e));t.setOptions(o)}},destroy(){t&&(t.destroy(),t=null)}}}function Ok(){return new kk}var xS=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275prov=U({token:t,factory:()=>Ok(),providedIn:"root"});let e=t;return e})(),kk=(()=>{let t=class t extends xS{parse(i){if(i!=null){let o=i.trim().split("-");if(o.length===1&&to(o[0]))return{year:ln(o[0]),month:null,day:null};if(o.length===2&&to(o[0])&&to(o[1]))return{year:ln(o[0]),month:ln(o[1]),day:null};if(o.length===3&&to(o[0])&&to(o[1])&&to(o[2]))return{year:ln(o[0]),month:ln(o[1]),day:ln(o[2])}}return null}format(i){return i?`${i.year}-${to(i.month)?bS(i.month):""}-${to(i.day)?bS(i.day):""}`:""}};t.\u0275fac=(()=>{let i;return function(r){return(i||(i=di(t)))(r||t)}})(),t.\u0275prov=U({token:t,factory:t.\u0275fac});let e=t;return e})(),MS=(()=>{let t=class t extends xf{constructor(){super(...arguments),this.autoClose=!0,this.placement=["bottom-start","bottom-end","top-start","top-end"],this.popperOptions=i=>i,this.restoreFocus=!0}};t.\u0275fac=(()=>{let i;return function(r){return(i||(i=di(t)))(r||t)}})(),t.\u0275prov=U({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function Ak(e){return t=>(t.modifiers.push(gf,{name:"offset",options:{offset:()=>e}}),t)}var IS=(()=>{let t=class t{constructor(){this._parserFormatter=F(xS),this._elRef=F(ze),this._vcRef=F(Ul),this._ngZone=F(ct),this._calendar=F(na),this._dateAdapter=F(If),this._document=F(Je),this._changeDetector=F(Gt),this._config=F(MS),this._cRef=null,this._disabled=!1,this._elWithFocus=null,this._model=null,this._positioning=Ik(),this._destroyCloseHandlers$=new xe,this.autoClose=this._config.autoClose,this.placement=this._config.placement,this.popperOptions=this._config.popperOptions,this.container=this._config.container,this.positionTarget=this._config.positionTarget,this.dateSelect=new $,this.navigate=new $,this.closed=new $,this._onChange=i=>{},this._onTouched=()=>{},this._validatorChange=()=>{}}get disabled(){return this._disabled}set disabled(i){this._disabled=i===""||i&&i!=="false",this.isOpen()&&this._cRef.instance.setDisabledState(this._disabled)}registerOnChange(i){this._onChange=i}registerOnTouched(i){this._onTouched=i}registerOnValidatorChange(i){this._validatorChange=i}setDisabledState(i){this.disabled=i}validate(i){let{value:o}=i;if(o!=null){let r=this._fromDateStruct(this._dateAdapter.fromModel(o));if(!r)return{ngbDate:{invalid:o}};if(this.minDate&&r.before(Ot.from(this.minDate)))return{ngbDate:{minDate:{minDate:this.minDate,actual:o}}};if(this.maxDate&&r.after(Ot.from(this.maxDate)))return{ngbDate:{maxDate:{maxDate:this.maxDate,actual:o}}}}return null}writeValue(i){this._model=this._fromDateStruct(this._dateAdapter.fromModel(i)),this._writeModelValue(this._model)}manualDateChange(i,o=!1){let r=i!==this._inputValue;r&&(this._inputValue=i,this._model=this._fromDateStruct(this._parserFormatter.parse(i))),(r||!o)&&this._onChange(this._model?this._dateAdapter.toModel(this._model):i===""?null:i),o&&this._model&&this._writeModelValue(this._model)}isOpen(){return!!this._cRef}open(){if(!this.isOpen()){this._cRef=this._vcRef.createComponent(ES),this._applyPopupStyling(this._cRef.location.nativeElement),this._applyDatepickerInputs(this._cRef),this._subscribeForDatepickerOutputs(this._cRef.instance),this._cRef.instance.ngOnInit(),this._cRef.instance.writeValue(this._dateAdapter.toModel(this._model)),this._cRef.instance.registerOnChange(o=>{this.writeValue(o),this._onChange(o),this._onTouched()}),this._cRef.changeDetectorRef.detectChanges(),this._cRef.instance.setDisabledState(this.disabled),this.container==="body"&&this._document.querySelector(this.container)?.appendChild(this._cRef.location.nativeElement),this._elWithFocus=this._document.activeElement,yk(this._ngZone,this._cRef.location.nativeElement,this.closed,!0),setTimeout(()=>this._cRef?.instance.focus());let i;if(vS(this.positionTarget)?i=this._document.querySelector(this.positionTarget):this.positionTarget instanceof HTMLElement?i=this.positionTarget:i=this._elRef.nativeElement,this.positionTarget&&!i)throw new Error("ngbDatepicker could not find element declared in [positionTarget] to position against.");this._ngZone.runOutsideAngular(()=>{this._cRef&&i&&(this._positioning.createPopper({hostElement:i,targetElement:this._cRef.location.nativeElement,placement:this.placement,updatePopperOptions:o=>this.popperOptions(Ak([0,2])(o))}),this._zoneSubscription=this._ngZone.onStable.subscribe(()=>this._positioning.update()))}),this._setCloseHandlers()}}close(){if(this.isOpen()){this._cRef?.destroy(),this._cRef=null,this._positioning.destroy(),this._zoneSubscription?.unsubscribe(),this._destroyCloseHandlers$.next(),this.closed.emit(),this._changeDetector.markForCheck();let i=this._elWithFocus;vS(this.restoreFocus)?i=this._document.querySelector(this.restoreFocus):this.restoreFocus!==void 0&&(i=this.restoreFocus),i&&i.focus?i.focus():this._document.body.focus()}}toggle(){this.isOpen()?this.close():this.open()}navigateTo(i){this.isOpen()&&this._cRef.instance.navigateTo(i)}onBlur(){this._onTouched()}onFocus(){this._elWithFocus=this._elRef.nativeElement}ngOnChanges(i){if((i.minDate||i.maxDate)&&(this._validatorChange(),this.isOpen()&&(i.minDate&&this._cRef.setInput("minDate",this.minDate),i.maxDate&&this._cRef.setInput("maxDate",this.maxDate))),i.datepickerClass){let{currentValue:o,previousValue:r}=i.datepickerClass;this._applyPopupClass(o,r)}i.autoClose&&this.isOpen()&&this._setCloseHandlers()}ngOnDestroy(){this.close()}_applyDatepickerInputs(i){["contentTemplate","dayTemplate","dayTemplateData","displayMonths","firstDayOfWeek","footerTemplate","markDisabled","minDate","maxDate","navigation","outsideDays","showNavigation","showWeekNumbers","weekdays"].forEach(o=>{this[o]!==void 0&&i.setInput(o,this[o])}),i.setInput("startDate",this.startDate||this._model)}_applyPopupClass(i,o){let r=this._cRef?.location.nativeElement;r&&(i&&r.classList.add(i),o&&r.classList.remove(o))}_applyPopupStyling(i){i.classList.add("dropdown-menu","show"),this.container==="body"&&i.classList.add("ngb-dp-body"),this._applyPopupClass(this.datepickerClass)}_subscribeForDatepickerOutputs(i){i.navigate.subscribe(o=>this.navigate.emit(o)),i.dateSelect.subscribe(o=>{this.dateSelect.emit(o),(this.autoClose===!0||this.autoClose==="inside")&&this.close()})}_writeModelValue(i){let o=this._parserFormatter.format(i);this._inputValue=o,this._elRef.nativeElement.value=o,this.isOpen()&&(this._cRef.instance.writeValue(this._dateAdapter.toModel(i)),this._onTouched())}_fromDateStruct(i){let o=i?new Ot(i.year,i.month,i.day):null;return this._calendar.isValid(o)?o:null}_setCloseHandlers(){this._destroyCloseHandlers$.next(),fk(this._ngZone,this._document,this.autoClose,()=>this.close(),this._destroyCloseHandlers$,[],[this._elRef.nativeElement,this._cRef.location.nativeElement])}};t.\u0275fac=function(o){return new(o||t)},t.\u0275dir=ye({type:t,selectors:[["input","ngbDatepicker",""]],hostVars:1,hostBindings:function(o,r){o&1&&x("input",function(a){return r.manualDateChange(a.target.value)})("change",function(a){return r.manualDateChange(a.target.value,!0)})("focus",function(){return r.onFocus()})("blur",function(){return r.onBlur()}),o&2&&Sg("disabled",r.disabled)},inputs:{autoClose:"autoClose",contentTemplate:"contentTemplate",datepickerClass:"datepickerClass",dayTemplate:"dayTemplate",dayTemplateData:"dayTemplateData",displayMonths:"displayMonths",firstDayOfWeek:"firstDayOfWeek",footerTemplate:"footerTemplate",markDisabled:"markDisabled",minDate:"minDate",maxDate:"maxDate",navigation:"navigation",outsideDays:"outsideDays",placement:"placement",popperOptions:"popperOptions",restoreFocus:"restoreFocus",showWeekNumbers:"showWeekNumbers",startDate:"startDate",container:"container",positionTarget:"positionTarget",weekdays:"weekdays",disabled:"disabled"},outputs:{dateSelect:"dateSelect",navigate:"navigate",closed:"closed"},exportAs:["ngbDatepicker"],standalone:!0,features:[Ci([{provide:rn,useExisting:ci(()=>t),multi:!0},{provide:Xm,useExisting:ci(()=>t),multi:!0},{provide:xf,useExisting:MS}]),Zt]});let e=t;return e})();var bae=new Date(1882,10,12),wae=new Date(2174,10,25);var Sae=1e3*60*60*24;var Of=1080,Pk=24*Of,Fk=12*Of+793,Cae=29*Pk+Fk,Tae=11*Of+204;var OS=(()=>{let t=class t{};t.\u0275fac=function(o){return new(o||t)},t.\u0275mod=Bt({type:t}),t.\u0275inj=Ht({});let e=t;return e})();var Mae=new Ie("live announcer delay",{providedIn:"root",factory:()=>100});function Lk(e,t){if(e&1){let n=oe();V(0,"hr",11),_(1,"button",12),x("click",function(){A(n);let o=T(),r=He(4);return o.setToday(),P(r.close())}),L(2,"Today"),y(),_(3,"button",13),x("click",function(){A(n);let o=T(),r=He(4);return o.clearDate(),P(r.close())}),L(4,"Clear"),y()}}var kS=(()=>{let t=class t{constructor(){this.today=F(na).getToday(),this.dateValue=null,this.classInput="",this.dateValueChanged=new $}ngOnInit(){let i=new Date;this.minDate={year:i.getFullYear()-300,month:1,day:1}}clearDate(){this.dateValue=null,this.dateValueChanged.emit(this.dateValue)}setToday(){this.dateValue=this.today,this.dateValueChanged.emit(this.dateValue)}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=ee({type:t,selectors:[["app-datepicker"]],inputs:{dateValue:"dateValue",classInput:"classInput"},outputs:{dateValueChanged:"dateValueChanged"},standalone:!0,features:[ae],decls:12,vars:4,consts:[["cal",""],["dtpickr","ngbDatepicker"],["btn",""],["footerTemplt",""],[1,"col-12"],[1,"input-group"],["placeholder","yyyy-mm-dd","name","dp","ngbDatepicker","","placement","top","container","body","autoClose","true",1,"form-control",3,"ngModelChange","ngClass","ngModel","footerTemplate","minDate"],["title","Toggle Calender","type","button",1,"btn","btn-sm","btn-outline-secondary",3,"click"],[1,"fa-regular","fa-calendar-days"],["title","Clear",1,"btn","btn-sm","btn-outline-secondary",3,"click"],[1,"fa-solid","fa-xmark"],[1,"my-0"],["title","Today",1,"btn","btn-primary","btn-sm","m-2","float-start",3,"click"],["title","Clear",1,"btn","btn-secondary","btn-sm","m-2","float-end",3,"click"]],template:function(o,r){if(o&1){let s=oe();_(0,"div",4,0)(2,"div",5)(3,"input",6,1),Qe("ngModelChange",function(l){return A(s),Ke(r.dateValue,l)||(r.dateValue=l),P(l)}),x("ngModelChange",function(){A(s);let l=He(4);return r.dateValueChanged.emit(r.dateValue),P(l.close())}),y(),_(5,"button",7,2),x("click",function(){A(s);let l=He(4);return P(l.toggle())}),V(7,"i",8),y(),_(8,"button",9),x("click",function(){A(s);let l=He(4);return r.clearDate(),P(l.close())}),V(9,"i",10),y()()(),G(10,Lk,5,0,"ng-template",null,3,ui)}if(o&2){let s=He(11);g(3),C("ngClass",r.classInput),Ye("ngModel",r.dateValue),C("footerTemplate",s)("minDate",r.minDate)}},dependencies:[OS,IS,bt,Li,oi,$t,Te,Ti],styles:[`.ngb-dp-today{background:#ee784e}
`],encapsulation:2});let e=t;return e})();var AS=(()=>{let t=class t{constructor(i){this.mapService=i,this.subscription=new On,this.title="Filter Field",this.tooltip="Filter Field",this.selectedItemsChanged=new $,this.Value1=null,this.Value2=null,this.value2Ok=null,this.DELIMITER="-"}ngOnInit(){this.subscription=this.mapService.resetPlatformFilters$.subscribe(i=>{i==!0&&(this.Value1=null,this.Value2=null)})}setValue1(i){this.Value1=i,this.applyFilter()}setValue2(i){this.Value2=i,this.applyFilter()}resetValues(){this.Value1=null,this.Value2=null,this.resetFilter()}applyFilter(){this.value2Ok=!0;let i="";if(this.Value1!=null&&this.Value2==null)i=">= "+this.toModel(this.Value1);else if(this.Value1!=null&&this.Value2!=null){let o=new Ot(this.Value1.year,this.Value1.month,this.Value1.day);new Ot(this.Value2.year,this.Value2.month,this.Value2.day).before(o)?this.value2Ok=!1:(this.value2Ok=!0,i="between "+this.toModel(this.Value1)+" AND "+this.toModel(this.Value2))}else this.Value1==null&&this.Value2!=null&&(i="<= "+this.toModel(this.Value2));i.length>0?this.selectedItemsChanged.emit(i):this.resetFilter()}resetFilter(){this.selectedItemsChanged.emit(null)}toModel(i){return i?"'"+i.year.toString().padStart(4,"0")+this.DELIMITER+i.month.toString().padStart(2,"0")+this.DELIMITER+i.day.toString().padStart(2,"0")+"'":null}ngOnDestroy(){this.subscription.unsubscribe()}};t.\u0275fac=function(o){return new(o||t)(H(Ri))},t.\u0275cmp=ee({type:t,selectors:[["app-date-filter"]],inputs:{title:"title",tooltip:"tooltip"},outputs:{selectedItemsChanged:"selectedItemsChanged"},standalone:!0,features:[ae],decls:10,vars:7,consts:[[1,"d-flex"],[2,"align-self","center",3,"title"],["title","Clear Filter",1,"ms-auto","no-border","rounded-0","btn","btn-sm",3,"click","disabled"],[1,"fa-solid","fa-filter-circle-xmark","text-primary"],["title","value for filter",1,"rangeControls","mt-2","d-flex","gap-2"],[1,"d-grid","gap-2"],["title","Date1",3,"dateValueChanged","dateValue"],[3,"dateValueChanged","dateValue","title","classInput"]],template:function(o,r){o&1&&(_(0,"div")(1,"div",0)(2,"h6",1),L(3),y(),_(4,"button",2),x("click",function(){return r.setValue1(null),r.setValue2(null)}),V(5,"i",3),y()(),_(6,"div",4)(7,"div",5)(8,"app-datepicker",6),x("dateValueChanged",function(a){return r.setValue1(a)}),y(),_(9,"app-datepicker",7),x("dateValueChanged",function(a){return r.setValue2(a)}),y()()()()),o&2&&(g(2),C("title",r.tooltip),g(),de(r.title),g(),C("disabled",r.Value1==null&&r.Value2==null),g(4),C("dateValue",r.Value1),g(),C("dateValue",r.Value2)("title",r.value2Ok==!1?"Invalid Data. Checks: Date2 > Date1":"Date2")("classInput",r.value2Ok==!1?"data-invalid":""))},dependencies:[Te,bt,kS],encapsulation:2});let e=t;return e})();var PS=(()=>{let t=class t{constructor(i){this.mapService=i,this.subscription=new On,this.title="Filter Field",this.tooltip="Filter Field",this.selectedItemsChanged=new $,this.Value1=null,this.Value2=null,this.value2Ok=null,this.filterApplied=!1}ngOnInit(){this.subscription=this.mapService.resetPlatformFilters$.subscribe(i=>{i==!0&&this.clearValues()})}clearValues(){this.Value1=null,this.Value2=null,this.filterApplied=!1}applyFilter(){this.filterApplied=!0,this.value2Ok=!0;let i="";this.Value1!=null&&this.Value2==null?i=">= "+this.Value1:this.Value1!=null&&this.Value2!=null?this.Value1>this.Value2?this.value2Ok=!1:(this.value2Ok=!0,i="between "+this.Value1+" AND "+this.Value2):this.Value1==null&&this.Value2!=null?i="<= "+this.Value2:this.filterApplied=!1,i.length>0?this.selectedItemsChanged.emit(i):this.resetFilter()}resetFilter(){this.selectedItemsChanged.emit(null)}ngOnDestroy(){this.subscription.unsubscribe()}};t.\u0275fac=function(o){return new(o||t)(H(Ri))},t.\u0275cmp=ee({type:t,selectors:[["app-simple-numeric-filter"]],inputs:{title:"title",tooltip:"tooltip"},outputs:{selectedItemsChanged:"selectedItemsChanged"},standalone:!0,features:[ae],decls:10,vars:7,consts:[["v1",""],["v2",""],[1,"d-flex"],[2,"align-content","center",3,"title"],["title","Clear Filter",1,"ms-auto","no-border","rounded-0","btn","btn-sm",3,"click","disabled"],[1,"fa-solid","fa-filter-circle-xmark","text-primary"],["title","value for filter",1,"rangeControls","mt-2","d-flex","gap-2"],["placeholder","Value1","title","Value1","type","number",1,"form-control",3,"ngModelChange","keydown.enter","blur","ngModel"],["placeholder","Value2","type","number",1,"form-control",3,"ngModelChange","keydown.enter","blur","ngModel","title","ngClass"]],template:function(o,r){if(o&1){let s=oe();_(0,"div",2)(1,"span",3),L(2),y(),_(3,"button",4),x("click",function(){return A(s),r.clearValues(),P(r.applyFilter())}),V(4,"i",5),y()(),_(5,"div",6)(6,"input",7,0),Qe("ngModelChange",function(l){return A(s),Ke(r.Value1,l)||(r.Value1=l),P(l)}),x("keydown.enter",function(){A(s);let l=He(7);return P(l.blur())})("blur",function(){return A(s),P(r.applyFilter())}),y(),_(8,"input",8,1),Qe("ngModelChange",function(l){return A(s),Ke(r.Value2,l)||(r.Value2=l),P(l)}),x("keydown.enter",function(){A(s);let l=He(9);return P(l.blur())})("blur",function(){return A(s),P(r.applyFilter())}),y()()}o&2&&(g(),C("title",r.tooltip),g(),de(r.title),g(),C("disabled",r.Value1==null&&r.Value2==null||!r.filterApplied),g(3),Ye("ngModel",r.Value1),g(2),Ye("ngModel",r.Value2),C("title",r.value2Ok==!1?"Invalid Data. Checks: Value2 > Value1":"Value2")("ngClass",r.value2Ok==!1?"data-invalid":""))},dependencies:[Te,Ti,bt,Li,_r,oi,$t]});let e=t;return e})();var FS=(()=>{let t=class t{constructor(i){this.mapService=i,this.subscription=new On,this.subscriptionP=new On,this.title="Filter Field",this.tooltip="Filter Field",this.LayerType=S.None,this.selectedItemsChanged=new $,this.Value=null,this.filterApplied=!1}ngOnInit(){this.subscription=this.mapService.resetPlatformFilters$.subscribe(i=>{i==!0&&this.LayerType==S.PlatformLayer&&this.clearValues()}),this.subscriptionP=this.mapService.resetPipelineFilters$.subscribe(i=>{i==!0&&this.LayerType==S.PipelineLayer&&this.clearValues()})}clearValues(){this.Value=null,this.filterApplied=!1}applyFilter(){this.filterApplied=!0;let i="";this.Value!=null?i="= "+this.Value:this.filterApplied=!1,i.length>0?this.selectedItemsChanged.emit(i):this.resetFilter()}resetFilter(){this.selectedItemsChanged.emit(null)}ngOnDestroy(){this.subscription.unsubscribe(),this.subscriptionP.unsubscribe()}};t.\u0275fac=function(o){return new(o||t)(H(Ri))},t.\u0275cmp=ee({type:t,selectors:[["app-numeric-equal-filter"]],inputs:{title:"title",tooltip:"tooltip",LayerType:"LayerType"},outputs:{selectedItemsChanged:"selectedItemsChanged"},standalone:!0,features:[ae],decls:8,vars:4,consts:[["v1",""],[1,"d-flex"],[2,"align-content","center",3,"title"],["title","Clear Filter",1,"ms-auto","no-border","rounded-0","btn","btn-sm",3,"click","disabled"],[1,"fa-solid","fa-filter-circle-xmark","text-primary"],["title","value for filter",1,"rangeControls","mt-2","d-flex","gap-2"],["placeholder","Value","title","Value","type","number",1,"form-control",3,"ngModelChange","keydown.enter","blur","ngModel"]],template:function(o,r){if(o&1){let s=oe();_(0,"div",1)(1,"span",2),L(2),y(),_(3,"button",3),x("click",function(){return A(s),r.clearValues(),P(r.applyFilter())}),V(4,"i",4),y()(),_(5,"div",5)(6,"input",6,0),Qe("ngModelChange",function(l){return A(s),Ke(r.Value,l)||(r.Value=l),P(l)}),x("keydown.enter",function(){A(s);let l=He(7);return P(l.blur())})("blur",function(){return A(s),P(r.applyFilter())}),y()()}o&2&&(g(),C("title",r.tooltip),g(),de(r.title),g(),C("disabled",r.Value==null||!r.filterApplied),g(3),Ye("ngModel",r.Value))},dependencies:[Te,bt,Li,_r,oi,$t]});let e=t;return e})();var RS=(()=>{let t=class t{constructor(){this.valueField="text",this.displayField="text",this.selectedItemsChanged=new $}onSelectionChanged(i){this.selectedItemsChanged.emit(i)}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=ee({type:t,selectors:[["app-single-select"]],inputs:{tooltip:"tooltip",title:"title",options:"options",selectedItem:"selectedItem",valueField:"valueField",displayField:"displayField"},outputs:{selectedItemsChanged:"selectedItemsChanged"},standalone:!0,features:[ae],decls:5,vars:6,consts:[[1,"row"],[1,"col-4","pe-0",2,"align-self","center",3,"title"],[1,"col-8","ps-0"],["placeholder","select",3,"ngModelChange","items","bindLabel","bindValue","ngModel"]],template:function(o,r){o&1&&(_(0,"div",0)(1,"h6",1),L(2),y(),_(3,"div",2)(4,"ng-select",3),Qe("ngModelChange",function(a){return Ke(r.selectedItem,a)||(r.selectedItem=a),a}),x("ngModelChange",function(a){return r.onSelectionChanged(a)}),y()()()),o&2&&(g(),C("title",r.tooltip),g(),de(r.title),g(2),C("items",r.options)("bindLabel",r.displayField)("bindValue",r.valueField),Ye("ngModel",r.selectedItem))},dependencies:[oS,nS,Te,bt,oi,$t]});let e=t;return e})();var LS=(e,t)=>({"fa-eye-slash":e,"fa-eye":t});function Nk(e,t){e&1&&V(0,"i",24)}function Vk(e,t){e&1&&V(0,"i",25)}function Hk(e,t){if(e&1){let n=oe();_(0,"div",26)(1,"div",27)(2,"input",28),Qe("ngModelChange",function(o){A(n);let r=T();return Ke(r.showBSEEPlatforms,o)||(r.showBSEEPlatforms=o),P(o)}),x("ngModelChange",function(){A(n);let o=T();return P(o.toggleBSEEPlatformLayer())}),y(),_(3,"label",29),L(4,"BSEE Platforms"),y()(),_(5,"div",30)(6,"div",31)(7,"div",32),L(8," Platform Filters "),_(9,"button",33),x("click",function(){A(n);let o=T();return P(o.clearPlatformFilters())}),V(10,"i",34),y(),_(11,"button",35),x("click",function(){A(n);let o=T();return P(o.downloadFilteredPlatforms())}),V(12,"i",36),y(),_(13,"button",37),V(14,"i",38),y()()(),_(15,"div",39)(16,"div")(17,"div",40)(18,"span",41),L(19,"Status"),y(),_(20,"button",1),x("click",function(){A(n);let o=T();return P(o.setPlatformStatus(o.PlatformStatusEnum.Active))}),L(21,"Active"),y(),_(22,"button",1),x("click",function(){A(n);let o=T();return P(o.setPlatformStatus(o.PlatformStatusEnum.Removed))}),L(23,"Removed"),y()()(),V(24,"hr",42),_(25,"app-dropdown-filter",43),x("selectedItemsChanged",function(o){A(n);let r=T();return P(r.OnAreaFilterChanged(o))}),y(),V(26,"hr",42),_(27,"app-dropdown-filter",44),x("selectedItemsChanged",function(o){A(n);let r=T();return P(r.OnBlockNumberFilterChanged(o))}),y(),V(28,"hr",42),_(29,"app-dropdown-filter",45),x("selectedItemsChanged",function(o){A(n);let r=T();return P(r.OnBSEEOperatorFilterChanged(o))}),y(),V(30,"hr",42),_(31,"app-dropdown-filter",46),x("selectedItemsChanged",function(o){A(n);let r=T();return P(r.OniSIMSOperatorFilterChanged(o))}),y(),V(32,"hr",42),_(33,"app-dropdown-filter",47),x("selectedItemsChanged",function(o){A(n);let r=T();return P(r.OnPlatformNameFilterChanged(o))}),y(),V(34,"hr",42),_(35,"app-simple-numeric-filter",48),x("selectedItemsChanged",function(o){A(n);let r=T();return P(r.OnWDFilterChanged(o))}),y(),V(36,"hr",42),_(37,"app-numeric-equal-filter",49),x("selectedItemsChanged",function(o){A(n);let r=T();return P(r.OnCPXIDFilterChanged(o))}),y(),V(38,"hr",42),_(39,"app-date-filter",50),x("selectedItemsChanged",function(o){A(n);let r=T();return P(r.OnInstallDateChanged(o))}),y(),V(40,"hr",42),_(41,"app-date-filter",51),x("selectedItemsChanged",function(o){A(n);let r=T();return P(r.OnRemovalDateChanged(o))}),y()()()()}if(e&2){let n=T();g(2),Ye("ngModel",n.showBSEEPlatforms),g(7),C("disabled",!n.hasLayerFilters.PlatformLayer),g(11),C("ngClass",n.platformStatus.includes(n.PlatformStatusEnum.Active)?"btn-primary":"btn-outline-primary"),g(2),C("ngClass",n.platformStatus.includes(n.PlatformStatusEnum.Removed)?"btn-primary":"btn-outline-primary"),g(3),C("options",n.areaCodes)("selectedItems",n.platformFilterResetItems),g(2),C("options",n.blockNumbers)("selectedItems",n.platformFilterResetItems),g(2),C("options",n.bseeOperators)("selectedItems",n.platformFilterResetItems),g(2),C("options",n.iSIMSOperators)("selectedItems",n.platformFilterResetItems),g(2),C("options",n.platformNames)("selectedItems",n.platformFilterResetItems),g(4),C("LayerType",n.LayerOrWidgetEnum.PlatformLayer)}}function Bk(e,t){if(e&1&&(_(0,"li",52),L(1),y()),e&2){let n=t.$implicit;g(),de(n.Name)}}function Gk(e,t){e&1&&V(0,"i",24)}function jk(e,t){e&1&&V(0,"i",25)}function zk(e,t){if(e&1){let n=oe();_(0,"app-dropdown-filter",69),x("selectedItemsChanged",function(o){A(n);let r=T(2);return P(r.OnHConeAdvisoryFilterChanged(o))}),y()}if(e&2){let n=T(2);C("options",n.coneAdvisory)("selectedItems",n.hurricaneFilterResetItems)}}function Uk(e,t){if(e&1){let n=oe();_(0,"div")(1,"i",71),x("click",function(){let o=A(n).$implicit,r=T(3);return P(r.toggleShowFHlayer(o))}),y(),L(2),y()}if(e&2){let n=t.$implicit;g(),C("ngClass",Br(2,LS,!n.isVisible,n.isVisible)),g(),yt("",n.name," ")}}function $k(e,t){if(e&1&&(_(0,"div",39),G(1,Uk,3,5,"div",70),y()),e&2){let n=T(2);g(),C("ngForOf",n.fhSubLayers)}}function Wk(e,t){if(e&1){let n=oe();_(0,"div",26)(1,"div",30)(2,"div",31)(3,"div"),L(4," Historic Hurricanes "),_(5,"button",53),x("click",function(){A(n);let o=T();return P(o.clearHurricaneFilters())}),V(6,"i",34),y()()(),_(7,"div",39)(8,"app-dropdown-filter",54),x("selectedItemsChanged",function(o){A(n);let r=T();return P(r.OnHurricaneYearsFilterChanged(o))}),y(),V(9,"hr",42),_(10,"app-dropdown-filter",55),x("selectedItemsChanged",function(o){A(n);let r=T();return P(r.OnHurricaneNamesFilterChanged(o))}),y(),_(11,"div",56)(12,"div",57)(13,"input",58),Qe("ngModelChange",function(o){A(n);let r=T();return Ke(r.showHH_Track,o)||(r.showHH_Track=o),P(o)}),x("ngModelChange",function(){A(n);let o=T();return P(o.toggleShowHH_Track())}),y(),_(14,"label",59),L(15,"Track"),y()(),_(16,"div",57)(17,"input",60),Qe("ngModelChange",function(o){A(n);let r=T();return Ke(r.showHH_Cones,o)||(r.showHH_Cones=o),P(o)}),x("ngModelChange",function(){A(n);let o=T();return P(o.toggleShowHH_Cone())}),y(),_(18,"label",61),L(19,"Cones"),y()()(),G(20,zk,1,2,"app-dropdown-filter",62),y()(),_(21,"div",30)(22,"div",31)(23,"div",63),L(24," Forecast Hurricanes "),_(25,"div",64)(26,"div",65)(27,"input",66),Qe("ngModelChange",function(o){A(n);let r=T();return Ke(r.showFH,o)||(r.showFH=o),P(o)}),x("ngModelChange",function(){A(n);let o=T();return P(o.toggleShowFH())}),y(),V(28,"label",67),y()()()(),G(29,$k,2,1,"div",68),y()()}if(e&2){let n=T();g(5),C("disabled",!n.hasLayerFilters.HistoricHurricaneTrackLayer),g(3),C("options",n.hurricaneYears)("selectedItems",n.hurricaneFilterResetItems),g(2),C("options",n.hurricaneNames)("selectedItems",n.hurricaneFilterResetItems),g(3),Ye("ngModel",n.showHH_Track),g(4),C("disabled",n.coneAdvisory.length<1),Ye("ngModel",n.showHH_Cones),g(3),C("ngIf",n.coneAdvisory.length>0),g(7),Ye("ngModel",n.showFH),g(2),C("ngIf",n.showFH)}}function qk(e,t){e&1&&V(0,"i",24)}function Zk(e,t){e&1&&V(0,"i",25)}function Yk(e,t){if(e&1){let n=oe();_(0,"div")(1,"i",71),x("click",function(){let o=A(n).$implicit,r=T(2);return P(r.toggleShowRHlayer(o))}),y(),L(2),y()}if(e&2){let n=t.$implicit;g(),C("ngClass",Br(2,LS,!n.isVisible,n.isVisible)),g(),yt("",n.name," ")}}function Kk(e,t){if(e&1){let n=oe();_(0,"div",26)(1,"div",30)(2,"div",31)(3,"div"),L(4," Recent Hurricanes Filters "),_(5,"button",53),x("click",function(){A(n);let o=T();return P(o.clearRHFilters())}),V(6,"i",34),y()()(),_(7,"div",39)(8,"app-dropdown-filter",55),x("selectedItemsChanged",function(o){A(n);let r=T();return P(r.OnRHNamesFilterChanged(o))}),y(),G(9,Yk,3,5,"div",70),y()()()}if(e&2){let n=T();g(5),C("disabled",!n.hasLayerFilters.RecentHGroupLayer),g(3),C("options",n.rHurricaneNames)("selectedItems",n.recentHFilterResetItems),g(),C("ngForOf",n.rhSubLayers)}}function Qk(e,t){e&1&&V(0,"i",24)}function Jk(e,t){e&1&&V(0,"i",25)}function Xk(e,t){if(e&1){let n=oe();_(0,"div",26)(1,"div",30)(2,"div",31)(3,"div"),L(4," Pipeline Filters "),_(5,"button",33),x("click",function(){A(n);let o=T();return P(o.clearPipelineFilters())}),V(6,"i",34),y()()(),_(7,"div",39)(8,"app-dropdown-filter",72),x("selectedItemsChanged",function(o){A(n);let r=T();return P(r.OnPipelineOperatorFilterChanged(o))}),y(),V(9,"hr",42),_(10,"app-dropdown-filter",73),x("selectedItemsChanged",function(o){A(n);let r=T();return P(r.OnStatusCodeFilterChanged(o))}),y(),V(11,"hr",42),_(12,"app-numeric-equal-filter",74),x("selectedItemsChanged",function(o){A(n);let r=T();return P(r.OnSegmentNumFilterChanged(o))}),y()()()()}if(e&2){let n=T();g(5),C("disabled",!n.hasLayerFilters.PipelineLayer),g(3),C("options",n.pipelineOperators)("selectedItems",n.pipelineFilterResetItems),g(2),C("options",n.pipelineStatusCodes)("selectedItems",n.pipelineFilterResetItems),g(2),C("LayerType",n.LayerOrWidgetEnum.PipelineLayer)}}var NS=(()=>{let t=class t{constructor(i){this.mapService=i,this.PlatformStatusEnum=Bm,this.LayerOrWidgetEnum=S,this.showBlocks=!1,this.showArea=!1,this.showPlatforms=!0,this.showBSEEPlatforms=!1,this.platformStatus=[],this.showHurricaneUI=!1,this.showRecentHurricane=!1,this.showPipelines=!1,this.showHH_Track=!1,this.showHH_Cones=!1,this.showFH=!1,this.areaCodes=[],this.blockNumbers=[],this.bseeOperators=[],this.iSIMSOperators=[],this.platformNames=[],this.platformFilterResetItems=[],this.pipelineFilterResetItems=[],this.hurricaneFilterResetItems=[]=[],this.recentHFilterResetItems=[]=[],this.hurricaneYears=[],this.hurricaneNames=[],this.pipelineOperators=[],this.pipelineStatusCodes=[],this.coneAdvisory=[],this.rHurricaneNames=[],this.fhSubLayers=[],this.rhSubLayers=[],this.hasLayerFilters={[S.PlatformLayer]:!1,[S.HistoricHurricaneTrackLayer]:!1,[S.BSEEPlatformLayer]:!1,[S.Legend]:!1,[S.AreaLayer]:!1,[S.BLockLayer]:!1,[S.None]:!1,[S.PipelineLayer]:!1,[S.HHConeLayer]:!1,[S.ForecastGroupLayer]:!1,[S.ForecastSubLayer0]:!1,[S.ForecastSubLayer1]:!1,[S.ForecastSubLayer2]:!1,[S.ForecastSubLayer3]:!1,[S.ForecastSubLayer4]:!1,[S.ForecastSubLayer5]:!1,[S.ForecastSubLayer7]:!1,[S.ForecastSubLayer8]:!1,[S.ForecastSubLayer9]:!1,[S.ForecastSubLayer10]:!1,[S.ForecastSubLayer11]:!1,[S.ForecastSubLayerAll]:!1,[S.Sketch]:!1,[S.RecentHGroupLayer]:!1,[S.RecentHSubLayer0]:!1,[S.RecentHSubLayer1]:!1,[S.RecentHSubLayer2]:!1},this.resultSet=[],this.shapeOptions=["circle","square","cross","x","diamond","triangle","path"],this.selectedShape=null,this.selectedName=null,this.selectedColor="#0d6efd",this.selectedSize=4,this.selectedResultSet=null,i.setMapFilters$.subscribe(o=>{if(o==null)return;let r=o.details.size>0;o.layerOrWidget==S.PlatformLayer?this.hasLayerFilters.PlatformLayer=r:o.layerOrWidget==S.HistoricHurricaneTrackLayer?this.hasLayerFilters.HistoricHurricaneTrackLayer=r:o.layerOrWidget==S.HHConeLayer?this.hasLayerFilters.HHConeLayer=r:o.layerOrWidget==S.PipelineLayer?this.hasLayerFilters.PipelineLayer=r:o.layerOrWidget==S.RecentHGroupLayer&&(this.hasLayerFilters.RecentHGroupLayer=r)}),i.filterListFromMap$.subscribe(o=>{switch(o.type){case E.Area_Code:this.areaCodes=o.value;break;case E.Block_Number:this.blockNumbers=o.value;break;case E.Bus_Asc_Name:this.bseeOperators=o.value;break;case E.operatorName:this.iSIMSOperators=o.value;break;case E.platformName:this.platformNames=o.value;break;case E.HurricaneYear:this.hurricaneYears=o.value;break;case E.HurricaneName:this.hurricaneNames=o.value;break;case E.PipelineOperator:this.pipelineOperators=o.value;break;case E.PipelineStatusCode:this.pipelineStatusCodes=o.value;break;case E.HConeAdvisory:this.coneAdvisory=o.value;let r=this.showHH_Cones;this.showHH_Cones=this.showHH_Cones&&this.coneAdvisory.length>0,r!=this.showHH_Cones&&this.toggleShowHH_Cone();break;case E.RH_STORMNAME:this.rHurricaneNames=o.value;break;default:break}}),i.hLayerListFromMap$.subscribe(o=>{o&&(o?.layerOrWidget==S.ForecastGroupLayer&&(this.fhSubLayers=o.detailedList),o?.layerOrWidget==S.RecentHGroupLayer&&(this.rhSubLayers=o.detailedList))})}toggleBlockLayer(){this.showBlocks=!this.showBlocks,this.mapService.ShowHideLayersOrWidgets({type:S.BLockLayer,visible:this.showBlocks})}toggleAreaLayer(){this.showArea=!this.showArea,this.mapService.ShowHideLayersOrWidgets({type:S.AreaLayer,visible:this.showArea})}togglePlatformLayer(){this.showPlatforms=!this.showPlatforms,this.mapService.ShowHideLayersOrWidgets({type:S.PlatformLayer,visible:this.showPlatforms})}toggleBSEEPlatformLayer(){this.mapService.ShowHideLayersOrWidgets({type:S.BSEEPlatformLayer,visible:this.showBSEEPlatforms})}setPlatformStatus(i){this.platformStatus.includes(i)?this.platformStatus.splice(this.platformStatus.indexOf(i),1):this.platformStatus.push(i),this.mapService.setMapFilterValue(E.ActiveStatus,this.platformStatus)}clearPlatformFilters(){this.platformStatus=[],this.mapService.clearPlatformFilters(),this.platformFilterResetItems=[]}downloadFilteredPlatforms(){this.mapService.downloadFilteredData(S.PlatformLayer)}OnAreaFilterChanged(i){var o=i;this.mapService.setMapFilterValue(E.Area_Code,o.map(r=>r.value))}OnBlockNumberFilterChanged(i){var o=i;this.mapService.setMapFilterValue(E.Block_Number,o.map(r=>r.value))}OnBSEEOperatorFilterChanged(i){var o=i;this.mapService.setMapFilterValue(E.Bus_Asc_Name,o.map(r=>r.value))}OniSIMSOperatorFilterChanged(i){var o=i;this.mapService.setMapFilterValue(E.operatorName,o.map(r=>r.value))}OnPlatformNameFilterChanged(i){var o=i;this.mapService.setMapFilterValue(E.platformName,o.map(r=>r.value))}OnWDFilterChanged(i){i==null||i.length==0?this.mapService.setMapFilterValue(E.Water_Depth__feet_,[]):this.mapService.setMapFilterValue(E.Water_Depth__feet_,i)}OnCPXIDFilterChanged(i){i==null||i.length==0?this.mapService.setMapFilterValue(E.Complex_Id_Num,[]):this.mapService.setMapFilterValue(E.Complex_Id_Num,i)}OnInstallDateChanged(i){i==null||i.length==0?this.mapService.setMapFilterValue(E.Install_Date,[]):this.mapService.setMapFilterValue(E.Install_Date,i)}OnRemovalDateChanged(i){i==null||i.length==0?this.mapService.setMapFilterValue(E.Removal_Date,[]):this.mapService.setMapFilterValue(E.Removal_Date,i)}clearHurricaneFilters(){this.mapService.clearHurricaneFilters(),this.hurricaneFilterResetItems=[]}OnHurricaneYearsFilterChanged(i){var o=i;this.mapService.setMapFilterValue(E.HurricaneYear,o.map(r=>r.value))}OnHurricaneNamesFilterChanged(i){var o=i;this.mapService.setMapFilterValue(E.HurricaneName,o.map(r=>r.value))}OnRHNamesFilterChanged(i){var o=i;this.mapService.setMapFilterValue(E.RH_STORMNAME,o.map(r=>r.value))}toggleShowHH_Track(){this.mapService.ShowHideLayersOrWidgets({type:S.HistoricHurricaneTrackLayer,visible:this.showHH_Track})}toggleShowHH_Cone(){this.mapService.ShowHideLayersOrWidgets({type:S.HHConeLayer,visible:this.showHH_Cones})}OnHConeAdvisoryFilterChanged(i){var o=i;this.mapService.setMapFilterValue(E.HConeAdvisory,o.map(r=>r.value))}toggleShowFH(){this.mapService.ShowHideLayersOrWidgets({type:S.ForecastGroupLayer,visible:this.showFH})}toggleShowFHlayer(i){i.isVisible=!i.isVisible;let r="ForecastSubLayer"+i.id;this.mapService.ShowHideLayersOrWidgets({type:S[r],visible:i.isVisible})}toggleRecentHLayer(){this.showRecentHurricane=!this.showRecentHurricane,this.mapService.ShowHideLayersOrWidgets({type:S.RecentHGroupLayer,visible:this.showRecentHurricane})}toggleShowRHlayer(i){i.isVisible=!i.isVisible;let r="RecentHSubLayer"+i.id;this.mapService.ShowHideLayersOrWidgets({type:S[r],visible:i.isVisible})}clearRHFilters(){this.mapService.clearRHFilters(),this.recentHFilterResetItems=[]}togglePipelineLayer(){this.showPipelines=!this.showPipelines,this.mapService.ShowHideLayersOrWidgets({type:S.PipelineLayer,visible:this.showPipelines})}clearPipelineFilters(){this.mapService.clearPipelineFilters(),this.pipelineFilterResetItems=[]}OnPipelineOperatorFilterChanged(i){var o=i;this.mapService.setMapFilterValue(E.PipelineOperator,o.map(r=>r.value))}OnStatusCodeFilterChanged(i){var o=i;this.mapService.setMapFilterValue(E.PipelineStatusCode,o.map(r=>r.value))}OnSegmentNumFilterChanged(i){i==null||i.length==0?this.mapService.setMapFilterValue(E.PipelineSegmentNumber,[]):this.mapService.setMapFilterValue(E.PipelineSegmentNumber,i)}shapeSelectionChanged(i){this.selectedShape=i}SaveResultSet(){let i={Color:this.selectedColor!=null?this.selectedColor:"#0d6efd",Shape:this.selectedShape!=null?this.selectedShape:"circle",Size:this.selectedSize!=null?this.selectedSize:4,Name:this.selectedName!=null?this.selectedName:"defaultSet",Index:0};this.selectedResultSet!=null?(i.Index=this.selectedResultSet.Index,this.selectedResultSet=i,this.resultSet.splice(this.selectedResultSet.Index,1,i)):(i.Index=this.resultSet.length,this.resultSet.push(i))}};t.\u0275fac=function(o){return new(o||t)(H(Ri))},t.\u0275cmp=ee({type:t,selectors:[["app-side-panel"]],standalone:!0,features:[ae],decls:59,vars:21,consts:[[1,"d-grid","gap-2"],["type","button",1,"rounded-0","btn","btn-sm",3,"click","ngClass"],[1,"d-grid","gap-2","border","border-primary"],["class","fa-solid fa-angle-down collapseIcon",4,"ngIf"],["class","fa-solid fa-angle-up collapseIcon",4,"ngIf"],["class","d-grid gap-2 mx-2 pb-2",4,"ngIf"],["data-bs-scroll","true","data-bs-backdrop","static","tabindex","-1","id","offcanvasSettings","aria-labelledby","offcanvasRightLabel",1,"offcanvas","offcanvas-end"],[1,"offcanvas-header"],["id","offcanvasRightLabel",1,"offcanvas-title"],["type","button","data-bs-dismiss","offcanvas","aria-label","Close",1,"btn-close"],[1,"offcanvas-body"],["id","shapeSelectDD","title","Shape","tooltip","Select shape",3,"selectedItemsChanged","options"],[1,"row","mt-2"],["for","shapeColor",1,"col-4","pe-0","form-label",2,"align-self","center"],[1,"col-8","ps-0"],["type","color","id","shapeColor","title","Choose a color",1,"w-100","no-effect","form-control","form-control-color",2,"padding","10px",3,"ngModelChange","ngModel"],["for","shapeSize",1,"col-4","pe-0","form-label",2,"align-self","center"],["type","number","id","shapeSize","value","4","title","Choose a size",1,"form-control","no-effect",3,"ngModelChange","ngModel"],["for","setName",1,"col-4","pe-0","form-label",2,"align-self","center"],["type","text","id","setName","value","4","title","Choose a name",1,"form-control","no-effect",3,"ngModelChange","ngModel"],[1,"mt-2","rounded-0","btn","btn-primary",3,"click"],[1,"list-group","list-group-flush"],["class","list-group-item",4,"ngFor","ngForOf"],["type","button",1,"rounded-0","btn","btn-sm","btn-outline-primary",3,"click"],[1,"fa-solid","fa-angle-down","collapseIcon"],[1,"fa-solid","fa-angle-up","collapseIcon"],[1,"d-grid","gap-2","mx-2","pb-2"],[1,"mt-1","form-check","form-switch"],["type","checkbox","id","switchBSEE",1,"form-check-input",3,"ngModelChange","ngModel"],["for","switchBSEE",1,"form-check-label"],[1,"card","rounded-0"],[1,"card-header"],[1,"layerBtn"],["title","Clear Filters",1,"no-border","rounded-0","btn","ms-auto",3,"click","disabled"],[1,"fa-solid","fa-filter-circle-xmark","text-primary"],["title","Export filtered data",1,"no-border","rounded-0","btn","ms-auto",3,"click"],[1,"fa-solid","fa-download","text-primary"],["title","Settings","data-bs-toggle","offcanvas","data-bs-target","#offcanvasSettings","aria-controls","offcanvasSettings",1,"no-border","rounded-0","btn","ms-auto"],[1,"fa-solid","fa-ellipsis-vertical","text-primary"],[1,"card-body","d-grid","gap-2"],[1,"d-flex","gap-2","flex-wrap"],[2,"align-content","center"],[1,"my-1"],["title","Area Code","valueField","value","displayField","text",3,"selectedItemsChanged","options","selectedItems"],["title","Block Number","valueField","value","displayField","text",3,"selectedItemsChanged","options","selectedItems"],["title","BSEE Operator","valueField","value","displayField","text","itemsShowLimit","1",3,"selectedItemsChanged","options","selectedItems"],["title","iSIMS Operator","valueField","value","displayField","text","itemsShowLimit","1",3,"selectedItemsChanged","options","selectedItems"],["title","Platform Name","valueField","value","displayField","text","itemsShowLimit","1",3,"selectedItemsChanged","options","selectedItems"],["title","WD(ft)","tooltip","Water Depth feet",3,"selectedItemsChanged"],["title","Complex ID Num","tooltip","Complex ID Num equals",3,"selectedItemsChanged","LayerType"],["title","Install Date","tooltip","Install Date",3,"selectedItemsChanged"],["title","Removal Date","tooltip","Removal Date",3,"selectedItemsChanged"],[1,"list-group-item"],["title","Clear Filters",1,"rounded-0","btn","ms-auto","no-border",3,"click","disabled"],["title","Year","valueField","value","displayField","text","itemsShowLimit","1",3,"selectedItemsChanged","options","selectedItems"],["title","Name","valueField","value","displayField","text","itemsShowLimit","1",3,"selectedItemsChanged","options","selectedItems"],[1,"d-flex","gap-2"],[1,"mt-1","form-check"],["type","checkbox","id","checkShowHH_Track",1,"form-check-input","squareChkbox",3,"ngModelChange","ngModel"],["for","checkShowHH_Track",1,"form-check-label"],["type","checkbox","id","checkShowHH_Cone",1,"form-check-input","squareChkbox",3,"ngModelChange","disabled","ngModel"],["for","checkShowHH_Cone",1,"form-check-label"],["title","Advisory","valueField","value","displayField","text","itemsShowLimit","1",3,"options","selectedItems","selectedItemsChanged",4,"ngIf"],[1,"d-flex"],[1,"ms-auto"],[1,"form-check"],["type","checkbox","id","checkShowFH",1,"form-check-input","squareChkbox",3,"ngModelChange","ngModel"],["for","checkShowFH",1,"form-check-label"],["class","card-body d-grid gap-2",4,"ngIf"],["title","Advisory","valueField","value","displayField","text","itemsShowLimit","1",3,"selectedItemsChanged","options","selectedItems"],[4,"ngFor","ngForOf"],["title","visibility",1,"fa","text-primary","me-2",3,"click","ngClass"],["title","Operator","valueField","value","displayField","text","itemsShowLimit","1",3,"selectedItemsChanged","options","selectedItems"],["title","Status Code","valueField","value","displayField","text","itemsShowLimit","1",3,"selectedItemsChanged","options","selectedItems"],["title","Segment Number","tooltip","Segment Number equals",3,"selectedItemsChanged","LayerType"]],template:function(o,r){o&1&&(_(0,"div",0)(1,"div",0)(2,"button",1),x("click",function(){return r.toggleAreaLayer()}),L(3,"Area"),y(),_(4,"button",1),x("click",function(){return r.toggleBlockLayer()}),L(5,"Block"),y()(),_(6,"div",2)(7,"button",1),x("click",function(){return r.togglePlatformLayer()}),L(8,"Platforms"),G(9,Nk,1,0,"i",3)(10,Vk,1,0,"i",4),y(),G(11,Hk,42,15,"div",5),_(12,"div",6)(13,"div",7)(14,"h2",8),L(15,"Settings"),y(),V(16,"button",9),y(),_(17,"div",10)(18,"h5"),L(19,"Configration"),y(),_(20,"div")(21,"app-single-select",11),x("selectedItemsChanged",function(a){return r.selectedShape=a}),y(),_(22,"div",12)(23,"h6",13),L(24,"Color"),y(),_(25,"div",14)(26,"input",15),Qe("ngModelChange",function(a){return Ke(r.selectedColor,a)||(r.selectedColor=a),a}),y()()(),_(27,"div",12)(28,"h6",16),L(29,"Size"),y(),_(30,"div",14)(31,"input",17),Qe("ngModelChange",function(a){return Ke(r.selectedSize,a)||(r.selectedSize=a),a}),y()()(),_(32,"div",12)(33,"h6",18),L(34,"Result Set Name"),y(),_(35,"div",14)(36,"input",19),Qe("ngModelChange",function(a){return Ke(r.selectedName,a)||(r.selectedName=a),a}),y()()(),_(37,"button",20),x("click",function(){return r.SaveResultSet()}),L(38,"Save Result Set"),y()(),_(39,"ul",21),G(40,Bk,2,1,"li",22),y()()()(),_(41,"div",2)(42,"button",23),x("click",function(){return r.showHurricaneUI=!r.showHurricaneUI}),L(43,"Hurricanes"),G(44,Gk,1,0,"i",3)(45,jk,1,0,"i",4),y(),G(46,Wk,30,11,"div",5),y(),_(47,"div",2)(48,"button",23),x("click",function(){return r.toggleRecentHLayer()}),L(49,"Recent Hurricanes"),G(50,qk,1,0,"i",3)(51,Zk,1,0,"i",4),y(),G(52,Kk,10,4,"div",5),y(),_(53,"div",2)(54,"button",1),x("click",function(){return r.togglePipelineLayer()}),L(55,"Pipelines"),G(56,Qk,1,0,"i",3)(57,Jk,1,0,"i",4),y(),G(58,Xk,13,6,"div",5),y()()),o&2&&(g(2),C("ngClass",r.showArea?"btn-primary":"btn-outline-primary"),g(2),C("ngClass",r.showBlocks?"btn-primary":"btn-outline-primary"),g(3),C("ngClass",r.showPlatforms?"btn-primary":"btn-outline-primary"),g(2),C("ngIf",!r.showPlatforms),g(),C("ngIf",r.showPlatforms),g(),C("ngIf",r.showPlatforms),g(10),C("options",r.shapeOptions),g(5),Ye("ngModel",r.selectedColor),g(5),Ye("ngModel",r.selectedSize),g(5),Ye("ngModel",r.selectedName),g(4),C("ngForOf",r.resultSet),g(4),C("ngIf",!r.showHurricaneUI),g(),C("ngIf",r.showHurricaneUI),g(),C("ngIf",r.showHurricaneUI),g(4),C("ngIf",!r.showRecentHurricane),g(),C("ngIf",r.showRecentHurricane),g(),C("ngIf",r.showRecentHurricane),g(2),C("ngClass",r.showPipelines?"btn-primary":"btn-outline-primary"),g(2),C("ngIf",!r.showPipelines),g(),C("ngIf",r.showPipelines),g(),C("ngIf",r.showPipelines))},dependencies:[Te,Ti,lo,$i,bt,Li,_r,Jm,oi,$t,Y1,AS,PS,FS,RS],styles:[".collapseIcon[_ngcontent-%COMP%]{line-height:inherit!important;float:right}.layerBtn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.2rem .4rem}.offcanvas.offcanvas-end[_ngcontent-%COMP%]{width:300px}"]});let e=t;return e})();var VS=(()=>{let t=class t{constructor(){this.showPlatforms=!0,this.showLegend=!0}};t.\u0275fac=function(o){return new(o||t)},t.\u0275cmp=ee({type:t,selectors:[["app-root"]],standalone:!0,features:[ae],decls:10,vars:0,consts:[[1,"container-fliud",2,"margin-top","50px"],[1,"row"],[1,"col-10"],[1,"sidebar","col-2","ps-0"],["name","appSpinner","type","ball-atom"],[1,"text-white"]],template:function(o,r){o&1&&(V(0,"app-header"),_(1,"div",0)(2,"div",1)(3,"div",2),V(4,"app-esri-map"),y(),_(5,"div",3),V(6,"app-side-panel"),y()()(),_(7,"ngx-spinner",4)(8,"h1",5),L(9," Loading... "),y()())},dependencies:[Te,C1,$1,NS,y1],styles:[".sidebar[_ngcontent-%COMP%]{height:100vh;position:fixed-right;overflow-y:auto}"]});let e=t;return e})();nv(VS,Wv).catch(e=>console.error(e));
